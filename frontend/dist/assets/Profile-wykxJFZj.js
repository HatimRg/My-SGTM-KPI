import{u as X,a as L,l as E,j as e}from"./index-B_O7GBLG.js";import{r as c}from"./vendor-react-Bagy_njL.js";import{v as f,k as q,w as z,ax as M,r as w,ao as A,ay as d,y as x,D as h,M as F,b as T,z as l}from"./vendor-ui-ByylQ01J.js";import"./vendor-utils-MYqKZVQ3.js";function O(){const{user:r,updateProfile:b,changePassword:v}=X(),{language:P,setLanguage:k,languages:S}=L(),{isDark:p,toggleTheme:C}=E(),[n,u]=c.useState({name:r?.name||"",phone:r?.phone||""}),[a,i]=c.useState({current_password:"",password:"",password_confirmation:""}),[t,o]=c.useState({current:!1,new:!1,confirm:!1}),[g,j]=c.useState(!1),[y,N]=c.useState(!1),_=async s=>{s.preventDefault(),j(!0);try{await b(n),l.success("Profile updated successfully")}catch(m){l.error(m.response?.data?.message||"Failed to update profile")}finally{j(!1)}},D=async s=>{if(s.preventDefault(),a.password!==a.password_confirmation){l.error("Passwords do not match");return}if(a.password.length<8){l.error("Password must be at least 8 characters");return}N(!0);try{await v(a.current_password,a.password,a.password_confirmation),l.success("Password changed successfully"),i({current_password:"",password:"",password_confirmation:""})}catch(m){l.error(m.response?.data?.message||"Failed to change password")}finally{N(!1)}};return e.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Profile Settings"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Manage your account settings and preferences"})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Profile Information"})}),e.jsxs("form",{onSubmit:_,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-20 h-20 bg-hse-primary rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-2xl font-bold",children:r?.name?.charAt(0)?.toUpperCase()||"U"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:r?.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 capitalize flex items-center gap-1",children:[e.jsx(f,{className:"w-4 h-4"}),r?.role]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:n.name,onChange:s=>u({...n,name:s.target.value}),className:"input pl-10",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"email",value:r?.email||"",className:"input pl-10 bg-gray-50 dark:bg-gray-900",disabled:!0})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"tel",value:n.phone,onChange:s=>u({...n,phone:s.target.value}),className:"input pl-10",placeholder:"+212 6XX XXX XXX"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Role"}),e.jsxs("div",{className:"relative",children:[e.jsx(f,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:r?.role||"",className:"input pl-10 bg-gray-50 dark:bg-gray-900 capitalize",disabled:!0})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:g,className:"btn-primary",children:g?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4"}),"Save Changes"]})})})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Change Password"})}),e.jsxs("form",{onSubmit:D,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:t.current?"text":"password",value:a.current_password,onChange:s=>i({...a,current_password:s.target.value}),className:"input pl-10 pr-10",required:!0}),e.jsx("button",{type:"button",onClick:()=>o({...t,current:!t.current}),className:"absolute right-3 top-1/2 -translate-y-1/2",children:t.current?e.jsx(x,{className:"w-4 h-4 text-gray-400"}):e.jsx(h,{className:"w-4 h-4 text-gray-400"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:t.new?"text":"password",value:a.password,onChange:s=>i({...a,password:s.target.value}),className:"input pl-10 pr-10",required:!0,minLength:8}),e.jsx("button",{type:"button",onClick:()=>o({...t,new:!t.new}),className:"absolute right-3 top-1/2 -translate-y-1/2",children:t.new?e.jsx(x,{className:"w-4 h-4 text-gray-400"}):e.jsx(h,{className:"w-4 h-4 text-gray-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:t.confirm?"text":"password",value:a.password_confirmation,onChange:s=>i({...a,password_confirmation:s.target.value}),className:"input pl-10 pr-10",required:!0,minLength:8}),e.jsx("button",{type:"button",onClick:()=>o({...t,confirm:!t.confirm}),className:"absolute right-3 top-1/2 -translate-y-1/2",children:t.confirm?e.jsx(x,{className:"w-4 h-4 text-gray-400"}):e.jsx(h,{className:"w-4 h-4 text-gray-400"})})]})]})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Password must be at least 8 characters long"}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:y,className:"btn-primary",children:y?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4 animate-spin"}),"Changing..."]}):e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(d,{className:"w-4 h-4"}),"Change Password"]})})})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Preferences"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Language"}),e.jsx("select",{className:"input",value:P,onChange:s=>k(s.target.value),children:S.map(s=>e.jsx("option",{value:s.code,children:s.name},s.code))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Theme"}),e.jsxs("button",{type:"button",onClick:C,className:"w-full flex items-center justify-between px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-200",children:p?"Dark mode":"Light mode"}),e.jsx("span",{className:"flex items-center gap-1.5 text-gray-600 dark:text-gray-300",children:p?e.jsx(F,{className:"w-4 h-4"}):e.jsx(T,{className:"w-4 h-4"})})]})]})]})]})]})}export{O as default};
