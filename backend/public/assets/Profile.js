import{u as F,a as M,n as B,j as e}from"./index.js";import{r as n}from"./vendor-react.js";import{u as S,l as T,v as U,aA as R,s as p,ar as k,aB as d,x as h,y as u,M as I,b as K,z as l}from"./vendor-ui.js";import"./vendor-utils.js";function Q(){const{user:r,updateProfile:g,changePassword:C}=F(),{language:_,setLanguage:D,languages:X}=M(),{isDark:j,toggleTheme:L}=B(),[c,f]=n.useState({name:r?.name??"",phone:r?.phone??""}),[o,E]=n.useState({project_list_preference:r?.project_list_preference??"code"}),[a,i]=n.useState({current_password:"",password:"",password_confirmation:""}),[t,m]=n.useState({current:!1,new:!1,confirm:!1}),[y,N]=n.useState(!1),[b,w]=n.useState(!1),[v,P]=n.useState(!1),q=async s=>{s.preventDefault(),N(!0);try{await g(c),l.success("Profile updated successfully")}catch(x){l.error(x.response?.data?.message??"Failed to update profile")}finally{N(!1)}},z=async()=>{P(!0);try{await g(o),l.success("Preferences updated successfully")}catch(s){l.error(s.response?.data?.message??"Failed to update preferences")}finally{P(!1)}},A=async s=>{if(s.preventDefault(),a.password!==a.password_confirmation){l.error("Passwords do not match");return}if(a.password.length<8){l.error("Password must be at least 8 characters");return}w(!0);try{await C(a.current_password,a.password,a.password_confirmation),l.success("Password changed successfully"),i({current_password:"",password:"",password_confirmation:""})}catch(x){l.error(x.response?.data?.message||"Failed to change password")}finally{w(!1)}};return e.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Profile Settings"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Manage your account settings and preferences"})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Profile Information"})}),e.jsxs("form",{onSubmit:q,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-20 h-20 bg-hse-primary rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-2xl font-bold",children:r?.name?.charAt(0)?.toUpperCase()||"U"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:r?.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 capitalize flex items-center gap-1",children:[e.jsx(S,{className:"w-4 h-4"}),r?.role]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:c.name,onChange:s=>f({...c,name:s.target.value}),className:"input pl-10",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"email",value:r?.email??"",className:"input pl-10 bg-gray-50 dark:bg-gray-900",disabled:!0})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"tel",value:c.phone,onChange:s=>f({...c,phone:s.target.value}),className:"input pl-10",placeholder:"+212 6XX XXX XXX"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Role"}),e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:r?.role??"",className:"input pl-10 bg-gray-50 dark:bg-gray-900 capitalize",disabled:!0})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:y,className:"btn-primary",children:y?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4"}),"Save Changes"]})})})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Change Password"})}),e.jsxs("form",{onSubmit:A,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:t.current?"text":"password",value:a.current_password,onChange:s=>i({...a,current_password:s.target.value}),className:"input pl-10 pr-10",required:!0}),e.jsx("button",{type:"button",onClick:()=>m({...t,current:!t.current}),className:"absolute right-3 top-1/2 -translate-y-1/2",children:t.current?e.jsx(h,{className:"w-4 h-4 text-gray-400"}):e.jsx(u,{className:"w-4 h-4 text-gray-400"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:t.new?"text":"password",value:a.password,onChange:s=>i({...a,password:s.target.value}),className:"input pl-10 pr-10",required:!0,minLength:8}),e.jsx("button",{type:"button",onClick:()=>m({...t,new:!t.new}),className:"absolute right-3 top-1/2 -translate-y-1/2",children:t.new?e.jsx(h,{className:"w-4 h-4 text-gray-400"}):e.jsx(u,{className:"w-4 h-4 text-gray-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:t.confirm?"text":"password",value:a.password_confirmation,onChange:s=>i({...a,password_confirmation:s.target.value}),className:"input pl-10 pr-10",required:!0,minLength:8}),e.jsx("button",{type:"button",onClick:()=>m({...t,confirm:!t.confirm}),className:"absolute right-3 top-1/2 -translate-y-1/2",children:t.confirm?e.jsx(h,{className:"w-4 h-4 text-gray-400"}):e.jsx(u,{className:"w-4 h-4 text-gray-400"})})]})]})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Password must be at least 8 characters long"}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:b,className:"btn-primary",children:b?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"w-4 h-4 animate-spin"}),"Changing..."]}):e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(d,{className:"w-4 h-4"}),"Change Password"]})})})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Preferences"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Language"}),e.jsx("select",{className:"input",value:_,onChange:s=>D(s.target.value),children:X.map(s=>e.jsx("option",{value:s.code,children:s.name},s.code))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Project list preference"}),e.jsxs("select",{className:"input",value:o.project_list_preference,onChange:s=>E({...o,project_list_preference:s.target.value}),children:[e.jsx("option",{value:"code",children:"By code"}),e.jsx("option",{value:"name",children:"By name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Theme"}),e.jsxs("button",{type:"button",onClick:L,className:"w-full flex items-center justify-between px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-200",children:j?"Dark mode":"Light mode"}),e.jsx("span",{className:"flex items-center gap-1.5 text-gray-600 dark:text-gray-300",children:j?e.jsx(I,{className:"w-4 h-4"}):e.jsx(K,{className:"w-4 h-4"})})]})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{type:"button",onClick:z,disabled:v,className:"btn-primary",children:v?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4"}),"Save Preferences"]})})})]})]})}export{Q as default};
