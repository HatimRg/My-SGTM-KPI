var uR=Object.defineProperty;var mR=(e,t,a)=>t in e?uR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var A0=(e,t,a)=>mR(e,typeof t!="symbol"?t+"":t,a);function pR(e,t){for(var a=0;a<t.length;a++){const n=t[a];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=a(s);fetch(s.href,i)}})();var ro=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var iT={exports:{}},oy={},oT={exports:{}},Et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zp=Symbol.for("react.element"),fR=Symbol.for("react.portal"),hR=Symbol.for("react.fragment"),gR=Symbol.for("react.strict_mode"),xR=Symbol.for("react.profiler"),yR=Symbol.for("react.provider"),vR=Symbol.for("react.context"),bR=Symbol.for("react.forward_ref"),jR=Symbol.for("react.suspense"),wR=Symbol.for("react.memo"),_R=Symbol.for("react.lazy"),i2=Symbol.iterator;function kR(e){return e===null||typeof e!="object"?null:(e=i2&&e[i2]||e["@@iterator"],typeof e=="function"?e:null)}var lT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cT=Object.assign,dT={};function Bd(e,t,a){this.props=e,this.context=t,this.refs=dT,this.updater=a||lT}Bd.prototype.isReactComponent={};Bd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Bd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function uT(){}uT.prototype=Bd.prototype;function J_(e,t,a){this.props=e,this.context=t,this.refs=dT,this.updater=a||lT}var e1=J_.prototype=new uT;e1.constructor=J_;cT(e1,Bd.prototype);e1.isPureReactComponent=!0;var o2=Array.isArray,mT=Object.prototype.hasOwnProperty,t1={current:null},pT={key:!0,ref:!0,__self:!0,__source:!0};function fT(e,t,a){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)mT.call(t,n)&&!pT.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=a;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Zp,type:e,key:i,ref:o,props:s,_owner:t1.current}}function NR(e,t){return{$$typeof:Zp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function r1(e){return typeof e=="object"&&e!==null&&e.$$typeof===Zp}function SR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(a){return t[a]})}var l2=/\/+/g;function P0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?SR(""+e.key):t.toString(36)}function Vh(e,t,a,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Zp:case fR:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+P0(o,0):n,o2(s)?(a="",e!=null&&(a=e.replace(l2,"$&/")+"/"),Vh(s,t,a,"",function(d){return d})):s!=null&&(r1(s)&&(s=NR(s,a+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(l2,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",o2(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+P0(i,l);o+=Vh(i,t,a,c,s)}else if(c=kR(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+P0(i,l++),o+=Vh(i,t,a,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Wf(e,t,a){if(e==null)return e;var n=[],s=0;return Vh(e,n,"","",function(i){return t.call(a,i,s++)}),n}function AR(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(a){(e._status===0||e._status===-1)&&(e._status=1,e._result=a)},function(a){(e._status===0||e._status===-1)&&(e._status=2,e._result=a)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var en={current:null},Gh={transition:null},PR={ReactCurrentDispatcher:en,ReactCurrentBatchConfig:Gh,ReactCurrentOwner:t1};function hT(){throw Error("act(...) is not supported in production builds of React.")}Et.Children={map:Wf,forEach:function(e,t,a){Wf(e,function(){t.apply(this,arguments)},a)},count:function(e){var t=0;return Wf(e,function(){t++}),t},toArray:function(e){return Wf(e,function(t){return t})||[]},only:function(e){if(!r1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Et.Component=Bd;Et.Fragment=hR;Et.Profiler=xR;Et.PureComponent=J_;Et.StrictMode=gR;Et.Suspense=jR;Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PR;Et.act=hT;Et.cloneElement=function(e,t,a){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=cT({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=t1.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)mT.call(t,c)&&!pT.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=a;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Zp,type:e.type,key:s,ref:i,props:n,_owner:o}};Et.createContext=function(e){return e={$$typeof:vR,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:yR,_context:e},e.Consumer=e};Et.createElement=fT;Et.createFactory=function(e){var t=fT.bind(null,e);return t.type=e,t};Et.createRef=function(){return{current:null}};Et.forwardRef=function(e){return{$$typeof:bR,render:e}};Et.isValidElement=r1;Et.lazy=function(e){return{$$typeof:_R,_payload:{_status:-1,_result:e},_init:AR}};Et.memo=function(e,t){return{$$typeof:wR,type:e,compare:t===void 0?null:t}};Et.startTransition=function(e){var t=Gh.transition;Gh.transition={};try{e()}finally{Gh.transition=t}};Et.unstable_act=hT;Et.useCallback=function(e,t){return en.current.useCallback(e,t)};Et.useContext=function(e){return en.current.useContext(e)};Et.useDebugValue=function(){};Et.useDeferredValue=function(e){return en.current.useDeferredValue(e)};Et.useEffect=function(e,t){return en.current.useEffect(e,t)};Et.useId=function(){return en.current.useId()};Et.useImperativeHandle=function(e,t,a){return en.current.useImperativeHandle(e,t,a)};Et.useInsertionEffect=function(e,t){return en.current.useInsertionEffect(e,t)};Et.useLayoutEffect=function(e,t){return en.current.useLayoutEffect(e,t)};Et.useMemo=function(e,t){return en.current.useMemo(e,t)};Et.useReducer=function(e,t,a){return en.current.useReducer(e,t,a)};Et.useRef=function(e){return en.current.useRef(e)};Et.useState=function(e){return en.current.useState(e)};Et.useSyncExternalStore=function(e,t,a){return en.current.useSyncExternalStore(e,t,a)};Et.useTransition=function(){return en.current.useTransition()};Et.version="18.3.1";oT.exports=Et;var f=oT.exports;const le=Dt(f),CR=pR({__proto__:null,default:le},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ER=f,TR=Symbol.for("react.element"),OR=Symbol.for("react.fragment"),MR=Object.prototype.hasOwnProperty,DR=ER.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,IR={key:!0,ref:!0,__self:!0,__source:!0};function gT(e,t,a){var n,s={},i=null,o=null;a!==void 0&&(i=""+a),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)MR.call(t,n)&&!IR.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:TR,type:e,key:i,ref:o,props:s,_owner:DR.current}}oy.Fragment=OR;oy.jsx=gT;oy.jsxs=gT;iT.exports=oy;var r=iT.exports,uj={},xT={exports:{}},Cn={},yT={exports:{}},vT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,C){var D=B.length;B.push(C);e:for(;0<D;){var z=D-1>>>1,L=B[z];if(0<s(L,C))B[z]=C,B[D]=L,D=z;else break e}}function a(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var C=B[0],D=B.pop();if(D!==C){B[0]=D;e:for(var z=0,L=B.length,X=L>>>1;z<X;){var H=2*(z+1)-1,F=B[H],ke=H+1,ae=B[ke];if(0>s(F,D))ke<L&&0>s(ae,F)?(B[z]=ae,B[ke]=D,z=ke):(B[z]=F,B[H]=D,z=H);else if(ke<L&&0>s(ae,D))B[z]=ae,B[ke]=D,z=ke;else break e}}return C}function s(B,C){var D=B.sortIndex-C.sortIndex;return D!==0?D:B.id-C.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,m=null,p=3,g=!1,x=!1,h=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(B){for(var C=a(d);C!==null;){if(C.callback===null)n(d);else if(C.startTime<=B)n(d),C.sortIndex=C.expirationTime,t(c,C);else break;C=a(d)}}function _(B){if(h=!1,j(B),!x)if(a(c)!==null)x=!0,E(w);else{var C=a(d);C!==null&&W(_,C.startTime-B)}}function w(B,C){x=!1,h&&(h=!1,b(P),P=-1),g=!0;var D=p;try{for(j(C),m=a(c);m!==null&&(!(m.expirationTime>C)||B&&!R());){var z=m.callback;if(typeof z=="function"){m.callback=null,p=m.priorityLevel;var L=z(m.expirationTime<=C);C=e.unstable_now(),typeof L=="function"?m.callback=L:m===a(c)&&n(c),j(C)}else n(c);m=a(c)}if(m!==null)var X=!0;else{var H=a(d);H!==null&&W(_,H.startTime-C),X=!1}return X}finally{m=null,p=D,g=!1}}var k=!1,N=null,P=-1,A=5,M=-1;function R(){return!(e.unstable_now()-M<A)}function O(){if(N!==null){var B=e.unstable_now();M=B;var C=!0;try{C=N(!0,B)}finally{C?q():(k=!1,N=null)}}else k=!1}var q;if(typeof y=="function")q=function(){y(O)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,I=S.port2;S.port1.onmessage=O,q=function(){I.postMessage(null)}}else q=function(){v(O,0)};function E(B){N=B,k||(k=!0,q())}function W(B,C){P=v(function(){B(e.unstable_now())},C)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){x||g||(x=!0,E(w))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return a(c)},e.unstable_next=function(B){switch(p){case 1:case 2:case 3:var C=3;break;default:C=p}var D=p;p=C;try{return B()}finally{p=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,C){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var D=p;p=B;try{return C()}finally{p=D}},e.unstable_scheduleCallback=function(B,C,D){var z=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?z+D:z):D=z,B){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=D+L,B={id:u++,callback:C,priorityLevel:B,startTime:D,expirationTime:L,sortIndex:-1},D>z?(B.sortIndex=D,t(d,B),a(c)===null&&B===a(d)&&(h?(b(P),P=-1):h=!0,W(_,D-z))):(B.sortIndex=L,t(c,B),x||g||(x=!0,E(w))),B},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(B){var C=p;return function(){var D=p;p=C;try{return B.apply(this,arguments)}finally{p=D}}}})(vT);yT.exports=vT;var LR=yT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $R=f,An=LR;function Ke(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bT=new Set,Um={};function ql(e,t){Qc(e,t),Qc(e+"Capture",t)}function Qc(e,t){for(Um[e]=t,e=0;e<t.length;e++)bT.add(t[e])}var vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mj=Object.prototype.hasOwnProperty,RR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c2={},d2={};function qR(e){return mj.call(d2,e)?!0:mj.call(c2,e)?!1:RR.test(e)?d2[e]=!0:(c2[e]=!0,!1)}function FR(e,t,a,n){if(a!==null&&a.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function zR(e,t,a,n){if(t===null||typeof t>"u"||FR(e,t,a,n))return!0;if(n)return!1;if(a!==null)switch(a.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function tn(e,t,a,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=a,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var ka={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ka[e]=new tn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ka[t]=new tn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ka[e]=new tn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ka[e]=new tn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ka[e]=new tn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ka[e]=new tn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ka[e]=new tn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ka[e]=new tn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ka[e]=new tn(e,5,!1,e.toLowerCase(),null,!1,!1)});var a1=/[\-:]([a-z])/g;function n1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(a1,n1);ka[t]=new tn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(a1,n1);ka[t]=new tn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(a1,n1);ka[t]=new tn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ka[e]=new tn(e,1,!1,e.toLowerCase(),null,!1,!1)});ka.xlinkHref=new tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ka[e]=new tn(e,1,!1,e.toLowerCase(),null,!0,!0)});function s1(e,t,a,n){var s=ka.hasOwnProperty(t)?ka[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(zR(t,a,s,n)&&(a=null),n||s===null?qR(t)&&(a===null?e.removeAttribute(t):e.setAttribute(t,""+a)):s.mustUseProperty?e[s.propertyName]=a===null?s.type===3?!1:"":a:(t=s.attributeName,n=s.attributeNamespace,a===null?e.removeAttribute(t):(s=s.type,a=s===3||s===4&&a===!0?"":""+a,n?e.setAttributeNS(n,t,a):e.setAttribute(t,a))))}var Ei=$R.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Uf=Symbol.for("react.element"),bc=Symbol.for("react.portal"),jc=Symbol.for("react.fragment"),i1=Symbol.for("react.strict_mode"),pj=Symbol.for("react.profiler"),jT=Symbol.for("react.provider"),wT=Symbol.for("react.context"),o1=Symbol.for("react.forward_ref"),fj=Symbol.for("react.suspense"),hj=Symbol.for("react.suspense_list"),l1=Symbol.for("react.memo"),Yi=Symbol.for("react.lazy"),_T=Symbol.for("react.offscreen"),u2=Symbol.iterator;function Iu(e){return e===null||typeof e!="object"?null:(e=u2&&e[u2]||e["@@iterator"],typeof e=="function"?e:null)}var Sr=Object.assign,C0;function xm(e){if(C0===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);C0=t&&t[1]||""}return`
`+C0+e}var E0=!1;function T0(e,t){if(!e||E0)return"";E0=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{E0=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?xm(e):""}function BR(e){switch(e.tag){case 5:return xm(e.type);case 16:return xm("Lazy");case 13:return xm("Suspense");case 19:return xm("SuspenseList");case 0:case 2:case 15:return e=T0(e.type,!1),e;case 11:return e=T0(e.type.render,!1),e;case 1:return e=T0(e.type,!0),e;default:return""}}function gj(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case jc:return"Fragment";case bc:return"Portal";case pj:return"Profiler";case i1:return"StrictMode";case fj:return"Suspense";case hj:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case wT:return(e.displayName||"Context")+".Consumer";case jT:return(e._context.displayName||"Context")+".Provider";case o1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case l1:return t=e.displayName||null,t!==null?t:gj(e.type)||"Memo";case Yi:t=e._payload,e=e._init;try{return gj(e(t))}catch{}}return null}function WR(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gj(t);case 8:return t===i1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ko(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function kT(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function UR(e){var t=kT(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var s=a.get,i=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Hf(e){e._valueTracker||(e._valueTracker=UR(e))}function NT(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),n="";return e&&(n=kT(e)?e.checked?"true":"false":e.value),e=n,e!==a?(t.setValue(e),!0):!1}function pg(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function xj(e,t){var a=t.checked;return Sr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function m2(e,t){var a=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;a=ko(t.value!=null?t.value:a),e._wrapperState={initialChecked:n,initialValue:a,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ST(e,t){t=t.checked,t!=null&&s1(e,"checked",t,!1)}function yj(e,t){ST(e,t);var a=ko(t.value),n=t.type;if(a!=null)n==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?vj(e,t.type,a):t.hasOwnProperty("defaultValue")&&vj(e,t.type,ko(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function p2(e,t,a){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,a||t===e.value||(e.value=t),e.defaultValue=t}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function vj(e,t,a){(t!=="number"||pg(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var ym=Array.isArray;function Rc(e,t,a,n){if(e=e.options,t){t={};for(var s=0;s<a.length;s++)t["$"+a[s]]=!0;for(a=0;a<e.length;a++)s=t.hasOwnProperty("$"+e[a].value),e[a].selected!==s&&(e[a].selected=s),s&&n&&(e[a].defaultSelected=!0)}else{for(a=""+ko(a),t=null,s=0;s<e.length;s++){if(e[s].value===a){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function bj(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ke(91));return Sr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function f2(e,t){var a=t.value;if(a==null){if(a=t.children,t=t.defaultValue,a!=null){if(t!=null)throw Error(Ke(92));if(ym(a)){if(1<a.length)throw Error(Ke(93));a=a[0]}t=a}t==null&&(t=""),a=t}e._wrapperState={initialValue:ko(a)}}function AT(e,t){var a=ko(t.value),n=ko(t.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),t.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),n!=null&&(e.defaultValue=""+n)}function h2(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function PT(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jj(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?PT(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Kf,CT=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,a,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,a,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Kf=Kf||document.createElement("div"),Kf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Kf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Hm(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var km={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},HR=["Webkit","ms","Moz","O"];Object.keys(km).forEach(function(e){HR.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),km[t]=km[e]})});function ET(e,t,a){return t==null||typeof t=="boolean"||t===""?"":a||typeof t!="number"||t===0||km.hasOwnProperty(e)&&km[e]?(""+t).trim():t+"px"}function TT(e,t){e=e.style;for(var a in t)if(t.hasOwnProperty(a)){var n=a.indexOf("--")===0,s=ET(a,t[a],n);a==="float"&&(a="cssFloat"),n?e.setProperty(a,s):e[a]=s}}var KR=Sr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wj(e,t){if(t){if(KR[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ke(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ke(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ke(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ke(62))}}function _j(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kj=null;function c1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Nj=null,qc=null,Fc=null;function g2(e){if(e=Jp(e)){if(typeof Nj!="function")throw Error(Ke(280));var t=e.stateNode;t&&(t=my(t),Nj(e.stateNode,e.type,t))}}function OT(e){qc?Fc?Fc.push(e):Fc=[e]:qc=e}function MT(){if(qc){var e=qc,t=Fc;if(Fc=qc=null,g2(e),t)for(e=0;e<t.length;e++)g2(t[e])}}function DT(e,t){return e(t)}function IT(){}var O0=!1;function LT(e,t,a){if(O0)return e(t,a);O0=!0;try{return DT(e,t,a)}finally{O0=!1,(qc!==null||Fc!==null)&&(IT(),MT())}}function Km(e,t){var a=e.stateNode;if(a===null)return null;var n=my(a);if(n===null)return null;a=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(Ke(231,t,typeof a));return a}var Sj=!1;if(vi)try{var Lu={};Object.defineProperty(Lu,"passive",{get:function(){Sj=!0}}),window.addEventListener("test",Lu,Lu),window.removeEventListener("test",Lu,Lu)}catch{Sj=!1}function VR(e,t,a,n,s,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(a,d)}catch(u){this.onError(u)}}var Nm=!1,fg=null,hg=!1,Aj=null,GR={onError:function(e){Nm=!0,fg=e}};function YR(e,t,a,n,s,i,o,l,c){Nm=!1,fg=null,VR.apply(GR,arguments)}function ZR(e,t,a,n,s,i,o,l,c){if(YR.apply(this,arguments),Nm){if(Nm){var d=fg;Nm=!1,fg=null}else throw Error(Ke(198));hg||(hg=!0,Aj=d)}}function Fl(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function $T(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function x2(e){if(Fl(e)!==e)throw Error(Ke(188))}function XR(e){var t=e.alternate;if(!t){if(t=Fl(e),t===null)throw Error(Ke(188));return t!==e?null:e}for(var a=e,n=t;;){var s=a.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){a=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===a)return x2(s),e;if(i===n)return x2(s),t;i=i.sibling}throw Error(Ke(188))}if(a.return!==n.return)a=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===a){o=!0,a=s,n=i;break}if(l===n){o=!0,n=s,a=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===a){o=!0,a=i,n=s;break}if(l===n){o=!0,n=i,a=s;break}l=l.sibling}if(!o)throw Error(Ke(189))}}if(a.alternate!==n)throw Error(Ke(190))}if(a.tag!==3)throw Error(Ke(188));return a.stateNode.current===a?e:t}function RT(e){return e=XR(e),e!==null?qT(e):null}function qT(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=qT(e);if(t!==null)return t;e=e.sibling}return null}var FT=An.unstable_scheduleCallback,y2=An.unstable_cancelCallback,QR=An.unstable_shouldYield,JR=An.unstable_requestPaint,qr=An.unstable_now,eq=An.unstable_getCurrentPriorityLevel,d1=An.unstable_ImmediatePriority,zT=An.unstable_UserBlockingPriority,gg=An.unstable_NormalPriority,tq=An.unstable_LowPriority,BT=An.unstable_IdlePriority,ly=null,Hs=null;function rq(e){if(Hs&&typeof Hs.onCommitFiberRoot=="function")try{Hs.onCommitFiberRoot(ly,e,void 0,(e.current.flags&128)===128)}catch{}}var _s=Math.clz32?Math.clz32:sq,aq=Math.log,nq=Math.LN2;function sq(e){return e>>>=0,e===0?32:31-(aq(e)/nq|0)|0}var Vf=64,Gf=4194304;function vm(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function xg(e,t){var a=e.pendingLanes;if(a===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=a&268435455;if(o!==0){var l=o&~s;l!==0?n=vm(l):(i&=o,i!==0&&(n=vm(i)))}else o=a&~s,o!==0?n=vm(o):i!==0&&(n=vm(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=a&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)a=31-_s(t),s=1<<a,n|=e[a],t&=~s;return n}function iq(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oq(e,t){for(var a=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-_s(i),l=1<<o,c=s[o];c===-1?(!(l&a)||l&n)&&(s[o]=iq(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Pj(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function WT(){var e=Vf;return Vf<<=1,!(Vf&4194240)&&(Vf=64),e}function M0(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Xp(e,t,a){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-_s(t),e[t]=a}function lq(e,t){var a=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<a;){var s=31-_s(a),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,a&=~i}}function u1(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var n=31-_s(a),s=1<<n;s&t|e[n]&t&&(e[n]|=t),a&=~s}}var Vt=0;function UT(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var HT,m1,KT,VT,GT,Cj=!1,Yf=[],co=null,uo=null,mo=null,Vm=new Map,Gm=new Map,Qi=[],cq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function v2(e,t){switch(e){case"focusin":case"focusout":co=null;break;case"dragenter":case"dragleave":uo=null;break;case"mouseover":case"mouseout":mo=null;break;case"pointerover":case"pointerout":Vm.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gm.delete(t.pointerId)}}function $u(e,t,a,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:a,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Jp(t),t!==null&&m1(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function dq(e,t,a,n,s){switch(t){case"focusin":return co=$u(co,e,t,a,n,s),!0;case"dragenter":return uo=$u(uo,e,t,a,n,s),!0;case"mouseover":return mo=$u(mo,e,t,a,n,s),!0;case"pointerover":var i=s.pointerId;return Vm.set(i,$u(Vm.get(i)||null,e,t,a,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Gm.set(i,$u(Gm.get(i)||null,e,t,a,n,s)),!0}return!1}function YT(e){var t=nl(e.target);if(t!==null){var a=Fl(t);if(a!==null){if(t=a.tag,t===13){if(t=$T(a),t!==null){e.blockedOn=t,GT(e.priority,function(){KT(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Yh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Ej(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var n=new a.constructor(a.type,a);kj=n,a.target.dispatchEvent(n),kj=null}else return t=Jp(a),t!==null&&m1(t),e.blockedOn=a,!1;t.shift()}return!0}function b2(e,t,a){Yh(e)&&a.delete(t)}function uq(){Cj=!1,co!==null&&Yh(co)&&(co=null),uo!==null&&Yh(uo)&&(uo=null),mo!==null&&Yh(mo)&&(mo=null),Vm.forEach(b2),Gm.forEach(b2)}function Ru(e,t){e.blockedOn===t&&(e.blockedOn=null,Cj||(Cj=!0,An.unstable_scheduleCallback(An.unstable_NormalPriority,uq)))}function Ym(e){function t(s){return Ru(s,e)}if(0<Yf.length){Ru(Yf[0],e);for(var a=1;a<Yf.length;a++){var n=Yf[a];n.blockedOn===e&&(n.blockedOn=null)}}for(co!==null&&Ru(co,e),uo!==null&&Ru(uo,e),mo!==null&&Ru(mo,e),Vm.forEach(t),Gm.forEach(t),a=0;a<Qi.length;a++)n=Qi[a],n.blockedOn===e&&(n.blockedOn=null);for(;0<Qi.length&&(a=Qi[0],a.blockedOn===null);)YT(a),a.blockedOn===null&&Qi.shift()}var zc=Ei.ReactCurrentBatchConfig,yg=!0;function mq(e,t,a,n){var s=Vt,i=zc.transition;zc.transition=null;try{Vt=1,p1(e,t,a,n)}finally{Vt=s,zc.transition=i}}function pq(e,t,a,n){var s=Vt,i=zc.transition;zc.transition=null;try{Vt=4,p1(e,t,a,n)}finally{Vt=s,zc.transition=i}}function p1(e,t,a,n){if(yg){var s=Ej(e,t,a,n);if(s===null)W0(e,t,n,vg,a),v2(e,n);else if(dq(s,e,t,a,n))n.stopPropagation();else if(v2(e,n),t&4&&-1<cq.indexOf(e)){for(;s!==null;){var i=Jp(s);if(i!==null&&HT(i),i=Ej(e,t,a,n),i===null&&W0(e,t,n,vg,a),i===s)break;s=i}s!==null&&n.stopPropagation()}else W0(e,t,n,null,a)}}var vg=null;function Ej(e,t,a,n){if(vg=null,e=c1(n),e=nl(e),e!==null)if(t=Fl(e),t===null)e=null;else if(a=t.tag,a===13){if(e=$T(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vg=e,null}function ZT(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eq()){case d1:return 1;case zT:return 4;case gg:case tq:return 16;case BT:return 536870912;default:return 16}default:return 16}}var ao=null,f1=null,Zh=null;function XT(){if(Zh)return Zh;var e,t=f1,a=t.length,n,s="value"in ao?ao.value:ao.textContent,i=s.length;for(e=0;e<a&&t[e]===s[e];e++);var o=a-e;for(n=1;n<=o&&t[a-n]===s[i-n];n++);return Zh=s.slice(e,1<n?1-n:void 0)}function Xh(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zf(){return!0}function j2(){return!1}function En(e){function t(a,n,s,i,o){this._reactName=a,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(a=e[l],this[l]=a?a(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Zf:j2,this.isPropagationStopped=j2,this}return Sr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Zf)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Zf)},persist:function(){},isPersistent:Zf}),t}var Wd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},h1=En(Wd),Qp=Sr({},Wd,{view:0,detail:0}),fq=En(Qp),D0,I0,qu,cy=Sr({},Qp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:g1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==qu&&(qu&&e.type==="mousemove"?(D0=e.screenX-qu.screenX,I0=e.screenY-qu.screenY):I0=D0=0,qu=e),D0)},movementY:function(e){return"movementY"in e?e.movementY:I0}}),w2=En(cy),hq=Sr({},cy,{dataTransfer:0}),gq=En(hq),xq=Sr({},Qp,{relatedTarget:0}),L0=En(xq),yq=Sr({},Wd,{animationName:0,elapsedTime:0,pseudoElement:0}),vq=En(yq),bq=Sr({},Wd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jq=En(bq),wq=Sr({},Wd,{data:0}),_2=En(wq),_q={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sq(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Nq[e])?!!t[e]:!1}function g1(){return Sq}var Aq=Sr({},Qp,{key:function(e){if(e.key){var t=_q[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xh(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?kq[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:g1,charCode:function(e){return e.type==="keypress"?Xh(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xh(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Pq=En(Aq),Cq=Sr({},cy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),k2=En(Cq),Eq=Sr({},Qp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:g1}),Tq=En(Eq),Oq=Sr({},Wd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mq=En(Oq),Dq=Sr({},cy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Iq=En(Dq),Lq=[9,13,27,32],x1=vi&&"CompositionEvent"in window,Sm=null;vi&&"documentMode"in document&&(Sm=document.documentMode);var $q=vi&&"TextEvent"in window&&!Sm,QT=vi&&(!x1||Sm&&8<Sm&&11>=Sm),N2=" ",S2=!1;function JT(e,t){switch(e){case"keyup":return Lq.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function e3(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var wc=!1;function Rq(e,t){switch(e){case"compositionend":return e3(t);case"keypress":return t.which!==32?null:(S2=!0,N2);case"textInput":return e=t.data,e===N2&&S2?null:e;default:return null}}function qq(e,t){if(wc)return e==="compositionend"||!x1&&JT(e,t)?(e=XT(),Zh=f1=ao=null,wc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return QT&&t.locale!=="ko"?null:t.data;default:return null}}var Fq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Fq[e.type]:t==="textarea"}function t3(e,t,a,n){OT(n),t=bg(t,"onChange"),0<t.length&&(a=new h1("onChange","change",null,a,n),e.push({event:a,listeners:t}))}var Am=null,Zm=null;function zq(e){m3(e,0)}function dy(e){var t=Nc(e);if(NT(t))return e}function Bq(e,t){if(e==="change")return t}var r3=!1;if(vi){var $0;if(vi){var R0="oninput"in document;if(!R0){var P2=document.createElement("div");P2.setAttribute("oninput","return;"),R0=typeof P2.oninput=="function"}$0=R0}else $0=!1;r3=$0&&(!document.documentMode||9<document.documentMode)}function C2(){Am&&(Am.detachEvent("onpropertychange",a3),Zm=Am=null)}function a3(e){if(e.propertyName==="value"&&dy(Zm)){var t=[];t3(t,Zm,e,c1(e)),LT(zq,t)}}function Wq(e,t,a){e==="focusin"?(C2(),Am=t,Zm=a,Am.attachEvent("onpropertychange",a3)):e==="focusout"&&C2()}function Uq(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return dy(Zm)}function Hq(e,t){if(e==="click")return dy(t)}function Kq(e,t){if(e==="input"||e==="change")return dy(t)}function Vq(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ns=typeof Object.is=="function"?Object.is:Vq;function Xm(e,t){if(Ns(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var s=a[n];if(!mj.call(t,s)||!Ns(e[s],t[s]))return!1}return!0}function E2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function T2(e,t){var a=E2(e);e=0;for(var n;a;){if(a.nodeType===3){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=E2(a)}}function n3(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?n3(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function s3(){for(var e=window,t=pg();t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=pg(e.document)}return t}function y1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Gq(e){var t=s3(),a=e.focusedElem,n=e.selectionRange;if(t!==a&&a&&a.ownerDocument&&n3(a.ownerDocument.documentElement,a)){if(n!==null&&y1(a)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in a)a.selectionStart=t,a.selectionEnd=Math.min(e,a.value.length);else if(e=(t=a.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=a.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=T2(a,i);var o=T2(a,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=a;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<t.length;a++)e=t[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Yq=vi&&"documentMode"in document&&11>=document.documentMode,_c=null,Tj=null,Pm=null,Oj=!1;function O2(e,t,a){var n=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Oj||_c==null||_c!==pg(n)||(n=_c,"selectionStart"in n&&y1(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Pm&&Xm(Pm,n)||(Pm=n,n=bg(Tj,"onSelect"),0<n.length&&(t=new h1("onSelect","select",null,t,a),e.push({event:t,listeners:n}),t.target=_c)))}function Xf(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var kc={animationend:Xf("Animation","AnimationEnd"),animationiteration:Xf("Animation","AnimationIteration"),animationstart:Xf("Animation","AnimationStart"),transitionend:Xf("Transition","TransitionEnd")},q0={},i3={};vi&&(i3=document.createElement("div").style,"AnimationEvent"in window||(delete kc.animationend.animation,delete kc.animationiteration.animation,delete kc.animationstart.animation),"TransitionEvent"in window||delete kc.transitionend.transition);function uy(e){if(q0[e])return q0[e];if(!kc[e])return e;var t=kc[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in i3)return q0[e]=t[a];return e}var o3=uy("animationend"),l3=uy("animationiteration"),c3=uy("animationstart"),d3=uy("transitionend"),u3=new Map,M2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Co(e,t){u3.set(e,t),ql(t,[e])}for(var F0=0;F0<M2.length;F0++){var z0=M2[F0],Zq=z0.toLowerCase(),Xq=z0[0].toUpperCase()+z0.slice(1);Co(Zq,"on"+Xq)}Co(o3,"onAnimationEnd");Co(l3,"onAnimationIteration");Co(c3,"onAnimationStart");Co("dblclick","onDoubleClick");Co("focusin","onFocus");Co("focusout","onBlur");Co(d3,"onTransitionEnd");Qc("onMouseEnter",["mouseout","mouseover"]);Qc("onMouseLeave",["mouseout","mouseover"]);Qc("onPointerEnter",["pointerout","pointerover"]);Qc("onPointerLeave",["pointerout","pointerover"]);ql("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ql("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ql("onBeforeInput",["compositionend","keypress","textInput","paste"]);ql("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ql("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ql("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qq=new Set("cancel close invalid load scroll toggle".split(" ").concat(bm));function D2(e,t,a){var n=e.type||"unknown-event";e.currentTarget=a,ZR(n,t,void 0,e),e.currentTarget=null}function m3(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var n=e[a],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;D2(s,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;D2(s,l,d),i=c}}}if(hg)throw e=Aj,hg=!1,Aj=null,e}function dr(e,t){var a=t[$j];a===void 0&&(a=t[$j]=new Set);var n=e+"__bubble";a.has(n)||(p3(t,e,2,!1),a.add(n))}function B0(e,t,a){var n=0;t&&(n|=4),p3(a,e,n,t)}var Qf="_reactListening"+Math.random().toString(36).slice(2);function Qm(e){if(!e[Qf]){e[Qf]=!0,bT.forEach(function(a){a!=="selectionchange"&&(Qq.has(a)||B0(a,!1,e),B0(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Qf]||(t[Qf]=!0,B0("selectionchange",!1,t))}}function p3(e,t,a,n){switch(ZT(t)){case 1:var s=mq;break;case 4:s=pq;break;default:s=p1}a=s.bind(null,t,a,e),s=void 0,!Sj||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,a,{capture:!0,passive:s}):e.addEventListener(t,a,!0):s!==void 0?e.addEventListener(t,a,{passive:s}):e.addEventListener(t,a,!1)}function W0(e,t,a,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=nl(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}LT(function(){var d=i,u=c1(a),m=[];e:{var p=u3.get(e);if(p!==void 0){var g=h1,x=e;switch(e){case"keypress":if(Xh(a)===0)break e;case"keydown":case"keyup":g=Pq;break;case"focusin":x="focus",g=L0;break;case"focusout":x="blur",g=L0;break;case"beforeblur":case"afterblur":g=L0;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=w2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=gq;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Tq;break;case o3:case l3:case c3:g=vq;break;case d3:g=Mq;break;case"scroll":g=fq;break;case"wheel":g=Iq;break;case"copy":case"cut":case"paste":g=jq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=k2}var h=(t&4)!==0,v=!h&&e==="scroll",b=h?p!==null?p+"Capture":null:p;h=[];for(var y=d,j;y!==null;){j=y;var _=j.stateNode;if(j.tag===5&&_!==null&&(j=_,b!==null&&(_=Km(y,b),_!=null&&h.push(Jm(y,_,j)))),v)break;y=y.return}0<h.length&&(p=new g(p,x,null,a,u),m.push({event:p,listeners:h}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",p&&a!==kj&&(x=a.relatedTarget||a.fromElement)&&(nl(x)||x[bi]))break e;if((g||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,g?(x=a.relatedTarget||a.toElement,g=d,x=x?nl(x):null,x!==null&&(v=Fl(x),x!==v||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=d),g!==x)){if(h=w2,_="onMouseLeave",b="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(h=k2,_="onPointerLeave",b="onPointerEnter",y="pointer"),v=g==null?p:Nc(g),j=x==null?p:Nc(x),p=new h(_,y+"leave",g,a,u),p.target=v,p.relatedTarget=j,_=null,nl(u)===d&&(h=new h(b,y+"enter",x,a,u),h.target=j,h.relatedTarget=v,_=h),v=_,g&&x)t:{for(h=g,b=x,y=0,j=h;j;j=lc(j))y++;for(j=0,_=b;_;_=lc(_))j++;for(;0<y-j;)h=lc(h),y--;for(;0<j-y;)b=lc(b),j--;for(;y--;){if(h===b||b!==null&&h===b.alternate)break t;h=lc(h),b=lc(b)}h=null}else h=null;g!==null&&I2(m,p,g,h,!1),x!==null&&v!==null&&I2(m,v,x,h,!0)}}e:{if(p=d?Nc(d):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var w=Bq;else if(A2(p))if(r3)w=Kq;else{w=Uq;var k=Wq}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(w=Hq);if(w&&(w=w(e,d))){t3(m,w,a,u);break e}k&&k(e,p,d),e==="focusout"&&(k=p._wrapperState)&&k.controlled&&p.type==="number"&&vj(p,"number",p.value)}switch(k=d?Nc(d):window,e){case"focusin":(A2(k)||k.contentEditable==="true")&&(_c=k,Tj=d,Pm=null);break;case"focusout":Pm=Tj=_c=null;break;case"mousedown":Oj=!0;break;case"contextmenu":case"mouseup":case"dragend":Oj=!1,O2(m,a,u);break;case"selectionchange":if(Yq)break;case"keydown":case"keyup":O2(m,a,u)}var N;if(x1)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else wc?JT(e,a)&&(P="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(P="onCompositionStart");P&&(QT&&a.locale!=="ko"&&(wc||P!=="onCompositionStart"?P==="onCompositionEnd"&&wc&&(N=XT()):(ao=u,f1="value"in ao?ao.value:ao.textContent,wc=!0)),k=bg(d,P),0<k.length&&(P=new _2(P,e,null,a,u),m.push({event:P,listeners:k}),N?P.data=N:(N=e3(a),N!==null&&(P.data=N)))),(N=$q?Rq(e,a):qq(e,a))&&(d=bg(d,"onBeforeInput"),0<d.length&&(u=new _2("onBeforeInput","beforeinput",null,a,u),m.push({event:u,listeners:d}),u.data=N))}m3(m,t)})}function Jm(e,t,a){return{instance:e,listener:t,currentTarget:a}}function bg(e,t){for(var a=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Km(e,a),i!=null&&n.unshift(Jm(e,i,s)),i=Km(e,t),i!=null&&n.push(Jm(e,i,s))),e=e.return}return n}function lc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function I2(e,t,a,n,s){for(var i=t._reactName,o=[];a!==null&&a!==n;){var l=a,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,s?(c=Km(a,i),c!=null&&o.unshift(Jm(a,c,l))):s||(c=Km(a,i),c!=null&&o.push(Jm(a,c,l)))),a=a.return}o.length!==0&&e.push({event:t,listeners:o})}var Jq=/\r\n?/g,e6=/\u0000|\uFFFD/g;function L2(e){return(typeof e=="string"?e:""+e).replace(Jq,`
`).replace(e6,"")}function Jf(e,t,a){if(t=L2(t),L2(e)!==t&&a)throw Error(Ke(425))}function jg(){}var Mj=null,Dj=null;function Ij(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Lj=typeof setTimeout=="function"?setTimeout:void 0,t6=typeof clearTimeout=="function"?clearTimeout:void 0,$2=typeof Promise=="function"?Promise:void 0,r6=typeof queueMicrotask=="function"?queueMicrotask:typeof $2<"u"?function(e){return $2.resolve(null).then(e).catch(a6)}:Lj;function a6(e){setTimeout(function(){throw e})}function U0(e,t){var a=t,n=0;do{var s=a.nextSibling;if(e.removeChild(a),s&&s.nodeType===8)if(a=s.data,a==="/$"){if(n===0){e.removeChild(s),Ym(t);return}n--}else a!=="$"&&a!=="$?"&&a!=="$!"||n++;a=s}while(a);Ym(t)}function po(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function R2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}var Ud=Math.random().toString(36).slice(2),Fs="__reactFiber$"+Ud,ep="__reactProps$"+Ud,bi="__reactContainer$"+Ud,$j="__reactEvents$"+Ud,n6="__reactListeners$"+Ud,s6="__reactHandles$"+Ud;function nl(e){var t=e[Fs];if(t)return t;for(var a=e.parentNode;a;){if(t=a[bi]||a[Fs]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=R2(e);e!==null;){if(a=e[Fs])return a;e=R2(e)}return t}e=a,a=e.parentNode}return null}function Jp(e){return e=e[Fs]||e[bi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Nc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ke(33))}function my(e){return e[ep]||null}var Rj=[],Sc=-1;function Eo(e){return{current:e}}function fr(e){0>Sc||(e.current=Rj[Sc],Rj[Sc]=null,Sc--)}function or(e,t){Sc++,Rj[Sc]=e.current,e.current=t}var No={},qa=Eo(No),cn=Eo(!1),kl=No;function Jc(e,t){var a=e.type.contextTypes;if(!a)return No;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in a)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function dn(e){return e=e.childContextTypes,e!=null}function wg(){fr(cn),fr(qa)}function q2(e,t,a){if(qa.current!==No)throw Error(Ke(168));or(qa,t),or(cn,a)}function f3(e,t,a){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return a;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(Ke(108,WR(e)||"Unknown",s));return Sr({},a,n)}function _g(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||No,kl=qa.current,or(qa,e),or(cn,cn.current),!0}function F2(e,t,a){var n=e.stateNode;if(!n)throw Error(Ke(169));a?(e=f3(e,t,kl),n.__reactInternalMemoizedMergedChildContext=e,fr(cn),fr(qa),or(qa,e)):fr(cn),or(cn,a)}var li=null,py=!1,H0=!1;function h3(e){li===null?li=[e]:li.push(e)}function i6(e){py=!0,h3(e)}function To(){if(!H0&&li!==null){H0=!0;var e=0,t=Vt;try{var a=li;for(Vt=1;e<a.length;e++){var n=a[e];do n=n(!0);while(n!==null)}li=null,py=!1}catch(s){throw li!==null&&(li=li.slice(e+1)),FT(d1,To),s}finally{Vt=t,H0=!1}}return null}var Ac=[],Pc=0,kg=null,Ng=0,qn=[],Fn=0,Nl=null,di=1,ui="";function Xo(e,t){Ac[Pc++]=Ng,Ac[Pc++]=kg,kg=e,Ng=t}function g3(e,t,a){qn[Fn++]=di,qn[Fn++]=ui,qn[Fn++]=Nl,Nl=e;var n=di;e=ui;var s=32-_s(n)-1;n&=~(1<<s),a+=1;var i=32-_s(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,di=1<<32-_s(t)+s|a<<s|n,ui=i+e}else di=1<<i|a<<s|n,ui=e}function v1(e){e.return!==null&&(Xo(e,1),g3(e,1,0))}function b1(e){for(;e===kg;)kg=Ac[--Pc],Ac[Pc]=null,Ng=Ac[--Pc],Ac[Pc]=null;for(;e===Nl;)Nl=qn[--Fn],qn[Fn]=null,ui=qn[--Fn],qn[Fn]=null,di=qn[--Fn],qn[Fn]=null}var Sn=null,Nn=null,xr=!1,ys=null;function x3(e,t){var a=Wn(5,null,null,0);a.elementType="DELETED",a.stateNode=t,a.return=e,t=e.deletions,t===null?(e.deletions=[a],e.flags|=16):t.push(a)}function z2(e,t){switch(e.tag){case 5:var a=e.type;return t=t.nodeType!==1||a.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Sn=e,Nn=po(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Sn=e,Nn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(a=Nl!==null?{id:di,overflow:ui}:null,e.memoizedState={dehydrated:t,treeContext:a,retryLane:1073741824},a=Wn(18,null,null,0),a.stateNode=t,a.return=e,e.child=a,Sn=e,Nn=null,!0):!1;default:return!1}}function qj(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Fj(e){if(xr){var t=Nn;if(t){var a=t;if(!z2(e,t)){if(qj(e))throw Error(Ke(418));t=po(a.nextSibling);var n=Sn;t&&z2(e,t)?x3(n,a):(e.flags=e.flags&-4097|2,xr=!1,Sn=e)}}else{if(qj(e))throw Error(Ke(418));e.flags=e.flags&-4097|2,xr=!1,Sn=e}}}function B2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Sn=e}function eh(e){if(e!==Sn)return!1;if(!xr)return B2(e),xr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ij(e.type,e.memoizedProps)),t&&(t=Nn)){if(qj(e))throw y3(),Error(Ke(418));for(;t;)x3(e,t),t=po(t.nextSibling)}if(B2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ke(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(t===0){Nn=po(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++}e=e.nextSibling}Nn=null}}else Nn=Sn?po(e.stateNode.nextSibling):null;return!0}function y3(){for(var e=Nn;e;)e=po(e.nextSibling)}function ed(){Nn=Sn=null,xr=!1}function j1(e){ys===null?ys=[e]:ys.push(e)}var o6=Ei.ReactCurrentBatchConfig;function Fu(e,t,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(Ke(309));var n=a.stateNode}if(!n)throw Error(Ke(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Ke(284));if(!a._owner)throw Error(Ke(290,e))}return e}function th(e,t){throw e=Object.prototype.toString.call(t),Error(Ke(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function W2(e){var t=e._init;return t(e._payload)}function v3(e){function t(b,y){if(e){var j=b.deletions;j===null?(b.deletions=[y],b.flags|=16):j.push(y)}}function a(b,y){if(!e)return null;for(;y!==null;)t(b,y),y=y.sibling;return null}function n(b,y){for(b=new Map;y!==null;)y.key!==null?b.set(y.key,y):b.set(y.index,y),y=y.sibling;return b}function s(b,y){return b=xo(b,y),b.index=0,b.sibling=null,b}function i(b,y,j){return b.index=j,e?(j=b.alternate,j!==null?(j=j.index,j<y?(b.flags|=2,y):j):(b.flags|=2,y)):(b.flags|=1048576,y)}function o(b){return e&&b.alternate===null&&(b.flags|=2),b}function l(b,y,j,_){return y===null||y.tag!==6?(y=Q0(j,b.mode,_),y.return=b,y):(y=s(y,j),y.return=b,y)}function c(b,y,j,_){var w=j.type;return w===jc?u(b,y,j.props.children,_,j.key):y!==null&&(y.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Yi&&W2(w)===y.type)?(_=s(y,j.props),_.ref=Fu(b,y,j),_.return=b,_):(_=ng(j.type,j.key,j.props,null,b.mode,_),_.ref=Fu(b,y,j),_.return=b,_)}function d(b,y,j,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==j.containerInfo||y.stateNode.implementation!==j.implementation?(y=J0(j,b.mode,_),y.return=b,y):(y=s(y,j.children||[]),y.return=b,y)}function u(b,y,j,_,w){return y===null||y.tag!==7?(y=xl(j,b.mode,_,w),y.return=b,y):(y=s(y,j),y.return=b,y)}function m(b,y,j){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Q0(""+y,b.mode,j),y.return=b,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Uf:return j=ng(y.type,y.key,y.props,null,b.mode,j),j.ref=Fu(b,null,y),j.return=b,j;case bc:return y=J0(y,b.mode,j),y.return=b,y;case Yi:var _=y._init;return m(b,_(y._payload),j)}if(ym(y)||Iu(y))return y=xl(y,b.mode,j,null),y.return=b,y;th(b,y)}return null}function p(b,y,j,_){var w=y!==null?y.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return w!==null?null:l(b,y,""+j,_);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Uf:return j.key===w?c(b,y,j,_):null;case bc:return j.key===w?d(b,y,j,_):null;case Yi:return w=j._init,p(b,y,w(j._payload),_)}if(ym(j)||Iu(j))return w!==null?null:u(b,y,j,_,null);th(b,j)}return null}function g(b,y,j,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return b=b.get(j)||null,l(y,b,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Uf:return b=b.get(_.key===null?j:_.key)||null,c(y,b,_,w);case bc:return b=b.get(_.key===null?j:_.key)||null,d(y,b,_,w);case Yi:var k=_._init;return g(b,y,j,k(_._payload),w)}if(ym(_)||Iu(_))return b=b.get(j)||null,u(y,b,_,w,null);th(y,_)}return null}function x(b,y,j,_){for(var w=null,k=null,N=y,P=y=0,A=null;N!==null&&P<j.length;P++){N.index>P?(A=N,N=null):A=N.sibling;var M=p(b,N,j[P],_);if(M===null){N===null&&(N=A);break}e&&N&&M.alternate===null&&t(b,N),y=i(M,y,P),k===null?w=M:k.sibling=M,k=M,N=A}if(P===j.length)return a(b,N),xr&&Xo(b,P),w;if(N===null){for(;P<j.length;P++)N=m(b,j[P],_),N!==null&&(y=i(N,y,P),k===null?w=N:k.sibling=N,k=N);return xr&&Xo(b,P),w}for(N=n(b,N);P<j.length;P++)A=g(N,b,P,j[P],_),A!==null&&(e&&A.alternate!==null&&N.delete(A.key===null?P:A.key),y=i(A,y,P),k===null?w=A:k.sibling=A,k=A);return e&&N.forEach(function(R){return t(b,R)}),xr&&Xo(b,P),w}function h(b,y,j,_){var w=Iu(j);if(typeof w!="function")throw Error(Ke(150));if(j=w.call(j),j==null)throw Error(Ke(151));for(var k=w=null,N=y,P=y=0,A=null,M=j.next();N!==null&&!M.done;P++,M=j.next()){N.index>P?(A=N,N=null):A=N.sibling;var R=p(b,N,M.value,_);if(R===null){N===null&&(N=A);break}e&&N&&R.alternate===null&&t(b,N),y=i(R,y,P),k===null?w=R:k.sibling=R,k=R,N=A}if(M.done)return a(b,N),xr&&Xo(b,P),w;if(N===null){for(;!M.done;P++,M=j.next())M=m(b,M.value,_),M!==null&&(y=i(M,y,P),k===null?w=M:k.sibling=M,k=M);return xr&&Xo(b,P),w}for(N=n(b,N);!M.done;P++,M=j.next())M=g(N,b,P,M.value,_),M!==null&&(e&&M.alternate!==null&&N.delete(M.key===null?P:M.key),y=i(M,y,P),k===null?w=M:k.sibling=M,k=M);return e&&N.forEach(function(O){return t(b,O)}),xr&&Xo(b,P),w}function v(b,y,j,_){if(typeof j=="object"&&j!==null&&j.type===jc&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Uf:e:{for(var w=j.key,k=y;k!==null;){if(k.key===w){if(w=j.type,w===jc){if(k.tag===7){a(b,k.sibling),y=s(k,j.props.children),y.return=b,b=y;break e}}else if(k.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Yi&&W2(w)===k.type){a(b,k.sibling),y=s(k,j.props),y.ref=Fu(b,k,j),y.return=b,b=y;break e}a(b,k);break}else t(b,k);k=k.sibling}j.type===jc?(y=xl(j.props.children,b.mode,_,j.key),y.return=b,b=y):(_=ng(j.type,j.key,j.props,null,b.mode,_),_.ref=Fu(b,y,j),_.return=b,b=_)}return o(b);case bc:e:{for(k=j.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===j.containerInfo&&y.stateNode.implementation===j.implementation){a(b,y.sibling),y=s(y,j.children||[]),y.return=b,b=y;break e}else{a(b,y);break}else t(b,y);y=y.sibling}y=J0(j,b.mode,_),y.return=b,b=y}return o(b);case Yi:return k=j._init,v(b,y,k(j._payload),_)}if(ym(j))return x(b,y,j,_);if(Iu(j))return h(b,y,j,_);th(b,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,y!==null&&y.tag===6?(a(b,y.sibling),y=s(y,j),y.return=b,b=y):(a(b,y),y=Q0(j,b.mode,_),y.return=b,b=y),o(b)):a(b,y)}return v}var td=v3(!0),b3=v3(!1),Sg=Eo(null),Ag=null,Cc=null,w1=null;function _1(){w1=Cc=Ag=null}function k1(e){var t=Sg.current;fr(Sg),e._currentValue=t}function zj(e,t,a){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===a)break;e=e.return}}function Bc(e,t){Ag=e,w1=Cc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(on=!0),e.firstContext=null)}function Gn(e){var t=e._currentValue;if(w1!==e)if(e={context:e,memoizedValue:t,next:null},Cc===null){if(Ag===null)throw Error(Ke(308));Cc=e,Ag.dependencies={lanes:0,firstContext:e}}else Cc=Cc.next=e;return t}var sl=null;function N1(e){sl===null?sl=[e]:sl.push(e)}function j3(e,t,a,n){var s=t.interleaved;return s===null?(a.next=a,N1(t)):(a.next=s.next,s.next=a),t.interleaved=a,ji(e,n)}function ji(e,t){e.lanes|=t;var a=e.alternate;for(a!==null&&(a.lanes|=t),a=e,e=e.return;e!==null;)e.childLanes|=t,a=e.alternate,a!==null&&(a.childLanes|=t),a=e,e=e.return;return a.tag===3?a.stateNode:null}var Zi=!1;function S1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function w3(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function hi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fo(e,t,a){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Mt&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,ji(e,a)}return s=n.interleaved,s===null?(t.next=t,N1(n)):(t.next=s.next,s.next=t),n.interleaved=t,ji(e,a)}function Qh(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,u1(e,a)}}function U2(e,t){var a=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var s=null,i=null;if(a=a.firstBaseUpdate,a!==null){do{var o={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};i===null?s=i=o:i=i.next=o,a=a.next}while(a!==null);i===null?s=i=t:i=i.next=t}else s=i=t;a={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}function Pg(e,t,a,n){var s=e.updateQueue;Zi=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;o=0,u=d=c=null,l=i;do{var p=l.lane,g=l.eventTime;if((n&p)===p){u!==null&&(u=u.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,h=l;switch(p=t,g=a,h.tag){case 1:if(x=h.payload,typeof x=="function"){m=x.call(g,m,p);break e}m=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=h.payload,p=typeof x=="function"?x.call(g,m,p):x,p==null)break e;m=Sr({},m,p);break e;case 2:Zi=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else g={eventTime:g,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=g,c=m):u=u.next=g,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(u===null&&(c=m),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=u,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Al|=o,e.lanes=o,e.memoizedState=m}}function H2(e,t,a){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=a,typeof s!="function")throw Error(Ke(191,s));s.call(n)}}}var ef={},Ks=Eo(ef),tp=Eo(ef),rp=Eo(ef);function il(e){if(e===ef)throw Error(Ke(174));return e}function A1(e,t){switch(or(rp,t),or(tp,e),or(Ks,ef),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:jj(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=jj(t,e)}fr(Ks),or(Ks,t)}function rd(){fr(Ks),fr(tp),fr(rp)}function _3(e){il(rp.current);var t=il(Ks.current),a=jj(t,e.type);t!==a&&(or(tp,e),or(Ks,a))}function P1(e){tp.current===e&&(fr(Ks),fr(tp))}var br=Eo(0);function Cg(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var K0=[];function C1(){for(var e=0;e<K0.length;e++)K0[e]._workInProgressVersionPrimary=null;K0.length=0}var Jh=Ei.ReactCurrentDispatcher,V0=Ei.ReactCurrentBatchConfig,Sl=0,kr=null,ta=null,ha=null,Eg=!1,Cm=!1,ap=0,l6=0;function Ca(){throw Error(Ke(321))}function E1(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Ns(e[a],t[a]))return!1;return!0}function T1(e,t,a,n,s,i){if(Sl=i,kr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Jh.current=e===null||e.memoizedState===null?m6:p6,e=a(n,s),Cm){i=0;do{if(Cm=!1,ap=0,25<=i)throw Error(Ke(301));i+=1,ha=ta=null,t.updateQueue=null,Jh.current=f6,e=a(n,s)}while(Cm)}if(Jh.current=Tg,t=ta!==null&&ta.next!==null,Sl=0,ha=ta=kr=null,Eg=!1,t)throw Error(Ke(300));return e}function O1(){var e=ap!==0;return ap=0,e}function Rs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ha===null?kr.memoizedState=ha=e:ha=ha.next=e,ha}function Yn(){if(ta===null){var e=kr.alternate;e=e!==null?e.memoizedState:null}else e=ta.next;var t=ha===null?kr.memoizedState:ha.next;if(t!==null)ha=t,ta=e;else{if(e===null)throw Error(Ke(310));ta=e,e={memoizedState:ta.memoizedState,baseState:ta.baseState,baseQueue:ta.baseQueue,queue:ta.queue,next:null},ha===null?kr.memoizedState=ha=e:ha=ha.next=e}return ha}function np(e,t){return typeof t=="function"?t(e):t}function G0(e){var t=Yn(),a=t.queue;if(a===null)throw Error(Ke(311));a.lastRenderedReducer=e;var n=ta,s=n.baseQueue,i=a.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,a.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((Sl&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,o=n):c=c.next=m,kr.lanes|=u,Al|=u}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,Ns(n,t.memoizedState)||(on=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,a.lastRenderedState=n}if(e=a.interleaved,e!==null){s=e;do i=s.lane,kr.lanes|=i,Al|=i,s=s.next;while(s!==e)}else s===null&&(a.lanes=0);return[t.memoizedState,a.dispatch]}function Y0(e){var t=Yn(),a=t.queue;if(a===null)throw Error(Ke(311));a.lastRenderedReducer=e;var n=a.dispatch,s=a.pending,i=t.memoizedState;if(s!==null){a.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Ns(i,t.memoizedState)||(on=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),a.lastRenderedState=i}return[i,n]}function k3(){}function N3(e,t){var a=kr,n=Yn(),s=t(),i=!Ns(n.memoizedState,s);if(i&&(n.memoizedState=s,on=!0),n=n.queue,M1(P3.bind(null,a,n,e),[e]),n.getSnapshot!==t||i||ha!==null&&ha.memoizedState.tag&1){if(a.flags|=2048,sp(9,A3.bind(null,a,n,s,t),void 0,null),va===null)throw Error(Ke(349));Sl&30||S3(a,t,s)}return s}function S3(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=kr.updateQueue,t===null?(t={lastEffect:null,stores:null},kr.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function A3(e,t,a,n){t.value=a,t.getSnapshot=n,C3(t)&&E3(e)}function P3(e,t,a){return a(function(){C3(t)&&E3(e)})}function C3(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Ns(e,a)}catch{return!0}}function E3(e){var t=ji(e,1);t!==null&&ks(t,e,1,-1)}function K2(e){var t=Rs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:np,lastRenderedState:e},t.queue=e,e=e.dispatch=u6.bind(null,kr,e),[t.memoizedState,e]}function sp(e,t,a,n){return e={tag:e,create:t,destroy:a,deps:n,next:null},t=kr.updateQueue,t===null?(t={lastEffect:null,stores:null},kr.updateQueue=t,t.lastEffect=e.next=e):(a=t.lastEffect,a===null?t.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,t.lastEffect=e)),e}function T3(){return Yn().memoizedState}function eg(e,t,a,n){var s=Rs();kr.flags|=e,s.memoizedState=sp(1|t,a,void 0,n===void 0?null:n)}function fy(e,t,a,n){var s=Yn();n=n===void 0?null:n;var i=void 0;if(ta!==null){var o=ta.memoizedState;if(i=o.destroy,n!==null&&E1(n,o.deps)){s.memoizedState=sp(t,a,i,n);return}}kr.flags|=e,s.memoizedState=sp(1|t,a,i,n)}function V2(e,t){return eg(8390656,8,e,t)}function M1(e,t){return fy(2048,8,e,t)}function O3(e,t){return fy(4,2,e,t)}function M3(e,t){return fy(4,4,e,t)}function D3(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function I3(e,t,a){return a=a!=null?a.concat([e]):null,fy(4,4,D3.bind(null,t,e),a)}function D1(){}function L3(e,t){var a=Yn();t=t===void 0?null:t;var n=a.memoizedState;return n!==null&&t!==null&&E1(t,n[1])?n[0]:(a.memoizedState=[e,t],e)}function $3(e,t){var a=Yn();t=t===void 0?null:t;var n=a.memoizedState;return n!==null&&t!==null&&E1(t,n[1])?n[0]:(e=e(),a.memoizedState=[e,t],e)}function R3(e,t,a){return Sl&21?(Ns(a,t)||(a=WT(),kr.lanes|=a,Al|=a,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,on=!0),e.memoizedState=a)}function c6(e,t){var a=Vt;Vt=a!==0&&4>a?a:4,e(!0);var n=V0.transition;V0.transition={};try{e(!1),t()}finally{Vt=a,V0.transition=n}}function q3(){return Yn().memoizedState}function d6(e,t,a){var n=go(e);if(a={lane:n,action:a,hasEagerState:!1,eagerState:null,next:null},F3(e))z3(t,a);else if(a=j3(e,t,a,n),a!==null){var s=Xa();ks(a,e,n,s),B3(a,t,n)}}function u6(e,t,a){var n=go(e),s={lane:n,action:a,hasEagerState:!1,eagerState:null,next:null};if(F3(e))z3(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,a);if(s.hasEagerState=!0,s.eagerState=l,Ns(l,o)){var c=t.interleaved;c===null?(s.next=s,N1(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}a=j3(e,t,s,n),a!==null&&(s=Xa(),ks(a,e,n,s),B3(a,t,n))}}function F3(e){var t=e.alternate;return e===kr||t!==null&&t===kr}function z3(e,t){Cm=Eg=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function B3(e,t,a){if(a&4194240){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,u1(e,a)}}var Tg={readContext:Gn,useCallback:Ca,useContext:Ca,useEffect:Ca,useImperativeHandle:Ca,useInsertionEffect:Ca,useLayoutEffect:Ca,useMemo:Ca,useReducer:Ca,useRef:Ca,useState:Ca,useDebugValue:Ca,useDeferredValue:Ca,useTransition:Ca,useMutableSource:Ca,useSyncExternalStore:Ca,useId:Ca,unstable_isNewReconciler:!1},m6={readContext:Gn,useCallback:function(e,t){return Rs().memoizedState=[e,t===void 0?null:t],e},useContext:Gn,useEffect:V2,useImperativeHandle:function(e,t,a){return a=a!=null?a.concat([e]):null,eg(4194308,4,D3.bind(null,t,e),a)},useLayoutEffect:function(e,t){return eg(4194308,4,e,t)},useInsertionEffect:function(e,t){return eg(4,2,e,t)},useMemo:function(e,t){var a=Rs();return t=t===void 0?null:t,e=e(),a.memoizedState=[e,t],e},useReducer:function(e,t,a){var n=Rs();return t=a!==void 0?a(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=d6.bind(null,kr,e),[n.memoizedState,e]},useRef:function(e){var t=Rs();return e={current:e},t.memoizedState=e},useState:K2,useDebugValue:D1,useDeferredValue:function(e){return Rs().memoizedState=e},useTransition:function(){var e=K2(!1),t=e[0];return e=c6.bind(null,e[1]),Rs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,a){var n=kr,s=Rs();if(xr){if(a===void 0)throw Error(Ke(407));a=a()}else{if(a=t(),va===null)throw Error(Ke(349));Sl&30||S3(n,t,a)}s.memoizedState=a;var i={value:a,getSnapshot:t};return s.queue=i,V2(P3.bind(null,n,i,e),[e]),n.flags|=2048,sp(9,A3.bind(null,n,i,a,t),void 0,null),a},useId:function(){var e=Rs(),t=va.identifierPrefix;if(xr){var a=ui,n=di;a=(n&~(1<<32-_s(n)-1)).toString(32)+a,t=":"+t+"R"+a,a=ap++,0<a&&(t+="H"+a.toString(32)),t+=":"}else a=l6++,t=":"+t+"r"+a.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},p6={readContext:Gn,useCallback:L3,useContext:Gn,useEffect:M1,useImperativeHandle:I3,useInsertionEffect:O3,useLayoutEffect:M3,useMemo:$3,useReducer:G0,useRef:T3,useState:function(){return G0(np)},useDebugValue:D1,useDeferredValue:function(e){var t=Yn();return R3(t,ta.memoizedState,e)},useTransition:function(){var e=G0(np)[0],t=Yn().memoizedState;return[e,t]},useMutableSource:k3,useSyncExternalStore:N3,useId:q3,unstable_isNewReconciler:!1},f6={readContext:Gn,useCallback:L3,useContext:Gn,useEffect:M1,useImperativeHandle:I3,useInsertionEffect:O3,useLayoutEffect:M3,useMemo:$3,useReducer:Y0,useRef:T3,useState:function(){return Y0(np)},useDebugValue:D1,useDeferredValue:function(e){var t=Yn();return ta===null?t.memoizedState=e:R3(t,ta.memoizedState,e)},useTransition:function(){var e=Y0(np)[0],t=Yn().memoizedState;return[e,t]},useMutableSource:k3,useSyncExternalStore:N3,useId:q3,unstable_isNewReconciler:!1};function fs(e,t){if(e&&e.defaultProps){t=Sr({},t),e=e.defaultProps;for(var a in e)t[a]===void 0&&(t[a]=e[a]);return t}return t}function Bj(e,t,a,n){t=e.memoizedState,a=a(n,t),a=a==null?t:Sr({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var hy={isMounted:function(e){return(e=e._reactInternals)?Fl(e)===e:!1},enqueueSetState:function(e,t,a){e=e._reactInternals;var n=Xa(),s=go(e),i=hi(n,s);i.payload=t,a!=null&&(i.callback=a),t=fo(e,i,s),t!==null&&(ks(t,e,s,n),Qh(t,e,s))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var n=Xa(),s=go(e),i=hi(n,s);i.tag=1,i.payload=t,a!=null&&(i.callback=a),t=fo(e,i,s),t!==null&&(ks(t,e,s,n),Qh(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Xa(),n=go(e),s=hi(a,n);s.tag=2,t!=null&&(s.callback=t),t=fo(e,s,n),t!==null&&(ks(t,e,n,a),Qh(t,e,n))}};function G2(e,t,a,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Xm(a,n)||!Xm(s,i):!0}function W3(e,t,a){var n=!1,s=No,i=t.contextType;return typeof i=="object"&&i!==null?i=Gn(i):(s=dn(t)?kl:qa.current,n=t.contextTypes,i=(n=n!=null)?Jc(e,s):No),t=new t(a,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=hy,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Y2(e,t,a,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,n),t.state!==e&&hy.enqueueReplaceState(t,t.state,null)}function Wj(e,t,a,n){var s=e.stateNode;s.props=a,s.state=e.memoizedState,s.refs={},S1(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Gn(i):(i=dn(t)?kl:qa.current,s.context=Jc(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Bj(e,t,i,a),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&hy.enqueueReplaceState(s,s.state,null),Pg(e,a,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ad(e,t){try{var a="",n=t;do a+=BR(n),n=n.return;while(n);var s=a}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Z0(e,t,a){return{value:e,source:null,stack:a??null,digest:t??null}}function Uj(e,t){try{console.error(t.value)}catch(a){setTimeout(function(){throw a})}}var h6=typeof WeakMap=="function"?WeakMap:Map;function U3(e,t,a){a=hi(-1,a),a.tag=3,a.payload={element:null};var n=t.value;return a.callback=function(){Mg||(Mg=!0,ew=n),Uj(e,t)},a}function H3(e,t,a){a=hi(-1,a),a.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;a.payload=function(){return n(s)},a.callback=function(){Uj(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(a.callback=function(){Uj(e,t),typeof n!="function"&&(ho===null?ho=new Set([this]):ho.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),a}function Z2(e,t,a){var n=e.pingCache;if(n===null){n=e.pingCache=new h6;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(a)||(s.add(a),e=C6.bind(null,e,t,a),t.then(e,e))}function X2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Q2(e,t,a,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(t=hi(-1,1),t.tag=2,fo(a,t,1))),a.lanes|=1),e)}var g6=Ei.ReactCurrentOwner,on=!1;function Ua(e,t,a,n){t.child=e===null?b3(t,null,a,n):td(t,e.child,a,n)}function J2(e,t,a,n,s){a=a.render;var i=t.ref;return Bc(t,s),n=T1(e,t,a,n,i,s),a=O1(),e!==null&&!on?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,wi(e,t,s)):(xr&&a&&v1(t),t.flags|=1,Ua(e,t,n,s),t.child)}function eS(e,t,a,n,s){if(e===null){var i=a.type;return typeof i=="function"&&!B1(i)&&i.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(t.tag=15,t.type=i,K3(e,t,i,n,s)):(e=ng(a.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(a=a.compare,a=a!==null?a:Xm,a(o,n)&&e.ref===t.ref)return wi(e,t,s)}return t.flags|=1,e=xo(i,n),e.ref=t.ref,e.return=t,t.child=e}function K3(e,t,a,n,s){if(e!==null){var i=e.memoizedProps;if(Xm(i,n)&&e.ref===t.ref)if(on=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(on=!0);else return t.lanes=e.lanes,wi(e,t,s)}return Hj(e,t,a,n,s)}function V3(e,t,a){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},or(Tc,jn),jn|=a;else{if(!(a&1073741824))return e=i!==null?i.baseLanes|a:a,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,or(Tc,jn),jn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:a,or(Tc,jn),jn|=n}else i!==null?(n=i.baseLanes|a,t.memoizedState=null):n=a,or(Tc,jn),jn|=n;return Ua(e,t,s,a),t.child}function G3(e,t){var a=t.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(t.flags|=512,t.flags|=2097152)}function Hj(e,t,a,n,s){var i=dn(a)?kl:qa.current;return i=Jc(t,i),Bc(t,s),a=T1(e,t,a,n,i,s),n=O1(),e!==null&&!on?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,wi(e,t,s)):(xr&&n&&v1(t),t.flags|=1,Ua(e,t,a,s),t.child)}function tS(e,t,a,n,s){if(dn(a)){var i=!0;_g(t)}else i=!1;if(Bc(t,s),t.stateNode===null)tg(e,t),W3(t,a,n),Wj(t,a,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=a.contextType;typeof d=="object"&&d!==null?d=Gn(d):(d=dn(a)?kl:qa.current,d=Jc(t,d));var u=a.getDerivedStateFromProps,m=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Y2(t,o,n,d),Zi=!1;var p=t.memoizedState;o.state=p,Pg(t,n,o,s),c=t.memoizedState,l!==n||p!==c||cn.current||Zi?(typeof u=="function"&&(Bj(t,a,u,n),c=t.memoizedState),(l=Zi||G2(t,a,l,n,p,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,w3(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:fs(t.type,l),o.props=d,m=t.pendingProps,p=o.context,c=a.contextType,typeof c=="object"&&c!==null?c=Gn(c):(c=dn(a)?kl:qa.current,c=Jc(t,c));var g=a.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||p!==c)&&Y2(t,o,n,c),Zi=!1,p=t.memoizedState,o.state=p,Pg(t,n,o,s);var x=t.memoizedState;l!==m||p!==x||cn.current||Zi?(typeof g=="function"&&(Bj(t,a,g,n),x=t.memoizedState),(d=Zi||G2(t,a,d,n,p,x,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=x),o.props=n,o.state=x,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return Kj(e,t,a,n,i,s)}function Kj(e,t,a,n,s,i){G3(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&F2(t,a,!1),wi(e,t,i);n=t.stateNode,g6.current=t;var l=o&&typeof a.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=td(t,e.child,null,i),t.child=td(t,null,l,i)):Ua(e,t,l,i),t.memoizedState=n.state,s&&F2(t,a,!0),t.child}function Y3(e){var t=e.stateNode;t.pendingContext?q2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&q2(e,t.context,!1),A1(e,t.containerInfo)}function rS(e,t,a,n,s){return ed(),j1(s),t.flags|=256,Ua(e,t,a,n),t.child}var Vj={dehydrated:null,treeContext:null,retryLane:0};function Gj(e){return{baseLanes:e,cachePool:null,transitions:null}}function Z3(e,t,a){var n=t.pendingProps,s=br.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),or(br,s&1),e===null)return Fj(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=yy(o,n,0,null),e=xl(e,n,a,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Gj(a),t.memoizedState=Vj,e):I1(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return x6(e,t,o,n,l,s,a);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=xo(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=xo(l,i):(i=xl(i,o,a,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?Gj(a):{baseLanes:o.baseLanes|a,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~a,t.memoizedState=Vj,n}return i=e.child,e=i.sibling,n=xo(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=a),n.return=t,n.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n}function I1(e,t){return t=yy({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function rh(e,t,a,n){return n!==null&&j1(n),td(t,e.child,null,a),e=I1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function x6(e,t,a,n,s,i,o){if(a)return t.flags&256?(t.flags&=-257,n=Z0(Error(Ke(422))),rh(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=yy({mode:"visible",children:n.children},s,0,null),i=xl(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&td(t,e.child,null,o),t.child.memoizedState=Gj(o),t.memoizedState=Vj,i);if(!(t.mode&1))return rh(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(Ke(419)),n=Z0(i,n,void 0),rh(e,t,o,n)}if(l=(o&e.childLanes)!==0,on||l){if(n=va,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ji(e,s),ks(n,e,s,-1))}return z1(),n=Z0(Error(Ke(421))),rh(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=E6.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Nn=po(s.nextSibling),Sn=t,xr=!0,ys=null,e!==null&&(qn[Fn++]=di,qn[Fn++]=ui,qn[Fn++]=Nl,di=e.id,ui=e.overflow,Nl=t),t=I1(t,n.children),t.flags|=4096,t)}function aS(e,t,a){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),zj(e.return,t,a)}function X0(e,t,a,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=a,i.tailMode=s)}function X3(e,t,a){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Ua(e,t,n.children,a),n=br.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&aS(e,a,t);else if(e.tag===19)aS(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(or(br,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(a=t.child,s=null;a!==null;)e=a.alternate,e!==null&&Cg(e)===null&&(s=a),a=a.sibling;a=s,a===null?(s=t.child,t.child=null):(s=a.sibling,a.sibling=null),X0(t,!1,s,a,i);break;case"backwards":for(a=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Cg(e)===null){t.child=s;break}e=s.sibling,s.sibling=a,a=s,s=e}X0(t,!0,a,null,i);break;case"together":X0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function tg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function wi(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Al|=t.lanes,!(a&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ke(153));if(t.child!==null){for(e=t.child,a=xo(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=xo(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function y6(e,t,a){switch(t.tag){case 3:Y3(t),ed();break;case 5:_3(t);break;case 1:dn(t.type)&&_g(t);break;case 4:A1(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;or(Sg,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(or(br,br.current&1),t.flags|=128,null):a&t.child.childLanes?Z3(e,t,a):(or(br,br.current&1),e=wi(e,t,a),e!==null?e.sibling:null);or(br,br.current&1);break;case 19:if(n=(a&t.childLanes)!==0,e.flags&128){if(n)return X3(e,t,a);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),or(br,br.current),n)break;return null;case 22:case 23:return t.lanes=0,V3(e,t,a)}return wi(e,t,a)}var Q3,Yj,J3,eO;Q3=function(e,t){for(var a=t.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};Yj=function(){};J3=function(e,t,a,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,il(Ks.current);var i=null;switch(a){case"input":s=xj(e,s),n=xj(e,n),i=[];break;case"select":s=Sr({},s,{value:void 0}),n=Sr({},n,{value:void 0}),i=[];break;case"textarea":s=bj(e,s),n=bj(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=jg)}wj(a,n);var o;a=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(a||(a={}),a[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Um.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=s?.[d],n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(a||(a={}),a[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(a||(a={}),a[o]=c[o])}else a||(i||(i=[]),i.push(d,a)),a=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Um.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&dr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}a&&(i=i||[]).push("style",a);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};eO=function(e,t,a,n){a!==n&&(t.flags|=4)};function zu(e,t){if(!xr)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ea(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,n=0;if(t)for(var s=e.child;s!==null;)a|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)a|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=a,t}function v6(e,t,a){var n=t.pendingProps;switch(b1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ea(t),null;case 1:return dn(t.type)&&wg(),Ea(t),null;case 3:return n=t.stateNode,rd(),fr(cn),fr(qa),C1(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(eh(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ys!==null&&(aw(ys),ys=null))),Yj(e,t),Ea(t),null;case 5:P1(t);var s=il(rp.current);if(a=t.type,e!==null&&t.stateNode!=null)J3(e,t,a,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Ke(166));return Ea(t),null}if(e=il(Ks.current),eh(t)){n=t.stateNode,a=t.type;var i=t.memoizedProps;switch(n[Fs]=t,n[ep]=i,e=(t.mode&1)!==0,a){case"dialog":dr("cancel",n),dr("close",n);break;case"iframe":case"object":case"embed":dr("load",n);break;case"video":case"audio":for(s=0;s<bm.length;s++)dr(bm[s],n);break;case"source":dr("error",n);break;case"img":case"image":case"link":dr("error",n),dr("load",n);break;case"details":dr("toggle",n);break;case"input":m2(n,i),dr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},dr("invalid",n);break;case"textarea":f2(n,i),dr("invalid",n)}wj(a,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Jf(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Jf(n.textContent,l,e),s=["children",""+l]):Um.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&dr("scroll",n)}switch(a){case"input":Hf(n),p2(n,i,!0);break;case"textarea":Hf(n),h2(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=jg)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=PT(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(a,{is:n.is}):(e=o.createElement(a),a==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,a),e[Fs]=t,e[ep]=n,Q3(e,t,!1,!1),t.stateNode=e;e:{switch(o=_j(a,n),a){case"dialog":dr("cancel",e),dr("close",e),s=n;break;case"iframe":case"object":case"embed":dr("load",e),s=n;break;case"video":case"audio":for(s=0;s<bm.length;s++)dr(bm[s],e);s=n;break;case"source":dr("error",e),s=n;break;case"img":case"image":case"link":dr("error",e),dr("load",e),s=n;break;case"details":dr("toggle",e),s=n;break;case"input":m2(e,n),s=xj(e,n),dr("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Sr({},n,{value:void 0}),dr("invalid",e);break;case"textarea":f2(e,n),s=bj(e,n),dr("invalid",e);break;default:s=n}wj(a,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?TT(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&CT(e,c)):i==="children"?typeof c=="string"?(a!=="textarea"||c!=="")&&Hm(e,c):typeof c=="number"&&Hm(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Um.hasOwnProperty(i)?c!=null&&i==="onScroll"&&dr("scroll",e):c!=null&&s1(e,i,c,o))}switch(a){case"input":Hf(e),p2(e,n,!1);break;case"textarea":Hf(e),h2(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ko(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Rc(e,!!n.multiple,i,!1):n.defaultValue!=null&&Rc(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=jg)}switch(a){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ea(t),null;case 6:if(e&&t.stateNode!=null)eO(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Ke(166));if(a=il(rp.current),il(Ks.current),eh(t)){if(n=t.stateNode,a=t.memoizedProps,n[Fs]=t,(i=n.nodeValue!==a)&&(e=Sn,e!==null))switch(e.tag){case 3:Jf(n.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Jf(n.nodeValue,a,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(a.nodeType===9?a:a.ownerDocument).createTextNode(n),n[Fs]=t,t.stateNode=n}return Ea(t),null;case 13:if(fr(br),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(xr&&Nn!==null&&t.mode&1&&!(t.flags&128))y3(),ed(),t.flags|=98560,i=!1;else if(i=eh(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(Ke(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ke(317));i[Fs]=t}else ed(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ea(t),i=!1}else ys!==null&&(aw(ys),ys=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=a,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||br.current&1?na===0&&(na=3):z1())),t.updateQueue!==null&&(t.flags|=4),Ea(t),null);case 4:return rd(),Yj(e,t),e===null&&Qm(t.stateNode.containerInfo),Ea(t),null;case 10:return k1(t.type._context),Ea(t),null;case 17:return dn(t.type)&&wg(),Ea(t),null;case 19:if(fr(br),i=t.memoizedState,i===null)return Ea(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)zu(i,!1);else{if(na!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Cg(e),o!==null){for(t.flags|=128,zu(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=a,a=t.child;a!==null;)i=a,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return or(br,br.current&1|2),t.child}e=e.sibling}i.tail!==null&&qr()>nd&&(t.flags|=128,n=!0,zu(i,!1),t.lanes=4194304)}else{if(!n)if(e=Cg(o),e!==null){if(t.flags|=128,n=!0,a=e.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),zu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!xr)return Ea(t),null}else 2*qr()-i.renderingStartTime>nd&&a!==1073741824&&(t.flags|=128,n=!0,zu(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(a=i.last,a!==null?a.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=qr(),t.sibling=null,a=br.current,or(br,n?a&1|2:a&1),t):(Ea(t),null);case 22:case 23:return F1(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?jn&1073741824&&(Ea(t),t.subtreeFlags&6&&(t.flags|=8192)):Ea(t),null;case 24:return null;case 25:return null}throw Error(Ke(156,t.tag))}function b6(e,t){switch(b1(t),t.tag){case 1:return dn(t.type)&&wg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return rd(),fr(cn),fr(qa),C1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return P1(t),null;case 13:if(fr(br),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ke(340));ed()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fr(br),null;case 4:return rd(),null;case 10:return k1(t.type._context),null;case 22:case 23:return F1(),null;case 24:return null;default:return null}}var ah=!1,Da=!1,j6=typeof WeakSet=="function"?WeakSet:Set,Je=null;function Ec(e,t){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(n){Or(e,t,n)}else a.current=null}function Zj(e,t,a){try{a()}catch(n){Or(e,t,n)}}var nS=!1;function w6(e,t){if(Mj=yg,e=s3(),y1(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var n=a.getSelection&&a.getSelection();if(n&&n.rangeCount!==0){a=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{a.nodeType,i.nodeType}catch{a=null;break e}var o=0,l=-1,c=-1,d=0,u=0,m=e,p=null;t:for(;;){for(var g;m!==a||s!==0&&m.nodeType!==3||(l=o+s),m!==i||n!==0&&m.nodeType!==3||(c=o+n),m.nodeType===3&&(o+=m.nodeValue.length),(g=m.firstChild)!==null;)p=m,m=g;for(;;){if(m===e)break t;if(p===a&&++d===s&&(l=o),p===i&&++u===n&&(c=o),(g=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=g}a=l===-1||c===-1?null:{start:l,end:c}}else a=null}a=a||{start:0,end:0}}else a=null;for(Dj={focusedElem:e,selectionRange:a},yg=!1,Je=t;Je!==null;)if(t=Je,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Je=e;else for(;Je!==null;){t=Je;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var h=x.memoizedProps,v=x.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?h:fs(t.type,h),v);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var j=t.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ke(163))}}catch(_){Or(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Je=e;break}Je=t.return}return x=nS,nS=!1,x}function Em(e,t,a){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Zj(t,a,i)}s=s.next}while(s!==n)}}function gy(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var a=t=t.next;do{if((a.tag&e)===e){var n=a.create;a.destroy=n()}a=a.next}while(a!==t)}}function Xj(e){var t=e.ref;if(t!==null){var a=e.stateNode;switch(e.tag){case 5:e=a;break;default:e=a}typeof t=="function"?t(e):t.current=e}}function tO(e){var t=e.alternate;t!==null&&(e.alternate=null,tO(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Fs],delete t[ep],delete t[$j],delete t[n6],delete t[s6])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rO(e){return e.tag===5||e.tag===3||e.tag===4}function sS(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||rO(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qj(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?a.nodeType===8?a.parentNode.insertBefore(e,t):a.insertBefore(e,t):(a.nodeType===8?(t=a.parentNode,t.insertBefore(e,a)):(t=a,t.appendChild(e)),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=jg));else if(n!==4&&(e=e.child,e!==null))for(Qj(e,t,a),e=e.sibling;e!==null;)Qj(e,t,a),e=e.sibling}function Jj(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Jj(e,t,a),e=e.sibling;e!==null;)Jj(e,t,a),e=e.sibling}var wa=null,hs=!1;function zi(e,t,a){for(a=a.child;a!==null;)aO(e,t,a),a=a.sibling}function aO(e,t,a){if(Hs&&typeof Hs.onCommitFiberUnmount=="function")try{Hs.onCommitFiberUnmount(ly,a)}catch{}switch(a.tag){case 5:Da||Ec(a,t);case 6:var n=wa,s=hs;wa=null,zi(e,t,a),wa=n,hs=s,wa!==null&&(hs?(e=wa,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):wa.removeChild(a.stateNode));break;case 18:wa!==null&&(hs?(e=wa,a=a.stateNode,e.nodeType===8?U0(e.parentNode,a):e.nodeType===1&&U0(e,a),Ym(e)):U0(wa,a.stateNode));break;case 4:n=wa,s=hs,wa=a.stateNode.containerInfo,hs=!0,zi(e,t,a),wa=n,hs=s;break;case 0:case 11:case 14:case 15:if(!Da&&(n=a.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Zj(a,t,o),s=s.next}while(s!==n)}zi(e,t,a);break;case 1:if(!Da&&(Ec(a,t),n=a.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=a.memoizedProps,n.state=a.memoizedState,n.componentWillUnmount()}catch(l){Or(a,t,l)}zi(e,t,a);break;case 21:zi(e,t,a);break;case 22:a.mode&1?(Da=(n=Da)||a.memoizedState!==null,zi(e,t,a),Da=n):zi(e,t,a);break;default:zi(e,t,a)}}function iS(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new j6),t.forEach(function(n){var s=T6.bind(null,e,n);a.has(n)||(a.add(n),n.then(s,s))})}}function us(e,t){var a=t.deletions;if(a!==null)for(var n=0;n<a.length;n++){var s=a[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:wa=l.stateNode,hs=!1;break e;case 3:wa=l.stateNode.containerInfo,hs=!0;break e;case 4:wa=l.stateNode.containerInfo,hs=!0;break e}l=l.return}if(wa===null)throw Error(Ke(160));aO(i,o,s),wa=null,hs=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Or(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)nO(t,e),t=t.sibling}function nO(e,t){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(us(t,e),Is(e),n&4){try{Em(3,e,e.return),gy(3,e)}catch(h){Or(e,e.return,h)}try{Em(5,e,e.return)}catch(h){Or(e,e.return,h)}}break;case 1:us(t,e),Is(e),n&512&&a!==null&&Ec(a,a.return);break;case 5:if(us(t,e),Is(e),n&512&&a!==null&&Ec(a,a.return),e.flags&32){var s=e.stateNode;try{Hm(s,"")}catch(h){Or(e,e.return,h)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=a!==null?a.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ST(s,i),_j(l,o);var d=_j(l,i);for(o=0;o<c.length;o+=2){var u=c[o],m=c[o+1];u==="style"?TT(s,m):u==="dangerouslySetInnerHTML"?CT(s,m):u==="children"?Hm(s,m):s1(s,u,m,d)}switch(l){case"input":yj(s,i);break;case"textarea":AT(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Rc(s,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?Rc(s,!!i.multiple,i.defaultValue,!0):Rc(s,!!i.multiple,i.multiple?[]:"",!1))}s[ep]=i}catch(h){Or(e,e.return,h)}}break;case 6:if(us(t,e),Is(e),n&4){if(e.stateNode===null)throw Error(Ke(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(h){Or(e,e.return,h)}}break;case 3:if(us(t,e),Is(e),n&4&&a!==null&&a.memoizedState.isDehydrated)try{Ym(t.containerInfo)}catch(h){Or(e,e.return,h)}break;case 4:us(t,e),Is(e);break;case 13:us(t,e),Is(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(R1=qr())),n&4&&iS(e);break;case 22:if(u=a!==null&&a.memoizedState!==null,e.mode&1?(Da=(d=Da)||u,us(t,e),Da=d):us(t,e),Is(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(Je=e,u=e.child;u!==null;){for(m=Je=u;Je!==null;){switch(p=Je,g=p.child,p.tag){case 0:case 11:case 14:case 15:Em(4,p,p.return);break;case 1:Ec(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){n=p,a=p.return;try{t=n,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(h){Or(n,a,h)}}break;case 5:Ec(p,p.return);break;case 22:if(p.memoizedState!==null){lS(m);continue}}g!==null?(g.return=p,Je=g):lS(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=ET("display",o))}catch(h){Or(e,e.return,h)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(h){Or(e,e.return,h)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:us(t,e),Is(e),n&4&&iS(e);break;case 21:break;default:us(t,e),Is(e)}}function Is(e){var t=e.flags;if(t&2){try{e:{for(var a=e.return;a!==null;){if(rO(a)){var n=a;break e}a=a.return}throw Error(Ke(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Hm(s,""),n.flags&=-33);var i=sS(e);Jj(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=sS(e);Qj(e,l,o);break;default:throw Error(Ke(161))}}catch(c){Or(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _6(e,t,a){Je=e,sO(e)}function sO(e,t,a){for(var n=(e.mode&1)!==0;Je!==null;){var s=Je,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||ah;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Da;l=ah;var d=Da;if(ah=o,(Da=c)&&!d)for(Je=s;Je!==null;)o=Je,c=o.child,o.tag===22&&o.memoizedState!==null?cS(s):c!==null?(c.return=o,Je=c):cS(s);for(;i!==null;)Je=i,sO(i),i=i.sibling;Je=s,ah=l,Da=d}oS(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Je=i):oS(e)}}function oS(e){for(;Je!==null;){var t=Je;if(t.flags&8772){var a=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Da||gy(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Da)if(a===null)n.componentDidMount();else{var s=t.elementType===t.type?a.memoizedProps:fs(t.type,a.memoizedProps);n.componentDidUpdate(s,a.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&H2(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(a=null,t.child!==null)switch(t.child.tag){case 5:a=t.child.stateNode;break;case 1:a=t.child.stateNode}H2(t,o,a)}break;case 5:var l=t.stateNode;if(a===null&&t.flags&4){a=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&a.focus();break;case"img":c.src&&(a.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&Ym(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ke(163))}Da||t.flags&512&&Xj(t)}catch(p){Or(t,t.return,p)}}if(t===e){Je=null;break}if(a=t.sibling,a!==null){a.return=t.return,Je=a;break}Je=t.return}}function lS(e){for(;Je!==null;){var t=Je;if(t===e){Je=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Je=a;break}Je=t.return}}function cS(e){for(;Je!==null;){var t=Je;try{switch(t.tag){case 0:case 11:case 15:var a=t.return;try{gy(4,t)}catch(c){Or(t,a,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){Or(t,s,c)}}var i=t.return;try{Xj(t)}catch(c){Or(t,i,c)}break;case 5:var o=t.return;try{Xj(t)}catch(c){Or(t,o,c)}}}catch(c){Or(t,t.return,c)}if(t===e){Je=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Je=l;break}Je=t.return}}var k6=Math.ceil,Og=Ei.ReactCurrentDispatcher,L1=Ei.ReactCurrentOwner,Hn=Ei.ReactCurrentBatchConfig,Mt=0,va=null,Kr=null,_a=0,jn=0,Tc=Eo(0),na=0,ip=null,Al=0,xy=0,$1=0,Tm=null,sn=null,R1=0,nd=1/0,si=null,Mg=!1,ew=null,ho=null,nh=!1,no=null,Dg=0,Om=0,tw=null,rg=-1,ag=0;function Xa(){return Mt&6?qr():rg!==-1?rg:rg=qr()}function go(e){return e.mode&1?Mt&2&&_a!==0?_a&-_a:o6.transition!==null?(ag===0&&(ag=WT()),ag):(e=Vt,e!==0||(e=window.event,e=e===void 0?16:ZT(e.type)),e):1}function ks(e,t,a,n){if(50<Om)throw Om=0,tw=null,Error(Ke(185));Xp(e,a,n),(!(Mt&2)||e!==va)&&(e===va&&(!(Mt&2)&&(xy|=a),na===4&&Ji(e,_a)),un(e,n),a===1&&Mt===0&&!(t.mode&1)&&(nd=qr()+500,py&&To()))}function un(e,t){var a=e.callbackNode;oq(e,t);var n=xg(e,e===va?_a:0);if(n===0)a!==null&&y2(a),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(a!=null&&y2(a),t===1)e.tag===0?i6(dS.bind(null,e)):h3(dS.bind(null,e)),r6(function(){!(Mt&6)&&To()}),a=null;else{switch(UT(n)){case 1:a=d1;break;case 4:a=zT;break;case 16:a=gg;break;case 536870912:a=BT;break;default:a=gg}a=pO(a,iO.bind(null,e))}e.callbackPriority=t,e.callbackNode=a}}function iO(e,t){if(rg=-1,ag=0,Mt&6)throw Error(Ke(327));var a=e.callbackNode;if(Wc()&&e.callbackNode!==a)return null;var n=xg(e,e===va?_a:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ig(e,n);else{t=n;var s=Mt;Mt|=2;var i=lO();(va!==e||_a!==t)&&(si=null,nd=qr()+500,gl(e,t));do try{A6();break}catch(l){oO(e,l)}while(!0);_1(),Og.current=i,Mt=s,Kr!==null?t=0:(va=null,_a=0,t=na)}if(t!==0){if(t===2&&(s=Pj(e),s!==0&&(n=s,t=rw(e,s))),t===1)throw a=ip,gl(e,0),Ji(e,n),un(e,qr()),a;if(t===6)Ji(e,n);else{if(s=e.current.alternate,!(n&30)&&!N6(s)&&(t=Ig(e,n),t===2&&(i=Pj(e),i!==0&&(n=i,t=rw(e,i))),t===1))throw a=ip,gl(e,0),Ji(e,n),un(e,qr()),a;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(Ke(345));case 2:Qo(e,sn,si);break;case 3:if(Ji(e,n),(n&130023424)===n&&(t=R1+500-qr(),10<t)){if(xg(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Xa(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Lj(Qo.bind(null,e,sn,si),t);break}Qo(e,sn,si);break;case 4:if(Ji(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-_s(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=qr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*k6(n/1960))-n,10<n){e.timeoutHandle=Lj(Qo.bind(null,e,sn,si),n);break}Qo(e,sn,si);break;case 5:Qo(e,sn,si);break;default:throw Error(Ke(329))}}}return un(e,qr()),e.callbackNode===a?iO.bind(null,e):null}function rw(e,t){var a=Tm;return e.current.memoizedState.isDehydrated&&(gl(e,t).flags|=256),e=Ig(e,t),e!==2&&(t=sn,sn=a,t!==null&&aw(t)),e}function aw(e){sn===null?sn=e:sn.push.apply(sn,e)}function N6(e){for(var t=e;;){if(t.flags&16384){var a=t.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var n=0;n<a.length;n++){var s=a[n],i=s.getSnapshot;s=s.value;try{if(!Ns(i(),s))return!1}catch{return!1}}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ji(e,t){for(t&=~$1,t&=~xy,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var a=31-_s(t),n=1<<a;e[a]=-1,t&=~n}}function dS(e){if(Mt&6)throw Error(Ke(327));Wc();var t=xg(e,0);if(!(t&1))return un(e,qr()),null;var a=Ig(e,t);if(e.tag!==0&&a===2){var n=Pj(e);n!==0&&(t=n,a=rw(e,n))}if(a===1)throw a=ip,gl(e,0),Ji(e,t),un(e,qr()),a;if(a===6)throw Error(Ke(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qo(e,sn,si),un(e,qr()),null}function q1(e,t){var a=Mt;Mt|=1;try{return e(t)}finally{Mt=a,Mt===0&&(nd=qr()+500,py&&To())}}function Pl(e){no!==null&&no.tag===0&&!(Mt&6)&&Wc();var t=Mt;Mt|=1;var a=Hn.transition,n=Vt;try{if(Hn.transition=null,Vt=1,e)return e()}finally{Vt=n,Hn.transition=a,Mt=t,!(Mt&6)&&To()}}function F1(){jn=Tc.current,fr(Tc)}function gl(e,t){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,t6(a)),Kr!==null)for(a=Kr.return;a!==null;){var n=a;switch(b1(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&wg();break;case 3:rd(),fr(cn),fr(qa),C1();break;case 5:P1(n);break;case 4:rd();break;case 13:fr(br);break;case 19:fr(br);break;case 10:k1(n.type._context);break;case 22:case 23:F1()}a=a.return}if(va=e,Kr=e=xo(e.current,null),_a=jn=t,na=0,ip=null,$1=xy=Al=0,sn=Tm=null,sl!==null){for(t=0;t<sl.length;t++)if(a=sl[t],n=a.interleaved,n!==null){a.interleaved=null;var s=n.next,i=a.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}a.pending=n}sl=null}return e}function oO(e,t){do{var a=Kr;try{if(_1(),Jh.current=Tg,Eg){for(var n=kr.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Eg=!1}if(Sl=0,ha=ta=kr=null,Cm=!1,ap=0,L1.current=null,a===null||a.return===null){na=1,ip=t,Kr=null;break}e:{var i=e,o=a.return,l=a,c=t;if(t=_a,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=X2(o);if(g!==null){g.flags&=-257,Q2(g,o,l,i,t),g.mode&1&&Z2(i,d,t),t=g,c=d;var x=t.updateQueue;if(x===null){var h=new Set;h.add(c),t.updateQueue=h}else x.add(c);break e}else{if(!(t&1)){Z2(i,d,t),z1();break e}c=Error(Ke(426))}}else if(xr&&l.mode&1){var v=X2(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Q2(v,o,l,i,t),j1(ad(c,l));break e}}i=c=ad(c,l),na!==4&&(na=2),Tm===null?Tm=[i]:Tm.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var b=U3(i,c,t);U2(i,b);break e;case 1:l=c;var y=i.type,j=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(ho===null||!ho.has(j)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=H3(i,l,t);U2(i,_);break e}}i=i.return}while(i!==null)}dO(a)}catch(w){t=w,Kr===a&&a!==null&&(Kr=a=a.return);continue}break}while(!0)}function lO(){var e=Og.current;return Og.current=Tg,e===null?Tg:e}function z1(){(na===0||na===3||na===2)&&(na=4),va===null||!(Al&268435455)&&!(xy&268435455)||Ji(va,_a)}function Ig(e,t){var a=Mt;Mt|=2;var n=lO();(va!==e||_a!==t)&&(si=null,gl(e,t));do try{S6();break}catch(s){oO(e,s)}while(!0);if(_1(),Mt=a,Og.current=n,Kr!==null)throw Error(Ke(261));return va=null,_a=0,na}function S6(){for(;Kr!==null;)cO(Kr)}function A6(){for(;Kr!==null&&!QR();)cO(Kr)}function cO(e){var t=mO(e.alternate,e,jn);e.memoizedProps=e.pendingProps,t===null?dO(e):Kr=t,L1.current=null}function dO(e){var t=e;do{var a=t.alternate;if(e=t.return,t.flags&32768){if(a=b6(a,t),a!==null){a.flags&=32767,Kr=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{na=6,Kr=null;return}}else if(a=v6(a,t,jn),a!==null){Kr=a;return}if(t=t.sibling,t!==null){Kr=t;return}Kr=t=e}while(t!==null);na===0&&(na=5)}function Qo(e,t,a){var n=Vt,s=Hn.transition;try{Hn.transition=null,Vt=1,P6(e,t,a,n)}finally{Hn.transition=s,Vt=n}return null}function P6(e,t,a,n){do Wc();while(no!==null);if(Mt&6)throw Error(Ke(327));a=e.finishedWork;var s=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(Ke(177));e.callbackNode=null,e.callbackPriority=0;var i=a.lanes|a.childLanes;if(lq(e,i),e===va&&(Kr=va=null,_a=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||nh||(nh=!0,pO(gg,function(){return Wc(),null})),i=(a.flags&15990)!==0,a.subtreeFlags&15990||i){i=Hn.transition,Hn.transition=null;var o=Vt;Vt=1;var l=Mt;Mt|=4,L1.current=null,w6(e,a),nO(a,e),Gq(Dj),yg=!!Mj,Dj=Mj=null,e.current=a,_6(a),JR(),Mt=l,Vt=o,Hn.transition=i}else e.current=a;if(nh&&(nh=!1,no=e,Dg=s),i=e.pendingLanes,i===0&&(ho=null),rq(a.stateNode),un(e,qr()),t!==null)for(n=e.onRecoverableError,a=0;a<t.length;a++)s=t[a],n(s.value,{componentStack:s.stack,digest:s.digest});if(Mg)throw Mg=!1,e=ew,ew=null,e;return Dg&1&&e.tag!==0&&Wc(),i=e.pendingLanes,i&1?e===tw?Om++:(Om=0,tw=e):Om=0,To(),null}function Wc(){if(no!==null){var e=UT(Dg),t=Hn.transition,a=Vt;try{if(Hn.transition=null,Vt=16>e?16:e,no===null)var n=!1;else{if(e=no,no=null,Dg=0,Mt&6)throw Error(Ke(331));var s=Mt;for(Mt|=4,Je=e.current;Je!==null;){var i=Je,o=i.child;if(Je.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Je=d;Je!==null;){var u=Je;switch(u.tag){case 0:case 11:case 15:Em(8,u,i)}var m=u.child;if(m!==null)m.return=u,Je=m;else for(;Je!==null;){u=Je;var p=u.sibling,g=u.return;if(tO(u),u===d){Je=null;break}if(p!==null){p.return=g,Je=p;break}Je=g}}}var x=i.alternate;if(x!==null){var h=x.child;if(h!==null){x.child=null;do{var v=h.sibling;h.sibling=null,h=v}while(h!==null)}}Je=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Je=o;else e:for(;Je!==null;){if(i=Je,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Em(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,Je=b;break e}Je=i.return}}var y=e.current;for(Je=y;Je!==null;){o=Je;var j=o.child;if(o.subtreeFlags&2064&&j!==null)j.return=o,Je=j;else e:for(o=y;Je!==null;){if(l=Je,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:gy(9,l)}}catch(w){Or(l,l.return,w)}if(l===o){Je=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,Je=_;break e}Je=l.return}}if(Mt=s,To(),Hs&&typeof Hs.onPostCommitFiberRoot=="function")try{Hs.onPostCommitFiberRoot(ly,e)}catch{}n=!0}return n}finally{Vt=a,Hn.transition=t}}return!1}function uS(e,t,a){t=ad(a,t),t=U3(e,t,1),e=fo(e,t,1),t=Xa(),e!==null&&(Xp(e,1,t),un(e,t))}function Or(e,t,a){if(e.tag===3)uS(e,e,a);else for(;t!==null;){if(t.tag===3){uS(t,e,a);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ho===null||!ho.has(n))){e=ad(a,e),e=H3(t,e,1),t=fo(t,e,1),e=Xa(),t!==null&&(Xp(t,1,e),un(t,e));break}}t=t.return}}function C6(e,t,a){var n=e.pingCache;n!==null&&n.delete(t),t=Xa(),e.pingedLanes|=e.suspendedLanes&a,va===e&&(_a&a)===a&&(na===4||na===3&&(_a&130023424)===_a&&500>qr()-R1?gl(e,0):$1|=a),un(e,t)}function uO(e,t){t===0&&(e.mode&1?(t=Gf,Gf<<=1,!(Gf&130023424)&&(Gf=4194304)):t=1);var a=Xa();e=ji(e,t),e!==null&&(Xp(e,t,a),un(e,a))}function E6(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),uO(e,a)}function T6(e,t){var a=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(a=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Ke(314))}n!==null&&n.delete(t),uO(e,a)}var mO;mO=function(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps||cn.current)on=!0;else{if(!(e.lanes&a)&&!(t.flags&128))return on=!1,y6(e,t,a);on=!!(e.flags&131072)}else on=!1,xr&&t.flags&1048576&&g3(t,Ng,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;tg(e,t),e=t.pendingProps;var s=Jc(t,qa.current);Bc(t,a),s=T1(null,t,n,e,s,a);var i=O1();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,dn(n)?(i=!0,_g(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,S1(t),s.updater=hy,t.stateNode=s,s._reactInternals=t,Wj(t,n,e,a),t=Kj(null,t,n,!0,i,a)):(t.tag=0,xr&&i&&v1(t),Ua(null,t,s,a),t=t.child),t;case 16:n=t.elementType;e:{switch(tg(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=M6(n),e=fs(n,e),s){case 0:t=Hj(null,t,n,e,a);break e;case 1:t=tS(null,t,n,e,a);break e;case 11:t=J2(null,t,n,e,a);break e;case 14:t=eS(null,t,n,fs(n.type,e),a);break e}throw Error(Ke(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:fs(n,s),Hj(e,t,n,s,a);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:fs(n,s),tS(e,t,n,s,a);case 3:e:{if(Y3(t),e===null)throw Error(Ke(387));n=t.pendingProps,i=t.memoizedState,s=i.element,w3(e,t),Pg(t,n,null,a);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=ad(Error(Ke(423)),t),t=rS(e,t,n,a,s);break e}else if(n!==s){s=ad(Error(Ke(424)),t),t=rS(e,t,n,a,s);break e}else for(Nn=po(t.stateNode.containerInfo.firstChild),Sn=t,xr=!0,ys=null,a=b3(t,null,n,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ed(),n===s){t=wi(e,t,a);break e}Ua(e,t,n,a)}t=t.child}return t;case 5:return _3(t),e===null&&Fj(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Ij(n,s)?o=null:i!==null&&Ij(n,i)&&(t.flags|=32),G3(e,t),Ua(e,t,o,a),t.child;case 6:return e===null&&Fj(t),null;case 13:return Z3(e,t,a);case 4:return A1(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=td(t,null,n,a):Ua(e,t,n,a),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:fs(n,s),J2(e,t,n,s,a);case 7:return Ua(e,t,t.pendingProps,a),t.child;case 8:return Ua(e,t,t.pendingProps.children,a),t.child;case 12:return Ua(e,t,t.pendingProps.children,a),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,or(Sg,n._currentValue),n._currentValue=o,i!==null)if(Ns(i.value,o)){if(i.children===s.children&&!cn.current){t=wi(e,t,a);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=hi(-1,a&-a),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=a,c=i.alternate,c!==null&&(c.lanes|=a),zj(i.return,a,t),l.lanes|=a;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ke(341));o.lanes|=a,l=o.alternate,l!==null&&(l.lanes|=a),zj(o,a,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ua(e,t,s.children,a),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Bc(t,a),s=Gn(s),n=n(s),t.flags|=1,Ua(e,t,n,a),t.child;case 14:return n=t.type,s=fs(n,t.pendingProps),s=fs(n.type,s),eS(e,t,n,s,a);case 15:return K3(e,t,t.type,t.pendingProps,a);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:fs(n,s),tg(e,t),t.tag=1,dn(n)?(e=!0,_g(t)):e=!1,Bc(t,a),W3(t,n,s),Wj(t,n,s,a),Kj(null,t,n,!0,e,a);case 19:return X3(e,t,a);case 22:return V3(e,t,a)}throw Error(Ke(156,t.tag))};function pO(e,t){return FT(e,t)}function O6(e,t,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(e,t,a,n){return new O6(e,t,a,n)}function B1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function M6(e){if(typeof e=="function")return B1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===o1)return 11;if(e===l1)return 14}return 2}function xo(e,t){var a=e.alternate;return a===null?(a=Wn(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function ng(e,t,a,n,s,i){var o=2;if(n=e,typeof e=="function")B1(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case jc:return xl(a.children,s,i,t);case i1:o=8,s|=8;break;case pj:return e=Wn(12,a,t,s|2),e.elementType=pj,e.lanes=i,e;case fj:return e=Wn(13,a,t,s),e.elementType=fj,e.lanes=i,e;case hj:return e=Wn(19,a,t,s),e.elementType=hj,e.lanes=i,e;case _T:return yy(a,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case jT:o=10;break e;case wT:o=9;break e;case o1:o=11;break e;case l1:o=14;break e;case Yi:o=16,n=null;break e}throw Error(Ke(130,e==null?e:typeof e,""))}return t=Wn(o,a,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function xl(e,t,a,n){return e=Wn(7,e,n,t),e.lanes=a,e}function yy(e,t,a,n){return e=Wn(22,e,n,t),e.elementType=_T,e.lanes=a,e.stateNode={isHidden:!1},e}function Q0(e,t,a){return e=Wn(6,e,null,t),e.lanes=a,e}function J0(e,t,a){return t=Wn(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function D6(e,t,a,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=M0(0),this.expirationTimes=M0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=M0(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function W1(e,t,a,n,s,i,o,l,c){return e=new D6(e,t,a,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Wn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},S1(i),e}function I6(e,t,a){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bc,key:n==null?null:""+n,children:e,containerInfo:t,implementation:a}}function fO(e){if(!e)return No;e=e._reactInternals;e:{if(Fl(e)!==e||e.tag!==1)throw Error(Ke(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(dn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ke(171))}if(e.tag===1){var a=e.type;if(dn(a))return f3(e,a,t)}return t}function hO(e,t,a,n,s,i,o,l,c){return e=W1(a,n,!0,e,s,i,o,l,c),e.context=fO(null),a=e.current,n=Xa(),s=go(a),i=hi(n,s),i.callback=t??null,fo(a,i,s),e.current.lanes=s,Xp(e,s,n),un(e,n),e}function vy(e,t,a,n){var s=t.current,i=Xa(),o=go(s);return a=fO(a),t.context===null?t.context=a:t.pendingContext=a,t=hi(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=fo(s,t,o),e!==null&&(ks(e,s,o,i),Qh(e,s,o)),o}function Lg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function mS(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function U1(e,t){mS(e,t),(e=e.alternate)&&mS(e,t)}function L6(){return null}var gO=typeof reportError=="function"?reportError:function(e){console.error(e)};function H1(e){this._internalRoot=e}by.prototype.render=H1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ke(409));vy(e,t,null,null)};by.prototype.unmount=H1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Pl(function(){vy(null,e,null,null)}),t[bi]=null}};function by(e){this._internalRoot=e}by.prototype.unstable_scheduleHydration=function(e){if(e){var t=VT();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Qi.length&&t!==0&&t<Qi[a].priority;a++);Qi.splice(a,0,e),a===0&&YT(e)}};function K1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function jy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pS(){}function $6(e,t,a,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var d=Lg(o);i.call(d)}}var o=hO(t,n,e,0,null,!1,!1,"",pS);return e._reactRootContainer=o,e[bi]=o.current,Qm(e.nodeType===8?e.parentNode:e),Pl(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var d=Lg(c);l.call(d)}}var c=W1(e,0,!1,null,null,!1,!1,"",pS);return e._reactRootContainer=c,e[bi]=c.current,Qm(e.nodeType===8?e.parentNode:e),Pl(function(){vy(t,c,a,n)}),c}function wy(e,t,a,n,s){var i=a._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Lg(o);l.call(c)}}vy(t,o,e,s)}else o=$6(a,t,e,s,n);return Lg(o)}HT=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var a=vm(t.pendingLanes);a!==0&&(u1(t,a|1),un(t,qr()),!(Mt&6)&&(nd=qr()+500,To()))}break;case 13:Pl(function(){var n=ji(e,1);if(n!==null){var s=Xa();ks(n,e,1,s)}}),U1(e,1)}};m1=function(e){if(e.tag===13){var t=ji(e,134217728);if(t!==null){var a=Xa();ks(t,e,134217728,a)}U1(e,134217728)}};KT=function(e){if(e.tag===13){var t=go(e),a=ji(e,t);if(a!==null){var n=Xa();ks(a,e,t,n)}U1(e,t)}};VT=function(){return Vt};GT=function(e,t){var a=Vt;try{return Vt=e,t()}finally{Vt=a}};Nj=function(e,t,a){switch(t){case"input":if(yj(e,a),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<a.length;t++){var n=a[t];if(n!==e&&n.form===e.form){var s=my(n);if(!s)throw Error(Ke(90));NT(n),yj(n,s)}}}break;case"textarea":AT(e,a);break;case"select":t=a.value,t!=null&&Rc(e,!!a.multiple,t,!1)}};DT=q1;IT=Pl;var R6={usingClientEntryPoint:!1,Events:[Jp,Nc,my,OT,MT,q1]},Bu={findFiberByHostInstance:nl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},q6={bundleType:Bu.bundleType,version:Bu.version,rendererPackageName:Bu.rendererPackageName,rendererConfig:Bu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ei.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=RT(e),e===null?null:e.stateNode},findFiberByHostInstance:Bu.findFiberByHostInstance||L6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{ly=sh.inject(q6),Hs=sh}catch{}}Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R6;Cn.createPortal=function(e,t){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!K1(t))throw Error(Ke(200));return I6(e,t,null,a)};Cn.createRoot=function(e,t){if(!K1(e))throw Error(Ke(299));var a=!1,n="",s=gO;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=W1(e,1,!1,null,null,a,!1,n,s),e[bi]=t.current,Qm(e.nodeType===8?e.parentNode:e),new H1(t)};Cn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ke(188)):(e=Object.keys(e).join(","),Error(Ke(268,e)));return e=RT(t),e=e===null?null:e.stateNode,e};Cn.flushSync=function(e){return Pl(e)};Cn.hydrate=function(e,t,a){if(!jy(t))throw Error(Ke(200));return wy(null,e,t,!0,a)};Cn.hydrateRoot=function(e,t,a){if(!K1(e))throw Error(Ke(405));var n=a!=null&&a.hydratedSources||null,s=!1,i="",o=gO;if(a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(i=a.identifierPrefix),a.onRecoverableError!==void 0&&(o=a.onRecoverableError)),t=hO(t,null,e,1,a??null,s,!1,i,o),e[bi]=t.current,Qm(e),n)for(e=0;e<n.length;e++)a=n[e],s=a._getVersion,s=s(a._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[a,s]:t.mutableSourceEagerHydrationData.push(a,s);return new by(t)};Cn.render=function(e,t,a){if(!jy(t))throw Error(Ke(200));return wy(null,e,t,!1,a)};Cn.unmountComponentAtNode=function(e){if(!jy(e))throw Error(Ke(40));return e._reactRootContainer?(Pl(function(){wy(null,null,e,!1,function(){e._reactRootContainer=null,e[bi]=null})}),!0):!1};Cn.unstable_batchedUpdates=q1;Cn.unstable_renderSubtreeIntoContainer=function(e,t,a,n){if(!jy(a))throw Error(Ke(200));if(e==null||e._reactInternals===void 0)throw Error(Ke(38));return wy(e,t,a,!1,n)};Cn.version="18.3.1-next-f1338f8080-20240426";function xO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xO)}catch(e){console.error(e)}}xO(),xT.exports=Cn;var zl=xT.exports,fS=zl;uj.createRoot=fS.createRoot,uj.hydrateRoot=fS.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function op(){return op=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},op.apply(this,arguments)}var so;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(so||(so={}));const hS="popstate";function F6(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:o,hash:l}=n.location;return nw("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function a(n,s){return typeof s=="string"?s:$g(s)}return B6(t,a,null,e)}function Nr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function V1(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function z6(){return Math.random().toString(36).substr(2,8)}function gS(e,t){return{usr:e.state,key:e.key,idx:t}}function nw(e,t,a,n){return a===void 0&&(a=null),op({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Hd(t):t,{state:a,key:t&&t.key||n||z6()})}function $g(e){let{pathname:t="/",search:a="",hash:n=""}=e;return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Hd(e){let t={};if(e){let a=e.indexOf("#");a>=0&&(t.hash=e.substr(a),e=e.substr(0,a));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function B6(e,t,a,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=so.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(op({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function m(){l=so.Pop;let v=u(),b=v==null?null:v-d;d=v,c&&c({action:l,location:h.location,delta:b})}function p(v,b){l=so.Push;let y=nw(h.location,v,b);d=u()+1;let j=gS(y,d),_=h.createHref(y);try{o.pushState(j,"",_)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;s.location.assign(_)}i&&c&&c({action:l,location:h.location,delta:1})}function g(v,b){l=so.Replace;let y=nw(h.location,v,b);d=u();let j=gS(y,d),_=h.createHref(y);o.replaceState(j,"",_),i&&c&&c({action:l,location:h.location,delta:0})}function x(v){let b=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof v=="string"?v:$g(v);return y=y.replace(/ $/,"%20"),Nr(b,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,b)}let h={get action(){return l},get location(){return e(s,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(hS,m),c=v,()=>{s.removeEventListener(hS,m),c=null}},createHref(v){return t(s,v)},createURL:x,encodeLocation(v){let b=x(v);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:g,go(v){return o.go(v)}};return h}var xS;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(xS||(xS={}));function W6(e,t,a){return a===void 0&&(a="/"),U6(e,t,a)}function U6(e,t,a,n){let s=typeof t=="string"?Hd(t):t,i=sd(s.pathname||"/",a);if(i==null)return null;let o=yO(e);H6(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=rF(i);l=eF(o[c],d)}return l}function yO(e,t,a,n){t===void 0&&(t=[]),a===void 0&&(a=[]),n===void 0&&(n="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Nr(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=yo([n,c.relativePath]),u=a.concat(c);i.children&&i.children.length>0&&(Nr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),yO(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:Q6(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of vO(i.path))s(i,o,c)}),t}function vO(e){let t=e.split("/");if(t.length===0)return[];let[a,...n]=t,s=a.endsWith("?"),i=a.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=vO(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function H6(e){e.sort((t,a)=>t.score!==a.score?a.score-t.score:J6(t.routesMeta.map(n=>n.childrenIndex),a.routesMeta.map(n=>n.childrenIndex)))}const K6=/^:[\w-]+$/,V6=3,G6=2,Y6=1,Z6=10,X6=-2,yS=e=>e==="*";function Q6(e,t){let a=e.split("/"),n=a.length;return a.some(yS)&&(n+=X6),t&&(n+=G6),a.filter(s=>!yS(s)).reduce((s,i)=>s+(K6.test(i)?V6:i===""?Y6:Z6),n)}function J6(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function eF(e,t,a){let{routesMeta:n}=e,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",m=sw({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),p=c.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:yo([i,m.pathname]),pathnameBase:oF(yo([i,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(i=yo([i,m.pathnameBase]))}return o}function sw(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[a,n]=tF(e.path,e.caseSensitive,e.end),s=t.match(a);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((d,u,m)=>{let{paramName:p,isOptional:g}=u;if(p==="*"){let h=l[m]||"";o=i.slice(0,i.length-h.length).replace(/(.)\/+$/,"$1")}const x=l[m];return g&&!x?d[p]=void 0:d[p]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function tF(e,t,a){t===void 0&&(t=!1),a===void 0&&(a=!0),V1(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function rF(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return V1(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function sd(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,n=e.charAt(a);return n&&n!=="/"?null:e.slice(a)||"/"}const aF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nF=e=>aF.test(e);function sF(e,t){t===void 0&&(t="/");let{pathname:a,search:n="",hash:s=""}=typeof e=="string"?Hd(e):e,i;if(a)if(nF(a))i=a;else{if(a.includes("//")){let o=a;a=a.replace(/\/\/+/g,"/"),V1(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+a))}a.startsWith("/")?i=vS(a.substring(1),"/"):i=vS(a,t)}else i=t;return{pathname:i,search:lF(n),hash:cF(s)}}function vS(e,t){let a=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?a.length>1&&a.pop():s!=="."&&a.push(s)}),a.length>1?a.join("/"):"/"}function eb(e,t,a,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function iF(e){return e.filter((t,a)=>a===0||t.route.path&&t.route.path.length>0)}function G1(e,t){let a=iF(e);return t?a.map((n,s)=>s===a.length-1?n.pathname:n.pathnameBase):a.map(n=>n.pathnameBase)}function Y1(e,t,a,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=Hd(e):(s=op({},e),Nr(!s.pathname||!s.pathname.includes("?"),eb("?","pathname","search",s)),Nr(!s.pathname||!s.pathname.includes("#"),eb("#","pathname","hash",s)),Nr(!s.search||!s.search.includes("#"),eb("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=a;else{let m=t.length-1;if(!n&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),m-=1;s.pathname=p.join("/")}l=m>=0?t[m]:"/"}let c=sF(s,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&a.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const yo=e=>e.join("/").replace(/\/\/+/g,"/"),oF=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),lF=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,cF=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function dF(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const bO=["post","put","patch","delete"];new Set(bO);const uF=["get",...bO];new Set(uF);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lp(){return lp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},lp.apply(this,arguments)}const _y=f.createContext(null),jO=f.createContext(null),Ti=f.createContext(null),ky=f.createContext(null),Xs=f.createContext({outlet:null,matches:[],isDataRoute:!1}),wO=f.createContext(null);function mF(e,t){let{relative:a}=t===void 0?{}:t;Kd()||Nr(!1);let{basename:n,navigator:s}=f.useContext(Ti),{hash:i,pathname:o,search:l}=Ny(e,{relative:a}),c=o;return n!=="/"&&(c=o==="/"?n:yo([n,o])),s.createHref({pathname:c,search:l,hash:i})}function Kd(){return f.useContext(ky)!=null}function Zr(){return Kd()||Nr(!1),f.useContext(ky).location}function _O(e){f.useContext(Ti).static||f.useLayoutEffect(e)}function Tn(){let{isDataRoute:e}=f.useContext(Xs);return e?AF():pF()}function pF(){Kd()||Nr(!1);let e=f.useContext(_y),{basename:t,future:a,navigator:n}=f.useContext(Ti),{matches:s}=f.useContext(Xs),{pathname:i}=Zr(),o=JSON.stringify(G1(s,a.v7_relativeSplatPath)),l=f.useRef(!1);return _O(()=>{l.current=!0}),f.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let m=Y1(d,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:yo([t,m.pathname])),(u.replace?n.replace:n.push)(m,u.state,u)},[t,n,o,i,e])}const fF=f.createContext(null);function hF(e){let t=f.useContext(Xs).outlet;return t&&f.createElement(fF.Provider,{value:e},t)}function As(){let{matches:e}=f.useContext(Xs),t=e[e.length-1];return t?t.params:{}}function Ny(e,t){let{relative:a}=t===void 0?{}:t,{future:n}=f.useContext(Ti),{matches:s}=f.useContext(Xs),{pathname:i}=Zr(),o=JSON.stringify(G1(s,n.v7_relativeSplatPath));return f.useMemo(()=>Y1(e,JSON.parse(o),i,a==="path"),[e,o,i,a])}function gF(e,t){return xF(e,t)}function xF(e,t,a,n){Kd()||Nr(!1);let{navigator:s}=f.useContext(Ti),{matches:i}=f.useContext(Xs),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Zr(),u;if(t){var m;let v=typeof t=="string"?Hd(t):t;c==="/"||(m=v.pathname)!=null&&m.startsWith(c)||Nr(!1),u=v}else u=d;let p=u.pathname||"/",g=p;if(c!=="/"){let v=c.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let x=W6(e,{pathname:g}),h=wF(x&&x.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:yo([c,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:yo([c,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,a,n);return t&&h?f.createElement(ky.Provider,{value:{location:lp({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:so.Pop}},h):h}function yF(){let e=SF(),t=dF(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),a?f.createElement("pre",{style:s},a):null,null)}const vF=f.createElement(yF,null);class bF extends f.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){console.error("React Router caught the following error during render",t,a)}render(){return this.state.error!==void 0?f.createElement(Xs.Provider,{value:this.props.routeContext},f.createElement(wO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function jF(e){let{routeContext:t,match:a,children:n}=e,s=f.useContext(_y);return s&&s.static&&s.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=a.route.id),f.createElement(Xs.Provider,{value:t},n)}function wF(e,t,a,n){var s;if(t===void 0&&(t=[]),a===void 0&&(a=null),n===void 0&&(n=null),e==null){var i;if(!a)return null;if(a.errors)e=a.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!a.initialized&&a.matches.length>0)e=a.matches;else return null}let o=e,l=(s=a)==null?void 0:s.errors;if(l!=null){let u=o.findIndex(m=>m.route.id&&l?.[m.route.id]!==void 0);u>=0||Nr(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(a&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let m=o[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:p,errors:g}=a,x=m.route.loader&&p[m.route.id]===void 0&&(!g||g[m.route.id]===void 0);if(m.route.lazy||x){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,m,p)=>{let g,x=!1,h=null,v=null;a&&(g=l&&m.route.id?l[m.route.id]:void 0,h=m.route.errorElement||vF,c&&(d<0&&p===0?(PF("route-fallback"),x=!0,v=null):d===p&&(x=!0,v=m.route.hydrateFallbackElement||null)));let b=t.concat(o.slice(0,p+1)),y=()=>{let j;return g?j=h:x?j=v:m.route.Component?j=f.createElement(m.route.Component,null):m.route.element?j=m.route.element:j=u,f.createElement(jF,{match:m,routeContext:{outlet:u,matches:b,isDataRoute:a!=null},children:j})};return a&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?f.createElement(bF,{location:a.location,revalidation:a.revalidation,component:h,error:g,children:y(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):y()},null)}var kO=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(kO||{}),NO=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(NO||{});function _F(e){let t=f.useContext(_y);return t||Nr(!1),t}function kF(e){let t=f.useContext(jO);return t||Nr(!1),t}function NF(e){let t=f.useContext(Xs);return t||Nr(!1),t}function SO(e){let t=NF(),a=t.matches[t.matches.length-1];return a.route.id||Nr(!1),a.route.id}function SF(){var e;let t=f.useContext(wO),a=kF(),n=SO();return t!==void 0?t:(e=a.errors)==null?void 0:e[n]}function AF(){let{router:e}=_F(kO.UseNavigateStable),t=SO(NO.UseNavigateStable),a=f.useRef(!1);return _O(()=>{a.current=!0}),f.useCallback(function(s,i){i===void 0&&(i={}),a.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,lp({fromRouteId:t},i)))},[e,t])}const bS={};function PF(e,t,a){bS[e]||(bS[e]=!0)}function CF(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function Ot(e){let{to:t,replace:a,state:n,relative:s}=e;Kd()||Nr(!1);let{future:i,static:o}=f.useContext(Ti),{matches:l}=f.useContext(Xs),{pathname:c}=Zr(),d=Tn(),u=Y1(t,G1(l,i.v7_relativeSplatPath),c,s==="path"),m=JSON.stringify(u);return f.useEffect(()=>d(JSON.parse(m),{replace:a,state:n,relative:s}),[d,m,s,a,n]),null}function AO(e){return hF(e.context)}function De(e){Nr(!1)}function EF(e){let{basename:t="/",children:a=null,location:n,navigationType:s=so.Pop,navigator:i,static:o=!1,future:l}=e;Kd()&&Nr(!1);let c=t.replace(/^\/*/,"/"),d=f.useMemo(()=>({basename:c,navigator:i,static:o,future:lp({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=Hd(n));let{pathname:u="/",search:m="",hash:p="",state:g=null,key:x="default"}=n,h=f.useMemo(()=>{let v=sd(u,c);return v==null?null:{location:{pathname:v,search:m,hash:p,state:g,key:x},navigationType:s}},[c,u,m,p,g,x,s]);return h==null?null:f.createElement(Ti.Provider,{value:d},f.createElement(ky.Provider,{children:a,value:h}))}function TF(e){let{children:t,location:a}=e;return gF(iw(t),a)}new Promise(()=>{});function iw(e,t){t===void 0&&(t=[]);let a=[];return f.Children.forEach(e,(n,s)=>{if(!f.isValidElement(n))return;let i=[...t,s];if(n.type===f.Fragment){a.push.apply(a,iw(n.props.children,i));return}n.type!==De&&Nr(!1),!n.props.index||!n.props.children||Nr(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=iw(n.props.children,i)),a.push(o)}),a}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rg(){return Rg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Rg.apply(this,arguments)}function PO(e,t){if(e==null)return{};var a={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(a[s]=e[s]);return a}function OF(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function MF(e,t){return e.button===0&&(!t||t==="_self")&&!OF(e)}const DF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],IF=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],LF="6";try{window.__reactRouterVersion=LF}catch{}const $F=f.createContext({isTransitioning:!1}),RF="startTransition",jS=CR[RF];function qF(e){let{basename:t,children:a,future:n,window:s}=e,i=f.useRef();i.current==null&&(i.current=F6({window:s,v5Compat:!0}));let o=i.current,[l,c]=f.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=f.useCallback(m=>{d&&jS?jS(()=>c(m)):c(m)},[c,d]);return f.useLayoutEffect(()=>o.listen(u),[o,u]),f.useEffect(()=>CF(n),[n]),f.createElement(EF,{basename:t,children:a,location:l.location,navigationType:l.action,navigator:o,future:n})}const FF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xa=f.forwardRef(function(t,a){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:m}=t,p=PO(t,DF),{basename:g}=f.useContext(Ti),x,h=!1;if(typeof d=="string"&&zF.test(d)&&(x=d,FF))try{let j=new URL(window.location.href),_=d.startsWith("//")?new URL(j.protocol+d):new URL(d),w=sd(_.pathname,g);_.origin===j.origin&&w!=null?d=w+_.search+_.hash:h=!0}catch{}let v=mF(d,{relative:s}),b=WF(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:s,viewTransition:m});function y(j){n&&n(j),j.defaultPrevented||b(j)}return f.createElement("a",Rg({},p,{href:x||v,onClick:h||i?n:y,ref:a,target:c}))}),Bi=f.forwardRef(function(t,a){let{"aria-current":n="page",caseSensitive:s=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:d,children:u}=t,m=PO(t,IF),p=Ny(c,{relative:m.relative}),g=Zr(),x=f.useContext(jO),{navigator:h,basename:v}=f.useContext(Ti),b=x!=null&&UF(p)&&d===!0,y=h.encodeLocation?h.encodeLocation(p).pathname:p.pathname,j=g.pathname,_=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;s||(j=j.toLowerCase(),_=_?_.toLowerCase():null,y=y.toLowerCase()),_&&v&&(_=sd(_,v)||_);const w=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let k=j===y||!o&&j.startsWith(y)&&j.charAt(w)==="/",N=_!=null&&(_===y||!o&&_.startsWith(y)&&_.charAt(y.length)==="/"),P={isActive:k,isPending:N,isTransitioning:b},A=k?n:void 0,M;typeof i=="function"?M=i(P):M=[i,k?"active":null,N?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let R=typeof l=="function"?l(P):l;return f.createElement(xa,Rg({},m,{"aria-current":A,className:M,ref:a,style:R,to:c,viewTransition:d}),typeof u=="function"?u(P):u)});var ow;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ow||(ow={}));var wS;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(wS||(wS={}));function BF(e){let t=f.useContext(_y);return t||Nr(!1),t}function WF(e,t){let{target:a,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Tn(),d=Zr(),u=Ny(e,{relative:o});return f.useCallback(m=>{if(MF(m,a)){m.preventDefault();let p=n!==void 0?n:$g(d)===$g(u);c(e,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,n,s,a,e,i,o,l])}function UF(e,t){t===void 0&&(t={});let a=f.useContext($F);a==null&&Nr(!1);let{basename:n}=BF(ow.useViewTransitionState),s=Ny(e,{relative:t.relative});if(!a.isTransitioning)return!1;let i=sd(a.currentLocation.pathname,n)||a.currentLocation.pathname,o=sd(a.nextLocation.pathname,n)||a.nextLocation.pathname;return sw(s.pathname,o)!=null||sw(s.pathname,i)!=null}let HF={data:""},KF=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||HF},VF=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,GF=/\/\*[^]*?\*\/|  +/g,_S=/\n+/g,eo=(e,t)=>{let a="",n="",s="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?a=i+" "+o+";":n+=i[1]=="f"?eo(o,i):i+"{"+eo(o,i[1]=="k"?"":t)+"}":typeof o=="object"?n+=eo(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=eo.p?eo.p(i,o):i+":"+o+";")}return a+(t&&s?t+"{"+s+"}":s)+n},ti={},CO=e=>{if(typeof e=="object"){let t="";for(let a in e)t+=a+CO(e[a]);return t}return e},YF=(e,t,a,n,s)=>{let i=CO(e),o=ti[i]||(ti[i]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(i));if(!ti[o]){let c=i!==e?e:(d=>{let u,m,p=[{}];for(;u=VF.exec(d.replace(GF,""));)u[4]?p.shift():u[3]?(m=u[3].replace(_S," ").trim(),p.unshift(p[0][m]=p[0][m]||{})):p[0][u[1]]=u[2].replace(_S," ").trim();return p[0]})(e);ti[o]=eo(s?{["@keyframes "+o]:c}:c,a?"":"."+o)}let l=a&&ti.g?ti.g:null;return a&&(ti.g=ti[o]),((c,d,u,m)=>{m?d.data=d.data.replace(m,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(ti[o],t,n,l),o},ZF=(e,t,a)=>e.reduce((n,s,i)=>{let o=t[i];if(o&&o.call){let l=o(a),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":eo(l,""):l===!1?"":l}return n+s+(o??"")},"");function Sy(e){let t=this||{},a=e.call?e(t.p):e;return YF(a.unshift?a.raw?ZF(a,[].slice.call(arguments,1),t.p):a.reduce((n,s)=>Object.assign(n,s&&s.call?s(t.p):s),{}):a,KF(t.target),t.g,t.o,t.k)}let EO,lw,cw;Sy.bind({g:1});let _i=Sy.bind({k:1});function XF(e,t,a,n){eo.p=t,EO=e,lw=a,cw=n}function Oo(e,t){let a=this||{};return function(){let n=arguments;function s(i,o){let l=Object.assign({},i),c=l.className||s.className;a.p=Object.assign({theme:lw&&lw()},l),a.o=/ *go\d+/.test(c),l.className=Sy.apply(a,n)+(c?" "+c:"");let d=e;return e[0]&&(d=l.as||e,delete l.as),cw&&d[0]&&cw(l),EO(d,l)}return s}}var QF=e=>typeof e=="function",qg=(e,t)=>QF(e)?e(t):e,JF=(()=>{let e=0;return()=>(++e).toString()})(),TO=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),e8=20,Z1="default",OO=(e,t)=>{let{toastLimit:a}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,a)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:n}=t;return OO(e,{type:e.toasts.find(o=>o.id===n.id)?1:0,toast:n});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},sg=[],MO={toasts:[],pausedAt:void 0,settings:{toastLimit:e8}},Bs={},DO=(e,t=Z1)=>{Bs[t]=OO(Bs[t]||MO,e),sg.forEach(([a,n])=>{a===t&&n(Bs[t])})},IO=e=>Object.keys(Bs).forEach(t=>DO(e,t)),t8=e=>Object.keys(Bs).find(t=>Bs[t].toasts.some(a=>a.id===e)),Ay=(e=Z1)=>t=>{DO(t,e)},r8={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},a8=(e={},t=Z1)=>{let[a,n]=f.useState(Bs[t]||MO),s=f.useRef(Bs[t]);f.useEffect(()=>(s.current!==Bs[t]&&n(Bs[t]),sg.push([t,n]),()=>{let o=sg.findIndex(([l])=>l===t);o>-1&&sg.splice(o,1)}),[t]);let i=a.toasts.map(o=>{var l,c,d;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((l=e[o.type])==null?void 0:l.removeDelay)||e?.removeDelay,duration:o.duration||((c=e[o.type])==null?void 0:c.duration)||e?.duration||r8[o.type],style:{...e.style,...(d=e[o.type])==null?void 0:d.style,...o.style}}});return{...a,toasts:i}},n8=(e,t="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...a,id:a?.id||JF()}),tf=e=>(t,a)=>{let n=n8(t,e,a);return Ay(n.toasterId||t8(n.id))({type:2,toast:n}),n.id},ra=(e,t)=>tf("blank")(e,t);ra.error=tf("error");ra.success=tf("success");ra.loading=tf("loading");ra.custom=tf("custom");ra.dismiss=(e,t)=>{let a={type:3,toastId:e};t?Ay(t)(a):IO(a)};ra.dismissAll=e=>ra.dismiss(void 0,e);ra.remove=(e,t)=>{let a={type:4,toastId:e};t?Ay(t)(a):IO(a)};ra.removeAll=e=>ra.remove(void 0,e);ra.promise=(e,t,a)=>{let n=ra.loading(t.loading,{...a,...a?.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let i=t.success?qg(t.success,s):void 0;return i?ra.success(i,{id:n,...a,...a?.success}):ra.dismiss(n),s}).catch(s=>{let i=t.error?qg(t.error,s):void 0;i?ra.error(i,{id:n,...a,...a?.error}):ra.dismiss(n)}),e};var s8=1e3,i8=(e,t="default")=>{let{toasts:a,pausedAt:n}=a8(e,t),s=f.useRef(new Map).current,i=f.useCallback((m,p=s8)=>{if(s.has(m))return;let g=setTimeout(()=>{s.delete(m),o({type:4,toastId:m})},p);s.set(m,g)},[]);f.useEffect(()=>{if(n)return;let m=Date.now(),p=a.map(g=>{if(g.duration===1/0)return;let x=(g.duration||0)+g.pauseDuration-(m-g.createdAt);if(x<0){g.visible&&ra.dismiss(g.id);return}return setTimeout(()=>ra.dismiss(g.id,t),x)});return()=>{p.forEach(g=>g&&clearTimeout(g))}},[a,n,t]);let o=f.useCallback(Ay(t),[t]),l=f.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=f.useCallback((m,p)=>{o({type:1,toast:{id:m,height:p}})},[o]),d=f.useCallback(()=>{n&&o({type:6,time:Date.now()})},[n,o]),u=f.useCallback((m,p)=>{let{reverseOrder:g=!1,gutter:x=8,defaultPosition:h}=p||{},v=a.filter(j=>(j.position||h)===(m.position||h)&&j.height),b=v.findIndex(j=>j.id===m.id),y=v.filter((j,_)=>_<b&&j.visible).length;return v.filter(j=>j.visible).slice(...g?[y+1]:[0,y]).reduce((j,_)=>j+(_.height||0)+x,0)},[a]);return f.useEffect(()=>{a.forEach(m=>{if(m.dismissed)i(m.id,m.removeDelay);else{let p=s.get(m.id);p&&(clearTimeout(p),s.delete(m.id))}})},[a,i]),{toasts:a,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:u}}},o8=_i`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,l8=_i`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,c8=_i`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,d8=Oo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${o8} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${l8} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${c8} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,u8=_i`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,m8=Oo("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${u8} 1s linear infinite;
`,p8=_i`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,f8=_i`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,h8=Oo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${p8} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${f8} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,g8=Oo("div")`
  position: absolute;
`,x8=Oo("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,y8=_i`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,v8=Oo("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${y8} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,b8=({toast:e})=>{let{icon:t,type:a,iconTheme:n}=e;return t!==void 0?typeof t=="string"?f.createElement(v8,null,t):t:a==="blank"?null:f.createElement(x8,null,f.createElement(m8,{...n}),a!=="loading"&&f.createElement(g8,null,a==="error"?f.createElement(d8,{...n}):f.createElement(h8,{...n})))},j8=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,w8=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,_8="0%{opacity:0;} 100%{opacity:1;}",k8="0%{opacity:1;} 100%{opacity:0;}",N8=Oo("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,S8=Oo("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,A8=(e,t)=>{let a=e.includes("top")?1:-1,[n,s]=TO()?[_8,k8]:[j8(a),w8(a)];return{animation:t?`${_i(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${_i(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},LO=f.memo(({toast:e,position:t,style:a,children:n})=>{let s=e.height?A8(e.position||t||"top-center",e.visible):{opacity:0},i=f.createElement(b8,{toast:e}),o=f.createElement(S8,{...e.ariaProps},qg(e.message,e));return f.createElement(N8,{className:e.className,style:{...s,...a,...e.style}},typeof n=="function"?n({icon:i,message:o}):f.createElement(f.Fragment,null,i,o))});XF(f.createElement);var P8=({id:e,className:t,style:a,onHeightUpdate:n,children:s})=>{let i=f.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;n(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return f.createElement("div",{ref:i,className:t,style:a},s)},C8=(e,t)=>{let a=e.includes("top"),n=a?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:TO()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(a?1:-1)}px)`,...n,...s}},E8=Sy`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ih=16,T8=({reverseOrder:e,position:t="top-center",toastOptions:a,gutter:n,children:s,toasterId:i,containerStyle:o,containerClassName:l})=>{let{toasts:c,handlers:d}=i8(a,i);return f.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:ih,left:ih,right:ih,bottom:ih,pointerEvents:"none",...o},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(u=>{let m=u.position||t,p=d.calculateOffset(u,{reverseOrder:e,gutter:n,defaultPosition:t}),g=C8(m,p);return f.createElement(P8,{id:u.id,key:u.id,onHeightUpdate:d.updateHeight,className:u.visible?E8:"",style:g},u.type==="custom"?qg(u.message,u):s?s(u):f.createElement(LO,{toast:u,position:m}))}))},K=ra;const O8={common:{appName:"HSE KPI Tracker",companyName:"SGTM",loading:"Chargement...",comingSoon:"Bientt disponible",other:"Autre",showMore:"Afficher plus",more:"de plus",save:"Enregistrer",saved:"Enregistr",cancel:"Annuler",remove:"Retirer",delete:"Supprimer",confirmDelete:"tes-vous sr de vouloir supprimer cet lment ?",edit:"Modifier",create:"Crer",update:"Mettre  jour",new:"Nouveau",add:"Ajouter",search:"Rechercher",filter:"Filtrer",filters:"Filtres",export:"Exporter",exportSuccess:"Export russi",actions:"Actions",status:"Statut",active:"Actif",inactive:"Inactif",deleted:"Supprim",yes:"Oui",no:"Non",all:"Tous",none:"Aucun",select:"Slectionner",custom:"Personnalis",unselect:"Dslectionner",submit:"Soumettre",confirm:"Confirmer",back:"Retour",next:"Suivant",continue:"Continuer",previous:"Prcdent",close:"Fermer",view:"Voir",viewDetails:"Voir les dtails",download:"Tlcharger",downloadTemplate:"Tlcharger le modle",upload:"Tlverser",chooseFile:"Choisir un fichier",import:"Importer",importing:"Importation...",progress:"Progression",processed:"Traits",imported:"Imports",failed:"chous",refresh:"Actualiser",noData:"Aucune donne disponible",total:"Total",error:"Erreur",success:"Succs",warning:"Attention",info:"Information",step:"tape",weekAbbrev:"S",allProjects:"Tous les projets",allPoles:"Tous les ples",pole:"Ple",reset:"Rinitialiser",apply:"Appliquer",clear:"Effacer",update:"Mettre  jour",saving:"Enregistrement...",page:"Page",of:"de",unknown:"Inconnu",fillRequired:"Veuillez remplir tous les champs obligatoires",submittedBy:"Soumis par",selected:"slectionn(s)",project:"Projet",by:"par",history:"Historique",lightMode:"Mode Clair",darkMode:"Mode Sombre",at:"",hourShort:"h",dayShort:"j",downloadTemplateFailed:"chec du tlchargement du modle",importFailed:"chec de l'import",importSummary:"Import termin : {imported} cr(s), {updated} mis  jour",importIssues:"{count} ligne(s) ont des problmes",addedCount:"Ajouts : {added}",exportFailed:"chec de l'export"},heavyMachinery:{title:"Suivi des engins",comingSoon:"Bientt disponible",viewMachines:{nav:"Voir les engins",title:"Voir les engins",searchPlaceholder:"Rechercher par srie, code interne, type, marque...",addMachine:"Ajouter un engin",refresh:"Actualiser",emptyTitle:"Aucun engin",emptyHelp:"Ajoutez un engin ou importez-les via l'insertion en masse.",details:"Dtails de l'engin",tabs:{documents:"Documents",operators:"Oprateurs",inspections:"Inspections",transfer:"Transfert"},machine:{serial:"Numro de srie",internal:"Code interne",type:"Type",brand:"Marque",model:"Modle",project:"Projet",active:"Actif"},form:{createTitle:"Nouveau engin",createSerialTitle:"Nouveau engin",checkSerial:"Vrifier le numro de srie",serialExists:"Un engin avec ce numro de srie existe dj",editTitle:"Modifier l'engin",machineType:"Type d'engin",image:"Image",chooseImage:"Choisir une image",saveFailed:"chec de l'enregistrement de l'engin",created:"Engin cr",updated:"Engin mis  jour"},delete:{confirm:"Supprimer cet engin ?",confirmProfessional:`Veuillez supprimer cet engin uniquement s'il a t ajout par erreur. Si l'engin existe toujours mais n'est plus dans votre projet, mettez-le plutt sur INACTIF.

Voulez-vous le supprimer maintenant ?`,success:"Engin supprim",failed:"chec de suppression"},documents:{add:"Ajouter un document",replace:"Remplacer le document",uploadTitle:"Tlverser: {label}",key:"Type de document",label:"Libell",startDate:"Date de dbut",expiryDate:"Date d'expiration",file:"Fichier PDF",choosePdf:"Choisir un PDF",uploadFailed:"chec du tlversement",uploaded:"Document tlvers"},inspections:{add:"Ajouter une inspection",newVersion:"Nouvelle version",uploadTitle:"Uploader une inspection",parent:"Bas sur",none:"(aucun)",startDate:"Date dbut",endDate:"Date fin",file:"Fichier PDF",choosePdf:"Choisir un PDF",uploaded:"Inspection uploade",uploadFailed:"chec de l'upload",deleteConfirm:"Supprimer cette inspection ?",deleted:"Inspection supprime",deleteFailed:"chec de suppression"},operators:{helpNoProject:"Assignez l'engin  un projet pour grer les oprateurs.",searchPlaceholder:"Rechercher un ouvrier par nom ou CIN",assign:"Assigner",assigned:"Oprateur assign",assignFailed:"chec de l'assignation",remove:"Retirer",removed:"Oprateur retir",removeFailed:"chec de suppression"},transfer:{help:"Le changement de projet dtachera tous les oprateurs de l'engin.",action:"Transfrer",success:"Engin transfr",failed:"chec du transfert"},bulk:{title:"Insertion en masse",help:"Tlchargez le modle Excel, remplissez-le, puis importez-le ici.",downloadTemplate:"Tlcharger le modle",chooseFile:"Veuillez choisir un fichier Excel",import:"Importer",importing:"Importation...",downloadTemplateFailed:"chec du tlchargement du modle",importFailed:"chec de l'import",importSummary:"Import termin : {imported} cr(s), {updated} mis  jour",importIssues:"{count} ligne(s) ont des problmes"}},globalSearch:{nav:"Recherche globale",title:"Recherche globale",searchPlaceholder:"Rechercher par numro de srie ou code interne...",help:"Saisissez un numro de srie ou un code interne exact pour consulter les documents de l'engin.",noResult:"Aucun engin trouv pour ce code."},expiredDocumentation:{nav:"Documents expirs",title:"Documents expirs",help:"Les documents sont regroups par projet. Utilisez les filtres pour distinguer expirs et bientt expirs.",empty:"Aucun lment expir / bientt expir trouv.",projectSubtitle:"Documents des engins et formations des oprateurs.",stats:{expired:"Expirs",expiring:"Bientt expirs"},filters:{project:"Projet",status:"Statut"},status:{all:"Tous",expired:"Expir",expiring:"Bientt expir",unknown:"Inconnu"},sections:{machines:"Documents des engins",operators:"Formations des oprateurs",emptyMachines:"Aucun document d'engin dans cette catgorie.",emptyOperators:"Aucune formation d'oprateur dans cette catgorie."},columns:{machine:"Engin",document:"Document",expiryDate:"Date expiration",status:"Statut",worker:"Ouvrier",training:"Formation"}}},devTools:{title:"Outils Dev",shortLabel:"Dev",description:"Simuler le rle et le primtre de projets",simulatedRole:"Rle simul",none:"(aucun)",projectScope:"Primtre des projets",assignedOnly:"Assigns uniquement"},subcontractors:{title:"Suivi des sous-traitants",subtitle:"Ouverture de chantier  Documents  Validit",opening:"Ouverture",workType:"Type des travaux",workTypePlaceholder:"Ex: Gnie civil, chafaudage, lectricit...",chooseProjectFirst:"Choisir un projet d'abord",addOpening:"Ajouter une ouverture",searchPlaceholder:"Rechercher une entreprise...",companiesCount:"{count} entreprise(s)",noCompanies:"Aucune entreprise",noCompaniesHelp:"Choisis un projet et ajoute une ouverture.",popoverTitle:"Validit des documents",expired:"Expirs",expiring:"Bientt expirs",othersCount:"+{count} autres...",cardMeta:"{project}  Dbut: {start}  Effectif: {workers}",documentsCount:"Documents: {uploaded}/{required}",statusSummary:{green:" jour",yellow:"Bientt expir",red:"Expir / incomplet"},newOpening:"Nouvelle ouverture de chantier",company:"Entreprise",other:"Autre...",newCompany:"Nouvelle entreprise",companyPlaceholder:"Nom de l'entreprise",startDate:"Date de dbut",table:{document:"Document",startDate:"Date dbut",expiryDate:"Date expiration",file:"Fichier"},docStatus:{valid:"valide",expiring:"expire bientt",expired:"expir",no_expiry:"sans date",no_file:"manquant"},openingSummary:"Dbut: {start}  Effectif: {workers}  Documents: {uploaded}/{required}",add:"Ajouter",replace:"Remplacer",uploadTitle:"Uploader: {label}",pdfFile:"Fichier PDF",choosePdf:"Choisir un PDF",compressionHint:"Compression automatique vers < 5MB seulement si le fichier dpasse 5MB.",send:"Envoyer",viewDocument:"Voir le document",pdfOnly:"PDF uniquement",confirmDelete:"tes-vous sr de vouloir supprimer cet lment ?",confirmDeleteOpening:`Supprimer l'ouverture de chantier pour "{name}" ?`,openingDeleted:"Ouverture supprime",openingCreated:"Ouverture cre",uploadFailed:"chec de tlversement",documentSaved:"Document enregistr",documentSavedWithSize:"Document enregistr ({size})",documentSavedCompressed:"Document enregistr (compress: {original}  {compressed})"},datePicker:{days:["Di","Lu","Ma","Me","Je","Ve","Sa"],months:["Jan","Fv","Mar","Avr","Mai","Juin","Juil","Aot","Sep","Oct","Nov","Dc"],monthsFull:["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],today:"Aujourd'hui",select:"Slectionner"},status:{approved:"Approuv",pending:"En attente",submitted:"Soumis",draft:"Brouillon",partial:"Partiel",rejected:"Rejet",missing:"Manquant",notSubmitted:"Non soumis"},auth:{login:"Connexion",logout:"Dconnexion",email:"Adresse email",password:"Mot de passe",confirmPassword:"Confirmer le mot de passe",currentPassword:"Mot de passe actuel",newPassword:"Nouveau mot de passe",rememberMe:"Se souvenir de moi",forgotPassword:"Mot de passe oubli ?",resetPassword:"Rinitialiser le mot de passe",signIn:"Se connecter",signOut:"Se dconnecter",welcomeBack:"Bienvenue",signInToContinue:"Connectez-vous pour continuer",emailRequired:"L'email est requis",passwordRequired:"Le mot de passe est requis",invalidCredentials:"Identifiants incorrects",loginSuccess:"Connexion russie !",redirecting:"Redirection vers votre tableau de bord...",logoutSuccess:"Dconnexion russie",resetLinkSent:"Lien de rinitialisation envoy  votre email",passwordChanged:"Mot de passe modifi avec succs",accountDeactivated:"Votre compte a t dsactiv. Contactez l'administrateur.",demoCredentials:"Identifiants de dmonstration",admin:"Administrateur",user:"Utilisateur",showPassword:"Afficher le mot de passe",hidePassword:"Masquer le mot de passe",tagline:{line1:"Surveiller. Suivre.",line2:"Amliorer la Scurit."},description:"Systme complet de suivi des KPI HSE pour grer les indicateurs de sant, scurit et environnement sur tous vos projets.",publicStats:{hseCompliance:"Conformit HSE",trainingHours:"Heures Formation",fatalAccidents:"Accidents Mortels {year}"},appLogoAlt:"Logo de lapplication",companyLogoAlt:"Logo SGTM",emailPlaceholder:"vous@exemple.com",forgotPasswordPage:{title:"Mot de passe oubli ? ",subtitle:"Pas dinquitude, nous vous enverrons les instructions de rinitialisation.",emailRequired:"Veuillez saisir votre adresse email",sending:"Envoi...",submit:"Rinitialiser le mot de passe",resetLinkSent:"Lien de rinitialisation envoy !",checkEmailTitle:"Vrifiez votre email",checkEmailDescription:"Nous avons envoy un lien de rinitialisation ",backToLogin:"Retour  la connexion",safetyManagement:"Gestion de la scurit"},passwordPolicy:{standard:"Minimum 8 caractres avec une majuscule, une minuscule et un chiffre.",privileged:"Minimum 12 caractres avec une majuscule, une minuscule, un chiffre et un caractre spcial.",invalid:"Le mot de passe ne respecte pas la complexit requise."},passwordStrength:{title:"Force du mot de passe",weak:"Faible",fair:"Moyen",good:"Bon",strong:"Fort"},passwordRequirements:{minLength:"Au moins {{min}} caractres",lowercase:"Une lettre minuscule",uppercase:"Une lettre majuscule",digit:"Un chiffre",special:"Un caractre spcial"},forceChangePassword:{title:"Modifier votre mot de passe",subtitle:"Pour des raisons de scurit, vous devez changer votre mot de passe avant de continuer.",submit:"Mettre  jour le mot de passe"}},nav:{dashboard:"Tableau de bord",administration:"Administration",projects:"Projets",myProjects:"Mes Projets",users:"Utilisateurs",bugReports:"Signalements",library:"Bibliothque",kpiSubmission:"Soumission KPI",kpiHistory:"Historique KPI",reports:"Rapports",settings:"Paramtres",profile:"Profil",notifications:"Notifications",help:"Aide",hseEvents:"Accidents, incidents et visites mdicales",monthlyMeasurements:"Mesures mensuelles",lightingMeasurements:"Mesures d'clairement (Lux)",wasteManagement:"Gestion des dchets"},library:{title:"Bibliothque",subtitle:"Recherchez et tlchargez des documents, procdures et modles.",searchPlaceholder:"Rechercher des fichiers et dossiers (fautes et pluriels pris en charge)...",searchHint:"Astuce : la recherche tolre les fautes et gre les pluriels.",adminUpload:"Tlversement (admin)",selectFiles:"Choisir des fichiers",uploadHint:"Le tlversement est rserv aux admins pour le moment. Formats : PDF, DOCX, XLSX, CSV.",upload:"Tlverser",download:"Tlcharger",noResults:"Aucun rsultat",noResultsHint:"Essayez une autre recherche ou effacez les filtres.",files:"Fichiers",folders:"Dossiers",items:"lments",toggleSort:"Changer le sens du tri",sort:{relevance:"Pertinence",updated:"Mise  jour",name:"Nom"}},filters:{pole:"Ple"},bugReport:{open:"Signaler un bug",modalTitle:"Signaler un bug",recordingActive:"Enregistrement activ",recordingInactive:"Enregistrement dsactiv",recordingCounts:"Console: {{console}} | Rseau: {{network}} | Pages: {{routes}}",recordingDuration:"Dure : {{duration}} | Actions : {{actions}}",startRecording:"Dmarrer",stopRecording:"Arrter",stopToClear:"Arrtez l'enregistrement pour effacer les logs",clearRecording:"Effacer l'enregistrement",tryReplicateHint:"Essayez de reproduire le problme maintenant. Ensuite, ouvrez  nouveau  Signaler un bug  pour arrter l'enregistrement et soumettre.",commentLabel:"Que s'est-il pass ?",commentPlaceholder:"Dcrivez ce que vous faisiez et ce qui n'a pas fonctionn...",severityLabel:"Gravit",impactLabel:"Impact",reproducibilityLabel:"Reproductibilit",extraNotesLabel:"Notes supplmentaires (optionnel)",extraNotesPlaceholder:"tapes pour reproduire, comportement attendu, description des captures...",attachmentLabel:"Pice jointe (optionnel)",attachmentHint:"Max 20MB. Autoriss : xlsx, xls, csv, zip, pdf, png, jpg, jpeg, webp, txt, log",capturedFileLabel:"Fichier captur (automatique)",noCapturedFile:"Aucun fichier captur pour le moment. Tlversez un fichier pendant l'enregistrement pour l'attacher automatiquement.",capturedFileHint:"Le dernier fichier tlvers pendant l'enregistrement sera joint automatiquement.",clearCapturedFile:"Effacer le fichier captur",capturedFileCleared:"Fichier captur effac",recordingRequired:"Veuillez enregistrer le problme avant de soumettre",recordingRequiredHint:"Dmarrez l'enregistrement, reproduisez le problme, puis arrtez l'enregistrement et soumettez.",stopBeforeSubmit:"Veuillez arrter l'enregistrement avant de soumettre",submitting:"Envoi...",submitted:"Bug envoy",commentRequired:"Veuillez dcrire le problme",recordingStarted:"Enregistrement dmarr",recordingStopped:"Enregistrement arrt",recordingCleared:"Enregistrement effac"},bugReports:{title:"Signalements",subtitle:"Bugs signals par les utilisateurs et pices jointes",detailsTitle:"Dtails du signalement",unknownSeverity:"inconnu",hasAttachment:"Pice jointe",impact:"Impact",reproducibility:"Reproductibilit",attachment:"Pice jointe"},dashboard:{title:"Tableau de bord",adminTitle:"Tableau de bord Administrateur",userTitle:"Tableau de bord Utilisateur",welcome:"Bienvenue",overview:"Vue d'ensemble",statistics:"Statistiques",recentActivity:"Activit rcente",quickActions:"Actions rapides",totalProjects:"Total Projets",activeProjects:"Projets Actifs",totalUsers:"Total Utilisateurs",activeUsers:"Utilisateurs Actifs",pendingReports:"Rapports en attente",activeMachines:"Engins actifs",activeMachinesSubtitle:"Dans vos projets accessibles",approvedReports:"Rapports approuvs",avgTf:"TF moyen",avgTg:"TG moyen",monthlyTrends:"Tendances mensuelles",projectPerformance:"Performance des projets",recentSubmissions:"Soumissions rcentes",submissionStatus:"Statut des soumissions",exportData:"Exporter les donnes",exportExcel:"Exporter Excel",exportPdf:"Exporter PDF",exportSuccess:"Rapport export avec succs",exportFailed:"chec de l'export du rapport",loadFailed:"chec du chargement des donnes du tableau de bord",totalReports:"Total Rapports",awaitingApproval:"En attente de validation",activeLabel:"actifs",inYear:"En {{year}}",weekPrefix:"Semaine",weeklyKpiTrends:"Tendances KPI hebdomadaires",detailsForWeek:"Dtails pour {{week}}",viewKpiReports:"Voir les rapports KPI",tfTgRates:"Taux TF & TG",yearOverYearSummary:"Rsum annuel ({{year}} vs {{compareYear}})",reports:"Rapports",viewAllProjects:"Voir tous les projets",noProjectData:"Aucune donne projet disponible.",compareLoadFailed:"chec du chargement des donnes de comparaison",draftsToComplete:"Rapports  complter",draftLabel:"brouillon",draftLabelPlural:"brouillons",weekLabel:"Semaine {{week}} - {{year}}",monthYearLabel:"{{month}} {{year}}",weekShortPrefix:"S",weekDetailsTitle:"Semaine {{week}} - Dtails par projet",currentWeekLabel:"Semaine en cours",themes:{overview:"Vue d'ensemble",safety:"Performance Scurit",training:"Formation & Comptences",compliance:"Conformit & Inspections",ppe:"Consommation EPI",deviations:"Suivi des non-conformits",environmental:"Impact Environnemental",monthly_report:"Rapport mensuel"},monthlyReport:{title:"Rapport mensuel",subtitle:"Agrgation mensuelle par ple (dtails projets au survol).",month:"Mois",filterProject:"Projet",pole:"Ple",project:"Projet",contractor:"Sous-traitant",requiredDocs:"Docs requis",uploadedDocs:"Docs chargs",missingDocs:"Docs manquants",completion:"Compltion",score:"Score",avgHours:"Moyenne (heures)",hours:"Heures",trainingsCount:"Formations",sessionsCount:"Sessions",totalDeviations:"Total carts",closureRate:"% clture",medicalConformity:"Conformit mdicale %",poleAverage:"Moyenne ple",veilleTooltipTitle:"Veille rglementaire",deviationTooltipTitle:"Rpartition des carts",trainingsTooltipTitle:"Rpartition des formations",awarenessTooltipTitle:"Rpartition des sensibilisations",subcontractorHelp:"La compltion documentaire est prsente sous forme de liste lisible (par sous-traitant).",exportZip:"Exporter les graphes (ZIP)",exportSuccess:"Graphes exports",exportFailed:"chec de l'export des graphes",noChartsFound:"Aucun graphe  exporter",noDataToExport:"Aucune donne  exporter",loadFailed:"chec du chargement du rapport mensuel",adminOnly:"Cette page est rserve aux admins.",sections:{veille:"A. Score de veille rglementaire par ple",sor:"B. volution du nombre et du taux de clture des non-conformits par ple",closure_duration:"C. Dlai moyen de clture des non-conformits par ple",trainings:"D. volution du nombre et des heures des formations par ple",awareness:"E. volution du nombre et des heures des sensibilisations par ple",subcontractors:"F. Compltion des documents sous-traitants",medical:"G. Taux de conformit mdicale par ple",sor_subcontractors:"H. volution du nombre et du taux de clture des non-conformits par ple (Sous-traitants)",closure_duration_subcontractors:"I. Dlai moyen de clture des non-conformits par ple (Sous-traitants)",tf_tg:"J. Comparaison TF/TG par ple",accidents_incidents:"K. Accidents vs Incidents par ple",ppe_consumption:"L. Consommation EPI par ple",machinery:"M. Nombre d'engins et taux de conformit documentaire par ple",inspections:"N. Nombre d'inspections par ple"},weekRange:"Plage de semaines",weekStart:"Semaine dbut",weekEnd:"Semaine fin",useWeekRange:"Utiliser plage de semaines",useMonth:"Utiliser mois",tf:"TF (Taux de frquence)",tg:"TG (Taux de gravit)",accidents:"Accidents",incidents:"Incidents",machineCount:"Nombre d'engins",avgCompletion:"Compltion moyenne %",hoursWorked:"Heures travailles",lostDays:"Jours d'arrt",tfTgTooltipTitle:"TF/TG par projet",accidentsIncidentsTooltipTitle:"Accidents/Incidents par projet",ppeTooltipTitle:"Consommation EPI par projet",machineryTooltipTitle:"Engins par projet",inspectionsTooltipTitle:"Inspections par projet"},deviations:{filters:{title:"Filtres",project:"Projet",week:"Semaine"},total:"Total non-conformits",open:"Ouvert",closed:"Cltur",avgCloseDays:"Temps moyen de clture",yearContext:"Anne {{year}}",inProgressAndOpen:"Ouvert + en cours",closedSubtitle:"Action corrective soumise",avgCloseSubtitle:"De l'observation  la clture",trend:"Tendance des non-conformits",byStatus:"Par statut",byCategory:"Top catgories",analytics:{unresolvedPct:"% non clturs",unresolvedSubtitle:"Part non clture",avgResolution:"Temps moyen de rsolution",avgResolutionSubtitle:"Observation  clture",worstTheme:"Thme le plus critique",worstProject:"Projet le plus impact",poleTotals:"Non-conformits par ple (total)",projectPoleStacked:"Non-conformits par Projet  Ple",projectTreemap:"Projets les plus impacts (treemap)",projectPoleHeatmap:"Heatmap Projet  Ple (volumes)",themeAvgResolution:"Temps moyen de rsolution par thme",themeResolutionBox:"Distribution des temps de rsolution par thme",unresolvedByTheme:"Non-conformits non cltures par thme",resolvedVsUnresolved:"Clturs vs non clturs par thme",themeBubble:"Bulles (Temps moyen  Volume)",userThemeHeatmap:"Heatmap Utilisateur  Thme (temps moyen)",poleThemeHeatmap:"Heatmap Ple  Thme (% non clturs)",resolved:"Clturs",unresolved:"Non clturs",hours:"Heures",count:"Nombre",theme:"Thme",user:"Utilisateur",pole:"Ple"},status:{open:"Ouvert",inProgress:"En cours",closed:"Cltur"}},safety:{totalAccidents:"Total Accidents",fatalAccidents:"Accidents Mortels",totalEvents:"Total vnements",severityWeightedIndex:"Indice pondr par gravit",severeShare:"Part des vnements graves (AAT+)",actionsOverdue:"Actions en retard",worstProject:"Projet le plus critique",worstLocation:"Zone la plus critique",projectHotspots:"Points chauds par projet",activityDriver:"Activit principale (Pareto)",conditionsMatrix:"Matrice des conditions",causePath:"Chemin des causes",severityVsVictims:"Gravit vs victimes",actionsHealth:"tat des actions",lighting:"clairage",tfRate:"Taux TF",tgRate:"Taux TG",accidentTrends:"Tendances des Accidents",accidentsBySeverity:"Accidents par Gravit",accidentsByProject:"Accidents par Projet",yearToDate:"Depuis le dbut de l'anne",noFatalities:"Aucun dcs ",critical:"Critique",avgFrequencyRate:"Taux de frquence moyen",avgSeverityRate:"Taux de gravit moyen",tfVsTg:"Taux TF vs TG",noAccidents:"Aucun accident enregistr",greatSafety:"Excellente performance scurit!",fatal:"Mortel",serious:"Grave",minor:"Mineur",eventTypes:{fatal:"Mortel",serious:"Grave",lta:"AAT (LTA)",medical:"Mdical",firstAid:"Premiers secours",nearMiss:"Presqu'accident"},metrics:{count:"Nombre",cumulativePct:"% cumul",severity:"Gravit",victims:"Victimes",events:"vnements"},actionStatus:{overdue:"En retard",open:"Ouvert",inProgress:"En cours",closed:"Cltur"}},training:{totalTrainings:"Total Formations",employeesTrained:"Employs Forms",trainingHours:"Heures de Formation",completionRate:"Taux de Compltion",sections:{awareness:"TBT/TBM",awarenessCharts:"Graphiques TBT/TBM",training:"Formation",trainingCharts:"Graphiques Formation"},trainingTrends:"Tendance des Sessions",trainingByCategory:"Formations par Catgorie",trainingByProject:"Formations par Projet",trainingByTheme:"Formations par Thme",trainingByDuration:"Formations par Dure",trainingByType:"Interne vs Externe",awarenessByTheme:"TBT/TBM par Thme",sessionsCompleted:"Sessions compltes",uniqueAttendees:"Participants uniques",totalHoursDelivered:"Heures totales dispenses",target:"Objectif",cumulativeHours:"Heures de Formation Cumules",hseTraining:"Formation HSE",technical:"Technique",softSkills:"Comptences Douces",compliance:"Conformit",noTrainingData:"Aucune donne de formation",internal:"Interne",external:"Externe",totalAwareness:"Sessions TBT/TBM",awarenessParticipants:"Participants Sensibilisation",awarenessHours:"Heures Sensibilisation",metrics:{sessions:"Sessions",participants:"Participants"}},compliance:{totalInspections:"Total Inspections",openInspections:"Inspections ouvertes",hseCompliance:"Conformit HSE",medicalCompliance:"Aptitude Mdicale",complianceByProject:"Conformit par Projet",inspectionTrends:"Tendance des Inspections",inspectionsByNature:"Inspections par Nature",inspectionNature:{environment:"Environnement",equipment:"quipement",other:"Autre",sst:"SST",third_party:"Tierce partie"},regulatoryWatchTrend:"Tendance Veille Rglementaire (HSE)",medicalAptitudeTrend:"Tendance Aptitude Mdicale",regulatoryWatchScore:"Score veille rglementaire",aptitudePercent:"% aptitude",completedThisYear:"Compltes cette anne",avgScore:"Score moyen",healthChecks:"Contrles mdicaux",criticalFindings:"Critique",majorFindings:"Majeur",minorFindings:"Mineur"},rates:{frequencyRate:"Taux de Frquence (TF)",severityRate:"Taux de Gravit (TG)"},environmental:{hseCompliance:"Conformit HSE",medicalCompliance:"Conformit Mdicale",noiseMonitoring:"Mesure de bruit",waterConsumption:"Consommation d'Eau",electricityUsage:"Consommation lectrique",complianceTrends:"Tendances de Conformit",waterVsElectricity:"Eau vs lectricit",safetyTrends:"Tendances Scurit",complianceProgress:"Progression Conformit",lightingTrends:"Tendances d'clairement (Lux)",noiseTrends:"Tendances de Bruit",lightingSummary:"Rsum clairement",luxAverage:"Lux moyen",luxMeasurements:"Mesures lux",luxComplianceRate:"Taux de conformit lux",luxDataCoverage:"Couverture des donnes lux",yearToDate:"Anne en cours",targetAchieved:"Objectif atteint",toTarget:"pour atteindre l'objectif",trainingHoursYTD:"Heures Formation (Anne)",nearMissesYTD:"Presqu'accidents (Anne)"},inspections:"Inspections",nearMisses:"Presqu'accidents",accidents:"Accidents"},projects:{title:"Projets",projectList:"Liste des projets",projectDetails:"Dtails du projet",newProject:"Nouveau projet",editProject:"Modifier le projet",deleteProject:"Supprimer le projet",groupingLabel:"Groupement / Grouping",groupingHelp:"Marquer ce projet comme un groupement.",projectName:"Nom du projet",projectCode:"Code projet",description:"Description",location:"Localisation",clientName:"Nom du client",startDate:"Date de dbut",endDate:"Date de fin",status:"Statut",active:"Actif",completed:"Termin",suspended:"Suspendu",on_hold:"En attente",cancelled:"Annul",assignedUsers:"Utilisateurs assigns",assignUsers:"Assigner des utilisateurs",kpiTrends:"Tendances KPI",recentReports:"Rapports rcents",noProjects:"Aucun projet trouv",projectCreated:"Projet cr avec succs",projectUpdated:"Projet mis  jour avec succs",projectDeleted:"Projet supprim avec succs",confirmDelete:"tes-vous sr de vouloir supprimer ce projet ?",bulk:{downloadTemplateFailed:"chec du tlchargement du modle",chooseFile:"Veuillez choisir un fichier",importSummary:"Imports : {{imported}} / Mis  jour : {{updated}}",importIssues:"{{count}} ligne(s) ont des problmes",importFailed:"chec de l'import des projets"},assignedForKpi:"Projets assigns pour le rapport KPI",assignedToYou:"Projets qui vous sont assigns",backToProjects:"Retour aux projets",notFound:"Projet introuvable",loadFailed:"chec du chargement des dtails du projet",assignedUsersCount:"{{count}} utilisateurs assigns",clientLabel:"Client :",assignedTeamMembers:"Membres de l'quipe assigns",recentKpiReports:"Rapports KPI rcents",period:"Priode",charts:{kpiTrends:"Tendances KPI",tfTgTrends:"Tendances des taux TF & TG"},metrics:{accidents:"Accidents",trainings:"Formations",inspections:"Inspections",tfRate:"Taux TF",tgRate:"Taux TG"},summary:{accidents:"Accidents",trainings:"Formations",inspections:"Inspections",hoursWorked:"Heures travailles",avgTf:"Moy TF",avgTg:"Moy TG"},team:"quipe",teamMembers:"Membres de l'quipe",manageTeam:"Grer l'quipe",addToTeam:"Ajouter  l'quipe",removeFromTeam:"Retirer de l'quipe",noTeamMembers:"Aucun membre dans l'quipe",selectOfficers:"Slectionner des Animateurs HSE",availableOfficers:"Animateurs HSE disponibles",noAvailableOfficers:"Aucun Animateur HSE disponible",addSelected:"Ajouter la slection",memberAdded:"Membre ajout avec succs",memberRemoved:"Membre retir avec succs",membersAdded:"{{count}} membre(s) ajout(s) avec succs",confirmRemoveMember:"tes-vous sr de vouloir retirer {{name}} de l'quipe ?",addedBy:"Ajout par",addedOn:"Ajout le",zones:"Zones",manageZones:"Grer les zones",addZone:"Ajouter une zone",removeZone:"Supprimer la zone",zoneName:"Nom de la zone",existingZones:"Zones existantes",noZones:"Aucune zone dfinie",zoneAdded:"Zone ajoute",zoneRemoved:"Zone supprime",zoneExists:"Cette zone existe dj",zonesInfo:"Ces zones seront disponibles dans le menu droulant du suivi des carts",done:"Termin"},training:{navLabel:"Formations",pageTitle:"Dclaration de formation",pageSubtitle:"Enregistrez les formations et calculez automatiquement les heures de formation.",project:"Projet",selectProject:"Slectionner un projet",date:"Date",by:"Anime par",external:"Externe",externalPlaceholder:"Nom de l'entreprise externe",theme:"Thme de la formation",searchTheme:"Rechercher un thme de formation...",otherTheme:"Prciser le nom de la formation",duration:"Dure",selectDuration:"Slectionner une dure",durations:{"30min":"30 Min","1h":"1 Heure","1h30":"1 Heure 30 Min","2h":"2 Heures","3h":"3 Heures",halfDay:"Demi-journe","1day":"1 Jour","2days":"2 Jours","3days":"3 Jours"},participants:"Nombre de participants",trainingHours:"Heures de formation",hoursUnit:"heures",submit:"Valider la formation",created:"Formation enregistre avec succs",photo:"Photo",uploadPhoto:"Cliquer pour ajouter une photo",changePhoto:"Changer la photo",addTraining:"Ajouter une formation",clickToExpand:"Cliquer pour ouvrir le formulaire",listTitle:"Formations enregistres",allProjects:"Tous les projets",allWeeks:"Toutes les semaines",weekLabel:"Semaine {{week}}",noTrainings:"Aucune formation trouve pour ces filtres",colDate:"Date",colProject:"Projet",colBy:"Par",colTheme:"Thme",colDuration:"Dure",colParticipants:"Participants",colHours:"Heures",colPhoto:"Photo",viewPhoto:"Voir la photo",downloadPhoto:"Tlcharger la photo",themes:["Formation Montage/Dmontage Echafaudage","Formation utilisation Echafaudage","formation coffrage/dcoffrage","Vrification Echafaudage","Formation Elingage et Manutention","Formation SST","Formation EPI","Outils lectroportatifs","Formation Conduite Dfensive","Formation travail en hauteur","Formation Conduite Grue Mobile","formation Conduite Tractopelle","formation Conduite Tracteure","conduite en scurit des nacelles","formation Soudeur","Formation et habiltation Electriques","Sensibilisation HSE personnel","Formation engins de chantier","Formation conduite en scurit VL","Formation flag-man","formation excavation","Espace confin","Risque dincendie","Ergonomie","Environnement (Housekeeping, Dchets, produits chimiques)","Coactivit","Other"]},awareness:{navLabel:"TBM/TBT",pageTitle:"Sensibilisations (TBM/TBT)",pageSubtitle:"Soumettre et suivre les runions de scurit",addSession:"Ajouter une sensibilisation",clickToExpand:"Cliquer pour ouvrir le formulaire",project:"Projet",selectProject:"Slectionner un projet",date:"Date",by:"Anime par",theme:"Thme",searchTheme:"Rechercher un thme...",other:"Autre",otherTheme:"Prciser le sujet de la session",duration:"Dure",minutes:"minutes",participants:"Nombre de participants",sessionHours:"Heures de sensibilisation",hoursUnit:"heures",submit:"Valider la session",created:"Session enregistre avec succs",listTitle:"Sessions enregistres",allProjects:"Tous les projets",allWeeks:"Toutes les semaines",weekLabel:"Semaine {{week}}",noSessions:"Aucune session trouve pour ces filtres",colDate:"Date",colProject:"Projet",colBy:"Par",colTheme:"Thme",colDuration:"Dure",colParticipants:"Participants",colHours:"Heures",themes:["Travaux en hauteur scuriss avec nacelles et chafaudages conformes","Scurisation des zones de levage et lingage","Circulation des engins et co-activit","Communication entre oprateurs (signalisation, gestes, radios)","Port correct des EPI obligatoires","Risques lectriques et consignation","Manutention manuelle scurise","Chutes d'objets et scurisation des outils en hauteur","Scurit des fouilles et tranches","Risques lis  la pression et aux quipements sous pression","Incendie et manipulation des extincteurs","Produits chimiques et FDS","Travaux  chaud  permis feu et primtre","Blocage et consignation mcanique / hydraulique","Scurit autour des grues mobiles","Travaux en espaces confins  atmosphre, ventilation, urgence","Gestion des dchets et propret de zone","Risque bruit et protection auditive","clairage de chantier insuffisant","Travail de nuit  vigilance et organisation","Ergonomie et postures de travail","Gestion des nergies dangereuses (LOTO complet)","Scurit lors de l'utilisation des machines fixes et portatives","Prvention des glissades et trbuchements","Mto extrme (vent, pluie, chaleur) et adaptation du travail","Scurit autour des armoires lectriques ouvertes","Prvention des coupures / projections (scies, meuleuses, perceuses)","Risque de chocs avec charges suspendues","Scurisation des accs et balisage de zones dangereuses","Risque li  la fatigue et manque de concentration","Prvention des presqu'accidents et retours d'exprience","Plan d'vacuation et premiers secours","Rangement et stockage des matriaux en zone de travail"]},workPermits:{title:"Permis de Travail",pageTitle:"Gestion des Permis de Travail",pageSubtitle:"Grer les permis de travail de vos projets",newPermit:"Nouveau Permis",editPermit:"Modifier le Permis",deletePermit:"Supprimer le Permis",permitNumber:"Numro de Permis",project:"Projet",selectProject:"Slectionner un projet",week:"Semaine",selectWeek:"Slectionner la semaine",year:"Anne",prolongation:"Prolongation (Dimanche)",prolongationHint:"Cocher pour les permis du dimanche",serialNumber:"Numro de Srie",permitTypes:"Types de Permis",types:{cold:"Permis  Froid",workAtHeight:"Permis de Travail en Hauteur",hotWork:"Permis de Travail  Chaud",confinedSpaces:"Permis Espace Confin",electricalIsolation:"Permis d'Isolation lectrique",energizedWork:"Permis de Travail Sous Tension",excavation:"Permis d'Excavation",mechanicalIsolation:"Permis d'Isolation Mcanique",grinder7inch:"Permis Meuleuse 7 Pouces"},description:"Description du Permis",descriptionPlaceholder:"Dcrire les travaux  effectuer...",area:"Zone",areaPlaceholder:"Localisation de la zone de travail",permitUser:"Utilisateur du Permis",permitUserPlaceholder:"Nom de la personne utilisant le permis",signedBy:"Emetteur du permis",signedByPlaceholder:"Nom de l'metteur",authorizer:"Autorisateur",authorizerPlaceholder:"Nom de l'autorisateur",commenceDate:"Date de Dbut",exportExcel:"Exporter Excel",exported:"Permis exports avec succs",exportError:"Erreur lors de l'exportation",endDate:"Date de Fin",enterprise:"Entreprise",enterprisePlaceholder:"Nom de l'entreprise",status:{draft:"Brouillon",active:"Actif",closed:"Cltur",cancelled:"Annul"},copyFromPrevious:"Copier de la Semaine Prcdente",copySelected:"Copier la Slection",reinitializeNumbers:"Rinitialiser les Numros",launchWeek:"Lancer la Semaine",launchConfirm:"tes-vous sr de vouloir lancer tous les permis de cette semaine ? Cela rinitialisera les numros de permis et activera tous les brouillons.",created:"Permis de travail cr avec succs",updated:"Permis de travail mis  jour avec succs",deleted:"Permis de travail supprim avec succs",copied:"{{count}} permis copi(s) avec succs",numbersReinitialized:"Numros de permis rinitialiss",weekLaunched:"Semaine lance : {{count}} permis activ(s)",loadProjectsFailed:"chec du chargement des projets",loadPermitsFailed:"chec du chargement des permis",deleteFailed:"chec de la suppression du permis",copyFailed:"chec de la copie des permis",launchFailed:"chec du lancement de la semaine",confirmDelete:"tes-vous sr de vouloir supprimer ce permis ?",noPermits:"Aucun permis trouv pour cette semaine",previousWeekPermits:"Permis de la Semaine Prcdente",currentWeekPermits:"Permis de la Semaine Actuelle",selectToCopy:"Slectionner les permis  copier vers la semaine actuelle",weekInfo:"Semaine {{week}} ({{start}} - {{end}})",mondayToSaturday:"Lundi  Samedi"},inspections:{title:"Inspections",pageTitle:"Gestion des Inspections",pageSubtitle:"Grer les inspections SST et environnement",project:"Projet",selectProject:"Slectionner un projet",selectProjectFirst:"Veuillez slectionner un projet pour voir les inspections",newInspection:"Nouvelle Inspection",editInspection:"Modifier l'Inspection",listTitle:"Liste des Inspections",noInspections:"Aucune inspection trouve",searchPlaceholder:"Rechercher par inspecteur, lieu, zone...",date:"Date",nature:"Nature d'Inspection",natureOther:"Prciser",natureOtherPlaceholder:"Prciser la nature de l'inspection",type:"Type d'Inspection",location:"Lieu",locationPlaceholder:"Lieu de l'inspection",zone:"Zone",zonePlaceholder:"Zone d'inspection",startDate:"Date de Dbut",endDate:"Date d'Achvement",inspector:"Inspecteur",enterprise:"Entreprise",enterprisePlaceholder:"Nom de l'entreprise",status:"Statut",statusOpen:"Ouvert",statusClosed:"Ferm",notes:"Notes",notesPlaceholder:"Notes additionnelles...",natures:{sst:"Inspection SST",environment:"Inspection Environnement",thirdParty:"Inspection par une Tierce Partie",equipment:"Inspections du Matriel, quipements et Outillages",other:"Autres"},types:{internal:"Interne",external:"Externe"},create:"Crer l'Inspection",created:"Inspection cre avec succs",updated:"Inspection mise  jour avec succs",deleted:"Inspection supprime avec succs",confirmDelete:"tes-vous sr de vouloir supprimer cette inspection ?"},effectif:{title:"Effectif Journalier",subtitleHr:"Saisir leffectif journalier pour vos projets assigns",subtitleAnalytics:"Tendance de leffectif dans le temps (filtres : ple, projet, date)",whySubmitTitle:"Pourquoi saisir leffectif journalier ?",whySubmitBody:"Cela aide  suivre lvolution des effectifs, anticiper les risques et amliorer la planification des projets.",project:"Projet",pole:"Ple",date:"Date",fromDate:"Du",toDate:"Au",effectif:"Effectif",effectifPlaceholder:"Saisir leffectif",projectRequired:"Veuillez slectionner un projet",dateRequired:"Veuillez slectionner une date",effectifInvalid:"Veuillez saisir un effectif valide",saveSuccess:"Enregistr",saveFailed:"chec de lenregistrement",loadFailed:"chec du chargement des donnes",loadProjectsFailed:"chec du chargement des projets"},workers:{title:"Gestion du Personnel",subtitle:"Grer les travailleurs et leurs informations",addWorker:"Ajouter un Travailleur",addOneWorker:"Ajouter un travailleur",massAdd:"Insertion en masse",massDocs:{open:"Documents en masse",title:"Insertion en masse des documents",help:"Choisissez une catgorie, tlchargez le modle Excel, puis importez le fichier Excel et le ZIP des PDF (le nom du PDF doit tre le CIN).",categories:{trainings:"Formations",qualifications:"Qualifications",medical:"Aptitudes mdicales",sanctions:"Mesures disciplinaires"},trainings:{downloadTemplate:"Tlcharger le modle des formations",chooseExcel:"Choisir le fichier Excel",chooseZip:"Choisir le fichier ZIP",import:"Importer les formations",result:"Rsultat: {{imported}} import(s), {{failed}} chec(s)",zipErrorsCount:"Erreurs ZIP: {{count}}",importSuccess:"Import des formations termin: {{imported}} import(s), {{failed}} chec(s)"},qualifications:{downloadTemplate:"Tlcharger le modle des qualifications",chooseExcel:"Choisir le fichier Excel",chooseZip:"Choisir le fichier ZIP",import:"Importer les qualifications",result:"Rsultat: {{imported}} import(s), {{failed}} chec(s)",zipErrorsCount:"Erreurs ZIP: {{count}}",importSuccess:"Import des qualifications termin: {{imported}} import(s), {{failed}} chec(s)"},medical:{downloadTemplate:"Tlcharger le modle des aptitudes mdicales",chooseExcel:"Choisir le fichier Excel",chooseZip:"Choisir le fichier ZIP",import:"Importer les aptitudes mdicales",result:"Rsultat: {{imported}} import(s), {{failed}} chec(s)",zipErrorsCount:"Erreurs ZIP: {{count}}",importSuccess:"Import des aptitudes mdicales termin: {{imported}} import(s), {{failed}} chec(s)"},sanctions:{downloadTemplate:"Tlcharger le modle des mesures disciplinaires",chooseExcel:"Choisir le fichier Excel",chooseZip:"Choisir le fichier ZIP",import:"Importer les mesures disciplinaires",result:"Rsultat: {{imported}} import(s), {{failed}} chec(s)",zipErrorsCount:"Erreurs ZIP: {{count}}",importSuccess:"Import des mesures disciplinaires termin: {{imported}} import(s), {{failed}} chec(s)"}},newWorker:"Nouveau Travailleur",editWorker:"Modifier le Travailleur",noWorkers:"Aucun travailleur trouv",nom:"Nom",prenom:"Prnom",fonction:"Fonction",cin:"CIN",dateNaissance:"Date de Naissance",entreprise:"Entreprise",projet:"Projet",dateEntree:"Date d'Entre",status:"Statut",active:"Actif",inactive:"Inactif",import:"Importer",export:"Exporter",downloadTemplate:"Tlcharger le Modle",bulkDeactivate:"Dsactiver la Slection",bulkActivate:"Activer la Slection",deactivate:"Dsactiver",activate:"Activer",created:"Travailleur cr avec succs",merged:"Travailleur mis  jour (CIN existant)",updated:"Travailleur mis  jour avec succs",deactivated:"Travailleur dsactiv avec succs",activated:"Travailleur activ avec succs",bulkDeactivated:"{{count}} travailleur(s) dsactiv(s)",bulkActivated:"{{count}} travailleur(s) activ(s)",importSuccess:"Import russi: {{imported}} import(s), {{merged}} fusionn(s)",confirmDeactivate:"tes-vous sr de vouloir dsactiver {{name}} ?",confirmBulkDeactivate:"tes-vous sr de vouloir dsactiver {{count}} travailleur(s) ?",allProjects:"Tous les Projets",allEntreprises:"Toutes les Entreprises",allFonctions:"Toutes les Fonctions",allStatus:"Tous les Statuts",filters:{pole:"Ple",project:"Projet",entreprise:"Entreprise",fonction:"Fonction",sanctions:"Mesures disciplinaires",sanctionsAny:"Avec mesures disciplinaires",sanctionsNone:"Sans mesures disciplinaires",training:"Formation",qualification:"Qualification",medical:"Aptitude mdicale",medicalStatus:"Statut mdical",presence:"Prsence",with:"Avec",without:"Sans",expired:"Expir",expiredAny:"Tous",expiredOnly:"Seulement expirs",expiredWithout:"Sans expirs"},totalWorkers:"Total Travailleurs",activeWorkers:"Actifs",inactiveWorkers:"Inactifs",hseTeam:"quipe HSE",stats:{inductionHse:"Induction HSE",workAtHeight:"Travail en hauteur",physicalAptitude:"Aptitude physique",bypassingSafetyControls:"Contournement des dispositifs de scurit",medicalAptitude:"Aptitude mdicale"},statusHelp:"Dsactiv = non visible dans le projet",importTitle:"Importer des Travailleurs",importHelp:"Tlchargez le modle, remplissez-le et importez-le.",selectFile:"Slectionner un fichier",cinInfo:"Le CIN est l'identifiant unique. Les doublons seront fusionns.",selectDate:"Slectionner une date",minAge:"Le travailleur doit avoir au moins 18 ans",fonctionPlaceholder:"Chef de chantier, Ouvrier...",entreprisePlaceholder:"SGTM, Sous-traitant...",details:{title:"Dtails du travailleur",noImage:"Aucune image",image:{add:"Ajouter une image"},sections:{trainings:"Formations",qualifications:"Qualifications",medical:"Aptitude mdicale"},tabs:{trainings:"Formations",qualifications:"Qualifications",medical:"Aptitude mdicale",sanctions:"Mesures disciplinaires"},common:{startDate:"Date de dbut",endDate:"Date de fin",endDateAutoHelp:"La date de fin est dfinie par dfaut  1 an aprs la date de dbut (modifiable).",file:"Fichier (PDF)",choosePdf:"Choisir un PDF",pdfOnly:"Veuillez choisir un fichier PDF"},trainings:{addTitle:"Ajouter une formation",type:"Type de formation",otherLabel:"Prciser",empty:"Aucune formation enregistre pour ce travailleur.",types:{bypassing_safety_controls:"Contournement des dispositifs de scurit",formation_coactivite:"Formation Coactivit",formation_coffrage_decoffrage:"Formation coffrage et dcoffrage",formation_conduite_defensive:"Formation Conduite dfensive",formation_analyse_des_risques:"Formation danalyse des risques",formation_elingage_manutention:"Formation dlingage et manutention",formation_ergonomie:"Formation dergonomie",formation_excavations:"Formation dexcavations",formation_outils_electroportatifs:"Formation des outils lectroportatifs",formation_epi:"Formation EPI",formation_environnement:"Formation environnement",formation_espaces_confines:"Formation espaces confins",formation_flagman:"Formation flagman",formation_jha:"Formation JHA",formation_line_of_fire:"Formation line of fire",formation_manutention_manuelle:"Formation manutention manuelle",formation_manutention_mecanique:"Formation manutention mcanique",formation_point_chaud:"Formation point chaud",formation_produits_chimiques:"Formation produits chimiques",formation_risques_electriques:"Formation risques lectriques",induction_hse:"Induction HSE",travail_en_hauteur:"Travail en hauteur",other:"Autre (prciser)"}},qualifications:{addTitle:"Ajouter une qualification",empty:"Aucune qualification enregistre pour ce travailleur.",type:"Qualification",level:"Niveau",levelPlaceholder:"ex. B0 / H0V / B1V...",otherLabel:"Prciser",types:{elingueur:"lingueur",equipier_premiere_intervention:"quipier premire intervention",habilitation_electrique:"Habilitation lectrique",inspecteur_echafaudage:"Inspecteur chafaudage",monteur_echafaudage:"Monteur chafaudage",monteur_grue_a_tour:"Monteur grue  tour",chauffeur:"Chauffeur",operateur:"Oprateur",operateur_bulldozer:"Oprateur bulldozer",operateur_chargeuse:"Oprateur chargeuse",operateur_chariot_elevateur:"Oprateur chariot lvateur",operateur_compacteur:"Oprateur compacteur",operateur_dumper:"Oprateur dumper",operateur_grue_a_tour:"Oprateur grue  tour",operateur_grue_mobile:"Oprateur grue mobile",operateur_niveleuse:"Oprateur niveleuse",operateur_nacelle:"Oprateur nacelle",operateur_pelle:"Oprateur pelle",sst:"SST",soudeur:"Soudeur",utilisation_meule:"Utilisation meule",other:"Autre (prciser)"}},medical:{addTitle:"Ajouter une aptitude mdicale",empty:"Aucune aptitude mdicale enregistre pour ce travailleur.",status:"Statut",apte:"Apte",inapte:"Inapte",examNature:"Nature de l'examen",ableTo:"Apte ",examNatures:{embauche_reintegration:"Embauche / rintgration",visite_systematique:"Visite systmatique",surveillance_medical_special:"Surveillance mdicale spciale",visite_de_reprise:"Visite de reprise",visite_spontanee:"Visite spontane"},ableToOptions:{travaux_en_hauteur:"Travaux en hauteur",travaux_electrique:"Travaux lectriques",travaux_en_espace_confine:"Travaux en espace confin",operateur:"Oprateur",travaux_point_chaud:"Travaux point chaud"}},sanctions:{addTitle:"Ajouter une sanction",empty:"Aucune sanction enregistre pour ce travailleur.",date:"Date",reason:"Motif",type:"Type",document:"Document (PDF)",miseAPiedDays:"Nombre de jours (mise  pied)",successiveAvertissement:"Avertissement n",types:{mise_a_pied:"Mise  pied",avertissement:"Avertissement",rappel_a_lordre:"Rappel  l'ordre",blame:"Blme"}}}},qualifiedPersonnel:{navLabel:"Personnel qualifi",pageTitle:"Formations du personnel",pageSubtitle:"Grer les formations et certificats par travailleur.",filters:{searchPlaceholder:"Rechercher par nom ou CIN...",trainingPlaceholder:"Toutes les formations",resultsCount:"{count} rsultat(s)"},workerCardTitle:"Personnel",addTrainingTitle:"Ajouter une formation",trainingType:"Type de formation",trainingLabel:"Intitul de la formation",trainingDate:"Date de formation",expiryDate:"Date d'expiration",certificate:"Certificat (PDF)",chooseFile:"Choisir un fichier",saveTraining:"Enregistrer la formation",trainingCreated:"Formation du travailleur enregistre",invalidExpiry:"La date d'expiration ne peut pas tre antrieure  la date de formation",trainingListTitle:"Formations du travailleur",colType:"Type",colStartDate:"Date de dbut",colEndDate:"Date d'expiration",colCertificate:"Certificat",noTrainings:"Aucune formation pour ce travailleur.",noWorkerSelected:"Slectionnez un travailleur pour voir ses formations.",noWorkerSelectedHelp:"Choisissez un projet et recherchez par nom ou CIN, puis slectionnez un travailleur pour consulter et ajouter ses formations.",statusValid:"Valide",statusExpiring:"Expire bientt",statusExpired:"Expire",statusNoExpiry:"Sans date",viewExpiringButton:"Voir les formations expirant bientt / expires",viewAllButton:"Voir toutes les formations",expiringListTitle:"Formations expirant bientt / expires",noExpiring:"Aucune formation expirante ou expire trouve pour vos projets.",viewCertificate:"Voir le certificat",downloadCertificate:"Tlcharger",types:{inductionHse:"Induction HSE",aptitudePhysique:"Aptitude physique",travailHauteur:"Travail en hauteur",elinguage:"linguage",outillageElectrique:"Outillage lectrique",inspecteurEchafaudage:"Inspecteur chafaudage",monteurEchafaudage:"Monteur chafaudage",incendie:"Incendie",secourisme:"Secourisme",reconnaissanceHse:"Reconnaissance HSE",other:"Autre (prciser)"}},users:{title:"Gestion des Utilisateurs",subtitle:"Grer les utilisateurs du systme et leurs permissions",userList:"Liste des utilisateurs",userDetails:"Dtails de l'utilisateur",addUser:"Ajouter un utilisateur",newUser:"Nouvel utilisateur",editUser:"Modifier l'utilisateur",createUser:"Crer un nouvel utilisateur",updateUser:"Mettre  jour",createUserBtn:"Crer l'utilisateur",deleteUser:"Supprimer l'utilisateur",searchPlaceholder:"Rechercher des utilisateurs...",allRoles:"Tous les rles",roles:{admin:"Administrateur",consultation:"Consultation",hse_manager:"Manager HSE",regional_hse_manager:"Manager HSE Rgional",responsable:"Responsable HSE",user:"Animateur HSE",supervisor:"Superviseur HSE",hr:"Responsable administratif",dev:"Dveloppeur",pole_director:"Directeur Ple",works_director:"Directeur Travaux",hse_director:"Directeur HSE",hr_director:"Directeur Capital Humain"},table:{user:"Utilisateur",role:"Rle",projects:"Projets",status:"Statut",actions:"Actions"},status:{active:"Actif",inactive:"Inactif"},form:{fullName:"Nom complet",email:"Adresse email",cin:"CIN",cinPlaceholder:"Numro de carte d'identit nationale",password:"Mot de passe",passwordHint:"laisser vide pour conserver l'actuel",role:"Rle",pole:"Ple",selectPole:"Slectionner un ple",phone:"Tlphone",assignProjects:"Assigner aux projets"},activate:"Activer",deactivate:"Dsactiver",loadError:"chec du chargement des utilisateurs",saveError:"chec de l'enregistrement de l'utilisateur",createSuccess:"Utilisateur cr avec succs",updateSuccess:"Utilisateur mis  jour avec succs",deleteSuccess:"Utilisateur supprim avec succs",deleteError:"chec de la suppression de l'utilisateur",deleteConfirm:"tes-vous sr de vouloir supprimer {{name}} ?",activateSuccess:"Utilisateur activ avec succs",deactivateSuccess:"Utilisateur dsactiv avec succs",statusError:"chec de la mise  jour du statut",noUsers:"Aucun utilisateur trouv",assignedProjects:"Projets assigns",toggleStatus:"Changer le statut",bulk:{downloadTemplateFailed:"chec du tlchargement du modle",chooseFile:"Veuillez choisir un fichier",importSummary:"Imports : {{imported}} / Mis  jour : {{updated}}",importIssues:"{{count}} ligne(s) ont des problmes",importFailed:"chec de l'import des utilisateurs"}},members:{title:"Gestion des Membres",subtitle:"Grer les membres de l'quipe du projet",addMember:"Ajouter un Membre",newMember:"Nouveau Membre",editMember:"Modifier le Membre",noMembers:"Aucun membre trouv",createSuccess:"Membre cr avec succs",createMerged:"Utilisateur existant trouv avec ce CIN et ajout au projet",updateSuccess:"Membre mis  jour avec succs",removeSuccess:"Membre retir du projet avec succs",removeConfirm:"tes-vous sr de vouloir retirer {{name}} de ce projet ?",removeWarning:"L'utilisateur sera dsactiv s'il n'a plus d'affiliation  aucun projet.",cinExists:"Un utilisateur avec ce CIN existe dj",emailExists:"Un utilisateur avec cet email existe dj",selectRole:"Slectionner un rle",cannotRemoveSelf:"Vous ne pouvez pas vous retirer du projet",cinInfo:"Si un utilisateur avec ce CIN existe dj, il sera automatiquement ajout  ce projet."},kpi:{title:"Rapports KPI",monthlyMeasurements:"Mesures mensuelles",monthlyMeasurementsHint:"Mesures environnementales mensuelles uniquement (spares par indicateur)",noiseMonitoring:"Suivi du bruit",waterConsumption:"Consommation deau",electricityConsumption:"Consommation dlectricit",submission:"Soumission KPI",submitKpi:"Soumettre KPI",history:"Historique KPI",newReport:"Nouveau rapport",editReport:"Modifier le rapport",viewReport:"Voir le rapport",deleteReport:"Supprimer le rapport",selectProject:"Slectionner un projet",selectMonth:"Slectionner le mois",selectYear:"Slectionner l'anne",reportDate:"Date du rapport",reportMonth:"Mois du rapport",reportYear:"Anne du rapport",status:{draft:"Brouillon",submitted:"Soumis",approved:"Approuv",rejected:"Rejet"},saveDraft:"Enregistrer le brouillon",submitReport:"Soumettre le rapport",approve:"Approuver",reject:"Rejeter",rejectionReason:"Motif du rejet",accidents:{title:"Accidents",total:"Total accidents",fatal:"Accidents mortels",serious:"Accidents graves",minor:"Accidents mineurs",nearMisses:"Presqu'accidents",firstAidCases:"Cas de premiers soins"},training:{title:"Formations",conducted:"Formations ralises",planned:"Formations planifies",employeesTrained:"Employs forms",trainingHours:"Heures de formation",toolboxTalks:"Causeries scurit"},inspections:{title:"Inspections",completed:"Inspections ralises",planned:"Inspections planifies",findingsOpen:"Constats ouverts",findingsClosed:"Constats ferms",correctiveActions:"Actions correctives"},rates:{title:"Taux et heures",hoursWorked:"Heures travailles",lostWorkdays:"Jours de travail perdus",frequencyRate:"Taux de frquence (TF)",severityRate:"Taux de gravit (TG)"},additional:{title:"Mtriques additionnelles",unsafeActs:"Actes dangereux signals",unsafeConditions:"Conditions dangereuses signales",emergencyDrills:"Exercices d'urgence",ppeCompliance:"Conformit EPI (%)"},notes:"Notes et commentaires",noReports:"Aucun rapport trouv",reportSaved:"Rapport enregistr avec succs",reportSubmitted:"Rapport soumis avec succs",reportResubmitted:"Rapport resoumis avec succs",reportApproved:"Rapport approuv avec succs",reportRejected:"Rapport rejet",reportDeleted:"Rapport supprim avec succs",confirmDelete:"tes-vous sr de vouloir supprimer ce rapport ?",management:{title:"Gestion des Rapports KPI",subtitle:"Approuver ou rejeter les rapports soumis",searchPlaceholder:"Rechercher...",allStatuses:"Tous les statuts",statusSubmitted:"En attente",submittedBy:"Soumis par",period:"Priode",date:"Date",viewDetails:"Voir dtails",rejectTitle:"Rejeter le rapport",rejectReasonRequired:"Veuillez entrer un motif de rejet",rejectWarningBefore:" Le rapport sera remis en",rejectWarningAfter:"pour permettre au soumetteur de corriger et resoumettre.",rejectReasonPlaceholder:"Entrez le motif du rejet...",detailsTitle:"Dtails du rapport",loadDetailsFailed:"chec du chargement des dtails du rapport",previouslyRejected:" Prcdemment rejet",rejectedOn:"Rejet le {date}",sections:{effectifInduction:"1-2. Effectif & Induction",observationsAwareness:"3-4. Observations & Sensibilisation",accidentsIncidents:"5-8. Accidents & Incidents",inspectionsIndicators:"9-11. Inspections & Indicateurs",trainingPermitsDiscipline:"12-14. Formation, Permis & Discipline",complianceMonitoring:"15-17. Conformit & Suivi",energyConsumption:"18-19. Consommation d'nergie"}},steps:{projectInfo:"Informations Projet",weeklyReporting:"Reporting HSE",incidentTracking:"Suivi Incidents"},projectInfo:{title:"Informations du Projet",selectProject:"Slectionner un projet",reportPeriod:"Priode du rapport",weekNumber:"Numro de semaine",startDate:"Date de dbut",endDate:"Date de fin",currentWeek:"Semaine en cours"},autoPopulate:"Remplir automatiquement",autoPopulateTitle:"Remplissage automatique",autoPopulateDesc:"Remplir automatiquement le formulaire avec les donnes des carts, formations, inspections, etc.",autoPopulated:"Donnes remplies",noDataToPopulate:"Aucune donne trouve pour cette priode",selectProjectAndWeek:"Veuillez d'abord slectionner un projet et une semaine",weekly:{title:"Reporting HSE Hebdomadaire",subtitle:"REPORTING HSE",effectif:"Effectif",induction:"Induction",ecarts:"Relev des carts",sensibilisation:"Nombre de Sensibilisation",presquAccident:"Presqu'accident",premiersSoins:"Premiers soins",accident:"Accident",joursArret:"Nombre de jours d'arrt",inspections:"Nombre d'Inspections",tauxGravite:"Taux de Gravit (TG)",tauxFrequence:"Taux de Frquence (TF)",heuresFormation:"Heures de formation",permisTravail:"Permis de travail",mesuresDisciplinaires:"Mesures disciplinaires",conformiteHSE:"Taux de conformit rglementaire HSE",conformiteMedecine:"Conformit mdecine de travail",suiviBruit:"Suivi du bruit",consoEau:"Consommation d'nergie : Eau",consoElectricite:"Consommation d'nergie : lectricit",consommation:"Consommation des ressources",consommationEau:"Consommation d'eau",consommationElectricite:"Consommation d'lectricit"},incidents:{title:"Suivi des Incidents & Accidents",subtitle:"SUIVI DES INCIDENTS & ACCIDENTS",fatality:"Mortel",lostTimeAccident:"Accident avec arrt",nonLostTimeAccident:"Accident sans arrt",firstAidCase:"Premiers soins",nearMiss:"Presqu'accident",propertyDamage:"Dgts Matriel",environmentalImpact:"Impact environnemental",lostWorkDays:"Jours d'arrt",summary:"Rsum",ltaShort:"LTA"},dailyKpi:{title:"Saisie journalire HSE",subtitle:"Donnes journalires  Calcul automatique des KPI hebdo",download:"Tlcharger",import:"Importer",entry:"Saisie",downloadTemplate:"Template Excel SGTM",downloadDesc:"Tlchargez le template, remplissez les donnes quotidiennes, puis importez-le",importFile:"Importer le fichier rempli",importDesc:"Les donnes rempliront automatiquement le tableau",selectFile:"Slectionner",indicator:"Indicateur",total:"Total",autoFill:"Auto-remplir",confirm:"Confirmer",confirmApply:"Confirmer et appliquer",hasData:"Donnes",templateDownloaded:"Template tlcharg - Importez aprs remplissage",dataImported:"Donnes importes - vrifiez puis confirmez",dataSaved:"Donnes sauvegardes et appliques au KPI",systemDataApplied:"Donnes systme appliques",noDataToSave:"Aucune donne  sauvegarder",downloadFailed:"chec du tlchargement",parseFailed:"chec de la lecture du fichier",saveFailed:"chec de la sauvegarde",formulaInfo:"carts, TBM, Formation, Permis: rcuprs du systme",workHoursFormula:"Les heures travailles doivent tre saisies",dailyData:"Donnes Journalires",days:"jours",loadingDaily:"Chargement des donnes journalires..."},effectif:{title:"Effectif Journalier",subtitleHr:"Saisir leffectif journalier pour vos projets assigns",subtitleAnalytics:"Tendance de leffectif dans le temps (filtres : ple, projet, date)",project:"Projet",pole:"Ple",date:"Date",fromDate:"Du",toDate:"Au",effectif:"Effectif",effectifPlaceholder:"Saisir leffectif",projectRequired:"Veuillez slectionner un projet",dateRequired:"Veuillez slectionner une date",effectifInvalid:"Veuillez saisir un effectif valide",saveSuccess:"Enregistr",saveFailed:"chec de lenregistrement",loadFailed:"chec du chargement des donnes",loadProjectsFailed:"chec du chargement des projets"},historyPage:{subtitle:"Consultez et grez vos rapports KPI soumis",loadFailed:"chec du chargement des rapports",onlyDraftDeletable:"Seuls les rapports en brouillon peuvent tre supprims",deleteSuccess:"Rapport supprim avec succs",exportFailed:"chec de lexport des rapports"},submissionPage:{cannotEditReport:"Ce rapport ne peut plus tre modifi",loadReportFailed:"Erreur lors du chargement du rapport",selectWeekRequired:"Veuillez slectionner une semaine"}},profile:{title:"Profil",subtitle:"Grez les paramtres de votre compte et vos prfrences",personalInfo:"Informations personnelles",updateProfile:"Mettre  jour le profil",changePassword:"Changer le mot de passe",profileUpdated:"Profil mis  jour avec succs",passwordMismatch:"Les mots de passe ne correspondent pas",passwordMinLength:"Le mot de passe doit contenir au moins 8 caractres",passwordMinLengthHint:"Le mot de passe doit contenir au moins 8 caractres",currentPasswordWrong:"Le mot de passe actuel est incorrect",emailReadOnly:"L'email ne peut pas tre modifi",preferencesTitle:"Prfrences",language:"Langue",projectListPreference:"Prfrence de liste de projets",projectListByCode:"Par code",projectListByName:"Par nom",theme:"Thme",savePreferences:"Enregistrer les prfrences",preferencesUpdated:"Prfrences mises  jour avec succs",backup:{title:"Sauvegardes",subtitle:"Configurer les sauvegardes automatiques et tlcharger la dernire sauvegarde.",frequency:"Frquence de sauvegarde",lastRun:"Dernire excution",latestFile:"Dernier fichier",downloadLatest:"Tlcharger la dernire sauvegarde"}},notifications:{title:"Notifications",markAllRead:"Tout marquer comme lu",viewAll:"Voir toutes les notifications",deleteRead:"Supprimer les lus",noNotifications:"Aucune notification",newReport:"Nouveau rapport soumis",reportApproved:"Votre rapport a t approuv",reportRejected:"Votre rapport a t rejet",projectAssigned:"Vous avez t assign  un projet",kpiSubmitted:"Nouveau rapport KPI soumis",kpiApproved:"Rapport KPI approuv",kpiRejected:"Rapport KPI rejet",sorSubmitted:"Nouvelle non-conformit signale",sorCorrected:"Action corrective soumise",trainingSubmitted:"Nouvelle formation enregistre",awarenessSubmitted:"Nouvelle sensibilisation enregistre",reminder:"Rappel",system:"Annonce systme",urgent:{sendButton:"Urgent",composerTitle:"Envoyer une notification urgente",targetLabel:"Destinataires",targetAll:"Tous les utilisateurs",targetRole:"Par rle",targetUsers:"Utilisateurs spcifiques",roleLabel:"Rle",usersLabel:"Utilisateurs",usersSearchPlaceholder:"Rechercher par nom ou e-mail...",urgencyLabel:"Urgence",urgencyLow:"Faible",urgencyMedium:"Moyenne",urgencyHigh:"leve",messageLabel:"Message",messagePlaceholder:"Saisissez votre message urgent...",sending:"Envoi...",send:"Envoyer",sentSuccess:"Notification urgente envoye",sentError:"chec de l'envoi de la notification urgente",noRecipients:"Veuillez slectionner au moins un destinataire",requiredMessage:"Veuillez saisir un message",receivedTitle:"Notification urgente",close:"Fermer",closeIn:"Vous pouvez fermer dans {seconds}s"}},errors:{somethingWentWrong:"Une erreur s'est produite",pageNotFound:"Page non trouve",unauthorized:"Non autoris",accessDenied:"Accs refus",sessionExpired:"Session expire",invalidCredentials:"Identifiants invalides",requiredField:"Ce champ est obligatoire",invalidEmail:"Adresse e-mail invalide",passwordTooShort:"Le mot de passe est trop court",passwordsDoNotMatch:"Les mots de passe ne correspondent pas",uploadFailed:"chec du tlversement",downloadFailed:"chec du tlchargement",failedToCreate:"chec de la cration",failedToUpdate:"chec de la mise  jour",failedToDelete:"chec de la suppression"},ppe:{nav:"EPI",title:"Gestion des EPI",subtitle:"Grer le stock des EPI et distribuer des EPI aux travailleurs",note:"La distribution des EPI diminue le stock. Si vous choisissez  Autre , l'article sera ajout automatiquement  la liste.",pendingValidation:{button:"En attente de validation",title:"En attente de validation",pole:"Ple",project:"Projet",articles:"Articles EPI",selected:"Articles slectionns",viewReport:"Voir le rapport",projectRequired:"Veuillez slectionner un projet",itemsRequired:"Veuillez slectionner au moins un article EPI",missingParams:"Paramtres du rapport manquants. Veuillez ouvrir ce rapport depuis la page EPI.",reportTitle:"Rapport EPI - En attente de validation",downloadReport:"Tlcharger le rapport",viewNames:"Noms",projectName:"Nom du projet",projectPole:"Ple du projet",hseManagerName:"Nom du responsable HSE",hseManagerEmail:"Email du responsable HSE",currentWorkers:"Effectif actuel total",table:{article:"Article",currentStock:"Stock actuel",week:"Distribu la dernire semaine",month:"Distribu le dernier mois",names:"Noms"},detailsTitle:"Dtails de distribution - {article}",details:{cin:"CIN",name:"Nom",quantity:"Quantit",date:"Date"}},project:"Projet",projectRequired:"Veuillez slectionner un projet",items:{name:"Article",stock:"Stock",threshold:"Seuil de stock faible",add:"Ajouter un EPI",edit:"Modifier un EPI",confirmDelete:"tes-vous sr de vouloir supprimer  {{name}}  ?"},restock:{button:"Rapprovisionner",title:"Rapprovisionner le stock EPI",item:"EPI",chooseItem:"Veuillez choisir un EPI (ou prciser Autre)",quantity:"Quantit  ajouter",threshold:"Seuil de stock faible",thresholdPlaceholder:"Optionnel",submit:"Rapprovisionner"},issue:{button:"Distribuer des EPI",menuManual:"Distribution manuelle",menuImport:"Importer et distribuer",title:"Distribuer des EPI au travailleur",worker:"Travailleur",workerSearchPlaceholder:"Rechercher un travailleur par nom, CIN...",chooseWorker:"Veuillez slectionner un travailleur",item:"EPI",other:"Autre",otherSpecify:"Prciser",otherPlaceholder:"Saisir le nom de l'EPI",quantity:"Quantit",receivedAt:"Date de rception",chooseItem:"Veuillez choisir un EPI (ou prciser Autre)",submit:"Distribuer",success:"EPI distribu avec succs"},workerTab:{title:"EPI",empty:"Aucun EPI distribu",issueButton:"Distribuer des EPI",lastIssue:"Dernire distribution",lastIssuedTitle:"Dernire distribution par article",columns:{item:"Article",quantity:"Qt",receivedAt:"Date"}},analytics:{title:"Tableau de bord consommation EPI",subtitle:"Consommation par article, ple et projet (base sur les distributions)",chartTitle:"Consommation par Article  Ple (empil par projet)",yAxis:"Qt",noData:"Aucune donne de consommation pour les filtres slectionns.",tooltipHint:"Les valeurs correspondent aux quantits d'EPI distribues.",duration:{year:"Anne",month:"Mois",week:"Semaine"},filters:{items:"Articles EPI",selectAll:"Tout slectionner"}}},regulatoryWatch:{nav:"Rglementation",sstNav:"Rglementation SST",environmentNav:"Rglementation Environnement",title:"Veille rglementaire",subtitle:"Checklist de conformit rglementaire par projet",historySubtitle:"Historique des soumissions (par projet)",detailsTitle:"Dtails de soumission",newSubmission:"Nouvelle soumission",resubmit:"Resoumettre",week:"Semaine",year:"Anne",selectWeek:"Slectionner la semaine",selectYear:"Slectionner une anne",selectProject:"Slectionner un projet",lastSubmission:"Dernire soumission",sectionScore:"Score de section",overallScore:"Score global",avgScore:"Score moyen",historyTitle:"Soumissions",noSubmissions:"Aucune soumission",submittedAt:"Soumis le",viewDetails:"Voir dtails",detailsTitle:"Dtails de la soumission",sectionScores:"Scores par section",newSubmission:"Nouvelle soumission",newTitle:"Nouvelle soumission",resubmit:"Resoumettre",resubmitTitle:"Resoumettre (pr-rempli)",applicable:"Applicable",notApplicable:"Non applicable",conforme:"Conforme",nonConforme:"Non conforme",correctiveAction:"Action de mise en conformit",comment:"Commentaire",saveDraft:"Enregistrer comme brouillon",draftSaved:"Brouillon enregistr",submitSuccess:"Soumission enregistre"},success:{saved:"Enregistr avec succs",deleted:"Supprim avec succs",profileUpdated:"Profil mis  jour avec succs",passwordChanged:"Mot de passe modifi avec succs"},months:{january:"Janvier",february:"Fvrier",march:"Mars",april:"Avril",may:"Mai",june:"Juin",july:"Juillet",august:"Aot",september:"Septembre",october:"Octobre",november:"Novembre",december:"Dcembre"},pagination:{showing:"Affichage de",to:"",of:"sur",results:"rsultats",perPage:"par page",first:"Premire",last:"Dernire"},sor:{title:"Suivi d'carts",subtitle:"Gestion des non-conformits et observations",submitDeviation:"Soumettre un cart",addNew:"Nouvelle Observation",newReport:"Nouvelle Non-Conformit",editReport:"Modifier Non-Conformit",viewReport:"Dtails de l'observation",noReports:"Aucune observation enregistre",fillRequired:"Veuillez remplir tous les champs obligatoires",createSuccess:"Observation cre avec succs",updateSuccess:"Observation mise  jour avec succs",statusUpdated:"Statut mis  jour avec succs",markClosed:"Marquer comme cltur",project:"Nom de projet",selectProject:"Slectionner un projet",company:"Entreprise",date:"Date",time:"Heure",zone:"Zone",zonePlaceholder:"Zone de travail...",supervisor:"Superviseur / Animateur",supervisorPlaceholder:"Nom du superviseur ou animateur HSE",nonConformity:"Non-Conformit",nonConformityPlaceholder:"Dcrivez la non-conformit ou l'observation...",photo:"Photo",uploadPhoto:"Cliquez pour ajouter une photo",changePhoto:"Changer la photo",category:"Catgorie de l'cart",selectCategory:"Slectionner une catgorie",categories:{nettoyage_rangement:"Nettoyage et Rangement",protection_chute:"Protection contre les chutes",echafaudage:"chafaudage/chelles/Escaliers",epi:"quipements de Protection Individuelle",excavations:"Excavations",levage:"Levage",methode_travail:"Mthode de travail - SPA",manutention:"Manutention",vehicule_transport:"Vhicule/Transport",outils_equipements:"Outils/quipements",chute_trebuchement:"Chute & Trbuchement",electricite:"lectricit",protection_incendie:"Protection Incendie",communication_attitude:"Communication/Attitude",acces_passage:"Accs/Passage/Issues de Secours",formation_toolbox:"Formation/Toolbox/Runion",inspection_evaluation:"Inspection et valuation",documentation_hse:"Documentation HSE & valuation",gestion_sous_traitants:"Gestion des sous-traitants",autre:"Autre"},responsiblePerson:"Responsable concern",responsiblePersonPlaceholder:"Nom du responsable",deadline:"Date butoir",correctiveAction:"Action de matrise",correctiveActionPlaceholder:"Dcrivez l'action corrective  mettre en place...",status:{label:"Statut",open:"Ouvert",inProgress:"En cours",closed:"Cltur"},pendingCorrective:"Actions correctives en attente",addCorrective:"Ajouter action",addCorrectiveTitle:"Soumettre l'action corrective",correctivePromptTitle:"Action corrective",correctivePromptMessage:"Voulez-vous soumettre l'action corrective maintenant ou plus tard?",correctiveDate:"Date de l'action",correctiveTime:"Heure de l'action",correctivePhoto:"Photo de l'action corrective",correctiveRequired:"L'action corrective est obligatoire",correctiveSubmitted:"Action corrective soumise avec succs",editCorrective:"Modifier l'action corrective",submitLater:"Soumettre plus tard",submitAndClose:"Soumettre et clturer",createClosedSuccess:"Observation cre et clture",createPinnedSuccess:"Observation cre et pingle pour suivi",problemSummary:"Rsum du problme",closedBy:"Cltur par",submittedBy:"Soumis par",clickToEnlarge:"Cliquer pour agrandir"},lightingMeasurements:{pageTitle:"Mesures d'clairement (Lux)",pageSubtitle:"Lieu + valeur lux + conformit au seuil (optionnel)",recordsTitle:"Enregistrements",noRecords:"Aucun enregistrement",filters:{year:"Anne",yearPlaceholder:"2026",month:"Mois",monthPlaceholder:"1-12"},table:{date:"Date",project:"Projet",location:"Lieu",lux:"Lux",threshold:"Seuil",compliant:"Conforme",actions:"Actions"},modal:{newTitle:"Nouvelle mesure d'clairement",editTitle:"Modifier la mesure d'clairement"},form:{project:"Projet",selectProjectPlaceholder:"Slectionner...",date:"Date",location:"Lieu",luxValue:"Valeur lux",thresholdOptional:"Seuil (optionnel)",notes:"Notes"},confirmArchive:{title:"Archiver l'enregistrement",message:"Ceci va archiver (suppression douce) l'enregistrement. Continuer ?"},toasts:{created:"Enregistrement cr",updated:"Enregistrement mis  jour",archived:"Enregistrement archiv"}},wasteManagement:{title:"Gestion des dchets",subtitle:"Suivi des exportations de dchets par projet",emptyState:"Aucun enregistrement",actions:{add:"Ajouter"},tabs:{all:"Tous"},filters:{dateFrom:"Date du",dateTo:"Date au",plateSearch:"Matriculation",plateSearchPlaceholder:"Rechercher par matriculation",includeArchived:"Inclure les lments archivs"},table:{date:"Date",project:"Projet",wasteType:"Type des dchets",quantity:"Quantit",tripsCount:"Nombre des voyages",transportMethod:"Moyen de transport",plateNumber:"Matriculation",treatment:"Traitement"},modal:{createTitle:"Ajouter un enregistrement",editTitle:"Modifier un enregistrement"},form:{date:"Date",wasteType:"Type des dchets",wasteTypeOther:"Autre (type des dchets)",quantity:"Quantit",tripsCount:"Nombre des voyages",transportMethod:"Moyen de transport",transportMethodOther:"Autre (moyen de transport)",plateNumber:"Matriculation",treatment:"Traitement",treatmentOther:"Autre (traitement)"},wasteTypes:{banales:"Banales",betons:"Btons",liquides_sanitaires:"Liquides sanitaires",melange_banales:"Mlange banales",ferraile:"Ferraile",huiles_usees:"Huiles uses",solides_dangereux:"Solides dangereux",medicaux:"Mdicaux",autre:"Autre"},transportMethods:{benne_satellite:"Benne satellite",camion_hydrocureur:"Camion hydrocureur",camion_plateau:"Camion plateau",camion_8x4:"Camion 8x4",camion_citerne:"Camion citerne",camion_ampliroll:"Camion ampliroll",remorque_a_benne:"Remorque  benne",autre:"Autre"},treatments:{decharge:"Dcharge",incineration:"Incinration",recyclage:"Recyclage",pretraitement_incineration:"Prtraitement + incinration",recyclage_sur_chantier:"Recyclage sur chantier",traitement_physico_chimique:"Traitement physico-chimique",regeneration_huiles_usees:"Rgnration (huiles uses)",valorisation:"Valorisation (ferraile / mlange)",stockage_temporaire:"Stockage temporaire (dangereux / mdicaux)",neutralisation:"Neutralisation (dangereux)",autre:"Autre"},delete:{title:"Supprimer",message:"tes-vous sr de vouloir supprimer cet lment ?"},toasts:{created:"Enregistrement cr",updated:"Enregistrement mis  jour",deleted:"Enregistrement supprim"},pagination:{prev:"Prcdent",next:"Suivant",pageOf:"Page {page} de {last}",total:"Total : {total}"},validation:{projectRequired:"Veuillez slectionner un projet",dateRequired:"Veuillez slectionner une date",wasteTypeRequired:"Veuillez slectionner un type de dchets",wasteTypeOtherRequired:"Veuillez prciser le type de dchets",quantityRequired:"Veuillez saisir une quantit valide",tripsCountRequired:"Veuillez saisir un nombre de voyages valide",transportMethodRequired:"Veuillez slectionner un moyen de transport",transportMethodOtherRequired:"Veuillez prciser le moyen de transport",plateNumberRequired:"Veuillez saisir la matriculation",treatmentRequired:"Veuillez slectionner un traitement",treatmentOtherRequired:"Veuillez prciser le traitement"}},monthlyMeasurements:{pageTitle:"Mesures Mensuelles",pageSubtitle:"Mesures environnementales saisies mensuellement (spares par indicateur)",unit:"Unit",selected:"Slectionn",select:"Slectionner",indicators:{noise_monitoring:"Bruit",water_consumption:"Eau",electricity_consumption:"lectricit"},filters:{year:"Anne",month:"Mois",includeArchived:"Inclure les archivs"},recordsTitle:"Enregistrements : {indicator}",table:{project:"Projet",year:"Anne",month:"Mois",indicator:"Indicateur",value:"Valeur",unit:"Unit",method:"Mthode"},noRecords:"Aucun enregistrement",modal:{newTitle:"Nouvelle mesure mensuelle",editTitle:"Modifier la mesure mensuelle"},fields:{project:"Projet",selectProject:"Slectionner...",year:"Anne",month:"Mois",indicator:"Indicateur",valueWithUnit:"Valeur ({unit})",method:"Mthode"},archive:{title:"Archiver l'enregistrement",message:"Cette action va archiver (suppression logique) l'enregistrement. Continuer ?"}},hseEvents:{pageTitle:"Accidents, incidents et visites mdicales",pageSubtitle:"Enregistrer et suivre les vnements HSE (accidents, incidents, presqu'accidents, premiers soins, accidents de circulation)",recordsTitle:"Enregistrements",noRecords:"Aucun enregistrement",tabs:{accidents:"Accident / Incident",medical:"Visites mdicales"},accidentForm:{sections:{identification:"Identification de l'accident",victimsOverview:"Vue d'ensemble des victimes",victimDetails:"Dtails de la victime",activity:"Activit au moment de l'accident",environment:"Environnement et conditions de travail",ppe:"EPI et protections",immediateCause:"Cause immdiate",rootCause:"Analyse des causes racines",immediateActions:"Actions immdiates ralises",preventiveActions:"Actions prventives et correctives",attachments:"Pices jointes",validationClosure:"Validation et clture",other:"Autres"},fields:{accidentId:"ID accident",accidentCategory:"Catgorie d'accident",siteProject:"Site / Projet",autoGenerated:"Auto-gnr",exactLocation:"Lieu prcis sur le site",date:"Date",time:"Heure",shift:"Poste",dayOfWeek:"Jour de la semaine",numberOfVictims:"Nombre de victimes",derivedSeverity:"Gravit (dduite)",victim:"Victime",fullName:"Nom complet",matricule:"Matricule / ID interne (optionnel)",company:"Entreprise",companySgtm:"SGTM",companySubcontractor:"Sous-traitant",subcontractorName:"Nom du sous-traitant",jobTitle:"Poste / Fonction",ageRange:"Tranche d'ge",experience:"Exprience dans le poste",injuryOutcome:"Consquence / lsion",bodyPart:"Partie du corps touche",injuryType:"Type de blessure",specifyInjuryType:"Prciser le type de blessure",dateOfDeath:"Date du dcs",deathTimingSameDay:"Le jour mme",deathTimingLater:"Plus tard",placeOfDeath:"Lieu du dcs",deathPlaceOnSite:"Sur site",deathPlaceDuringEvacuation:"Pendant l'vacuation",deathPlaceMedicalFacility:"tablissement mdical",datePicker:"Slecteur de date",activity:"Activit",other:"Autre",groundCondition:"tat du sol",lighting:"clairage",weather:"Mto",workArea:"Zone de travail",ppeWorn:"EPI ports",otherPpe:"Autres EPI",collectiveProtections:"Protections collectives",primaryImmediateCause:"Cause immdiate principale",rootCauseCategories:"Catgories de causes racines",methodConformity:"Conformit mthode (requis si gravit  AAT)",addAction:"Ajouter une action",actionType:"Type d'action",actionDescription:"Description de l'action",responsibleRole:"Responsable",remove:"Retirer",noActions:"Aucune action",investigationCompleted:"Enqute termine",accidentClosed:"Accident cltur",closureDate:"Date de clture",closedByRole:"Cltur par (fonction)",description:"Description",lostWorkDays:"Jours d'arrt (si arrt de travail)",lostTimeAutoDerived:"L'arrt de travail est dduit automatiquement des consquences des victimes.",addFiles:"Ajouter des fichiers",existingAttachments:"Pices jointes existantes",filesUploadedAfterSaving:"Les fichiers seront tlverss aprs l'enregistrement.",selectedFiles:"Slectionns : {files}",noAttachments:"Aucune pice jointe",loading:"Chargement..."},options:{accidentCategory:{near_miss:"Presqu'accident",work_accident:"Accident de travail",incident:"Incident",road_accident:"Accident de circulation"},shift:{day:"Jour",night:"Nuit"},ageRange:{lt_25:"<25","25_35":"25-35","36_45":"36-45","46_55":"46-55",gt_55:">55"},experienceRange:{"<6_months":"Moins de 6 mois","6-12_months":"6-12 mois","1-5_years":"1-5 ans",">5_years":"Plus de 5 ans"},outcome:{no_injury:"Pas de blessure",first_aid_only:"Premiers soins uniquement",medical_treatment_no_lost_time:"Soins mdicaux (sans arrt)",lost_time_accident:"Accident avec arrt",serious_hospitalization:"Grave / hospitalisation",fatal:"Mortel"},bodyPart:{head_neck:"Tte / cou",upper_limb:"Membre suprieur",lower_limb:"Membre infrieur",trunk:"Tronc",multiple:"Multiple"},injuryType:{sprain:"Entorse",cut_wound:"Coupure / plaie",contusion:"Contusion",fracture:"Fracture",burn:"Brlure",other:"Autre"},activity:{walking_circulation:"Dplacement / circulation",manual_handling:"Manutention manuelle",mechanical_handling:"Manutention mcanique",machine_tool_use:"Utilisation machine / outil",vehicle_mobile_equipment:"Vhicule / engin mobile",work_at_height:"Travail en hauteur",electrical_work:"Travaux lectriques",other:"Autre"},groundCondition:{dry:"Sec",wet:"Humide",slippery:"Glissant",uneven:"Irrgulier"},lighting:{adequate:"Adquat",insufficient:"Insuffisant",night_work:"Travail de nuit"},weather:{clear:"Clair",rain:"Pluie",wind:"Vent",heat:"Chaleur"},workArea:{pedestrian_zone:"Zone pitonne",shared_with_vehicles:"Partage avec vhicules",restricted_confined:"Restreinte / confine"},ppe:{safety_shoes:"Chaussures de scurit",helmet:"Casque",gloves:"Gants",hi_vis_vest:"Gilet haute visibilit",eye_protection:"Protection oculaire",other:"Autre"},collectiveProtections:{present:"Prsentes",absent:"Absentes",not_applicable:"Non applicable"},immediateCause:{slip_trip_fall:"Glissade / trbuchement / chute",loss_of_balance:"Perte d'quilibre",contact_with_object:"Contact avec objet",unsafe_movement:"Mouvement dangereux",vehicle_interaction:"Interaction avec vhicule",other:"Autre"},rootCause:{human_factor:"Facteur humain",method_procedure:"Mthode / procdure",equipment_tools:"quipement / outillage",environment_conditions:"Environnement / conditions",organization_planning:"Organisation / planification"},methodConformity:{conforming:"Conforme",non_conforming:"Non conforme",not_defined:"Non dfini"},immediateAction:{first_aid_provided:"Premiers soins effectus",evacuation_to_infirmary:"vacuation vers l'infirmerie",external_medical_care:"Prise en charge mdicale externe",area_secured:"Zone scurise",work_stopped:"Arrt du travail",authorities_notified:"Autorits informes",crisis_committee_activated:"Cellule de crise active"},actionType:{technical:"Technique",organizational:"Organisationnelle",training:"Formation",inspection:"Inspection"},actionStatus:{open:"Ouverte",in_progress:"En cours",closed:"Clture"}}},filters:{type:"Type",severity:"Gravit",year:"Anne",month:"Mois",from:"Du",to:"Au",includeArchived:"Inclure les archivs"},placeholders:{year:"2026",month:"1-12",typeOther:"ex. dommage matriel",severityOther:"ex. modre"},table:{date:"Date",project:"Projet",type:"Type",severity:"Gravit",lostTime:"Arrt de travail",lostDays:"Jours perdus",location:"Lieu",description:"Description"},modal:{newTitle:"Nouvel vnement HSE",editTitle:"Modifier l'vnement HSE"},fields:{project:"Projet",selectProject:"Slectionner...",date:"Date",type:"Type",specifyType:"Prciser le type",description:"Description",severity:"Gravit",lostTime:"Arrt de travail",lostDays:"Jours perdus",specifySeverity:"Prciser la gravit",location:"Lieu"},types:{work_accident:"Accident de travail",incident:"Incident",near_miss:"Presqu'accident",first_aid:"Premiers soins",medical_consultation:"Consultation / visite mdicale",road_accident:"Accident de circulation",other:"Autre"},severities:{minor:"Mineure",moderate:"Modre",major:"Majeure",critical:"Critique",fatal:"Mortelle",other:"Autre"},archive:{title:"Archiver l'enregistrement",message:"Cette action va archiver (suppression logique) l'enregistrement. Continuer ?"},validation:{typeRequired:"Le type est obligatoire",specifyType:"Veuillez prciser le type",specifySeverity:"Veuillez prciser la gravit"}},roles:{admin:"Administrateur",consultation:"Consultation",hse_manager:"Manager HSE",regional_hse_manager:"Manager HSE Rgional",responsable:"Responsable HSE",user:"Animateur HSE",supervisor:"Superviseur HSE",hr:"Responsable administratif",dev:"Dveloppeur",pole_director:"Directeur Ple",works_director:"Directeur Travaux",hse_director:"Directeur HSE",hr_director:"Directeur Capital Humain"},hseExport:{title:"Export Hebdomadaire HSE",description:"Exporter le rapport hebdomadaire HSE complet vers Excel",selectProject:"Slectionner un projet",selectWeek:"Slectionner une semaine",selectYear:"Slectionner une anne",week:"Semaine",year:"Anne",exportButton:"Exporter KPI Excel",exporting:"Exportation en cours...",success:"Export gnr avec succs",error:"Erreur lors de l'export",noProject:"Veuillez slectionner un projet",noWeek:"Veuillez slectionner une semaine et une anne",sheets:{projectInfo:"Informations Projet",hseReporting:"Reporting HSE",incidents:"Incidents & Accidents",deviationsSgtm:"carts SGTM",deviationsSt:"carts Sous-traitants",categories:"Catgories d'carts",certifications:"Habilitations",personnel:"Suivi Collaborateurs",training:"Formation & Sensibilisation",inspections:"Inspections",workPermits:"Permis de Travail"}}},M8={common:{appName:"HSE KPI Tracker",companyName:"SGTM",loading:"Loading...",comingSoon:"Coming soon",other:"Other",showMore:"Show more",more:"more",save:"Save",saved:"Saved",cancel:"Cancel",remove:"Remove",delete:"Delete",confirmDelete:"Are you sure you want to delete this item?",edit:"Edit",create:"Create",update:"Update",new:"New",add:"Add",search:"Search",filter:"Filter",filters:"Filters",export:"Export",exportSuccess:"Export successful",actions:"Actions",status:"Status",active:"Active",inactive:"Inactive",deleted:"Deleted",yes:"Yes",no:"No",all:"All",none:"None",select:"Select",custom:"Custom",unselect:"Unselect",submit:"Submit",confirm:"Confirm",back:"Back",next:"Next",continue:"Continue",previous:"Previous",close:"Close",view:"View",viewDetails:"View Details",download:"Download",downloadTemplate:"Download template",upload:"Upload",chooseFile:"Choose file",import:"Import",importing:"Importing...",progress:"Progress",processed:"Processed",imported:"Imported",failed:"Failed",refresh:"Refresh",noData:"No data available",total:"Total",error:"Error",success:"Success",warning:"Warning",info:"Information",step:"Step",weekAbbrev:"W",allProjects:"All projects",allPoles:"All poles",pole:"Pole",reset:"Reset",apply:"Apply",clear:"Clear",update:"Update",saving:"Saving...",page:"Page",of:"of",unknown:"Unknown",fillRequired:"Please fill in all required fields",submittedBy:"Submitted by",selected:"selected",project:"Project",by:"by",history:"History",lightMode:"Light Mode",darkMode:"Dark Mode",at:"at",hourShort:"h",dayShort:"d",downloadTemplateFailed:"Failed to download template",importFailed:"Import failed",importSummary:"Import completed: {imported} created, {updated} updated",importIssues:"Import issues: {count} row(s)",addedCount:"Added: {added}",exportFailed:"Export failed"},heavyMachinery:{title:"Heavy Machinery Tracking",comingSoon:"Coming soon",viewMachines:{nav:"View machines",title:"View machines",searchPlaceholder:"Search by serial, internal code, type, brand...",addMachine:"Add machine",refresh:"Refresh",emptyTitle:"No machines",emptyHelp:"Add a machine or import them using mass insertion.",details:"Machine details",tabs:{documents:"Documents",operators:"Operators",inspections:"Inspections",transfer:"Transfer"},machine:{serial:"Serial number",internal:"Internal code",type:"Type",brand:"Brand",model:"Model",project:"Project",active:"Active"},form:{createTitle:"New machine",createSerialTitle:"New machine",checkSerial:"Check serial number",serialExists:"A machine with this serial number already exists",editTitle:"Edit machine",machineType:"Machine type",image:"Image",chooseImage:"Choose an image",saveFailed:"Failed to save machine",created:"Machine created",updated:"Machine updated"},delete:{confirm:"Delete this machine?",confirmProfessional:`Please delete this machine only if it was added by mistake. If the machine still exists but is no longer in your project, set it to INACTIVE instead.

Do you want to delete it now?`,success:"Machine deleted",failed:"Failed to delete machine"},documents:{add:"Add document",replace:"Replace document",uploadTitle:"Upload: {label}",key:"Document type",label:"Label",startDate:"Start date",expiryDate:"Expiry date",file:"PDF file",choosePdf:"Choose a PDF",uploadFailed:"Upload failed",uploaded:"Document uploaded"},inspections:{add:"Add inspection",newVersion:"New version",uploadTitle:"Upload inspection",parent:"Based on",none:"(none)",startDate:"Start date",endDate:"End date",file:"PDF file",choosePdf:"Choose a PDF",uploaded:"Inspection uploaded",uploadFailed:"Upload failed",deleteConfirm:"Delete this inspection?",deleted:"Inspection deleted",deleteFailed:"Failed to delete inspection"},operators:{helpNoProject:"Assign the machine to a project to manage operators.",searchPlaceholder:"Search a worker by name or CIN",assign:"Assign",assigned:"Operator assigned",assignFailed:"Failed to assign operator",remove:"Remove",removed:"Operator removed",removeFailed:"Failed to remove operator"},transfer:{help:"Changing project will detach all operators from the machine.",action:"Transfer",success:"Machine transferred",failed:"Failed to transfer machine"},bulk:{title:"Mass insertion",help:"Download the Excel template, fill it in, then import it here.",downloadTemplate:"Download template",chooseFile:"Please choose an Excel file",import:"Import",importing:"Importing...",downloadTemplateFailed:"Failed to download template",importFailed:"Import failed",importSummary:"Import completed: {imported} created, {updated} updated",importIssues:"{count} row(s) had issues"}},globalSearch:{nav:"Global search",title:"Global search",searchPlaceholder:"Search by serial number or internal code...",help:"Enter an exact serial number or internal code to retrieve machine documents.",noResult:"No machine found for this code."},expiredDocumentation:{nav:"Expired documentation",title:"Expired documentation",help:"Documents are grouped by project. Use filters to focus on expired vs expiring items.",empty:"No expired/expiring items found.",projectSubtitle:"Machines documents and operators trainings.",stats:{expired:"Expired",expiring:"Expiring soon"},filters:{project:"Project",status:"Status"},status:{all:"All",expired:"Expired",expiring:"Expiring",unknown:"Unknown"},sections:{machines:"Machines documents",operators:"Operators trainings",emptyMachines:"No machine documents in this category.",emptyOperators:"No operator trainings in this category."},columns:{machine:"Machine",document:"Document",expiryDate:"Expiry date",status:"Status",worker:"Worker",training:"Training"}}},devTools:{title:"Dev Tools",shortLabel:"Dev",description:"Simulate role & project scope",simulatedRole:"Simulated role",none:"(none)",projectScope:"Project scope",assignedOnly:"Assigned only"},subcontractors:{title:"Subcontractor tracking",subtitle:"Site opening  Documents  Validity",opening:"Opening",workType:"Type of work",workTypePlaceholder:"e.g. Civil works, scaffolding, electrical...",chooseProjectFirst:"Choose a project first",addOpening:"Add opening",searchPlaceholder:"Search a company...",companiesCount:"{count} companie(s)",noCompanies:"No companies",noCompaniesHelp:"Choose a project and add an opening.",popoverTitle:"Document validity",expired:"Expired",expiring:"Expiring soon",othersCount:"+{count} more...",cardMeta:"{project}  Start: {start}  Workforce: {workers}",documentsCount:"Documents: {uploaded}/{required}",statusSummary:{green:"Up to date",yellow:"Expiring soon",red:"Expired / incomplete"},newOpening:"New site opening",company:"Company",other:"Other...",newCompany:"New company",companyPlaceholder:"Company name",startDate:"Start date",table:{document:"Document",startDate:"Start date",expiryDate:"Expiry date",file:"File"},docStatus:{valid:"valid",expiring:"expiring",expired:"expired",no_expiry:"no date",no_file:"missing"},openingSummary:"Start: {start}  Workforce: {workers}  Documents: {uploaded}/{required}",add:"Add",replace:"Replace",uploadTitle:"Upload: {label}",pdfFile:"PDF file",choosePdf:"Choose a PDF",compressionHint:"Automatic compression to < 5MB only if the file is larger than 5MB.",send:"Send",viewDocument:"View document",pdfOnly:"PDF only",confirmDelete:"Are you sure you want to delete this item?",confirmDeleteOpening:'Delete site opening for "{name}"?',openingDeleted:"Opening deleted",openingCreated:"Opening created",uploadFailed:"Upload failed",documentSaved:"Document saved",documentSavedWithSize:"Document saved ({size})",documentSavedCompressed:"Document saved (compressed: {original}  {compressed})"},datePicker:{days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],today:"Today",select:"Select"},status:{approved:"Approved",pending:"Pending",submitted:"Submitted",draft:"Draft",partial:"Partial",rejected:"Rejected",missing:"Missing",notSubmitted:"Not submitted"},auth:{login:"Login",logout:"Logout",email:"Email Address",password:"Password",confirmPassword:"Confirm Password",currentPassword:"Current Password",newPassword:"New Password",rememberMe:"Remember me",forgotPassword:"Forgot password?",resetPassword:"Reset Password",signIn:"Sign In",signOut:"Sign Out",welcomeBack:"Welcome back",signInToContinue:"Sign in to your account to continue",emailRequired:"Email is required",passwordRequired:"Password is required",invalidCredentials:"Invalid credentials",loginSuccess:"Login successful!",redirecting:"Redirecting to your dashboard...",logoutSuccess:"Logged out successfully",resetLinkSent:"Password reset link sent to your email",passwordChanged:"Password changed successfully",accountDeactivated:"Your account has been deactivated. Please contact administrator.",demoCredentials:"Demo Credentials",admin:"Admin",user:"User",showPassword:"Show password",hidePassword:"Hide password",tagline:{line1:"Monitor. Track.",line2:"Improve Safety."},description:"Comprehensive HSE KPI tracking system for managing health, safety, and environmental metrics across all your projects.",publicStats:{hseCompliance:"HSE Compliance",trainingHours:"Training Hours",fatalAccidents:"Fatal Accidents {year}"},appLogoAlt:"Application logo",companyLogoAlt:"SGTM logo",emailPlaceholder:"you@example.com",forgotPasswordPage:{title:"Forgot password?",subtitle:"No worries, we'll send you reset instructions.",emailRequired:"Please enter your email address",sending:"Sending...",submit:"Reset password",resetLinkSent:"Password reset link sent!",checkEmailTitle:"Check your email",checkEmailDescription:"We've sent a password reset link to",backToLogin:"Back to login",safetyManagement:"Safety Management"},passwordPolicy:{standard:"Minimum 8 characters with uppercase, lowercase and a number.",privileged:"Minimum 12 characters with uppercase, lowercase, a number and a special character.",invalid:"Password does not meet the required complexity."},passwordStrength:{title:"Password strength",weak:"Weak",fair:"Fair",good:"Good",strong:"Strong"},passwordRequirements:{minLength:"At least {{min}} characters",lowercase:"One lowercase letter",uppercase:"One uppercase letter",digit:"One number",special:"One special character"},forceChangePassword:{title:"Change your password",subtitle:"For security reasons, you must change your password before continuing.",submit:"Update password"}},nav:{dashboard:"Dashboard",administration:"Administration",projects:"Projects",myProjects:"My Projects",users:"Users",bugReports:"Bug Reports",library:"Library",kpiSubmission:"KPI Submission",kpiHistory:"KPI History",reports:"Reports",settings:"Settings",profile:"Profile",notifications:"Notifications",help:"Help",hseEvents:"Accidents, Incidents & Medical Visits",monthlyMeasurements:"Monthly Measurements",lightingMeasurements:"Lighting Measurements (Lux)",wasteManagement:"Waste Management"},library:{title:"Library",subtitle:"Search and download reference documents, procedures, and templates.",searchPlaceholder:"Search files and folders (typos and plurals supported)...",searchHint:"Tip: search is typo-tolerant and handles plural forms.",adminUpload:"Admin upload",selectFiles:"Select files",uploadHint:"Upload is admin-only for now. Supported: PDF, DOCX, XLSX, CSV.",upload:"Upload",download:"Download",noResults:"No results",noResultsHint:"Try a different query or clear filters.",files:"Files",folders:"Folders",items:"items",toggleSort:"Toggle sort direction",sort:{relevance:"Relevance",updated:"Updated",name:"Name"}},filters:{pole:"Pole"},bugReport:{open:"Submit bug",modalTitle:"Submit bug report",recordingActive:"Recording is ON",recordingInactive:"Recording is OFF",recordingCounts:"Console: {{console}} | Network: {{network}} | Routes: {{routes}}",recordingDuration:"Duration: {{duration}} | Actions: {{actions}}",startRecording:"Start",stopRecording:"Stop",stopToClear:"Stop recording to clear logs",clearRecording:"Clear recording",tryReplicateHint:"Try to replicate the issue now. When done, open Submit bug again to stop recording and submit.",commentLabel:"What happened?",commentPlaceholder:"Describe what you were trying to do and what went wrong...",severityLabel:"Severity",impactLabel:"Impact",reproducibilityLabel:"Reproducibility",extraNotesLabel:"Extra notes (optional)",extraNotesPlaceholder:"Steps to reproduce, expected behavior, screenshots description...",attachmentLabel:"Attachment (optional)",attachmentHint:"Max 20MB. Allowed: xlsx, xls, csv, zip, pdf, png, jpg, jpeg, webp, txt, log",capturedFileLabel:"Captured upload (automatic)",noCapturedFile:"No file captured yet. Upload a file while recording to attach it automatically.",capturedFileHint:"The latest file you uploaded while recording will be attached automatically.",clearCapturedFile:"Clear captured file",capturedFileCleared:"Captured file cleared",recordingRequired:"Please record the issue before submitting",recordingRequiredHint:"Start recording, reproduce the problem, then stop recording and submit.",stopBeforeSubmit:"Please stop recording before submitting",submitting:"Submitting...",submitted:"Bug report submitted",commentRequired:"Please describe the issue",recordingStarted:"Recording started",recordingStopped:"Recording stopped",recordingCleared:"Recording cleared"},bugReports:{title:"Bug reports",subtitle:"User-submitted bug reports and attachments",detailsTitle:"Bug report details",unknownSeverity:"unknown",hasAttachment:"Attachment",impact:"Impact",reproducibility:"Reproducibility",attachment:"Attachment"},dashboard:{title:"Dashboard",adminTitle:"Admin Dashboard",userTitle:"User Dashboard",welcome:"Welcome",overview:"Overview",statistics:"Statistics",recentActivity:"Recent Activity",quickActions:"Quick Actions",totalProjects:"Total Projects",activeProjects:"Active Projects",totalUsers:"Total Users",activeUsers:"Active Users",pendingReports:"Pending Reports",activeMachines:"Active machines",activeMachinesSubtitle:"In your accessible projects",approvedReports:"Approved Reports",avgTf:"Avg TF",avgTg:"Avg TG",monthlyTrends:"Monthly Trends",projectPerformance:"Project Performance",recentSubmissions:"Recent Submissions",submissionStatus:"Submission Status",exportData:"Export Data",exportExcel:"Export Excel",exportPdf:"Export PDF",exportSuccess:"Report exported successfully",exportFailed:"Failed to export report",loadFailed:"Failed to load dashboard data",totalReports:"Total Reports",awaitingApproval:"Awaiting approval",activeLabel:"active",inYear:"In {{year}}",weekPrefix:"Week",weeklyKpiTrends:"Weekly KPI Trends",detailsForWeek:"Details for {{week}}",viewKpiReports:"View KPI reports",tfTgRates:"TF & TG Rates",yearOverYearSummary:"Year-over-year summary ({{year}} vs {{compareYear}})",reports:"Reports",viewAllProjects:"View all projects",noProjectData:"No project data available.",compareLoadFailed:"Failed to load comparison dashboard data",draftsToComplete:"Reports to complete",draftLabel:"draft",draftLabelPlural:"drafts",weekLabel:"Week {{week}} - {{year}}",monthYearLabel:"{{month}} {{year}}",weekShortPrefix:"W",weekDetailsTitle:"Week {{week}} - Project details",currentWeekLabel:"Current week",themes:{overview:"Executive Overview",safety:"Safety Performance",training:"Training & Competence",compliance:"Compliance & Audits",ppe:"PPE Management",deviations:"Deviations (SOR)",environmental:"Environmental",monthly_report:"Monthly Report"},monthlyReport:{title:"Monthly Report",subtitle:"Monthly aggregation per pole (with project breakdown on hover).",month:"Month",filterProject:"Project",pole:"Pole",project:"Project",contractor:"Contractor",requiredDocs:"Required docs",uploadedDocs:"Uploaded docs",missingDocs:"Missing docs",completion:"Completion",score:"Score",avgHours:"Avg (hours)",hours:"Hours",trainingsCount:"Trainings",sessionsCount:"Sessions",totalDeviations:"Total deviations",closureRate:"Closure %",medicalConformity:"Medical conformity %",poleAverage:"Pole average",veilleTooltipTitle:"Veille rglementaire",deviationTooltipTitle:"Deviations distribution",trainingsTooltipTitle:"Trainings distribution",awarenessTooltipTitle:"Awareness distribution",subcontractorHelp:"Document completion is shown as a readable list (per contractor).",exportZip:"Export graphs (ZIP)",exportSuccess:"Graphs exported",exportFailed:"Failed to export graphs",noChartsFound:"No charts found to export",noDataToExport:"No data to export",loadFailed:"Failed to load monthly report",adminOnly:"This page is available to admins only.",sections:{veille:"A. Regulatory watch score by pole",sor:"B. Evolution of non-conformities count and closure rate by pole",closure_duration:"C. Average non-conformities closure time by pole",trainings:"D. Evolution of trainings count and hours by pole",awareness:"E. Evolution of awareness sessions count and hours by pole",subcontractors:"F. Subcontractor documents completion",medical:"G. Medical conformity rate by pole",sor_subcontractors:"H. Evolution of non-conformities count and closure rate by pole (Subcontractors)",closure_duration_subcontractors:"I. Average non-conformities closure time by pole (Subcontractors)",tf_tg:"J. TF/TG comparison by pole",accidents_incidents:"K. Accidents vs Incidents by pole",ppe_consumption:"L. PPE consumption by pole",machinery:"M. Heavy machinery count and document completion by pole",inspections:"N. Inspections count by pole"},weekRange:"Week range",weekStart:"Start week",weekEnd:"End week",useWeekRange:"Use week range",useMonth:"Use month",tf:"TF (Frequency rate)",tg:"TG (Severity rate)",accidents:"Accidents",incidents:"Incidents",machineCount:"Machine count",avgCompletion:"Avg completion %",hoursWorked:"Hours worked",lostDays:"Lost days",tfTgTooltipTitle:"TF/TG by project",accidentsIncidentsTooltipTitle:"Accidents/Incidents by project",ppeTooltipTitle:"PPE consumption by project",machineryTooltipTitle:"Machinery by project",inspectionsTooltipTitle:"Inspections by project"},deviations:{filters:{title:"Filters",project:"Project",week:"Week"},total:"Total deviations",open:"Open",closed:"Closed",avgCloseDays:"Avg close time",yearContext:"Year {{year}}",inProgressAndOpen:"Open + in progress",closedSubtitle:"Corrective action submitted",avgCloseSubtitle:"From observation to closure",trend:"Deviations trend",byStatus:"By status",byCategory:"Top categories",analytics:{unresolvedPct:"Unresolved %",unresolvedSubtitle:"Share not closed",avgResolution:"Avg resolution time",avgResolutionSubtitle:"Observation  closure",worstTheme:"Worst theme",worstProject:"Worst project",poleTotals:"Deviations by pole (total)",projectPoleStacked:"Deviations by Project  Pole",projectTreemap:"Most impacted projects (treemap)",projectPoleHeatmap:"Project  Pole heatmap (counts)",themeAvgResolution:"Avg resolution time by theme",themeResolutionBox:"Resolution time distribution by theme",unresolvedByTheme:"Unresolved deviations by theme",resolvedVsUnresolved:"Resolved vs unresolved by theme",themeBubble:"Theme bubble (Avg resolution  Count)",userThemeHeatmap:"User  Theme heatmap (avg resolution)",poleThemeHeatmap:"Pole  Theme heatmap (unresolved %)",resolved:"Resolved",unresolved:"Unresolved",hours:"Hours",count:"Count",theme:"Theme",user:"User",pole:"Pole"},status:{open:"Open",inProgress:"In progress",closed:"Closed"}},safety:{totalAccidents:"Total Accidents",fatalAccidents:"Fatal Accidents",totalEvents:"Total events",severityWeightedIndex:"Severity-weighted index",severeShare:"Severe share (LTA+)",actionsOverdue:"Actions overdue",worstProject:"Worst project",worstLocation:"Worst location",projectHotspots:"Project hotspots",activityDriver:"Activity driver",conditionsMatrix:"Conditions matrix",causePath:"Cause path",severityVsVictims:"Severity vs victims",actionsHealth:"Actions health",lighting:"Lighting",tfRate:"TF Rate",tgRate:"TG Rate",accidentTrends:"Accident Trends",accidentsBySeverity:"Accidents by Severity",accidentsByProject:"Accidents by Project",yearToDate:"Year to date",noFatalities:"No fatalities ",critical:"Critical",avgFrequencyRate:"Average frequency rate",avgSeverityRate:"Average severity rate",tfVsTg:"TF vs TG Rates",noAccidents:"No accidents recorded",greatSafety:"Great safety performance!",fatal:"Fatal",serious:"Serious",minor:"Minor",eventTypes:{fatal:"Fatal",serious:"Serious",lta:"LTA",medical:"Medical",firstAid:"First aid",nearMiss:"Near miss"},metrics:{count:"Count",cumulativePct:"Cumulative %",severity:"Severity",victims:"Victims",events:"Events"},actionStatus:{overdue:"Overdue",open:"Open",inProgress:"In progress",closed:"Closed"}},training:{totalTrainings:"Total Trainings",employeesTrained:"Employees Trained",trainingHours:"Training Hours",completionRate:"Completion Rate",sections:{awareness:"TBT/TBM",awarenessCharts:"TBT/TBM Charts",training:"Training",trainingCharts:"Training Charts"},trainingTrends:"Training Sessions Trend",trainingByCategory:"Training by Category",trainingByProject:"Training by Project",trainingByTheme:"Training by Theme",trainingByDuration:"Training by Duration",trainingByType:"Internal vs External",awarenessByTheme:"TBT/TBM by Theme",sessionsCompleted:"Sessions completed",uniqueAttendees:"Unique attendees",totalHoursDelivered:"Total hours delivered",target:"Target",cumulativeHours:"Cumulative Training Hours",hseTraining:"HSE Training",technical:"Technical",softSkills:"Soft Skills",compliance:"Compliance",noTrainingData:"No training data",internal:"Internal",external:"External",totalAwareness:"TBT/TBM Sessions",awarenessParticipants:"Awareness Participants",awarenessHours:"Awareness Hours",metrics:{sessions:"Sessions",participants:"Participants"}},compliance:{totalInspections:"Total Inspections",openInspections:"Open Inspections",hseCompliance:"HSE Compliance",medicalCompliance:"Medical Aptitude",complianceByProject:"Compliance by Project",inspectionTrends:"Inspections Trend",inspectionsByNature:"Inspections by Nature",inspectionNature:{environment:"Environment",equipment:"Equipment",other:"Other",sst:"HSE",third_party:"Third party"},regulatoryWatchTrend:"Regulatory Watch (HSE) Trend",medicalAptitudeTrend:"Medical Aptitude Trend",regulatoryWatchScore:"Regulatory Watch score",aptitudePercent:"Aptitude %",completedThisYear:"Completed this year",avgScore:"Average score",healthChecks:"Health checks",criticalFindings:"Critical",majorFindings:"Major",minorFindings:"Minor"},rates:{frequencyRate:"Frequency Rate (TF)",severityRate:"Severity Rate (TG)"},environmental:{hseCompliance:"HSE Compliance",medicalCompliance:"Medical Compliance",noiseMonitoring:"Noise measurement",waterConsumption:"Water Consumption",electricityUsage:"Electricity Usage",complianceTrends:"Compliance Trends",waterVsElectricity:"Water vs Electricity",safetyTrends:"Safety Trends",complianceProgress:"Compliance Progress",lightingTrends:"Lighting (Lux) Trends",noiseTrends:"Noise Trends",lightingSummary:"Lighting Summary",luxAverage:"Average Lux",luxMeasurements:"Lux measurements",luxComplianceRate:"Lux compliance rate",luxDataCoverage:"Lux data coverage",yearToDate:"Year to date",targetAchieved:"Target achieved",toTarget:"to target",trainingHoursYTD:"Training Hours (YTD)",nearMissesYTD:"Near Misses (YTD)"},inspections:"Inspections",nearMisses:"Near Misses",accidents:"Accidents"},projects:{title:"Projects",projectList:"Project List",projectDetails:"Project Details",newProject:"New Project",editProject:"Edit Project",deleteProject:"Delete Project",groupingLabel:"Groupement / Grouping",groupingHelp:"Mark this project as a grouping (groupement).",projectName:"Project Name",projectCode:"Project Code",description:"Description",location:"Location",clientName:"Client Name",startDate:"Start Date",endDate:"End Date",status:"Status",active:"Active",completed:"Completed",suspended:"Suspended",on_hold:"On hold",cancelled:"Cancelled",assignedUsers:"Assigned Users",assignUsers:"Assign Users",kpiTrends:"KPI Trends",recentReports:"Recent Reports",noProjects:"No projects found",projectCreated:"Project created successfully",projectUpdated:"Project updated successfully",projectDeleted:"Project deleted successfully",confirmDelete:"Are you sure you want to delete this project?",bulk:{downloadTemplateFailed:"Failed to download template",chooseFile:"Please choose a file",importSummary:"Imported: {{imported}} / Updated: {{updated}}",importIssues:"{{count}} row(s) had issues",importFailed:"Failed to import projects"},assignedForKpi:"Projects assigned to you for KPI reporting",assignedToYou:"Projects assigned to you",backToProjects:"Back to Projects",notFound:"Project not found",loadFailed:"Failed to load project details",assignedUsersCount:"{{count}} assigned users",clientLabel:"Client:",assignedTeamMembers:"Assigned Team Members",recentKpiReports:"Recent KPI Reports",period:"Period",charts:{kpiTrends:"KPI Trends",tfTgTrends:"TF & TG Rate Trends"},metrics:{accidents:"Accidents",trainings:"Trainings",inspections:"Inspections",tfRate:"TF Rate",tgRate:"TG Rate"},summary:{accidents:"Accidents",trainings:"Trainings",inspections:"Inspections",hoursWorked:"Hours Worked",avgTf:"Avg TF",avgTg:"Avg TG"},team:"Team",teamMembers:"Team Members",manageTeam:"Manage Team",addToTeam:"Add to Team",removeFromTeam:"Remove from Team",noTeamMembers:"No team members yet",selectOfficers:"Select HSE Officers",availableOfficers:"Available HSE Officers",noAvailableOfficers:"No available HSE Officers",addSelected:"Add Selected",memberAdded:"Team member added successfully",memberRemoved:"Team member removed successfully",membersAdded:"{{count}} team member(s) added successfully",confirmRemoveMember:"Are you sure you want to remove {{name}} from the team?",addedBy:"Added by",addedOn:"Added on",zones:"Zones",manageZones:"Manage Zones",addZone:"Add a zone",removeZone:"Remove zone",zoneName:"Zone name",existingZones:"Existing zones",noZones:"No zones defined",zoneAdded:"Zone added",zoneRemoved:"Zone removed",zoneExists:"This zone already exists",zonesInfo:"These zones will be available in the deviation tracking dropdown",done:"Done"},training:{navLabel:"Training",pageTitle:"Training Submission",pageSubtitle:"Log training sessions and automatically compute training hours.",project:"Project",selectProject:"Select a project",date:"Date",by:"By",external:"External",externalPlaceholder:"External company name",theme:"Training theme",searchTheme:"Search training theme...",otherTheme:"Specify training name",duration:"Duration",selectDuration:"Select duration",durations:{"30min":"30 Min","1h":"1 Hour","1h30":"1 Hour 30 Min","2h":"2 Hours","3h":"3 Hours",halfDay:"Half a day","1day":"1 Day","2days":"2 Days","3days":"3 Days"},participants:"Number of participants",trainingHours:"Training hours",hoursUnit:"hours",submit:"Submit training",created:"Training saved successfully",photo:"Photo",uploadPhoto:"Click to add a photo",changePhoto:"Change photo",addTraining:"Add Training",clickToExpand:"Click to expand form",listTitle:"Recorded trainings",allProjects:"All projects",allWeeks:"All weeks",weekLabel:"Week {{week}}",noTrainings:"No trainings found for these filters",colDate:"Date",colProject:"Project",colBy:"By",colTheme:"Theme",colDuration:"Duration",colParticipants:"Participants",colHours:"Hours",colPhoto:"Photo",viewPhoto:"View photo",downloadPhoto:"Download photo",themes:["Scaffolding Assembly/Disassembly Training","Scaffolding Use Training","Formwork/Removal Training","Scaffolding Inspection","Slinging & Material Handling Training","First Aid (SST) Training","Personal Protective Equipment (PPE) Training","Power Tools Safety","Defensive Driving Training","Working at Height Training","Mobile Crane Operation Training","Backhoe Loader Operation Training","Tractor Operation Training","Safe Operation of Aerial Work Platforms (MEWP)","Welding Training","Electrical Training & Authorization","HSE Awareness for Personnel","Construction Machinery Operation Training","Light Vehicle Safe Driving Training","Flagman/Spotter Training","Excavation Safety Training","Confined Space","Fire Risk","Ergonomics","Environment (Housekeeping, Waste, Chemicals)","Co-activity / Simultaneous Operations","Other"]},awareness:{navLabel:"TBM/TBT",pageTitle:"Awareness Sessions (TBM/TBT)",pageSubtitle:"Submit and track toolbox meetings and safety talks",addSession:"Add Awareness Session",clickToExpand:"Click to expand form",project:"Project",selectProject:"Select a project",date:"Date",by:"By",theme:"Theme",searchTheme:"Search theme...",other:"Other",otherTheme:"Specify session topic",duration:"Duration",minutes:"minutes",participants:"Number of participants",sessionHours:"Session hours",hoursUnit:"hours",submit:"Submit session",created:"Session saved successfully",listTitle:"Recorded sessions",allProjects:"All projects",allWeeks:"All weeks",weekLabel:"Week {{week}}",noSessions:"No sessions found for these filters",colDate:"Date",colProject:"Project",colBy:"By",colTheme:"Theme",colDuration:"Duration",colParticipants:"Participants",colHours:"Hours",themes:["Safe work at height using certified MEWPs and scaffolding","Securing lifting zones and rigging operations","Traffic management for heavy equipment and co-activity","Communication between operators (signals, hand signs, radios)","Correct use of mandatory PPE","Electrical risks and lockout/tagout","Safe manual handling","Dropped objects prevention and tool securing at height","Excavation and trench safety","Pressure hazards and pressurized equipment safety","Fire safety and extinguisher handling","Chemical safety and SDS awareness","Hot work  fire permit and controlled perimeter","Mechanical / hydraulic energy isolation","Mobile crane safety","Confined space work  atmosphere testing, ventilation, rescue plan","Waste management and housekeeping","Noise hazards and hearing protection","Insufficient lighting on site","Night work  vigilance and organization","Ergonomics and safe body positioning","Hazardous energy control (full LOTO)","Safe use of fixed and portable power tools","Slips, trips, and falls prevention","Extreme weather (wind, rain, heat) and work adaptation","Safety near open electrical panels","Cutting/grinding/drilling risk prevention","Hazard of impact with suspended loads","Securing access points and zone barricading","Fatigue risk and lack of focus","Near-miss prevention and lessons learned","Emergency evacuation and first aid readiness","Proper material storage and workplace organization"]},workPermits:{title:"Work Permits",pageTitle:"Work Permits Management",pageSubtitle:"Manage work permits for your projects",newPermit:"New Permit",editPermit:"Edit Permit",deletePermit:"Delete Permit",permitNumber:"Permit Number",project:"Project",selectProject:"Select a project",week:"Week",selectWeek:"Select week",year:"Year",prolongation:"Prolongation (Sunday)",prolongationHint:"Check for Sunday permits",serialNumber:"Serial Number",permitTypes:"Permit Types",types:{cold:"Cold Permit",workAtHeight:"Work at Height Permit",hotWork:"Hot Work Permit",confinedSpaces:"Confined Spaces Permit",electricalIsolation:"Electrical Isolation Permit",energizedWork:"Energized Work Permit",excavation:"Excavation Permit",mechanicalIsolation:"Mechanical Isolation Permit",grinder7inch:"7 Inch Grinder Permit"},description:"Permit Description",descriptionPlaceholder:"Describe the work to be performed...",area:"Area",areaPlaceholder:"Work area location",permitUser:"Permit User",permitUserPlaceholder:"Name of permit user",signedBy:"Permit Issuer",signedByPlaceholder:"Name of issuer",authorizer:"Authorizer",authorizerPlaceholder:"Name of authorizer",commenceDate:"Start Date",exportExcel:"Export Excel",exported:"Permits exported successfully",exportError:"Error exporting permits",endDate:"End Date",enterprise:"Enterprise",enterprisePlaceholder:"Enterprise name",status:{draft:"Draft",active:"Active",closed:"Closed",cancelled:"Cancelled"},copyFromPrevious:"Copy from Previous Week",copySelected:"Copy Selected",reinitializeNumbers:"Reinitialize Numbers",launchWeek:"Launch Week",launchConfirm:"Are you sure you want to launch all permits for this week? This will reinitialize permit numbers and activate all draft permits.",created:"Work permit created successfully",updated:"Work permit updated successfully",deleted:"Work permit deleted successfully",copied:"{{count}} permit(s) copied successfully",numbersReinitialized:"Permit numbers reinitialized",weekLaunched:"Week launched: {{count}} permit(s) activated",loadProjectsFailed:"Failed to load projects",loadPermitsFailed:"Failed to load permits",deleteFailed:"Failed to delete permit",copyFailed:"Failed to copy permits",launchFailed:"Failed to launch week",confirmDelete:"Are you sure you want to delete this permit?",noPermits:"No permits found for this week",previousWeekPermits:"Previous Week Permits",currentWeekPermits:"Current Week Permits",selectToCopy:"Select permits to copy to current week",weekInfo:"Week {{week}} ({{start}} - {{end}})",mondayToSaturday:"Monday to Saturday"},inspections:{title:"Inspections",pageTitle:"Inspection Management",pageSubtitle:"Manage HSE and environment inspections",project:"Project",selectProject:"Select a project",selectProjectFirst:"Please select a project to view inspections",newInspection:"New Inspection",editInspection:"Edit Inspection",listTitle:"Inspection List",noInspections:"No inspections found",searchPlaceholder:"Search by inspector, location, zone...",date:"Date",nature:"Inspection Nature",natureOther:"Specify",natureOtherPlaceholder:"Specify the inspection nature",type:"Inspection Type",location:"Location",locationPlaceholder:"Inspection location",zone:"Zone",zonePlaceholder:"Inspection zone",startDate:"Start Date",endDate:"Completion Date",inspector:"Inspector",enterprise:"Enterprise",enterprisePlaceholder:"Enterprise name",status:"Status",statusOpen:"Open",statusClosed:"Closed",notes:"Notes",notesPlaceholder:"Additional notes...",natures:{sst:"HSE Inspection",environment:"Environment Inspection",thirdParty:"Third Party Inspection",equipment:"Equipment and Tools Inspection",other:"Other"},types:{internal:"Internal",external:"External"},create:"Create Inspection",created:"Inspection created successfully",updated:"Inspection updated successfully",deleted:"Inspection deleted successfully",confirmDelete:"Are you sure you want to delete this inspection?"},effectif:{title:"Daily Workforce",subtitleHr:"Submit daily headcount for your assigned projects",subtitleAnalytics:"Workforce trend over time (filters: pole, project, date)",whySubmitTitle:"Why submit daily workforce?",whySubmitBody:"It helps track manpower trends, anticipate risks, and improve planning across projects.",project:"Project",pole:"Pole",date:"Date",fromDate:"From date",toDate:"To date",effectif:"Workforce",effectifPlaceholder:"Enter workforce",projectRequired:"Please select a project",dateRequired:"Please select a date",effectifInvalid:"Please enter a valid workforce value",saveSuccess:"Saved",saveFailed:"Failed to save",loadFailed:"Failed to load data",loadProjectsFailed:"Failed to load projects"},workers:{title:"Workers Management",subtitle:"Manage workers and their information",addWorker:"Add Worker",addOneWorker:"Add one worker",massAdd:"Mass add",massDocs:{open:"Mass documents",title:"Mass documents insertion",help:"Choose a category, download the Excel template, then import the Excel file and the ZIP of PDFs (PDF filename must be the CIN).",categories:{trainings:"Trainings",qualifications:"Qualifications",medical:"Medical aptitudes",sanctions:"Disciplinary measures"},trainings:{downloadTemplate:"Download trainings template",chooseExcel:"Choose Excel file",chooseZip:"Choose ZIP file",import:"Import trainings",result:"Import result: {{imported}} imported, {{failed}} failed",zipErrorsCount:"ZIP errors: {{count}}",importSuccess:"Trainings import completed: {{imported}} imported, {{failed}} failed"},qualifications:{downloadTemplate:"Download qualifications template",chooseExcel:"Choose Excel file",chooseZip:"Choose ZIP file",import:"Import qualifications",result:"Import result: {{imported}} imported, {{failed}} failed",zipErrorsCount:"ZIP errors: {{count}}",importSuccess:"Qualifications import completed: {{imported}} imported, {{failed}} failed"},medical:{downloadTemplate:"Download medical aptitudes template",chooseExcel:"Choose Excel file",chooseZip:"Choose ZIP file",import:"Import medical aptitudes",result:"Import result: {{imported}} imported, {{failed}} failed",zipErrorsCount:"ZIP errors: {{count}}",importSuccess:"Medical aptitudes import completed: {{imported}} imported, {{failed}} failed"},sanctions:{downloadTemplate:"Download disciplinary measures template",chooseExcel:"Choose Excel file",chooseZip:"Choose ZIP file",import:"Import disciplinary measures",result:"Import result: {{imported}} imported, {{failed}} failed",zipErrorsCount:"ZIP errors: {{count}}",importSuccess:"Disciplinary measures import completed: {{imported}} imported, {{failed}} failed"}},newWorker:"New Worker",editWorker:"Edit Worker",noWorkers:"No workers found",nom:"Last Name",prenom:"First Name",fonction:"Function",cin:"National ID",dateNaissance:"Date of Birth",entreprise:"Company",projet:"Project",dateEntree:"Entry Date",status:"Status",active:"Active",inactive:"Inactive",import:"Import",export:"Export",downloadTemplate:"Download Template",bulkDeactivate:"Deactivate Selected",bulkActivate:"Activate Selected",deactivate:"Deactivate",activate:"Activate",created:"Worker created successfully",merged:"Worker updated (existing CIN)",updated:"Worker updated successfully",deactivated:"Worker deactivated successfully",activated:"Worker activated successfully",bulkDeactivated:"{{count}} worker(s) deactivated",bulkActivated:"{{count}} worker(s) activated",importSuccess:"Import successful: {{imported}} imported, {{merged}} merged",confirmDeactivate:"Are you sure you want to deactivate {{name}}?",confirmBulkDeactivate:"Are you sure you want to deactivate {{count}} worker(s)?",allProjects:"All Projects",allEntreprises:"All Companies",allFonctions:"All Functions",allStatus:"All Status",filters:{pole:"Pole",project:"Project",entreprise:"Company",fonction:"Function",sanctions:"Disciplinary measures",sanctionsAny:"With disciplinary measures",sanctionsNone:"Without disciplinary measures",training:"Training",qualification:"Qualification",medical:"Medical aptitude",medicalStatus:"Medical status",presence:"Presence",with:"With",without:"Without",expired:"Expired",expiredAny:"Any",expiredOnly:"Only expired",expiredWithout:"Without expired"},totalWorkers:"Total Workers",activeWorkers:"Active",inactiveWorkers:"Inactive",hseTeam:"HSE Team",stats:{inductionHse:"HSE Induction",workAtHeight:"Work at height",physicalAptitude:"Physical aptitude",bypassingSafetyControls:"Bypassing safety controls",medicalAptitude:"Medical aptitude"},statusHelp:"Deactivated = not visible in project",importTitle:"Import Workers",importHelp:"Download the template, fill it in, and import it.",selectFile:"Select File",cinInfo:"CIN is the unique identifier. Duplicates will be merged.",selectDate:"Select a date",minAge:"Worker must be at least 18 years old",fonctionPlaceholder:"Site Manager, Worker...",entreprisePlaceholder:"SGTM, Contractor...",details:{title:"Worker details",noImage:"No image",image:{add:"Add image"},sections:{trainings:"Trainings",qualifications:"Qualifications",medical:"Medical aptitude"},tabs:{trainings:"Trainings",qualifications:"Qualifications",medical:"Medical aptitude",sanctions:"Disciplinary measures"},common:{startDate:"Start date",endDate:"End date",endDateAutoHelp:"End date defaults to 1 year after start date (editable).",file:"File (PDF)",choosePdf:"Choose a PDF",pdfOnly:"Please choose a PDF file"},trainings:{addTitle:"Add training",type:"Type of training",otherLabel:"Specify",empty:"No trainings recorded for this worker.",types:{bypassing_safety_controls:"Bypassing safety controls",formation_coactivite:"Co-activity training",formation_coffrage_decoffrage:"Formwork and stripping training",formation_conduite_defensive:"Defensive driving training",formation_analyse_des_risques:"Risk analysis training",formation_elingage_manutention:"Slinging and handling training",formation_ergonomie:"Ergonomics training",formation_excavations:"Excavation training",formation_outils_electroportatifs:"Power tools training",formation_epi:"PPE training",formation_environnement:"Environment training",formation_espaces_confines:"Confined spaces training",formation_flagman:"Flagman training",formation_jha:"JHA training",formation_line_of_fire:"Line of fire training",formation_manutention_manuelle:"Manual handling training",formation_manutention_mecanique:"Mechanical handling training",formation_point_chaud:"Hot work training",formation_produits_chimiques:"Chemical products training",formation_risques_electriques:"Electrical risks training",induction_hse:"HSE induction",travail_en_hauteur:"Working at height",other:"Other (specify)"}},qualifications:{addTitle:"Add qualification",empty:"No qualifications recorded for this worker.",type:"Qualification",level:"Level",levelPlaceholder:"e.g. B0 / H0V / B1V...",otherLabel:"Specify",types:{elingueur:"Slinger",equipier_premiere_intervention:"First response team member",habilitation_electrique:"Electrical authorization",inspecteur_echafaudage:"Scaffolding inspector",monteur_echafaudage:"Scaffolding erector",monteur_grue_a_tour:"Tower crane assembler",chauffeur:"Driver",operateur:"Operator",operateur_bulldozer:"Bulldozer operator",operateur_chargeuse:"Loader operator",operateur_chariot_elevateur:"Forklift operator",operateur_compacteur:"Compactor operator",operateur_dumper:"Dumper operator",operateur_grue_a_tour:"Tower crane operator",operateur_grue_mobile:"Mobile crane operator",operateur_niveleuse:"Grader operator",operateur_nacelle:"MEWP / aerial platform operator",operateur_pelle:"Excavator operator",sst:"First aid (SST)",soudeur:"Welder",utilisation_meule:"Grinder use",other:"Other (specify)"}},medical:{addTitle:"Add medical aptitude",empty:"No medical aptitude recorded for this worker.",status:"Status",apte:"Fit (Apte)",inapte:"Unfit (Inapte)",examNature:"Exam nature",ableTo:"Able to",examNatures:{embauche_reintegration:"Hiring / reintegration",visite_systematique:"Periodic visit",surveillance_medical_special:"Special medical monitoring",visite_de_reprise:"Return-to-work visit",visite_spontanee:"Spontaneous visit"},ableToOptions:{travaux_en_hauteur:"Work at height",travaux_electrique:"Electrical work",travaux_en_espace_confine:"Confined space work",operateur:"Operator",travaux_point_chaud:"Hot work"}},sanctions:{addTitle:"Add sanction",empty:"No sanctions recorded for this worker.",date:"Date",reason:"Reason",type:"Type",document:"Document (PDF)",miseAPiedDays:"Number of days (suspension)",successiveAvertissement:"Warning #",types:{mise_a_pied:"Suspension",avertissement:"Warning",rappel_a_lordre:"Reminder to order",blame:"Reprimand"}}}},qualifiedPersonnel:{navLabel:"Qualified Personnel",pageTitle:"Worker Trainings",pageSubtitle:"Manage worker-specific trainings and certificates.",filters:{searchPlaceholder:"Search by name or National ID...",trainingPlaceholder:"All trainings",resultsCount:"{count} result(s)"},workerCardTitle:"Personnel",addTrainingTitle:"Add Training",trainingType:"Training type",trainingLabel:"Training title",trainingDate:"Training date",expiryDate:"Expiry date",certificate:"Certificate (PDF)",chooseFile:"Choose a file",saveTraining:"Save training",trainingCreated:"Worker training saved",invalidExpiry:"Expiry date cannot be before training date",trainingListTitle:"Worker trainings",colType:"Type",colStartDate:"Start date",colEndDate:"Expiry date",colCertificate:"Certificate",noTrainings:"No trainings for this worker.",noWorkerSelected:"Select a worker to see their trainings.",noWorkerSelectedHelp:"Choose a project and search by name or National ID, then select a worker to view and add trainings.",statusValid:"Valid",statusExpiring:"Expiring soon",statusExpired:"Expired",statusNoExpiry:"No date",viewExpiringButton:"View expiring / expired trainings",viewAllButton:"View all trainings",expiringListTitle:"Expiring / expired trainings",noExpiring:"No expiring or expired trainings found for your projects.",viewCertificate:"View certificate",downloadCertificate:"Download",types:{inductionHse:"Induction HSE",aptitudePhysique:"Physical aptitude",travailHauteur:"Working at height",elinguage:"Slinging",outillageElectrique:"Electrical tools",inspecteurEchafaudage:"Scaffold inspector",monteurEchafaudage:"Scaffold erector",incendie:"Fire safety",secourisme:"First aid",reconnaissanceHse:"HSE awareness",other:"Other (specify)"}},users:{title:"User Management",subtitle:"Manage system users and their permissions",userList:"User List",userDetails:"User Details",addUser:"Add User",newUser:"New User",editUser:"Edit User",createUser:"Create New User",updateUser:"Update User",createUserBtn:"Create User",deleteUser:"Delete User",searchPlaceholder:"Search users...",allRoles:"All Roles",roles:{admin:"Administrator",consultation:"Consultation",hse_manager:"HSE Manager",regional_hse_manager:"Regional HSE Manager",responsable:"HSE Responsible",user:"HSE Officer",supervisor:"HSE Supervisor",hr:"Human Resources",dev:"Developer",pole_director:"Pole Director",works_director:"Works Director",hse_director:"HSE Director",hr_director:"HR Director"},table:{user:"User",role:"Role",projects:"Projects",status:"Status",actions:"Actions"},status:{active:"Active",inactive:"Inactive"},form:{fullName:"Full Name",email:"Email Address",cin:"National ID",cinPlaceholder:"National ID card number",password:"Password",passwordHint:"leave blank to keep current",role:"Role",pole:"Pole",selectPole:"Select pole",phone:"Phone",assignProjects:"Assign to Projects"},activate:"Activate",deactivate:"Deactivate",loadError:"Failed to load users",saveError:"Failed to save user",createSuccess:"User created successfully",updateSuccess:"User updated successfully",deleteSuccess:"User deleted successfully",deleteError:"Failed to delete user",deleteConfirm:"Are you sure you want to delete {{name}}?",activateSuccess:"User activated successfully",deactivateSuccess:"User deactivated successfully",statusError:"Failed to update user status",noUsers:"No users found",assignedProjects:"Assigned Projects",toggleStatus:"Toggle Status",bulk:{downloadTemplateFailed:"Failed to download template",chooseFile:"Please choose a file",importSummary:"Imported: {{imported}} / Updated: {{updated}}",importIssues:"{{count}} row(s) had issues",importFailed:"Failed to import users"}},members:{title:"Member Management",subtitle:"Manage project team members",addMember:"Add Member",newMember:"New Member",editMember:"Edit Member",noMembers:"No members found",createSuccess:"Member created successfully",createMerged:"Existing user found with this National ID and added to project",updateSuccess:"Member updated successfully",removeSuccess:"Member removed from project successfully",removeConfirm:"Are you sure you want to remove {{name}} from this project?",removeWarning:"The user will be deactivated if they have no remaining project affiliations.",cinExists:"A user with this National ID already exists",emailExists:"A user with this email already exists",selectRole:"Select a role",cannotRemoveSelf:"You cannot remove yourself from the project",cinInfo:"If a user with this National ID already exists, they will be automatically added to this project."},kpi:{title:"KPI Reports",monthlyMeasurements:"Monthly Measurements",monthlyMeasurementsHint:"Monthly-only environmental measurements (separated by indicator)",noiseMonitoring:"Noise monitoring",waterConsumption:"Water consumption",electricityConsumption:"Electricity consumption",submission:"KPI Submission",submitKpi:"Submit KPI",history:"KPI History",newReport:"New Report",editReport:"Edit Report",viewReport:"View Report",deleteReport:"Delete Report",selectProject:"Select Project",selectMonth:"Select Month",selectYear:"Select Year",reportDate:"Report Date",reportMonth:"Report Month",reportYear:"Report Year",status:{draft:"Draft",submitted:"Submitted",approved:"Approved",rejected:"Rejected"},saveDraft:"Save Draft",submitReport:"Submit Report",approve:"Approve",reject:"Reject",rejectionReason:"Rejection Reason",accidents:{title:"Accidents",total:"Total Accidents",fatal:"Fatal Accidents",serious:"Serious Accidents",minor:"Minor Accidents",nearMisses:"Near Misses",firstAidCases:"First Aid Cases"},training:{title:"Training",conducted:"Trainings Conducted",planned:"Trainings Planned",employeesTrained:"Employees Trained",trainingHours:"Training Hours",toolboxTalks:"Toolbox Talks"},inspections:{title:"Inspections",completed:"Inspections Completed",planned:"Inspections Planned",findingsOpen:"Open Findings",findingsClosed:"Closed Findings",correctiveActions:"Corrective Actions"},rates:{title:"Rates & Hours",hoursWorked:"Hours Worked",lostWorkdays:"Lost Workdays",frequencyRate:"Frequency Rate (TF)",severityRate:"Severity Rate (TG)"},additional:{title:"Additional Metrics",unsafeActs:"Unsafe Acts Reported",unsafeConditions:"Unsafe Conditions Reported",emergencyDrills:"Emergency Drills",ppeCompliance:"PPE Compliance (%)"},notes:"Notes & Comments",noReports:"No reports found",reportSaved:"Report saved successfully",reportSubmitted:"Report submitted successfully",reportResubmitted:"Report resubmitted successfully",reportApproved:"Report approved successfully",reportRejected:"Report rejected",reportDeleted:"Report deleted successfully",confirmDelete:"Are you sure you want to delete this report?",management:{title:"KPI Report Management",subtitle:"Approve or reject submitted reports",searchPlaceholder:"Search...",allStatuses:"All statuses",statusSubmitted:"Pending",submittedBy:"Submitted by",period:"Period",date:"Date",viewDetails:"View details",rejectTitle:"Reject report",rejectReasonRequired:"Please enter a rejection reason",rejectWarningBefore:"The report will be moved back to",rejectWarningAfter:"so the submitter can correct and resubmit.",rejectReasonPlaceholder:"Enter the rejection reason...",detailsTitle:"Report details",loadDetailsFailed:"Failed to load report details",previouslyRejected:"Previously rejected",rejectedOn:"Rejected on {date}",sections:{effectifInduction:"1-2. Workforce & Induction",observationsAwareness:"3-4. Observations & Awareness",accidentsIncidents:"5-8. Accidents & Incidents",inspectionsIndicators:"9-11. Inspections & Indicators",trainingPermitsDiscipline:"12-14. Training, Permits & Discipline",complianceMonitoring:"15-17. Compliance & Monitoring",energyConsumption:"18-19. Energy Consumption"}},steps:{projectInfo:"Project Info",weeklyReporting:"HSE Reporting",incidentTracking:"Incident Tracking"},projectInfo:{title:"Project Information",selectProject:"Select a project",reportPeriod:"Report Period",weekNumber:"Week Number",startDate:"Start Date",endDate:"End Date",currentWeek:"Current week"},autoPopulate:"Auto-fill Data",autoPopulateTitle:"Auto-fill from Related Data",autoPopulateDesc:"Automatically fill the form with data from deviations, trainings, inspections, etc.",autoPopulated:"Data auto-filled",noDataToPopulate:"No related data found for this period",selectProjectAndWeek:"Please select a project and week first",weekly:{title:"Weekly HSE Reporting",subtitle:"HSE REPORTING",effectif:"Workforce",induction:"Induction",ecarts:"Deviations Recorded",sensibilisation:"Awareness Sessions",presquAccident:"Near Miss",premiersSoins:"First Aid Cases",accident:"Accident",joursArret:"Lost Work Days",inspections:"Number of Inspections",tauxGravite:"Severity Rate (TG)",tauxFrequence:"Frequency Rate (TF)",heuresFormation:"Training Hours",permisTravail:"Work Permits",mesuresDisciplinaires:"Disciplinary Measures",conformiteHSE:"HSE Regulatory Compliance Rate",conformiteMedecine:"Occupational Medicine Compliance",suiviBruit:"Noise Monitoring",consoEau:"Energy Consumption: Water",consoElectricite:"Energy Consumption: Electricity",consommation:"Resource Consumption",consommationEau:"Water Consumption",consommationElectricite:"Electricity Consumption"},incidents:{title:"Incident & Accident Tracking",subtitle:"INCIDENT & ACCIDENT TRACKING",fatality:"Fatality",lostTimeAccident:"Lost Time Accident",nonLostTimeAccident:"Non-Lost Time Accident",firstAidCase:"First Aid Case",nearMiss:"Near Miss",propertyDamage:"Property Damage",environmentalImpact:"Environmental Impact",lostWorkDays:"Lost Work Days",summary:"Summary",ltaShort:"LTA"},dailyKpi:{title:"Daily HSE Entry",subtitle:"Daily data  Auto-calculate weekly KPIs",download:"Download",import:"Import",entry:"Entry",downloadTemplate:"SGTM Excel Template",downloadDesc:"Download template, fill daily data, then import it",importFile:"Import filled file",importDesc:"Data will automatically fill the table",selectFile:"Select",indicator:"Indicator",total:"Total",autoFill:"Auto-fill",confirm:"Confirm",confirmApply:"Confirm and apply",hasData:"Data",templateDownloaded:"Template downloaded - Import after filling",dataImported:"Data imported - review then confirm",dataSaved:"Data saved and applied to KPI",systemDataApplied:"System data applied",noDataToSave:"No data to save",downloadFailed:"Download failed",parseFailed:"Failed to parse file",saveFailed:"Save failed",formulaInfo:"Deviations, TBM, Training, Permits: fetched from system",workHoursFormula:"Work hours must be entered explicitly",dailyData:"Daily Data",days:"days",loadingDaily:"Loading daily data..."},effectif:{title:"Daily Workforce",subtitleHr:"Submit daily headcount for your assigned projects",subtitleAnalytics:"Workforce trend over time (filters: pole, project, date)",project:"Project",pole:"Pole",date:"Date",fromDate:"From date",toDate:"To date",effectif:"Workforce",effectifPlaceholder:"Enter workforce",projectRequired:"Please select a project",dateRequired:"Please select a date",effectifInvalid:"Please enter a valid workforce value",saveSuccess:"Saved",saveFailed:"Failed to save",loadFailed:"Failed to load data",loadProjectsFailed:"Failed to load projects"},historyPage:{subtitle:"View and manage your submitted KPI reports",loadFailed:"Failed to load reports",onlyDraftDeletable:"Only draft reports can be deleted",deleteSuccess:"Report deleted successfully",exportFailed:"Failed to export reports"},submissionPage:{cannotEditReport:"This report can no longer be edited",loadReportFailed:"Failed to load report",selectWeekRequired:"Please select a week"}},profile:{title:"Profile",subtitle:"Manage your account settings and preferences",personalInfo:"Personal Information",updateProfile:"Update Profile",changePassword:"Change Password",profileUpdated:"Profile updated successfully",passwordMismatch:"Passwords do not match",passwordMinLength:"Password must be at least 8 characters",passwordMinLengthHint:"Password must be at least 8 characters long",currentPasswordWrong:"Current password is incorrect",emailReadOnly:"Email cannot be changed",preferencesTitle:"Preferences",language:"Language",projectListPreference:"Project list preference",projectListByCode:"By code",projectListByName:"By name",theme:"Theme",savePreferences:"Save Preferences",preferencesUpdated:"Preferences updated successfully",backup:{title:"Backups",subtitle:"Configure automatic backups and download the latest backup bundle.",frequency:"Backup frequency",lastRun:"Last backup run",latestFile:"Latest backup file",downloadLatest:"Download latest backup"}},notifications:{title:"Notifications",markAllRead:"Mark all as read",viewAll:"View all notifications",deleteRead:"Delete read",noNotifications:"No notifications yet",newReport:"New report submitted",reportApproved:"Your report has been approved",reportRejected:"Your report has been rejected",projectAssigned:"You have been assigned to a project",kpiSubmitted:"New KPI report submitted",kpiApproved:"KPI report approved",kpiRejected:"KPI report rejected",sorSubmitted:"New non-conformity reported",sorCorrected:"Corrective action submitted",trainingSubmitted:"New training recorded",awarenessSubmitted:"New awareness session recorded",reminder:"Reminder",system:"System announcement",urgent:{sendButton:"Urgent",composerTitle:"Send urgent notification",targetLabel:"Recipients",targetAll:"All users",targetRole:"By role",targetUsers:"Specific users",roleLabel:"Role",usersLabel:"Users",usersSearchPlaceholder:"Search by name or email...",urgencyLabel:"Urgency",urgencyLow:"Low",urgencyMedium:"Medium",urgencyHigh:"High",messageLabel:"Message",messagePlaceholder:"Type your urgent message...",sending:"Sending...",send:"Send",sentSuccess:"Urgent notification sent",sentError:"Failed to send urgent notification",noRecipients:"Please select at least one recipient",requiredMessage:"Please enter a message",receivedTitle:"Urgent notification",close:"Close",closeIn:"You can close in {seconds}s"}},errors:{somethingWentWrong:"Something went wrong",pageNotFound:"Page not found",unauthorized:"Unauthorized",forbidden:"Access forbidden",serverError:"Server error",networkError:"Network error. Please check your connection.",validationError:"Validation error",notFound:"Resource not found",fetchFailed:"Failed to fetch data",invalidFileType:"Invalid file type",goBack:"Go Back",goHome:"Go Home",failedToLoad:"Failed to load data",failedToSave:"Failed to save changes",failedToDelete:"Failed to delete item",failedToExport:"Failed to export data",failedToSendResetLink:"Failed to send reset link"},ppe:{nav:"PPE",title:"PPE Management",subtitle:"Manage PPE stock and issue PPE to workers",note:"Issuing PPE decreases stock. If you select Other, the item will be added to the list automatically.",pendingValidation:{button:"Pending Validation",title:"Pending validation",pole:"Pole",project:"Project",articles:"PPE articles",selected:"Selected articles",viewReport:"View Report",projectRequired:"Please select a project",itemsRequired:"Please select at least one PPE article",missingParams:"Missing report parameters. Please open this report from PPE Management.",reportTitle:"PPE Pending Validation Report",downloadReport:"Download Report",viewNames:"Names",projectName:"Project Name",projectPole:"Project Pole",hseManagerName:"HSE Manager Name",hseManagerEmail:"HSE Manager Email",currentWorkers:"Current Total Workers",table:{article:"Article",currentStock:"Current Stock",week:"Distributed in Last Week",month:"Distributed in Last Month",names:"Names"},detailsTitle:"Distribution details - {article}",details:{cin:"CIN",name:"Name",quantity:"Quantity",date:"Date"}},project:"Project",projectRequired:"Please select a project",items:{name:"Item",stock:"Stock",threshold:"Low stock threshold",add:"Add PPE item",edit:"Edit PPE item",confirmDelete:"Are you sure you want to delete {{name}}?"},restock:{button:"Restock",title:"Restock PPE",item:"PPE item",chooseItem:"Please choose a PPE item (or specify Other)",quantity:"Quantity to add",threshold:"Low stock threshold",thresholdPlaceholder:"Optional",submit:"Restock"},issue:{button:"Issue PPE",menuManual:"Manual issue",menuImport:"Import & issue",title:"Issue PPE to worker",worker:"Worker",workerSearchPlaceholder:"Search worker by name, CIN...",chooseWorker:"Please select a worker",item:"PPE item",other:"Other",otherSpecify:"Specify",otherPlaceholder:"Enter PPE name",quantity:"Quantity",receivedAt:"Received date",chooseItem:"Please choose a PPE item (or specify Other)",submit:"Issue",success:"PPE issued successfully"},workerTab:{title:"PPE",empty:"No PPE issued",issueButton:"Issue PPE",lastIssuedTitle:"Last issued per item",columns:{item:"Item",quantity:"Qty",receivedAt:"Date"}},analytics:{title:"PPE consumption dashboard",subtitle:"Consumption by PPE item, pole, and project (based on issued PPE)",chartTitle:"Consumption by PPE item  pole (stacked by project)",yAxis:"Qty",noData:"No consumption data for the selected filters.",tooltipHint:"Values are PPE quantities issued.",duration:{year:"Year",month:"Month",week:"Week"},filters:{items:"PPE items",selectAll:"Select all"}}},regulatoryWatch:{nav:"Regulations",sstNav:"OHS Regulations",environmentNav:"Environmental Regulations",title:"Regulatory watch",subtitle:"Regulatory compliance checklist per project",historySubtitle:"Submission history (per project)",detailsTitle:"Submission details",newSubmission:"New submission",resubmit:"Resubmit",week:"Week",year:"Year",selectWeek:"Select week",selectYear:"Select a year",selectProject:"Select a project",lastSubmission:"Last submission",sectionScore:"Section score",overallScore:"Overall score",avgScore:"Average score",historyTitle:"Submissions",noSubmissions:"No submissions",submittedAt:"Submitted at",viewDetails:"View details",detailsTitle:"Submission details",sectionScores:"Section scores",newSubmission:"New submission",newTitle:"New submission",resubmit:"Resubmit",resubmitTitle:"Resubmit (prefilled)",applicable:"Applicable",notApplicable:"Not applicable",conforme:"Compliant",nonConforme:"Non-compliant",correctiveAction:"Corrective action",comment:"Comment",saveDraft:"Save as draft",draftSaved:"Draft saved",submitSuccess:"Submission saved"},success:{saved:"Saved successfully",deleted:"Deleted successfully",profileUpdated:"Profile updated successfully",passwordChanged:"Password changed successfully"},months:{january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},pagination:{showing:"Showing",to:"to",of:"of",results:"results",perPage:"per page",first:"First",last:"Last"},sor:{title:"Deviation Tracking",subtitle:"Manage non-conformities and observations",submitDeviation:"Submit Deviation",addNew:"New Observation",newReport:"New Non-Conformity",editReport:"Edit Non-Conformity",viewReport:"Observation Details",noReports:"No observations recorded",fillRequired:"Please fill in all required fields",createSuccess:"Observation created successfully",updateSuccess:"Observation updated successfully",statusUpdated:"Status updated successfully",markClosed:"Mark as closed",project:"Project Name",selectProject:"Select a project",company:"Company",date:"Date",time:"Time",zone:"Zone",zonePlaceholder:"Work area / location...",supervisor:"Supervisor / HSE Officer",supervisorPlaceholder:"Name of supervisor or HSE officer",nonConformity:"Non-Conformity",nonConformityPlaceholder:"Describe the non-conformity or observation...",photo:"Photo",uploadPhoto:"Click to add a photo",changePhoto:"Change photo",category:"Deviation Category",selectCategory:"Select a category",categories:{nettoyage_rangement:"Housekeeping & Cleaning",protection_chute:"Fall Protection",echafaudage:"Scaffolding / Ladders / Stairs",epi:"Personal Protective Equipment (PPE)",excavations:"Excavations",levage:"Lifting",methode_travail:"Work Method - SPA",manutention:"Manual Handling",vehicule_transport:"Vehicle / Transport",outils_equipements:"Tools / Equipment",chute_trebuchement:"Slip / Trip / Fall",electricite:"Electricity",protection_incendie:"Fire Protection",communication_attitude:"Communication / Attitude",acces_passage:"Access / Walkways / Emergency Exits",formation_toolbox:"Training / Toolbox / Meeting",inspection_evaluation:"Inspection & Evaluation",documentation_hse:"HSE Documentation & Evaluation",gestion_sous_traitants:"Subcontractor Management",autre:"Other"},responsiblePerson:"Responsible Person",responsiblePersonPlaceholder:"Name of responsible person",deadline:"Deadline",correctiveAction:"Corrective Action",correctiveActionPlaceholder:"Describe the corrective action to implement...",status:{label:"Status",open:"Open",inProgress:"In Progress",closed:"Closed"},pendingCorrective:"Pending Corrective Actions",addCorrective:"Add Action",addCorrectiveTitle:"Submit Corrective Action",correctivePromptTitle:"Corrective Action",correctivePromptMessage:"Would you like to submit the corrective action now or later?",correctiveDate:"Action Date",correctiveTime:"Action Time",correctivePhoto:"Corrective Action Photo",correctiveRequired:"Corrective action is required",correctiveSubmitted:"Corrective action submitted successfully",editCorrective:"Edit Corrective Action",submitLater:"Submit Later",submitAndClose:"Submit & Close",createClosedSuccess:"Observation created and closed",createPinnedSuccess:"Observation created and pinned for follow-up",problemSummary:"Problem Summary",closedBy:"Closed by",submittedBy:"Submitted by",clickToEnlarge:"Click to enlarge"},lightingMeasurements:{pageTitle:"Lighting Measurements (Lux)",pageSubtitle:"Location + lux value + optional threshold compliance",recordsTitle:"Records",noRecords:"No records",filters:{year:"Year",yearPlaceholder:"2026",month:"Month",monthPlaceholder:"1-12"},table:{date:"Date",project:"Project",location:"Location",lux:"Lux",threshold:"Threshold",compliant:"Compliant",actions:"Actions"},modal:{newTitle:"New lighting measurement",editTitle:"Edit lighting measurement"},form:{project:"Project",selectProjectPlaceholder:"Select...",date:"Date",location:"Location",luxValue:"Lux value",thresholdOptional:"Threshold (optional)",notes:"Notes"},confirmArchive:{title:"Archive record",message:"This will archive (soft-delete) the record. Continue?"},toasts:{created:"Record created",updated:"Record updated",archived:"Record archived"}},wasteManagement:{title:"Waste Management",subtitle:"Track waste exports per project",emptyState:"No records",actions:{add:"Add"},tabs:{all:"All"},filters:{dateFrom:"Date from",dateTo:"Date to",plateSearch:"Plate number",plateSearchPlaceholder:"Search by plate number",includeArchived:"Include archived records"},table:{date:"Date",project:"Project",wasteType:"Waste type",quantity:"Quantity",tripsCount:"Trips count",transportMethod:"Transport method",plateNumber:"Plate number",treatment:"Treatment"},modal:{createTitle:"Add record",editTitle:"Edit record"},form:{date:"Date",wasteType:"Waste type",wasteTypeOther:"Other (waste type)",quantity:"Quantity",tripsCount:"Trips count",transportMethod:"Transport method",transportMethodOther:"Other (transport method)",plateNumber:"Plate number",treatment:"Treatment",treatmentOther:"Other (treatment)"},wasteTypes:{banales:"General waste",betons:"Concrete",liquides_sanitaires:"Sanitary liquids",melange_banales:"Mixed (general)",ferraile:"Scrap metal",huiles_usees:"Used oils",solides_dangereux:"Hazardous solids",medicaux:"Medical",autre:"Other"},transportMethods:{benne_satellite:"Satellite skip",camion_hydrocureur:"Hydrocurer truck",camion_plateau:"Flatbed truck",camion_8x4:"8x4 truck",camion_citerne:"Tanker truck",camion_ampliroll:"Hook lift truck",remorque_a_benne:"Tipper trailer",autre:"Other"},treatments:{decharge:"Landfill",incineration:"Incineration",recyclage:"Recycling",pretraitement_incineration:"Pretreatment + incineration",recyclage_sur_chantier:"On-site recycling",traitement_physico_chimique:"Physico-chemical treatment",regeneration_huiles_usees:"Regeneration (used oils)",valorisation:"Recovery (scrap / mixed)",stockage_temporaire:"Temporary storage (hazardous / medical)",neutralisation:"Neutralization (hazardous)",autre:"Other"},delete:{title:"Delete",message:"Are you sure you want to delete this item?"},toasts:{created:"Record created",updated:"Record updated",deleted:"Record deleted"},pagination:{prev:"Previous",next:"Next",pageOf:"Page {page} of {last}",total:"Total: {total}"},validation:{projectRequired:"Please select a project",dateRequired:"Please select a date",wasteTypeRequired:"Please select a waste type",wasteTypeOtherRequired:"Please specify the waste type",quantityRequired:"Please enter a valid quantity",tripsCountRequired:"Please enter a valid trips count",transportMethodRequired:"Please select a transport method",transportMethodOtherRequired:"Please specify the transport method",plateNumberRequired:"Please enter the plate number",treatmentRequired:"Please select a treatment",treatmentOtherRequired:"Please specify the treatment"}},monthlyMeasurements:{pageTitle:"Monthly Measurements",pageSubtitle:"Monthly-only environmental measurements (separated by indicator)",unit:"Unit",selected:"Selected",select:"Select",indicators:{noise_monitoring:"Noise",water_consumption:"Water",electricity_consumption:"Electricity"},filters:{year:"Year",month:"Month",includeArchived:"Include archived"},recordsTitle:"Records: {indicator}",table:{project:"Project",year:"Year",month:"Month",indicator:"Indicator",value:"Value",unit:"Unit",method:"Method"},noRecords:"No records",modal:{newTitle:"New monthly measurement",editTitle:"Edit monthly measurement"},fields:{project:"Project",selectProject:"Select...",year:"Year",month:"Month",indicator:"Indicator",valueWithUnit:"Value ({unit})",method:"Method"},archive:{title:"Archive record",message:"This will archive (soft-delete) the record. Continue?"}},hseEvents:{pageTitle:"Accidents, Incidents & Medical Visits",pageSubtitle:"Register and track HSE events (accidents, incidents, near misses, first aid, road accidents)",recordsTitle:"Records",noRecords:"No records",tabs:{accidents:"Accident / Incident",medical:"Medical Visits"},accidentForm:{sections:{identification:"Accident Identification",victimsOverview:"Victims Overview",victimDetails:"Victim Details",activity:"Activity at Time of Accident",environment:"Work Environment & Conditions",ppe:"PPE & Protections",immediateCause:"Immediate Cause",rootCause:"Root Cause Analysis",immediateActions:"Immediate Actions Taken",preventiveActions:"Preventive & Corrective Actions",attachments:"Attachments",validationClosure:"Validation & Closure",other:"Other"},fields:{accidentId:"Accident ID",accidentCategory:"Accident category",siteProject:"Site / Project",autoGenerated:"Auto-generated",exactLocation:"Exact location on site",date:"Date",time:"Time",shift:"Shift",dayOfWeek:"Day of week",numberOfVictims:"Number of victims",derivedSeverity:"Derived severity",victim:"Victim",fullName:"Full name",matricule:"Matricule / Internal ID (optional)",company:"Company",companySgtm:"SGTM",companySubcontractor:"Subcontractor",subcontractorName:"Subcontractor name",jobTitle:"Job title / Role",ageRange:"Age range",experience:"Experience in current role",injuryOutcome:"Injury outcome",bodyPart:"Body part affected",injuryType:"Injury type",specifyInjuryType:"Specify injury type",dateOfDeath:"Date of death",deathTimingSameDay:"Same day",deathTimingLater:"Later",placeOfDeath:"Place of death",deathPlaceOnSite:"On site",deathPlaceDuringEvacuation:"During evacuation",deathPlaceMedicalFacility:"Medical facility",datePicker:"Date picker",activity:"Activity",other:"Other",groundCondition:"Ground condition",lighting:"Lighting",weather:"Weather",workArea:"Work area",ppeWorn:"PPE worn",otherPpe:"Other PPE",collectiveProtections:"Collective protections",primaryImmediateCause:"Primary immediate cause",rootCauseCategories:"Root cause categories",methodConformity:"Method conformity (required if severity  LTA)",addAction:"Add action",actionType:"Action type",actionDescription:"Action description",responsibleRole:"Responsible role",remove:"Remove",noActions:"No actions",investigationCompleted:"Investigation completed",accidentClosed:"Accident closed",closureDate:"Closure date",closedByRole:"Closed by (role)",description:"Description",lostWorkDays:"Lost work days (if lost time)",lostTimeAutoDerived:"Lost time is auto-derived from victims outcomes.",addFiles:"Add files",existingAttachments:"Existing attachments",filesUploadedAfterSaving:"Files will be uploaded after saving.",selectedFiles:"Selected: {files}",noAttachments:"No attachments",loading:"Loading..."},options:{accidentCategory:{near_miss:"Near miss",work_accident:"Work accident",incident:"Incident",road_accident:"Road traffic accident"},shift:{day:"Day",night:"Night"},ageRange:{lt_25:"<25","25_35":"25-35","36_45":"36-45","46_55":"46-55",gt_55:">55"},experienceRange:{"<6_months":"Less than 6 months","6-12_months":"6-12 months","1-5_years":"1-5 years",">5_years":"More than 5 years"},outcome:{no_injury:"No injury",first_aid_only:"First aid only",medical_treatment_no_lost_time:"Medical treatment (no lost time)",lost_time_accident:"Lost time accident",serious_hospitalization:"Serious / hospitalization",fatal:"Fatal"},bodyPart:{head_neck:"Head / neck",upper_limb:"Upper limb",lower_limb:"Lower limb",trunk:"Trunk",multiple:"Multiple"},injuryType:{sprain:"Sprain",cut_wound:"Cut / wound",contusion:"Contusion",fracture:"Fracture",burn:"Burn",other:"Other"},activity:{walking_circulation:"Walking / circulation",manual_handling:"Manual handling",mechanical_handling:"Mechanical handling",machine_tool_use:"Machine / tool use",vehicle_mobile_equipment:"Vehicle / mobile equipment",work_at_height:"Work at height",electrical_work:"Electrical work",other:"Other"},groundCondition:{dry:"Dry",wet:"Wet",slippery:"Slippery",uneven:"Uneven"},lighting:{adequate:"Adequate",insufficient:"Insufficient",night_work:"Night work"},weather:{clear:"Clear",rain:"Rain",wind:"Wind",heat:"Heat"},workArea:{pedestrian_zone:"Pedestrian zone",shared_with_vehicles:"Shared with vehicles",restricted_confined:"Restricted / confined"},ppe:{safety_shoes:"Safety shoes",helmet:"Helmet",gloves:"Gloves",hi_vis_vest:"High-visibility vest",eye_protection:"Eye protection",other:"Other"},collectiveProtections:{present:"Present",absent:"Absent",not_applicable:"Not applicable"},immediateCause:{slip_trip_fall:"Slip / trip / fall",loss_of_balance:"Loss of balance",contact_with_object:"Contact with object",unsafe_movement:"Unsafe movement",vehicle_interaction:"Vehicle interaction",other:"Other"},rootCause:{human_factor:"Human factor",method_procedure:"Method / procedure",equipment_tools:"Equipment / tools",environment_conditions:"Environment / conditions",organization_planning:"Organization / planning"},methodConformity:{conforming:"Conforming",non_conforming:"Non-conforming",not_defined:"Not defined"},immediateAction:{first_aid_provided:"First aid provided",evacuation_to_infirmary:"Evacuation to infirmary",external_medical_care:"External medical care",area_secured:"Area secured",work_stopped:"Work stopped",authorities_notified:"Authorities notified",crisis_committee_activated:"Crisis committee activated"},actionType:{technical:"Technical",organizational:"Organizational",training:"Training",inspection:"Inspection"},actionStatus:{open:"Open",in_progress:"In progress",closed:"Closed"}}},filters:{type:"Type",severity:"Severity",year:"Year",month:"Month",from:"From",to:"To",includeArchived:"Include archived"},placeholders:{year:"2026",month:"1-12",typeOther:"e.g. property damage",severityOther:"e.g. moderate"},table:{date:"Date",project:"Project",type:"Type",severity:"Severity",lostTime:"Lost time",lostDays:"Lost days",location:"Location",description:"Description"},modal:{newTitle:"New HSE Event",editTitle:"Edit HSE Event"},fields:{project:"Project",selectProject:"Select...",date:"Date",type:"Type",specifyType:"Specify type",description:"Description",severity:"Severity",lostTime:"Lost time",lostDays:"Lost days",specifySeverity:"Specify severity",location:"Location"},types:{work_accident:"Work accident",incident:"Incident",near_miss:"Near miss",first_aid:"First aid",medical_consultation:"Medical consultation / visit",road_accident:"Road traffic accident",other:"Other"},severities:{minor:"Minor",moderate:"Moderate",major:"Major",critical:"Critical",fatal:"Fatal",other:"Other"},archive:{title:"Archive record",message:"This will archive (soft-delete) the record. Continue?"},validation:{typeRequired:"Type is required",specifyType:"Please specify the type",specifySeverity:"Please specify the severity"}},roles:{admin:"Administrator",consultation:"Consultation",hse_manager:"HSE Manager",regional_hse_manager:"Regional HSE Manager",responsable:"HSE Responsible",user:"HSE Officer",supervisor:"HSE Supervisor",hr:"Human Resources",dev:"Developer",pole_director:"Pole Director",works_director:"Works Director",hse_director:"HSE Director",hr_director:"HR Director"},hseExport:{title:"HSE Weekly Export",description:"Export comprehensive HSE weekly report to Excel",selectProject:"Select Project",selectWeek:"Select Week",selectYear:"Select Year",week:"Week",year:"Year",exportButton:"Export KPI Excel",exporting:"Exporting...",success:"Export generated successfully",error:"Error during export",noProject:"Please select a project",noWeek:"Please select a week and year",sheets:{projectInfo:"Project Information",hseReporting:"HSE Reporting",incidents:"Incidents & Accidents",deviationsSgtm:"SGTM Deviations",deviationsSt:"Subcontractor Deviations",categories:"Deviation Categories",certifications:"Certifications",personnel:"Personnel Tracking",training:"Training & Awareness",inspections:"Inspections",workPermits:"Work Permits"}}},Oc={fr:O8,en:M8},dw="fr",uw="hse-kpi-language",mw=e=>{const t=String(e||"").trim();return t?t.split(/[-_]/)[0]:""},$O=f.createContext(),Uc=[{code:"fr",name:"Franais",flag:""},{code:"en",name:"English",flag:""}];function D8({children:e}){const[t,a]=f.useState(()=>{const l=localStorage.getItem(uw),c=mw(l);return c&&Oc[c]?c:dw}),n=f.useCallback(l=>{const c=mw(l);Oc[c]&&(a(c),localStorage.setItem(uw,c),document.documentElement.lang=c)},[]);f.useEffect(()=>{document.documentElement.lang=t},[t]);const s=f.useCallback((l,c={})=>{const d=l.split(".");let u=Oc[t];for(const m of d)if(u&&typeof u=="object"&&m in u)u=u[m];else{u=Oc[dw];for(const p of d)if(u&&typeof u=="object"&&p in u)u=u[p];else return console.warn(`Translation key not found: ${l}`),l;break}return Array.isArray(u)?u:typeof u!="string"?(console.warn(`Translation key is not a string or array: ${l}`),l):u.replace(/\{(\w+)\}/g,(m,p)=>c[p]!==void 0?c[p]:m)},[t]),i=Uc.find(l=>l.code===t)||Uc[0],o={language:t,setLanguage:n,t:s,currentLanguage:i,languages:Uc};return r.jsx($O.Provider,{value:o,children:e})}function ut(){const e=f.useContext($O);if(e)return e;const t=(()=>{try{return localStorage.getItem(uw)}catch{return null}})(),a=mw(t),n=a&&Oc[a]?a:dw,s=(o,l={})=>{const c=o.split(".");let d=Oc[n];for(const u of c)if(d&&typeof d=="object"&&u in d)d=d[u];else return console.warn(`Translation key not found: ${o}`),o;return Array.isArray(d)?d:typeof d!="string"?(console.warn(`Translation key is not a string or array: ${o}`),o):d.replace(/\{(\w+)\}/g,(u,m)=>l[m]!==void 0?l[m]:u)},i=Uc.find(o=>o.code===n)||Uc[0];return{language:n,setLanguage:()=>{},t:s,currentLanguage:i,languages:Uc}}function Oi(){const{t:e}=ut();return e}const I8="modulepreload",L8=function(e){return"/"+e},kS={},St=function(t,a,n){let s=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");s=Promise.allSettled(a.map(c=>{if(c=L8(c),c in kS)return;kS[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":I8,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((p,g)=>{m.addEventListener("load",p),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},$8={},NS=e=>{let t;const a=new Set,n=(u,m)=>{const p=typeof u=="function"?u(t):u;if(!Object.is(p,t)){const g=t;t=m??(typeof p!="object"||p===null)?p:Object.assign({},t,p),a.forEach(x=>x(t,g))}},s=()=>t,c={setState:n,getState:s,getInitialState:()=>d,subscribe:u=>(a.add(u),()=>a.delete(u)),destroy:()=>{($8?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),a.clear()}},d=t=e(n,s,c);return c},R8=e=>e?NS(e):NS;var RO={exports:{}},qO={},FO={exports:{}},zO={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var id=f;function q8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var F8=typeof Object.is=="function"?Object.is:q8,z8=id.useState,B8=id.useEffect,W8=id.useLayoutEffect,U8=id.useDebugValue;function H8(e,t){var a=t(),n=z8({inst:{value:a,getSnapshot:t}}),s=n[0].inst,i=n[1];return W8(function(){s.value=a,s.getSnapshot=t,tb(s)&&i({inst:s})},[e,a,t]),B8(function(){return tb(s)&&i({inst:s}),e(function(){tb(s)&&i({inst:s})})},[e]),U8(a),a}function tb(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!F8(e,a)}catch{return!0}}function K8(e,t){return t()}var V8=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?K8:H8;zO.useSyncExternalStore=id.useSyncExternalStore!==void 0?id.useSyncExternalStore:V8;FO.exports=zO;var G8=FO.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Py=f,Y8=G8;function Z8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var X8=typeof Object.is=="function"?Object.is:Z8,Q8=Y8.useSyncExternalStore,J8=Py.useRef,e9=Py.useEffect,t9=Py.useMemo,r9=Py.useDebugValue;qO.useSyncExternalStoreWithSelector=function(e,t,a,n,s){var i=J8(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=t9(function(){function c(g){if(!d){if(d=!0,u=g,g=n(g),s!==void 0&&o.hasValue){var x=o.value;if(s(x,g))return m=x}return m=g}if(x=m,X8(u,g))return x;var h=n(g);return s!==void 0&&s(x,h)?(u=g,x):(u=g,m=h)}var d=!1,u,m,p=a===void 0?null:a;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,a,n,s]);var l=Q8(e,i[0],i[1]);return e9(function(){o.hasValue=!0,o.value=l},[l]),r9(l),l};RO.exports=qO;var a9=RO.exports;const n9=Dt(a9),BO={},{useDebugValue:s9}=le,{useSyncExternalStoreWithSelector:i9}=n9;let SS=!1;const o9=e=>e;function l9(e,t=o9,a){(BO?"production":void 0)!=="production"&&a&&!SS&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),SS=!0);const n=i9(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,a);return s9(n),n}const AS=e=>{(BO?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?R8(e):e,a=(n,s)=>l9(t,n,s);return Object.assign(a,t),a},Cy=e=>e?AS(e):AS,c9={};function d9(e,t){let a;try{a=e()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),l=(i=a.getItem(s))!=null?i:null;return l instanceof Promise?l.then(o):o(l)},setItem:(s,i)=>a.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>a.removeItem(s)}}const cp=e=>t=>{try{const a=e(t);return a instanceof Promise?a:{then(n){return cp(n)(a)},catch(n){return this}}}catch(a){return{then(n){return this},catch(n){return cp(n)(a)}}}},u9=(e,t)=>(a,n,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:v=>v,version:0,merge:(v,b)=>({...b,...v}),...t},o=!1;const l=new Set,c=new Set;let d;try{d=i.getStorage()}catch{}if(!d)return e((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),a(...v)},n,s);const u=cp(i.serialize),m=()=>{const v=i.partialize({...n()});let b;const y=u({state:v,version:i.version}).then(j=>d.setItem(i.name,j)).catch(j=>{b=j});if(b)throw b;return y},p=s.setState;s.setState=(v,b)=>{p(v,b),m()};const g=e((...v)=>{a(...v),m()},n,s);let x;const h=()=>{var v;if(!d)return;o=!1,l.forEach(y=>y(n()));const b=((v=i.onRehydrateStorage)==null?void 0:v.call(i,n()))||void 0;return cp(d.getItem.bind(d))(i.name).then(y=>{if(y)return i.deserialize(y)}).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==i.version){if(i.migrate)return i.migrate(y.state,y.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return y.state}).then(y=>{var j;return x=i.merge(y,(j=n())!=null?j:g),a(x,!0),m()}).then(()=>{b?.(x,void 0),o=!0,c.forEach(y=>y(x))}).catch(y=>{b?.(void 0,y)})};return s.persist={setOptions:v=>{i={...i,...v},v.getStorage&&(d=v.getStorage())},clearStorage:()=>{d?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>h(),hasHydrated:()=>o,onHydrate:v=>(l.add(v),()=>{l.delete(v)}),onFinishHydration:v=>(c.add(v),()=>{c.delete(v)})},h(),x||g},m9=(e,t)=>(a,n,s)=>{let i={storage:d9(()=>localStorage),partialize:h=>h,version:0,merge:(h,v)=>({...v,...h}),...t},o=!1;const l=new Set,c=new Set;let d=i.storage;if(!d)return e((...h)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),a(...h)},n,s);const u=()=>{const h=i.partialize({...n()});return d.setItem(i.name,{state:h,version:i.version})},m=s.setState;s.setState=(h,v)=>{m(h,v),u()};const p=e((...h)=>{a(...h),u()},n,s);s.getInitialState=()=>p;let g;const x=()=>{var h,v;if(!d)return;o=!1,l.forEach(y=>{var j;return y((j=n())!=null?j:p)});const b=((v=i.onRehydrateStorage)==null?void 0:v.call(i,(h=n())!=null?h:p))||void 0;return cp(d.getItem.bind(d))(i.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==i.version){if(i.migrate)return[!0,i.migrate(y.state,y.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,y.state];return[!1,void 0]}).then(y=>{var j;const[_,w]=y;if(g=i.merge(w,(j=n())!=null?j:p),a(g,!0),_)return u()}).then(()=>{b?.(g,void 0),g=n(),o=!0,c.forEach(y=>y(g))}).catch(y=>{b?.(void 0,y)})};return s.persist={setOptions:h=>{i={...i,...h},h.storage&&(d=h.storage)},clearStorage:()=>{d?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>x(),hasHydrated:()=>o,onHydrate:h=>(l.add(h),()=>{l.delete(h)}),onFinishHydration:h=>(c.add(h),()=>{c.delete(h)})},i.skipHydration||x(),g||p},p9=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((c9?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),u9(e,t)):m9(e,t),X1=p9;function WO(e,t){return function(){return e.apply(t,arguments)}}const{toString:f9}=Object.prototype,{getPrototypeOf:Q1}=Object,{iterator:Ey,toStringTag:UO}=Symbol,Ty=(e=>t=>{const a=f9.call(t);return e[a]||(e[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Ps=e=>(e=e.toLowerCase(),t=>Ty(t)===e),Oy=e=>t=>typeof t===e,{isArray:Vd}=Array,od=Oy("undefined");function rf(e){return e!==null&&!od(e)&&e.constructor!==null&&!od(e.constructor)&&mn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const HO=Ps("ArrayBuffer");function h9(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&HO(e.buffer),t}const g9=Oy("string"),mn=Oy("function"),KO=Oy("number"),af=e=>e!==null&&typeof e=="object",x9=e=>e===!0||e===!1,ig=e=>{if(Ty(e)!=="object")return!1;const t=Q1(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(UO in e)&&!(Ey in e)},y9=e=>{if(!af(e)||rf(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},v9=Ps("Date"),b9=Ps("File"),j9=Ps("Blob"),w9=Ps("FileList"),_9=e=>af(e)&&mn(e.pipe),k9=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||mn(e.append)&&((t=Ty(e))==="formdata"||t==="object"&&mn(e.toString)&&e.toString()==="[object FormData]"))},N9=Ps("URLSearchParams"),[S9,A9,P9,C9]=["ReadableStream","Request","Response","Headers"].map(Ps),E9=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function nf(e,t,{allOwnKeys:a=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),Vd(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{if(rf(e))return;const i=a?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(n=0;n<o;n++)l=i[n],t.call(null,e[l],l,e)}}function VO(e,t){if(rf(e))return null;t=t.toLowerCase();const a=Object.keys(e);let n=a.length,s;for(;n-- >0;)if(s=a[n],t===s.toLowerCase())return s;return null}const ol=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,GO=e=>!od(e)&&e!==ol;function pw(){const{caseless:e,skipUndefined:t}=GO(this)&&this||{},a={},n=(s,i)=>{const o=e&&VO(a,i)||i;ig(a[o])&&ig(s)?a[o]=pw(a[o],s):ig(s)?a[o]=pw({},s):Vd(s)?a[o]=s.slice():(!t||!od(s))&&(a[o]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&nf(arguments[s],n);return a}const T9=(e,t,a,{allOwnKeys:n}={})=>(nf(t,(s,i)=>{a&&mn(s)?e[i]=WO(s,a):e[i]=s},{allOwnKeys:n}),e),O9=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),M9=(e,t,a,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),a&&Object.assign(e.prototype,a)},D9=(e,t,a,n)=>{let s,i,o;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)o=s[i],(!n||n(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=a!==!1&&Q1(e)}while(e&&(!a||a(e,t))&&e!==Object.prototype);return t},I9=(e,t,a)=>{e=String(e),(a===void 0||a>e.length)&&(a=e.length),a-=t.length;const n=e.indexOf(t,a);return n!==-1&&n===a},L9=e=>{if(!e)return null;if(Vd(e))return e;let t=e.length;if(!KO(t))return null;const a=new Array(t);for(;t-- >0;)a[t]=e[t];return a},$9=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Q1(Uint8Array)),R9=(e,t)=>{const n=(e&&e[Ey]).call(e);let s;for(;(s=n.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},q9=(e,t)=>{let a;const n=[];for(;(a=e.exec(t))!==null;)n.push(a);return n},F9=Ps("HTMLFormElement"),z9=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,n,s){return n.toUpperCase()+s}),PS=(({hasOwnProperty:e})=>(t,a)=>e.call(t,a))(Object.prototype),B9=Ps("RegExp"),YO=(e,t)=>{const a=Object.getOwnPropertyDescriptors(e),n={};nf(a,(s,i)=>{let o;(o=t(s,i,e))!==!1&&(n[i]=o||s)}),Object.defineProperties(e,n)},W9=e=>{YO(e,(t,a)=>{if(mn(e)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const n=e[a];if(mn(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},U9=(e,t)=>{const a={},n=s=>{s.forEach(i=>{a[i]=!0})};return Vd(e)?n(e):n(String(e).split(t)),a},H9=()=>{},K9=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function V9(e){return!!(e&&mn(e.append)&&e[UO]==="FormData"&&e[Ey])}const G9=e=>{const t=new Array(10),a=(n,s)=>{if(af(n)){if(t.indexOf(n)>=0)return;if(rf(n))return n;if(!("toJSON"in n)){t[s]=n;const i=Vd(n)?[]:{};return nf(n,(o,l)=>{const c=a(o,s+1);!od(c)&&(i[l]=c)}),t[s]=void 0,i}}return n};return a(e,0)},Y9=Ps("AsyncFunction"),Z9=e=>e&&(af(e)||mn(e))&&mn(e.then)&&mn(e.catch),ZO=((e,t)=>e?setImmediate:t?((a,n)=>(ol.addEventListener("message",({source:s,data:i})=>{s===ol&&i===a&&n.length&&n.shift()()},!1),s=>{n.push(s),ol.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",mn(ol.postMessage)),X9=typeof queueMicrotask<"u"?queueMicrotask.bind(ol):typeof process<"u"&&process.nextTick||ZO,Q9=e=>e!=null&&mn(e[Ey]),Pe={isArray:Vd,isArrayBuffer:HO,isBuffer:rf,isFormData:k9,isArrayBufferView:h9,isString:g9,isNumber:KO,isBoolean:x9,isObject:af,isPlainObject:ig,isEmptyObject:y9,isReadableStream:S9,isRequest:A9,isResponse:P9,isHeaders:C9,isUndefined:od,isDate:v9,isFile:b9,isBlob:j9,isRegExp:B9,isFunction:mn,isStream:_9,isURLSearchParams:N9,isTypedArray:$9,isFileList:w9,forEach:nf,merge:pw,extend:T9,trim:E9,stripBOM:O9,inherits:M9,toFlatObject:D9,kindOf:Ty,kindOfTest:Ps,endsWith:I9,toArray:L9,forEachEntry:R9,matchAll:q9,isHTMLForm:F9,hasOwnProperty:PS,hasOwnProp:PS,reduceDescriptors:YO,freezeMethods:W9,toObjectSet:U9,toCamelCase:z9,noop:H9,toFiniteNumber:K9,findKey:VO,global:ol,isContextDefined:GO,isSpecCompliantForm:V9,toJSONObject:G9,isAsyncFn:Y9,isThenable:Z9,setImmediate:ZO,asap:X9,isIterable:Q9};function kt(e,t,a,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),a&&(this.config=a),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}Pe.inherits(kt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Pe.toJSONObject(this.config),code:this.code,status:this.status}}});const XO=kt.prototype,QO={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{QO[e]={value:e}});Object.defineProperties(kt,QO);Object.defineProperty(XO,"isAxiosError",{value:!0});kt.from=(e,t,a,n,s,i)=>{const o=Object.create(XO);Pe.toFlatObject(e,o,function(u){return u!==Error.prototype},d=>d!=="isAxiosError");const l=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return kt.call(o,l,c,a,n,s),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const J9=null;function fw(e){return Pe.isPlainObject(e)||Pe.isArray(e)}function JO(e){return Pe.endsWith(e,"[]")?e.slice(0,-2):e}function CS(e,t,a){return e?e.concat(t).map(function(s,i){return s=JO(s),!a&&i?"["+s+"]":s}).join(a?".":""):t}function e7(e){return Pe.isArray(e)&&!e.some(fw)}const t7=Pe.toFlatObject(Pe,{},null,function(t){return/^is[A-Z]/.test(t)});function My(e,t,a){if(!Pe.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,a=Pe.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,v){return!Pe.isUndefined(v[h])});const n=a.metaTokens,s=a.visitor||u,i=a.dots,o=a.indexes,c=(a.Blob||typeof Blob<"u"&&Blob)&&Pe.isSpecCompliantForm(t);if(!Pe.isFunction(s))throw new TypeError("visitor must be a function");function d(x){if(x===null)return"";if(Pe.isDate(x))return x.toISOString();if(Pe.isBoolean(x))return x.toString();if(!c&&Pe.isBlob(x))throw new kt("Blob is not supported. Use a Buffer instead.");return Pe.isArrayBuffer(x)||Pe.isTypedArray(x)?c&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function u(x,h,v){let b=x;if(x&&!v&&typeof x=="object"){if(Pe.endsWith(h,"{}"))h=n?h:h.slice(0,-2),x=JSON.stringify(x);else if(Pe.isArray(x)&&e7(x)||(Pe.isFileList(x)||Pe.endsWith(h,"[]"))&&(b=Pe.toArray(x)))return h=JO(h),b.forEach(function(j,_){!(Pe.isUndefined(j)||j===null)&&t.append(o===!0?CS([h],_,i):o===null?h:h+"[]",d(j))}),!1}return fw(x)?!0:(t.append(CS(v,h,i),d(x)),!1)}const m=[],p=Object.assign(t7,{defaultVisitor:u,convertValue:d,isVisitable:fw});function g(x,h){if(!Pe.isUndefined(x)){if(m.indexOf(x)!==-1)throw Error("Circular reference detected in "+h.join("."));m.push(x),Pe.forEach(x,function(b,y){(!(Pe.isUndefined(b)||b===null)&&s.call(t,b,Pe.isString(y)?y.trim():y,h,p))===!0&&g(b,h?h.concat(y):[y])}),m.pop()}}if(!Pe.isObject(e))throw new TypeError("data must be an object");return g(e),t}function ES(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function J1(e,t){this._pairs=[],e&&My(e,this,t)}const e5=J1.prototype;e5.append=function(t,a){this._pairs.push([t,a])};e5.toString=function(t){const a=t?function(n){return t.call(this,n,ES)}:ES;return this._pairs.map(function(s){return a(s[0])+"="+a(s[1])},"").join("&")};function r7(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function t5(e,t,a){if(!t)return e;const n=a&&a.encode||r7;Pe.isFunction(a)&&(a={serialize:a});const s=a&&a.serialize;let i;if(s?i=s(t,a):i=Pe.isURLSearchParams(t)?t.toString():new J1(t,a).toString(n),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class TS{constructor(){this.handlers=[]}use(t,a,n){return this.handlers.push({fulfilled:t,rejected:a,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Pe.forEach(this.handlers,function(n){n!==null&&t(n)})}}const r5={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},a7=typeof URLSearchParams<"u"?URLSearchParams:J1,n7=typeof FormData<"u"?FormData:null,s7=typeof Blob<"u"?Blob:null,i7={isBrowser:!0,classes:{URLSearchParams:a7,FormData:n7,Blob:s7},protocols:["http","https","file","blob","url","data"]},ek=typeof window<"u"&&typeof document<"u",hw=typeof navigator=="object"&&navigator||void 0,o7=ek&&(!hw||["ReactNative","NativeScript","NS"].indexOf(hw.product)<0),l7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",c7=ek&&window.location.href||"http://localhost",d7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ek,hasStandardBrowserEnv:o7,hasStandardBrowserWebWorkerEnv:l7,navigator:hw,origin:c7},Symbol.toStringTag,{value:"Module"})),La={...d7,...i7};function u7(e,t){return My(e,new La.classes.URLSearchParams,{visitor:function(a,n,s,i){return La.isNode&&Pe.isBuffer(a)?(this.append(n,a.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function m7(e){return Pe.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function p7(e){const t={},a=Object.keys(e);let n;const s=a.length;let i;for(n=0;n<s;n++)i=a[n],t[i]=e[i];return t}function a5(e){function t(a,n,s,i){let o=a[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=a.length;return o=!o&&Pe.isArray(s)?s.length:o,c?(Pe.hasOwnProp(s,o)?s[o]=[s[o],n]:s[o]=n,!l):((!s[o]||!Pe.isObject(s[o]))&&(s[o]=[]),t(a,n,s[o],i)&&Pe.isArray(s[o])&&(s[o]=p7(s[o])),!l)}if(Pe.isFormData(e)&&Pe.isFunction(e.entries)){const a={};return Pe.forEachEntry(e,(n,s)=>{t(m7(n),s,a,0)}),a}return null}function f7(e,t,a){if(Pe.isString(e))try{return(t||JSON.parse)(e),Pe.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(a||JSON.stringify)(e)}const sf={transitional:r5,adapter:["xhr","http","fetch"],transformRequest:[function(t,a){const n=a.getContentType()||"",s=n.indexOf("application/json")>-1,i=Pe.isObject(t);if(i&&Pe.isHTMLForm(t)&&(t=new FormData(t)),Pe.isFormData(t))return s?JSON.stringify(a5(t)):t;if(Pe.isArrayBuffer(t)||Pe.isBuffer(t)||Pe.isStream(t)||Pe.isFile(t)||Pe.isBlob(t)||Pe.isReadableStream(t))return t;if(Pe.isArrayBufferView(t))return t.buffer;if(Pe.isURLSearchParams(t))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return u7(t,this.formSerializer).toString();if((l=Pe.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return My(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||s?(a.setContentType("application/json",!1),f7(t)):t}],transformResponse:[function(t){const a=this.transitional||sf.transitional,n=a&&a.forcedJSONParsing,s=this.responseType==="json";if(Pe.isResponse(t)||Pe.isReadableStream(t))return t;if(t&&Pe.isString(t)&&(n&&!this.responseType||s)){const o=!(a&&a.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?kt.from(l,kt.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:La.classes.FormData,Blob:La.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Pe.forEach(["delete","get","head","post","put","patch"],e=>{sf.headers[e]={}});const h7=Pe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),g7=e=>{const t={};let a,n,s;return e&&e.split(`
`).forEach(function(o){s=o.indexOf(":"),a=o.substring(0,s).trim().toLowerCase(),n=o.substring(s+1).trim(),!(!a||t[a]&&h7[a])&&(a==="set-cookie"?t[a]?t[a].push(n):t[a]=[n]:t[a]=t[a]?t[a]+", "+n:n)}),t},OS=Symbol("internals");function Wu(e){return e&&String(e).trim().toLowerCase()}function og(e){return e===!1||e==null?e:Pe.isArray(e)?e.map(og):String(e)}function x7(e){const t=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=a.exec(e);)t[n[1]]=n[2];return t}const y7=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function rb(e,t,a,n,s){if(Pe.isFunction(n))return n.call(this,t,a);if(s&&(t=a),!!Pe.isString(t)){if(Pe.isString(n))return t.indexOf(n)!==-1;if(Pe.isRegExp(n))return n.test(t)}}function v7(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,a,n)=>a.toUpperCase()+n)}function b7(e,t){const a=Pe.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+a,{value:function(s,i,o){return this[n].call(this,t,s,i,o)},configurable:!0})})}let pn=class{constructor(t){t&&this.set(t)}set(t,a,n){const s=this;function i(l,c,d){const u=Wu(c);if(!u)throw new Error("header name must be a non-empty string");const m=Pe.findKey(s,u);(!m||s[m]===void 0||d===!0||d===void 0&&s[m]!==!1)&&(s[m||c]=og(l))}const o=(l,c)=>Pe.forEach(l,(d,u)=>i(d,u,c));if(Pe.isPlainObject(t)||t instanceof this.constructor)o(t,a);else if(Pe.isString(t)&&(t=t.trim())&&!y7(t))o(g7(t),a);else if(Pe.isObject(t)&&Pe.isIterable(t)){let l={},c,d;for(const u of t){if(!Pe.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?Pe.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(l,a)}else t!=null&&i(a,t,n);return this}get(t,a){if(t=Wu(t),t){const n=Pe.findKey(this,t);if(n){const s=this[n];if(!a)return s;if(a===!0)return x7(s);if(Pe.isFunction(a))return a.call(this,s,n);if(Pe.isRegExp(a))return a.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,a){if(t=Wu(t),t){const n=Pe.findKey(this,t);return!!(n&&this[n]!==void 0&&(!a||rb(this,this[n],n,a)))}return!1}delete(t,a){const n=this;let s=!1;function i(o){if(o=Wu(o),o){const l=Pe.findKey(n,o);l&&(!a||rb(n,n[l],l,a))&&(delete n[l],s=!0)}}return Pe.isArray(t)?t.forEach(i):i(t),s}clear(t){const a=Object.keys(this);let n=a.length,s=!1;for(;n--;){const i=a[n];(!t||rb(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const a=this,n={};return Pe.forEach(this,(s,i)=>{const o=Pe.findKey(n,i);if(o){a[o]=og(s),delete a[i];return}const l=t?v7(i):String(i).trim();l!==i&&delete a[i],a[l]=og(s),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const a=Object.create(null);return Pe.forEach(this,(n,s)=>{n!=null&&n!==!1&&(a[s]=t&&Pe.isArray(n)?n.join(", "):n)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,a])=>t+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...a){const n=new this(t);return a.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[OS]=this[OS]={accessors:{}}).accessors,s=this.prototype;function i(o){const l=Wu(o);n[l]||(b7(s,o),n[l]=!0)}return Pe.isArray(t)?t.forEach(i):i(t),this}};pn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Pe.reduceDescriptors(pn.prototype,({value:e},t)=>{let a=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[a]=n}}});Pe.freezeMethods(pn);function ab(e,t){const a=this||sf,n=t||a,s=pn.from(n.headers);let i=n.data;return Pe.forEach(e,function(l){i=l.call(a,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function n5(e){return!!(e&&e.__CANCEL__)}function Gd(e,t,a){kt.call(this,e??"canceled",kt.ERR_CANCELED,t,a),this.name="CanceledError"}Pe.inherits(Gd,kt,{__CANCEL__:!0});function s5(e,t,a){const n=a.config.validateStatus;!a.status||!n||n(a.status)?e(a):t(new kt("Request failed with status code "+a.status,[kt.ERR_BAD_REQUEST,kt.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function j7(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function w7(e,t){e=e||10;const a=new Array(e),n=new Array(e);let s=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=n[i];o||(o=d),a[s]=c,n[s]=d;let m=i,p=0;for(;m!==s;)p+=a[m++],m=m%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),d-o<t)return;const g=u&&d-u;return g?Math.round(p*1e3/g):void 0}}function _7(e,t){let a=0,n=1e3/t,s,i;const o=(d,u=Date.now())=>{a=u,s=null,i&&(clearTimeout(i),i=null),e(...d)};return[(...d)=>{const u=Date.now(),m=u-a;m>=n?o(d,u):(s=d,i||(i=setTimeout(()=>{i=null,o(s)},n-m)))},()=>s&&o(s)]}const Fg=(e,t,a=3)=>{let n=0;const s=w7(50,250);return _7(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-n,d=s(c),u=o<=l;n=o;const m={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(m)},a)},MS=(e,t)=>{const a=e!=null;return[n=>t[0]({lengthComputable:a,total:e,loaded:n}),t[1]]},DS=e=>(...t)=>Pe.asap(()=>e(...t)),k7=La.hasStandardBrowserEnv?((e,t)=>a=>(a=new URL(a,La.origin),e.protocol===a.protocol&&e.host===a.host&&(t||e.port===a.port)))(new URL(La.origin),La.navigator&&/(msie|trident)/i.test(La.navigator.userAgent)):()=>!0,N7=La.hasStandardBrowserEnv?{write(e,t,a,n,s,i,o){if(typeof document>"u")return;const l=[`${e}=${encodeURIComponent(t)}`];Pe.isNumber(a)&&l.push(`expires=${new Date(a).toUTCString()}`),Pe.isString(n)&&l.push(`path=${n}`),Pe.isString(s)&&l.push(`domain=${s}`),i===!0&&l.push("secure"),Pe.isString(o)&&l.push(`SameSite=${o}`),document.cookie=l.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function S7(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function A7(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function i5(e,t,a){let n=!S7(t);return e&&(n||a==!1)?A7(e,t):t}const IS=e=>e instanceof pn?{...e}:e;function Cl(e,t){t=t||{};const a={};function n(d,u,m,p){return Pe.isPlainObject(d)&&Pe.isPlainObject(u)?Pe.merge.call({caseless:p},d,u):Pe.isPlainObject(u)?Pe.merge({},u):Pe.isArray(u)?u.slice():u}function s(d,u,m,p){if(Pe.isUndefined(u)){if(!Pe.isUndefined(d))return n(void 0,d,m,p)}else return n(d,u,m,p)}function i(d,u){if(!Pe.isUndefined(u))return n(void 0,u)}function o(d,u){if(Pe.isUndefined(u)){if(!Pe.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function l(d,u,m){if(m in t)return n(d,u);if(m in e)return n(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,u,m)=>s(IS(d),IS(u),m,!0)};return Pe.forEach(Object.keys({...e,...t}),function(u){const m=c[u]||s,p=m(e[u],t[u],u);Pe.isUndefined(p)&&m!==l||(a[u]=p)}),a}const o5=e=>{const t=Cl({},e);let{data:a,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=pn.from(o),t.url=t5(i5(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Pe.isFormData(a)){if(La.hasStandardBrowserEnv||La.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Pe.isFunction(a.getHeaders)){const c=a.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,m])=>{d.includes(u.toLowerCase())&&o.set(u,m)})}}if(La.hasStandardBrowserEnv&&(n&&Pe.isFunction(n)&&(n=n(t)),n||n!==!1&&k7(t.url))){const c=s&&i&&N7.read(i);c&&o.set(s,c)}return t},P7=typeof XMLHttpRequest<"u",C7=P7&&function(e){return new Promise(function(a,n){const s=o5(e);let i=s.data;const o=pn.from(s.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=s,u,m,p,g,x;function h(){g&&g(),x&&x(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let v=new XMLHttpRequest;v.open(s.method.toUpperCase(),s.url,!0),v.timeout=s.timeout;function b(){if(!v)return;const j=pn.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),w={data:!l||l==="text"||l==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:j,config:e,request:v};s5(function(N){a(N),h()},function(N){n(N),h()},w),v=null}"onloadend"in v?v.onloadend=b:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(b)},v.onabort=function(){v&&(n(new kt("Request aborted",kt.ECONNABORTED,e,v)),v=null)},v.onerror=function(_){const w=_&&_.message?_.message:"Network Error",k=new kt(w,kt.ERR_NETWORK,e,v);k.event=_||null,n(k),v=null},v.ontimeout=function(){let _=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const w=s.transitional||r5;s.timeoutErrorMessage&&(_=s.timeoutErrorMessage),n(new kt(_,w.clarifyTimeoutError?kt.ETIMEDOUT:kt.ECONNABORTED,e,v)),v=null},i===void 0&&o.setContentType(null),"setRequestHeader"in v&&Pe.forEach(o.toJSON(),function(_,w){v.setRequestHeader(w,_)}),Pe.isUndefined(s.withCredentials)||(v.withCredentials=!!s.withCredentials),l&&l!=="json"&&(v.responseType=s.responseType),d&&([p,x]=Fg(d,!0),v.addEventListener("progress",p)),c&&v.upload&&([m,g]=Fg(c),v.upload.addEventListener("progress",m),v.upload.addEventListener("loadend",g)),(s.cancelToken||s.signal)&&(u=j=>{v&&(n(!j||j.type?new Gd(null,e,v):j),v.abort(),v=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const y=j7(s.url);if(y&&La.protocols.indexOf(y)===-1){n(new kt("Unsupported protocol "+y+":",kt.ERR_BAD_REQUEST,e));return}v.send(i||null)})},E7=(e,t)=>{const{length:a}=e=e?e.filter(Boolean):[];if(t||a){let n=new AbortController,s;const i=function(d){if(!s){s=!0,l();const u=d instanceof Error?d:this.reason;n.abort(u instanceof kt?u:new Gd(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new kt(`timeout ${t} of ms exceeded`,kt.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>Pe.asap(l),c}},T7=function*(e,t){let a=e.byteLength;if(a<t){yield e;return}let n=0,s;for(;n<a;)s=n+t,yield e.slice(n,s),n=s},O7=async function*(e,t){for await(const a of M7(e))yield*T7(a,t)},M7=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:a,value:n}=await t.read();if(a)break;yield n}}finally{await t.cancel()}},LS=(e,t,a,n)=>{const s=O7(e,t);let i=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await s.next();if(d){l(),c.close();return}let m=u.byteLength;if(a){let p=i+=m;a(p)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),s.return()}},{highWaterMark:2})},$S=64*1024,{isFunction:oh}=Pe,D7=(({Request:e,Response:t})=>({Request:e,Response:t}))(Pe.global),{ReadableStream:RS,TextEncoder:qS}=Pe.global,FS=(e,...t)=>{try{return!!e(...t)}catch{return!1}},I7=e=>{e=Pe.merge.call({skipUndefined:!0},D7,e);const{fetch:t,Request:a,Response:n}=e,s=t?oh(t):typeof fetch=="function",i=oh(a),o=oh(n);if(!s)return!1;const l=s&&oh(RS),c=s&&(typeof qS=="function"?(x=>h=>x.encode(h))(new qS):async x=>new Uint8Array(await new a(x).arrayBuffer())),d=i&&l&&FS(()=>{let x=!1;const h=new a(La.origin,{body:new RS,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!h}),u=o&&l&&FS(()=>Pe.isReadableStream(new n("").body)),m={stream:u&&(x=>x.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!m[x]&&(m[x]=(h,v)=>{let b=h&&h[x];if(b)return b.call(h);throw new kt(`Response type '${x}' is not supported`,kt.ERR_NOT_SUPPORT,v)})});const p=async x=>{if(x==null)return 0;if(Pe.isBlob(x))return x.size;if(Pe.isSpecCompliantForm(x))return(await new a(La.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(Pe.isArrayBufferView(x)||Pe.isArrayBuffer(x))return x.byteLength;if(Pe.isURLSearchParams(x)&&(x=x+""),Pe.isString(x))return(await c(x)).byteLength},g=async(x,h)=>{const v=Pe.toFiniteNumber(x.getContentLength());return v??p(h)};return async x=>{let{url:h,method:v,data:b,signal:y,cancelToken:j,timeout:_,onDownloadProgress:w,onUploadProgress:k,responseType:N,headers:P,withCredentials:A="same-origin",fetchOptions:M}=o5(x),R=t||fetch;N=N?(N+"").toLowerCase():"text";let O=E7([y,j&&j.toAbortSignal()],_),q=null;const S=O&&O.unsubscribe&&(()=>{O.unsubscribe()});let I;try{if(k&&d&&v!=="get"&&v!=="head"&&(I=await g(P,b))!==0){let z=new a(h,{method:"POST",body:b,duplex:"half"}),L;if(Pe.isFormData(b)&&(L=z.headers.get("content-type"))&&P.setContentType(L),z.body){const[X,H]=MS(I,Fg(DS(k)));b=LS(z.body,$S,X,H)}}Pe.isString(A)||(A=A?"include":"omit");const E=i&&"credentials"in a.prototype,W={...M,signal:O,method:v.toUpperCase(),headers:P.normalize().toJSON(),body:b,duplex:"half",credentials:E?A:void 0};q=i&&new a(h,W);let B=await(i?R(q,M):R(h,W));const C=u&&(N==="stream"||N==="response");if(u&&(w||C&&S)){const z={};["status","statusText","headers"].forEach(F=>{z[F]=B[F]});const L=Pe.toFiniteNumber(B.headers.get("content-length")),[X,H]=w&&MS(L,Fg(DS(w),!0))||[];B=new n(LS(B.body,$S,X,()=>{H&&H(),S&&S()}),z)}N=N||"text";let D=await m[Pe.findKey(m,N)||"text"](B,x);return!C&&S&&S(),await new Promise((z,L)=>{s5(z,L,{data:D,headers:pn.from(B.headers),status:B.status,statusText:B.statusText,config:x,request:q})})}catch(E){throw S&&S(),E&&E.name==="TypeError"&&/Load failed|fetch/i.test(E.message)?Object.assign(new kt("Network Error",kt.ERR_NETWORK,x,q),{cause:E.cause||E}):kt.from(E,E&&E.code,x,q)}}},L7=new Map,l5=e=>{let t=e&&e.env||{};const{fetch:a,Request:n,Response:s}=t,i=[n,s,a];let o=i.length,l=o,c,d,u=L7;for(;l--;)c=i[l],d=u.get(c),d===void 0&&u.set(c,d=l?new Map:I7(t)),u=d;return d};l5();const tk={http:J9,xhr:C7,fetch:{get:l5}};Pe.forEach(tk,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const zS=e=>`- ${e}`,$7=e=>Pe.isFunction(e)||e===null||e===!1;function R7(e,t){e=Pe.isArray(e)?e:[e];const{length:a}=e;let n,s;const i={};for(let o=0;o<a;o++){n=e[o];let l;if(s=n,!$7(n)&&(s=tk[(l=String(n)).toLowerCase()],s===void 0))throw new kt(`Unknown adapter '${l}'`);if(s&&(Pe.isFunction(s)||(s=s.get(t))))break;i[l||"#"+o]=s}if(!s){const o=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=a?o.length>1?`since :
`+o.map(zS).join(`
`):" "+zS(o[0]):"as no adapter specified";throw new kt("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return s}const c5={getAdapter:R7,adapters:tk};function nb(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Gd(null,e)}function BS(e){return nb(e),e.headers=pn.from(e.headers),e.data=ab.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),c5.getAdapter(e.adapter||sf.adapter,e)(e).then(function(n){return nb(e),n.data=ab.call(e,e.transformResponse,n),n.headers=pn.from(n.headers),n},function(n){return n5(n)||(nb(e),n&&n.response&&(n.response.data=ab.call(e,e.transformResponse,n.response),n.response.headers=pn.from(n.response.headers))),Promise.reject(n)})}const d5="1.13.2",Dy={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Dy[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const WS={};Dy.transitional=function(t,a,n){function s(i,o){return"[Axios v"+d5+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,l)=>{if(t===!1)throw new kt(s(o," has been removed"+(a?" in "+a:"")),kt.ERR_DEPRECATED);return a&&!WS[o]&&(WS[o]=!0,console.warn(s(o," has been deprecated since v"+a+" and will be removed in the near future"))),t?t(i,o,l):!0}};Dy.spelling=function(t){return(a,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function q7(e,t,a){if(typeof e!="object")throw new kt("options must be an object",kt.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const i=n[s],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new kt("option "+i+" must be "+c,kt.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new kt("Unknown option "+i,kt.ERR_BAD_OPTION)}}const lg={assertOptions:q7,validators:Dy},Ls=lg.validators;let yl=class{constructor(t){this.defaults=t||{},this.interceptors={request:new TS,response:new TS}}async request(t,a){try{return await this._request(t,a)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,a){typeof t=="string"?(a=a||{},a.url=t):a=t||{},a=Cl(this.defaults,a);const{transitional:n,paramsSerializer:s,headers:i}=a;n!==void 0&&lg.assertOptions(n,{silentJSONParsing:Ls.transitional(Ls.boolean),forcedJSONParsing:Ls.transitional(Ls.boolean),clarifyTimeoutError:Ls.transitional(Ls.boolean)},!1),s!=null&&(Pe.isFunction(s)?a.paramsSerializer={serialize:s}:lg.assertOptions(s,{encode:Ls.function,serialize:Ls.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),lg.assertOptions(a,{baseUrl:Ls.spelling("baseURL"),withXsrfToken:Ls.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let o=i&&Pe.merge(i.common,i[a.method]);i&&Pe.forEach(["delete","get","head","post","put","patch","common"],x=>{delete i[x]}),a.headers=pn.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(a)===!1||(c=c&&h.synchronous,l.unshift(h.fulfilled,h.rejected))});const d=[];this.interceptors.response.forEach(function(h){d.push(h.fulfilled,h.rejected)});let u,m=0,p;if(!c){const x=[BS.bind(this),void 0];for(x.unshift(...l),x.push(...d),p=x.length,u=Promise.resolve(a);m<p;)u=u.then(x[m++],x[m++]);return u}p=l.length;let g=a;for(;m<p;){const x=l[m++],h=l[m++];try{g=x(g)}catch(v){h.call(this,v);break}}try{u=BS.call(this,g)}catch(x){return Promise.reject(x)}for(m=0,p=d.length;m<p;)u=u.then(d[m++],d[m++]);return u}getUri(t){t=Cl(this.defaults,t);const a=i5(t.baseURL,t.url,t.allowAbsoluteUrls);return t5(a,t.params,t.paramsSerializer)}};Pe.forEach(["delete","get","head","options"],function(t){yl.prototype[t]=function(a,n){return this.request(Cl(n||{},{method:t,url:a,data:(n||{}).data}))}});Pe.forEach(["post","put","patch"],function(t){function a(n){return function(i,o,l){return this.request(Cl(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}yl.prototype[t]=a(),yl.prototype[t+"Form"]=a(!0)});let F7=class u5{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(i){a=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(l=>{n.subscribe(l),i=l}).then(s);return o.cancel=function(){n.unsubscribe(i)},o},t(function(i,o,l){n.reason||(n.reason=new Gd(i,o,l),a(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const a=this._listeners.indexOf(t);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const t=new AbortController,a=n=>{t.abort(n)};return this.subscribe(a),t.signal.unsubscribe=()=>this.unsubscribe(a),t.signal}static source(){let t;return{token:new u5(function(s){t=s}),cancel:t}}};function z7(e){return function(a){return e.apply(null,a)}}function B7(e){return Pe.isObject(e)&&e.isAxiosError===!0}const gw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(gw).forEach(([e,t])=>{gw[t]=e});function m5(e){const t=new yl(e),a=WO(yl.prototype.request,t);return Pe.extend(a,yl.prototype,t,{allOwnKeys:!0}),Pe.extend(a,t,null,{allOwnKeys:!0}),a.create=function(s){return m5(Cl(e,s))},a}const Dr=m5(sf);Dr.Axios=yl;Dr.CanceledError=Gd;Dr.CancelToken=F7;Dr.isCancel=n5;Dr.VERSION=d5;Dr.toFormData=My;Dr.AxiosError=kt;Dr.Cancel=Dr.CanceledError;Dr.all=function(t){return Promise.all(t)};Dr.spread=z7;Dr.isAxiosError=B7;Dr.mergeConfig=Cl;Dr.AxiosHeaders=pn;Dr.formToJSON=e=>a5(Pe.isHTMLForm(e)?new FormData(e):e);Dr.getAdapter=c5.getAdapter;Dr.HttpStatusCode=gw;Dr.default=Dr;const{Axios:T1e,AxiosError:O1e,CanceledError:M1e,isCancel:D1e,CancelToken:I1e,VERSION:L1e,all:$1e,Cancel:R1e,isAxiosError:q1e,spread:F1e,toFormData:z1e,AxiosHeaders:B1e,HttpStatusCode:W1e,formToJSON:U1e,getAdapter:H1e,mergeConfig:K1e}=Dr,rk="bug_report_recorder_v1",US=200,HS=2e3,W7=10*60*1e3,U7=["password","pass","pwd","token","access_token","refresh_token","authorization","auth","secret","api_key","apikey","cookie","cookies","set-cookie"],El=()=>new Date().toISOString(),p5=e=>{try{return e instanceof Error?e.stack||e.message||String(e):typeof e=="string"?e:JSON.stringify(e)}catch{try{return String(e)}catch{return"[unserializable]"}}},KS=e=>!e||typeof e!="object"||Array.isArray(e)?!1:Object.getPrototypeOf(e)===Object.prototype,H7=e=>{if(!e)return!1;const t=String(e).toLowerCase();return U7.some(a=>t===a||t.includes(a))},Hc=e=>{const t=String(e);return t.length<=HS?t:t.slice(0,HS)+""},Ys=(e,t=0)=>{try{if(t>6)return"[MAX_DEPTH]";if(e==null)return null;if(typeof e=="string")return Hc(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Date)return e.toISOString();if(e instanceof Error)return Hc(e.stack||e.message||String(e));if(typeof FormData<"u"&&e instanceof FormData)return"[FormData]";if(typeof Blob<"u"&&e instanceof Blob)return`[Blob size=${e.size}]`;if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return`[ArrayBuffer byteLength=${e.byteLength}]`;if(Array.isArray(e)){const a=e.slice(0,200).map(n=>Ys(n,t+1));return e.length>200&&a.push("[TRUNCATED_ARRAY]"),a}if(KS(e)||typeof e=="object"){const a=KS(e)?e:{...e},n=Object.keys(a),s={};for(const i of n.slice(0,200)){if(H7(i)){s[i]="[REDACTED]";continue}s[i]=Ys(a[i],t+1)}return n.length>200&&(s.__truncated__=!0),s}return Hc(p5(e))}catch{return"[SANITIZE_ERROR]"}},Iy=(e,t)=>{const a=Array.isArray(e)?e.slice():[];return a.push(t),a.length>US?a.slice(a.length-US):a},Ly=()=>({isRecording:!1,startedAt:null,endedAt:null,durationSeconds:null,comment:null,consoleLogs:[],networkLogs:[],routeLogs:[],metadata:{},uploads:[]});let yt=Ly(),sb=null,zg=!1,of=null;const Bg={warn:console.warn,error:console.error},lf=()=>{typeof window>"u"||sb||(sb=window.setTimeout(()=>{sb=null,ak()},300))},ak=()=>{try{if(typeof window>"u")return;window.sessionStorage.setItem(rk,JSON.stringify(yt))}catch{}},K7=()=>{try{if(typeof window>"u")return null;const e=window.sessionStorage.getItem(rk);if(!e)return null;const t=JSON.parse(e);return t&&typeof t=="object"?t:null}catch{return null}},V7=()=>{try{if(typeof window>"u")return;window.sessionStorage.removeItem(rk)}catch{}},G7=()=>{try{const e=typeof navigator<"u"?navigator:null,t=e&&e.connection?e.connection:null;return Ys({userAgent:e?e.userAgent:null,locale:e?e.language:null,screen:typeof window<"u"?{width:window.screen?.width,height:window.screen?.height}:null,connection:t?{effectiveType:t.effectiveType,downlink:t.downlink,rtt:t.rtt,saveData:t.saveData}:null,timeZone:(()=>{try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return null}})()})}catch{return{}}},ib=e=>{const t=String(e||"");return!(!t||t.includes("/bug-reports"))},VS=(e,t)=>{if(!yt.isRecording)return;const a={ts:El(),level:e,message:Hc(t.map(n=>p5(n)).join(" ")),args:Ys(t)};yt.consoleLogs=Iy(yt.consoleLogs,a),lf()},f5=()=>{zg||(zg=!0,console.warn=(...e)=>{VS("warn",e),Bg.warn(...e)},console.error=(...e)=>{VS("error",e),Bg.error(...e)})},h5=()=>{zg&&(console.warn=Bg.warn,console.error=Bg.error,zg=!1)},Y7=()=>{const e=K7();if(e&&(yt={...Ly(),...e,consoleLogs:Array.isArray(e.consoleLogs)?e.consoleLogs:[],networkLogs:Array.isArray(e.networkLogs)?e.networkLogs:[],routeLogs:Array.isArray(e.routeLogs)?e.routeLogs:[],metadata:e.metadata&&typeof e.metadata=="object"?e.metadata:{},uploads:Array.isArray(e.uploads)?e.uploads:[]},yt.isRecording&&yt.startedAt)){const t=new Date(yt.startedAt).getTime();if(Number.isFinite(t)&&Date.now()-t>W7){g5();return}f5()}},Z7=({comment:e,user:t}={})=>{yt=Ly(),of=null,yt.isRecording=!0,yt.startedAt=El(),yt.comment=Hc(e||""),yt.metadata=Ys({browser:G7(),user:t?{id:t.id??null,name:t.name??null,role:t.role??null}:null}),f5(),ak()},g5=()=>{if(yt.isRecording){yt.isRecording=!1,yt.endedAt=El();try{const e=yt.startedAt?new Date(yt.startedAt).getTime():null,t=yt.endedAt?new Date(yt.endedAt).getTime():null;e&&t&&(yt.durationSeconds=Math.max(0,Math.min(600,Math.round((t-e)/1e3))))}catch{}h5(),ak()}},X7=()=>{yt=Ly(),of=null,h5(),V7()},Q7=()=>!!yt.isRecording,J7=e=>{if(!yt.isRecording)return;const t={ts:El(),route:Ys(e)};yt.routeLogs=Iy(yt.routeLogs,t),lf()},GS=e=>{yt.isRecording&&(yt.networkLogs=Iy(yt.networkLogs,Ys(e)),lf())};let YS=!1;const ez=(e,t,a)=>{try{if(!yt.isRecording)return;const n=e?.data;if(!n||typeof FormData>"u"||!(n instanceof FormData))return;const s=[];for(const[o,l]of n.entries())if(typeof File<"u"&&l instanceof File){s.push({field:o,file:l});continue}if(s.length===0)return;of=s[s.length-1].file;const i=s.map(o=>({ts:El(),field:o.field,name:o.file?.name??null,size:o.file?.size??null,type:o.file?.type??null,method:t,url:a}));yt.uploads=Iy(yt.uploads,i.length===1?i[0]:i),yt.metadata=Ys({...yt.metadata||{},uploads:yt.uploads}),lf()}catch{}},tz=(e,{isSensitiveUrl:t}={})=>{!e||YS||(YS=!0,e.interceptors.request.use(a=>{try{const n=a?.url,s=(a?.method||"get").toUpperCase();if(!ib(n)||typeof t=="function"&&t(n))return a;ez(a,s,n)}catch{}return a},a=>Promise.reject(a)),e.interceptors.response.use(a=>{try{const n=a?.config,s=n?.url,i=(n?.method||"get").toUpperCase();if(!ib(s)||typeof t=="function"&&t(s))return a;const o=n?.metadata||{},l=o.startTime,c=typeof l=="number"?Date.now()-l:null,d=a?.headers?.["content-type"]||a?.headers?.["Content-Type"],u=a?.data;GS({ts:El(),kind:"response",requestId:o.requestId||null,method:i,url:s,status:a?.status,durationMs:c,contentType:d,request:{params:n?.params,data:n?.data},response:{data:u}})}catch{}return a},a=>{try{const n=a?.config,s=n?.url,i=(n?.method||"get").toUpperCase();if(!ib(s)||typeof t=="function"&&t(s))return Promise.reject(a);const o=n?.metadata||{},l=o.startTime,c=typeof l=="number"?Date.now()-l:null,d=a?.response?.status,u=a?.response?.headers?.["content-type"]||a?.response?.headers?.["Content-Type"];GS({ts:El(),kind:"error",requestId:o.requestId||null,method:i,url:s,status:d,durationMs:c,contentType:u,message:Hc(a?.message||"Request failed"),request:{params:n?.params,data:n?.data},response:{data:a?.response?.data}})}catch{}return Promise.reject(a)}))},rz=()=>({comment:yt.comment,started_at:yt.startedAt,ended_at:yt.endedAt,duration_seconds:yt.durationSeconds,console_logs:yt.consoleLogs,network_logs:yt.networkLogs,route_logs:yt.routeLogs,metadata:Ys({...yt.metadata||{},uploads:yt.uploads})}),az=()=>of,nz=()=>{of=null,yt.uploads=[],yt.metadata=Ys({...yt.metadata||{},uploads:yt.uploads}),lf()},Ba={init:Y7,start:Z7,stop:g5,clear:X7,isRecording:Q7,trackRoute:J7,getDraft:rz,getLatestUploadedFile:az,clearLatestUploadedFile:nz,installAxiosInterceptors:tz},sz="/api",Bl=10*60*1e3,ll=new Map,x5=6e4,Cr=12e4,zs=new Map,Qa=()=>{try{const e=localStorage.getItem("hse-kpi-language");return String(e||"").trim().split(/[-_]/)[0]==="en"?"en":"fr"}catch{return"fr"}},y5=(e,t)=>`${e}:${JSON.stringify(t||{})}`,v5=(e,t)=>{const a=ll.get(e),n=t??a?.ttl??x5;return a&&Date.now()-a.timestamp<n?a.data:(ll.delete(e),null)},b5=(e,t,a)=>{if(ll.set(e,{data:t,ttl:a,timestamp:Date.now()}),ll.size>100){const n=ll.keys().next().value;ll.delete(n)}},ZS=()=>{ll.clear()},de=Dr.create({baseURL:sz,headers:{"Content-Type":"application/json",Accept:"application/json"},timeout:3e4}),iz=()=>{try{if(typeof crypto<"u"&&typeof crypto.randomUUID=="function")return crypto.randomUUID()}catch{}return`${Date.now()}-${Math.random().toString(16).slice(2)}`},j5=e=>{const t=String(e||"");return t.includes("/auth/login")||t.includes("/auth/reset-password")||t.includes("/auth/forgot-password")||t.includes("/auth/change-password")};de.interceptors.request.use(e=>(e.metadata={startTime:Date.now(),requestId:iz()},e),e=>Promise.reject(e));Ba.installAxiosInterceptors(de,{isSensitiveUrl:j5});const lh={getAll:e=>de.get("/trainings",{params:e}),getById:e=>de.get(`/trainings/${e}`),getPhoto:e=>de.get(`/trainings/${e}/photo`,{responseType:"blob"}),create:e=>{const t=new FormData;return Object.keys(e).forEach(a=>{const n=e[a];n!=null&&n!==""&&(typeof n=="boolean"?t.append(a,n?"1":"0"):t.append(a,n))}),de.post("/trainings",t,{headers:{"Content-Type":"multipart/form-data"}})},update:(e,t)=>{const a=new FormData;return a.append("_method","PUT"),Object.keys(t).forEach(n=>{const s=t[n];s!=null&&s!==""&&a.append(n,s)}),de.post(`/trainings/${e}`,a,{headers:{"Content-Type":"multipart/form-data"}})},delete:e=>de.delete(`/trainings/${e}`)},cc={getAll:e=>de.get("/worker-trainings",{params:e}),getOtherLabels:e=>de.get("/worker-trainings/other-labels",{params:e}),downloadMassTemplate:()=>de.get("/worker-trainings/mass/template",{params:{lang:Qa()},responseType:"blob"}),massImport:({excel:e,zip:t,progressId:a})=>{const n=new FormData;return e&&n.append("excel",e),t&&n.append("zip",t),a&&n.append("progress_id",a),de.post("/worker-trainings/mass/import",n,{headers:{"Content-Type":"multipart/form-data"},timeout:Bl,maxBodyLength:1/0,maxContentLength:1/0})},getById:e=>de.get(`/worker-trainings/${e}`),create:e=>{const t=new FormData;return Object.keys(e).forEach(a=>{const n=e[a];n!=null&&n!==""&&t.append(a,n)}),de.post("/worker-trainings",t,{headers:{"Content-Type":"multipart/form-data"}})},update:(e,t)=>{const a=new FormData;return a.append("_method","PUT"),Object.keys(t).forEach(n=>{const s=t[n];s!=null&&s!==""&&a.append(n,s)}),de.post(`/worker-trainings/${e}`,a,{headers:{"Content-Type":"multipart/form-data"}})},delete:e=>de.delete(`/worker-trainings/${e}`)},dc={getAll:e=>de.get("/worker-qualifications",{params:e}),downloadMassTemplate:()=>de.get("/worker-qualifications/mass/template",{params:{lang:Qa()},responseType:"blob"}),massImport:({excel:e,zip:t,progressId:a})=>{const n=new FormData;return e&&n.append("excel",e),t&&n.append("zip",t),a&&n.append("progress_id",a),de.post("/worker-qualifications/mass/import",n,{headers:{"Content-Type":"multipart/form-data"},timeout:Bl,maxBodyLength:1/0,maxContentLength:1/0})},getById:e=>de.get(`/worker-qualifications/${e}`),create:e=>{const t=new FormData;return Object.keys(e).forEach(a=>{const n=e[a];n!=null&&n!==""&&t.append(a,n)}),de.post("/worker-qualifications",t,{headers:{"Content-Type":"multipart/form-data"}})},update:(e,t)=>{const a=new FormData;return a.append("_method","PUT"),Object.keys(t).forEach(n=>{const s=t[n];s!=null&&s!==""&&a.append(n,s)}),de.post(`/worker-qualifications/${e}`,a,{headers:{"Content-Type":"multipart/form-data"}})},delete:e=>de.delete(`/worker-qualifications/${e}`)},uc={getAll:e=>de.get("/worker-medical-aptitudes",{params:e}),downloadMassTemplate:()=>de.get("/worker-medical-aptitudes/mass/template",{params:{lang:Qa()},responseType:"blob"}),massImport:({excel:e,zip:t,progressId:a})=>{const n=new FormData;return e&&n.append("excel",e),t&&n.append("zip",t),a&&n.append("progress_id",a),de.post("/worker-medical-aptitudes/mass/import",n,{headers:{"Content-Type":"multipart/form-data"},timeout:Bl,maxBodyLength:1/0,maxContentLength:1/0})},getById:e=>de.get(`/worker-medical-aptitudes/${e}`),create:e=>{const t=new FormData;return Object.keys(e).forEach(a=>{const n=e[a];if(n!=null&&n!==""){if(a==="able_to"&&Array.isArray(n)){n.forEach(s=>{s!=null&&String(s).trim()!==""&&t.append("able_to[]",s)});return}t.append(a,n)}}),de.post("/worker-medical-aptitudes",t,{headers:{"Content-Type":"multipart/form-data"}})},update:(e,t)=>{const a=new FormData;return a.append("_method","PUT"),Object.keys(t).forEach(n=>{const s=t[n];if(s!=null&&s!==""){if(n==="able_to"&&Array.isArray(s)){s.forEach(i=>{i!=null&&String(i).trim()!==""&&a.append("able_to[]",i)});return}a.append(n,s)}}),de.post(`/worker-medical-aptitudes/${e}`,a,{headers:{"Content-Type":"multipart/form-data"}})},delete:e=>de.delete(`/worker-medical-aptitudes/${e}`)},Uu={getAll:e=>de.get("/worker-sanctions",{params:e}),downloadMassTemplate:()=>de.get("/worker-sanctions/mass/template",{params:{lang:Qa()},responseType:"blob"}),massImport:({excel:e,zip:t,progressId:a})=>{const n=new FormData;return e&&n.append("excel",e),t&&n.append("zip",t),a&&n.append("progress_id",a),de.post("/worker-sanctions/mass/import",n,{headers:{"Content-Type":"multipart/form-data"},timeout:Bl,maxBodyLength:1/0,maxContentLength:1/0})},getById:e=>de.get(`/worker-sanctions/${e}`),create:e=>{const t=new FormData;return Object.keys(e).forEach(a=>{const n=e[a];n!=null&&n!==""&&t.append(a,n)}),de.post("/worker-sanctions",t,{headers:{"Content-Type":"multipart/form-data"}})},delete:e=>de.delete(`/worker-sanctions/${e}`)},Hu={getAll:e=>de.get("/awareness-sessions",{params:e}),getById:e=>de.get(`/awareness-sessions/${e}`),downloadTemplate:()=>de.get("/awareness-sessions/template",{params:{lang:Qa()},responseType:"blob"}),bulkImport:e=>de.post("/awareness-sessions/import",e,{headers:{"Content-Type":"multipart/form-data"},timeout:Bl,maxBodyLength:1/0,maxContentLength:1/0}),create:e=>de.post("/awareness-sessions",e),update:(e,t)=>de.put(`/awareness-sessions/${e}`,t),delete:e=>de.delete(`/awareness-sessions/${e}`)};de.interceptors.response.use(e=>(e.config.metadata&&Date.now()-e.config.metadata.startTime,e),e=>{if(Dr.isCancel?.(e)||e?.code==="ERR_CANCELED"||e?.name==="CanceledError"||e?.name==="AbortError")return Promise.reject(e);const{response:a,config:n}=e;if(n?.silent)return Promise.reject(e);try{const s=String(n?.method||"GET").toUpperCase(),i=String(n?.url||""),o=n?.metadata?.requestId,l=a?.status,c={requestId:o,method:s,url:i,params:n?.params};j5(i)||(c.data=n?.data);const d=a?{status:a.status,statusText:a.statusText,data:a.data}:null;console.groupCollapsed(`[API] ${s} ${i} -> ${l??"NO_RESPONSE"}`),console.log("request",c),d&&console.log("response",d),console.error(e),console.groupEnd()}catch(s){console.error("[API] Failed to log error",s)}if(a)switch(a.status){case 401:localStorage.removeItem("hse-auth-storage"),window.location.href="/login";break;case 403:K.error("Access denied. You do not have permission to perform this action.");break;case 404:K.error("Resource not found.");break;case 422:break;case 500:console.error("Server error:",a.data),K.error("Server error. Please try again later.");break;case 502:case 503:case 504:K.error("Server is temporarily unavailable. Please try again.");break;default:K.error(a.data?.message||"An error occurred")}else e.code==="ECONNABORTED"?K.error("Request timed out. Please try again."):K.error("Network error. Please check your connection.");return Promise.reject(e)});const er=async(e,t={},a=x5)=>{const n=y5(e,t),s=v5(n,a);if(s)return{data:s,fromCache:!0};if(zs.has(n))return zs.get(n);const i=de.get(e,{params:t}).then(o=>(b5(n,o.data,a),zs.delete(n),o)).catch(o=>{throw zs.delete(n),o});return zs.set(n,i),i},oz={login:(e,t)=>de.post("/auth/login",{email:e,password:t}),logout:()=>de.post("/auth/logout"),me:()=>de.get("/auth/me"),forgotPassword:e=>de.post("/auth/forgot-password",{email:e}),resetPassword:e=>de.post("/auth/reset-password",e),updateProfile:e=>de.put("/auth/profile",e),changePassword:e=>de.post("/auth/change-password",e)},Ma={getAdminDashboard:e=>er("/dashboard/admin",e,Cr),getUserDashboard:e=>er("/dashboard/user",typeof e=="number"?{year:e}:e||{},Cr),getSafetyPerformance:e=>er("/dashboard/safety-performance",e,Cr),getEnvironmentalMonthly:e=>er("/dashboard/environmental-monthly",e,Cr),getMonthlyReportSummary:e=>er("/admin/reports/monthly/summary",e,Cr),getAccidentCharts:e=>er("/dashboard/charts/accidents",e,Cr),getTrainingCharts:e=>er("/dashboard/charts/trainings",e,Cr),getInspectionCharts:e=>er("/dashboard/charts/inspections",e,Cr),getSorCharts:e=>er("/dashboard/charts/sor",e,Cr),getRateCharts:e=>er("/dashboard/charts/rates",e,Cr),getSorAnalyticsKpis:e=>er("/dashboard/sor-analytics/kpis",e,Cr),getSorProjectPoleStacked:e=>er("/dashboard/sor-analytics/project-pole-stacked",e,Cr),getSorProjectTreemap:e=>er("/dashboard/sor-analytics/project-treemap",e,Cr),getSorProjectPoleHeatmap:e=>er("/dashboard/sor-analytics/project-pole-heatmap",e,Cr),getSorThemeAvgResolution:e=>er("/dashboard/sor-analytics/theme-avg-resolution",e,Cr),getSorThemeResolutionBox:e=>er("/dashboard/sor-analytics/theme-resolution-box",e,Cr),getSorThemeUnresolvedCount:e=>er("/dashboard/sor-analytics/theme-unresolved-count",e,Cr),getSorThemeResolvedUnresolved:e=>er("/dashboard/sor-analytics/theme-resolved-unresolved",e,Cr),getSorThemeBubble:e=>er("/dashboard/sor-analytics/theme-bubble",e,Cr),getSorUserThemeAvgResolution:e=>er("/dashboard/sor-analytics/user-theme-avg-resolution",e,Cr),getSorPoleThemeUnresolvedRate:e=>er("/dashboard/sor-analytics/pole-theme-unresolved-rate",e,Cr),getPpeConsumptionAnalytics:e=>er("/dashboard/ppe-analytics/consumption",e,Cr)},ii={getAll:e=>de.get("/users",{params:e}),getById:e=>de.get(`/users/${e}`),create:e=>de.post("/users",e),update:(e,t)=>de.put(`/users/${e}`,t),delete:e=>de.delete(`/users/${e}`),toggleStatus:e=>de.post(`/users/${e}/toggle-status`),assignProjects:(e,t)=>de.post(`/users/${e}/assign-projects`,{project_ids:t}),getStatistics:()=>de.get("/users/statistics"),downloadTemplate:()=>de.get("/users/template",{params:{lang:Qa()},responseType:"blob"}),bulkImport:e=>de.post("/users/import",e,{headers:{"Content-Type":"multipart/form-data"}})},it={getAll:e=>de.get("/projects",{params:e}),getAllList:async(e={})=>{const t=e.per_page??200,a={...e||{}};delete a.page,delete a.per_page;const n=y5("/projects/allList",{...a,per_page:t}),s=v5(n,6e4);if(s)return s;if(zs.has(n))return zs.get(n);const i=(async()=>{let o=1;const l=[];let c=!0;for(;c;){const d=await er("/projects",{...a,page:o,per_page:t},6e4),u=d.data?.data??[];Array.isArray(u)&&l.push(...u);const m=d.data?.meta;c=!!m&&o<m.last_page,c&&(o+=1)}return b5(n,l,6e4),zs.delete(n),l})().catch(o=>{throw zs.delete(n),o});return zs.set(n,i),i},getById:e=>de.get(`/projects/${e}`),create:e=>de.post("/projects",e),update:(e,t)=>de.put(`/projects/${e}`,t),delete:e=>de.delete(`/projects/${e}`),getStatistics:()=>de.get("/projects/statistics"),getKpiTrends:(e,t)=>de.get(`/projects/${e}/kpi-trends`,{params:{months:t}}),getPoles:e=>er("/projects/poles",e??{},3e5),downloadTemplate:()=>de.get("/projects/template",{params:{lang:Qa()},responseType:"blob"}),managementExport:e=>de.get("/projects/management-export",{params:{...e,lang:Qa()},responseType:"blob"}),bulkImport:e=>de.post("/projects/import",e,{headers:{"Content-Type":"multipart/form-data"}}),getTeam:e=>de.get(`/projects/${e}/team`),getAvailableOfficers:e=>de.get(`/projects/${e}/team/available`),addTeamMember:(e,t)=>de.post(`/projects/${e}/team`,{user_id:t}),addTeamMembers:(e,t)=>de.post(`/projects/${e}/team/bulk`,{user_ids:t}),downloadTeamTemplate:e=>de.get(`/projects/${e}/team/template`,{params:{lang:Qa()},responseType:"blob"}),importTeam:(e,t)=>de.post(`/projects/${e}/team/import`,t,{headers:{"Content-Type":"multipart/form-data"}}),removeTeamMember:(e,t)=>de.delete(`/projects/${e}/team/${t}`),getMembers:e=>de.get(`/projects/${e}/members`),createMember:(e,t)=>de.post(`/projects/${e}/members/create`,t),updateMember:(e,t,a)=>de.put(`/projects/${e}/members/${t}`,a),removeMember:(e,t)=>de.delete(`/projects/${e}/members/${t}`),getZones:e=>de.get(`/projects/${e}/zones`),updateZones:(e,t)=>de.put(`/projects/${e}/zones`,{zones:t}),addZone:(e,t)=>de.post(`/projects/${e}/zones/add`,{zone:t}),removeZone:(e,t)=>de.post(`/projects/${e}/zones/remove`,{zone:t})},zr={getDocumentKeys:()=>de.get("/heavy-machinery/document-keys"),getMachineTypes:()=>de.get("/heavy-machinery/machine-types",{params:{lang:Qa(),format:"options"}}),downloadMachinesTemplate:()=>de.get("/heavy-machinery/machines/template",{params:{lang:Qa()},responseType:"blob"}),importMachines:e=>de.post("/heavy-machinery/machines/import",e,{headers:{"Content-Type":"multipart/form-data"}}),getMachines:e=>de.get("/heavy-machinery/machines",{params:e}),getMachine:e=>de.get(`/heavy-machinery/machines/${e}`),createMachine:e=>de.post("/heavy-machinery/machines",e,{headers:{"Content-Type":"multipart/form-data"}}),updateMachine:(e,t)=>de.put(`/heavy-machinery/machines/${e}`,t),deleteMachine:e=>de.delete(`/heavy-machinery/machines/${e}`),transferMachine:(e,t,a)=>de.post(`/heavy-machinery/machines/${e}/transfer`,{project_id:t,code:a}),uploadMachineImage:(e,t)=>de.post(`/heavy-machinery/machines/${e}/image`,t,{headers:{"Content-Type":"multipart/form-data"}}),upsertDocument:(e,t)=>de.post(`/heavy-machinery/machines/${e}/documents`,t,{headers:{"Content-Type":"multipart/form-data"}}),updateDocument:(e,t,a)=>(a instanceof FormData&&a.append("_method","PUT"),de.post(`/heavy-machinery/machines/${e}/documents/${t}`,a,{headers:{"Content-Type":"multipart/form-data"}})),deleteDocument:(e,t)=>de.delete(`/heavy-machinery/machines/${e}/documents/${t}`),upsertInspection:(e,t)=>de.post(`/heavy-machinery/machines/${e}/inspections`,t,{headers:{"Content-Type":"multipart/form-data"}}),deleteInspection:(e,t)=>de.delete(`/heavy-machinery/machines/${e}/inspections/${t}`),searchWorkers:e=>de.get("/heavy-machinery/workers/search",{params:e}),addOperator:(e,t)=>de.post(`/heavy-machinery/machines/${e}/operators`,{worker_id:t}),removeOperator:(e,t)=>de.delete(`/heavy-machinery/machines/${e}/operators/${t}`),globalSearch:e=>de.get("/heavy-machinery/global-search",{params:{query:e}}),expiredDocumentation:e=>de.get("/heavy-machinery/reports/expired-documentation",{params:e})},Ka={getAll:e=>de.get("/kpi-reports",{params:e}),getById:e=>de.get(`/kpi-reports/${e}`),create:e=>de.post("/kpi-reports",e),update:(e,t)=>de.put(`/kpi-reports/${e}`,t),delete:e=>de.delete(`/kpi-reports/${e}`),approve:e=>de.post(`/kpi-reports/${e}/approve`),reject:(e,t)=>de.post(`/kpi-reports/${e}/reject`,{reason:t}),getAutoPopulatedData:e=>de.get("/kpi-reports/auto-populate",{params:e})},zn={getAll:e=>de.get("/notifications",{params:e}),getUnreadCount:e=>er("/notifications/unread-count",e??{},15e3),urgentUnread:e=>de.get("/notifications/urgent/unread",{params:e,silent:!0}),markAsRead:e=>de.post(`/notifications/${e}/mark-read`),markAllAsRead:e=>de.post("/notifications/mark-all-read",e),delete:e=>de.delete(`/notifications/${e}`),deleteRead:()=>de.post("/notifications/delete-read"),send:e=>de.post("/notifications/send",e),urgentSend:e=>de.post("/notifications/urgent/send",e)},cg={submit:e=>{const t=new FormData;return Object.keys(e).forEach(a=>{const n=e[a];if(!(n==null||n==="")){if(a==="attachment"){n&&t.append("attachment",n);return}if(a==="console_logs"||a==="network_logs"||a==="route_logs"||a==="metadata"){t.append(a,typeof n=="string"?n:JSON.stringify(n));return}t.append(a,n)}}),de.post("/bug-reports",t,{headers:{"Content-Type":"multipart/form-data"}})},list:e=>de.get("/bug-reports",{params:e}),getById:e=>de.get(`/bug-reports/${e}`),downloadAttachment:e=>de.get(`/bug-reports/${e}/attachment`,{responseType:"blob"})},Yd={exportExcel:e=>de.get("/export/excel",{params:e,responseType:"blob"}),exportPdf:e=>de.get("/export/pdf",{params:e,responseType:"blob"}),exportProjectReport:(e,t)=>de.get(`/export/project/${e}`,{params:t,responseType:"blob"}),exportInspections:e=>de.get("/inspections/export",{params:e,responseType:"blob"}),exportDeviations:e=>de.get("/sor-reports/export",{params:e,responseType:"blob"}),exportAwareness:e=>de.get("/awareness-sessions/export",{params:e,responseType:"blob"}),exportTrainings:e=>de.get("/trainings/export",{params:e,responseType:"blob"}),exportKpiHistory:e=>de.get("/kpi-reports/export",{params:e,responseType:"blob"}),exportHseWeekly:e=>de.get("/export/hse-weekly",{params:e,responseType:"blob"})},ri={getAll:e=>de.get("/sor-reports",{params:e}),getById:e=>de.get(`/sor-reports/${e}`),getPinned:()=>de.get("/sor-reports/pinned"),downloadTemplate:()=>de.get("/sor-reports/template",{params:{lang:Qa()},responseType:"blob"}),bulkImport:e=>de.post("/sor-reports/import",e,{headers:{"Content-Type":"multipart/form-data"},timeout:Bl,maxBodyLength:1/0,maxContentLength:1/0}),create:e=>{const t=new FormData;return Object.keys(e).forEach(a=>{const n=e[a];n!=null&&n!==""&&(typeof n=="boolean"?t.append(a,n?"1":"0"):t.append(a,n))}),de.post("/sor-reports",t,{headers:{"Content-Type":"multipart/form-data"}})},update:(e,t)=>{const a=new FormData;return a.append("_method","PUT"),Object.keys(t).forEach(n=>{const s=t[n];s!=null&&s!==""&&a.append(n,s)}),de.post(`/sor-reports/${e}`,a,{headers:{"Content-Type":"multipart/form-data"}})},submitCorrectiveAction:(e,t)=>{const a=new FormData;return Object.keys(t).forEach(n=>{t[n]!==null&&t[n]!==void 0&&t[n]!==""&&a.append(n,t[n])}),de.post(`/sor-reports/${e}/corrective-action`,a,{headers:{"Content-Type":"multipart/form-data"}})},delete:e=>de.delete(`/sor-reports/${e}`),getCategories:()=>de.get("/sor-reports/categories"),getStatistics:e=>de.get("/sor-reports/statistics",{params:e})},Wi={getAll:e=>de.get("/work-permits",{params:e}),getById:e=>de.get(`/work-permits/${e}`),create:e=>de.post("/work-permits",e),update:(e,t)=>de.put(`/work-permits/${e}`,t),delete:e=>de.delete(`/work-permits/${e}`),restore:e=>de.post(`/work-permits/${e}/restore`),getWeekInfo:e=>de.get("/work-permits/week-info",{params:e}),getWeekPermits:e=>de.get("/work-permits/week-permits",{params:e}),copyFromPrevious:e=>de.post("/work-permits/copy-from-previous",e),reinitializeNumbers:e=>de.post("/work-permits/reinitialize-numbers",e),launchWeek:e=>de.post("/work-permits/launch-week",e),export:e=>de.get("/work-permits/export",{params:e,responseType:"blob"}),getArchived:e=>de.get("/work-permits",{params:{...e,only_archived:!0}})},Ho={getAll:e=>de.get("/daily-kpi",{params:e}),getById:e=>de.get(`/daily-kpi/${e}`),create:e=>de.post("/daily-kpi",e),update:(e,t)=>de.put(`/daily-kpi/${e}`,t),delete:e=>de.delete(`/daily-kpi/${e}`),getWeekDates:e=>de.get("/daily-kpi/week-dates",{params:e}),getWeekAggregates:e=>de.get("/daily-kpi/week-aggregates",{params:e}),getAutoFillValues:e=>de.get("/daily-kpi/auto-fill",{params:e}),downloadTemplate:e=>de.get("/daily-kpi/download-template",{params:{...e,lang:Qa()},responseType:"blob"}),parseTemplate:e=>de.post("/daily-kpi/parse-template",e,{headers:{"Content-Type":"multipart/form-data"}}),bulkSave:e=>de.post("/daily-kpi/bulk-save",e)},cl={getAll:e=>de.get("/monthly-kpi-measurements",{params:e}),getById:e=>de.get(`/monthly-kpi-measurements/${e}`),upsert:e=>de.post("/monthly-kpi-measurements",e),update:(e,t)=>de.put(`/monthly-kpi-measurements/${e}`,t),delete:e=>de.delete(`/monthly-kpi-measurements/${e}`)},vs={getAll:e=>de.get("/hse-events",{params:e}),getById:e=>de.get(`/hse-events/${e}`),create:e=>de.post("/hse-events",e),update:(e,t)=>de.put(`/hse-events/${e}`,t),delete:e=>de.delete(`/hse-events/${e}`),listAttachments:e=>de.get(`/hse-events/${e}/attachments`),uploadAttachment:(e,t)=>{const a=new FormData;return Object.keys(t).forEach(n=>{const s=t[n];s!=null&&s!==""&&a.append(n,s)}),de.post(`/hse-events/${e}/attachments`,a,{headers:{"Content-Type":"multipart/form-data"}})},deleteAttachment:(e,t)=>de.delete(`/hse-events/${e}/attachments/${t}`)},ch={getAll:e=>de.get("/lighting-measurements",{params:e}),getById:e=>de.get(`/lighting-measurements/${e}`),create:e=>de.post("/lighting-measurements",e),update:(e,t)=>de.put(`/lighting-measurements/${e}`,t),delete:e=>de.delete(`/lighting-measurements/${e}`)},dh={getAll:e=>de.get("/waste-exports",{params:e}),create:e=>de.post("/waste-exports",e),update:(e,t)=>de.put(`/waste-exports/${e}`,t),delete:e=>de.delete(`/waste-exports/${e}`)},ob={getSettings:()=>de.get("/admin/backup/settings"),updateSettings:e=>de.put("/admin/backup/settings",e),downloadLatest:()=>de.get("/admin/backup/download",{responseType:"blob"})},Kc={upsert:e=>de.post("/daily-effectif",e),entry:e=>de.get("/daily-effectif/entry",{params:e}),list:e=>de.get("/daily-effectif/list",{params:e}),series:e=>de.get("/daily-effectif/series",{params:e}),history:e=>de.get("/daily-effectif/history",{params:e}),byProject:e=>de.get("/daily-effectif/by-project",{params:e})},uh={getAll:e=>de.get("/inspections",{params:e}),getById:e=>de.get(`/inspections/${e}`),create:e=>de.post("/inspections",e),update:(e,t)=>de.put(`/inspections/${e}`,t),delete:e=>de.delete(`/inspections/${e}`),getStatistics:e=>de.get("/inspections/statistics",{params:e}),getWeekCount:e=>de.get("/inspections/week-count",{params:e})},vo={getAll:e=>de.get("/regulatory-watch",{params:e}),getLatest:e=>de.get("/regulatory-watch/latest",{params:e}),getById:e=>de.get(`/regulatory-watch/${e}`),submit:e=>de.post("/regulatory-watch",e),delete:e=>de.delete(`/regulatory-watch/${e}`)},Wa={getAll:(e,t={})=>de.get("/workers",{...t,params:e}),getById:(e,t={})=>de.get(`/workers/${e}`,{...t}),create:(e,t={})=>de.post("/workers",e,t),update:(e,t,a={})=>de.put(`/workers/${e}`,t,a),delete:(e,t={})=>de.delete(`/workers/${e}`,{...t}),getStatistics:(e,t={})=>de.get("/workers/statistics",{...t,params:e}),getEntreprises:()=>er("/workers/entreprises",{},3e5),getFonctions:()=>er("/workers/fonctions",{},3e5),downloadTemplate:()=>de.get("/workers/template",{params:{lang:Qa()},responseType:"blob"}),export:e=>de.get("/workers/export",{params:e,responseType:"blob"}),import:e=>de.post("/workers/import",e,{headers:{"Content-Type":"multipart/form-data"}}),bulkDeactivate:e=>de.post("/workers/bulk-deactivate",{worker_ids:e}),bulkActivate:e=>de.post("/workers/bulk-activate",{worker_ids:e})},Ha={getItems:e=>de.get("/ppe/items",{params:e}),upsertItem:e=>de.post("/ppe/items",e),deleteItem:e=>de.delete(`/ppe/items/${e}`),downloadMassTemplate:()=>de.get("/ppe/mass/template",{params:{lang:Qa()},responseType:"blob"}),massImport:({excel:e})=>{const t=new FormData;return e&&t.append("excel",e),de.post("/ppe/mass/import",t,{headers:{"Content-Type":"multipart/form-data"},timeout:Bl,maxBodyLength:1/0,maxContentLength:1/0})},restock:e=>de.post("/ppe/restock",e),issueToWorker:e=>de.post("/ppe/issue",e),getIssues:e=>de.get("/ppe/issues",{params:e}),getWorkerIssues:e=>de.get(`/ppe/workers/${e}/issues`),getPendingValidationReport:e=>de.get("/ppe/pending-validation/report",{params:e}),getPendingValidationDetails:e=>de.get("/ppe/pending-validation/details",{params:e}),downloadPendingValidationReport:e=>de.get("/ppe/pending-validation/download",{params:e,responseType:"blob"})},Vc={getAll:e=>de.get("/subcontractor-openings",{params:e}),getById:e=>de.get(`/subcontractor-openings/${e}`),create:e=>de.post("/subcontractor-openings",e),update:(e,t)=>de.put(`/subcontractor-openings/${e}`,t),delete:e=>de.delete(`/subcontractor-openings/${e}`),uploadDocument:(e,t)=>{const a=new FormData;return Object.keys(t).forEach(n=>{const s=t[n];s!=null&&s!==""&&a.append(n,s)}),de.post(`/subcontractor-openings/${e}/documents`,a,{headers:{"Content-Type":"multipart/form-data"}})}};class lz{constructor(){this.cache=new Map,this.timestamps=new Map}generateKey(t,a={}){const n=Object.keys(a).sort().reduce((s,i)=>(s[i]=a[i],s),{});return`${t}:${JSON.stringify(n)}`}get(t,a={},n=3e4){const s=this.generateKey(t,a),i=this.timestamps.get(s);return!i||Date.now()-i>n?(this.delete(s),null):this.cache.get(s)}set(t,a={},n){const s=this.generateKey(t,a);this.cache.set(s,n),this.timestamps.set(s,Date.now())}delete(t){this.cache.delete(t),this.timestamps.delete(t)}clearPattern(t){for(const a of this.cache.keys())a.includes(t)&&this.delete(a)}clear(){this.cache.clear(),this.timestamps.clear()}getStats(){return{size:this.cache.size,keys:Array.from(this.cache.keys())}}}const Wg=new lz;async function mh(e,t,a={},n=3e4){const s=Wg.get(t,a,n);if(s)return Promise.resolve(s);const i=await e(a);return Wg.set(t,a,i),i}function XS(e=[]){e.length===0?Wg.clear():e.forEach(t=>Wg.clearPattern(t))}const At=Cy(X1((e,t)=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,login:async(a,n)=>{e({isLoading:!0});try{XS(),ZS();const s=await de.post("/auth/login",{email:a,password:n}),{user:i,token:o}=s.data.data;return e({user:i,token:o,isAuthenticated:!0,isLoading:!1}),de.defaults.headers.common.Authorization=`Bearer ${o}`,{success:!0,user:i}}catch(s){throw e({isLoading:!1}),s}},logout:async()=>{try{await de.post("/auth/logout")}catch(a){console.error("Logout error:",a)}finally{XS(),ZS(),e({user:null,token:null,isAuthenticated:!1}),delete de.defaults.headers.common.Authorization}},fetchUser:async()=>{const{token:a}=t();if(a)try{de.defaults.headers.common.Authorization=`Bearer ${a}`;const n=await de.get("/auth/me");e({user:n.data.data,isAuthenticated:!0})}catch{e({user:null,token:null,isAuthenticated:!1}),delete de.defaults.headers.common.Authorization}},updateProfile:async a=>{const n=await de.put("/auth/profile",a);return e({user:n.data.data}),n.data},changePassword:async(a,n,s)=>{const i=await de.post("/auth/change-password",{current_password:a,password:n,password_confirmation:s}),{user:o}=t();return o&&e({user:{...o,must_change_password:!1}}),i.data},isAdmin:()=>{const{user:a}=t();return a?.role==="admin"||a?.role==="consultation"},initializeAuth:()=>{const{token:a,fetchUser:n}=t();a&&(de.defaults.headers.common.Authorization=`Bearer ${a}`,n())}}),{name:"hse-auth-storage",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated}),onRehydrateStorage:()=>e=>{e?.token&&(de.defaults.headers.common.Authorization=`Bearer ${e.token}`,e.fetchUser())}})),Va={ALL:"all",ASSIGNED:"assigned"},cz="hse_manager",Wl=Cy(X1((e,t)=>({simulatedRole:null,projectScope:Va.ALL,setSimulatedRole:a=>e({simulatedRole:a||null}),clearSimulatedRole:()=>e({simulatedRole:null}),setProjectScope:a=>{const n=a===Va.ASSIGNED?Va.ASSIGNED:Va.ALL;e({projectScope:n})},resetDevTools:()=>e({simulatedRole:cz,projectScope:Va.ALL})}),{name:"hse-dev-tools",partialize:e=>({simulatedRole:e.simulatedRole,projectScope:e.projectScope})})),$y=Cy(X1((e,t)=>({isDark:!1,toggleTheme:()=>{const a=!t().isDark;e({isDark:a}),a?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},setTheme:a=>{e({isDark:a}),a?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},initTheme:()=>{t().isDark?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}}),{name:"theme-storage"}));/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uz=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ie=(e,t)=>{const a=f.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},u)=>f.createElement("svg",{ref:u,...dz,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${uz(e)}`,l].join(" "),...d},[...t.map(([m,p])=>f.createElement(m,p)),...Array.isArray(c)?c:[c]]));return a.displayName=`${e}`,a};/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mz=Ie("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=Ie("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=Ie("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pz=Ie("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=Ie("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=Ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=Ie("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fz=Ie("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=Ie("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=Ie("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=Ie("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=Ie("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=Ie("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=Ie("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=Ie("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=Ie("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=Ie("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=Ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=Ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=Ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=Ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=Ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=Ie("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=Ie("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=Ie("ClipboardPenLine",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",key:"1oijnt"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-.5",key:"1but9f"}],["path",{d:"M16 4h2a2 2 0 0 1 1.73 1",key:"1p8n7l"}],["path",{d:"M8 18h1",key:"13wk12"}],["path",{d:"M18.4 9.6a2 2 0 0 1 3 3L17 17l-4 1 1-4Z",key:"yg2pdb"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=Ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hz=Ie("Construction",[["rect",{x:"2",y:"6",width:"20",height:"8",rx:"1",key:"1estib"}],["path",{d:"M17 14v7",key:"7m2elx"}],["path",{d:"M7 14v7",key:"1cm7wv"}],["path",{d:"M17 3v3",key:"1v4jwn"}],["path",{d:"M7 3v3",key:"7o6guu"}],["path",{d:"M10 14 2.3 6.3",key:"1023jk"}],["path",{d:"m14 6 7.7 7.7",key:"1s8pl2"}],["path",{d:"m8 6 8 8",key:"hl96qh"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gz=Ie("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=Ie("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=Ie("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=Ie("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xz=Ie("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=Ie("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=Ie("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yz=Ie("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vz=Ie("FilePlus2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M3 15h6",key:"4e2qda"}],["path",{d:"M6 12v6",key:"1u72j0"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=Ie("FileSearch",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"1vg67v"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=Ie("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=Ie("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bz=Ie("FileWarning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jz=Ie("FileX2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m8 12.5-5 5",key:"b853mi"}],["path",{d:"m3 12.5 5 5",key:"1qls4r"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wz=Ie("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=Ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=Ie("FolderHeart",[["path",{d:"M11 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v1.5",key:"6hud8k"}],["path",{d:"M13.9 17.45c-1.2-1.2-1.14-2.8-.2-3.73a2.43 2.43 0 0 1 3.44 0l.36.34.34-.34a2.43 2.43 0 0 1 3.45-.01v0c.95.95 1 2.53-.2 3.74L17.5 21Z",key:"vgq86i"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=Ie("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _z=Ie("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kz=Ie("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=Ie("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=Ie("Gavel",[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nz=Ie("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=Ie("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sz=Ie("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=Ie("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=Ie("HardHat",[["path",{d:"M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z",key:"1dej2m"}],["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6h0",key:"1uc279"}],["path",{d:"M14 6h0a6 6 0 0 1 6 6v3",key:"1j9mnm"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Az=Ie("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pz=Ie("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cz=Ie("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=Ie("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=Ie("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=Ie("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=Ie("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ez=Ie("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=Ie("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tz=Ie("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=Ie("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=Ie("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oz=Ie("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mz=Ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=Ie("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=Ie("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=Ie("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dz=Ie("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=Ie("MinusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=Ie("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=Ie("PackagePlus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=Ie("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=Ie("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=Ie("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=Ie("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=Ie("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iz=Ie("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=Ie("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=Ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=Ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lz=Ie("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=Ie("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=Ie("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=Ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=Ie("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=Ie("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $z=Ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hh=Ie("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=Ie("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rz=Ie("ShieldX",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m14.5 9-5 5",key:"1m49dw"}],["path",{d:"m9.5 9 5 5",key:"wyx7zg"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=Ie("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=Ie("Siren",[["path",{d:"M7 12a5 5 0 0 1 5-5v0a5 5 0 0 1 5 5v6H7v-6Z",key:"rmc51c"}],["path",{d:"M5 20a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v2H5v-2Z",key:"yyvmjy"}],["path",{d:"M21 12h1",key:"jtio3y"}],["path",{d:"M18.5 4.5 18 5",key:"g5sp9y"}],["path",{d:"M2 12h1",key:"1uaihz"}],["path",{d:"M12 2v1",key:"11qlp1"}],["path",{d:"m4.929 4.929.707.707",key:"1i51kw"}],["path",{d:"M12 12v6",key:"3ahymv"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=Ie("Skull",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["path",{d:"M8 20v2h8v-2",key:"ded4og"}],["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M16 20a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20",key:"xq9p5u"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qz=Ie("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=Ie("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fz=Ie("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=Ie("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=Ie("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zz=Ie("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=Ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=Ie("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=Ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=Ie("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bz=Ie("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=Ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=Ie("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wz=Ie("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=Ie("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=Ie("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=Ie("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=Ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=Ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=Ie("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uz=Ie("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hz=Ie("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=Ie("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=Ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=Ie("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Kz=(e,t="fr")=>{const a=e?.toString()??"";let n="500",s=Zn,i="text-red-500",o="from-red-500 to-red-600",l=t==="fr"?"Erreur Inattendue":"Unexpected Error",c=t==="fr"?"Une erreur s'est produite. Veuillez ressayer ou contacter l'administrateur.":"An error occurred. Please try again or contact the administrator.";return a.includes("403")||a.includes("Forbidden")?(n="403",s=Rz,i="text-orange-500",o="from-orange-500 to-orange-600",l=t==="fr"?"Accs Refus":"Access Denied",c=t==="fr"?"Vous n'avez pas les permissions ncessaires pour accder  cette ressource.":"You don't have permission to access this resource."):(a.includes("Network")||a.includes("fetch"))&&(n="NET",s=Uz,i="text-blue-500",o="from-blue-500 to-blue-600",l=t==="fr"?"Connexion Perdue":"Connection Lost",c=t==="fr"?"Impossible de contacter le serveur. Vrifiez votre connexion internet.":"Unable to reach the server. Check your internet connection."),{errorCode:n,icon:s,iconColor:i,bgColor:o,title:l,description:c}};class Vz extends f.Component{constructor(a){super(a);A0(this,"handleReload",()=>{window.location.reload()});A0(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,n){this.setState({errorInfo:n});const s=this.props?.context,i=this.props?.name||"ErrorBoundary";try{console.groupCollapsed(`[${i}] React render error`),s&&console.log("context",s),console.error(a),console.log("componentStack",n?.componentStack),console.groupEnd()}catch(o){console.error("Error caught by boundary:",a,n,s,o)}}render(){if(this.state.hasError){const a=localStorage.getItem("hse-kpi-language")||"fr",{errorCode:n,icon:s,bgColor:i,title:o,description:l}=Kz(this.state.error,a);return r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-950 flex items-center justify-center p-6",children:r.jsxs("div",{className:"text-center max-w-md mx-auto",children:[r.jsxs("div",{className:"relative inline-flex items-center justify-center mb-8",children:[r.jsx("div",{className:"absolute w-32 h-32 rounded-full bg-red-100 dark:bg-red-900/20 animate-ping opacity-20"}),r.jsx("div",{className:`relative w-24 h-24 rounded-2xl bg-gradient-to-br ${i} shadow-2xl flex items-center justify-center`,children:r.jsx(s,{className:"w-12 h-12 text-white",strokeWidth:1.5})})]}),r.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-red-100 dark:bg-red-900/40 rounded-full mb-4",children:[r.jsx(Qt,{className:"w-3.5 h-3.5 text-red-600 dark:text-red-400"}),r.jsxs("span",{className:"text-xs font-semibold text-red-700 dark:text-red-300 uppercase tracking-wide",children:[a==="fr"?"Erreur":"Error"," ",n]})]}),r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4",children:o}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8 leading-relaxed",children:l}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3",children:[r.jsxs("button",{onClick:this.handleReload,className:"group w-full sm:w-auto px-6 py-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl font-medium text-gray-700 dark:text-gray-200 hover:border-gray-300 dark:hover:border-gray-600 hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[r.jsx(cd,{className:"w-4 h-4 group-hover:rotate-180 transition-transform duration-500"}),a==="fr"?"Ressayer":"Try Again"]}),r.jsxs("button",{onClick:this.handleGoHome,className:`w-full sm:w-auto px-6 py-3 bg-gradient-to-r ${i} rounded-xl font-medium text-white shadow-lg hover:shadow-xl transition-all flex items-center justify-center gap-2`,children:[r.jsx(sk,{className:"w-4 h-4"}),a==="fr"?"Accueil":"Home"]})]}),this.state.error&&r.jsxs("details",{className:"mt-10 text-left",children:[r.jsx("summary",{className:"cursor-pointer text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 text-center",children:a==="fr"?"Dtails techniques":"Technical details"}),r.jsxs("pre",{className:"mt-3 p-4 bg-gray-900 text-red-400 text-xs rounded-lg overflow-x-auto max-h-32 overflow-y-auto",children:[this.state.error.toString(),this.state.errorInfo?.componentStack]})]})]})})}return this.props.children}}const Vg="/assets/App_Logo.png",yw="/assets/SGTM_Logo.jpg",sA="/assets/login-background.jpg";function D5({variant:e="default"}){const{language:t,setLanguage:a,currentLanguage:n,languages:s}=ut(),[i,o]=f.useState(!1),l=f.useRef(null);f.useEffect(()=>{function d(u){l.current&&!l.current.contains(u.target)&&o(!1)}return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]);const c=d=>{a(d),o(!1)};return e==="compact"?r.jsxs("div",{className:"relative",ref:l,children:[r.jsxs("button",{onClick:()=>o(!i),className:"flex items-center gap-1 px-2 py-1.5 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:n.name,children:[r.jsx("span",{className:"text-lg",children:n.flag}),r.jsx(Vr,{className:`w-3 h-3 transition-transform ${i?"rotate-180":""}`})]}),i&&r.jsx("div",{className:"absolute right-0 mt-1 w-36 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg py-1 z-50",children:s.map(d=>r.jsxs("button",{onClick:()=>c(d.code),className:`w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${t===d.code?"text-hse-primary bg-hse-primary/5":"text-gray-700 dark:text-gray-300"}`,children:[r.jsx("span",{className:"text-lg",children:d.flag}),r.jsx("span",{className:"flex-1 text-left",children:d.name}),t===d.code&&r.jsx(fn,{className:"w-4 h-4"})]},d.code))})]}):r.jsxs("div",{className:"relative",ref:l,children:[r.jsxs("button",{onClick:()=>o(!i),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[r.jsx(Nz,{className:"w-4 h-4"}),r.jsx("span",{className:"text-lg",children:n.flag}),r.jsx("span",{children:n.name}),r.jsx(Vr,{className:`w-4 h-4 transition-transform ${i?"rotate-180":""}`})]}),i&&r.jsx("div",{className:"absolute right-0 mt-2 w-44 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg py-1 z-50",children:s.map(d=>r.jsxs("button",{onClick:()=>c(d.code),className:`w-full flex items-center gap-3 px-4 py-2.5 text-sm hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${t===d.code?"text-hse-primary bg-hse-primary/5":"text-gray-700 dark:text-gray-300"}`,children:[r.jsx("span",{className:"text-xl",children:d.flag}),r.jsx("span",{className:"flex-1 text-left font-medium",children:d.name}),t===d.code&&r.jsx(fn,{className:"w-4 h-4"})]},d.code))})]})}function Gz(){const{t:e}=ut(),{isDark:t,toggleTheme:a}=$y(),[n,s]=f.useState({hse_compliance:0,training_hours:0,fatal_accidents:0,year:new Date().getFullYear()});return f.useEffect(()=>{if(!(typeof window<"u"&&window.matchMedia&&window.matchMedia("(min-width: 1024px)").matches))return;const o=document.createElement("link");o.rel="preload",o.as="image",o.href=sA,o.setAttribute("fetchpriority","high"),document.head.appendChild(o);const l=document.createElement("link");l.rel="preload",l.as="image",l.href=Vg,l.setAttribute("fetchpriority","high"),document.head.appendChild(l);const c=document.createElement("link");return c.rel="preload",c.as="image",c.href=yw,c.setAttribute("fetchpriority","high"),document.head.appendChild(c),()=>{try{o.remove()}catch{}try{l.remove()}catch{}try{c.remove()}catch{}}},[]),f.useEffect(()=>{(async()=>{try{const o=await de.get("/public-stats");o.data?.data&&s(o.data.data)}catch{console.log("Could not fetch public stats")}})()},[]),r.jsxs("div",{className:"min-h-screen flex",children:[r.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-sgtm-gray relative overflow-hidden",style:{backgroundImage:`url(${sA})`,backgroundSize:"cover",backgroundPosition:"center"},children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-sgtm-gray-dark/70 to-sgtm-gray/90"}),r.jsxs("div",{className:"relative z-10 flex flex-col justify-between p-12 text-white",children:[r.jsx("div",{children:r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsx("img",{src:Vg,alt:e("auth.appLogoAlt"),className:"w-24 h-24 object-contain"}),r.jsx("span",{className:"text-4xl text-white/40 font-light",children:"/"}),r.jsx("img",{src:yw,alt:e("auth.companyLogoAlt"),className:"w-24 h-24 object-contain"})]})}),r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-4xl font-bold leading-tight",children:[e("auth.tagline.line1"),r.jsx("br",{}),e("auth.tagline.line2")]}),r.jsx("p",{className:"mt-4 text-lg text-white/80 max-w-md",children:e("auth.description")})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[r.jsx("div",{className:"text-3xl font-bold",children:n.hse_compliance!=null?`${Number(n.hse_compliance).toFixed(1)}%`:""}),r.jsx("div",{className:"text-sm text-white/70",children:e("auth.publicStats.hseCompliance")})]}),r.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[r.jsx("div",{className:"text-3xl font-bold",children:n.training_hours!=null?n.training_hours.toLocaleString():""}),r.jsx("div",{className:"text-sm text-white/70",children:e("auth.publicStats.trainingHours")})]}),r.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[r.jsx("div",{className:"text-3xl font-bold",children:n.fatal_accidents}),r.jsx("div",{className:"text-sm text-white/70",children:e("auth.publicStats.fatalAccidents",{year:n.year})})]})]})]}),r.jsxs("div",{className:"text-sm text-white/60",children:[" ",new Date().getFullYear()," ",e("common.companyName"),"."]})]}),r.jsx("div",{className:"absolute -bottom-20 -right-20 w-96 h-96 bg-white/5 rounded-full"}),r.jsx("div",{className:"absolute top-20 -right-10 w-64 h-64 bg-white/5 rounded-full"})]}),r.jsxs("div",{className:"flex-1 flex items-center justify-center p-8 bg-gray-50 dark:bg-gray-900 relative",children:[r.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-2",children:[r.jsx(D5,{}),r.jsx("button",{onClick:a,className:"p-2 rounded-lg bg-white dark:bg-gray-800 shadow-md hover:shadow-lg transition-all border border-gray-200 dark:border-gray-700",title:e(t?"common.lightMode":"common.darkMode"),children:t?r.jsx(qy,{className:"w-5 h-5 text-yellow-500"}):r.jsx(ik,{className:"w-5 h-5 text-gray-600"})})]}),r.jsx("main",{id:"main-content",className:"w-full max-w-md pt-12","aria-label":e("auth.login"),children:r.jsx(AO,{})})]})]})}function nt({isOpen:e,onClose:t,title:a,children:n,size:s="md",showCloseButton:i=!0,backdropClassName:o="",modalClassName:l=""}){const c=f.useCallback(u=>{u.key==="Escape"&&t()},[t]);if(f.useEffect(()=>(e&&(document.addEventListener("keydown",c),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",c),document.body.style.overflow="unset"}),[e,c]),!e)return null;const d={sm:"max-w-sm",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-[95vw]"};return zl.createPortal(r.jsxs("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:[r.jsx("div",{className:`fixed inset-0 bg-black/50 transition-opacity ${o}`,onClick:t}),r.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:r.jsxs("div",{className:`relative bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full ${d[s]} max-h-[90vh] flex flex-col animate-fade-in overflow-hidden ${l}`,onClick:u=>u.stopPropagation(),children:[r.jsxs("div",{className:"sticky top-0 z-[200] flex items-center justify-between p-4 md:p-6 border-b border-gray-200 dark:border-gray-700 shrink-0 bg-white dark:bg-gray-800",children:[r.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-900 dark:text-gray-100 pr-8",children:a}),i&&r.jsx("button",{onClick:t,className:"absolute top-4 right-4 z-[210] p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200","aria-label":"Close",children:r.jsx(qt,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-4 md:p-6",children:n})]})})]}),document.body)}function ot({value:e,onChange:t,placeholder:a,className:n="",required:s=!1,disabled:i=!1}){const{t:o,language:l}=ut(),[c,d]=f.useState(!1),[u,m]=f.useState(()=>e?new Date(e):new Date),[p,g]=f.useState("days"),[x,h]=f.useState({top:0,left:0,placement:"bottom"}),v=f.useRef(null),b=f.useRef(null),y=f.useRef(null),j=f.useRef(null),_=o("datePicker.days"),w=o("datePicker.months"),k=o("datePicker.monthsFull");f.useEffect(()=>{const S=E=>{const W=v.current&&v.current.contains(E.target),B=y.current&&y.current.contains(E.target);!W&&!B&&d(!1)},I=E=>{E.key==="Escape"&&d(!1)};return c&&(document.addEventListener("mousedown",S),document.addEventListener("keydown",I)),()=>{document.removeEventListener("mousedown",S),document.removeEventListener("keydown",I)}},[c]),f.useEffect(()=>{if(!c)return;const S=()=>{const E=b.current?.getBoundingClientRect();if(!E)return;const W=256,B=8;let C=E.left;C+W>window.innerWidth-B&&(C=Math.max(B,window.innerWidth-W-B));const D=E.bottom+4;h(z=>z.top===D&&z.left===C&&z.placement==="bottom"?z:{top:D,left:C,placement:"bottom"})};S();const I=()=>{j.current||(j.current=requestAnimationFrame(()=>{j.current=null,S()}))};return window.addEventListener("resize",I),window.addEventListener("scroll",I,{capture:!0,passive:!0}),()=>{window.removeEventListener("resize",I),window.removeEventListener("scroll",I,!0),j.current&&(cancelAnimationFrame(j.current),j.current=null)}},[c]),f.useEffect(()=>{if(!c)return;const S=b.current?.getBoundingClientRect(),I=y.current?.getBoundingClientRect();if(!S||!I)return;const E=8,W=72;if(I.bottom>window.innerHeight-E){const C=Math.max(W,S.top-I.height-4);h(D=>({...D,top:C,placement:"top"}))}},[c,p,u]);const N=S=>{const I=S.getFullYear(),E=S.getMonth(),W=new Date(I,E,1),B=new Date(I,E+1,0),C=[],D=new Date(I,E,0);for(let X=W.getDay()-1;X>=0;X--)C.push({date:new Date(I,E-1,D.getDate()-X),isCurrentMonth:!1});for(let X=1;X<=B.getDate();X++)C.push({date:new Date(I,E,X),isCurrentMonth:!0});const z=42,L=z-C.length;for(let X=1;X<=Math.max(0,L);X++)C.push({date:new Date(I,E+1,X),isCurrentMonth:!1});return C.slice(0,z)},P=S=>{const I=S.getFullYear(),E=String(S.getMonth()+1).padStart(2,"0"),W=String(S.getDate()).padStart(2,"0");return`${I}-${E}-${W}`},A=S=>{t(P(S)),d(!1),g("days")},M=S=>{m(new Date(u.getFullYear(),S,1)),g("days")},R=S=>S.toDateString()===new Date().toDateString(),O=S=>e&&P(S)===e,q=()=>{if(!e)return"";const[S,I,E]=e.split("-").map(Number);if(!S||!I||!E)return"";const W=l==="fr"?"fr-FR":"en-US";return new Date(S,I-1,E).toLocaleDateString(W,{day:"2-digit",month:"2-digit",year:"numeric"})};return r.jsxs("div",{ref:v,className:`relative ${n}`,children:[r.jsxs("div",{onClick:()=>!i&&d(!c),ref:b,className:`input flex items-center justify-between cursor-pointer ${i?"opacity-50 cursor-not-allowed":""}`,children:[r.jsx("span",{className:e?"text-gray-900 dark:text-gray-100":"text-gray-400 dark:text-gray-500",children:q()??a??o("datePicker.select")}),r.jsx(Na,{className:"w-4 h-4 text-gray-400"})]}),r.jsx("input",{type:"hidden",value:e??"",required:s}),c&&zl.createPortal(r.jsxs("div",{ref:y,style:{top:x.top,left:x.left,width:256},className:"fixed z-[9999] max-h-[calc(100vh-96px)] overflow-auto bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-2",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("button",{type:"button",onClick:()=>m(S=>new Date(S.getFullYear()-(p==="months"?1:0),S.getMonth()-(p==="days"?1:0),1)),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx(Do,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),r.jsxs("button",{type:"button",onClick:()=>g(p==="days"?"months":"days"),className:"font-medium text-sm text-gray-900 dark:text-gray-100 hover:text-hse-primary dark:hover:text-hse-primary px-2 py-0.5 rounded hover:bg-gray-100 dark:hover:bg-gray-700",children:[k[u.getMonth()]," ",u.getFullYear()]}),r.jsx("button",{type:"button",onClick:()=>m(S=>new Date(S.getFullYear()+(p==="months"?1:0),S.getMonth()+(p==="days"?1:0),1)),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx(Io,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]}),p==="months"?r.jsx("div",{className:"grid grid-cols-3 gap-1",children:w.map((S,I)=>r.jsx("button",{type:"button",onClick:()=>M(I),className:`py-2 text-xs rounded transition-colors
                    ${u.getMonth()===I?"bg-hse-primary text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:S},I))}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-7 gap-0.5 mb-1",children:_.map((S,I)=>r.jsx("div",{className:"text-center text-[10px] font-medium text-gray-500 dark:text-gray-400 py-0.5",children:S},I))}),r.jsx("div",{className:"grid grid-cols-7 gap-0.5",children:N(u).map((S,I)=>r.jsx("button",{type:"button",onClick:()=>A(S.date),className:`p-1.5 text-xs rounded transition-colors
                      ${S.isCurrentMonth?"text-gray-900 dark:text-gray-100":"text-gray-300 dark:text-gray-600"}
                      ${R(S.date)?"ring-1 ring-hse-primary":""}
                      ${O(S.date)?"bg-hse-primary text-white":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:S.date.getDate()},I))})]}),r.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:r.jsx("button",{type:"button",onClick:()=>A(new Date),className:"w-full text-xs text-hse-primary hover:underline",children:o("datePicker.today")})})]}),document.body)]})}function wm({value:e,onChange:t,placeholder:a="HH:MM",className:n="",disabled:s=!1}){const[i,o]=f.useState(!1),l=f.useRef(null),[c,d]=f.useState(()=>e?parseInt(e.split(":")[0]):new Date().getHours()),[u,m]=f.useState(()=>e?parseInt(e.split(":")[1]):Math.floor(new Date().getMinutes()/5)*5);f.useEffect(()=>{if(e){const[j,_]=e.split(":"),w=Number.parseInt(j,10),k=Number.parseInt(_,10);d(Number.isFinite(w)?w:0),m(Number.isFinite(k)?k:0)}},[e]),f.useEffect(()=>{const j=w=>{l.current&&!l.current.contains(w.target)&&o(!1)},_=w=>{w.key==="Escape"&&o(!1)};return i&&(document.addEventListener("mousedown",j),document.addEventListener("keydown",_)),()=>{document.removeEventListener("mousedown",j),document.removeEventListener("keydown",_)}},[i]);const p=(j,_)=>`${String(j).padStart(2,"0")}:${String(_).padStart(2,"0")}`,g=(j,_)=>{const w=Math.max(0,Math.min(23,j)),k=Math.max(0,Math.min(59,_));d(w),m(k),t(p(w,k))},x=()=>g((c+1)%24,u),h=()=>g((c-1+24)%24,u),v=()=>g(c,(u+5)%60),b=()=>g(c,(u-5+60)%60),y=["06:00","08:00","10:00","12:00","14:00","16:00","18:00"];return r.jsxs("div",{ref:l,className:`relative ${n}`,children:[r.jsxs("div",{onClick:()=>!s&&o(!i),className:`input flex items-center justify-between cursor-pointer ${s?"opacity-50 cursor-not-allowed":""}`,children:[r.jsx("span",{className:e?"text-gray-900 dark:text-gray-100":"text-gray-400 dark:text-gray-500",children:e||a}),r.jsx(oa,{className:"w-4 h-4 text-gray-400"})]}),i&&r.jsxs("div",{className:"absolute z-[100] mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-3 w-56",children:[r.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("button",{type:"button",onClick:x,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx(ld,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),r.jsx("div",{className:"w-11 h-11 flex items-center justify-center bg-gray-100 dark:bg-gray-700 rounded-lg",children:r.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:String(c).padStart(2,"0")})}),r.jsx("button",{type:"button",onClick:h,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx(Vr,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]}),r.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:":"}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("button",{type:"button",onClick:v,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx(ld,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),r.jsx("div",{className:"w-11 h-11 flex items-center justify-center bg-gray-100 dark:bg-gray-700 rounded-lg",children:r.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:String(u).padStart(2,"0")})}),r.jsx("button",{type:"button",onClick:b,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx(Vr,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]})]}),r.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-2",children:r.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:y.map(j=>r.jsx("button",{type:"button",onClick:()=>{t(j),o(!1)},className:`px-2 py-1 text-xs rounded transition-colors
                    ${e===j?"bg-hse-primary text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:j},j))})}),r.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:r.jsx("button",{type:"button",onClick:()=>{t(p(c,u)),o(!1)},className:"w-full py-1.5 bg-hse-primary text-white rounded-lg hover:bg-hse-primary/90 transition-colors text-sm font-medium",children:"OK"})})]})]})}const Yz=(e,t,a)=>Math.max(t,Math.min(a,e)),Zz=e=>{const t=String(e??"").trim();if(!t)return null;const a=Number(t);return Number.isFinite(a)?Math.trunc(a):null};function So({value:e,onChange:t,placeholder:a,className:n="",required:s=!1,disabled:i=!1,minYear:o=2e3,maxYear:l=2100}){const c=Zz(e),[d,u]=f.useState(!1),[m,p]=f.useState(()=>c??new Date().getFullYear()),[g,x]=f.useState({top:0,left:0,placement:"bottom"}),h=f.useRef(null),v=f.useRef(null),b=f.useRef(null),y=f.useRef(null);f.useEffect(()=>{c&&p(c)},[c]),f.useEffect(()=>{const w=N=>{const P=h.current&&h.current.contains(N.target),A=b.current&&b.current.contains(N.target);!P&&!A&&u(!1)},k=N=>{N.key==="Escape"&&u(!1)};return d&&(document.addEventListener("mousedown",w),document.addEventListener("keydown",k)),()=>{document.removeEventListener("mousedown",w),document.removeEventListener("keydown",k)}},[d]),f.useEffect(()=>{if(!d)return;const w=()=>{const N=v.current?.getBoundingClientRect();if(!N)return;const P=256,A=8;let M=N.left;M+P>window.innerWidth-A&&(M=Math.max(A,window.innerWidth-P-A));const R=N.bottom+4;x(O=>O.top===R&&O.left===M&&O.placement==="bottom"?O:{top:R,left:M,placement:"bottom"})};w();const k=()=>{y.current||(y.current=requestAnimationFrame(()=>{y.current=null,w()}))};return window.addEventListener("resize",k),window.addEventListener("scroll",k,{capture:!0,passive:!0}),()=>{window.removeEventListener("resize",k),window.removeEventListener("scroll",k,!0),y.current&&(cancelAnimationFrame(y.current),y.current=null)}},[d]),f.useEffect(()=>{if(!d)return;const w=v.current?.getBoundingClientRect(),k=b.current?.getBoundingClientRect();if(!w||!k)return;const N=8,P=72;if(k.bottom>window.innerHeight-N){const M=Math.max(P,w.top-k.height-4);x(R=>({...R,top:M,placement:"top"}))}},[d,m]);const j=f.useMemo(()=>{const k=Math.floor(6),N=m-k;return Yz(N,o,Math.max(o,l-11))},[m,o,l]),_=f.useMemo(()=>Array.from({length:12},(w,k)=>j+k),[j]);return r.jsxs("div",{ref:h,className:`relative ${n}`,children:[r.jsxs("div",{onClick:()=>!i&&u(!d),ref:v,className:`input flex items-center justify-between cursor-pointer ${i?"opacity-50 cursor-not-allowed":""}`,children:[r.jsx("span",{className:e?"text-gray-900 dark:text-gray-100":"text-gray-400 dark:text-gray-500",children:c?String(c):a??""}),r.jsx(Na,{className:"w-4 h-4 text-gray-400"})]}),r.jsx("input",{type:"hidden",value:e??"",required:s}),d&&zl.createPortal(r.jsxs("div",{ref:b,style:{top:g.top,left:g.left,width:256},className:"fixed z-[9999] max-h-[calc(100vh-96px)] overflow-auto bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-2",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("button",{type:"button",onClick:()=>p(w=>w-12),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx(Do,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),r.jsxs("div",{className:"font-medium text-sm text-gray-900 dark:text-gray-100",children:[_[0]," - ",_[_.length-1]]}),r.jsx("button",{type:"button",onClick:()=>p(w=>w+12),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx(Io,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]}),r.jsx("div",{className:"grid grid-cols-3 gap-1",children:_.map(w=>{const k=c===w;return r.jsx("button",{type:"button",onClick:()=>{t(String(w)),u(!1)},className:`py-2 text-xs rounded transition-colors
                      ${k?"bg-hse-primary text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:w},w)})})]}),document.body)]})}const Xz=e=>String(Math.max(0,Math.trunc(e))).padStart(2,"0"),Gu=e=>{const a=String(e||"").match(/^(\d{4})-(\d{2})$/);if(!a)return null;const n=Number(a[1]),s=Number(a[2]);return!Number.isFinite(n)||!Number.isFinite(s)||s<1||s>12?null:{year:n,month:s}},Qz=(e,t)=>`${e}-${Xz(t)}`;function dp({value:e,onChange:t,placeholder:a,className:n="",required:s=!1,disabled:i=!1,defaultYear:o}){const{t:l,language:c}=ut(),[d,u]=f.useState(!1),[m,p]=f.useState(()=>{const A=Gu(e),M=Number(o);return A?.year??(Number.isFinite(M)?M:new Date().getFullYear())}),[g,x]=f.useState({top:0,left:0,placement:"bottom"}),h=f.useRef(null),v=f.useRef(null),b=f.useRef(null),y=f.useRef(null);f.useEffect(()=>{const A=Gu(e);A?.year&&p(A.year)},[e]),f.useEffect(()=>{if(Gu(e)?.year)return;const M=Number(o);Number.isFinite(M)&&p(M)},[o,e]),f.useEffect(()=>{const A=R=>{const O=h.current&&h.current.contains(R.target),q=b.current&&b.current.contains(R.target);!O&&!q&&u(!1)},M=R=>{R.key==="Escape"&&u(!1)};return d&&(document.addEventListener("mousedown",A),document.addEventListener("keydown",M)),()=>{document.removeEventListener("mousedown",A),document.removeEventListener("keydown",M)}},[d]),f.useEffect(()=>{if(!d)return;const A=()=>{const R=v.current?.getBoundingClientRect();if(!R)return;const O=272,q=8;let S=R.left;S+O>window.innerWidth-q&&(S=Math.max(q,window.innerWidth-O-q));const I=R.bottom+4;x(E=>E.top===I&&E.left===S&&E.placement==="bottom"?E:{top:I,left:S,placement:"bottom"})};A();const M=()=>{y.current||(y.current=requestAnimationFrame(()=>{y.current=null,A()}))};return window.addEventListener("resize",M),window.addEventListener("scroll",M,{capture:!0,passive:!0}),()=>{window.removeEventListener("resize",M),window.removeEventListener("scroll",M,!0),y.current&&(cancelAnimationFrame(y.current),y.current=null)}},[d]),f.useEffect(()=>{if(!d)return;const A=v.current?.getBoundingClientRect(),M=b.current?.getBoundingClientRect();if(!A||!M)return;const R=8,O=72;if(M.bottom>window.innerHeight-R){const S=Math.max(O,A.top-M.height-4);x(I=>({...I,top:S,placement:"top"}))}},[d,m]);const j=l("datePicker.months"),_=l("datePicker.monthsFull"),w=f.useMemo(()=>Array.from({length:12},(A,M)=>({month:M+1,label:j?.[M]??String(M+1)})),[j]),k=()=>{const A=Gu(e);if(!A)return"";const M=c==="fr"?"fr-FR":"en-US",R=new Date(A.year,A.month-1,1);try{return R.toLocaleDateString(M,{month:"long",year:"numeric"})}catch{return`${_?.[A.month-1]??A.month} ${A.year}`}},N=A=>{t(Qz(m,A)),u(!1)},P=Gu(e);return r.jsxs("div",{ref:h,className:`relative ${n}`,children:[r.jsxs("div",{onClick:()=>!i&&u(!d),ref:v,className:`input flex items-center justify-between cursor-pointer ${i?"opacity-50 cursor-not-allowed":""}`,children:[r.jsx("span",{className:e?"text-gray-900 dark:text-gray-100":"text-gray-400 dark:text-gray-500",children:k()??a??l("datePicker.select")}),r.jsx(Na,{className:"w-4 h-4 text-gray-400"})]}),r.jsx("input",{type:"hidden",value:e??"",required:s}),d&&zl.createPortal(r.jsxs("div",{ref:b,style:{top:g.top,left:g.left,width:272},className:"fixed z-[9999] max-h-[calc(100vh-96px)] overflow-auto bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-2",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("button",{type:"button",onClick:()=>p(A=>A-1),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx(Do,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),r.jsx("div",{className:"font-medium text-sm text-gray-900 dark:text-gray-100",children:m}),r.jsx("button",{type:"button",onClick:()=>p(A=>A+1),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx(Io,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]}),r.jsx("div",{className:"grid grid-cols-3 gap-1",children:w.map(A=>{const M=P?.year===m&&P?.month===A.month;return r.jsx("button",{type:"button",onClick:()=>N(A.month),className:`py-2 text-xs rounded transition-colors
                      ${M?"bg-hse-primary text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:A.label},A.month)})})]}),document.body)]})}function dg(e){const t=new Date(e-1,11,31),a=t.getDay();let n=0;a!==6&&(n=a===0?1:a+1);const s=new Date(t);return s.setDate(t.getDate()-n),s}function I5(e,t){if(e<1||e>52)throw new Error("Week number must be between 1 and 52");const a=dg(t),n=new Date(a);n.setDate(a.getDate()+(e-1)*7);const s=new Date(n);return s.setDate(n.getDate()+6),{start:n,end:s}}function lk(e){const t=new Date(e);let a=t.getFullYear(),n=dg(a);const s=new Date(n);s.setDate(n.getDate()+52*7-1),t<n?(a=a-1,n=dg(a)):t>s&&(a=a+1,n=dg(a));const i=Math.floor((t-n)/(1e3*60*60*24));let o=Math.floor(i/7)+1;return o=Math.max(1,Math.min(52,o)),{week:o,year:a}}function Hr(){return lk(new Date)}function L5(e){const t=[];for(let a=1;a<=52;a++){const n=I5(a,e);t.push({week:a,year:e,start_date:Im(n.start),end_date:Im(n.end),label:`Semaine ${a} (${Gg(n.start)} - ${Gg(n.end)})`})}return t}function Im(e){const t=new Date(e),a=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${a}-${n}-${s}`}function Gg(e){const t=new Date(e),a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0");return`${a}/${n}`}const Yu=e=>String(Math.max(0,Math.trunc(e))).padStart(2,"0"),iA=e=>{const a=String(e||"").match(/^(\d{4})-W(\d{2})$/);if(!a)return null;const n=Number(a[1]),s=Number(a[2]);return!Number.isFinite(n)||!Number.isFinite(s)||s<1||s>52?null:{weekYear:n,week:s}};function Ml({value:e,onChange:t,placeholder:a,className:n="",required:s=!1,disabled:i=!1}){const{t:o,language:l}=ut(),[c,d]=f.useState(!1),[u,m]=f.useState(()=>{const w=Hr();return Number.isFinite(w?.year)?w.year:new Date().getFullYear()}),[p,g]=f.useState({top:0,left:0,placement:"bottom"}),x=f.useRef(null),h=f.useRef(null),v=f.useRef(null),b=f.useRef(null);f.useEffect(()=>{const w=iA(e);w&&m(w.weekYear)},[e]),f.useEffect(()=>{const w=N=>{const P=x.current&&x.current.contains(N.target),A=v.current&&v.current.contains(N.target);!P&&!A&&d(!1)},k=N=>{N.key==="Escape"&&d(!1)};return c&&(document.addEventListener("mousedown",w),document.addEventListener("keydown",k)),()=>{document.removeEventListener("mousedown",w),document.removeEventListener("keydown",k)}},[c]),f.useEffect(()=>{if(!c)return;const w=()=>{const N=h.current?.getBoundingClientRect();if(!N)return;const P=360,A=8;let M=N.left;M+P>window.innerWidth-A&&(M=Math.max(A,window.innerWidth-P-A));const R=N.bottom+4;g(O=>O.top===R&&O.left===M&&O.placement==="bottom"?O:{top:R,left:M,placement:"bottom"})};w();const k=()=>{b.current||(b.current=requestAnimationFrame(()=>{b.current=null,w()}))};return window.addEventListener("resize",k),window.addEventListener("scroll",k,{capture:!0,passive:!0}),()=>{window.removeEventListener("resize",k),window.removeEventListener("scroll",k,!0),b.current&&(cancelAnimationFrame(b.current),b.current=null)}},[c]),f.useEffect(()=>{if(!c)return;const w=h.current?.getBoundingClientRect(),k=v.current?.getBoundingClientRect();if(!w||!k)return;const N=8,P=72;if(k.bottom>window.innerHeight-N){const M=Math.max(P,w.top-k.height-4);g(R=>({...R,top:M,placement:"top"}))}},[c,u]);const y=f.useMemo(()=>L5(u),[u]),j=l==="fr"?"S":"W",_=f.useMemo(()=>{const w=iA(e);return w?`${j}${Yu(w.week)} ${w.weekYear}`:""},[e,j]);return r.jsxs("div",{ref:x,className:`relative ${n}`,children:[r.jsxs("div",{onClick:()=>!i&&d(!c),ref:h,className:`input flex items-center justify-between cursor-pointer ${i?"opacity-50 cursor-not-allowed":""}`,children:[r.jsx("span",{className:e?"text-gray-900 dark:text-gray-100":"text-gray-400 dark:text-gray-500",children:_||a||o("datePicker.select")}),r.jsx(Na,{className:"w-4 h-4 text-gray-400"})]}),r.jsx("input",{type:"hidden",value:e??"",required:s}),c&&zl.createPortal(r.jsxs("div",{ref:v,style:{top:p.top,left:p.left,width:360},className:"fixed z-[9999] max-h-[calc(100vh-96px)] overflow-auto bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-2",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("button",{type:"button",onClick:()=>m(w=>w-1),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx(Do,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),r.jsx("div",{className:"font-medium text-sm text-gray-900 dark:text-gray-100",children:u}),r.jsx("button",{type:"button",onClick:()=>m(w=>w+1),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx(Io,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]}),r.jsx("div",{className:"space-y-1",children:y.map(w=>{const k=`${w.year}-W${Yu(w.week)}`,N=String(e)===k,P=`${j}${Yu(w.week)} (${Gg(w.start_date)} - ${Gg(w.end_date)})`;return r.jsxs("button",{type:"button",onClick:()=>{t(k),d(!1)},className:`w-full flex items-center justify-between gap-3 rounded-lg px-2 py-2 border transition-colors
                      ${N?"bg-hse-primary border-hse-primary text-white":"bg-transparent border-transparent hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200"}`,children:[r.jsxs("span",{className:`text-sm font-semibold ${N?"text-white":"text-gray-900 dark:text-gray-100"}`,children:[j,Yu(w.week)]}),r.jsx("span",{className:`text-xs ${N?"text-white":"text-gray-500 dark:text-gray-400"}`,children:P})]},k)})}),r.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:r.jsx("button",{type:"button",onClick:()=>{const w=Hr(),k=w?`${w.year}-W${Yu(w.week)}`:"";k&&t(k),d(!1)},className:"w-full text-xs text-hse-primary hover:underline",children:o("datePicker.today")})})]}),document.body)]})}function la({isOpen:e,title:t,message:a,confirmLabel:n,cancelLabel:s,variant:i="danger",onConfirm:o,onCancel:l}){if(!e)return null;const c=i==="danger"?"btn-danger":"btn-primary";return r.jsx(nt,{isOpen:e,onClose:l,title:t,size:"sm",children:r.jsxs("div",{className:"space-y-4",children:[a&&r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:a}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("button",{type:"button",onClick:l,className:"btn-outline",children:s}),r.jsx("button",{type:"button",onClick:o,className:c,children:n})]})]})})}function Ze({value:e,onChange:t,children:a,className:n="",wrapperClassName:s="",disabled:i=!1,...o}){return r.jsxs("div",{className:`relative ${s}`,children:[r.jsx("select",{value:e,onChange:t,disabled:i,className:`input appearance-none pr-9 ${n}`,...o,children:a}),r.jsx(Vr,{className:`pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 ${i?"text-gray-300 dark:text-gray-600":"text-gray-400 dark:text-gray-500"}`})]})}function dd(e){const a=["admin","consultation","hse_manager","regional_hse_manager","dev","pole_director","works_director","hse_director","hr_director"].includes(e);return{minLength:a?12:8,requireLower:!0,requireUpper:!0,requireDigit:!0,requireSpecial:a,hintKey:a?"auth.passwordPolicy.privileged":"auth.passwordPolicy.standard"}}function Xd(e,t){const a=String(e??""),n={minLength:a.length>=(t?.minLength??0),lower:/[a-z]/.test(a),upper:/[A-Z]/.test(a),digit:/\d/.test(a),special:t?.requireSpecial?/[^A-Za-z0-9]/.test(a):!0};return{ok:n.minLength&&n.lower&&n.upper&&n.digit&&n.special,checks:n}}function Jz(e,t){const a=String(e??"");if(!a)return{score:0,max:5};const{checks:n}=Xd(a,{...t??{minLength:8,requireLower:!0,requireUpper:!0,requireDigit:!0,requireSpecial:!1}}),s=t?.requireSpecial?5:4,i=[n.minLength,n.lower,n.upper,n.digit].filter(Boolean).length,o=t?.requireSpecial&&n.special?1:0;return{score:Math.min(s,i+o),max:s}}function Fy({password:e,role:t,policy:a}){const{t:n}=ut(),s=f.useMemo(()=>a||dd(t),[a,t]),i=f.useMemo(()=>Xd(e,s),[e,s]),o=f.useMemo(()=>Jz(e,s),[e,s]),l=o.max>0?Math.round(o.score/o.max*100):0,c=o.score<=1?"auth.passwordStrength.weak":o.score===2?"auth.passwordStrength.fair":o.score===3?"auth.passwordStrength.good":"auth.passwordStrength.strong",d=o.score<=1?"bg-red-500":o.score===2?"bg-amber-500":o.score===3?"bg-blue-500":"bg-green-500",u=[{key:"minLength",ok:i.checks.minLength,label:n("auth.passwordRequirements.minLength",{min:s.minLength})},{key:"lower",ok:i.checks.lower,label:n("auth.passwordRequirements.lowercase")},{key:"upper",ok:i.checks.upper,label:n("auth.passwordRequirements.uppercase")},{key:"digit",ok:i.checks.digit,label:n("auth.passwordRequirements.digit")}];return s.requireSpecial&&u.push({key:"special",ok:i.checks.special,label:n("auth.passwordRequirements.special")}),r.jsxs("div",{className:"rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/40 p-4",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:n("auth.passwordStrength.title")}),r.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:n(s.hintKey)})]}),r.jsx("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-200 whitespace-nowrap",children:n(c)})]}),r.jsx("div",{className:"mt-3 h-2 w-full rounded-full bg-gray-200 dark:bg-gray-800 overflow-hidden",children:r.jsx("div",{className:`h-full ${d}`,style:{width:`${l}%`}})}),r.jsx("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-2",children:u.map(m=>r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[m.ok?r.jsx(Xt,{className:"w-4 h-4 text-green-600"}):r.jsx(Zn,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:m.ok?"text-gray-800 dark:text-gray-200":"text-gray-600 dark:text-gray-400",children:m.label})]},m.key))})]})}function $5(e){var t,a,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(a=$5(e[t]))&&(n&&(n+=" "),n+=a)}else for(a in e)e[a]&&(n&&(n+=" "),n+=a);return n}function wt(){for(var e,t,a=0,n="",s=arguments.length;a<s;a++)(e=arguments[a])&&(t=$5(e))&&(n&&(n+=" "),n+=t);return n}var eB=Array.isArray,rn=eB,tB=typeof ro=="object"&&ro&&ro.Object===Object&&ro,R5=tB,rB=R5,aB=typeof self=="object"&&self&&self.Object===Object&&self,nB=rB||aB||Function("return this")(),Cs=nB,sB=Cs,iB=sB.Symbol,Qd=iB,oA=Qd,q5=Object.prototype,oB=q5.hasOwnProperty,lB=q5.toString,Zu=oA?oA.toStringTag:void 0;function cB(e){var t=oB.call(e,Zu),a=e[Zu];try{e[Zu]=void 0;var n=!0}catch{}var s=lB.call(e);return n&&(t?e[Zu]=a:delete e[Zu]),s}var dB=cB,uB=Object.prototype,mB=uB.toString;function pB(e){return mB.call(e)}var fB=pB,lA=Qd,hB=dB,gB=fB,xB="[object Null]",yB="[object Undefined]",cA=lA?lA.toStringTag:void 0;function vB(e){return e==null?e===void 0?yB:xB:cA&&cA in Object(e)?hB(e):gB(e)}var Mi=vB;function bB(e){return e!=null&&typeof e=="object"}var Es=bB,jB=Mi,wB=Es,_B="[object Symbol]";function kB(e){return typeof e=="symbol"||wB(e)&&jB(e)==_B}var Jd=kB,NB=rn,SB=Jd,AB=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,PB=/^\w*$/;function CB(e,t){if(NB(e))return!1;var a=typeof e;return a=="number"||a=="symbol"||a=="boolean"||e==null||SB(e)?!0:PB.test(e)||!AB.test(e)||t!=null&&e in Object(t)}var ck=CB;function EB(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Ts=EB;const eu=Dt(Ts);var TB=Mi,OB=Ts,MB="[object AsyncFunction]",DB="[object Function]",IB="[object GeneratorFunction]",LB="[object Proxy]";function $B(e){if(!OB(e))return!1;var t=TB(e);return t==DB||t==IB||t==MB||t==LB}var dk=$B;const at=Dt(dk);var RB=Cs,qB=RB["__core-js_shared__"],FB=qB,hb=FB,dA=function(){var e=/[^.]+$/.exec(hb&&hb.keys&&hb.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function zB(e){return!!dA&&dA in e}var BB=zB,WB=Function.prototype,UB=WB.toString;function HB(e){if(e!=null){try{return UB.call(e)}catch{}try{return e+""}catch{}}return""}var F5=HB,KB=dk,VB=BB,GB=Ts,YB=F5,ZB=/[\\^$.*+?()[\]{}|]/g,XB=/^\[object .+?Constructor\]$/,QB=Function.prototype,JB=Object.prototype,eW=QB.toString,tW=JB.hasOwnProperty,rW=RegExp("^"+eW.call(tW).replace(ZB,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function aW(e){if(!GB(e)||VB(e))return!1;var t=KB(e)?rW:XB;return t.test(YB(e))}var nW=aW;function sW(e,t){return e?.[t]}var iW=sW,oW=nW,lW=iW;function cW(e,t){var a=lW(e,t);return oW(a)?a:void 0}var Ul=cW,dW=Ul,uW=dW(Object,"create"),zy=uW,uA=zy;function mW(){this.__data__=uA?uA(null):{},this.size=0}var pW=mW;function fW(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var hW=fW,gW=zy,xW="__lodash_hash_undefined__",yW=Object.prototype,vW=yW.hasOwnProperty;function bW(e){var t=this.__data__;if(gW){var a=t[e];return a===xW?void 0:a}return vW.call(t,e)?t[e]:void 0}var jW=bW,wW=zy,_W=Object.prototype,kW=_W.hasOwnProperty;function NW(e){var t=this.__data__;return wW?t[e]!==void 0:kW.call(t,e)}var SW=NW,AW=zy,PW="__lodash_hash_undefined__";function CW(e,t){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=AW&&t===void 0?PW:t,this}var EW=CW,TW=pW,OW=hW,MW=jW,DW=SW,IW=EW;function tu(e){var t=-1,a=e==null?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}tu.prototype.clear=TW;tu.prototype.delete=OW;tu.prototype.get=MW;tu.prototype.has=DW;tu.prototype.set=IW;var LW=tu;function $W(){this.__data__=[],this.size=0}var RW=$W;function qW(e,t){return e===t||e!==e&&t!==t}var By=qW,FW=By;function zW(e,t){for(var a=e.length;a--;)if(FW(e[a][0],t))return a;return-1}var Wy=zW,BW=Wy,WW=Array.prototype,UW=WW.splice;function HW(e){var t=this.__data__,a=BW(t,e);if(a<0)return!1;var n=t.length-1;return a==n?t.pop():UW.call(t,a,1),--this.size,!0}var KW=HW,VW=Wy;function GW(e){var t=this.__data__,a=VW(t,e);return a<0?void 0:t[a][1]}var YW=GW,ZW=Wy;function XW(e){return ZW(this.__data__,e)>-1}var QW=XW,JW=Wy;function eU(e,t){var a=this.__data__,n=JW(a,e);return n<0?(++this.size,a.push([e,t])):a[n][1]=t,this}var tU=eU,rU=RW,aU=KW,nU=YW,sU=QW,iU=tU;function ru(e){var t=-1,a=e==null?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}ru.prototype.clear=rU;ru.prototype.delete=aU;ru.prototype.get=nU;ru.prototype.has=sU;ru.prototype.set=iU;var Uy=ru,oU=Ul,lU=Cs,cU=oU(lU,"Map"),uk=cU,mA=LW,dU=Uy,uU=uk;function mU(){this.size=0,this.__data__={hash:new mA,map:new(uU||dU),string:new mA}}var pU=mU;function fU(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var hU=fU,gU=hU;function xU(e,t){var a=e.__data__;return gU(t)?a[typeof t=="string"?"string":"hash"]:a.map}var Hy=xU,yU=Hy;function vU(e){var t=yU(this,e).delete(e);return this.size-=t?1:0,t}var bU=vU,jU=Hy;function wU(e){return jU(this,e).get(e)}var _U=wU,kU=Hy;function NU(e){return kU(this,e).has(e)}var SU=NU,AU=Hy;function PU(e,t){var a=AU(this,e),n=a.size;return a.set(e,t),this.size+=a.size==n?0:1,this}var CU=PU,EU=pU,TU=bU,OU=_U,MU=SU,DU=CU;function au(e){var t=-1,a=e==null?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}au.prototype.clear=EU;au.prototype.delete=TU;au.prototype.get=OU;au.prototype.has=MU;au.prototype.set=DU;var mk=au,z5=mk,IU="Expected a function";function pk(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(IU);var a=function(){var n=arguments,s=t?t.apply(this,n):n[0],i=a.cache;if(i.has(s))return i.get(s);var o=e.apply(this,n);return a.cache=i.set(s,o)||i,o};return a.cache=new(pk.Cache||z5),a}pk.Cache=z5;var B5=pk;const LU=Dt(B5);var $U=B5,RU=500;function qU(e){var t=$U(e,function(n){return a.size===RU&&a.clear(),n}),a=t.cache;return t}var FU=qU,zU=FU,BU=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,WU=/\\(\\)?/g,UU=zU(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(BU,function(a,n,s,i){t.push(s?i.replace(WU,"$1"):n||a)}),t}),HU=UU;function KU(e,t){for(var a=-1,n=e==null?0:e.length,s=Array(n);++a<n;)s[a]=t(e[a],a,e);return s}var Ky=KU,pA=Qd,VU=Ky,GU=rn,YU=Jd,fA=pA?pA.prototype:void 0,hA=fA?fA.toString:void 0;function W5(e){if(typeof e=="string")return e;if(GU(e))return VU(e,W5)+"";if(YU(e))return hA?hA.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var ZU=W5,XU=ZU;function QU(e){return e==null?"":XU(e)}var U5=QU,JU=rn,eH=ck,tH=HU,rH=U5;function aH(e,t){return JU(e)?e:eH(e,t)?[e]:tH(rH(e))}var Vy=aH,nH=Jd;function sH(e){if(typeof e=="string"||nH(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var df=sH,iH=Vy,oH=df;function lH(e,t){t=iH(t,e);for(var a=0,n=t.length;e!=null&&a<n;)e=e[oH(t[a++])];return a&&a==n?e:void 0}var Gy=lH,cH=Gy;function dH(e,t,a){var n=e==null?void 0:cH(e,t);return n===void 0?a:n}var H5=dH;const ya=Dt(H5);function uH(e){return e==null}var mH=uH;const dt=Dt(mH);var pH=Mi,fH=rn,hH=Es,gH="[object String]";function xH(e){return typeof e=="string"||!fH(e)&&hH(e)&&pH(e)==gH}var yH=xH;const Dl=Dt(yH);var K5={exports:{}},Gt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fk=Symbol.for("react.element"),hk=Symbol.for("react.portal"),Yy=Symbol.for("react.fragment"),Zy=Symbol.for("react.strict_mode"),Xy=Symbol.for("react.profiler"),Qy=Symbol.for("react.provider"),Jy=Symbol.for("react.context"),vH=Symbol.for("react.server_context"),ev=Symbol.for("react.forward_ref"),tv=Symbol.for("react.suspense"),rv=Symbol.for("react.suspense_list"),av=Symbol.for("react.memo"),nv=Symbol.for("react.lazy"),bH=Symbol.for("react.offscreen"),V5;V5=Symbol.for("react.module.reference");function Qn(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case fk:switch(e=e.type,e){case Yy:case Xy:case Zy:case tv:case rv:return e;default:switch(e=e&&e.$$typeof,e){case vH:case Jy:case ev:case nv:case av:case Qy:return e;default:return t}}case hk:return t}}}Gt.ContextConsumer=Jy;Gt.ContextProvider=Qy;Gt.Element=fk;Gt.ForwardRef=ev;Gt.Fragment=Yy;Gt.Lazy=nv;Gt.Memo=av;Gt.Portal=hk;Gt.Profiler=Xy;Gt.StrictMode=Zy;Gt.Suspense=tv;Gt.SuspenseList=rv;Gt.isAsyncMode=function(){return!1};Gt.isConcurrentMode=function(){return!1};Gt.isContextConsumer=function(e){return Qn(e)===Jy};Gt.isContextProvider=function(e){return Qn(e)===Qy};Gt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===fk};Gt.isForwardRef=function(e){return Qn(e)===ev};Gt.isFragment=function(e){return Qn(e)===Yy};Gt.isLazy=function(e){return Qn(e)===nv};Gt.isMemo=function(e){return Qn(e)===av};Gt.isPortal=function(e){return Qn(e)===hk};Gt.isProfiler=function(e){return Qn(e)===Xy};Gt.isStrictMode=function(e){return Qn(e)===Zy};Gt.isSuspense=function(e){return Qn(e)===tv};Gt.isSuspenseList=function(e){return Qn(e)===rv};Gt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Yy||e===Xy||e===Zy||e===tv||e===rv||e===bH||typeof e=="object"&&e!==null&&(e.$$typeof===nv||e.$$typeof===av||e.$$typeof===Qy||e.$$typeof===Jy||e.$$typeof===ev||e.$$typeof===V5||e.getModuleId!==void 0)};Gt.typeOf=Qn;K5.exports=Gt;var jH=K5.exports,wH=Mi,_H=Es,kH="[object Number]";function NH(e){return typeof e=="number"||_H(e)&&wH(e)==kH}var G5=NH;const SH=Dt(G5);var AH=G5;function PH(e){return AH(e)&&e!=+e}var CH=PH;const $o=Dt(CH);var Ga=function(t){return t===0?0:t>0?1:-1},ul=function(t){return Dl(t)&&t.indexOf("%")===t.length-1},He=function(t){return SH(t)&&!$o(t)},EH=function(t){return dt(t)},ia=function(t){return He(t)||Dl(t)},TH=0,Di=function(t){var a=++TH;return"".concat(t||"").concat(a)},Ya=function(t,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!He(t)&&!Dl(t))return n;var i;if(ul(t)){var o=t.indexOf("%");i=a*parseFloat(t.slice(0,o))/100}else i=+t;return $o(i)&&(i=n),s&&i>a&&(i=a),i},to=function(t){if(!t)return null;var a=Object.keys(t);return a&&a.length?t[a[0]]:null},OH=function(t){if(!Array.isArray(t))return!1;for(var a=t.length,n={},s=0;s<a;s++)if(!n[t[s]])n[t[s]]=!0;else return!0;return!1},wr=function(t,a){return He(t)&&He(a)?function(n){return t+n*(a-t)}:function(){return a}};function Yg(e,t,a){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):ya(n,t))===a})}var MH=function(t){if(!t||!t.length)return null;for(var a=t.length,n=0,s=0,i=0,o=0,l=1/0,c=-1/0,d=0,u=0,m=0;m<a;m++)d=t[m].cx||0,u=t[m].cy||0,n+=d,s+=u,i+=d*u,o+=d*d,l=Math.min(l,d),c=Math.max(c,d);var p=a*o!==n*n?(a*i-n*s)/(a*o-n*n):0;return{xmin:l,xmax:c,a:p,b:(s-p*n)/a}},DH=function(t,a){return He(t)&&He(a)?t-a:Dl(t)&&Dl(a)?t.localeCompare(a):t instanceof Date&&a instanceof Date?t.getTime()-a.getTime():String(t).localeCompare(String(a))};function jl(e,t){for(var a in e)if({}.hasOwnProperty.call(e,a)&&(!{}.hasOwnProperty.call(t,a)||e[a]!==t[a]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function vw(e){"@babel/helpers - typeof";return vw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vw(e)}var IH=["viewBox","children"],LH=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],gA=["points","pathLength"],gb={svg:IH,polygon:gA,polyline:gA},gk=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Zg=function(t,a){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(f.isValidElement(t)&&(n=t.props),!eu(n))return null;var s={};return Object.keys(n).forEach(function(i){gk.includes(i)&&(s[i]=a||function(o){return n[i](n,o)})}),s},$H=function(t,a,n){return function(s){return t(a,n,s),null}},Ao=function(t,a,n){if(!eu(t)||vw(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var o=t[i];gk.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=$H(o,a,n))}),s},RH=["children"],qH=["children"];function xA(e,t){if(e==null)return{};var a=FH(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function FH(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function bw(e){"@babel/helpers - typeof";return bw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bw(e)}var yA={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},gi=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},vA=null,xb=null,sv=function e(t){if(t===vA&&Array.isArray(xb))return xb;var a=[];return f.Children.forEach(t,function(n){dt(n)||(jH.isFragment(n)?a=a.concat(e(n.props.children)):a.push(n))}),xb=a,vA=t,a};function Ja(e,t){var a=[],n=[];return Array.isArray(t)?n=t.map(function(s){return gi(s)}):n=[gi(t)],sv(e).forEach(function(s){var i=ya(s,"type.displayName")||ya(s,"type.name");n.indexOf(i)!==-1&&a.push(s)}),a}function Ur(e,t){var a=Ja(e,t);return a&&a[0]}var Xg=function(t){if(!t||!t.props)return!1;var a=t.props,n=a.width,s=a.height;return!(!He(n)||n<=0||!He(s)||s<=0)},zH=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Y5=function(t){return t&&t.type&&Dl(t.type)&&zH.indexOf(t.type)>=0},Z5=function(t){return t&&bw(t)==="object"&&"clipDot"in t},BH=function(t,a,n,s){var i,o=(i=gb?.[s])!==null&&i!==void 0?i:[];return a.startsWith("data-")||!at(t)&&(s&&o.includes(a)||LH.includes(a))||n&&gk.includes(a)},X5=function(t){var a=[];return sv(t).forEach(function(n){Y5(n)&&a.push(n)}),a},Qe=function(t,a,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(f.isValidElement(t)&&(s=t.props),!eu(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;BH((l=s)===null||l===void 0?void 0:l[o],o,a,n)&&(i[o]=s[o])}),i},jw=function e(t,a){if(t===a)return!0;var n=f.Children.count(t);if(n!==f.Children.count(a))return!1;if(n===0)return!0;if(n===1)return bA(Array.isArray(t)?t[0]:t,Array.isArray(a)?a[0]:a);for(var s=0;s<n;s++){var i=t[s],o=a[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!bA(i,o))return!1}return!0},bA=function(t,a){if(dt(t)&&dt(a))return!0;if(!dt(t)&&!dt(a)){var n=t.props||{},s=n.children,i=xA(n,RH),o=a.props||{},l=o.children,c=xA(o,qH);return s&&l?jl(i,c)&&jw(s,l):!s&&!l?jl(i,c):!1}return!1},jA=function(t,a){var n=[],s={};return sv(t).forEach(function(i,o){if(Y5(i))n.push(i);else if(i){var l=gi(i.type),c=a[l]||{},d=c.handler,u=c.once;if(d&&(!u||!s[l])){var m=d(i,l,o);n.push(m),s[l]=!0}}}),n},WH=function(t){var a=t&&t.type;return a&&yA[a]?yA[a]:null},UH=function(t,a){return sv(a).indexOf(t)},HH=["children","width","height","viewBox","className","style","title","desc"];function ww(){return ww=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ww.apply(this,arguments)}function KH(e,t){if(e==null)return{};var a=VH(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function VH(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function up(e){var t=e.children,a=e.width,n=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,d=KH(e,HH),u=s||{width:a,height:n,x:0,y:0},m=wt("recharts-surface",i);return le.createElement("svg",ww({},Qe(d,!0,"svg"),{className:m,width:a,height:n,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),le.createElement("title",null,l),le.createElement("desc",null,c),t)}var GH=["children","className"];function _w(){return _w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},_w.apply(this,arguments)}function YH(e,t){if(e==null)return{};var a=ZH(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ZH(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}var ft=le.forwardRef(function(e,t){var a=e.children,n=e.className,s=YH(e,GH),i=wt("recharts-layer",n);return le.createElement("g",_w({className:i},Qe(s,!0),{ref:t}),a)}),Kn=function(t,a){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]};function XH(e,t,a){var n=-1,s=e.length;t<0&&(t=-t>s?0:s+t),a=a>s?s:a,a<0&&(a+=s),s=t>a?0:a-t>>>0,t>>>=0;for(var i=Array(s);++n<s;)i[n]=e[n+t];return i}var Q5=XH,QH=Q5;function JH(e,t,a){var n=e.length;return a=a===void 0?n:a,!t&&a>=n?e:QH(e,t,a)}var eK=JH,tK="\\ud800-\\udfff",rK="\\u0300-\\u036f",aK="\\ufe20-\\ufe2f",nK="\\u20d0-\\u20ff",sK=rK+aK+nK,iK="\\ufe0e\\ufe0f",oK="\\u200d",lK=RegExp("["+oK+tK+sK+iK+"]");function cK(e){return lK.test(e)}var J5=cK;function dK(e){return e.split("")}var uK=dK,eM="\\ud800-\\udfff",mK="\\u0300-\\u036f",pK="\\ufe20-\\ufe2f",fK="\\u20d0-\\u20ff",hK=mK+pK+fK,gK="\\ufe0e\\ufe0f",xK="["+eM+"]",kw="["+hK+"]",Nw="\\ud83c[\\udffb-\\udfff]",yK="(?:"+kw+"|"+Nw+")",tM="[^"+eM+"]",rM="(?:\\ud83c[\\udde6-\\uddff]){2}",aM="[\\ud800-\\udbff][\\udc00-\\udfff]",vK="\\u200d",nM=yK+"?",sM="["+gK+"]?",bK="(?:"+vK+"(?:"+[tM,rM,aM].join("|")+")"+sM+nM+")*",jK=sM+nM+bK,wK="(?:"+[tM+kw+"?",kw,rM,aM,xK].join("|")+")",_K=RegExp(Nw+"(?="+Nw+")|"+wK+jK,"g");function kK(e){return e.match(_K)||[]}var NK=kK,SK=uK,AK=J5,PK=NK;function CK(e){return AK(e)?PK(e):SK(e)}var EK=CK,TK=eK,OK=J5,MK=EK,DK=U5;function IK(e){return function(t){t=DK(t);var a=OK(t)?MK(t):void 0,n=a?a[0]:t.charAt(0),s=a?TK(a,1).join(""):t.slice(1);return n[e]()+s}}var LK=IK,$K=LK,RK=$K("toUpperCase"),qK=RK;const iv=Dt(qK);function ir(e){return function(){return e}}const iM=Math.cos,Qg=Math.sin,Os=Math.sqrt,Jg=Math.PI,ov=2*Jg,Sw=Math.PI,Aw=2*Sw,Jo=1e-6,FK=Aw-Jo;function oM(e){this._+=e[0];for(let t=1,a=e.length;t<a;++t)this._+=arguments[t]+e[t]}function zK(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return oM;const a=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*a)/a+n[s]}}class BK{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?oM:zK(t)}moveTo(t,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,a){this._append`L${this._x1=+t},${this._y1=+a}`}quadraticCurveTo(t,a,n,s){this._append`Q${+t},${+a},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,a,n,s,i,o){this._append`C${+t},${+a},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,a,n,s,i){if(t=+t,a=+a,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,d=s-a,u=o-t,m=l-a,p=u*u+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=a}`;else if(p>Jo)if(!(Math.abs(m*c-d*u)>Jo)||!i)this._append`L${this._x1=t},${this._y1=a}`;else{let g=n-o,x=s-l,h=c*c+d*d,v=g*g+x*x,b=Math.sqrt(h),y=Math.sqrt(p),j=i*Math.tan((Sw-Math.acos((h+p-v)/(2*b*y)))/2),_=j/y,w=j/b;Math.abs(_-1)>Jo&&this._append`L${t+_*u},${a+_*m}`,this._append`A${i},${i},0,0,${+(m*g>u*x)},${this._x1=t+w*c},${this._y1=a+w*d}`}}arc(t,a,n,s,i,o){if(t=+t,a=+a,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),c=n*Math.sin(s),d=t+l,u=a+c,m=1^o,p=o?s-i:i-s;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>Jo||Math.abs(this._y1-u)>Jo)&&this._append`L${d},${u}`,n&&(p<0&&(p=p%Aw+Aw),p>FK?this._append`A${n},${n},0,1,${m},${t-l},${a-c}A${n},${n},0,1,${m},${this._x1=d},${this._y1=u}`:p>Jo&&this._append`A${n},${n},0,${+(p>=Sw)},${m},${this._x1=t+n*Math.cos(i)},${this._y1=a+n*Math.sin(i)}`)}rect(t,a,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+a}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function xk(e){let t=3;return e.digits=function(a){if(!arguments.length)return t;if(a==null)t=null;else{const n=Math.floor(a);if(!(n>=0))throw new RangeError(`invalid digits: ${a}`);t=n}return e},()=>new BK(t)}function yk(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function lM(e){this._context=e}lM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function lv(e){return new lM(e)}function cM(e){return e[0]}function dM(e){return e[1]}function uM(e,t){var a=ir(!0),n=null,s=lv,i=null,o=xk(l);e=typeof e=="function"?e:e===void 0?cM:ir(e),t=typeof t=="function"?t:t===void 0?dM:ir(t);function l(c){var d,u=(c=yk(c)).length,m,p=!1,g;for(n==null&&(i=s(g=o())),d=0;d<=u;++d)!(d<u&&a(m=c[d],d,c))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(m,d,c),+t(m,d,c));if(g)return i=null,g+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:ir(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:ir(+c),l):t},l.defined=function(c){return arguments.length?(a=typeof c=="function"?c:ir(!!c),l):a},l.curve=function(c){return arguments.length?(s=c,n!=null&&(i=s(n)),l):s},l.context=function(c){return arguments.length?(c==null?n=i=null:i=s(n=c),l):n},l}function xh(e,t,a){var n=null,s=ir(!0),i=null,o=lv,l=null,c=xk(d);e=typeof e=="function"?e:e===void 0?cM:ir(+e),t=typeof t=="function"?t:ir(t===void 0?0:+t),a=typeof a=="function"?a:a===void 0?dM:ir(+a);function d(m){var p,g,x,h=(m=yk(m)).length,v,b=!1,y,j=new Array(h),_=new Array(h);for(i==null&&(l=o(y=c())),p=0;p<=h;++p){if(!(p<h&&s(v=m[p],p,m))===b)if(b=!b)g=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),x=p-1;x>=g;--x)l.point(j[x],_[x]);l.lineEnd(),l.areaEnd()}b&&(j[p]=+e(v,p,m),_[p]=+t(v,p,m),l.point(n?+n(v,p,m):j[p],a?+a(v,p,m):_[p]))}if(y)return l=null,y+""||null}function u(){return uM().defined(s).curve(o).context(i)}return d.x=function(m){return arguments.length?(e=typeof m=="function"?m:ir(+m),n=null,d):e},d.x0=function(m){return arguments.length?(e=typeof m=="function"?m:ir(+m),d):e},d.x1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:ir(+m),d):n},d.y=function(m){return arguments.length?(t=typeof m=="function"?m:ir(+m),a=null,d):t},d.y0=function(m){return arguments.length?(t=typeof m=="function"?m:ir(+m),d):t},d.y1=function(m){return arguments.length?(a=m==null?null:typeof m=="function"?m:ir(+m),d):a},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(a)},d.lineX1=function(){return u().x(n).y(t)},d.defined=function(m){return arguments.length?(s=typeof m=="function"?m:ir(!!m),d):s},d.curve=function(m){return arguments.length?(o=m,i!=null&&(l=o(i)),d):o},d.context=function(m){return arguments.length?(m==null?i=l=null:l=o(i=m),d):i},d}class mM{constructor(t,a){this._context=t,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,a){switch(t=+t,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,a):this._context.moveTo(t,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,a,t,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,t,this._y0,t,a);break}}this._x0=t,this._y0=a}}function WK(e){return new mM(e,!0)}function UK(e){return new mM(e,!1)}const vk={draw(e,t){const a=Os(t/Jg);e.moveTo(a,0),e.arc(0,0,a,0,ov)}},HK={draw(e,t){const a=Os(t/5)/2;e.moveTo(-3*a,-a),e.lineTo(-a,-a),e.lineTo(-a,-3*a),e.lineTo(a,-3*a),e.lineTo(a,-a),e.lineTo(3*a,-a),e.lineTo(3*a,a),e.lineTo(a,a),e.lineTo(a,3*a),e.lineTo(-a,3*a),e.lineTo(-a,a),e.lineTo(-3*a,a),e.closePath()}},pM=Os(1/3),KK=pM*2,VK={draw(e,t){const a=Os(t/KK),n=a*pM;e.moveTo(0,-a),e.lineTo(n,0),e.lineTo(0,a),e.lineTo(-n,0),e.closePath()}},GK={draw(e,t){const a=Os(t),n=-a/2;e.rect(n,n,a,a)}},YK=.8908130915292852,fM=Qg(Jg/10)/Qg(7*Jg/10),ZK=Qg(ov/10)*fM,XK=-iM(ov/10)*fM,QK={draw(e,t){const a=Os(t*YK),n=ZK*a,s=XK*a;e.moveTo(0,-a),e.lineTo(n,s);for(let i=1;i<5;++i){const o=ov*i/5,l=iM(o),c=Qg(o);e.lineTo(c*a,-l*a),e.lineTo(l*n-c*s,c*n+l*s)}e.closePath()}},yb=Os(3),JK={draw(e,t){const a=-Os(t/(yb*3));e.moveTo(0,a*2),e.lineTo(-yb*a,-a),e.lineTo(yb*a,-a),e.closePath()}},Dn=-.5,In=Os(3)/2,Pw=1/Os(12),eV=(Pw/2+1)*3,tV={draw(e,t){const a=Os(t/eV),n=a/2,s=a*Pw,i=n,o=a*Pw+a,l=-i,c=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Dn*n-In*s,In*n+Dn*s),e.lineTo(Dn*i-In*o,In*i+Dn*o),e.lineTo(Dn*l-In*c,In*l+Dn*c),e.lineTo(Dn*n+In*s,Dn*s-In*n),e.lineTo(Dn*i+In*o,Dn*o-In*i),e.lineTo(Dn*l+In*c,Dn*c-In*l),e.closePath()}};function rV(e,t){let a=null,n=xk(s);e=typeof e=="function"?e:ir(e||vk),t=typeof t=="function"?t:ir(t===void 0?64:+t);function s(){let i;if(a||(a=i=n()),e.apply(this,arguments).draw(a,+t.apply(this,arguments)),i)return a=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:ir(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:ir(+i),s):t},s.context=function(i){return arguments.length?(a=i??null,s):a},s}function ex(){}function tx(e,t,a){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+a)/6)}function hM(e){this._context=e}hM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:tx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:tx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function aV(e){return new hM(e)}function gM(e){this._context=e}gM.prototype={areaStart:ex,areaEnd:ex,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:tx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function nV(e){return new gM(e)}function xM(e){this._context=e}xM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(a,n):this._context.moveTo(a,n);break;case 3:this._point=4;default:tx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function sV(e){return new xM(e)}function yM(e){this._context=e}yM.prototype={areaStart:ex,areaEnd:ex,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function iV(e){return new yM(e)}function wA(e){return e<0?-1:1}function _A(e,t,a){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(a-e._y1)/(s||n<0&&-0),l=(i*s+o*n)/(n+s);return(wA(i)+wA(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function kA(e,t){var a=e._x1-e._x0;return a?(3*(e._y1-e._y0)/a-t)/2:t}function vb(e,t,a){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,s+l*t,i-l,o-l*a,i,o)}function rx(e){this._context=e}rx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:vb(this,this._t0,kA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var a=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,vb(this,kA(this,a=_A(this,e,t)),a);break;default:vb(this,this._t0,a=_A(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=a}}};function vM(e){this._context=new bM(e)}(vM.prototype=Object.create(rx.prototype)).point=function(e,t){rx.prototype.point.call(this,t,e)};function bM(e){this._context=e}bM.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,a,n,s,i){this._context.bezierCurveTo(t,e,n,a,i,s)}};function oV(e){return new rx(e)}function lV(e){return new vM(e)}function jM(e){this._context=e}jM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,a=e.length;if(a)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),a===2)this._context.lineTo(e[1],t[1]);else for(var n=NA(e),s=NA(t),i=0,o=1;o<a;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function NA(e){var t,a=e.length-1,n,s=new Array(a),i=new Array(a),o=new Array(a);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<a-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[a-1]=2,i[a-1]=7,o[a-1]=8*e[a-1]+e[a],t=1;t<a;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[a-1]=o[a-1]/i[a-1],t=a-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[a-1]=(e[a]+s[a-1])/2,t=0;t<a-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function cV(e){return new jM(e)}function cv(e,t){this._context=e,this._t=t}cv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var a=this._x*(1-this._t)+e*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,t)}break}}this._x=e,this._y=t}};function dV(e){return new cv(e,.5)}function uV(e){return new cv(e,0)}function mV(e){return new cv(e,1)}function ud(e,t){if((o=e.length)>1)for(var a=1,n,s,i=e[t[0]],o,l=i.length;a<o;++a)for(s=i,i=e[t[a]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Cw(e){for(var t=e.length,a=new Array(t);--t>=0;)a[t]=t;return a}function pV(e,t){return e[t]}function fV(e){const t=[];return t.key=e,t}function hV(){var e=ir([]),t=Cw,a=ud,n=pV;function s(i){var o=Array.from(e.apply(this,arguments),fV),l,c=o.length,d=-1,u;for(const m of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+n(m,o[l].key,d,i)]).data=m;for(l=0,u=yk(t(o));l<c;++l)o[u[l]].index=l;return a(o,u),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:ir(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:ir(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?Cw:typeof i=="function"?i:ir(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(a=i??ud,s):a},s}function gV(e,t){if((n=e.length)>0){for(var a,n,s=0,i=e[0].length,o;s<i;++s){for(o=a=0;a<n;++a)o+=e[a][s][1]||0;if(o)for(a=0;a<n;++a)e[a][s][1]/=o}ud(e,t)}}function xV(e,t){if((s=e.length)>0){for(var a=0,n=e[t[0]],s,i=n.length;a<i;++a){for(var o=0,l=0;o<s;++o)l+=e[o][a][1]||0;n[a][1]+=n[a][0]=-l/2}ud(e,t)}}function yV(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var a=0,n=1,s,i,o;n<i;++n){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],m=u[n][1]||0,p=u[n-1][1]||0,g=(m-p)/2,x=0;x<l;++x){var h=e[t[x]],v=h[n][1]||0,b=h[n-1][1]||0;g+=v-b}c+=m,d+=g*m}s[n-1][1]+=s[n-1][0]=a,c&&(a-=d/c)}s[n-1][1]+=s[n-1][0]=a,ud(e,t)}}function mp(e){"@babel/helpers - typeof";return mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mp(e)}var vV=["type","size","sizeType"];function Ew(){return Ew=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ew.apply(this,arguments)}function SA(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function AA(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?SA(Object(a),!0).forEach(function(n){bV(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):SA(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function bV(e,t,a){return t=jV(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function jV(e){var t=wV(e,"string");return mp(t)=="symbol"?t:t+""}function wV(e,t){if(mp(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(mp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _V(e,t){if(e==null)return{};var a=kV(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function kV(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}var wM={symbolCircle:vk,symbolCross:HK,symbolDiamond:VK,symbolSquare:GK,symbolStar:QK,symbolTriangle:JK,symbolWye:tV},NV=Math.PI/180,SV=function(t){var a="symbol".concat(iv(t));return wM[a]||vk},AV=function(t,a,n){if(a==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*NV;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},PV=function(t,a){wM["symbol".concat(iv(t))]=a},dv=function(t){var a=t.type,n=a===void 0?"circle":a,s=t.size,i=s===void 0?64:s,o=t.sizeType,l=o===void 0?"area":o,c=_V(t,vV),d=AA(AA({},c),{},{type:n,size:i,sizeType:l}),u=function(){var v=SV(n),b=rV().type(v).size(AV(i,l,n));return b()},m=d.className,p=d.cx,g=d.cy,x=Qe(d,!0);return p===+p&&g===+g&&i===+i?le.createElement("path",Ew({},x,{className:wt("recharts-symbols",m),transform:"translate(".concat(p,", ").concat(g,")"),d:u()})):null};dv.registerSymbol=PV;function md(e){"@babel/helpers - typeof";return md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},md(e)}function Tw(){return Tw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Tw.apply(this,arguments)}function PA(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function CV(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?PA(Object(a),!0).forEach(function(n){pp(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):PA(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function EV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TV(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kM(n.key),n)}}function OV(e,t,a){return t&&TV(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function MV(e,t,a){return t=ax(t),DV(e,_M()?Reflect.construct(t,a||[],ax(e).constructor):t.apply(e,a))}function DV(e,t){if(t&&(md(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IV(e)}function IV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _M(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_M=function(){return!!e})()}function ax(e){return ax=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ax(e)}function LV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ow(e,t)}function Ow(e,t){return Ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Ow(e,t)}function pp(e,t,a){return t=kM(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function kM(e){var t=$V(e,"string");return md(t)=="symbol"?t:t+""}function $V(e,t){if(md(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(md(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ln=32,bk=function(e){function t(){return EV(this,t),MV(this,t,arguments)}return LV(t,e),OV(t,[{key:"renderIcon",value:function(n){var s=this.props.inactiveColor,i=Ln/2,o=Ln/6,l=Ln/3,c=n.inactive?s:n.color;if(n.type==="plainline")return le.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Ln,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return le.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Ln,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return le.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Ln/8,"h").concat(Ln,"v").concat(Ln*3/4,"h").concat(-Ln,"z"),className:"recharts-legend-icon"});if(le.isValidElement(n.legendIcon)){var d=CV({},n);return delete d.legendIcon,le.cloneElement(n.legendIcon,d)}return le.createElement(dv,{fill:c,cx:i,cy:i,size:Ln,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,c=s.formatter,d=s.inactiveColor,u={x:0,y:0,width:Ln,height:Ln},m={display:l==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(g,x){var h=g.formatter||c,v=wt(pp(pp({"recharts-legend-item":!0},"legend-item-".concat(x),!0),"inactive",g.inactive));if(g.type==="none")return null;var b=at(g.value)?null:g.value;Kn(!at(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=g.inactive?d:g.color;return le.createElement("li",Tw({className:v,style:m,key:"legend-item-".concat(x)},Ao(n.props,g,x)),le.createElement(up,{width:o,height:o,viewBox:u,style:p},n.renderIcon(g)),le.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},h?h(b,g,x):b))})}},{key:"render",value:function(){var n=this.props,s=n.payload,i=n.layout,o=n.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return le.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(f.PureComponent);pp(bk,"displayName","Legend");pp(bk,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var RV=Uy;function qV(){this.__data__=new RV,this.size=0}var FV=qV;function zV(e){var t=this.__data__,a=t.delete(e);return this.size=t.size,a}var BV=zV;function WV(e){return this.__data__.get(e)}var UV=WV;function HV(e){return this.__data__.has(e)}var KV=HV,VV=Uy,GV=uk,YV=mk,ZV=200;function XV(e,t){var a=this.__data__;if(a instanceof VV){var n=a.__data__;if(!GV||n.length<ZV-1)return n.push([e,t]),this.size=++a.size,this;a=this.__data__=new YV(n)}return a.set(e,t),this.size=a.size,this}var QV=XV,JV=Uy,eG=FV,tG=BV,rG=UV,aG=KV,nG=QV;function nu(e){var t=this.__data__=new JV(e);this.size=t.size}nu.prototype.clear=eG;nu.prototype.delete=tG;nu.prototype.get=rG;nu.prototype.has=aG;nu.prototype.set=nG;var jk=nu,sG="__lodash_hash_undefined__";function iG(e){return this.__data__.set(e,sG),this}var oG=iG;function lG(e){return this.__data__.has(e)}var cG=lG,dG=mk,uG=oG,mG=cG;function nx(e){var t=-1,a=e==null?0:e.length;for(this.__data__=new dG;++t<a;)this.add(e[t])}nx.prototype.add=nx.prototype.push=uG;nx.prototype.has=mG;var NM=nx;function pG(e,t){for(var a=-1,n=e==null?0:e.length;++a<n;)if(t(e[a],a,e))return!0;return!1}var SM=pG;function fG(e,t){return e.has(t)}var AM=fG,hG=NM,gG=SM,xG=AM,yG=1,vG=2;function bG(e,t,a,n,s,i){var o=a&yG,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var d=i.get(e),u=i.get(t);if(d&&u)return d==t&&u==e;var m=-1,p=!0,g=a&vG?new hG:void 0;for(i.set(e,t),i.set(t,e);++m<l;){var x=e[m],h=t[m];if(n)var v=o?n(h,x,m,t,e,i):n(x,h,m,e,t,i);if(v!==void 0){if(v)continue;p=!1;break}if(g){if(!gG(t,function(b,y){if(!xG(g,y)&&(x===b||s(x,b,a,n,i)))return g.push(y)})){p=!1;break}}else if(!(x===h||s(x,h,a,n,i))){p=!1;break}}return i.delete(e),i.delete(t),p}var PM=bG,jG=Cs,wG=jG.Uint8Array,CM=wG;function _G(e){var t=-1,a=Array(e.size);return e.forEach(function(n,s){a[++t]=[s,n]}),a}var kG=_G;function NG(e){var t=-1,a=Array(e.size);return e.forEach(function(n){a[++t]=n}),a}var wk=NG,CA=Qd,EA=CM,SG=By,AG=PM,PG=kG,CG=wk,EG=1,TG=2,OG="[object Boolean]",MG="[object Date]",DG="[object Error]",IG="[object Map]",LG="[object Number]",$G="[object RegExp]",RG="[object Set]",qG="[object String]",FG="[object Symbol]",zG="[object ArrayBuffer]",BG="[object DataView]",TA=CA?CA.prototype:void 0,bb=TA?TA.valueOf:void 0;function WG(e,t,a,n,s,i,o){switch(a){case BG:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case zG:return!(e.byteLength!=t.byteLength||!i(new EA(e),new EA(t)));case OG:case MG:case LG:return SG(+e,+t);case DG:return e.name==t.name&&e.message==t.message;case $G:case qG:return e==t+"";case IG:var l=PG;case RG:var c=n&EG;if(l||(l=CG),e.size!=t.size&&!c)return!1;var d=o.get(e);if(d)return d==t;n|=TG,o.set(e,t);var u=AG(l(e),l(t),n,s,i,o);return o.delete(e),u;case FG:if(bb)return bb.call(e)==bb.call(t)}return!1}var UG=WG;function HG(e,t){for(var a=-1,n=t.length,s=e.length;++a<n;)e[s+a]=t[a];return e}var _k=HG,KG=_k,VG=rn;function GG(e,t,a){var n=t(e);return VG(e)?n:KG(n,a(e))}var EM=GG;function YG(e,t){for(var a=-1,n=e==null?0:e.length,s=0,i=[];++a<n;){var o=e[a];t(o,a,e)&&(i[s++]=o)}return i}var ZG=YG;function XG(){return[]}var TM=XG,QG=ZG,JG=TM,eY=Object.prototype,tY=eY.propertyIsEnumerable,OA=Object.getOwnPropertySymbols,rY=OA?function(e){return e==null?[]:(e=Object(e),QG(OA(e),function(t){return tY.call(e,t)}))}:JG,kk=rY;function aY(e,t){for(var a=-1,n=Array(e);++a<e;)n[a]=t(a);return n}var nY=aY,sY=Mi,iY=Es,oY="[object Arguments]";function lY(e){return iY(e)&&sY(e)==oY}var cY=lY,MA=cY,dY=Es,OM=Object.prototype,uY=OM.hasOwnProperty,mY=OM.propertyIsEnumerable,pY=MA(function(){return arguments}())?MA:function(e){return dY(e)&&uY.call(e,"callee")&&!mY.call(e,"callee")},Nk=pY,sx={exports:{}};function fY(){return!1}var hY=fY;sx.exports;(function(e,t){var a=Cs,n=hY,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?a.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||n;e.exports=d})(sx,sx.exports);var Sk=sx.exports,gY=9007199254740991,xY=/^(?:0|[1-9]\d*)$/;function yY(e,t){var a=typeof e;return t=t??gY,!!t&&(a=="number"||a!="symbol"&&xY.test(e))&&e>-1&&e%1==0&&e<t}var Ak=yY,vY=9007199254740991;function bY(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=vY}var Pk=bY,jY=Mi,wY=Pk,_Y=Es,kY="[object Arguments]",NY="[object Array]",SY="[object Boolean]",AY="[object Date]",PY="[object Error]",CY="[object Function]",EY="[object Map]",TY="[object Number]",OY="[object Object]",MY="[object RegExp]",DY="[object Set]",IY="[object String]",LY="[object WeakMap]",$Y="[object ArrayBuffer]",RY="[object DataView]",qY="[object Float32Array]",FY="[object Float64Array]",zY="[object Int8Array]",BY="[object Int16Array]",WY="[object Int32Array]",UY="[object Uint8Array]",HY="[object Uint8ClampedArray]",KY="[object Uint16Array]",VY="[object Uint32Array]",ur={};ur[qY]=ur[FY]=ur[zY]=ur[BY]=ur[WY]=ur[UY]=ur[HY]=ur[KY]=ur[VY]=!0;ur[kY]=ur[NY]=ur[$Y]=ur[SY]=ur[RY]=ur[AY]=ur[PY]=ur[CY]=ur[EY]=ur[TY]=ur[OY]=ur[MY]=ur[DY]=ur[IY]=ur[LY]=!1;function GY(e){return _Y(e)&&wY(e.length)&&!!ur[jY(e)]}var YY=GY;function ZY(e){return function(t){return e(t)}}var uv=ZY,ix={exports:{}};ix.exports;(function(e,t){var a=R5,n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===n,o=i&&a.process,l=function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(ix,ix.exports);var Ck=ix.exports,XY=YY,QY=uv,DA=Ck,IA=DA&&DA.isTypedArray,JY=IA?QY(IA):XY,MM=JY,eZ=nY,tZ=Nk,rZ=rn,aZ=Sk,nZ=Ak,sZ=MM,iZ=Object.prototype,oZ=iZ.hasOwnProperty;function lZ(e,t){var a=rZ(e),n=!a&&tZ(e),s=!a&&!n&&aZ(e),i=!a&&!n&&!s&&sZ(e),o=a||n||s||i,l=o?eZ(e.length,String):[],c=l.length;for(var d in e)(t||oZ.call(e,d))&&!(o&&(d=="length"||s&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||nZ(d,c)))&&l.push(d);return l}var DM=lZ,cZ=Object.prototype;function dZ(e){var t=e&&e.constructor,a=typeof t=="function"&&t.prototype||cZ;return e===a}var Ek=dZ;function uZ(e,t){return function(a){return e(t(a))}}var IM=uZ,mZ=IM,pZ=mZ(Object.keys,Object),fZ=pZ,hZ=Ek,gZ=fZ,xZ=Object.prototype,yZ=xZ.hasOwnProperty;function vZ(e){if(!hZ(e))return gZ(e);var t=[];for(var a in Object(e))yZ.call(e,a)&&a!="constructor"&&t.push(a);return t}var bZ=vZ,jZ=dk,wZ=Pk;function _Z(e){return e!=null&&wZ(e.length)&&!jZ(e)}var su=_Z,kZ=DM,NZ=bZ,SZ=su;function AZ(e){return SZ(e)?kZ(e):NZ(e)}var iu=AZ,PZ=EM,CZ=kk,EZ=iu;function TZ(e){return PZ(e,EZ,CZ)}var LM=TZ,LA=LM,OZ=1,MZ=Object.prototype,DZ=MZ.hasOwnProperty;function IZ(e,t,a,n,s,i){var o=a&OZ,l=LA(e),c=l.length,d=LA(t),u=d.length;if(c!=u&&!o)return!1;for(var m=c;m--;){var p=l[m];if(!(o?p in t:DZ.call(t,p)))return!1}var g=i.get(e),x=i.get(t);if(g&&x)return g==t&&x==e;var h=!0;i.set(e,t),i.set(t,e);for(var v=o;++m<c;){p=l[m];var b=e[p],y=t[p];if(n)var j=o?n(y,b,p,t,e,i):n(b,y,p,e,t,i);if(!(j===void 0?b===y||s(b,y,a,n,i):j)){h=!1;break}v||(v=p=="constructor")}if(h&&!v){var _=e.constructor,w=t.constructor;_!=w&&"constructor"in e&&"constructor"in t&&!(typeof _=="function"&&_ instanceof _&&typeof w=="function"&&w instanceof w)&&(h=!1)}return i.delete(e),i.delete(t),h}var LZ=IZ,$Z=Ul,RZ=Cs,qZ=$Z(RZ,"DataView"),FZ=qZ,zZ=Ul,BZ=Cs,WZ=zZ(BZ,"Promise"),UZ=WZ,HZ=Ul,KZ=Cs,VZ=HZ(KZ,"Set"),$M=VZ,GZ=Ul,YZ=Cs,ZZ=GZ(YZ,"WeakMap"),XZ=ZZ,Mw=FZ,Dw=uk,Iw=UZ,Lw=$M,$w=XZ,RM=Mi,ou=F5,$A="[object Map]",QZ="[object Object]",RA="[object Promise]",qA="[object Set]",FA="[object WeakMap]",zA="[object DataView]",JZ=ou(Mw),eX=ou(Dw),tX=ou(Iw),rX=ou(Lw),aX=ou($w),el=RM;(Mw&&el(new Mw(new ArrayBuffer(1)))!=zA||Dw&&el(new Dw)!=$A||Iw&&el(Iw.resolve())!=RA||Lw&&el(new Lw)!=qA||$w&&el(new $w)!=FA)&&(el=function(e){var t=RM(e),a=t==QZ?e.constructor:void 0,n=a?ou(a):"";if(n)switch(n){case JZ:return zA;case eX:return $A;case tX:return RA;case rX:return qA;case aX:return FA}return t});var mv=el,jb=jk,nX=PM,sX=UG,iX=LZ,BA=mv,WA=rn,UA=Sk,oX=MM,lX=1,HA="[object Arguments]",KA="[object Array]",yh="[object Object]",cX=Object.prototype,VA=cX.hasOwnProperty;function dX(e,t,a,n,s,i){var o=WA(e),l=WA(t),c=o?KA:BA(e),d=l?KA:BA(t);c=c==HA?yh:c,d=d==HA?yh:d;var u=c==yh,m=d==yh,p=c==d;if(p&&UA(e)){if(!UA(t))return!1;o=!0,u=!1}if(p&&!u)return i||(i=new jb),o||oX(e)?nX(e,t,a,n,s,i):sX(e,t,c,a,n,s,i);if(!(a&lX)){var g=u&&VA.call(e,"__wrapped__"),x=m&&VA.call(t,"__wrapped__");if(g||x){var h=g?e.value():e,v=x?t.value():t;return i||(i=new jb),s(h,v,a,n,i)}}return p?(i||(i=new jb),iX(e,t,a,n,s,i)):!1}var uX=dX,mX=uX,GA=Es;function qM(e,t,a,n,s){return e===t?!0:e==null||t==null||!GA(e)&&!GA(t)?e!==e&&t!==t:mX(e,t,a,n,qM,s)}var Tk=qM,pX=jk,fX=Tk,hX=1,gX=2;function xX(e,t,a,n){var s=a.length,i=s,o=!n;if(e==null)return!i;for(e=Object(e);s--;){var l=a[s];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<i;){l=a[s];var c=l[0],d=e[c],u=l[1];if(o&&l[2]){if(d===void 0&&!(c in e))return!1}else{var m=new pX;if(n)var p=n(d,u,c,e,t,m);if(!(p===void 0?fX(u,d,hX|gX,n,m):p))return!1}}return!0}var yX=xX,vX=Ts;function bX(e){return e===e&&!vX(e)}var FM=bX,jX=FM,wX=iu;function _X(e){for(var t=wX(e),a=t.length;a--;){var n=t[a],s=e[n];t[a]=[n,s,jX(s)]}return t}var kX=_X;function NX(e,t){return function(a){return a==null?!1:a[e]===t&&(t!==void 0||e in Object(a))}}var zM=NX,SX=yX,AX=kX,PX=zM;function CX(e){var t=AX(e);return t.length==1&&t[0][2]?PX(t[0][0],t[0][1]):function(a){return a===e||SX(a,e,t)}}var EX=CX;function TX(e,t){return e!=null&&t in Object(e)}var OX=TX,MX=Vy,DX=Nk,IX=rn,LX=Ak,$X=Pk,RX=df;function qX(e,t,a){t=MX(t,e);for(var n=-1,s=t.length,i=!1;++n<s;){var o=RX(t[n]);if(!(i=e!=null&&a(e,o)))break;e=e[o]}return i||++n!=s?i:(s=e==null?0:e.length,!!s&&$X(s)&&LX(o,s)&&(IX(e)||DX(e)))}var FX=qX,zX=OX,BX=FX;function WX(e,t){return e!=null&&BX(e,t,zX)}var UX=WX,HX=Tk,KX=H5,VX=UX,GX=ck,YX=FM,ZX=zM,XX=df,QX=1,JX=2;function eQ(e,t){return GX(e)&&YX(t)?ZX(XX(e),t):function(a){var n=KX(a,e);return n===void 0&&n===t?VX(a,e):HX(t,n,QX|JX)}}var tQ=eQ;function rQ(e){return e}var lu=rQ;function aQ(e){return function(t){return t?.[e]}}var nQ=aQ,sQ=Gy;function iQ(e){return function(t){return sQ(t,e)}}var oQ=iQ,lQ=nQ,cQ=oQ,dQ=ck,uQ=df;function mQ(e){return dQ(e)?lQ(uQ(e)):cQ(e)}var pQ=mQ,fQ=EX,hQ=tQ,gQ=lu,xQ=rn,yQ=pQ;function vQ(e){return typeof e=="function"?e:e==null?gQ:typeof e=="object"?xQ(e)?hQ(e[0],e[1]):fQ(e):yQ(e)}var Ms=vQ;function bQ(e,t,a,n){for(var s=e.length,i=a+(n?1:-1);n?i--:++i<s;)if(t(e[i],i,e))return i;return-1}var BM=bQ;function jQ(e){return e!==e}var wQ=jQ;function _Q(e,t,a){for(var n=a-1,s=e.length;++n<s;)if(e[n]===t)return n;return-1}var kQ=_Q,NQ=BM,SQ=wQ,AQ=kQ;function PQ(e,t,a){return t===t?AQ(e,t,a):NQ(e,SQ,a)}var CQ=PQ,EQ=CQ;function TQ(e,t){var a=e==null?0:e.length;return!!a&&EQ(e,t,0)>-1}var OQ=TQ;function MQ(e,t,a){for(var n=-1,s=e==null?0:e.length;++n<s;)if(a(t,e[n]))return!0;return!1}var DQ=MQ;function IQ(){}var LQ=IQ,wb=$M,$Q=LQ,RQ=wk,qQ=1/0,FQ=wb&&1/RQ(new wb([,-0]))[1]==qQ?function(e){return new wb(e)}:$Q,zQ=FQ,BQ=NM,WQ=OQ,UQ=DQ,HQ=AM,KQ=zQ,VQ=wk,GQ=200;function YQ(e,t,a){var n=-1,s=WQ,i=e.length,o=!0,l=[],c=l;if(a)o=!1,s=UQ;else if(i>=GQ){var d=t?null:KQ(e);if(d)return VQ(d);o=!1,s=HQ,c=new BQ}else c=t?[]:l;e:for(;++n<i;){var u=e[n],m=t?t(u):u;if(u=a||u!==0?u:0,o&&m===m){for(var p=c.length;p--;)if(c[p]===m)continue e;t&&c.push(m),l.push(u)}else s(c,m,a)||(c!==l&&c.push(m),l.push(u))}return l}var ZQ=YQ,XQ=Ms,QQ=ZQ;function JQ(e,t){return e&&e.length?QQ(e,XQ(t)):[]}var eJ=JQ;const YA=Dt(eJ);function WM(e,t,a){return t===!0?YA(e,a):at(t)?YA(e,t):e}function pd(e){"@babel/helpers - typeof";return pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pd(e)}var tJ=["ref"];function ZA(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function ai(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?ZA(Object(a),!0).forEach(function(n){pv(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ZA(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function rJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XA(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HM(n.key),n)}}function aJ(e,t,a){return t&&XA(e.prototype,t),a&&XA(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function nJ(e,t,a){return t=ox(t),sJ(e,UM()?Reflect.construct(t,a||[],ox(e).constructor):t.apply(e,a))}function sJ(e,t){if(t&&(pd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iJ(e)}function iJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UM=function(){return!!e})()}function ox(e){return ox=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ox(e)}function oJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rw(e,t)}function Rw(e,t){return Rw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Rw(e,t)}function pv(e,t,a){return t=HM(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function HM(e){var t=lJ(e,"string");return pd(t)=="symbol"?t:t+""}function lJ(e,t){if(pd(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(pd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function cJ(e,t){if(e==null)return{};var a=dJ(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function dJ(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function uJ(e){return e.value}function mJ(e,t){if(le.isValidElement(e))return le.cloneElement(e,t);if(typeof e=="function")return le.createElement(e,t);t.ref;var a=cJ(t,tJ);return le.createElement(bk,a)}var QA=1,aa=function(e){function t(){var a;rJ(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=nJ(this,t,[].concat(s)),pv(a,"lastBoundingBox",{width:-1,height:-1}),a}return oJ(t,e),aJ(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>QA||Math.abs(s.height-this.lastBoundingBox.height)>QA)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,n&&n(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ai({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,c=s.margin,d=s.chartWidth,u=s.chartHeight,m,p;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var g=this.getBBoxSnapshot();m={left:((d||0)-g.width)/2}}else m=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var x=this.getBBoxSnapshot();p={top:((u||0)-x.height)/2}}else p=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return ai(ai({},m),p)}},{key:"render",value:function(){var n=this,s=this.props,i=s.content,o=s.width,l=s.height,c=s.wrapperStyle,d=s.payloadUniqBy,u=s.payload,m=ai(ai({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return le.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(g){n.wrapperNode=g}},mJ(i,ai(ai({},this.props),{},{payload:WM(u,d,uJ)})))}}],[{key:"getWithHeight",value:function(n,s){var i=ai(ai({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&He(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||s}:null}}])}(f.PureComponent);pv(aa,"displayName","Legend");pv(aa,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var JA=Qd,pJ=Nk,fJ=rn,eP=JA?JA.isConcatSpreadable:void 0;function hJ(e){return fJ(e)||pJ(e)||!!(eP&&e&&e[eP])}var gJ=hJ,xJ=_k,yJ=gJ;function KM(e,t,a,n,s){var i=-1,o=e.length;for(a||(a=yJ),s||(s=[]);++i<o;){var l=e[i];t>0&&a(l)?t>1?KM(l,t-1,a,n,s):xJ(s,l):n||(s[s.length]=l)}return s}var Ok=KM;function vJ(e){return function(t,a,n){for(var s=-1,i=Object(t),o=n(t),l=o.length;l--;){var c=o[e?l:++s];if(a(i[c],c,i)===!1)break}return t}}var bJ=vJ,jJ=bJ,wJ=jJ(),_J=wJ,kJ=_J,NJ=iu;function SJ(e,t){return e&&kJ(e,t,NJ)}var VM=SJ,AJ=su;function PJ(e,t){return function(a,n){if(a==null)return a;if(!AJ(a))return e(a,n);for(var s=a.length,i=t?s:-1,o=Object(a);(t?i--:++i<s)&&n(o[i],i,o)!==!1;);return a}}var CJ=PJ,EJ=VM,TJ=CJ,OJ=TJ(EJ),Mk=OJ,MJ=Mk,DJ=su;function IJ(e,t){var a=-1,n=DJ(e)?Array(e.length):[];return MJ(e,function(s,i,o){n[++a]=t(s,i,o)}),n}var GM=IJ;function LJ(e,t){var a=e.length;for(e.sort(t);a--;)e[a]=e[a].value;return e}var $J=LJ,tP=Jd;function RJ(e,t){if(e!==t){var a=e!==void 0,n=e===null,s=e===e,i=tP(e),o=t!==void 0,l=t===null,c=t===t,d=tP(t);if(!l&&!d&&!i&&e>t||i&&o&&c&&!l&&!d||n&&o&&c||!a&&c||!s)return 1;if(!n&&!i&&!d&&e<t||d&&a&&s&&!n&&!i||l&&a&&s||!o&&s||!c)return-1}return 0}var qJ=RJ,FJ=qJ;function zJ(e,t,a){for(var n=-1,s=e.criteria,i=t.criteria,o=s.length,l=a.length;++n<o;){var c=FJ(s[n],i[n]);if(c){if(n>=l)return c;var d=a[n];return c*(d=="desc"?-1:1)}}return e.index-t.index}var BJ=zJ,_b=Ky,WJ=Gy,UJ=Ms,HJ=GM,KJ=$J,VJ=uv,GJ=BJ,YJ=lu,ZJ=rn;function XJ(e,t,a){t.length?t=_b(t,function(i){return ZJ(i)?function(o){return WJ(o,i.length===1?i[0]:i)}:i}):t=[YJ];var n=-1;t=_b(t,VJ(UJ));var s=HJ(e,function(i,o,l){var c=_b(t,function(d){return d(i)});return{criteria:c,index:++n,value:i}});return KJ(s,function(i,o){return GJ(i,o,a)})}var QJ=XJ;function JJ(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}var eee=JJ,tee=eee,rP=Math.max;function ree(e,t,a){return t=rP(t===void 0?e.length-1:t,0),function(){for(var n=arguments,s=-1,i=rP(n.length-t,0),o=Array(i);++s<i;)o[s]=n[t+s];s=-1;for(var l=Array(t+1);++s<t;)l[s]=n[s];return l[t]=a(o),tee(e,this,l)}}var YM=ree;function aee(e){return function(){return e}}var nee=aee,see=Ul,iee=function(){try{var e=see(Object,"defineProperty");return e({},"",{}),e}catch{}}(),ZM=iee,oee=nee,aP=ZM,lee=lu,cee=aP?function(e,t){return aP(e,"toString",{configurable:!0,enumerable:!1,value:oee(t),writable:!0})}:lee,dee=cee,uee=800,mee=16,pee=Date.now;function fee(e){var t=0,a=0;return function(){var n=pee(),s=mee-(n-a);if(a=n,s>0){if(++t>=uee)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var hee=fee,gee=dee,xee=hee,yee=xee(gee),XM=yee,vee=lu,bee=YM,jee=XM;function wee(e,t){return jee(bee(e,t,vee),e+"")}var _ee=wee,kee=By,Nee=su,See=Ak,Aee=Ts;function Pee(e,t,a){if(!Aee(a))return!1;var n=typeof t;return(n=="number"?Nee(a)&&See(t,a.length):n=="string"&&t in a)?kee(a[t],e):!1}var fv=Pee,Cee=Ok,Eee=QJ,Tee=_ee,nP=fv,Oee=Tee(function(e,t){if(e==null)return[];var a=t.length;return a>1&&nP(e,t[0],t[1])?t=[]:a>2&&nP(t[0],t[1],t[2])&&(t=[t[0]]),Eee(e,Cee(t,1),[])}),Mee=Oee;const Dk=Dt(Mee);function fp(e){"@babel/helpers - typeof";return fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fp(e)}function qw(){return qw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},qw.apply(this,arguments)}function Dee(e,t){return Ree(e)||$ee(e,t)||Lee(e,t)||Iee()}function Iee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lee(e,t){if(e){if(typeof e=="string")return sP(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return sP(e,t)}}function sP(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function $ee(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(a=a.call(e)).next,t!==0)for(;!(c=(n=i.call(a)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&a.return!=null&&(o=a.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Ree(e){if(Array.isArray(e))return e}function iP(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function kb(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?iP(Object(a),!0).forEach(function(n){qee(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):iP(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function qee(e,t,a){return t=Fee(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Fee(e){var t=zee(e,"string");return fp(t)=="symbol"?t:t+""}function zee(e,t){if(fp(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(fp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bee(e){return Array.isArray(e)&&ia(e[0])&&ia(e[1])?e.join(" ~ "):e}var Wee=function(t){var a=t.separator,n=a===void 0?" : ":a,s=t.contentStyle,i=s===void 0?{}:s,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,d=c===void 0?{}:c,u=t.payload,m=t.formatter,p=t.itemSorter,g=t.wrapperClassName,x=t.labelClassName,h=t.label,v=t.labelFormatter,b=t.accessibilityLayer,y=b===void 0?!1:b,j=function(){if(u&&u.length){var O={padding:0,margin:0},q=(p?Dk(u,p):u).map(function(S,I){if(S.type==="none")return null;var E=kb({display:"block",paddingTop:4,paddingBottom:4,color:S.color||"#000"},l),W=S.formatter||m||Bee,B=S.value,C=S.name,D=B,z=C;if(W&&D!=null&&z!=null){var L=W(B,C,S,I,u);if(Array.isArray(L)){var X=Dee(L,2);D=X[0],z=X[1]}else D=L}return le.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(I),style:E},ia(z)?le.createElement("span",{className:"recharts-tooltip-item-name"},z):null,ia(z)?le.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,le.createElement("span",{className:"recharts-tooltip-item-value"},D),le.createElement("span",{className:"recharts-tooltip-item-unit"},S.unit||""))});return le.createElement("ul",{className:"recharts-tooltip-item-list",style:O},q)}return null},_=kb({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),w=kb({margin:0},d),k=!dt(h),N=k?h:"",P=wt("recharts-default-tooltip",g),A=wt("recharts-tooltip-label",x);k&&v&&u!==void 0&&u!==null&&(N=v(h,u));var M=y?{role:"status","aria-live":"assertive"}:{};return le.createElement("div",qw({className:P,style:_},M),le.createElement("p",{className:A,style:w},le.isValidElement(N)?N:"".concat(N)),j())};function hp(e){"@babel/helpers - typeof";return hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hp(e)}function vh(e,t,a){return t=Uee(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Uee(e){var t=Hee(e,"string");return hp(t)=="symbol"?t:t+""}function Hee(e,t){if(hp(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(hp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xu="recharts-tooltip-wrapper",Kee={visibility:"hidden"};function Vee(e){var t=e.coordinate,a=e.translateX,n=e.translateY;return wt(Xu,vh(vh(vh(vh({},"".concat(Xu,"-right"),He(a)&&t&&He(t.x)&&a>=t.x),"".concat(Xu,"-left"),He(a)&&t&&He(t.x)&&a<t.x),"".concat(Xu,"-bottom"),He(n)&&t&&He(t.y)&&n>=t.y),"".concat(Xu,"-top"),He(n)&&t&&He(t.y)&&n<t.y))}function oP(e){var t=e.allowEscapeViewBox,a=e.coordinate,n=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(i&&He(i[n]))return i[n];var u=a[n]-l-s,m=a[n]+s;if(t[n])return o[n]?u:m;if(o[n]){var p=u,g=c[n];return p<g?Math.max(m,c[n]):Math.max(u,c[n])}var x=m+l,h=c[n]+d;return x>h?Math.max(u,c[n]):Math.max(m,c[n])}function Gee(e){var t=e.translateX,a=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(a,"px, 0)"):"translate(".concat(t,"px, ").concat(a,"px)")}}function Yee(e){var t=e.allowEscapeViewBox,a=e.coordinate,n=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,d,u,m;return o.height>0&&o.width>0&&a?(u=oP({allowEscapeViewBox:t,coordinate:a,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),m=oP({allowEscapeViewBox:t,coordinate:a,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=Gee({translateX:u,translateY:m,useTranslate3d:l})):d=Kee,{cssProperties:d,cssClasses:Vee({translateX:u,translateY:m,coordinate:a})}}function fd(e){"@babel/helpers - typeof";return fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fd(e)}function lP(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function cP(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?lP(Object(a),!0).forEach(function(n){zw(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lP(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Zee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xee(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,JM(n.key),n)}}function Qee(e,t,a){return t&&Xee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jee(e,t,a){return t=lx(t),ete(e,QM()?Reflect.construct(t,a||[],lx(e).constructor):t.apply(e,a))}function ete(e,t){if(t&&(fd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tte(e)}function tte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QM=function(){return!!e})()}function lx(e){return lx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},lx(e)}function rte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fw(e,t)}function Fw(e,t){return Fw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Fw(e,t)}function zw(e,t,a){return t=JM(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function JM(e){var t=ate(e,"string");return fd(t)=="symbol"?t:t+""}function ate(e,t){if(fd(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(fd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var dP=1,nte=function(e){function t(){var a;Zee(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=Jee(this,t,[].concat(s)),zw(a,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),zw(a,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,u;a.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=a.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(u=a.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),a}return rte(t,e),Qee(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>dP||Math.abs(n.height-this.state.lastBoundingBox.height)>dP)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,d=s.children,u=s.coordinate,m=s.hasPayload,p=s.isAnimationActive,g=s.offset,x=s.position,h=s.reverseDirection,v=s.useTranslate3d,b=s.viewBox,y=s.wrapperStyle,j=Yee({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:g,position:x,reverseDirection:h,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:b}),_=j.cssClasses,w=j.cssProperties,k=cP(cP({transition:p&&i?"transform ".concat(l,"ms ").concat(c):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&m?"visible":"hidden",position:"absolute",top:0,left:0},y);return le.createElement("div",{tabIndex:-1,className:_,style:k,ref:function(P){n.wrapperNode=P}},d)}}])}(f.PureComponent),ste=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ss={isSsr:ste()};function hd(e){"@babel/helpers - typeof";return hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hd(e)}function uP(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function mP(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?uP(Object(a),!0).forEach(function(n){Ik(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):uP(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function ite(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ote(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tD(n.key),n)}}function lte(e,t,a){return t&&ote(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cte(e,t,a){return t=cx(t),dte(e,eD()?Reflect.construct(t,a||[],cx(e).constructor):t.apply(e,a))}function dte(e,t){if(t&&(hd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ute(e)}function ute(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eD=function(){return!!e})()}function cx(e){return cx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},cx(e)}function mte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bw(e,t)}function Bw(e,t){return Bw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Bw(e,t)}function Ik(e,t,a){return t=tD(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function tD(e){var t=pte(e,"string");return hd(t)=="symbol"?t:t+""}function pte(e,t){if(hd(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(hd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function fte(e){return e.dataKey}function hte(e,t){return le.isValidElement(e)?le.cloneElement(e,t):typeof e=="function"?le.createElement(e,t):le.createElement(Wee,t)}var tt=function(e){function t(){return ite(this,t),cte(this,t,arguments)}return mte(t,e),lte(t,[{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,d=s.content,u=s.coordinate,m=s.filterNull,p=s.isAnimationActive,g=s.offset,x=s.payload,h=s.payloadUniqBy,v=s.position,b=s.reverseDirection,y=s.useTranslate3d,j=s.viewBox,_=s.wrapperStyle,w=x??[];m&&w.length&&(w=WM(x.filter(function(N){return N.value!=null&&(N.hide!==!0||n.props.includeHidden)}),h,fte));var k=w.length>0;return le.createElement(nte,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:p,active:i,coordinate:u,hasPayload:k,offset:g,position:v,reverseDirection:b,useTranslate3d:y,viewBox:j,wrapperStyle:_},hte(d,mP(mP({},this.props),{},{payload:w})))}}])}(f.PureComponent);Ik(tt,"displayName","Tooltip");Ik(tt,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ss.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var gte=Cs,xte=function(){return gte.Date.now()},yte=xte,vte=/\s/;function bte(e){for(var t=e.length;t--&&vte.test(e.charAt(t)););return t}var jte=bte,wte=jte,_te=/^\s+/;function kte(e){return e&&e.slice(0,wte(e)+1).replace(_te,"")}var Nte=kte,Ste=Nte,pP=Ts,Ate=Jd,fP=NaN,Pte=/^[-+]0x[0-9a-f]+$/i,Cte=/^0b[01]+$/i,Ete=/^0o[0-7]+$/i,Tte=parseInt;function Ote(e){if(typeof e=="number")return e;if(Ate(e))return fP;if(pP(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=pP(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Ste(e);var a=Cte.test(e);return a||Ete.test(e)?Tte(e.slice(2),a?2:8):Pte.test(e)?fP:+e}var rD=Ote,Mte=Ts,Nb=yte,hP=rD,Dte="Expected a function",Ite=Math.max,Lte=Math.min;function $te(e,t,a){var n,s,i,o,l,c,d=0,u=!1,m=!1,p=!0;if(typeof e!="function")throw new TypeError(Dte);t=hP(t)||0,Mte(a)&&(u=!!a.leading,m="maxWait"in a,i=m?Ite(hP(a.maxWait)||0,t):i,p="trailing"in a?!!a.trailing:p);function g(k){var N=n,P=s;return n=s=void 0,d=k,o=e.apply(P,N),o}function x(k){return d=k,l=setTimeout(b,t),u?g(k):o}function h(k){var N=k-c,P=k-d,A=t-N;return m?Lte(A,i-P):A}function v(k){var N=k-c,P=k-d;return c===void 0||N>=t||N<0||m&&P>=i}function b(){var k=Nb();if(v(k))return y(k);l=setTimeout(b,h(k))}function y(k){return l=void 0,p&&n?g(k):(n=s=void 0,o)}function j(){l!==void 0&&clearTimeout(l),d=0,n=c=s=l=void 0}function _(){return l===void 0?o:y(Nb())}function w(){var k=Nb(),N=v(k);if(n=arguments,s=this,c=k,N){if(l===void 0)return x(c);if(m)return clearTimeout(l),l=setTimeout(b,t),g(c)}return l===void 0&&(l=setTimeout(b,t)),o}return w.cancel=j,w.flush=_,w}var Rte=$te,qte=Rte,Fte=Ts,zte="Expected a function";function Bte(e,t,a){var n=!0,s=!0;if(typeof e!="function")throw new TypeError(zte);return Fte(a)&&(n="leading"in a?!!a.leading:n,s="trailing"in a?!!a.trailing:s),qte(e,t,{leading:n,maxWait:t,trailing:s})}var Wte=Bte;const aD=Dt(Wte);function gp(e){"@babel/helpers - typeof";return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gp(e)}function gP(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function bh(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?gP(Object(a),!0).forEach(function(n){Ute(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gP(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Ute(e,t,a){return t=Hte(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Hte(e){var t=Kte(e,"string");return gp(t)=="symbol"?t:t+""}function Kte(e,t){if(gp(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(gp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vte(e,t){return Xte(e)||Zte(e,t)||Yte(e,t)||Gte()}function Gte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yte(e,t){if(e){if(typeof e=="string")return xP(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return xP(e,t)}}function xP(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Zte(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(a=a.call(e)).next,t!==0)for(;!(c=(n=i.call(a)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&a.return!=null&&(o=a.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Xte(e){if(Array.isArray(e))return e}var ht=f.forwardRef(function(e,t){var a=e.aspect,n=e.initialDimension,s=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,d=e.minWidth,u=d===void 0?0:d,m=e.minHeight,p=e.maxHeight,g=e.children,x=e.debounce,h=x===void 0?0:x,v=e.id,b=e.className,y=e.onResize,j=e.style,_=j===void 0?{}:j,w=f.useRef(null),k=f.useRef();k.current=y,f.useImperativeHandle(t,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var N=f.useState({containerWidth:s.width,containerHeight:s.height}),P=Vte(N,2),A=P[0],M=P[1],R=f.useCallback(function(q,S){M(function(I){var E=Math.round(q),W=Math.round(S);return I.containerWidth===E&&I.containerHeight===W?I:{containerWidth:E,containerHeight:W}})},[]);f.useEffect(function(){var q=function(C){var D,z=C[0].contentRect,L=z.width,X=z.height;R(L,X),(D=k.current)===null||D===void 0||D.call(k,L,X)};h>0&&(q=aD(q,h,{trailing:!0,leading:!1}));var S=new ResizeObserver(q),I=w.current.getBoundingClientRect(),E=I.width,W=I.height;return R(E,W),S.observe(w.current),function(){S.disconnect()}},[R,h]);var O=f.useMemo(function(){var q=A.containerWidth,S=A.containerHeight;if(q<0||S<0)return null;Kn(ul(o)||ul(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Kn(!a||a>0,"The aspect(%s) must be greater than zero.",a);var I=ul(o)?q:o,E=ul(c)?S:c;a&&a>0&&(I?E=I/a:E&&(I=E*a),p&&E>p&&(E=p)),Kn(I>0||E>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,E,o,c,u,m,a);var W=!Array.isArray(g)&&gi(g.type).endsWith("Chart");return le.Children.map(g,function(B){return le.isValidElement(B)?f.cloneElement(B,bh({width:I,height:E},W?{style:bh({height:"100%",width:"100%",maxHeight:E,maxWidth:I},B.props.style)}:{})):B})},[a,g,c,p,m,u,A,o]);return le.createElement("div",{id:v?"".concat(v):void 0,className:wt("recharts-responsive-container",b),style:bh(bh({},_),{},{width:o,height:c,minWidth:u,minHeight:m,maxHeight:p}),ref:w},O)}),Vn=function(t){return null};Vn.displayName="Cell";function xp(e){"@babel/helpers - typeof";return xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xp(e)}function yP(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Ww(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?yP(Object(a),!0).forEach(function(n){Qte(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yP(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Qte(e,t,a){return t=Jte(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Jte(e){var t=ere(e,"string");return xp(t)=="symbol"?t:t+""}function ere(e,t){if(xp(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(xp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pc={widthCache:{},cacheCount:0},tre=2e3,rre={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},vP="recharts_measurement_span";function are(e){var t=Ww({},e);return Object.keys(t).forEach(function(a){t[a]||delete t[a]}),t}var Yc=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ss.isSsr)return{width:0,height:0};var n=are(a),s=JSON.stringify({text:t,copyStyle:n});if(pc.widthCache[s])return pc.widthCache[s];try{var i=document.getElementById(vP);i||(i=document.createElement("span"),i.setAttribute("id",vP),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=Ww(Ww({},rre),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return pc.widthCache[s]=c,++pc.cacheCount>tre&&(pc.cacheCount=0,pc.widthCache={}),c}catch{return{width:0,height:0}}},nre=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function yp(e){"@babel/helpers - typeof";return yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yp(e)}function dx(e,t){return lre(e)||ore(e,t)||ire(e,t)||sre()}function sre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ire(e,t){if(e){if(typeof e=="string")return bP(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return bP(e,t)}}function bP(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function ore(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(a=a.call(e)).next,t===0){if(Object(a)!==a)return;c=!1}else for(;!(c=(n=i.call(a)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&a.return!=null&&(o=a.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function lre(e){if(Array.isArray(e))return e}function cre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jP(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ure(n.key),n)}}function dre(e,t,a){return t&&jP(e.prototype,t),a&&jP(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function ure(e){var t=mre(e,"string");return yp(t)=="symbol"?t:t+""}function mre(e,t){if(yp(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(yp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var wP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,_P=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,pre=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,fre=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,nD={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},hre=Object.keys(nD),Mc="NaN";function gre(e,t){return e*nD[t]}var jh=function(){function e(t,a){cre(this,e),this.num=t,this.unit=a,this.num=t,this.unit=a,Number.isNaN(t)&&(this.unit=""),a!==""&&!pre.test(a)&&(this.num=NaN,this.unit=""),hre.includes(a)&&(this.num=gre(t,a),this.unit="px")}return dre(e,[{key:"add",value:function(a){return this.unit!==a.unit?new e(NaN,""):new e(this.num+a.num,this.unit)}},{key:"subtract",value:function(a){return this.unit!==a.unit?new e(NaN,""):new e(this.num-a.num,this.unit)}},{key:"multiply",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new e(NaN,""):new e(this.num*a.num,this.unit||a.unit)}},{key:"divide",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new e(NaN,""):new e(this.num/a.num,this.unit||a.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(a){var n,s=(n=fre.exec(a))!==null&&n!==void 0?n:[],i=dx(s,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function sD(e){if(e.includes(Mc))return Mc;for(var t=e;t.includes("*")||t.includes("/");){var a,n=(a=wP.exec(t))!==null&&a!==void 0?a:[],s=dx(n,4),i=s[1],o=s[2],l=s[3],c=jh.parse(i??""),d=jh.parse(l??""),u=o==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return Mc;t=t.replace(wP,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,p=(m=_P.exec(t))!==null&&m!==void 0?m:[],g=dx(p,4),x=g[1],h=g[2],v=g[3],b=jh.parse(x??""),y=jh.parse(v??""),j=h==="+"?b.add(y):b.subtract(y);if(j.isNaN())return Mc;t=t.replace(_P,j.toString())}return t}var kP=/\(([^()]*)\)/;function xre(e){for(var t=e;t.includes("(");){var a=kP.exec(t),n=dx(a,2),s=n[1];t=t.replace(kP,sD(s))}return t}function yre(e){var t=e.replace(/\s+/g,"");return t=xre(t),t=sD(t),t}function vre(e){try{return yre(e)}catch{return Mc}}function Sb(e){var t=vre(e.slice(5,-1));return t===Mc?"":t}var bre=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],jre=["dx","dy","angle","className","breakAll"];function Uw(){return Uw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Uw.apply(this,arguments)}function NP(e,t){if(e==null)return{};var a=wre(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function wre(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function SP(e,t){return Sre(e)||Nre(e,t)||kre(e,t)||_re()}function _re(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kre(e,t){if(e){if(typeof e=="string")return AP(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return AP(e,t)}}function AP(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Nre(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(a=a.call(e)).next,t===0){if(Object(a)!==a)return;c=!1}else for(;!(c=(n=i.call(a)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&a.return!=null&&(o=a.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Sre(e){if(Array.isArray(e))return e}var iD=/[ \f\n\r\t\v\u2028\u2029]+/,oD=function(t){var a=t.children,n=t.breakAll,s=t.style;try{var i=[];dt(a)||(n?i=a.toString().split(""):i=a.toString().split(iD));var o=i.map(function(c){return{word:c,width:Yc(c,s).width}}),l=n?0:Yc("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},Are=function(t,a,n,s,i){var o=t.maxLines,l=t.children,c=t.style,d=t.breakAll,u=He(o),m=l,p=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return I.reduce(function(E,W){var B=W.word,C=W.width,D=E[E.length-1];if(D&&(s==null||i||D.width+C+n<Number(s)))D.words.push(B),D.width+=C+n;else{var z={words:[B],width:C};E.push(z)}return E},[])},g=p(a),x=function(I){return I.reduce(function(E,W){return E.width>W.width?E:W})};if(!u)return g;for(var h="",v=function(I){var E=m.slice(0,I),W=oD({breakAll:d,style:c,children:E+h}).wordsWithComputedWidth,B=p(W),C=B.length>o||x(B).width>Number(s);return[C,B]},b=0,y=m.length-1,j=0,_;b<=y&&j<=m.length-1;){var w=Math.floor((b+y)/2),k=w-1,N=v(k),P=SP(N,2),A=P[0],M=P[1],R=v(w),O=SP(R,1),q=O[0];if(!A&&!q&&(b=w+1),A&&q&&(y=w-1),!A&&q){_=M;break}j++}return _||g},PP=function(t){var a=dt(t)?[]:t.toString().split(iD);return[{words:a}]},Pre=function(t){var a=t.width,n=t.scaleToFit,s=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((a||n)&&!Ss.isSsr){var c,d,u=oD({breakAll:o,children:s,style:i});if(u){var m=u.wordsWithComputedWidth,p=u.spaceWidth;c=m,d=p}else return PP(s);return Are({breakAll:o,children:s,maxLines:l,style:i},c,d,a,n)}return PP(s)},CP="#808080",Il=function(t){var a=t.x,n=a===void 0?0:a,s=t.y,i=s===void 0?0:s,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,d=c===void 0?"0.71em":c,u=t.scaleToFit,m=u===void 0?!1:u,p=t.textAnchor,g=p===void 0?"start":p,x=t.verticalAnchor,h=x===void 0?"end":x,v=t.fill,b=v===void 0?CP:v,y=NP(t,bre),j=f.useMemo(function(){return Pre({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:m,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,m,y.style,y.width]),_=y.dx,w=y.dy,k=y.angle,N=y.className,P=y.breakAll,A=NP(y,jre);if(!ia(n)||!ia(i))return null;var M=n+(He(_)?_:0),R=i+(He(w)?w:0),O;switch(h){case"start":O=Sb("calc(".concat(d,")"));break;case"middle":O=Sb("calc(".concat((j.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:O=Sb("calc(".concat(j.length-1," * -").concat(l,")"));break}var q=[];if(m){var S=j[0].width,I=y.width;q.push("scale(".concat((He(I)?I/S:1)/S,")"))}return k&&q.push("rotate(".concat(k,", ").concat(M,", ").concat(R,")")),q.length&&(A.transform=q.join(" ")),le.createElement("text",Uw({},Qe(A,!0),{x:M,y:R,className:wt("recharts-text",N),textAnchor:g,fill:b.includes("url")?CP:b}),j.map(function(E,W){var B=E.words.join(P?"":" ");return le.createElement("tspan",{x:M,dy:W===0?O:l,key:"".concat(B,"-").concat(W)},B)}))};function wo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Cre(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Lk(e){let t,a,n;e.length!==2?(t=wo,a=(l,c)=>wo(e(l),c),n=(l,c)=>e(l)-c):(t=e===wo||e===Cre?e:Ere,a=e,n=e);function s(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const m=d+u>>>1;a(l[m],c)<0?d=m+1:u=m}while(d<u)}return d}function i(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const m=d+u>>>1;a(l[m],c)<=0?d=m+1:u=m}while(d<u)}return d}function o(l,c,d=0,u=l.length){const m=s(l,c,d,u-1);return m>d&&n(l[m-1],c)>-n(l[m],c)?m-1:m}return{left:s,center:o,right:i}}function Ere(){return 0}function lD(e){return e===null?NaN:+e}function*Tre(e,t){for(let a of e)a!=null&&(a=+a)>=a&&(yield a)}const Ore=Lk(wo),uf=Ore.right;Lk(lD).center;class EP extends Map{constructor(t,a=Ire){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(TP(this,t))}has(t){return super.has(TP(this,t))}set(t,a){return super.set(Mre(this,t),a)}delete(t){return super.delete(Dre(this,t))}}function TP({_intern:e,_key:t},a){const n=t(a);return e.has(n)?e.get(n):a}function Mre({_intern:e,_key:t},a){const n=t(a);return e.has(n)?e.get(n):(e.set(n,a),a)}function Dre({_intern:e,_key:t},a){const n=t(a);return e.has(n)&&(a=e.get(n),e.delete(n)),a}function Ire(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Lre(e=wo){if(e===wo)return cD;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,a)=>{const n=e(t,a);return n||n===0?n:(e(a,a)===0)-(e(t,t)===0)}}function cD(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const $re=Math.sqrt(50),Rre=Math.sqrt(10),qre=Math.sqrt(2);function ux(e,t,a){const n=(t-e)/Math.max(0,a),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=$re?10:i>=Rre?5:i>=qre?2:1;let l,c,d;return s<0?(d=Math.pow(10,-s)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,s)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=a&&a<2?ux(e,t,a*2):[l,c,d]}function Hw(e,t,a){if(t=+t,e=+e,a=+a,!(a>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?ux(t,e,a):ux(e,t,a);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(n)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(s+d)/-o;else for(let d=0;d<l;++d)c[d]=(s+d)*o;return c}function Kw(e,t,a){return t=+t,e=+e,a=+a,ux(e,t,a)[2]}function Vw(e,t,a){t=+t,e=+e,a=+a;const n=t<e,s=n?Kw(t,e,a):Kw(e,t,a);return(n?-1:1)*(s<0?1/-s:s)}function OP(e,t){let a;for(const n of e)n!=null&&(a<n||a===void 0&&n>=n)&&(a=n);return a}function MP(e,t){let a;for(const n of e)n!=null&&(a>n||a===void 0&&n>=n)&&(a=n);return a}function dD(e,t,a=0,n=1/0,s){if(t=Math.floor(t),a=Math.floor(Math.max(0,a)),n=Math.floor(Math.min(e.length-1,n)),!(a<=t&&t<=n))return e;for(s=s===void 0?cD:Lre(s);n>a;){if(n-a>600){const c=n-a+1,d=t-a+1,u=Math.log(c),m=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*m*(c-m)/c)*(d-c/2<0?-1:1),g=Math.max(a,Math.floor(t-d*m/c+p)),x=Math.min(n,Math.floor(t+(c-d)*m/c+p));dD(e,t,g,x,s)}const i=e[t];let o=a,l=n;for(Qu(e,a,t),s(e[n],i)>0&&Qu(e,a,n);o<l;){for(Qu(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[a],i)===0?Qu(e,a,l):(++l,Qu(e,l,n)),l<=t&&(a=l+1),t<=l&&(n=l-1)}return e}function Qu(e,t,a){const n=e[t];e[t]=e[a],e[a]=n}function Fre(e,t,a){if(e=Float64Array.from(Tre(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return MP(e);if(t>=1)return OP(e);var n,s=(n-1)*t,i=Math.floor(s),o=OP(dD(e,i).subarray(0,i+1)),l=MP(e.subarray(i+1));return o+(l-o)*(s-i)}}function zre(e,t,a=lD){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+a(e[0],0,e);if(t>=1)return+a(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+a(e[i],i,e),l=+a(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function Bre(e,t,a){e=+e,t=+t,a=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+a;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/a))|0,i=new Array(s);++n<s;)i[n]=e+n*a;return i}function Jn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ii(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Gw=Symbol("implicit");function $k(){var e=new EP,t=[],a=[],n=Gw;function s(i){let o=e.get(i);if(o===void 0){if(n!==Gw)return n;e.set(i,o=t.push(i)-1)}return a[o%a.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new EP;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(a=Array.from(i),s):a.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return $k(t,a).unknown(n)},Jn.apply(s,arguments),s}function vp(){var e=$k().unknown(void 0),t=e.domain,a=e.range,n=0,s=1,i,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function m(){var p=t().length,g=s<n,x=g?s:n,h=g?n:s;i=(h-x)/Math.max(1,p-c+d*2),l&&(i=Math.floor(i)),x+=(h-x-i*(p-c))*u,o=i*(1-c),l&&(x=Math.round(x),o=Math.round(o));var v=Bre(p).map(function(b){return x+i*b});return a(g?v.reverse():v)}return e.domain=function(p){return arguments.length?(t(p),m()):t()},e.range=function(p){return arguments.length?([n,s]=p,n=+n,s=+s,m()):[n,s]},e.rangeRound=function(p){return[n,s]=p,n=+n,s=+s,l=!0,m()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(p){return arguments.length?(l=!!p,m()):l},e.padding=function(p){return arguments.length?(c=Math.min(1,d=+p),m()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),m()):c},e.paddingOuter=function(p){return arguments.length?(d=+p,m()):d},e.align=function(p){return arguments.length?(u=Math.max(0,Math.min(1,p)),m()):u},e.copy=function(){return vp(t(),[n,s]).round(l).paddingInner(c).paddingOuter(d).align(u)},Jn.apply(m(),arguments)}function uD(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return uD(t())},e}function Lm(){return uD(vp.apply(null,arguments).paddingInner(1))}function Rk(e,t,a){e.prototype=t.prototype=a,a.constructor=e}function mD(e,t){var a=Object.create(e.prototype);for(var n in t)a[n]=t[n];return a}function mf(){}var bp=.7,mx=1/bp,Zc="\\s*([+-]?\\d+)\\s*",jp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Vs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wre=/^#([0-9a-f]{3,8})$/,Ure=new RegExp(`^rgb\\(${Zc},${Zc},${Zc}\\)$`),Hre=new RegExp(`^rgb\\(${Vs},${Vs},${Vs}\\)$`),Kre=new RegExp(`^rgba\\(${Zc},${Zc},${Zc},${jp}\\)$`),Vre=new RegExp(`^rgba\\(${Vs},${Vs},${Vs},${jp}\\)$`),Gre=new RegExp(`^hsl\\(${jp},${Vs},${Vs}\\)$`),Yre=new RegExp(`^hsla\\(${jp},${Vs},${Vs},${jp}\\)$`),DP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Rk(mf,wp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:IP,formatHex:IP,formatHex8:Zre,formatHsl:Xre,formatRgb:LP,toString:LP});function IP(){return this.rgb().formatHex()}function Zre(){return this.rgb().formatHex8()}function Xre(){return pD(this).formatHsl()}function LP(){return this.rgb().formatRgb()}function wp(e){var t,a;return e=(e+"").trim().toLowerCase(),(t=Wre.exec(e))?(a=t[1].length,t=parseInt(t[1],16),a===6?$P(t):a===3?new ln(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):a===8?wh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):a===4?wh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ure.exec(e))?new ln(t[1],t[2],t[3],1):(t=Hre.exec(e))?new ln(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Kre.exec(e))?wh(t[1],t[2],t[3],t[4]):(t=Vre.exec(e))?wh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Gre.exec(e))?FP(t[1],t[2]/100,t[3]/100,1):(t=Yre.exec(e))?FP(t[1],t[2]/100,t[3]/100,t[4]):DP.hasOwnProperty(e)?$P(DP[e]):e==="transparent"?new ln(NaN,NaN,NaN,0):null}function $P(e){return new ln(e>>16&255,e>>8&255,e&255,1)}function wh(e,t,a,n){return n<=0&&(e=t=a=NaN),new ln(e,t,a,n)}function Qre(e){return e instanceof mf||(e=wp(e)),e?(e=e.rgb(),new ln(e.r,e.g,e.b,e.opacity)):new ln}function Yw(e,t,a,n){return arguments.length===1?Qre(e):new ln(e,t,a,n??1)}function ln(e,t,a,n){this.r=+e,this.g=+t,this.b=+a,this.opacity=+n}Rk(ln,Yw,mD(mf,{brighter(e){return e=e==null?mx:Math.pow(mx,e),new ln(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?bp:Math.pow(bp,e),new ln(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ln(wl(this.r),wl(this.g),wl(this.b),px(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:RP,formatHex:RP,formatHex8:Jre,formatRgb:qP,toString:qP}));function RP(){return`#${ml(this.r)}${ml(this.g)}${ml(this.b)}`}function Jre(){return`#${ml(this.r)}${ml(this.g)}${ml(this.b)}${ml((isNaN(this.opacity)?1:this.opacity)*255)}`}function qP(){const e=px(this.opacity);return`${e===1?"rgb(":"rgba("}${wl(this.r)}, ${wl(this.g)}, ${wl(this.b)}${e===1?")":`, ${e})`}`}function px(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function wl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ml(e){return e=wl(e),(e<16?"0":"")+e.toString(16)}function FP(e,t,a,n){return n<=0?e=t=a=NaN:a<=0||a>=1?e=t=NaN:t<=0&&(e=NaN),new bs(e,t,a,n)}function pD(e){if(e instanceof bs)return new bs(e.h,e.s,e.l,e.opacity);if(e instanceof mf||(e=wp(e)),!e)return new bs;if(e instanceof bs)return e;e=e.rgb();var t=e.r/255,a=e.g/255,n=e.b/255,s=Math.min(t,a,n),i=Math.max(t,a,n),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(a-n)/l+(a<n)*6:a===i?o=(n-t)/l+2:o=(t-a)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new bs(o,l,c,e.opacity)}function eae(e,t,a,n){return arguments.length===1?pD(e):new bs(e,t,a,n??1)}function bs(e,t,a,n){this.h=+e,this.s=+t,this.l=+a,this.opacity=+n}Rk(bs,eae,mD(mf,{brighter(e){return e=e==null?mx:Math.pow(mx,e),new bs(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?bp:Math.pow(bp,e),new bs(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,n=a+(a<.5?a:1-a)*t,s=2*a-n;return new ln(Ab(e>=240?e-240:e+120,s,n),Ab(e,s,n),Ab(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new bs(zP(this.h),_h(this.s),_h(this.l),px(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=px(this.opacity);return`${e===1?"hsl(":"hsla("}${zP(this.h)}, ${_h(this.s)*100}%, ${_h(this.l)*100}%${e===1?")":`, ${e})`}`}}));function zP(e){return e=(e||0)%360,e<0?e+360:e}function _h(e){return Math.max(0,Math.min(1,e||0))}function Ab(e,t,a){return(e<60?t+(a-t)*e/60:e<180?a:e<240?t+(a-t)*(240-e)/60:t)*255}const qk=e=>()=>e;function tae(e,t){return function(a){return e+a*t}}function rae(e,t,a){return e=Math.pow(e,a),t=Math.pow(t,a)-e,a=1/a,function(n){return Math.pow(e+n*t,a)}}function aae(e){return(e=+e)==1?fD:function(t,a){return a-t?rae(t,a,e):qk(isNaN(t)?a:t)}}function fD(e,t){var a=t-e;return a?tae(e,a):qk(isNaN(e)?t:e)}const BP=function e(t){var a=aae(t);function n(s,i){var o=a((s=Yw(s)).r,(i=Yw(i)).r),l=a(s.g,i.g),c=a(s.b,i.b),d=fD(s.opacity,i.opacity);return function(u){return s.r=o(u),s.g=l(u),s.b=c(u),s.opacity=d(u),s+""}}return n.gamma=e,n}(1);function nae(e,t){t||(t=[]);var a=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<a;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function sae(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function iae(e,t){var a=t?t.length:0,n=e?Math.min(a,e.length):0,s=new Array(n),i=new Array(a),o;for(o=0;o<n;++o)s[o]=cu(e[o],t[o]);for(;o<a;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=s[o](l);return i}}function oae(e,t){var a=new Date;return e=+e,t=+t,function(n){return a.setTime(e*(1-n)+t*n),a}}function fx(e,t){return e=+e,t=+t,function(a){return e*(1-a)+t*a}}function lae(e,t){var a={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?a[s]=cu(e[s],t[s]):n[s]=t[s];return function(i){for(s in a)n[s]=a[s](i);return n}}var Zw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pb=new RegExp(Zw.source,"g");function cae(e){return function(){return e}}function dae(e){return function(t){return e(t)+""}}function uae(e,t){var a=Zw.lastIndex=Pb.lastIndex=0,n,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=Zw.exec(e))&&(s=Pb.exec(t));)(i=s.index)>a&&(i=t.slice(a,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:fx(n,s)})),a=Pb.lastIndex;return a<t.length&&(i=t.slice(a),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?dae(c[0].x):cae(t):(t=c.length,function(d){for(var u=0,m;u<t;++u)l[(m=c[u]).i]=m.x(d);return l.join("")})}function cu(e,t){var a=typeof t,n;return t==null||a==="boolean"?qk(t):(a==="number"?fx:a==="string"?(n=wp(t))?(t=n,BP):uae:t instanceof wp?BP:t instanceof Date?oae:sae(t)?nae:Array.isArray(t)?iae:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?lae:fx)(e,t)}function Fk(e,t){return e=+e,t=+t,function(a){return Math.round(e*(1-a)+t*a)}}function mae(e,t){t===void 0&&(t=e,e=cu);for(var a=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);a<n;)i[a]=e(s,s=t[++a]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function pae(e){return function(){return e}}function hx(e){return+e}var WP=[0,1];function Za(e){return e}function Xw(e,t){return(t-=e=+e)?function(a){return(a-e)/t}:pae(isNaN(t)?NaN:.5)}function fae(e,t){var a;return e>t&&(a=e,e=t,t=a),function(n){return Math.max(e,Math.min(t,n))}}function hae(e,t,a){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=Xw(s,n),i=a(o,i)):(n=Xw(n,s),i=a(i,o)),function(l){return i(n(l))}}function gae(e,t,a){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=Xw(e[o],e[o+1]),i[o]=a(t[o],t[o+1]);return function(l){var c=uf(e,l,1,n)-1;return i[c](s[c](l))}}function pf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function hv(){var e=WP,t=WP,a=cu,n,s,i,o=Za,l,c,d;function u(){var p=Math.min(e.length,t.length);return o!==Za&&(o=fae(e[0],e[p-1])),l=p>2?gae:hae,c=d=null,m}function m(p){return p==null||isNaN(p=+p)?i:(c||(c=l(e.map(n),t,a)))(n(o(p)))}return m.invert=function(p){return o(s((d||(d=l(t,e.map(n),fx)))(p)))},m.domain=function(p){return arguments.length?(e=Array.from(p,hx),u()):e.slice()},m.range=function(p){return arguments.length?(t=Array.from(p),u()):t.slice()},m.rangeRound=function(p){return t=Array.from(p),a=Fk,u()},m.clamp=function(p){return arguments.length?(o=p?!0:Za,u()):o!==Za},m.interpolate=function(p){return arguments.length?(a=p,u()):a},m.unknown=function(p){return arguments.length?(i=p,m):i},function(p,g){return n=p,s=g,u()}}function zk(){return hv()(Za,Za)}function xae(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function gx(e,t){if((a=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var a,n=e.slice(0,a);return[n.length>1?n[0]+n.slice(2):n,+e.slice(a+1)]}function gd(e){return e=gx(Math.abs(e)),e?e[1]:NaN}function yae(e,t){return function(a,n){for(var s=a.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(a.substring(s-=l,s+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function vae(e){return function(t){return t.replace(/[0-9]/g,function(a){return e[+a]})}}var bae=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _p(e){if(!(t=bae.exec(e)))throw new Error("invalid format: "+e);var t;return new Bk({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}_p.prototype=Bk.prototype;function Bk(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Bk.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function jae(e){e:for(var t=e.length,a=1,n=-1,s;a<t;++a)switch(e[a]){case".":n=s=a;break;case"0":n===0&&(n=a),s=a;break;default:if(!+e[a])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var hD;function wae(e,t){var a=gx(e,t);if(!a)return e+"";var n=a[0],s=a[1],i=s-(hD=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+gx(e,Math.max(0,t+i-1))[0]}function UP(e,t){var a=gx(e,t);if(!a)return e+"";var n=a[0],s=a[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const HP={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:xae,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>UP(e*100,t),r:UP,s:wae,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function KP(e){return e}var VP=Array.prototype.map,GP=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function _ae(e){var t=e.grouping===void 0||e.thousands===void 0?KP:yae(VP.call(e.grouping,Number),e.thousands+""),a=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?KP:vae(VP.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(m){m=_p(m);var p=m.fill,g=m.align,x=m.sign,h=m.symbol,v=m.zero,b=m.width,y=m.comma,j=m.precision,_=m.trim,w=m.type;w==="n"?(y=!0,w="g"):HP[w]||(j===void 0&&(j=12),_=!0,w="g"),(v||p==="0"&&g==="=")&&(v=!0,p="0",g="=");var k=h==="$"?a:h==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",N=h==="$"?n:/[%p]/.test(w)?o:"",P=HP[w],A=/[defgprs%]/.test(w);j=j===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function M(R){var O=k,q=N,S,I,E;if(w==="c")q=P(R)+q,R="";else{R=+R;var W=R<0||1/R<0;if(R=isNaN(R)?c:P(Math.abs(R),j),_&&(R=jae(R)),W&&+R==0&&x!=="+"&&(W=!1),O=(W?x==="("?x:l:x==="-"||x==="("?"":x)+O,q=(w==="s"?GP[8+hD/3]:"")+q+(W&&x==="("?")":""),A){for(S=-1,I=R.length;++S<I;)if(E=R.charCodeAt(S),48>E||E>57){q=(E===46?s+R.slice(S+1):R.slice(S))+q,R=R.slice(0,S);break}}}y&&!v&&(R=t(R,1/0));var B=O.length+R.length+q.length,C=B<b?new Array(b-B+1).join(p):"";switch(y&&v&&(R=t(C+R,C.length?b-q.length:1/0),C=""),g){case"<":R=O+R+q+C;break;case"=":R=O+C+R+q;break;case"^":R=C.slice(0,B=C.length>>1)+O+R+q+C.slice(B);break;default:R=C+O+R+q;break}return i(R)}return M.toString=function(){return m+""},M}function u(m,p){var g=d((m=_p(m),m.type="f",m)),x=Math.max(-8,Math.min(8,Math.floor(gd(p)/3)))*3,h=Math.pow(10,-x),v=GP[8+x/3];return function(b){return g(h*b)+v}}return{format:d,formatPrefix:u}}var kh,Wk,gD;kae({thousands:",",grouping:[3],currency:["$",""]});function kae(e){return kh=_ae(e),Wk=kh.format,gD=kh.formatPrefix,kh}function Nae(e){return Math.max(0,-gd(Math.abs(e)))}function Sae(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(gd(t)/3)))*3-gd(Math.abs(e)))}function Aae(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,gd(t)-gd(e))+1}function xD(e,t,a,n){var s=Vw(e,t,a),i;switch(n=_p(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=Sae(s,o))&&(n.precision=i),gD(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=Aae(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=Nae(s))&&(n.precision=i-(n.type==="%")*2);break}}return Wk(n)}function Ro(e){var t=e.domain;return e.ticks=function(a){var n=t();return Hw(n[0],n[n.length-1],a??10)},e.tickFormat=function(a,n){var s=t();return xD(s[0],s[s.length-1],a??10,n)},e.nice=function(a){a==null&&(a=10);var n=t(),s=0,i=n.length-1,o=n[s],l=n[i],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=s,s=i,i=d);u-- >0;){if(d=Kw(o,l,a),d===c)return n[s]=o,n[i]=l,t(n);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function xx(){var e=zk();return e.copy=function(){return pf(e,xx())},Jn.apply(e,arguments),Ro(e)}function yD(e){var t;function a(n){return n==null||isNaN(n=+n)?t:n}return a.invert=a,a.domain=a.range=function(n){return arguments.length?(e=Array.from(n,hx),a):e.slice()},a.unknown=function(n){return arguments.length?(t=n,a):t},a.copy=function(){return yD(e).unknown(t)},e=arguments.length?Array.from(e,hx):[0,1],Ro(a)}function vD(e,t){e=e.slice();var a=0,n=e.length-1,s=e[a],i=e[n],o;return i<s&&(o=a,a=n,n=o,o=s,s=i,i=o),e[a]=t.floor(s),e[n]=t.ceil(i),e}function YP(e){return Math.log(e)}function ZP(e){return Math.exp(e)}function Pae(e){return-Math.log(-e)}function Cae(e){return-Math.exp(-e)}function Eae(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Tae(e){return e===10?Eae:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Oae(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function XP(e){return(t,a)=>-e(-t,a)}function Uk(e){const t=e(YP,ZP),a=t.domain;let n=10,s,i;function o(){return s=Oae(n),i=Tae(n),a()[0]<0?(s=XP(s),i=XP(i),e(Pae,Cae)):e(YP,ZP),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(a(l),o()):a()},t.ticks=l=>{const c=a();let d=c[0],u=c[c.length-1];const m=u<d;m&&([d,u]=[u,d]);let p=s(d),g=s(u),x,h;const v=l==null?10:+l;let b=[];if(!(n%1)&&g-p<v){if(p=Math.floor(p),g=Math.ceil(g),d>0){for(;p<=g;++p)for(x=1;x<n;++x)if(h=p<0?x/i(-p):x*i(p),!(h<d)){if(h>u)break;b.push(h)}}else for(;p<=g;++p)for(x=n-1;x>=1;--x)if(h=p>0?x/i(-p):x*i(p),!(h<d)){if(h>u)break;b.push(h)}b.length*2<v&&(b=Hw(d,u,v))}else b=Hw(p,g,Math.min(g-p,v)).map(i);return m?b.reverse():b},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=_p(c)).precision==null&&(c.trim=!0),c=Wk(c)),l===1/0)return c;const d=Math.max(1,n*l/t.ticks().length);return u=>{let m=u/i(Math.round(s(u)));return m*n<n-.5&&(m*=n),m<=d?c(u):""}},t.nice=()=>a(vD(a(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function bD(){const e=Uk(hv()).domain([1,10]);return e.copy=()=>pf(e,bD()).base(e.base()),Jn.apply(e,arguments),e}function QP(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function JP(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Hk(e){var t=1,a=e(QP(t),JP(t));return a.constant=function(n){return arguments.length?e(QP(t=+n),JP(t)):t},Ro(a)}function jD(){var e=Hk(hv());return e.copy=function(){return pf(e,jD()).constant(e.constant())},Jn.apply(e,arguments)}function eC(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Mae(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Dae(e){return e<0?-e*e:e*e}function Kk(e){var t=e(Za,Za),a=1;function n(){return a===1?e(Za,Za):a===.5?e(Mae,Dae):e(eC(a),eC(1/a))}return t.exponent=function(s){return arguments.length?(a=+s,n()):a},Ro(t)}function Vk(){var e=Kk(hv());return e.copy=function(){return pf(e,Vk()).exponent(e.exponent())},Jn.apply(e,arguments),e}function Iae(){return Vk.apply(null,arguments).exponent(.5)}function tC(e){return Math.sign(e)*e*e}function Lae(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function wD(){var e=zk(),t=[0,1],a=!1,n;function s(i){var o=Lae(e(i));return isNaN(o)?n:a?Math.round(o):o}return s.invert=function(i){return e.invert(tC(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,hx)).map(tC)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(a=!!i,s):a},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return wD(e.domain(),t).round(a).clamp(e.clamp()).unknown(n)},Jn.apply(s,arguments),Ro(s)}function _D(){var e=[],t=[],a=[],n;function s(){var o=0,l=Math.max(1,t.length);for(a=new Array(l-1);++o<l;)a[o-1]=zre(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[uf(a,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?a[l-1]:e[0],l<a.length?a[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(wo),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return a.slice()},i.copy=function(){return _D().domain(e).range(t).unknown(n)},Jn.apply(i,arguments)}function kD(){var e=0,t=1,a=1,n=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[uf(n,c,0,a)]:i}function l(){var c=-1;for(n=new Array(a);++c<a;)n[c]=((c+1)*t-(c-a)*e)/(a+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(a=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var d=s.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,n[0]]:d>=a?[n[a-1],t]:[n[d-1],n[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return kD().domain([e,t]).range(s).unknown(i)},Jn.apply(Ro(o),arguments)}function ND(){var e=[.5],t=[0,1],a,n=1;function s(i){return i!=null&&i<=i?t[uf(e,i,0,n)]:a}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return ND().domain(e).range(t).unknown(a)},Jn.apply(s,arguments)}const Cb=new Date,Eb=new Date;function ca(e,t,a,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},s.filter=i=>ca(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),a&&(s.count=(i,o)=>(Cb.setTime(+i),Eb.setTime(+o),e(Cb),e(Eb),Math.floor(a(Cb,Eb))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const yx=ca(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);yx.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ca(t=>{t.setTime(Math.floor(t/e)*e)},(t,a)=>{t.setTime(+t+a*e)},(t,a)=>(a-t)/e):yx);yx.range;const mi=1e3,Un=mi*60,pi=Un*60,Si=pi*24,Gk=Si*7,rC=Si*30,Tb=Si*365,pl=ca(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*mi)},(e,t)=>(t-e)/mi,e=>e.getUTCSeconds());pl.range;const Yk=ca(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*mi)},(e,t)=>{e.setTime(+e+t*Un)},(e,t)=>(t-e)/Un,e=>e.getMinutes());Yk.range;const Zk=ca(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Un)},(e,t)=>(t-e)/Un,e=>e.getUTCMinutes());Zk.range;const Xk=ca(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*mi-e.getMinutes()*Un)},(e,t)=>{e.setTime(+e+t*pi)},(e,t)=>(t-e)/pi,e=>e.getHours());Xk.range;const Qk=ca(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*pi)},(e,t)=>(t-e)/pi,e=>e.getUTCHours());Qk.range;const ff=ca(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Un)/Si,e=>e.getDate()-1);ff.range;const gv=ca(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Si,e=>e.getUTCDate()-1);gv.range;const SD=ca(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Si,e=>Math.floor(e/Si));SD.range;function Hl(e){return ca(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,a)=>{t.setDate(t.getDate()+a*7)},(t,a)=>(a-t-(a.getTimezoneOffset()-t.getTimezoneOffset())*Un)/Gk)}const xv=Hl(0),vx=Hl(1),$ae=Hl(2),Rae=Hl(3),xd=Hl(4),qae=Hl(5),Fae=Hl(6);xv.range;vx.range;$ae.range;Rae.range;xd.range;qae.range;Fae.range;function Kl(e){return ca(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCDate(t.getUTCDate()+a*7)},(t,a)=>(a-t)/Gk)}const yv=Kl(0),bx=Kl(1),zae=Kl(2),Bae=Kl(3),yd=Kl(4),Wae=Kl(5),Uae=Kl(6);yv.range;bx.range;zae.range;Bae.range;yd.range;Wae.range;Uae.range;const Jk=ca(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Jk.range;const eN=ca(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());eN.range;const Ai=ca(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ai.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ca(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,a)=>{t.setFullYear(t.getFullYear()+a*e)});Ai.range;const Pi=ca(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Pi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ca(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCFullYear(t.getUTCFullYear()+a*e)});Pi.range;function AD(e,t,a,n,s,i){const o=[[pl,1,mi],[pl,5,5*mi],[pl,15,15*mi],[pl,30,30*mi],[i,1,Un],[i,5,5*Un],[i,15,15*Un],[i,30,30*Un],[s,1,pi],[s,3,3*pi],[s,6,6*pi],[s,12,12*pi],[n,1,Si],[n,2,2*Si],[a,1,Gk],[t,1,rC],[t,3,3*rC],[e,1,Tb]];function l(d,u,m){const p=u<d;p&&([d,u]=[u,d]);const g=m&&typeof m.range=="function"?m:c(d,u,m),x=g?g.range(d,+u+1):[];return p?x.reverse():x}function c(d,u,m){const p=Math.abs(u-d)/m,g=Lk(([,,v])=>v).right(o,p);if(g===o.length)return e.every(Vw(d/Tb,u/Tb,m));if(g===0)return yx.every(Math.max(Vw(d,u,m),1));const[x,h]=o[p/o[g-1][2]<o[g][2]/p?g-1:g];return x.every(h)}return[l,c]}const[Hae,Kae]=AD(Pi,eN,yv,SD,Qk,Zk),[Vae,Gae]=AD(Ai,Jk,xv,ff,Xk,Yk);function Ob(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Mb(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ju(e,t,a){return{y:e,m:t,d:a,H:0,M:0,S:0,L:0}}function Yae(e){var t=e.dateTime,a=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=em(s),u=tm(s),m=em(i),p=tm(i),g=em(o),x=tm(o),h=em(l),v=tm(l),b=em(c),y=tm(c),j={a:W,A:B,b:C,B:D,c:null,d:lC,e:lC,f:yne,g:Pne,G:Ene,H:hne,I:gne,j:xne,L:PD,m:vne,M:bne,p:z,q:L,Q:uC,s:mC,S:jne,u:wne,U:_ne,V:kne,w:Nne,W:Sne,x:null,X:null,y:Ane,Y:Cne,Z:Tne,"%":dC},_={a:X,A:H,b:F,B:ke,c:null,d:cC,e:cC,f:Ine,g:Hne,G:Vne,H:One,I:Mne,j:Dne,L:ED,m:Lne,M:$ne,p:ae,q:ue,Q:uC,s:mC,S:Rne,u:qne,U:Fne,V:zne,w:Bne,W:Wne,x:null,X:null,y:Une,Y:Kne,Z:Gne,"%":dC},w={a:M,A:R,b:O,B:q,c:S,d:iC,e:iC,f:une,g:sC,G:nC,H:oC,I:oC,j:one,L:dne,m:ine,M:lne,p:A,q:sne,Q:pne,s:fne,S:cne,u:ene,U:tne,V:rne,w:Jae,W:ane,x:I,X:E,y:sC,Y:nC,Z:nne,"%":mne};j.x=k(a,j),j.X=k(n,j),j.c=k(t,j),_.x=k(a,_),_.X=k(n,_),_.c=k(t,_);function k(Z,me){return function(ge){var se=[],he=-1,T=0,oe=Z.length,G,V,Y;for(ge instanceof Date||(ge=new Date(+ge));++he<oe;)Z.charCodeAt(he)===37&&(se.push(Z.slice(T,he)),(V=aC[G=Z.charAt(++he)])!=null?G=Z.charAt(++he):V=G==="e"?" ":"0",(Y=me[G])&&(G=Y(ge,V)),se.push(G),T=he+1);return se.push(Z.slice(T,he)),se.join("")}}function N(Z,me){return function(ge){var se=Ju(1900,void 0,1),he=P(se,Z,ge+="",0),T,oe;if(he!=ge.length)return null;if("Q"in se)return new Date(se.Q);if("s"in se)return new Date(se.s*1e3+("L"in se?se.L:0));if(me&&!("Z"in se)&&(se.Z=0),"p"in se&&(se.H=se.H%12+se.p*12),se.m===void 0&&(se.m="q"in se?se.q:0),"V"in se){if(se.V<1||se.V>53)return null;"w"in se||(se.w=1),"Z"in se?(T=Mb(Ju(se.y,0,1)),oe=T.getUTCDay(),T=oe>4||oe===0?bx.ceil(T):bx(T),T=gv.offset(T,(se.V-1)*7),se.y=T.getUTCFullYear(),se.m=T.getUTCMonth(),se.d=T.getUTCDate()+(se.w+6)%7):(T=Ob(Ju(se.y,0,1)),oe=T.getDay(),T=oe>4||oe===0?vx.ceil(T):vx(T),T=ff.offset(T,(se.V-1)*7),se.y=T.getFullYear(),se.m=T.getMonth(),se.d=T.getDate()+(se.w+6)%7)}else("W"in se||"U"in se)&&("w"in se||(se.w="u"in se?se.u%7:"W"in se?1:0),oe="Z"in se?Mb(Ju(se.y,0,1)).getUTCDay():Ob(Ju(se.y,0,1)).getDay(),se.m=0,se.d="W"in se?(se.w+6)%7+se.W*7-(oe+5)%7:se.w+se.U*7-(oe+6)%7);return"Z"in se?(se.H+=se.Z/100|0,se.M+=se.Z%100,Mb(se)):Ob(se)}}function P(Z,me,ge,se){for(var he=0,T=me.length,oe=ge.length,G,V;he<T;){if(se>=oe)return-1;if(G=me.charCodeAt(he++),G===37){if(G=me.charAt(he++),V=w[G in aC?me.charAt(he++):G],!V||(se=V(Z,ge,se))<0)return-1}else if(G!=ge.charCodeAt(se++))return-1}return se}function A(Z,me,ge){var se=d.exec(me.slice(ge));return se?(Z.p=u.get(se[0].toLowerCase()),ge+se[0].length):-1}function M(Z,me,ge){var se=g.exec(me.slice(ge));return se?(Z.w=x.get(se[0].toLowerCase()),ge+se[0].length):-1}function R(Z,me,ge){var se=m.exec(me.slice(ge));return se?(Z.w=p.get(se[0].toLowerCase()),ge+se[0].length):-1}function O(Z,me,ge){var se=b.exec(me.slice(ge));return se?(Z.m=y.get(se[0].toLowerCase()),ge+se[0].length):-1}function q(Z,me,ge){var se=h.exec(me.slice(ge));return se?(Z.m=v.get(se[0].toLowerCase()),ge+se[0].length):-1}function S(Z,me,ge){return P(Z,t,me,ge)}function I(Z,me,ge){return P(Z,a,me,ge)}function E(Z,me,ge){return P(Z,n,me,ge)}function W(Z){return o[Z.getDay()]}function B(Z){return i[Z.getDay()]}function C(Z){return c[Z.getMonth()]}function D(Z){return l[Z.getMonth()]}function z(Z){return s[+(Z.getHours()>=12)]}function L(Z){return 1+~~(Z.getMonth()/3)}function X(Z){return o[Z.getUTCDay()]}function H(Z){return i[Z.getUTCDay()]}function F(Z){return c[Z.getUTCMonth()]}function ke(Z){return l[Z.getUTCMonth()]}function ae(Z){return s[+(Z.getUTCHours()>=12)]}function ue(Z){return 1+~~(Z.getUTCMonth()/3)}return{format:function(Z){var me=k(Z+="",j);return me.toString=function(){return Z},me},parse:function(Z){var me=N(Z+="",!1);return me.toString=function(){return Z},me},utcFormat:function(Z){var me=k(Z+="",_);return me.toString=function(){return Z},me},utcParse:function(Z){var me=N(Z+="",!0);return me.toString=function(){return Z},me}}}var aC={"-":"",_:" ",0:"0"},ba=/^\s*\d+/,Zae=/^%/,Xae=/[\\^$*+?|[\]().{}]/g;function $t(e,t,a){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<a?new Array(a-i+1).join(t)+s:s)}function Qae(e){return e.replace(Xae,"\\$&")}function em(e){return new RegExp("^(?:"+e.map(Qae).join("|")+")","i")}function tm(e){return new Map(e.map((t,a)=>[t.toLowerCase(),a]))}function Jae(e,t,a){var n=ba.exec(t.slice(a,a+1));return n?(e.w=+n[0],a+n[0].length):-1}function ene(e,t,a){var n=ba.exec(t.slice(a,a+1));return n?(e.u=+n[0],a+n[0].length):-1}function tne(e,t,a){var n=ba.exec(t.slice(a,a+2));return n?(e.U=+n[0],a+n[0].length):-1}function rne(e,t,a){var n=ba.exec(t.slice(a,a+2));return n?(e.V=+n[0],a+n[0].length):-1}function ane(e,t,a){var n=ba.exec(t.slice(a,a+2));return n?(e.W=+n[0],a+n[0].length):-1}function nC(e,t,a){var n=ba.exec(t.slice(a,a+4));return n?(e.y=+n[0],a+n[0].length):-1}function sC(e,t,a){var n=ba.exec(t.slice(a,a+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),a+n[0].length):-1}function nne(e,t,a){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(a,a+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),a+n[0].length):-1}function sne(e,t,a){var n=ba.exec(t.slice(a,a+1));return n?(e.q=n[0]*3-3,a+n[0].length):-1}function ine(e,t,a){var n=ba.exec(t.slice(a,a+2));return n?(e.m=n[0]-1,a+n[0].length):-1}function iC(e,t,a){var n=ba.exec(t.slice(a,a+2));return n?(e.d=+n[0],a+n[0].length):-1}function one(e,t,a){var n=ba.exec(t.slice(a,a+3));return n?(e.m=0,e.d=+n[0],a+n[0].length):-1}function oC(e,t,a){var n=ba.exec(t.slice(a,a+2));return n?(e.H=+n[0],a+n[0].length):-1}function lne(e,t,a){var n=ba.exec(t.slice(a,a+2));return n?(e.M=+n[0],a+n[0].length):-1}function cne(e,t,a){var n=ba.exec(t.slice(a,a+2));return n?(e.S=+n[0],a+n[0].length):-1}function dne(e,t,a){var n=ba.exec(t.slice(a,a+3));return n?(e.L=+n[0],a+n[0].length):-1}function une(e,t,a){var n=ba.exec(t.slice(a,a+6));return n?(e.L=Math.floor(n[0]/1e3),a+n[0].length):-1}function mne(e,t,a){var n=Zae.exec(t.slice(a,a+1));return n?a+n[0].length:-1}function pne(e,t,a){var n=ba.exec(t.slice(a));return n?(e.Q=+n[0],a+n[0].length):-1}function fne(e,t,a){var n=ba.exec(t.slice(a));return n?(e.s=+n[0],a+n[0].length):-1}function lC(e,t){return $t(e.getDate(),t,2)}function hne(e,t){return $t(e.getHours(),t,2)}function gne(e,t){return $t(e.getHours()%12||12,t,2)}function xne(e,t){return $t(1+ff.count(Ai(e),e),t,3)}function PD(e,t){return $t(e.getMilliseconds(),t,3)}function yne(e,t){return PD(e,t)+"000"}function vne(e,t){return $t(e.getMonth()+1,t,2)}function bne(e,t){return $t(e.getMinutes(),t,2)}function jne(e,t){return $t(e.getSeconds(),t,2)}function wne(e){var t=e.getDay();return t===0?7:t}function _ne(e,t){return $t(xv.count(Ai(e)-1,e),t,2)}function CD(e){var t=e.getDay();return t>=4||t===0?xd(e):xd.ceil(e)}function kne(e,t){return e=CD(e),$t(xd.count(Ai(e),e)+(Ai(e).getDay()===4),t,2)}function Nne(e){return e.getDay()}function Sne(e,t){return $t(vx.count(Ai(e)-1,e),t,2)}function Ane(e,t){return $t(e.getFullYear()%100,t,2)}function Pne(e,t){return e=CD(e),$t(e.getFullYear()%100,t,2)}function Cne(e,t){return $t(e.getFullYear()%1e4,t,4)}function Ene(e,t){var a=e.getDay();return e=a>=4||a===0?xd(e):xd.ceil(e),$t(e.getFullYear()%1e4,t,4)}function Tne(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+$t(t/60|0,"0",2)+$t(t%60,"0",2)}function cC(e,t){return $t(e.getUTCDate(),t,2)}function One(e,t){return $t(e.getUTCHours(),t,2)}function Mne(e,t){return $t(e.getUTCHours()%12||12,t,2)}function Dne(e,t){return $t(1+gv.count(Pi(e),e),t,3)}function ED(e,t){return $t(e.getUTCMilliseconds(),t,3)}function Ine(e,t){return ED(e,t)+"000"}function Lne(e,t){return $t(e.getUTCMonth()+1,t,2)}function $ne(e,t){return $t(e.getUTCMinutes(),t,2)}function Rne(e,t){return $t(e.getUTCSeconds(),t,2)}function qne(e){var t=e.getUTCDay();return t===0?7:t}function Fne(e,t){return $t(yv.count(Pi(e)-1,e),t,2)}function TD(e){var t=e.getUTCDay();return t>=4||t===0?yd(e):yd.ceil(e)}function zne(e,t){return e=TD(e),$t(yd.count(Pi(e),e)+(Pi(e).getUTCDay()===4),t,2)}function Bne(e){return e.getUTCDay()}function Wne(e,t){return $t(bx.count(Pi(e)-1,e),t,2)}function Une(e,t){return $t(e.getUTCFullYear()%100,t,2)}function Hne(e,t){return e=TD(e),$t(e.getUTCFullYear()%100,t,2)}function Kne(e,t){return $t(e.getUTCFullYear()%1e4,t,4)}function Vne(e,t){var a=e.getUTCDay();return e=a>=4||a===0?yd(e):yd.ceil(e),$t(e.getUTCFullYear()%1e4,t,4)}function Gne(){return"+0000"}function dC(){return"%"}function uC(e){return+e}function mC(e){return Math.floor(+e/1e3)}var fc,OD,MD;Yne({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Yne(e){return fc=Yae(e),OD=fc.format,fc.parse,MD=fc.utcFormat,fc.utcParse,fc}function Zne(e){return new Date(e)}function Xne(e){return e instanceof Date?+e:+new Date(+e)}function tN(e,t,a,n,s,i,o,l,c,d){var u=zk(),m=u.invert,p=u.domain,g=d(".%L"),x=d(":%S"),h=d("%I:%M"),v=d("%I %p"),b=d("%a %d"),y=d("%b %d"),j=d("%B"),_=d("%Y");function w(k){return(c(k)<k?g:l(k)<k?x:o(k)<k?h:i(k)<k?v:n(k)<k?s(k)<k?b:y:a(k)<k?j:_)(k)}return u.invert=function(k){return new Date(m(k))},u.domain=function(k){return arguments.length?p(Array.from(k,Xne)):p().map(Zne)},u.ticks=function(k){var N=p();return e(N[0],N[N.length-1],k??10)},u.tickFormat=function(k,N){return N==null?w:d(N)},u.nice=function(k){var N=p();return(!k||typeof k.range!="function")&&(k=t(N[0],N[N.length-1],k??10)),k?p(vD(N,k)):u},u.copy=function(){return pf(u,tN(e,t,a,n,s,i,o,l,c,d))},u}function Qne(){return Jn.apply(tN(Vae,Gae,Ai,Jk,xv,ff,Xk,Yk,pl,OD).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Jne(){return Jn.apply(tN(Hae,Kae,Pi,eN,yv,gv,Qk,Zk,pl,MD).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function vv(){var e=0,t=1,a,n,s,i,o=Za,l=!1,c;function d(m){return m==null||isNaN(m=+m)?c:o(s===0?.5:(m=(i(m)-a)*s,l?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([e,t]=m,a=i(e=+e),n=i(t=+t),s=a===n?0:1/(n-a),d):[e,t]},d.clamp=function(m){return arguments.length?(l=!!m,d):l},d.interpolator=function(m){return arguments.length?(o=m,d):o};function u(m){return function(p){var g,x;return arguments.length?([g,x]=p,o=m(g,x),d):[o(0),o(1)]}}return d.range=u(cu),d.rangeRound=u(Fk),d.unknown=function(m){return arguments.length?(c=m,d):c},function(m){return i=m,a=m(e),n=m(t),s=a===n?0:1/(n-a),d}}function qo(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function DD(){var e=Ro(vv()(Za));return e.copy=function(){return qo(e,DD())},Ii.apply(e,arguments)}function ID(){var e=Uk(vv()).domain([1,10]);return e.copy=function(){return qo(e,ID()).base(e.base())},Ii.apply(e,arguments)}function LD(){var e=Hk(vv());return e.copy=function(){return qo(e,LD()).constant(e.constant())},Ii.apply(e,arguments)}function rN(){var e=Kk(vv());return e.copy=function(){return qo(e,rN()).exponent(e.exponent())},Ii.apply(e,arguments)}function ese(){return rN.apply(null,arguments).exponent(.5)}function $D(){var e=[],t=Za;function a(n){if(n!=null&&!isNaN(n=+n))return t((uf(e,n,1)-1)/(e.length-1))}return a.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(wo),a},a.interpolator=function(n){return arguments.length?(t=n,a):t},a.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},a.quantiles=function(n){return Array.from({length:n+1},(s,i)=>Fre(e,i/n))},a.copy=function(){return $D(t).domain(e)},Ii.apply(a,arguments)}function bv(){var e=0,t=.5,a=1,n=1,s,i,o,l,c,d=Za,u,m=!1,p;function g(h){return isNaN(h=+h)?p:(h=.5+((h=+u(h))-i)*(n*h<n*i?l:c),d(m?Math.max(0,Math.min(1,h)):h))}g.domain=function(h){return arguments.length?([e,t,a]=h,s=u(e=+e),i=u(t=+t),o=u(a=+a),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,g):[e,t,a]},g.clamp=function(h){return arguments.length?(m=!!h,g):m},g.interpolator=function(h){return arguments.length?(d=h,g):d};function x(h){return function(v){var b,y,j;return arguments.length?([b,y,j]=v,d=mae(h,[b,y,j]),g):[d(0),d(.5),d(1)]}}return g.range=x(cu),g.rangeRound=x(Fk),g.unknown=function(h){return arguments.length?(p=h,g):p},function(h){return u=h,s=h(e),i=h(t),o=h(a),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,g}}function RD(){var e=Ro(bv()(Za));return e.copy=function(){return qo(e,RD())},Ii.apply(e,arguments)}function qD(){var e=Uk(bv()).domain([.1,1,10]);return e.copy=function(){return qo(e,qD()).base(e.base())},Ii.apply(e,arguments)}function FD(){var e=Hk(bv());return e.copy=function(){return qo(e,FD()).constant(e.constant())},Ii.apply(e,arguments)}function aN(){var e=Kk(bv());return e.copy=function(){return qo(e,aN()).exponent(e.exponent())},Ii.apply(e,arguments)}function tse(){return aN.apply(null,arguments).exponent(.5)}const pC=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:vp,scaleDiverging:RD,scaleDivergingLog:qD,scaleDivergingPow:aN,scaleDivergingSqrt:tse,scaleDivergingSymlog:FD,scaleIdentity:yD,scaleImplicit:Gw,scaleLinear:xx,scaleLog:bD,scaleOrdinal:$k,scalePoint:Lm,scalePow:Vk,scaleQuantile:_D,scaleQuantize:kD,scaleRadial:wD,scaleSequential:DD,scaleSequentialLog:ID,scaleSequentialPow:rN,scaleSequentialQuantile:$D,scaleSequentialSqrt:ese,scaleSequentialSymlog:LD,scaleSqrt:Iae,scaleSymlog:jD,scaleThreshold:ND,scaleTime:Qne,scaleUtc:Jne,tickFormat:xD},Symbol.toStringTag,{value:"Module"}));var rse=Jd;function ase(e,t,a){for(var n=-1,s=e.length;++n<s;){var i=e[n],o=t(i);if(o!=null&&(l===void 0?o===o&&!rse(o):a(o,l)))var l=o,c=i}return c}var jv=ase;function nse(e,t){return e>t}var zD=nse,sse=jv,ise=zD,ose=lu;function lse(e){return e&&e.length?sse(e,ose,ise):void 0}var cse=lse;const io=Dt(cse);function dse(e,t){return e<t}var BD=dse,use=jv,mse=BD,pse=lu;function fse(e){return e&&e.length?use(e,pse,mse):void 0}var hse=fse;const hf=Dt(hse);var gse=Ky,xse=Ms,yse=GM,vse=rn;function bse(e,t){var a=vse(e)?gse:yse;return a(e,xse(t))}var jse=bse,wse=Ok,_se=jse;function kse(e,t){return wse(_se(e,t),1)}var Nse=kse;const Sse=Dt(Nse);var Ase=Tk;function Pse(e,t){return Ase(e,t)}var Cse=Pse;const Po=Dt(Cse);var du=1e9,Ese={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},sN,yr=!0,Xn="[DecimalError] ",_l=Xn+"Invalid argument: ",nN=Xn+"Exponent out of range: ",uu=Math.floor,tl=Math.pow,Tse=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,kn,fa=1e7,mr=7,WD=9007199254740991,jx=uu(WD/mr),et={};et.absoluteValue=et.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};et.comparedTo=et.cmp=function(e){var t,a,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,a=n<s?n:s;t<a;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};et.decimalPlaces=et.dp=function(){var e=this,t=e.d.length-1,a=(t-e.e)*mr;if(t=e.d[t],t)for(;t%10==0;t/=10)a--;return a<0?0:a};et.dividedBy=et.div=function(e){return xi(this,new this.constructor(e))};et.dividedToIntegerBy=et.idiv=function(e){var t=this,a=t.constructor;return tr(xi(t,new a(e),0,1),a.precision)};et.equals=et.eq=function(e){return!this.cmp(e)};et.exponent=function(){return Gr(this)};et.greaterThan=et.gt=function(e){return this.cmp(e)>0};et.greaterThanOrEqualTo=et.gte=function(e){return this.cmp(e)>=0};et.isInteger=et.isint=function(){return this.e>this.d.length-2};et.isNegative=et.isneg=function(){return this.s<0};et.isPositive=et.ispos=function(){return this.s>0};et.isZero=function(){return this.s===0};et.lessThan=et.lt=function(e){return this.cmp(e)<0};et.lessThanOrEqualTo=et.lte=function(e){return this.cmp(e)<1};et.logarithm=et.log=function(e){var t,a=this,n=a.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(kn))throw Error(Xn+"NaN");if(a.s<1)throw Error(Xn+(a.s?"NaN":"-Infinity"));return a.eq(kn)?new n(0):(yr=!1,t=xi(kp(a,i),kp(e,i),i),yr=!0,tr(t,s))};et.minus=et.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?KD(t,e):UD(t,(e.s=-e.s,e))};et.modulo=et.mod=function(e){var t,a=this,n=a.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(Xn+"NaN");return a.s?(yr=!1,t=xi(a,e,0,1).times(e),yr=!0,a.minus(t)):tr(new n(a),s)};et.naturalExponential=et.exp=function(){return HD(this)};et.naturalLogarithm=et.ln=function(){return kp(this)};et.negated=et.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};et.plus=et.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?UD(t,e):KD(t,(e.s=-e.s,e))};et.precision=et.sd=function(e){var t,a,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(_l+e);if(t=Gr(s)+1,n=s.d.length-1,a=n*mr+1,n=s.d[n],n){for(;n%10==0;n/=10)a--;for(n=s.d[0];n>=10;n/=10)a++}return e&&t>a?t:a};et.squareRoot=et.sqrt=function(){var e,t,a,n,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Xn+"NaN")}for(e=Gr(l),yr=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Ws(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=uu((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(s.toString()),a=c.precision,s=o=a+3;;)if(i=n,n=i.plus(xi(l,i,o+2)).times(.5),Ws(i.d).slice(0,o)===(t=Ws(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(tr(i,a+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return yr=!0,tr(n,a)};et.times=et.mul=function(e){var t,a,n,s,i,o,l,c,d,u=this,m=u.constructor,p=u.d,g=(e=new m(e)).d;if(!u.s||!e.s)return new m(0);for(e.s*=u.s,a=u.e+e.e,c=p.length,d=g.length,c<d&&(i=p,p=g,g=i,o=c,c=d,d=o),i=[],o=c+d,n=o;n--;)i.push(0);for(n=d;--n>=0;){for(t=0,s=c+n;s>n;)l=i[s]+g[n]*p[s-n-1]+t,i[s--]=l%fa|0,t=l/fa|0;i[s]=(i[s]+t)%fa|0}for(;!i[--o];)i.pop();return t?++a:i.shift(),e.d=i,e.e=a,yr?tr(e,m.precision):e};et.toDecimalPlaces=et.todp=function(e,t){var a=this,n=a.constructor;return a=new n(a),e===void 0?a:(Zs(e,0,du),t===void 0?t=n.rounding:Zs(t,0,8),tr(a,e+Gr(a)+1,t))};et.toExponential=function(e,t){var a,n=this,s=n.constructor;return e===void 0?a=Ll(n,!0):(Zs(e,0,du),t===void 0?t=s.rounding:Zs(t,0,8),n=tr(new s(n),e+1,t),a=Ll(n,!0,e+1)),a};et.toFixed=function(e,t){var a,n,s=this,i=s.constructor;return e===void 0?Ll(s):(Zs(e,0,du),t===void 0?t=i.rounding:Zs(t,0,8),n=tr(new i(s),e+Gr(s)+1,t),a=Ll(n.abs(),!1,e+Gr(n)+1),s.isneg()&&!s.isZero()?"-"+a:a)};et.toInteger=et.toint=function(){var e=this,t=e.constructor;return tr(new t(e),Gr(e)+1,t.rounding)};et.toNumber=function(){return+this};et.toPower=et.pow=function(e){var t,a,n,s,i,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(kn);if(l=new c(l),!l.s){if(e.s<1)throw Error(Xn+"Infinity");return l}if(l.eq(kn))return l;if(n=c.precision,e.eq(kn))return tr(l,n);if(t=e.e,a=e.d.length-1,o=t>=a,i=l.s,o){if((a=u<0?-u:u)<=WD){for(s=new c(kn),t=Math.ceil(n/mr+4),yr=!1;a%2&&(s=s.times(l),hC(s.d,t)),a=uu(a/2),a!==0;)l=l.times(l),hC(l.d,t);return yr=!0,e.s<0?new c(kn).div(s):tr(s,n)}}else if(i<0)throw Error(Xn+"NaN");return i=i<0&&e.d[Math.max(t,a)]&1?-1:1,l.s=1,yr=!1,s=e.times(kp(l,n+d)),yr=!0,s=HD(s),s.s=i,s};et.toPrecision=function(e,t){var a,n,s=this,i=s.constructor;return e===void 0?(a=Gr(s),n=Ll(s,a<=i.toExpNeg||a>=i.toExpPos)):(Zs(e,1,du),t===void 0?t=i.rounding:Zs(t,0,8),s=tr(new i(s),e,t),a=Gr(s),n=Ll(s,e<=a||a<=i.toExpNeg,e)),n};et.toSignificantDigits=et.tosd=function(e,t){var a=this,n=a.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Zs(e,1,du),t===void 0?t=n.rounding:Zs(t,0,8)),tr(new n(a),e,t)};et.toString=et.valueOf=et.val=et.toJSON=et[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Gr(e),a=e.constructor;return Ll(e,t<=a.toExpNeg||t>=a.toExpPos)};function UD(e,t){var a,n,s,i,o,l,c,d,u=e.constructor,m=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),yr?tr(t,m):t;if(c=e.d,d=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(n=c,i=-i,l=d.length):(n=d,s=o,l=c.length),o=Math.ceil(m/mr),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,n=d,d=c,c=n),a=0;i;)a=(c[--i]=c[i]+d[i]+a)/fa|0,c[i]%=fa;for(a&&(c.unshift(a),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,yr?tr(t,m):t}function Zs(e,t,a){if(e!==~~e||e<t||e>a)throw Error(_l+e)}function Ws(e){var t,a,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",a=mr-n.length,a&&(i+=Xi(a)),i+=n;o=e[t],n=o+"",a=mr-n.length,a&&(i+=Xi(a))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var xi=function(){function e(n,s){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+o,n[l]=i%fa|0,o=i/fa|0;return o&&n.unshift(o),n}function t(n,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=s[l]){c=n[l]>s[l]?1:-1;break}return c}function a(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*fa+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var l,c,d,u,m,p,g,x,h,v,b,y,j,_,w,k,N,P,A=n.constructor,M=n.s==s.s?1:-1,R=n.d,O=s.d;if(!n.s)return new A(n);if(!s.s)throw Error(Xn+"Division by zero");for(c=n.e-s.e,N=O.length,w=R.length,g=new A(M),x=g.d=[],d=0;O[d]==(R[d]||0);)++d;if(O[d]>(R[d]||0)&&--c,i==null?y=i=A.precision:o?y=i+(Gr(n)-Gr(s))+1:y=i,y<0)return new A(0);if(y=y/mr+2|0,d=0,N==1)for(u=0,O=O[0],y++;(d<w||u)&&y--;d++)j=u*fa+(R[d]||0),x[d]=j/O|0,u=j%O|0;else{for(u=fa/(O[0]+1)|0,u>1&&(O=e(O,u),R=e(R,u),N=O.length,w=R.length),_=N,h=R.slice(0,N),v=h.length;v<N;)h[v++]=0;P=O.slice(),P.unshift(0),k=O[0],O[1]>=fa/2&&++k;do u=0,l=t(O,h,N,v),l<0?(b=h[0],N!=v&&(b=b*fa+(h[1]||0)),u=b/k|0,u>1?(u>=fa&&(u=fa-1),m=e(O,u),p=m.length,v=h.length,l=t(m,h,p,v),l==1&&(u--,a(m,N<p?P:O,p))):(u==0&&(l=u=1),m=O.slice()),p=m.length,p<v&&m.unshift(0),a(h,m,v),l==-1&&(v=h.length,l=t(O,h,N,v),l<1&&(u++,a(h,N<v?P:O,v))),v=h.length):l===0&&(u++,h=[0]),x[d++]=u,l&&h[0]?h[v++]=R[_]||0:(h=[R[_]],v=1);while((_++<w||h[0]!==void 0)&&y--)}return x[0]||x.shift(),g.e=c,tr(g,o?i+Gr(g)+1:i)}}();function HD(e,t){var a,n,s,i,o,l,c=0,d=0,u=e.constructor,m=u.precision;if(Gr(e)>16)throw Error(nN+Gr(e));if(!e.s)return new u(kn);for(yr=!1,l=m,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(n=Math.log(tl(2,d))/Math.LN10*2+5|0,l+=n,a=s=i=new u(kn),u.precision=l;;){if(s=tr(s.times(e),l),a=a.times(++c),o=i.plus(xi(s,a,l)),Ws(o.d).slice(0,l)===Ws(i.d).slice(0,l)){for(;d--;)i=tr(i.times(i),l);return u.precision=m,t==null?(yr=!0,tr(i,m)):i}i=o}}function Gr(e){for(var t=e.e*mr,a=e.d[0];a>=10;a/=10)t++;return t}function Db(e,t,a){if(t>e.LN10.sd())throw yr=!0,a&&(e.precision=a),Error(Xn+"LN10 precision limit exceeded");return tr(new e(e.LN10),t)}function Xi(e){for(var t="";e--;)t+="0";return t}function kp(e,t){var a,n,s,i,o,l,c,d,u,m=1,p=10,g=e,x=g.d,h=g.constructor,v=h.precision;if(g.s<1)throw Error(Xn+(g.s?"NaN":"-Infinity"));if(g.eq(kn))return new h(0);if(t==null?(yr=!1,d=v):d=t,g.eq(10))return t==null&&(yr=!0),Db(h,d);if(d+=p,h.precision=d,a=Ws(x),n=a.charAt(0),i=Gr(g),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&a.charAt(1)>3;)g=g.times(e),a=Ws(g.d),n=a.charAt(0),m++;i=Gr(g),n>1?(g=new h("0."+a),i++):g=new h(n+"."+a.slice(1))}else return c=Db(h,d+2,v).times(i+""),g=kp(new h(n+"."+a.slice(1)),d-p).plus(c),h.precision=v,t==null?(yr=!0,tr(g,v)):g;for(l=o=g=xi(g.minus(kn),g.plus(kn),d),u=tr(g.times(g),d),s=3;;){if(o=tr(o.times(u),d),c=l.plus(xi(o,new h(s),d)),Ws(c.d).slice(0,d)===Ws(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(Db(h,d+2,v).times(i+""))),l=xi(l,new h(m),d),h.precision=v,t==null?(yr=!0,tr(l,v)):l;l=c,s+=2}}function fC(e,t){var a,n,s;for((a=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(a<0&&(a=n),a+=+t.slice(n+1),t=t.substring(0,n)):a<0&&(a=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,a=a-n-1,e.e=uu(a/mr),e.d=[],n=(a+1)%mr,a<0&&(n+=mr),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=mr;n<s;)e.d.push(+t.slice(n,n+=mr));t=t.slice(n),n=mr-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),yr&&(e.e>jx||e.e<-jx))throw Error(nN+a)}else e.s=0,e.e=0,e.d=[0];return e}function tr(e,t,a){var n,s,i,o,l,c,d,u,m=e.d;for(o=1,i=m[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=mr,s=t,d=m[u=0];else{if(u=Math.ceil((n+1)/mr),i=m.length,u>=i)return e;for(d=i=m[u],o=1;i>=10;i/=10)o++;n%=mr,s=n-mr+o}if(a!==void 0&&(i=tl(10,o-s-1),l=d/i%10|0,c=t<0||m[u+1]!==void 0||d%i,c=a<4?(l||c)&&(a==0||a==(e.s<0?3:2)):l>5||l==5&&(a==4||c||a==6&&(n>0?s>0?d/tl(10,o-s):0:m[u-1])%10&1||a==(e.s<0?8:7))),t<1||!m[0])return c?(i=Gr(e),m.length=1,t=t-i-1,m[0]=tl(10,(mr-t%mr)%mr),e.e=uu(-t/mr)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(n==0?(m.length=u,i=1,u--):(m.length=u+1,i=tl(10,mr-n),m[u]=s>0?(d/tl(10,o-s)%tl(10,s)|0)*i:0),c)for(;;)if(u==0){(m[0]+=i)==fa&&(m[0]=1,++e.e);break}else{if(m[u]+=i,m[u]!=fa)break;m[u--]=0,i=1}for(n=m.length;m[--n]===0;)m.pop();if(yr&&(e.e>jx||e.e<-jx))throw Error(nN+Gr(e));return e}function KD(e,t){var a,n,s,i,o,l,c,d,u,m,p=e.constructor,g=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),yr?tr(t,g):t;if(c=e.d,m=t.d,n=t.e,d=e.e,c=c.slice(),o=d-n,o){for(u=o<0,u?(a=c,o=-o,l=m.length):(a=m,n=d,l=c.length),s=Math.max(Math.ceil(g/mr),l)+2,o>s&&(o=s,a.length=1),a.reverse(),s=o;s--;)a.push(0);a.reverse()}else{for(s=c.length,l=m.length,u=s<l,u&&(l=s),s=0;s<l;s++)if(c[s]!=m[s]){u=c[s]<m[s];break}o=0}for(u&&(a=c,c=m,m=a,t.s=-t.s),l=c.length,s=m.length-l;s>0;--s)c[l++]=0;for(s=m.length;s>o;){if(c[--s]<m[s]){for(i=s;i&&c[--i]===0;)c[i]=fa-1;--c[i],c[s]+=fa}c[s]-=m[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,yr?tr(t,g):t):new p(0)}function Ll(e,t,a){var n,s=Gr(e),i=Ws(e.d),o=i.length;return t?(a&&(n=a-o)>0?i=i.charAt(0)+"."+i.slice(1)+Xi(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Xi(-s-1)+i,a&&(n=a-o)>0&&(i+=Xi(n))):s>=o?(i+=Xi(s+1-o),a&&(n=a-s-1)>0&&(i=i+"."+Xi(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),a&&(n=a-o)>0&&(s+1===o&&(i+="."),i+=Xi(n))),e.s<0?"-"+i:i}function hC(e,t){if(e.length>t)return e.length=t,!0}function VD(e){var t,a,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(_l+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return fC(o,i.toString())}else if(typeof i!="string")throw Error(_l+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Tse.test(i))fC(o,i);else throw Error(_l+i)}if(s.prototype=et,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=VD,s.config=s.set=Ose,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(a=n[t++])||(e[a]=this[a]);return s.config(e),s}function Ose(e){if(!e||typeof e!="object")throw Error(Xn+"Object expected");var t,a,n,s=["precision",1,du,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[a=s[t]])!==void 0)if(uu(n)===n&&n>=s[t+1]&&n<=s[t+2])this[a]=n;else throw Error(_l+a+": "+n);if((n=e[a="LN10"])!==void 0)if(n==Math.LN10)this[a]=new this(n);else throw Error(_l+a+": "+n);return this}var sN=VD(Ese);kn=new sN(1);const Zt=sN;function Mse(e){return $se(e)||Lse(e)||Ise(e)||Dse()}function Dse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ise(e,t){if(e){if(typeof e=="string")return Qw(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Qw(e,t)}}function Lse(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function $se(e){if(Array.isArray(e))return Qw(e)}function Qw(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Rse=function(t){return t},GD={},YD=function(t){return t===GD},gC=function(t){return function a(){return arguments.length===0||arguments.length===1&&YD(arguments.length<=0?void 0:arguments[0])?a:t.apply(void 0,arguments)}},qse=function e(t,a){return t===1?a:gC(function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==GD}).length;return o>=t?a.apply(void 0,s):e(t-o,gC(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var u=s.map(function(m){return YD(m)?c.shift():m});return a.apply(void 0,Mse(u).concat(c))}))})},wv=function(t){return qse(t.length,t)},Jw=function(t,a){for(var n=[],s=t;s<a;++s)n[s-t]=s;return n},Fse=wv(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(a){return t[a]}).map(e)}),zse=function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];if(!a.length)return Rse;var s=a.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},e_=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},ZD=function(t){var a=null,n=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return a&&i.every(function(l,c){return l===a[c]})||(a=i,n=t.apply(void 0,i)),n}};function Bse(e){var t;return e===0?t=1:t=Math.floor(new Zt(e).abs().log(10).toNumber())+1,t}function Wse(e,t,a){for(var n=new Zt(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(a),s++;return i}var Use=wv(function(e,t,a){var n=+e,s=+t;return n+a*(s-n)}),Hse=wv(function(e,t,a){var n=t-+e;return n=n||1/0,(a-e)/n}),Kse=wv(function(e,t,a){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(a-e)/n))});const _v={rangeStep:Wse,getDigitCount:Bse,interpolateNumber:Use,uninterpolateNumber:Hse,uninterpolateTruncation:Kse};function t_(e){return Yse(e)||Gse(e)||XD(e)||Vse()}function Vse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gse(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Yse(e){if(Array.isArray(e))return r_(e)}function Np(e,t){return Qse(e)||Xse(e,t)||XD(e,t)||Zse()}function Zse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XD(e,t){if(e){if(typeof e=="string")return r_(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return r_(e,t)}}function r_(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Xse(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var a=[],n=!0,s=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(a.push(l.value),!(t&&a.length===t));n=!0);}catch(c){s=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(s)throw i}}return a}}function Qse(e){if(Array.isArray(e))return e}function QD(e){var t=Np(e,2),a=t[0],n=t[1],s=a,i=n;return a>n&&(s=n,i=a),[s,i]}function JD(e,t,a){if(e.lte(0))return new Zt(0);var n=_v.getDigitCount(e.toNumber()),s=new Zt(10).pow(n),i=e.div(s),o=n!==1?.05:.1,l=new Zt(Math.ceil(i.div(o).toNumber())).add(a).mul(o),c=l.mul(s);return t?c:new Zt(Math.ceil(c))}function Jse(e,t,a){var n=1,s=new Zt(e);if(!s.isint()&&a){var i=Math.abs(e);i<1?(n=new Zt(10).pow(_v.getDigitCount(e)-1),s=new Zt(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new Zt(Math.floor(e)))}else e===0?s=new Zt(Math.floor((t-1)/2)):a||(s=new Zt(Math.floor(e)));var o=Math.floor((t-1)/2),l=zse(Fse(function(c){return s.add(new Zt(c-o).mul(n)).toNumber()}),Jw);return l(0,t)}function eI(e,t,a,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(a-1)))return{step:new Zt(0),tickMin:new Zt(0),tickMax:new Zt(0)};var i=JD(new Zt(t).sub(e).div(a-1),n,s),o;e<=0&&t>=0?o=new Zt(0):(o=new Zt(e).add(t).div(2),o=o.sub(new Zt(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new Zt(t).sub(o).div(i).toNumber()),d=l+c+1;return d>a?eI(e,t,a,n,s+1):(d<a&&(c=t>0?c+(a-d):c,l=t>0?l:l+(a-d)),{step:i,tickMin:o.sub(new Zt(l).mul(i)),tickMax:o.add(new Zt(c).mul(i))})}function eie(e){var t=Np(e,2),a=t[0],n=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=QD([a,n]),c=Np(l,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var m=u===1/0?[d].concat(t_(Jw(0,s-1).map(function(){return 1/0}))):[].concat(t_(Jw(0,s-1).map(function(){return-1/0})),[u]);return a>n?e_(m):m}if(d===u)return Jse(d,s,i);var p=eI(d,u,o,i),g=p.step,x=p.tickMin,h=p.tickMax,v=_v.rangeStep(x,h.add(new Zt(.1).mul(g)),g);return a>n?e_(v):v}function tie(e,t){var a=Np(e,2),n=a[0],s=a[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=QD([n,s]),l=Np(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[n,s];if(c===d)return[c];var u=Math.max(t,2),m=JD(new Zt(d).sub(c).div(u-1),i,0),p=[].concat(t_(_v.rangeStep(new Zt(c),new Zt(d).sub(new Zt(.99).mul(m)),m)),[d]);return n>s?e_(p):p}var rie=ZD(eie),aie=ZD(tie),nie="Invariant failed";function $l(e,t){throw new Error(nie)}var sie=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function vd(e){"@babel/helpers - typeof";return vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vd(e)}function wx(){return wx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},wx.apply(this,arguments)}function iie(e,t){return die(e)||cie(e,t)||lie(e,t)||oie()}function oie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lie(e,t){if(e){if(typeof e=="string")return xC(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return xC(e,t)}}function xC(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function cie(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(a=a.call(e)).next,t!==0)for(;!(c=(n=i.call(a)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&a.return!=null&&(o=a.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function die(e){if(Array.isArray(e))return e}function uie(e,t){if(e==null)return{};var a=mie(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function mie(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function pie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fie(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aI(n.key),n)}}function hie(e,t,a){return t&&fie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gie(e,t,a){return t=_x(t),xie(e,tI()?Reflect.construct(t,a||[],_x(e).constructor):t.apply(e,a))}function xie(e,t){if(t&&(vd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yie(e)}function yie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tI=function(){return!!e})()}function _x(e){return _x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},_x(e)}function vie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a_(e,t)}function a_(e,t){return a_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},a_(e,t)}function rI(e,t,a){return t=aI(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function aI(e){var t=bie(e,"string");return vd(t)=="symbol"?t:t+""}function bie(e,t){if(vd(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(vd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var mu=function(e){function t(){return pie(this,t),gie(this,t,arguments)}return vie(t,e),hie(t,[{key:"render",value:function(){var n=this.props,s=n.offset,i=n.layout,o=n.width,l=n.dataKey,c=n.data,d=n.dataPointFormatter,u=n.xAxis,m=n.yAxis,p=uie(n,sie),g=Qe(p,!1);this.props.direction==="x"&&u.type!=="number"&&$l();var x=c.map(function(h){var v=d(h,l),b=v.x,y=v.y,j=v.value,_=v.errorVal;if(!_)return null;var w=[],k,N;if(Array.isArray(_)){var P=iie(_,2);k=P[0],N=P[1]}else k=N=_;if(i==="vertical"){var A=u.scale,M=y+s,R=M+o,O=M-o,q=A(j-k),S=A(j+N);w.push({x1:S,y1:R,x2:S,y2:O}),w.push({x1:q,y1:M,x2:S,y2:M}),w.push({x1:q,y1:R,x2:q,y2:O})}else if(i==="horizontal"){var I=m.scale,E=b+s,W=E-o,B=E+o,C=I(j-k),D=I(j+N);w.push({x1:W,y1:D,x2:B,y2:D}),w.push({x1:E,y1:C,x2:E,y2:D}),w.push({x1:W,y1:C,x2:B,y2:C})}return le.createElement(ft,wx({className:"recharts-errorBar",key:"bar-".concat(w.map(function(z){return"".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2)}))},g),w.map(function(z){return le.createElement("line",wx({},z,{key:"line-".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2)}))}))});return le.createElement(ft,{className:"recharts-errorBars"},x)}}])}(le.Component);rI(mu,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});rI(mu,"displayName","ErrorBar");function Sp(e){"@babel/helpers - typeof";return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sp(e)}function yC(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Ko(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?yC(Object(a),!0).forEach(function(n){jie(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yC(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function jie(e,t,a){return t=wie(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function wie(e){var t=_ie(e,"string");return Sp(t)=="symbol"?t:t+""}function _ie(e,t){if(Sp(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Sp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nI=function(t){var a=t.children,n=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,o=Ur(a,aa);if(!o)return null;var l=aa.defaultProps,c=l!==void 0?Ko(Ko({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:i==="children"?d=(n||[]).reduce(function(u,m){var p=m.item,g=m.props,x=g.sectors||g.data||[];return u.concat(x.map(function(h){return{type:o.props.iconType||p.props.legendType,value:h.name,color:h.fill,payload:h}}))},[]):d=(n||[]).map(function(u){var m=u.item,p=m.type.defaultProps,g=p!==void 0?Ko(Ko({},p),m.props):{},x=g.dataKey,h=g.name,v=g.legendType,b=g.hide;return{inactive:b,dataKey:x,type:c.iconType||v||"square",color:iN(m),value:h||x,payload:g}}),Ko(Ko(Ko({},c),aa.getWithHeight(o,s)),{},{payload:d,item:o})};function Ap(e){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ap(e)}function vC(e){return Aie(e)||Sie(e)||Nie(e)||kie()}function kie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nie(e,t){if(e){if(typeof e=="string")return n_(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return n_(e,t)}}function Sie(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Aie(e){if(Array.isArray(e))return n_(e)}function n_(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function bC(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Mr(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?bC(Object(a),!0).forEach(function(n){Xc(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):bC(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Xc(e,t,a){return t=Pie(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Pie(e){var t=Cie(e,"string");return Ap(t)=="symbol"?t:t+""}function Cie(e,t){if(Ap(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Ap(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lt(e,t,a){return dt(e)||dt(t)?a:ia(t)?ya(e,t,a):at(t)?t(e):a}function $m(e,t,a,n){var s=Sse(e,function(l){return Lt(l,t)});if(a==="number"){var i=s.filter(function(l){return He(l)||parseFloat(l)});return i.length?[hf(i),io(i)]:[1/0,-1/0]}var o=n?s.filter(function(l){return!dt(l)}):s;return o.map(function(l){return ia(l)||l instanceof Date?l:""})}var Eie=function(t){var a,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(a=n?.length)!==null&&a!==void 0?a:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<l;d++){var u=d>0?s[d-1].coordinate:s[l-1].coordinate,m=s[d].coordinate,p=d>=l-1?s[0].coordinate:s[d+1].coordinate,g=void 0;if(Ga(m-u)!==Ga(p-m)){var x=[];if(Ga(p-m)===Ga(c[1]-c[0])){g=p;var h=m+c[1]-c[0];x[0]=Math.min(h,(h+u)/2),x[1]=Math.max(h,(h+u)/2)}else{g=u;var v=p+c[1]-c[0];x[0]=Math.min(m,(v+m)/2),x[1]=Math.max(m,(v+m)/2)}var b=[Math.min(m,(g+m)/2),Math.max(m,(g+m)/2)];if(t>b[0]&&t<=b[1]||t>=x[0]&&t<=x[1]){o=s[d].index;break}}else{var y=Math.min(u,p),j=Math.max(u,p);if(t>(y+m)/2&&t<=(j+m)/2){o=s[d].index;break}}}else for(var _=0;_<l;_++)if(_===0&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_>0&&_<l-1&&t>(n[_].coordinate+n[_-1].coordinate)/2&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_===l-1&&t>(n[_].coordinate+n[_-1].coordinate)/2){o=n[_].index;break}return o},iN=function(t){var a,n=t,s=n.type.displayName,i=(a=t.type)!==null&&a!==void 0&&a.defaultProps?Mr(Mr({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(s){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},Tie=function(t){var a=t.barSize,n=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),c=0,d=l.length;c<d;c++)for(var u=i[l[c]].stackGroups,m=Object.keys(u),p=0,g=m.length;p<g;p++){var x=u[m[p]],h=x.items,v=x.cateAxisId,b=h.filter(function(N){return gi(N.type).indexOf("Bar")>=0});if(b&&b.length){var y=b[0].type.defaultProps,j=y!==void 0?Mr(Mr({},y),b[0].props):b[0].props,_=j.barSize,w=j[v];o[w]||(o[w]=[]);var k=dt(_)?a:_;o[w].push({item:b[0],stackList:b.slice(1),barSize:dt(k)?void 0:Ya(k,n,0)})}}return o},Oie=function(t){var a=t.barGap,n=t.barCategoryGap,s=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var d=Ya(a,s,0,!0),u,m=[];if(o[0].barSize===+o[0].barSize){var p=!1,g=s/c,x=o.reduce(function(_,w){return _+w.barSize||0},0);x+=(c-1)*d,x>=s&&(x-=(c-1)*d,d=0),x>=s&&g>0&&(p=!0,g*=.9,x=c*g);var h=(s-x)/2>>0,v={offset:h-d,size:0};u=o.reduce(function(_,w){var k={item:w.item,position:{offset:v.offset+v.size+d,size:p?g:w.barSize}},N=[].concat(vC(_),[k]);return v=N[N.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(P){N.push({item:P,position:v})}),N},m)}else{var b=Ya(n,s,0,!0);s-2*b-(c-1)*d<=0&&(d=0);var y=(s-2*b-(c-1)*d)/c;y>1&&(y>>=0);var j=l===+l?Math.min(y,l):y;u=o.reduce(function(_,w,k){var N=[].concat(vC(_),[{item:w.item,position:{offset:b+(y+d)*k+(y-j)/2,size:j}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(P){N.push({item:P,position:N[N.length-1].position})}),N},m)}return u},Mie=function(t,a,n,s){var i=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),d=nI({children:i,legendWidth:c});if(d){var u=s||{},m=u.width,p=u.height,g=d.align,x=d.verticalAlign,h=d.layout;if((h==="vertical"||h==="horizontal"&&x==="middle")&&g!=="center"&&He(t[g]))return Mr(Mr({},t),{},Xc({},g,t[g]+(m||0)));if((h==="horizontal"||h==="vertical"&&g==="center")&&x!=="middle"&&He(t[x]))return Mr(Mr({},t),{},Xc({},x,t[x]+(p||0)))}return t},Die=function(t,a,n){return dt(a)?!0:t==="horizontal"?a==="yAxis":t==="vertical"||n==="x"?a==="xAxis":n==="y"?a==="yAxis":!0},sI=function(t,a,n,s,i){var o=a.props.children,l=Ja(o,mu).filter(function(d){return Die(s,i,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return t.reduce(function(d,u){var m=Lt(u,n);if(dt(m))return d;var p=Array.isArray(m)?[hf(m),io(m)]:[m,m],g=c.reduce(function(x,h){var v=Lt(u,h,0),b=p[0]-Math.abs(Array.isArray(v)?v[0]:v),y=p[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(b,x[0]),Math.max(y,x[1])]},[1/0,-1/0]);return[Math.min(g[0],d[0]),Math.max(g[1],d[1])]},[1/0,-1/0])}return null},Iie=function(t,a,n,s,i){var o=a.map(function(l){return sI(t,l,n,i,s)}).filter(function(l){return!dt(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},iI=function(t,a,n,s,i){var o=a.map(function(c){var d=c.props.dataKey;return n==="number"&&d&&sI(t,c,d,s)||$m(t,d,n,i)});if(n==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var u=0,m=d.length;u<m;u++)l[d[u]]||(l[d[u]]=!0,c.push(d[u]));return c},[])},oI=function(t,a){return t==="horizontal"&&a==="xAxis"||t==="vertical"&&a==="yAxis"||t==="centric"&&a==="angleAxis"||t==="radial"&&a==="radiusAxis"},lI=function(t,a,n,s){if(s)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===a&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate});return i||l.push(a),o||l.push(n),l},fi=function(t,a,n){if(!t)return null;var s=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,d=(a||n)&&o==="category"&&s.bandwidth?s.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&l?.length>=2?Ga(l[0]-l[1])*2*d:d,a&&(t.ticks||t.niceTicks)){var u=(t.ticks||t.niceTicks).map(function(m){var p=i?i.indexOf(m):m;return{coordinate:s(p)+d,value:m,offset:d}});return u.filter(function(m){return!$o(m.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(m,p){return{coordinate:s(m)+d,value:m,index:p,offset:d}}):s.ticks&&!n?s.ticks(t.tickCount).map(function(m){return{coordinate:s(m)+d,value:m,offset:d}}):s.domain().map(function(m,p){return{coordinate:s(m)+d,value:i?i[m]:m,index:p,offset:d}})},Ib=new WeakMap,Nh=function(t,a){if(typeof a!="function")return t;Ib.has(t)||Ib.set(t,new WeakMap);var n=Ib.get(t);if(n.has(a))return n.get(a);var s=function(){t.apply(void 0,arguments),a.apply(void 0,arguments)};return n.set(a,s),s},cI=function(t,a,n){var s=t.scale,i=t.type,o=t.layout,l=t.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:vp(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:xx(),realScaleType:"linear"}:i==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!n)?{scale:Lm(),realScaleType:"point"}:i==="category"?{scale:vp(),realScaleType:"band"}:{scale:xx(),realScaleType:"linear"};if(Dl(s)){var c="scale".concat(iv(s));return{scale:(pC[c]||Lm)(),realScaleType:pC[c]?c:"point"}}return at(s)?{scale:s}:{scale:Lm(),realScaleType:"point"}},jC=1e-4,dI=function(t){var a=t.domain();if(!(!a||a.length<=2)){var n=a.length,s=t.range(),i=Math.min(s[0],s[1])-jC,o=Math.max(s[0],s[1])+jC,l=t(a[0]),c=t(a[n-1]);(l<i||l>o||c<i||c>o)&&t.domain([a[0],a[n-1]])}},Lie=function(t,a){if(!t)return null;for(var n=0,s=t.length;n<s;n++)if(t[n].item===a)return t[n].position;return null},$ie=function(t,a){if(!a||a.length!==2||!He(a[0])||!He(a[1]))return t;var n=Math.min(a[0],a[1]),s=Math.max(a[0],a[1]),i=[t[0],t[1]];return(!He(t[0])||t[0]<n)&&(i[0]=n),(!He(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<n&&(i[1]=n),i},Rie=function(t){var a=t.length;if(!(a<=0))for(var n=0,s=t[0].length;n<s;++n)for(var i=0,o=0,l=0;l<a;++l){var c=$o(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=i,t[l][n][1]=i+c,i=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+c,o=t[l][n][1])}},qie=function(t){var a=t.length;if(!(a<=0))for(var n=0,s=t[0].length;n<s;++n)for(var i=0,o=0;o<a;++o){var l=$o(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},Fie={sign:Rie,expand:gV,none:ud,silhouette:xV,wiggle:yV,positive:qie},zie=function(t,a,n){var s=a.map(function(l){return l.props.dataKey}),i=Fie[n],o=hV().keys(s).value(function(l,c){return+Lt(l,c,0)}).order(Cw).offset(i);return o(t)},Bie=function(t,a,n,s,i,o){if(!t)return null;var l=o?a.reverse():a,c={},d=l.reduce(function(m,p){var g,x=(g=p.type)!==null&&g!==void 0&&g.defaultProps?Mr(Mr({},p.type.defaultProps),p.props):p.props,h=x.stackId,v=x.hide;if(v)return m;var b=x[n],y=m[b]||{hasStack:!1,stackGroups:{}};if(ia(h)){var j=y.stackGroups[h]||{numericAxisId:n,cateAxisId:s,items:[]};j.items.push(p),y.hasStack=!0,y.stackGroups[h]=j}else y.stackGroups[Di("_stackId_")]={numericAxisId:n,cateAxisId:s,items:[p]};return Mr(Mr({},m),{},Xc({},b,y))},c),u={};return Object.keys(d).reduce(function(m,p){var g=d[p];if(g.hasStack){var x={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(h,v){var b=g.stackGroups[v];return Mr(Mr({},h),{},Xc({},v,{numericAxisId:n,cateAxisId:s,items:b.items,stackedData:zie(t,b.items,i)}))},x)}return Mr(Mr({},m),{},Xc({},p,g))},u)},uI=function(t,a){var n=a.realScaleType,s=a.type,i=a.tickCount,o=a.originalDomain,l=a.allowDecimals,c=n||a.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=t.domain();if(!d.length)return null;var u=rie(d,i,l);return t.domain([hf(u),io(u)]),{niceTicks:u}}if(i&&s==="number"){var m=t.domain(),p=aie(m,i,l);return{niceTicks:p}}return null};function bd(e){var t=e.axis,a=e.ticks,n=e.bandSize,s=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!dt(s[t.dataKey])){var l=Yg(a,"value",s[t.dataKey]);if(l)return l.coordinate+n/2}return a[i]?a[i].coordinate+n/2:null}var c=Lt(s,dt(o)?t.dataKey:o);return dt(c)?null:t.scale(c)}var wC=function(t){var a=t.axis,n=t.ticks,s=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(a.type==="category")return n[l]?n[l].coordinate+s:null;var c=Lt(o,a.dataKey,a.domain[l]);return dt(c)?null:a.scale(c)-i/2+s},Wie=function(t){var a=t.numericAxis,n=a.scale.domain();if(a.type==="number"){var s=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return s<=0&&i>=0?0:i<0?i:s}return n[0]},Uie=function(t,a){var n,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Mr(Mr({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(ia(i)){var o=a[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},Hie=function(t){return t.reduce(function(a,n){return[hf(n.concat([a[0]]).filter(He)),io(n.concat([a[1]]).filter(He))]},[1/0,-1/0])},mI=function(t,a,n){return Object.keys(t).reduce(function(s,i){var o=t[i],l=o.stackedData,c=l.reduce(function(d,u){var m=Hie(u.slice(a,n+1));return[Math.min(d[0],m[0]),Math.max(d[1],m[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},_C=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,kC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,s_=function(t,a,n){if(at(t))return t(a,n);if(!Array.isArray(t))return a;var s=[];if(He(t[0]))s[0]=n?t[0]:Math.min(t[0],a[0]);else if(_C.test(t[0])){var i=+_C.exec(t[0])[1];s[0]=a[0]-i}else at(t[0])?s[0]=t[0](a[0]):s[0]=a[0];if(He(t[1]))s[1]=n?t[1]:Math.max(t[1],a[1]);else if(kC.test(t[1])){var o=+kC.exec(t[1])[1];s[1]=a[1]+o}else at(t[1])?s[1]=t[1](a[1]):s[1]=a[1];return s},kx=function(t,a,n){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!n||s>0)return s}if(t&&a&&a.length>=2){for(var i=Dk(a,function(m){return m.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var d=i[l],u=i[l-1];o=Math.min((d.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},NC=function(t,a,n){return!t||!t.length||Po(t,ya(n,"type.defaultProps.domain"))?a:t},pI=function(t,a){var n=t.type.defaultProps?Mr(Mr({},t.type.defaultProps),t.props):t.props,s=n.dataKey,i=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,d=n.chartType,u=n.hide;return Mr(Mr({},Qe(t,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:iN(t),value:Lt(a,s),type:c,payload:a,chartType:d,hide:u})};function Pp(e){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pp(e)}function SC(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function oi(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?SC(Object(a),!0).forEach(function(n){fI(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):SC(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function fI(e,t,a){return t=Kie(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Kie(e){var t=Vie(e,"string");return Pp(t)=="symbol"?t:t+""}function Vie(e,t){if(Pp(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Pp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gie(e,t){return Qie(e)||Xie(e,t)||Zie(e,t)||Yie()}function Yie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zie(e,t){if(e){if(typeof e=="string")return AC(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return AC(e,t)}}function AC(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Xie(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(a=a.call(e)).next,t!==0)for(;!(c=(n=i.call(a)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&a.return!=null&&(o=a.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Qie(e){if(Array.isArray(e))return e}var Nx=Math.PI/180,Jie=function(t){return t*180/Math.PI},lr=function(t,a,n,s){return{x:t+Math.cos(-Nx*s)*n,y:a+Math.sin(-Nx*s)*n}},hI=function(t,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(a-(n.top||0)-(n.bottom||0)))/2},eoe=function(t,a,n,s,i){var o=t.width,l=t.height,c=t.startAngle,d=t.endAngle,u=Ya(t.cx,o,o/2),m=Ya(t.cy,l,l/2),p=hI(o,l,n),g=Ya(t.innerRadius,p,0),x=Ya(t.outerRadius,p,p*.8),h=Object.keys(a);return h.reduce(function(v,b){var y=a[b],j=y.domain,_=y.reversed,w;if(dt(y.range))s==="angleAxis"?w=[c,d]:s==="radiusAxis"&&(w=[g,x]),_&&(w=[w[1],w[0]]);else{w=y.range;var k=w,N=Gie(k,2);c=N[0],d=N[1]}var P=cI(y,i),A=P.realScaleType,M=P.scale;M.domain(j).range(w),dI(M);var R=uI(M,oi(oi({},y),{},{realScaleType:A})),O=oi(oi(oi({},y),R),{},{range:w,radius:x,realScaleType:A,scale:M,cx:u,cy:m,innerRadius:g,outerRadius:x,startAngle:c,endAngle:d});return oi(oi({},v),{},fI({},b,O))},{})},toe=function(t,a){var n=t.x,s=t.y,i=a.x,o=a.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(s-o,2))},roe=function(t,a){var n=t.x,s=t.y,i=a.cx,o=a.cy,l=toe({x:n,y:s},{x:i,y:o});if(l<=0)return{radius:l};var c=(n-i)/l,d=Math.acos(c);return s>o&&(d=2*Math.PI-d),{radius:l,angle:Jie(d),angleInRadian:d}},aoe=function(t){var a=t.startAngle,n=t.endAngle,s=Math.floor(a/360),i=Math.floor(n/360),o=Math.min(s,i);return{startAngle:a-o*360,endAngle:n-o*360}},noe=function(t,a){var n=a.startAngle,s=a.endAngle,i=Math.floor(n/360),o=Math.floor(s/360),l=Math.min(i,o);return t+l*360},PC=function(t,a){var n=t.x,s=t.y,i=roe({x:n,y:s},a),o=i.radius,l=i.angle,c=a.innerRadius,d=a.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var u=aoe(a),m=u.startAngle,p=u.endAngle,g=l,x;if(m<=p){for(;g>p;)g-=360;for(;g<m;)g+=360;x=g>=m&&g<=p}else{for(;g>m;)g-=360;for(;g<p;)g+=360;x=g>=p&&g<=m}return x?oi(oi({},a),{},{radius:o,angle:noe(g,a)}):null},gI=function(t){return!f.isValidElement(t)&&!at(t)&&typeof t!="boolean"?t.className:""};function Cp(e){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cp(e)}var soe=["offset"];function ioe(e){return doe(e)||coe(e)||loe(e)||ooe()}function ooe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function loe(e,t){if(e){if(typeof e=="string")return i_(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return i_(e,t)}}function coe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function doe(e){if(Array.isArray(e))return i_(e)}function i_(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function uoe(e,t){if(e==null)return{};var a=moe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function moe(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function CC(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function ea(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?CC(Object(a),!0).forEach(function(n){poe(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):CC(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function poe(e,t,a){return t=foe(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function foe(e){var t=hoe(e,"string");return Cp(t)=="symbol"?t:t+""}function hoe(e,t){if(Cp(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Cp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ep(){return Ep=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ep.apply(this,arguments)}var goe=function(t){var a=t.value,n=t.formatter,s=dt(t.children)?a:t.children;return at(n)?n(s):s},xoe=function(t,a){var n=Ga(a-t),s=Math.min(Math.abs(a-t),360);return n*s},yoe=function(t,a,n){var s=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,d=c.cx,u=c.cy,m=c.innerRadius,p=c.outerRadius,g=c.startAngle,x=c.endAngle,h=c.clockWise,v=(m+p)/2,b=xoe(g,x),y=b>=0?1:-1,j,_;s==="insideStart"?(j=g+y*o,_=h):s==="insideEnd"?(j=x-y*o,_=!h):s==="end"&&(j=x+y*o,_=h),_=b<=0?_:!_;var w=lr(d,u,v,j),k=lr(d,u,v,j+(_?1:-1)*359),N="M".concat(w.x,",").concat(w.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(_?0:1,`,
    `).concat(k.x,",").concat(k.y),P=dt(t.id)?Di("recharts-radial-line-"):t.id;return le.createElement("text",Ep({},n,{dominantBaseline:"central",className:wt("recharts-radial-bar-label",l)}),le.createElement("defs",null,le.createElement("path",{id:P,d:N})),le.createElement("textPath",{xlinkHref:"#".concat(P)},a))},voe=function(t){var a=t.viewBox,n=t.offset,s=t.position,i=a,o=i.cx,l=i.cy,c=i.innerRadius,d=i.outerRadius,u=i.startAngle,m=i.endAngle,p=(u+m)/2;if(s==="outside"){var g=lr(o,l,d+n,p),x=g.x,h=g.y;return{x,y:h,textAnchor:x>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var v=(c+d)/2,b=lr(o,l,v,p),y=b.x,j=b.y;return{x:y,y:j,textAnchor:"middle",verticalAnchor:"middle"}},boe=function(t){var a=t.viewBox,n=t.parentViewBox,s=t.offset,i=t.position,o=a,l=o.x,c=o.y,d=o.width,u=o.height,m=u>=0?1:-1,p=m*s,g=m>0?"end":"start",x=m>0?"start":"end",h=d>=0?1:-1,v=h*s,b=h>0?"end":"start",y=h>0?"start":"end";if(i==="top"){var j={x:l+d/2,y:c-m*s,textAnchor:"middle",verticalAnchor:g};return ea(ea({},j),n?{height:Math.max(c-n.y,0),width:d}:{})}if(i==="bottom"){var _={x:l+d/2,y:c+u+p,textAnchor:"middle",verticalAnchor:x};return ea(ea({},_),n?{height:Math.max(n.y+n.height-(c+u),0),width:d}:{})}if(i==="left"){var w={x:l-v,y:c+u/2,textAnchor:b,verticalAnchor:"middle"};return ea(ea({},w),n?{width:Math.max(w.x-n.x,0),height:u}:{})}if(i==="right"){var k={x:l+d+v,y:c+u/2,textAnchor:y,verticalAnchor:"middle"};return ea(ea({},k),n?{width:Math.max(n.x+n.width-k.x,0),height:u}:{})}var N=n?{width:d,height:u}:{};return i==="insideLeft"?ea({x:l+v,y:c+u/2,textAnchor:y,verticalAnchor:"middle"},N):i==="insideRight"?ea({x:l+d-v,y:c+u/2,textAnchor:b,verticalAnchor:"middle"},N):i==="insideTop"?ea({x:l+d/2,y:c+p,textAnchor:"middle",verticalAnchor:x},N):i==="insideBottom"?ea({x:l+d/2,y:c+u-p,textAnchor:"middle",verticalAnchor:g},N):i==="insideTopLeft"?ea({x:l+v,y:c+p,textAnchor:y,verticalAnchor:x},N):i==="insideTopRight"?ea({x:l+d-v,y:c+p,textAnchor:b,verticalAnchor:x},N):i==="insideBottomLeft"?ea({x:l+v,y:c+u-p,textAnchor:y,verticalAnchor:g},N):i==="insideBottomRight"?ea({x:l+d-v,y:c+u-p,textAnchor:b,verticalAnchor:g},N):eu(i)&&(He(i.x)||ul(i.x))&&(He(i.y)||ul(i.y))?ea({x:l+Ya(i.x,d),y:c+Ya(i.y,u),textAnchor:"end",verticalAnchor:"end"},N):ea({x:l+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},N)},joe=function(t){return"cx"in t&&He(t.cx)};function ga(e){var t=e.offset,a=t===void 0?5:t,n=uoe(e,soe),s=ea({offset:a},n),i=s.viewBox,o=s.position,l=s.value,c=s.children,d=s.content,u=s.className,m=u===void 0?"":u,p=s.textBreakAll;if(!i||dt(l)&&dt(c)&&!f.isValidElement(d)&&!at(d))return null;if(f.isValidElement(d))return f.cloneElement(d,s);var g;if(at(d)){if(g=f.createElement(d,s),f.isValidElement(g))return g}else g=goe(s);var x=joe(i),h=Qe(s,!0);if(x&&(o==="insideStart"||o==="insideEnd"||o==="end"))return yoe(s,g,h);var v=x?voe(s):boe(s);return le.createElement(Il,Ep({className:wt("recharts-label",m)},h,v,{breakAll:p}),g)}ga.displayName="Label";var xI=function(t){var a=t.cx,n=t.cy,s=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,d=t.innerRadius,u=t.outerRadius,m=t.x,p=t.y,g=t.top,x=t.left,h=t.width,v=t.height,b=t.clockWise,y=t.labelViewBox;if(y)return y;if(He(h)&&He(v)){if(He(m)&&He(p))return{x:m,y:p,width:h,height:v};if(He(g)&&He(x))return{x:g,y:x,width:h,height:v}}return He(m)&&He(p)?{x:m,y:p,width:0,height:0}:He(a)&&He(n)?{cx:a,cy:n,startAngle:i||s||0,endAngle:o||s||0,innerRadius:d||0,outerRadius:u||c||l||0,clockWise:b}:t.viewBox?t.viewBox:{}},woe=function(t,a){return t?t===!0?le.createElement(ga,{key:"label-implicit",viewBox:a}):ia(t)?le.createElement(ga,{key:"label-implicit",viewBox:a,value:t}):f.isValidElement(t)?t.type===ga?f.cloneElement(t,{key:"label-implicit",viewBox:a}):le.createElement(ga,{key:"label-implicit",content:t,viewBox:a}):at(t)?le.createElement(ga,{key:"label-implicit",content:t,viewBox:a}):eu(t)?le.createElement(ga,Ep({viewBox:a},t,{key:"label-implicit"})):null:null},_oe=function(t,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var s=t.children,i=xI(t),o=Ja(s,ga).map(function(c,d){return f.cloneElement(c,{viewBox:a||i,key:"label-".concat(d)})});if(!n)return o;var l=woe(t.label,a||i);return[l].concat(ioe(o))};ga.parseViewBox=xI;ga.renderCallByParent=_oe;function koe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var yI=koe;const Noe=Dt(yI);function Tp(e){"@babel/helpers - typeof";return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tp(e)}var Soe=["valueAccessor"],Aoe=["data","dataKey","clockWise","id","textBreakAll"];function Poe(e){return Ooe(e)||Toe(e)||Eoe(e)||Coe()}function Coe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eoe(e,t){if(e){if(typeof e=="string")return o_(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return o_(e,t)}}function Toe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ooe(e){if(Array.isArray(e))return o_(e)}function o_(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Sx(){return Sx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Sx.apply(this,arguments)}function EC(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function TC(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?EC(Object(a),!0).forEach(function(n){Moe(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):EC(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Moe(e,t,a){return t=Doe(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Doe(e){var t=Ioe(e,"string");return Tp(t)=="symbol"?t:t+""}function Ioe(e,t){if(Tp(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Tp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OC(e,t){if(e==null)return{};var a=Loe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Loe(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}var $oe=function(t){return Array.isArray(t.value)?Noe(t.value):t.value};function Ht(e){var t=e.valueAccessor,a=t===void 0?$oe:t,n=OC(e,Soe),s=n.data,i=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,d=OC(n,Aoe);return!s||!s.length?null:le.createElement(ft,{className:"recharts-label-list"},s.map(function(u,m){var p=dt(i)?a(u,m):Lt(u&&u.payload,i),g=dt(l)?{}:{id:"".concat(l,"-").concat(m)};return le.createElement(ga,Sx({},Qe(u,!0),d,g,{parentViewBox:u.parentViewBox,value:p,textBreakAll:c,viewBox:ga.parseViewBox(dt(o)?u:TC(TC({},u),{},{clockWise:o})),key:"label-".concat(m),index:m}))}))}Ht.displayName="LabelList";function Roe(e,t){return e?e===!0?le.createElement(Ht,{key:"labelList-implicit",data:t}):le.isValidElement(e)||at(e)?le.createElement(Ht,{key:"labelList-implicit",data:t,content:e}):eu(e)?le.createElement(Ht,Sx({data:t},e,{key:"labelList-implicit"})):null:null}function qoe(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&a&&!e.label)return null;var n=e.children,s=Ja(n,Ht).map(function(o,l){return f.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!a)return s;var i=Roe(e.label,t);return[i].concat(Poe(s))}Ht.renderCallByParent=qoe;var Foe=["component"];function l_(e){"@babel/helpers - typeof";return l_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l_(e)}function zoe(e,t){if(e==null)return{};var a=Boe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Boe(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function pa(e){var t=e.component,a=zoe(e,Foe),n;return f.isValidElement(t)?n=f.cloneElement(t,a):at(t)?n=f.createElement(t,a):Kn(!1,"Customized's props `component` must be React.element or Function, but got %s.",l_(t)),le.createElement(ft,{className:"recharts-customized-wrapper"},n)}pa.displayName="Customized";function Op(e){"@babel/helpers - typeof";return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Op(e)}function c_(){return c_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c_.apply(this,arguments)}function MC(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function DC(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?MC(Object(a),!0).forEach(function(n){Woe(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):MC(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Woe(e,t,a){return t=Uoe(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Uoe(e){var t=Hoe(e,"string");return Op(t)=="symbol"?t:t+""}function Hoe(e,t){if(Op(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Op(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Koe=function(t,a){var n=Ga(a-t),s=Math.min(Math.abs(a-t),359.999);return n*s},Sh=function(t){var a=t.cx,n=t.cy,s=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,u=c*(l?1:-1)+s,m=Math.asin(c/u)/Nx,p=d?i:i+o*m,g=lr(a,n,u,p),x=lr(a,n,s,p),h=d?i-o*m:i,v=lr(a,n,u*Math.cos(m*Nx),h);return{center:g,circleTangency:x,lineTangency:v,theta:m}},vI=function(t){var a=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=Koe(o,l),d=o+c,u=lr(a,n,i,o),m=lr(a,n,i,d),p="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(s>0){var g=lr(a,n,s,o),x=lr(a,n,s,d);p+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(g.x,",").concat(g.y," Z")}else p+="L ".concat(a,",").concat(n," Z");return p},Voe=function(t){var a=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,u=t.endAngle,m=Ga(u-d),p=Sh({cx:a,cy:n,radius:i,angle:d,sign:m,cornerRadius:o,cornerIsExternal:c}),g=p.circleTangency,x=p.lineTangency,h=p.theta,v=Sh({cx:a,cy:n,radius:i,angle:u,sign:-m,cornerRadius:o,cornerIsExternal:c}),b=v.circleTangency,y=v.lineTangency,j=v.theta,_=c?Math.abs(d-u):Math.abs(d-u)-h-j;if(_<0)return l?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):vI({cx:a,cy:n,innerRadius:s,outerRadius:i,startAngle:d,endAngle:u});var w="M ".concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(_>180),",").concat(+(m<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(y.x,",").concat(y.y,`
  `);if(s>0){var k=Sh({cx:a,cy:n,radius:s,angle:d,sign:m,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),N=k.circleTangency,P=k.lineTangency,A=k.theta,M=Sh({cx:a,cy:n,radius:s,angle:u,sign:-m,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),R=M.circleTangency,O=M.lineTangency,q=M.theta,S=c?Math.abs(d-u):Math.abs(d-u)-A-q;if(S<0&&o===0)return"".concat(w,"L").concat(a,",").concat(n,"Z");w+="L".concat(O.x,",").concat(O.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(R.x,",").concat(R.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(S>180),",").concat(+(m>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(P.x,",").concat(P.y,"Z")}else w+="L".concat(a,",").concat(n,"Z");return w},Goe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},bI=function(t){var a=DC(DC({},Goe),t),n=a.cx,s=a.cy,i=a.innerRadius,o=a.outerRadius,l=a.cornerRadius,c=a.forceCornerRadius,d=a.cornerIsExternal,u=a.startAngle,m=a.endAngle,p=a.className;if(o<i||u===m)return null;var g=wt("recharts-sector",p),x=o-i,h=Ya(l,x,0,!0),v;return h>0&&Math.abs(u-m)<360?v=Voe({cx:n,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(h,x/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:m}):v=vI({cx:n,cy:s,innerRadius:i,outerRadius:o,startAngle:u,endAngle:m}),le.createElement("path",c_({},Qe(a,!0),{className:g,d:v,role:"img"}))};function Mp(e){"@babel/helpers - typeof";return Mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mp(e)}function d_(){return d_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d_.apply(this,arguments)}function IC(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function LC(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?IC(Object(a),!0).forEach(function(n){Yoe(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):IC(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Yoe(e,t,a){return t=Zoe(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Zoe(e){var t=Xoe(e,"string");return Mp(t)=="symbol"?t:t+""}function Xoe(e,t){if(Mp(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Mp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $C={curveBasisClosed:nV,curveBasisOpen:sV,curveBasis:aV,curveBumpX:WK,curveBumpY:UK,curveLinearClosed:iV,curveLinear:lv,curveMonotoneX:oV,curveMonotoneY:lV,curveNatural:cV,curveStep:dV,curveStepAfter:mV,curveStepBefore:uV},Ah=function(t){return t.x===+t.x&&t.y===+t.y},rm=function(t){return t.x},am=function(t){return t.y},Qoe=function(t,a){if(at(t))return t;var n="curve".concat(iv(t));return(n==="curveMonotone"||n==="curveBump")&&a?$C["".concat(n).concat(a==="vertical"?"Y":"X")]:$C[n]||lv},Joe=function(t){var a=t.type,n=a===void 0?"linear":a,s=t.points,i=s===void 0?[]:s,o=t.baseLine,l=t.layout,c=t.connectNulls,d=c===void 0?!1:c,u=Qoe(n,l),m=d?i.filter(function(h){return Ah(h)}):i,p;if(Array.isArray(o)){var g=d?o.filter(function(h){return Ah(h)}):o,x=m.map(function(h,v){return LC(LC({},h),{},{base:g[v]})});return l==="vertical"?p=xh().y(am).x1(rm).x0(function(h){return h.base.x}):p=xh().x(rm).y1(am).y0(function(h){return h.base.y}),p.defined(Ah).curve(u),p(x)}return l==="vertical"&&He(o)?p=xh().y(am).x1(rm).x0(o):He(o)?p=xh().x(rm).y1(am).y0(o):p=uM().x(rm).y(am),p.defined(Ah).curve(u),p(m)},_o=function(t){var a=t.className,n=t.points,s=t.path,i=t.pathRef;if((!n||!n.length)&&!s)return null;var o=n&&n.length?Joe(t):s;return f.createElement("path",d_({},Qe(t,!1),Zg(t),{className:wt("recharts-curve",a),d:o,ref:i}))},jI={exports:{}},ele="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",tle=ele,rle=tle;function wI(){}function _I(){}_I.resetWarningCache=wI;var ale=function(){function e(n,s,i,o,l,c){if(c!==rle){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:_I,resetWarningCache:wI};return a.PropTypes=a,a};jI.exports=ale();var nle=jI.exports;const Bt=Dt(nle);var sle=Object.getOwnPropertyNames,ile=Object.getOwnPropertySymbols,ole=Object.prototype.hasOwnProperty;function RC(e,t){return function(n,s,i){return e(n,s,i)&&t(n,s,i)}}function Ph(e){return function(a,n,s){if(!a||!n||typeof a!="object"||typeof n!="object")return e(a,n,s);var i=s.cache,o=i.get(a),l=i.get(n);if(o&&l)return o===n&&l===a;i.set(a,n),i.set(n,a);var c=e(a,n,s);return i.delete(a),i.delete(n),c}}function lle(e){return e?.[Symbol.toStringTag]}function qC(e){return sle(e).concat(ile(e))}var cle=Object.hasOwn||function(e,t){return ole.call(e,t)};function Vl(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var dle="__v",ule="__o",mle="_owner",FC=Object.getOwnPropertyDescriptor,zC=Object.keys;function ple(e,t,a){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!a.equals(e[n],t[n],n,n,e,t,a))return!1;return!0}function fle(e,t){return Vl(e.getTime(),t.getTime())}function hle(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function gle(e,t){return e===t}function BC(e,t,a){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var s=new Array(n),i=e.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var d=t.entries(),u=!1,m=0;(l=d.next())&&!l.done;){if(s[m]){m++;continue}var p=o.value,g=l.value;if(a.equals(p[0],g[0],c,m,e,t,a)&&a.equals(p[1],g[1],p[0],g[0],e,t,a)){u=s[m]=!0;break}m++}if(!u)return!1;c++}return!0}var xle=Vl;function yle(e,t,a){var n=zC(e),s=n.length;if(zC(t).length!==s)return!1;for(;s-- >0;)if(!kI(e,t,a,n[s]))return!1;return!0}function nm(e,t,a){var n=qC(e),s=n.length;if(qC(t).length!==s)return!1;for(var i,o,l;s-- >0;)if(i=n[s],!kI(e,t,a,i)||(o=FC(e,i),l=FC(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function vle(e,t){return Vl(e.valueOf(),t.valueOf())}function ble(e,t){return e.source===t.source&&e.flags===t.flags}function WC(e,t,a){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var s=new Array(n),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var c=t.values(),d=!1,u=0;(l=c.next())&&!l.done;){if(!s[u]&&a.equals(o.value,l.value,o.value,l.value,e,t,a)){d=s[u]=!0;break}u++}if(!d)return!1}return!0}function jle(e,t){var a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(e[a]!==t[a])return!1;return!0}function wle(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function kI(e,t,a,n){return(n===mle||n===ule||n===dle)&&(e.$$typeof||t.$$typeof)?!0:cle(t,n)&&a.equals(e[n],t[n],n,n,e,t,a)}var _le="[object Arguments]",kle="[object Boolean]",Nle="[object Date]",Sle="[object Error]",Ale="[object Map]",Ple="[object Number]",Cle="[object Object]",Ele="[object RegExp]",Tle="[object Set]",Ole="[object String]",Mle="[object URL]",Dle=Array.isArray,UC=typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView:null,HC=Object.assign,Ile=Object.prototype.toString.call.bind(Object.prototype.toString);function Lle(e){var t=e.areArraysEqual,a=e.areDatesEqual,n=e.areErrorsEqual,s=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,d=e.areRegExpsEqual,u=e.areSetsEqual,m=e.areTypedArraysEqual,p=e.areUrlsEqual,g=e.unknownTagComparators;return function(h,v,b){if(h===v)return!0;if(h==null||v==null)return!1;var y=typeof h;if(y!==typeof v)return!1;if(y!=="object")return y==="number"?o(h,v,b):y==="function"?s(h,v,b):!1;var j=h.constructor;if(j!==v.constructor)return!1;if(j===Object)return l(h,v,b);if(Dle(h))return t(h,v,b);if(UC!=null&&UC(h))return m(h,v,b);if(j===Date)return a(h,v,b);if(j===RegExp)return d(h,v,b);if(j===Map)return i(h,v,b);if(j===Set)return u(h,v,b);var _=Ile(h);if(_===Nle)return a(h,v,b);if(_===Ele)return d(h,v,b);if(_===Ale)return i(h,v,b);if(_===Tle)return u(h,v,b);if(_===Cle)return typeof h.then!="function"&&typeof v.then!="function"&&l(h,v,b);if(_===Mle)return p(h,v,b);if(_===Sle)return n(h,v,b);if(_===_le)return l(h,v,b);if(_===kle||_===Ple||_===Ole)return c(h,v,b);if(g){var w=g[_];if(!w){var k=lle(h);k&&(w=g[k])}if(w)return w(h,v,b)}return!1}}function $le(e){var t=e.circular,a=e.createCustomConfig,n=e.strict,s={areArraysEqual:n?nm:ple,areDatesEqual:fle,areErrorsEqual:hle,areFunctionsEqual:gle,areMapsEqual:n?RC(BC,nm):BC,areNumbersEqual:xle,areObjectsEqual:n?nm:yle,arePrimitiveWrappersEqual:vle,areRegExpsEqual:ble,areSetsEqual:n?RC(WC,nm):WC,areTypedArraysEqual:n?nm:jle,areUrlsEqual:wle,unknownTagComparators:void 0};if(a&&(s=HC({},s,a(s))),t){var i=Ph(s.areArraysEqual),o=Ph(s.areMapsEqual),l=Ph(s.areObjectsEqual),c=Ph(s.areSetsEqual);s=HC({},s,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return s}function Rle(e){return function(t,a,n,s,i,o,l){return e(t,a,l)}}function qle(e){var t=e.circular,a=e.comparator,n=e.createState,s=e.equals,i=e.strict;if(n)return function(c,d){var u=n(),m=u.cache,p=m===void 0?t?new WeakMap:void 0:m,g=u.meta;return a(c,d,{cache:p,equals:s,meta:g,strict:i})};if(t)return function(c,d){return a(c,d,{cache:new WeakMap,equals:s,meta:void 0,strict:i})};var o={cache:void 0,equals:s,meta:void 0,strict:i};return function(c,d){return a(c,d,o)}}var Fle=Fo();Fo({strict:!0});Fo({circular:!0});Fo({circular:!0,strict:!0});Fo({createInternalComparator:function(){return Vl}});Fo({strict:!0,createInternalComparator:function(){return Vl}});Fo({circular:!0,createInternalComparator:function(){return Vl}});Fo({circular:!0,createInternalComparator:function(){return Vl},strict:!0});function Fo(e){e===void 0&&(e={});var t=e.circular,a=t===void 0?!1:t,n=e.createInternalComparator,s=e.createState,i=e.strict,o=i===void 0?!1:i,l=$le(e),c=Lle(l),d=n?n(c):Rle(c);return qle({circular:a,comparator:c,createState:s,equals:d,strict:o})}function zle(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function KC(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=-1,n=function s(i){a<0&&(a=i),i-a>t?(e(i),a=-1):zle(s)};requestAnimationFrame(n)}function u_(e){"@babel/helpers - typeof";return u_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u_(e)}function Ble(e){return Kle(e)||Hle(e)||Ule(e)||Wle()}function Wle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ule(e,t){if(e){if(typeof e=="string")return VC(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return VC(e,t)}}function VC(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Hle(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Kle(e){if(Array.isArray(e))return e}function Vle(){var e={},t=function(){return null},a=!1,n=function s(i){if(!a){if(Array.isArray(i)){if(!i.length)return;var o=i,l=Ble(o),c=l[0],d=l.slice(1);if(typeof c=="number"){KC(s.bind(null,d),c);return}s(c),KC(s.bind(null,d));return}u_(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){a=!0},start:function(i){a=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Dp(e){"@babel/helpers - typeof";return Dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dp(e)}function GC(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function YC(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?GC(Object(a),!0).forEach(function(n){NI(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):GC(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function NI(e,t,a){return t=Gle(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Gle(e){var t=Yle(e,"string");return Dp(t)==="symbol"?t:String(t)}function Yle(e,t){if(Dp(e)!=="object"||e===null)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Dp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zle=function(t,a){return[Object.keys(t),Object.keys(a)].reduce(function(n,s){return n.filter(function(i){return s.includes(i)})})},Xle=function(t){return t},Qle=function(t){return t.replace(/([A-Z])/g,function(a){return"-".concat(a.toLowerCase())})},Rm=function(t,a){return Object.keys(a).reduce(function(n,s){return YC(YC({},n),{},NI({},s,t(s,a[s])))},{})},ZC=function(t,a,n){return t.map(function(s){return"".concat(Qle(s)," ").concat(a,"ms ").concat(n)}).join(",")};function Jle(e,t){return rce(e)||tce(e,t)||SI(e,t)||ece()}function ece(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tce(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(a=a.call(e)).next,t!==0)for(;!(c=(n=i.call(a)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&a.return!=null&&(o=a.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function rce(e){if(Array.isArray(e))return e}function ace(e){return ice(e)||sce(e)||SI(e)||nce()}function nce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SI(e,t){if(e){if(typeof e=="string")return m_(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return m_(e,t)}}function sce(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ice(e){if(Array.isArray(e))return m_(e)}function m_(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Ax=1e-4,AI=function(t,a){return[0,3*t,3*a-6*t,3*t-3*a+1]},PI=function(t,a){return t.map(function(n,s){return n*Math.pow(a,s)}).reduce(function(n,s){return n+s})},XC=function(t,a){return function(n){var s=AI(t,a);return PI(s,n)}},oce=function(t,a){return function(n){var s=AI(t,a),i=[].concat(ace(s.map(function(o,l){return o*l}).slice(1)),[0]);return PI(i,n)}},QC=function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];var s=a[0],i=a[1],o=a[2],l=a[3];if(a.length===1)switch(a[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var c=a[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),u=Jle(d,4);s=u[0],i=u[1],o=u[2],l=u[3]}}}var m=XC(s,o),p=XC(i,l),g=oce(s,o),x=function(b){return b>1?1:b<0?0:b},h=function(b){for(var y=b>1?1:b,j=y,_=0;_<8;++_){var w=m(j)-y,k=g(j);if(Math.abs(w-y)<Ax||k<Ax)return p(j);j=x(j-w/k)}return p(j)};return h.isStepper=!1,h},lce=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=t.stiff,n=a===void 0?100:a,s=t.damping,i=s===void 0?8:s,o=t.dt,l=o===void 0?17:o,c=function(u,m,p){var g=-(u-m)*n,x=p*i,h=p+(g-x)*l/1e3,v=p*l/1e3+u;return Math.abs(v-m)<Ax&&Math.abs(h)<Ax?[m,0]:[v,h]};return c.isStepper=!0,c.dt=l,c},cce=function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];var s=a[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return QC(s);case"spring":return lce();default:if(s.split("(")[0]==="cubic-bezier")return QC(s)}return typeof s=="function"?s:null};function Ip(e){"@babel/helpers - typeof";return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ip(e)}function JC(e){return mce(e)||uce(e)||CI(e)||dce()}function dce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uce(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mce(e){if(Array.isArray(e))return f_(e)}function e4(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function ja(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?e4(Object(a),!0).forEach(function(n){p_(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):e4(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function p_(e,t,a){return t=pce(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function pce(e){var t=fce(e,"string");return Ip(t)==="symbol"?t:String(t)}function fce(e,t){if(Ip(e)!=="object"||e===null)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Ip(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hce(e,t){return yce(e)||xce(e,t)||CI(e,t)||gce()}function gce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CI(e,t){if(e){if(typeof e=="string")return f_(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return f_(e,t)}}function f_(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function xce(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(a=a.call(e)).next,t!==0)for(;!(c=(n=i.call(a)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&a.return!=null&&(o=a.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function yce(e){if(Array.isArray(e))return e}var Px=function(t,a,n){return t+(a-t)*n},h_=function(t){var a=t.from,n=t.to;return a!==n},vce=function e(t,a,n){var s=Rm(function(i,o){if(h_(o)){var l=t(o.from,o.to,o.velocity),c=hce(l,2),d=c[0],u=c[1];return ja(ja({},o),{},{from:d,velocity:u})}return o},a);return n<1?Rm(function(i,o){return h_(o)?ja(ja({},o),{},{velocity:Px(o.velocity,s[i].velocity,n),from:Px(o.from,s[i].from,n)}):o},a):e(t,s,n-1)};const bce=function(e,t,a,n,s){var i=Zle(e,t),o=i.reduce(function(v,b){return ja(ja({},v),{},p_({},b,[e[b],t[b]]))},{}),l=i.reduce(function(v,b){return ja(ja({},v),{},p_({},b,{from:e[b],velocity:0,to:t[b]}))},{}),c=-1,d,u,m=function(){return null},p=function(){return Rm(function(b,y){return y.from},l)},g=function(){return!Object.values(l).filter(h_).length},x=function(b){d||(d=b);var y=b-d,j=y/a.dt;l=vce(a,l,j),s(ja(ja(ja({},e),t),p())),d=b,g()||(c=requestAnimationFrame(m))},h=function(b){u||(u=b);var y=(b-u)/n,j=Rm(function(w,k){return Px.apply(void 0,JC(k).concat([a(y)]))},o);if(s(ja(ja(ja({},e),t),j)),y<1)c=requestAnimationFrame(m);else{var _=Rm(function(w,k){return Px.apply(void 0,JC(k).concat([a(1)]))},o);s(ja(ja(ja({},e),t),_))}};return m=a.isStepper?x:h,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(c)}}};function jd(e){"@babel/helpers - typeof";return jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jd(e)}var jce=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function wce(e,t){if(e==null)return{};var a=_ce(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function _ce(e,t){if(e==null)return{};var a={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(a[s]=e[s]);return a}function Lb(e){return Ace(e)||Sce(e)||Nce(e)||kce()}function kce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nce(e,t){if(e){if(typeof e=="string")return g_(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return g_(e,t)}}function Sce(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ace(e){if(Array.isArray(e))return g_(e)}function g_(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function t4(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function ms(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?t4(Object(a),!0).forEach(function(n){_m(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t4(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function _m(e,t,a){return t=EI(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Pce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cce(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,EI(n.key),n)}}function Ece(e,t,a){return t&&Cce(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function EI(e){var t=Tce(e,"string");return jd(t)==="symbol"?t:String(t)}function Tce(e,t){if(jd(e)!=="object"||e===null)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(jd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Oce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x_(e,t)}function x_(e,t){return x_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},x_(e,t)}function Mce(e){var t=Dce();return function(){var n=Cx(e),s;if(t){var i=Cx(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return y_(this,s)}}function y_(e,t){if(t&&(jd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v_(e)}function v_(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dce(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Cx(e){return Cx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Cx(e)}var gn=function(e){Oce(a,e);var t=Mce(a);function a(n,s){var i;Pce(this,a),i=t.call(this,n,s);var o=i.props,l=o.isActive,c=o.attributeName,d=o.from,u=o.to,m=o.steps,p=o.children,g=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(v_(i)),i.changeStyle=i.changeStyle.bind(v_(i)),!l||g<=0)return i.state={style:{}},typeof p=="function"&&(i.state={style:u}),y_(i);if(m&&m.length)i.state={style:m[0].style};else if(d){if(typeof p=="function")return i.state={style:d},y_(i);i.state={style:c?_m({},c,d):d}}else i.state={style:{}};return i}return Ece(a,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,u=i.to,m=i.from,p=this.state.style;if(l){if(!o){var g={style:c?_m({},c,u):u};this.state&&p&&(c&&p[c]!==u||!c&&p!==u)&&this.setState(g);return}if(!(Fle(s.to,u)&&s.canBegin&&s.isActive)){var x=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var h=x||d?m:s.to;if(this.state&&p){var v={style:c?_m({},c,h):h};(c&&p[c]!==h||!c&&p!==h)&&this.setState(v)}this.runAnimation(ms(ms({},this.props),{},{from:h,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,c=s.duration,d=s.easing,u=s.begin,m=s.onAnimationEnd,p=s.onAnimationStart,g=bce(o,l,cce(d),c,this.changeStyle),x=function(){i.stopJSAnimation=g()};this.manager.start([p,u,x,c,m])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,c=s.onAnimationStart,d=o[0],u=d.style,m=d.duration,p=m===void 0?0:m,g=function(h,v,b){if(b===0)return h;var y=v.duration,j=v.easing,_=j===void 0?"ease":j,w=v.style,k=v.properties,N=v.onAnimationEnd,P=b>0?o[b-1]:v,A=k||Object.keys(w);if(typeof _=="function"||_==="spring")return[].concat(Lb(h),[i.runJSAnimation.bind(i,{from:P.style,to:w,duration:y,easing:_}),y]);var M=ZC(A,y,_),R=ms(ms(ms({},P.style),w),{},{transition:M});return[].concat(Lb(h),[R,y,N]).filter(Xle)};return this.manager.start([c].concat(Lb(o.reduce(g,[u,Math.max(p,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=Vle());var i=s.begin,o=s.duration,l=s.attributeName,c=s.to,d=s.easing,u=s.onAnimationStart,m=s.onAnimationEnd,p=s.steps,g=s.children,x=this.manager;if(this.unSubscribe=x.subscribe(this.handleStyleChange),typeof d=="function"||typeof g=="function"||d==="spring"){this.runJSAnimation(s);return}if(p.length>1){this.runStepAnimation(s);return}var h=l?_m({},l,c):c,v=ZC(Object.keys(h),o,d);x.start([u,i,ms(ms({},h),{},{transition:v}),o,m])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=wce(s,jce),d=f.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!l||d===0||o<=0)return i;var m=function(g){var x=g.props,h=x.style,v=h===void 0?{}:h,b=x.className,y=f.cloneElement(g,ms(ms({},c),{},{style:ms(ms({},v),u),className:b}));return y};return d===1?m(f.Children.only(i)):le.createElement("div",null,f.Children.map(i,function(p){return m(p)}))}}]),a}(f.PureComponent);gn.displayName="Animate";gn.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};gn.propTypes={from:Bt.oneOfType([Bt.object,Bt.string]),to:Bt.oneOfType([Bt.object,Bt.string]),attributeName:Bt.string,duration:Bt.number,begin:Bt.number,easing:Bt.oneOfType([Bt.string,Bt.func]),steps:Bt.arrayOf(Bt.shape({duration:Bt.number.isRequired,style:Bt.object.isRequired,easing:Bt.oneOfType([Bt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Bt.func]),properties:Bt.arrayOf("string"),onAnimationEnd:Bt.func})),children:Bt.oneOfType([Bt.node,Bt.func]),isActive:Bt.bool,canBegin:Bt.bool,onAnimationEnd:Bt.func,shouldReAnimate:Bt.bool,onAnimationStart:Bt.func,onAnimationReStart:Bt.func};function Lp(e){"@babel/helpers - typeof";return Lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lp(e)}function Ex(){return Ex=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ex.apply(this,arguments)}function Ice(e,t){return qce(e)||Rce(e,t)||$ce(e,t)||Lce()}function Lce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $ce(e,t){if(e){if(typeof e=="string")return r4(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return r4(e,t)}}function r4(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Rce(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(a=a.call(e)).next,t!==0)for(;!(c=(n=i.call(a)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&a.return!=null&&(o=a.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function qce(e){if(Array.isArray(e))return e}function a4(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function n4(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?a4(Object(a),!0).forEach(function(n){Fce(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):a4(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Fce(e,t,a){return t=zce(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function zce(e){var t=Bce(e,"string");return Lp(t)=="symbol"?t:t+""}function Bce(e,t){if(Lp(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Lp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var s4=function(t,a,n,s,i){var o=Math.min(Math.abs(n)/2,Math.abs(s)/2),l=s>=0?1:-1,c=n>=0?1:-1,d=s>=0&&n>=0||s<0&&n<0?1:0,u;if(o>0&&i instanceof Array){for(var m=[0,0,0,0],p=0,g=4;p<g;p++)m[p]=i[p]>o?o:i[p];u="M".concat(t,",").concat(a+l*m[0]),m[0]>0&&(u+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(d,",").concat(t+c*m[0],",").concat(a)),u+="L ".concat(t+n-c*m[1],",").concat(a),m[1]>0&&(u+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(d,`,
        `).concat(t+n,",").concat(a+l*m[1])),u+="L ".concat(t+n,",").concat(a+s-l*m[2]),m[2]>0&&(u+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(d,`,
        `).concat(t+n-c*m[2],",").concat(a+s)),u+="L ".concat(t+c*m[3],",").concat(a+s),m[3]>0&&(u+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(a+s-l*m[3])),u+="Z"}else if(o>0&&i===+i&&i>0){var x=Math.min(o,i);u="M ".concat(t,",").concat(a+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t+c*x,",").concat(a,`
            L `).concat(t+n-c*x,",").concat(a,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t+n,",").concat(a+l*x,`
            L `).concat(t+n,",").concat(a+s-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t+n-c*x,",").concat(a+s,`
            L `).concat(t+c*x,",").concat(a+s,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(t,",").concat(a+s-l*x," Z")}else u="M ".concat(t,",").concat(a," h ").concat(n," v ").concat(s," h ").concat(-n," Z");return u},Wce=function(t,a){if(!t||!a)return!1;var n=t.x,s=t.y,i=a.x,o=a.y,l=a.width,c=a.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(i,i+l),u=Math.max(i,i+l),m=Math.min(o,o+c),p=Math.max(o,o+c);return n>=d&&n<=u&&s>=m&&s<=p}return!1},Uce={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},gf=function(t){var a=n4(n4({},Uce),t),n=f.useRef(),s=f.useState(-1),i=Ice(s,2),o=i[0],l=i[1];f.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var _=n.current.getTotalLength();_&&l(_)}catch{}},[]);var c=a.x,d=a.y,u=a.width,m=a.height,p=a.radius,g=a.className,x=a.animationEasing,h=a.animationDuration,v=a.animationBegin,b=a.isAnimationActive,y=a.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||m!==+m||u===0||m===0)return null;var j=wt("recharts-rectangle",g);return y?le.createElement(gn,{canBegin:o>0,from:{width:u,height:m,x:c,y:d},to:{width:u,height:m,x:c,y:d},duration:h,animationEasing:x,isActive:y},function(_){var w=_.width,k=_.height,N=_.x,P=_.y;return le.createElement(gn,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:h,isActive:b,easing:x},le.createElement("path",Ex({},Qe(a,!0),{className:j,d:s4(N,P,w,k,p),ref:n})))}):le.createElement("path",Ex({},Qe(a,!0),{className:j,d:s4(c,d,u,m,p)}))},Hce=["points","className","baseLinePoints","connectNulls"];function Dc(){return Dc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Dc.apply(this,arguments)}function Kce(e,t){if(e==null)return{};var a=Vce(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Vce(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function i4(e){return Xce(e)||Zce(e)||Yce(e)||Gce()}function Gce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yce(e,t){if(e){if(typeof e=="string")return b_(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return b_(e,t)}}function Zce(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Xce(e){if(Array.isArray(e))return b_(e)}function b_(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var o4=function(t){return t&&t.x===+t.x&&t.y===+t.y},Qce=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=[[]];return t.forEach(function(n){o4(n)?a[a.length-1].push(n):a[a.length-1].length>0&&a.push([])}),o4(t[0])&&a[a.length-1].push(t[0]),a[a.length-1].length<=0&&(a=a.slice(0,-1)),a},qm=function(t,a){var n=Qce(t);a&&(n=[n.reduce(function(i,o){return[].concat(i4(i),i4(o))},[])]);var s=n.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(s,"Z"):s},Jce=function(t,a,n){var s=qm(t,n);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(qm(a.reverse(),n).slice(1))},TI=function(t){var a=t.points,n=t.className,s=t.baseLinePoints,i=t.connectNulls,o=Kce(t,Hce);if(!a||!a.length)return null;var l=wt("recharts-polygon",n);if(s&&s.length){var c=o.stroke&&o.stroke!=="none",d=Jce(a,s,i);return le.createElement("g",{className:l},le.createElement("path",Dc({},Qe(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",stroke:"none",d})),c?le.createElement("path",Dc({},Qe(o,!0),{fill:"none",d:qm(a,i)})):null,c?le.createElement("path",Dc({},Qe(o,!0),{fill:"none",d:qm(s,i)})):null)}var u=qm(a,i);return le.createElement("path",Dc({},Qe(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",className:l,d:u}))};function j_(){return j_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},j_.apply(this,arguments)}var xf=function(t){var a=t.cx,n=t.cy,s=t.r,i=t.className,o=wt("recharts-dot",i);return a===+a&&n===+n&&s===+s?f.createElement("circle",j_({},Qe(t,!1),Zg(t),{className:o,cx:a,cy:n,r:s})):null};function $p(e){"@babel/helpers - typeof";return $p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$p(e)}var ede=["x","y","top","left","width","height","className"];function w_(){return w_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},w_.apply(this,arguments)}function l4(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function tde(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?l4(Object(a),!0).forEach(function(n){rde(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l4(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function rde(e,t,a){return t=ade(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ade(e){var t=nde(e,"string");return $p(t)=="symbol"?t:t+""}function nde(e,t){if($p(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if($p(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sde(e,t){if(e==null)return{};var a=ide(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ide(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}var ode=function(t,a,n,s,i,o){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(o,",").concat(a,"h").concat(n)},lde=function(t){var a=t.x,n=a===void 0?0:a,s=t.y,i=s===void 0?0:s,o=t.top,l=o===void 0?0:o,c=t.left,d=c===void 0?0:c,u=t.width,m=u===void 0?0:u,p=t.height,g=p===void 0?0:p,x=t.className,h=sde(t,ede),v=tde({x:n,y:i,top:l,left:d,width:m,height:g},h);return!He(n)||!He(i)||!He(m)||!He(g)||!He(l)||!He(d)?null:le.createElement("path",w_({},Qe(v,!0),{className:wt("recharts-cross",x),d:ode(n,i,m,g,l,d)}))},cde=jv,dde=zD,ude=Ms;function mde(e,t){return e&&e.length?cde(e,ude(t),dde):void 0}var pde=mde;const OI=Dt(pde);var fde=jv,hde=Ms,gde=BD;function xde(e,t){return e&&e.length?fde(e,hde(t),gde):void 0}var yde=xde;const vde=Dt(yde);var bde=["cx","cy","angle","ticks","axisLine"],jde=["ticks","tick","angle","tickFormatter","stroke"];function wd(e){"@babel/helpers - typeof";return wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wd(e)}function Fm(){return Fm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Fm.apply(this,arguments)}function c4(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Vo(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?c4(Object(a),!0).forEach(function(n){kv(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c4(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function d4(e,t){if(e==null)return{};var a=wde(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function wde(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function _de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u4(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,DI(n.key),n)}}function kde(e,t,a){return t&&u4(e.prototype,t),a&&u4(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nde(e,t,a){return t=Tx(t),Sde(e,MI()?Reflect.construct(t,a||[],Tx(e).constructor):t.apply(e,a))}function Sde(e,t){if(t&&(wd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ade(e)}function Ade(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MI=function(){return!!e})()}function Tx(e){return Tx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Tx(e)}function Pde(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&__(e,t)}function __(e,t){return __=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},__(e,t)}function kv(e,t,a){return t=DI(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function DI(e){var t=Cde(e,"string");return wd(t)=="symbol"?t:t+""}function Cde(e,t){if(wd(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(wd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Nv=function(e){function t(){return _de(this,t),Nde(this,t,arguments)}return Pde(t,e),kde(t,[{key:"getTickValueCoord",value:function(n){var s=n.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return lr(l,c,s,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,s;switch(n){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=OI(l,function(u){return u.coordinate||0}),d=vde(l,function(u){return u.coordinate||0});return{cx:s,cy:i,startAngle:o,endAngle:o,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,d=d4(n,bde),u=l.reduce(function(x,h){return[Math.min(x[0],h.coordinate),Math.max(x[1],h.coordinate)]},[1/0,-1/0]),m=lr(s,i,u[0],o),p=lr(s,i,u[1],o),g=Vo(Vo(Vo({},Qe(d,!1)),{},{fill:"none"},Qe(c,!1)),{},{x1:m.x,y1:m.y,x2:p.x,y2:p.y});return le.createElement("line",Fm({className:"recharts-polar-radius-axis-line"},g))}},{key:"renderTicks",value:function(){var n=this,s=this.props,i=s.ticks,o=s.tick,l=s.angle,c=s.tickFormatter,d=s.stroke,u=d4(s,jde),m=this.getTickTextAnchor(),p=Qe(u,!1),g=Qe(o,!1),x=i.map(function(h,v){var b=n.getTickValueCoord(h),y=Vo(Vo(Vo(Vo({textAnchor:m,transform:"rotate(".concat(90-l,", ").concat(b.x,", ").concat(b.y,")")},p),{},{stroke:"none",fill:d},g),{},{index:v},b),{},{payload:h});return le.createElement(ft,Fm({className:wt("recharts-polar-radius-axis-tick",gI(o)),key:"tick-".concat(h.coordinate)},Ao(n.props,h,v)),t.renderTickItem(o,y,c?c(h.value,v):h.value))});return le.createElement(ft,{className:"recharts-polar-radius-axis-ticks"},x)}},{key:"render",value:function(){var n=this.props,s=n.ticks,i=n.axisLine,o=n.tick;return!s||!s.length?null:le.createElement(ft,{className:wt("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),ga.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,s,i){var o;return le.isValidElement(n)?o=le.cloneElement(n,s):at(n)?o=n(s):o=le.createElement(Il,Fm({},s,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(f.PureComponent);kv(Nv,"displayName","PolarRadiusAxis");kv(Nv,"axisType","radiusAxis");kv(Nv,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function _d(e){"@babel/helpers - typeof";return _d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_d(e)}function rl(){return rl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},rl.apply(this,arguments)}function m4(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Go(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?m4(Object(a),!0).forEach(function(n){Sv(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m4(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Ede(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p4(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,LI(n.key),n)}}function Tde(e,t,a){return t&&p4(e.prototype,t),a&&p4(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ode(e,t,a){return t=Ox(t),Mde(e,II()?Reflect.construct(t,a||[],Ox(e).constructor):t.apply(e,a))}function Mde(e,t){if(t&&(_d(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dde(e)}function Dde(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function II(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(II=function(){return!!e})()}function Ox(e){return Ox=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Ox(e)}function Ide(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k_(e,t)}function k_(e,t){return k_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},k_(e,t)}function Sv(e,t,a){return t=LI(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function LI(e){var t=Lde(e,"string");return _d(t)=="symbol"?t:t+""}function Lde(e,t){if(_d(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(_d(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $de=Math.PI/180,f4=1e-5,Av=function(e){function t(){return Ede(this,t),Ode(this,t,arguments)}return Ide(t,e),Tde(t,[{key:"getTickLineCoord",value:function(n){var s=this.props,i=s.cx,o=s.cy,l=s.radius,c=s.orientation,d=s.tickSize,u=d||8,m=lr(i,o,l,n.coordinate),p=lr(i,o,l+(c==="inner"?-1:1)*u,n.coordinate);return{x1:m.x,y1:m.y,x2:p.x,y2:p.y}}},{key:"getTickTextAnchor",value:function(n){var s=this.props.orientation,i=Math.cos(-n.coordinate*$de),o;return i>f4?o=s==="outer"?"start":"end":i<-f4?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,d=Go(Go({},Qe(this.props,!1)),{},{fill:"none"},Qe(l,!1));if(c==="circle")return le.createElement(xf,rl({className:"recharts-polar-angle-axis-line"},d,{cx:s,cy:i,r:o}));var u=this.props.ticks,m=u.map(function(p){return lr(s,i,o,p.coordinate)});return le.createElement(TI,rl({className:"recharts-polar-angle-axis-line"},d,{points:m}))}},{key:"renderTicks",value:function(){var n=this,s=this.props,i=s.ticks,o=s.tick,l=s.tickLine,c=s.tickFormatter,d=s.stroke,u=Qe(this.props,!1),m=Qe(o,!1),p=Go(Go({},u),{},{fill:"none"},Qe(l,!1)),g=i.map(function(x,h){var v=n.getTickLineCoord(x),b=n.getTickTextAnchor(x),y=Go(Go(Go({textAnchor:b},u),{},{stroke:"none",fill:d},m),{},{index:h,payload:x,x:v.x2,y:v.y2});return le.createElement(ft,rl({className:wt("recharts-polar-angle-axis-tick",gI(o)),key:"tick-".concat(x.coordinate)},Ao(n.props,x,h)),l&&le.createElement("line",rl({className:"recharts-polar-angle-axis-tick-line"},p,v)),o&&t.renderTickItem(o,y,c?c(x.value,h):x.value))});return le.createElement(ft,{className:"recharts-polar-angle-axis-ticks"},g)}},{key:"render",value:function(){var n=this.props,s=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!s||!s.length?null:le.createElement(ft,{className:wt("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,s,i){var o;return le.isValidElement(n)?o=le.cloneElement(n,s):at(n)?o=n(s):o=le.createElement(Il,rl({},s,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(f.PureComponent);Sv(Av,"displayName","PolarAngleAxis");Sv(Av,"axisType","angleAxis");Sv(Av,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Rde=IM,qde=Rde(Object.getPrototypeOf,Object),oN=qde,Fde=Mi,zde=oN,Bde=Es,Wde="[object Object]",Ude=Function.prototype,Hde=Object.prototype,$I=Ude.toString,Kde=Hde.hasOwnProperty,Vde=$I.call(Object);function Gde(e){if(!Bde(e)||Fde(e)!=Wde)return!1;var t=zde(e);if(t===null)return!0;var a=Kde.call(t,"constructor")&&t.constructor;return typeof a=="function"&&a instanceof a&&$I.call(a)==Vde}var RI=Gde;const Yde=Dt(RI);var Zde=Mi,Xde=Es,Qde="[object Boolean]";function Jde(e){return e===!0||e===!1||Xde(e)&&Zde(e)==Qde}var eue=Jde;const tue=Dt(eue);function Rp(e){"@babel/helpers - typeof";return Rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rp(e)}function Mx(){return Mx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Mx.apply(this,arguments)}function rue(e,t){return iue(e)||sue(e,t)||nue(e,t)||aue()}function aue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nue(e,t){if(e){if(typeof e=="string")return h4(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return h4(e,t)}}function h4(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function sue(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(a=a.call(e)).next,t!==0)for(;!(c=(n=i.call(a)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&a.return!=null&&(o=a.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function iue(e){if(Array.isArray(e))return e}function g4(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function x4(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?g4(Object(a),!0).forEach(function(n){oue(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g4(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function oue(e,t,a){return t=lue(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function lue(e){var t=cue(e,"string");return Rp(t)=="symbol"?t:t+""}function cue(e,t){if(Rp(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Rp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var y4=function(t,a,n,s,i){var o=n-s,l;return l="M ".concat(t,",").concat(a),l+="L ".concat(t+n,",").concat(a),l+="L ".concat(t+n-o/2,",").concat(a+i),l+="L ".concat(t+n-o/2-s,",").concat(a+i),l+="L ".concat(t,",").concat(a," Z"),l},due={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},uue=function(t){var a=x4(x4({},due),t),n=f.useRef(),s=f.useState(-1),i=rue(s,2),o=i[0],l=i[1];f.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var j=n.current.getTotalLength();j&&l(j)}catch{}},[]);var c=a.x,d=a.y,u=a.upperWidth,m=a.lowerWidth,p=a.height,g=a.className,x=a.animationEasing,h=a.animationDuration,v=a.animationBegin,b=a.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||m!==+m||p!==+p||u===0&&m===0||p===0)return null;var y=wt("recharts-trapezoid",g);return b?le.createElement(gn,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:p,x:c,y:d},to:{upperWidth:u,lowerWidth:m,height:p,x:c,y:d},duration:h,animationEasing:x,isActive:b},function(j){var _=j.upperWidth,w=j.lowerWidth,k=j.height,N=j.x,P=j.y;return le.createElement(gn,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:h,easing:x},le.createElement("path",Mx({},Qe(a,!0),{className:y,d:y4(N,P,_,w,k),ref:n})))}):le.createElement("g",null,le.createElement("path",Mx({},Qe(a,!0),{className:y,d:y4(c,d,u,m,p)})))},mue=["option","shapeType","propTransformer","activeClassName","isActive"];function qp(e){"@babel/helpers - typeof";return qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qp(e)}function pue(e,t){if(e==null)return{};var a=fue(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function fue(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function v4(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Dx(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?v4(Object(a),!0).forEach(function(n){hue(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v4(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function hue(e,t,a){return t=gue(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function gue(e){var t=xue(e,"string");return qp(t)=="symbol"?t:t+""}function xue(e,t){if(qp(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(qp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yue(e,t){return Dx(Dx({},t),e)}function vue(e,t){return e==="symbols"}function b4(e){var t=e.shapeType,a=e.elementProps;switch(t){case"rectangle":return le.createElement(gf,a);case"trapezoid":return le.createElement(uue,a);case"sector":return le.createElement(bI,a);case"symbols":if(vue(t))return le.createElement(dv,a);break;default:return null}}function bue(e){return f.isValidElement(e)?e.props:e}function Ix(e){var t=e.option,a=e.shapeType,n=e.propTransformer,s=n===void 0?yue:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=pue(e,mue),d;if(f.isValidElement(t))d=f.cloneElement(t,Dx(Dx({},c),bue(t)));else if(at(t))d=t(c);else if(Yde(t)&&!tue(t)){var u=s(t,c);d=le.createElement(b4,{shapeType:a,elementProps:u})}else{var m=c;d=le.createElement(b4,{shapeType:a,elementProps:m})}return l?le.createElement(ft,{className:o},d):d}function Pv(e,t){return t!=null&&"trapezoids"in e.props}function Cv(e,t){return t!=null&&"sectors"in e.props}function Fp(e,t){return t!=null&&"points"in e.props}function jue(e,t){var a,n,s=e.x===(t==null||(a=t.labelViewBox)===null||a===void 0?void 0:a.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return s&&i}function wue(e,t){var a=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return a&&n}function _ue(e,t){var a=e.x===t.x,n=e.y===t.y,s=e.z===t.z;return a&&n&&s}function kue(e,t){var a;return Pv(e,t)?a=jue:Cv(e,t)?a=wue:Fp(e,t)&&(a=_ue),a}function Nue(e,t){var a;return Pv(e,t)?a="trapezoids":Cv(e,t)?a="sectors":Fp(e,t)&&(a="points"),a}function Sue(e,t){if(Pv(e,t)){var a;return(a=t.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}if(Cv(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Fp(e,t)?t.payload:{}}function Aue(e){var t=e.activeTooltipItem,a=e.graphicalItem,n=e.itemData,s=Nue(a,t),i=Sue(a,t),o=n.filter(function(c,d){var u=Po(i,c),m=a.props[s].filter(function(x){var h=kue(a,t);return h(x,t)}),p=a.props[s].indexOf(m[m.length-1]),g=d===p;return u&&g}),l=n.indexOf(o[o.length-1]);return l}var ug;function kd(e){"@babel/helpers - typeof";return kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kd(e)}function Ic(){return Ic=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ic.apply(this,arguments)}function j4(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function sr(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?j4(Object(a),!0).forEach(function(n){Bn(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j4(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Pue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w4(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,FI(n.key),n)}}function Cue(e,t,a){return t&&w4(e.prototype,t),a&&w4(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function Eue(e,t,a){return t=Lx(t),Tue(e,qI()?Reflect.construct(t,a||[],Lx(e).constructor):t.apply(e,a))}function Tue(e,t){if(t&&(kd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Oue(e)}function Oue(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qI=function(){return!!e})()}function Lx(e){return Lx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Lx(e)}function Mue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N_(e,t)}function N_(e,t){return N_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},N_(e,t)}function Bn(e,t,a){return t=FI(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function FI(e){var t=Due(e,"string");return kd(t)=="symbol"?t:t+""}function Due(e,t){if(kd(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(kd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Qs=function(e){function t(a){var n;return Pue(this,t),n=Eue(this,t,[a]),Bn(n,"pieRef",null),Bn(n,"sectorRefs",[]),Bn(n,"id",Di("recharts-pie-")),Bn(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),at(s)&&s()}),Bn(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),at(s)&&s()}),n.state={isAnimationFinished:!a.isAnimationActive,prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,sectorToFocus:0},n}return Mue(t,e),Cue(t,[{key:"isActiveIndex",value:function(n){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(n)!==-1:n===s}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,d=i.valueKey,u=Qe(this.props,!1),m=Qe(o,!1),p=Qe(l,!1),g=o&&o.offsetRadius||20,x=n.map(function(h,v){var b=(h.startAngle+h.endAngle)/2,y=lr(h.cx,h.cy,h.outerRadius+g,b),j=sr(sr(sr(sr({},u),h),{},{stroke:"none"},m),{},{index:v,textAnchor:t.getTextAnchor(y.x,h.cx)},y),_=sr(sr(sr(sr({},u),h),{},{fill:"none",stroke:h.fill},p),{},{index:v,points:[lr(h.cx,h.cy,h.outerRadius,b),y]}),w=c;return dt(c)&&dt(d)?w="value":dt(c)&&(w=d),le.createElement(ft,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(v)},l&&t.renderLabelLineItem(l,_,"line"),t.renderLabelItem(o,j,Lt(h,w)))});return le.createElement(ft,{className:"recharts-pie-labels"},x)}},{key:"renderSectorsStatically",value:function(n){var s=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return n.map(function(d,u){if(d?.startAngle===0&&d?.endAngle===0&&n.length!==1)return null;var m=s.isActiveIndex(u),p=c&&s.hasActiveIndex()?c:null,g=m?o:p,x=sr(sr({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return le.createElement(ft,Ic({ref:function(v){v&&!s.sectorRefs.includes(v)&&s.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},Ao(s.props,d,u),{key:"sector-".concat(d?.startAngle,"-").concat(d?.endAngle,"-").concat(d.midAngle,"-").concat(u)}),le.createElement(Ix,Ic({option:g,isActive:m,shapeType:"sector"},x)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,s=this.props,i=s.sectors,o=s.isAnimationActive,l=s.animationBegin,c=s.animationDuration,d=s.animationEasing,u=s.animationId,m=this.state,p=m.prevSectors,g=m.prevIsAnimationActive;return le.createElement(gn,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(g),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(x){var h=x.t,v=[],b=i&&i[0],y=b.startAngle;return i.forEach(function(j,_){var w=p&&p[_],k=_>0?ya(j,"paddingAngle",0):0;if(w){var N=wr(w.endAngle-w.startAngle,j.endAngle-j.startAngle),P=sr(sr({},j),{},{startAngle:y+k,endAngle:y+N(h)+k});v.push(P),y=P.endAngle}else{var A=j.endAngle,M=j.startAngle,R=wr(0,A-M),O=R(h),q=sr(sr({},j),{},{startAngle:y+k,endAngle:y+O+k});v.push(q),y=q.endAngle}}),le.createElement(ft,null,n.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(n){var s=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[o].focus(),s.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[l].focus(),s.setState({sectorToFocus:l});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,s=n.sectors,i=n.isAnimationActive,o=this.state.prevSectors;return i&&s&&s.length&&(!o||!Po(o,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,s=this.props,i=s.hide,o=s.sectors,l=s.className,c=s.label,d=s.cx,u=s.cy,m=s.innerRadius,p=s.outerRadius,g=s.isAnimationActive,x=this.state.isAnimationFinished;if(i||!o||!o.length||!He(d)||!He(u)||!He(m)||!He(p))return null;var h=wt("recharts-pie",l);return le.createElement(ft,{tabIndex:this.props.rootTabIndex,className:h,ref:function(b){n.pieRef=b}},this.renderSectors(),c&&this.renderLabels(o),ga.renderCallByParent(this.props,null,!1),(!g||x)&&Ht.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return s.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:n.sectors!==s.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,s){return n>s?"start":n<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,s,i){if(le.isValidElement(n))return le.cloneElement(n,s);if(at(n))return n(s);var o=wt("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return le.createElement(_o,Ic({},s,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,s,i){if(le.isValidElement(n))return le.cloneElement(n,s);var o=i;if(at(n)&&(o=n(s),le.isValidElement(o)))return o;var l=wt("recharts-pie-label-text",typeof n!="boolean"&&!at(n)?n.className:"");return le.createElement(Il,Ic({},s,{alignmentBaseline:"middle",className:l}),o)}}])}(f.PureComponent);ug=Qs;Bn(Qs,"displayName","Pie");Bn(Qs,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Ss.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Bn(Qs,"parseDeltaAngle",function(e,t){var a=Ga(t-e),n=Math.min(Math.abs(t-e),360);return a*n});Bn(Qs,"getRealPieData",function(e){var t=e.data,a=e.children,n=Qe(e,!1),s=Ja(a,Vn);return t&&t.length?t.map(function(i,o){return sr(sr(sr({payload:i},n),i),s&&s[o]&&s[o].props)}):s&&s.length?s.map(function(i){return sr(sr({},n),i.props)}):[]});Bn(Qs,"parseCoordinateOfPie",function(e,t){var a=t.top,n=t.left,s=t.width,i=t.height,o=hI(s,i),l=n+Ya(e.cx,s,s/2),c=a+Ya(e.cy,i,i/2),d=Ya(e.innerRadius,o,0),u=Ya(e.outerRadius,o,o*.8),m=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:l,cy:c,innerRadius:d,outerRadius:u,maxRadius:m}});Bn(Qs,"getComposedData",function(e){var t=e.item,a=e.offset,n=t.type.defaultProps!==void 0?sr(sr({},t.type.defaultProps),t.props):t.props,s=ug.getRealPieData(n);if(!s||!s.length)return null;var i=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,d=n.dataKey,u=n.nameKey,m=n.valueKey,p=n.tooltipType,g=Math.abs(n.minAngle),x=ug.parseCoordinateOfPie(n,a),h=ug.parseDeltaAngle(o,l),v=Math.abs(h),b=d;dt(d)&&dt(m)?(Kn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b="value"):dt(d)&&(Kn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b=m);var y=s.filter(function(P){return Lt(P,b,0)!==0}).length,j=(v>=360?y:y-1)*c,_=v-y*g-j,w=s.reduce(function(P,A){var M=Lt(A,b,0);return P+(He(M)?M:0)},0),k;if(w>0){var N;k=s.map(function(P,A){var M=Lt(P,b,0),R=Lt(P,u,A),O=(He(M)?M:0)/w,q;A?q=N.endAngle+Ga(h)*c*(M!==0?1:0):q=o;var S=q+Ga(h)*((M!==0?g:0)+O*_),I=(q+S)/2,E=(x.innerRadius+x.outerRadius)/2,W=[{name:R,value:M,payload:P,dataKey:b,type:p}],B=lr(x.cx,x.cy,E,I);return N=sr(sr(sr({percent:O,cornerRadius:i,name:R,tooltipPayload:W,midAngle:I,middleRadius:E,tooltipPosition:B},P),x),{},{value:Lt(P,b),startAngle:q,endAngle:S,payload:P,paddingAngle:Ga(h)*c}),N})}return sr(sr({},x),{},{sectors:k,data:s})});var Iue=Math.ceil,Lue=Math.max;function $ue(e,t,a,n){for(var s=-1,i=Lue(Iue((t-e)/(a||1)),0),o=Array(i);i--;)o[n?i:++s]=e,e+=a;return o}var Rue=$ue,que=rD,_4=1/0,Fue=17976931348623157e292;function zue(e){if(!e)return e===0?e:0;if(e=que(e),e===_4||e===-_4){var t=e<0?-1:1;return t*Fue}return e===e?e:0}var zI=zue,Bue=Rue,Wue=fv,$b=zI;function Uue(e){return function(t,a,n){return n&&typeof n!="number"&&Wue(t,a,n)&&(a=n=void 0),t=$b(t),a===void 0?(a=t,t=0):a=$b(a),n=n===void 0?t<a?1:-1:$b(n),Bue(t,a,n,e)}}var Hue=Uue,Kue=Hue,Vue=Kue(),Gue=Vue;const $x=Dt(Gue);function zp(e){"@babel/helpers - typeof";return zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zp(e)}function k4(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function N4(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?k4(Object(a),!0).forEach(function(n){BI(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k4(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function BI(e,t,a){return t=Yue(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Yue(e){var t=Zue(e,"string");return zp(t)=="symbol"?t:t+""}function Zue(e,t){if(zp(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(zp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xue=["Webkit","Moz","O","ms"],Que=function(t,a){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=Xue.reduce(function(i,o){return N4(N4({},i),{},BI({},o+n,a))},{});return s[t]=a,s};function Nd(e){"@babel/helpers - typeof";return Nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nd(e)}function Rx(){return Rx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Rx.apply(this,arguments)}function S4(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Rb(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?S4(Object(a),!0).forEach(function(n){bn(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S4(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Jue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A4(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,UI(n.key),n)}}function eme(e,t,a){return t&&A4(e.prototype,t),a&&A4(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function tme(e,t,a){return t=qx(t),rme(e,WI()?Reflect.construct(t,a||[],qx(e).constructor):t.apply(e,a))}function rme(e,t){if(t&&(Nd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ame(e)}function ame(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WI=function(){return!!e})()}function qx(e){return qx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},qx(e)}function nme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S_(e,t)}function S_(e,t){return S_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},S_(e,t)}function bn(e,t,a){return t=UI(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function UI(e){var t=sme(e,"string");return Nd(t)=="symbol"?t:t+""}function sme(e,t){if(Nd(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Nd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ime=function(t){var a=t.data,n=t.startIndex,s=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!a||!a.length)return{};var c=a.length,d=Lm().domain($x(0,c)).range([i,i+o-l]),u=d.domain().map(function(m){return d(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(n),endX:d(s),scale:d,scaleValues:u}},P4=function(t){return t.changedTouches&&!!t.changedTouches.length},Sd=function(e){function t(a){var n;return Jue(this,t),n=tme(this,t,[a]),bn(n,"handleDrag",function(s){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(s):n.state.isSlideMoving&&n.handleSlideDrag(s)}),bn(n,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&n.handleDrag(s.changedTouches[0])}),bn(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=n.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o?.({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),bn(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),bn(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),bn(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),bn(n,"handleSlideDragStart",function(s){var i=P4(s)?s.changedTouches[0]:s;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return nme(t,e),eme(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var s=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,u=d.length-1,m=Math.min(s,i),p=Math.max(s,i),g=t.getIndexInRange(o,m),x=t.getIndexInRange(o,p);return{startIndex:g-g%c,endIndex:x===u?u:x-x%c}}},{key:"getTextOfTick",value:function(n){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,c=Lt(i[n],l,n);return at(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,c=this.props,d=c.x,u=c.width,m=c.travellerWidth,p=c.startIndex,g=c.endIndex,x=c.onChange,h=n.pageX-i;h>0?h=Math.min(h,d+u-m-l,d+u-m-o):h<0&&(h=Math.max(h,d-o,d-l));var v=this.getIndex({startX:o+h,endX:l+h});(v.startIndex!==p||v.endIndex!==g)&&x&&x(v),this.setState({startX:o+h,endX:l+h,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,s){var i=P4(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,c=s.startX,d=this.state[o],u=this.props,m=u.x,p=u.width,g=u.travellerWidth,x=u.onChange,h=u.gap,v=u.data,b={startX:this.state.startX,endX:this.state.endX},y=n.pageX-i;y>0?y=Math.min(y,m+p-g-d):y<0&&(y=Math.max(y,m-d)),b[o]=d+y;var j=this.getIndex(b),_=j.startIndex,w=j.endIndex,k=function(){var P=v.length-1;return o==="startX"&&(l>c?_%h===0:w%h===0)||l<c&&w===P||o==="endX"&&(l>c?w%h===0:_%h===0)||l>c&&w===P};this.setState(bn(bn({},o,d+y),"brushMoveStartX",n.pageX),function(){x&&k()&&x(j)})}},{key:"handleTravellerMoveKeyboard",value:function(n,s){var i=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,u=this.state[s],m=l.indexOf(u);if(m!==-1){var p=m+n;if(!(p===-1||p>=l.length)){var g=l[p];s==="startX"&&g>=d||s==="endX"&&g<=c||this.setState(bn({},s,g),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.fill,d=n.stroke;return le.createElement("rect",{stroke:d,fill:c,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.data,d=n.children,u=n.padding,m=f.Children.only(d);return m?le.cloneElement(m,{x:s,y:i,width:o,height:l,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,s){var i,o,l=this,c=this.props,d=c.y,u=c.travellerWidth,m=c.height,p=c.traveller,g=c.ariaLabel,x=c.data,h=c.startIndex,v=c.endIndex,b=Math.max(n,this.props.x),y=Rb(Rb({},Qe(this.props,!1)),{},{x:b,y:d,width:u,height:m}),j=g||"Min value: ".concat((i=x[h])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=x[v])===null||o===void 0?void 0:o.name);return le.createElement(ft,{tabIndex:0,role:"slider","aria-label":j,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),l.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(p,y))}},{key:"renderSlide",value:function(n,s){var i=this.props,o=i.y,l=i.height,c=i.stroke,d=i.travellerWidth,u=Math.min(n,s)+d,m=Math.max(Math.abs(s-n)-d,0);return le.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:o,width:m,height:l})}},{key:"renderText",value:function(){var n=this.props,s=n.startIndex,i=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,d=n.stroke,u=this.state,m=u.startX,p=u.endX,g=5,x={pointerEvents:"none",fill:d};return le.createElement(ft,{className:"recharts-brush-texts"},le.createElement(Il,Rx({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,p)-g,y:o+l/2},x),this.getTextOfTick(s)),le.createElement(Il,Rx({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,p)+c+g,y:o+l/2},x),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,s=n.data,i=n.className,o=n.children,l=n.x,c=n.y,d=n.width,u=n.height,m=n.alwaysShowText,p=this.state,g=p.startX,x=p.endX,h=p.isTextActive,v=p.isSlideMoving,b=p.isTravellerMoving,y=p.isTravellerFocused;if(!s||!s.length||!He(l)||!He(c)||!He(d)||!He(u)||d<=0||u<=0)return null;var j=wt("recharts-brush",i),_=le.Children.count(o)===1,w=Que("userSelect","none");return le.createElement(ft,{className:j,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(g,x),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(x,"endX"),(h||v||b||y||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var s=n.x,i=n.y,o=n.width,l=n.height,c=n.stroke,d=Math.floor(i+l/2)-1;return le.createElement(le.Fragment,null,le.createElement("rect",{x:s,y:i,width:o,height:l,fill:c,stroke:"none"}),le.createElement("line",{x1:s+1,y1:d,x2:s+o-1,y2:d,fill:"none",stroke:"#fff"}),le.createElement("line",{x1:s+1,y1:d+2,x2:s+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,s){var i;return le.isValidElement(n)?i=le.cloneElement(n,s):at(n)?i=n(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(n,s){var i=n.data,o=n.width,l=n.x,c=n.travellerWidth,d=n.updateId,u=n.startIndex,m=n.endIndex;if(i!==s.prevData||d!==s.prevUpdateId)return Rb({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},i&&i.length?ime({data:i,width:o,x:l,travellerWidth:c,startIndex:u,endIndex:m}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([l,l+o-c]);var p=s.scale.domain().map(function(g){return s.scale(g)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:s.scale(n.startIndex),endX:s.scale(n.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(n,s){for(var i=n.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>s?l=c:o=c}return s>=n[l]?l:o}}])}(f.PureComponent);bn(Sd,"displayName","Brush");bn(Sd,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var ome=Mk;function lme(e,t){var a;return ome(e,function(n,s,i){return a=t(n,s,i),!a}),!!a}var cme=lme,dme=SM,ume=Ms,mme=cme,pme=rn,fme=fv;function hme(e,t,a){var n=pme(e)?dme:mme;return a&&fme(e,t,a)&&(t=void 0),n(e,ume(t))}var gme=hme;const xme=Dt(gme);var Gs=function(t,a){var n=t.alwaysShow,s=t.ifOverflow;return n&&(s="extendDomain"),s===a},C4=ZM;function yme(e,t,a){t=="__proto__"&&C4?C4(e,t,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[t]=a}var lN=yme,vme=lN,bme=VM,jme=Ms;function wme(e,t){var a={};return t=jme(t),bme(e,function(n,s,i){vme(a,s,t(n,s,i))}),a}var _me=wme;const kme=Dt(_me);function Nme(e,t){for(var a=-1,n=e==null?0:e.length;++a<n;)if(!t(e[a],a,e))return!1;return!0}var Sme=Nme,Ame=Mk;function Pme(e,t){var a=!0;return Ame(e,function(n,s,i){return a=!!t(n,s,i),a}),a}var Cme=Pme,Eme=Sme,Tme=Cme,Ome=Ms,Mme=rn,Dme=fv;function Ime(e,t,a){var n=Mme(e)?Eme:Tme;return a&&Dme(e,t,a)&&(t=void 0),n(e,Ome(t))}var Lme=Ime;const HI=Dt(Lme);var $me=["x","y"];function Bp(e){"@babel/helpers - typeof";return Bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bp(e)}function A_(){return A_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},A_.apply(this,arguments)}function E4(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function sm(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?E4(Object(a),!0).forEach(function(n){Rme(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E4(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Rme(e,t,a){return t=qme(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function qme(e){var t=Fme(e,"string");return Bp(t)=="symbol"?t:t+""}function Fme(e,t){if(Bp(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Bp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zme(e,t){if(e==null)return{};var a=Bme(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Bme(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function Wme(e,t){var a=e.x,n=e.y,s=zme(e,$me),i="".concat(a),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),d="".concat(t.height||s.height),u=parseInt(d,10),m="".concat(t.width||s.width),p=parseInt(m,10);return sm(sm(sm(sm(sm({},t),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:u,width:p,name:t.name,radius:t.radius})}function T4(e){return le.createElement(Ix,A_({shapeType:"rectangle",propTransformer:Wme,activeClassName:"recharts-active-bar"},e))}var Ume=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,s){if(typeof t=="number")return t;var i=He(n)||EH(n);return i?t(n,s):(i||$l(),a)}},Hme=["value","background"],KI;function Ad(e){"@babel/helpers - typeof";return Ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ad(e)}function Kme(e,t){if(e==null)return{};var a=Vme(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Vme(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function Fx(){return Fx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Fx.apply(this,arguments)}function O4(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Wr(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?O4(Object(a),!0).forEach(function(n){oo(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O4(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Gme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M4(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GI(n.key),n)}}function Yme(e,t,a){return t&&M4(e.prototype,t),a&&M4(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zme(e,t,a){return t=zx(t),Xme(e,VI()?Reflect.construct(t,a||[],zx(e).constructor):t.apply(e,a))}function Xme(e,t){if(t&&(Ad(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qme(e)}function Qme(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VI=function(){return!!e})()}function zx(e){return zx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},zx(e)}function Jme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P_(e,t)}function P_(e,t){return P_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},P_(e,t)}function oo(e,t,a){return t=GI(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function GI(e){var t=epe(e,"string");return Ad(t)=="symbol"?t:t+""}function epe(e,t){if(Ad(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Ad(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var pt=function(e){function t(){var a;Gme(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=Zme(this,t,[].concat(s)),oo(a,"state",{isAnimationFinished:!1}),oo(a,"id",Di("recharts-bar-")),oo(a,"handleAnimationEnd",function(){var o=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),o&&o()}),oo(a,"handleAnimationStart",function(){var o=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),o&&o()}),a}return Jme(t,e),Yme(t,[{key:"renderRectanglesStatically",value:function(n){var s=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,d=i.activeBar,u=Qe(this.props,!1);return n&&n.map(function(m,p){var g=p===c,x=g?d:o,h=Wr(Wr(Wr({},u),m),{},{isActive:g,option:x,index:p,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return le.createElement(ft,Fx({className:"recharts-bar-rectangle"},Ao(s.props,m,p),{key:"rectangle-".concat(m?.x,"-").concat(m?.y,"-").concat(m?.value,"-").concat(p)}),le.createElement(T4,h))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,c=s.animationBegin,d=s.animationDuration,u=s.animationEasing,m=s.animationId,p=this.state.prevData;return le.createElement(gn,{begin:c,duration:d,isActive:l,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var x=g.t,h=i.map(function(v,b){var y=p&&p[b];if(y){var j=wr(y.x,v.x),_=wr(y.y,v.y),w=wr(y.width,v.width),k=wr(y.height,v.height);return Wr(Wr({},v),{},{x:j(x),y:_(x),width:w(x),height:k(x)})}if(o==="horizontal"){var N=wr(0,v.height),P=N(x);return Wr(Wr({},v),{},{y:v.y+v.height-P,height:P})}var A=wr(0,v.width),M=A(x);return Wr(Wr({},v),{},{width:M})});return le.createElement(ft,null,n.renderRectanglesStatically(h))})}},{key:"renderRectangles",value:function(){var n=this.props,s=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!Po(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var n=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,c=Qe(this.props.background,!1);return i.map(function(d,u){d.value;var m=d.background,p=Kme(d,Hme);if(!m)return null;var g=Wr(Wr(Wr(Wr(Wr({},p),{},{fill:"#eee"},m),c),Ao(n.props,d,u)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return le.createElement(T4,Fx({key:"background-bar-".concat(u),option:n.props.background,isActive:u===l},g))})}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,m=Ja(u,mu);if(!m)return null;var p=d==="vertical"?o[0].height/2:o[0].width/2,g=function(v,b){var y=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:y,errorVal:Lt(v,b)}},x={clipPath:n?"url(#clipPath-".concat(s,")"):null};return le.createElement(ft,x,m.map(function(h){return le.cloneElement(h,{key:"error-bar-".concat(s,"-").concat(h.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:p,dataPointFormatter:g})}))}},{key:"render",value:function(){var n=this.props,s=n.hide,i=n.data,o=n.className,l=n.xAxis,c=n.yAxis,d=n.left,u=n.top,m=n.width,p=n.height,g=n.isAnimationActive,x=n.background,h=n.id;if(s||!i||!i.length)return null;var v=this.state.isAnimationFinished,b=wt("recharts-bar",o),y=l&&l.allowDataOverflow,j=c&&c.allowDataOverflow,_=y||j,w=dt(h)?this.id:h;return le.createElement(ft,{className:b},y||j?le.createElement("defs",null,le.createElement("clipPath",{id:"clipPath-".concat(w)},le.createElement("rect",{x:y?d:d-m/2,y:j?u:u-p/2,width:y?m:m*2,height:j?p:p*2}))):null,le.createElement(ft,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(w,")"):null},x?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,w),(!g||v)&&Ht.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:s.curData}:n.data!==s.curData?{curData:n.data}:null}}])}(f.PureComponent);KI=pt;oo(pt,"displayName","Bar");oo(pt,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ss.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});oo(pt,"getComposedData",function(e){var t=e.props,a=e.item,n=e.barPosition,s=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,u=e.dataStartIndex,m=e.displayedData,p=e.offset,g=Lie(n,a);if(!g)return null;var x=t.layout,h=a.type.defaultProps,v=h!==void 0?Wr(Wr({},h),a.props):a.props,b=v.dataKey,y=v.children,j=v.minPointSize,_=x==="horizontal"?o:i,w=d?_.scale.domain():null,k=Wie({numericAxis:_}),N=Ja(y,Vn),P=m.map(function(A,M){var R,O,q,S,I,E;d?R=$ie(d[u+M],w):(R=Lt(A,b),Array.isArray(R)||(R=[k,R]));var W=Ume(j,KI.defaultProps.minPointSize)(R[1],M);if(x==="horizontal"){var B,C=[o.scale(R[0]),o.scale(R[1])],D=C[0],z=C[1];O=wC({axis:i,ticks:l,bandSize:s,offset:g.offset,entry:A,index:M}),q=(B=z??D)!==null&&B!==void 0?B:void 0,S=g.size;var L=D-z;if(I=Number.isNaN(L)?0:L,E={x:O,y:o.y,width:S,height:o.height},Math.abs(W)>0&&Math.abs(I)<Math.abs(W)){var X=Ga(I||W)*(Math.abs(W)-Math.abs(I));q-=X,I+=X}}else{var H=[i.scale(R[0]),i.scale(R[1])],F=H[0],ke=H[1];if(O=F,q=wC({axis:o,ticks:c,bandSize:s,offset:g.offset,entry:A,index:M}),S=ke-F,I=g.size,E={x:i.x,y:q,width:i.width,height:I},Math.abs(W)>0&&Math.abs(S)<Math.abs(W)){var ae=Ga(S||W)*(Math.abs(W)-Math.abs(S));S+=ae}}return Wr(Wr(Wr({},A),{},{x:O,y:q,width:S,height:I,value:d?R:R[1],payload:A,background:E},N&&N[M]&&N[M].props),{},{tooltipPayload:[pI(a,A)],tooltipPosition:{x:O+S/2,y:q+I/2}})});return Wr({data:P,layout:x},p)});function Wp(e){"@babel/helpers - typeof";return Wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wp(e)}function tpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D4(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YI(n.key),n)}}function rpe(e,t,a){return t&&D4(e.prototype,t),a&&D4(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function I4(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function gs(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?I4(Object(a),!0).forEach(function(n){Ev(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I4(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Ev(e,t,a){return t=YI(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function YI(e){var t=ape(e,"string");return Wp(t)=="symbol"?t:t+""}function ape(e,t){if(Wp(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Wp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yf=function(t,a,n,s,i){var o=t.width,l=t.height,c=t.layout,d=t.children,u=Object.keys(a),m={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},p=!!Ur(d,pt);return u.reduce(function(g,x){var h=a[x],v=h.orientation,b=h.domain,y=h.padding,j=y===void 0?{}:y,_=h.mirror,w=h.reversed,k="".concat(v).concat(_?"Mirror":""),N,P,A,M,R;if(h.type==="number"&&(h.padding==="gap"||h.padding==="no-gap")){var O=b[1]-b[0],q=1/0,S=h.categoricalDomain.sort(DH);if(S.forEach(function(H,F){F>0&&(q=Math.min((H||0)-(S[F-1]||0),q))}),Number.isFinite(q)){var I=q/O,E=h.layout==="vertical"?n.height:n.width;if(h.padding==="gap"&&(N=I*E/2),h.padding==="no-gap"){var W=Ya(t.barCategoryGap,I*E),B=I*E/2;N=B-W-(B-W)/E*W}}}s==="xAxis"?P=[n.left+(j.left||0)+(N||0),n.left+n.width-(j.right||0)-(N||0)]:s==="yAxis"?P=c==="horizontal"?[n.top+n.height-(j.bottom||0),n.top+(j.top||0)]:[n.top+(j.top||0)+(N||0),n.top+n.height-(j.bottom||0)-(N||0)]:P=h.range,w&&(P=[P[1],P[0]]);var C=cI(h,i,p),D=C.scale,z=C.realScaleType;D.domain(b).range(P),dI(D);var L=uI(D,gs(gs({},h),{},{realScaleType:z}));s==="xAxis"?(R=v==="top"&&!_||v==="bottom"&&_,A=n.left,M=m[k]-R*h.height):s==="yAxis"&&(R=v==="left"&&!_||v==="right"&&_,A=m[k]-R*h.width,M=n.top);var X=gs(gs(gs({},h),L),{},{realScaleType:z,x:A,y:M,scale:D,width:s==="xAxis"?n.width:h.width,height:s==="yAxis"?n.height:h.height});return X.bandSize=kx(X,L),!h.hide&&s==="xAxis"?m[k]+=(R?-1:1)*X.height:h.hide||(m[k]+=(R?-1:1)*X.width),gs(gs({},g),{},Ev({},x,X))},{})},ZI=function(t,a){var n=t.x,s=t.y,i=a.x,o=a.y;return{x:Math.min(n,i),y:Math.min(s,o),width:Math.abs(i-n),height:Math.abs(o-s)}},npe=function(t){var a=t.x1,n=t.y1,s=t.x2,i=t.y2;return ZI({x:a,y:n},{x:s,y:i})},XI=function(){function e(t){tpe(this,e),this.scale=t}return rpe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(a){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.bandAware,i=n.position;if(a!==void 0){if(i)switch(i){case"start":return this.scale(a);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(a)+l}default:return this.scale(a)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+c}return this.scale(a)}}},{key:"isInRange",value:function(a){var n=this.range(),s=n[0],i=n[n.length-1];return s<=i?a>=s&&a<=i:a>=i&&a<=s}}],[{key:"create",value:function(a){return new e(a)}}])}();Ev(XI,"EPS",1e-4);var cN=function(t){var a=Object.keys(t).reduce(function(n,s){return gs(gs({},n),{},Ev({},s,XI.create(t[s])))},{});return gs(gs({},a),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return kme(s,function(c,d){return a[d].apply(c,{bandAware:o,position:l})})},isInRange:function(s){return HI(s,function(i,o){return a[o].isInRange(i)})}})};function spe(e){return(e%180+180)%180}var ipe=function(t){var a=t.width,n=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=spe(s),o=i*Math.PI/180,l=Math.atan(n/a),c=o>l&&o<Math.PI-l?n/Math.sin(o):a/Math.cos(o);return Math.abs(c)},ope=Ms,lpe=su,cpe=iu;function dpe(e){return function(t,a,n){var s=Object(t);if(!lpe(t)){var i=ope(a);t=cpe(t),a=function(l){return i(s[l],l,s)}}var o=e(t,a,n);return o>-1?s[i?t[o]:o]:void 0}}var upe=dpe,mpe=zI;function ppe(e){var t=mpe(e),a=t%1;return t===t?a?t-a:t:0}var fpe=ppe,hpe=BM,gpe=Ms,xpe=fpe,ype=Math.max;function vpe(e,t,a){var n=e==null?0:e.length;if(!n)return-1;var s=a==null?0:xpe(a);return s<0&&(s=ype(n+s,0)),hpe(e,gpe(t),s)}var bpe=vpe,jpe=upe,wpe=bpe,_pe=jpe(wpe),kpe=_pe;const Npe=Dt(kpe);var Spe=LU(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),dN=f.createContext(void 0),uN=f.createContext(void 0),QI=f.createContext(void 0),JI=f.createContext({}),eL=f.createContext(void 0),tL=f.createContext(0),rL=f.createContext(0),L4=function(t){var a=t.state,n=a.xAxisMap,s=a.yAxisMap,i=a.offset,o=t.clipPathId,l=t.children,c=t.width,d=t.height,u=Spe(i);return le.createElement(dN.Provider,{value:n},le.createElement(uN.Provider,{value:s},le.createElement(JI.Provider,{value:i},le.createElement(QI.Provider,{value:u},le.createElement(eL.Provider,{value:o},le.createElement(tL.Provider,{value:d},le.createElement(rL.Provider,{value:c},l)))))))},Ape=function(){return f.useContext(eL)},aL=function(t){var a=f.useContext(dN);a==null&&$l();var n=a[t];return n==null&&$l(),n},Ppe=function(){var t=f.useContext(dN);return to(t)},Cpe=function(){var t=f.useContext(uN),a=Npe(t,function(n){return HI(n.domain,Number.isFinite)});return a||to(t)},nL=function(t){var a=f.useContext(uN);a==null&&$l();var n=a[t];return n==null&&$l(),n},Epe=function(){var t=f.useContext(QI);return t},Tpe=function(){return f.useContext(JI)},mN=function(){return f.useContext(rL)},pN=function(){return f.useContext(tL)};function Pd(e){"@babel/helpers - typeof";return Pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pd(e)}function Ope(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mpe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iL(n.key),n)}}function Dpe(e,t,a){return t&&Mpe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ipe(e,t,a){return t=Bx(t),Lpe(e,sL()?Reflect.construct(t,a||[],Bx(e).constructor):t.apply(e,a))}function Lpe(e,t){if(t&&(Pd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $pe(e)}function $pe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sL=function(){return!!e})()}function Bx(e){return Bx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Bx(e)}function Rpe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C_(e,t)}function C_(e,t){return C_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},C_(e,t)}function $4(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function R4(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?$4(Object(a),!0).forEach(function(n){fN(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$4(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function fN(e,t,a){return t=iL(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function iL(e){var t=qpe(e,"string");return Pd(t)=="symbol"?t:t+""}function qpe(e,t){if(Pd(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Pd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Fpe(e,t){return Upe(e)||Wpe(e,t)||Bpe(e,t)||zpe()}function zpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bpe(e,t){if(e){if(typeof e=="string")return q4(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return q4(e,t)}}function q4(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Wpe(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(a=a.call(e)).next,t!==0)for(;!(c=(n=i.call(a)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&a.return!=null&&(o=a.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Upe(e){if(Array.isArray(e))return e}function E_(){return E_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},E_.apply(this,arguments)}var Hpe=function(t,a){var n;return le.isValidElement(t)?n=le.cloneElement(t,a):at(t)?n=t(a):n=le.createElement("line",E_({},a,{className:"recharts-reference-line-line"})),n},Kpe=function(t,a,n,s,i,o,l,c,d){var u=i.x,m=i.y,p=i.width,g=i.height;if(n){var x=d.y,h=t.y.apply(x,{position:o});if(Gs(d,"discard")&&!t.y.isInRange(h))return null;var v=[{x:u+p,y:h},{x:u,y:h}];return c==="left"?v.reverse():v}if(a){var b=d.x,y=t.x.apply(b,{position:o});if(Gs(d,"discard")&&!t.x.isInRange(y))return null;var j=[{x:y,y:m+g},{x:y,y:m}];return l==="top"?j.reverse():j}if(s){var _=d.segment,w=_.map(function(k){return t.apply(k,{position:o})});return Gs(d,"discard")&&xme(w,function(k){return!t.isInRange(k)})?null:w}return null};function Vpe(e){var t=e.x,a=e.y,n=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,d=Ape(),u=aL(s),m=nL(i),p=Epe();if(!d||!p)return null;Kn(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=cN({x:u.scale,y:m.scale}),x=ia(t),h=ia(a),v=n&&n.length===2,b=Kpe(g,x,h,v,p,e.position,u.orientation,m.orientation,e);if(!b)return null;var y=Fpe(b,2),j=y[0],_=j.x,w=j.y,k=y[1],N=k.x,P=k.y,A=Gs(e,"hidden")?"url(#".concat(d,")"):void 0,M=R4(R4({clipPath:A},Qe(e,!0)),{},{x1:_,y1:w,x2:N,y2:P});return le.createElement(ft,{className:wt("recharts-reference-line",l)},Hpe(o,M),ga.renderCallByParent(e,npe({x1:_,y1:w,x2:N,y2:P})))}var hN=function(e){function t(){return Ope(this,t),Ipe(this,t,arguments)}return Rpe(t,e),Dpe(t,[{key:"render",value:function(){return le.createElement(Vpe,this.props)}}])}(le.Component);fN(hN,"displayName","ReferenceLine");fN(hN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function T_(){return T_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},T_.apply(this,arguments)}function Cd(e){"@babel/helpers - typeof";return Cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cd(e)}function F4(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function z4(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?F4(Object(a),!0).forEach(function(n){Tv(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F4(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Gpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ype(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lL(n.key),n)}}function Zpe(e,t,a){return t&&Ype(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xpe(e,t,a){return t=Wx(t),Qpe(e,oL()?Reflect.construct(t,a||[],Wx(e).constructor):t.apply(e,a))}function Qpe(e,t){if(t&&(Cd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jpe(e)}function Jpe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oL=function(){return!!e})()}function Wx(e){return Wx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Wx(e)}function efe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O_(e,t)}function O_(e,t){return O_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},O_(e,t)}function Tv(e,t,a){return t=lL(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function lL(e){var t=tfe(e,"string");return Cd(t)=="symbol"?t:t+""}function tfe(e,t){if(Cd(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Cd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var rfe=function(t){var a=t.x,n=t.y,s=t.xAxis,i=t.yAxis,o=cN({x:s.scale,y:i.scale}),l=o.apply({x:a,y:n},{bandAware:!0});return Gs(t,"discard")&&!o.isInRange(l)?null:l},Ov=function(e){function t(){return Gpe(this,t),Xpe(this,t,arguments)}return efe(t,e),Zpe(t,[{key:"render",value:function(){var n=this.props,s=n.x,i=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,d=ia(s),u=ia(i);if(Kn(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var m=rfe(this.props);if(!m)return null;var p=m.x,g=m.y,x=this.props,h=x.shape,v=x.className,b=Gs(this.props,"hidden")?"url(#".concat(c,")"):void 0,y=z4(z4({clipPath:b},Qe(this.props,!0)),{},{cx:p,cy:g});return le.createElement(ft,{className:wt("recharts-reference-dot",v)},t.renderDot(h,y),ga.renderCallByParent(this.props,{x:p-o,y:g-o,width:2*o,height:2*o}))}}])}(le.Component);Tv(Ov,"displayName","ReferenceDot");Tv(Ov,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Tv(Ov,"renderDot",function(e,t){var a;return le.isValidElement(e)?a=le.cloneElement(e,t):at(e)?a=e(t):a=le.createElement(xf,T_({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),a});function M_(){return M_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},M_.apply(this,arguments)}function Ed(e){"@babel/helpers - typeof";return Ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ed(e)}function B4(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function W4(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?B4(Object(a),!0).forEach(function(n){Mv(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B4(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function afe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nfe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dL(n.key),n)}}function sfe(e,t,a){return t&&nfe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ife(e,t,a){return t=Ux(t),ofe(e,cL()?Reflect.construct(t,a||[],Ux(e).constructor):t.apply(e,a))}function ofe(e,t){if(t&&(Ed(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lfe(e)}function lfe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cL=function(){return!!e})()}function Ux(e){return Ux=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Ux(e)}function cfe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D_(e,t)}function D_(e,t){return D_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},D_(e,t)}function Mv(e,t,a){return t=dL(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function dL(e){var t=dfe(e,"string");return Ed(t)=="symbol"?t:t+""}function dfe(e,t){if(Ed(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Ed(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ufe=function(t,a,n,s,i){var o=i.x1,l=i.x2,c=i.y1,d=i.y2,u=i.xAxis,m=i.yAxis;if(!u||!m)return null;var p=cN({x:u.scale,y:m.scale}),g={x:t?p.x.apply(o,{position:"start"}):p.x.rangeMin,y:n?p.y.apply(c,{position:"start"}):p.y.rangeMin},x={x:a?p.x.apply(l,{position:"end"}):p.x.rangeMax,y:s?p.y.apply(d,{position:"end"}):p.y.rangeMax};return Gs(i,"discard")&&(!p.isInRange(g)||!p.isInRange(x))?null:ZI(g,x)},Dv=function(e){function t(){return afe(this,t),ife(this,t,arguments)}return cfe(t,e),sfe(t,[{key:"render",value:function(){var n=this.props,s=n.x1,i=n.x2,o=n.y1,l=n.y2,c=n.className,d=n.alwaysShow,u=n.clipPathId;Kn(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=ia(s),p=ia(i),g=ia(o),x=ia(l),h=this.props.shape;if(!m&&!p&&!g&&!x&&!h)return null;var v=ufe(m,p,g,x,this.props);if(!v&&!h)return null;var b=Gs(this.props,"hidden")?"url(#".concat(u,")"):void 0;return le.createElement(ft,{className:wt("recharts-reference-area",c)},t.renderRect(h,W4(W4({clipPath:b},Qe(this.props,!0)),v)),ga.renderCallByParent(this.props,v))}}])}(le.Component);Mv(Dv,"displayName","ReferenceArea");Mv(Dv,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Mv(Dv,"renderRect",function(e,t){var a;return le.isValidElement(e)?a=le.cloneElement(e,t):at(e)?a=e(t):a=le.createElement(gf,M_({},t,{className:"recharts-reference-area-rect"})),a});function uL(e,t,a){if(t<1)return[];if(t===1&&a===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function mfe(e,t,a){var n={width:e.width+t.width,height:e.height+t.height};return ipe(n,a)}function pfe(e,t,a){var n=a==="width",s=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:n?s:i,end:n?s+o:i+l}:{start:n?s+o:i+l,end:n?s:i}}function Hx(e,t,a,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=a();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function ffe(e,t){return uL(e,t+1)}function hfe(e,t,a,n,s){for(var i=(n||[]).slice(),o=t.start,l=t.end,c=0,d=1,u=o,m=function(){var x=n?.[c];if(x===void 0)return{v:uL(n,d)};var h=c,v,b=function(){return v===void 0&&(v=a(x,h)),v},y=x.coordinate,j=c===0||Hx(e,y,b,u,l);j||(c=0,u=o,d+=1),j&&(u=y+e*(b()/2+s),c+=d)},p;d<=i.length;)if(p=m(),p)return p.v;return[]}function Up(e){"@babel/helpers - typeof";return Up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Up(e)}function U4(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Oa(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?U4(Object(a),!0).forEach(function(n){gfe(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U4(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function gfe(e,t,a){return t=xfe(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function xfe(e){var t=yfe(e,"string");return Up(t)=="symbol"?t:t+""}function yfe(e,t){if(Up(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Up(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vfe(e,t,a,n,s){for(var i=(n||[]).slice(),o=i.length,l=t.start,c=t.end,d=function(p){var g=i[p],x,h=function(){return x===void 0&&(x=a(g,p)),x};if(p===o-1){var v=e*(g.coordinate+e*h()/2-c);i[p]=g=Oa(Oa({},g),{},{tickCoord:v>0?g.coordinate-v*e:g.coordinate})}else i[p]=g=Oa(Oa({},g),{},{tickCoord:g.coordinate});var b=Hx(e,g.tickCoord,h,l,c);b&&(c=g.tickCoord-e*(h()/2+s),i[p]=Oa(Oa({},g),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return i}function bfe(e,t,a,n,s,i){var o=(n||[]).slice(),l=o.length,c=t.start,d=t.end;if(i){var u=n[l-1],m=a(u,l-1),p=e*(u.coordinate+e*m/2-d);o[l-1]=u=Oa(Oa({},u),{},{tickCoord:p>0?u.coordinate-p*e:u.coordinate});var g=Hx(e,u.tickCoord,function(){return m},c,d);g&&(d=u.tickCoord-e*(m/2+s),o[l-1]=Oa(Oa({},u),{},{isShow:!0}))}for(var x=i?l-1:l,h=function(y){var j=o[y],_,w=function(){return _===void 0&&(_=a(j,y)),_};if(y===0){var k=e*(j.coordinate-e*w()/2-c);o[y]=j=Oa(Oa({},j),{},{tickCoord:k<0?j.coordinate-k*e:j.coordinate})}else o[y]=j=Oa(Oa({},j),{},{tickCoord:j.coordinate});var N=Hx(e,j.tickCoord,w,c,d);N&&(c=j.tickCoord+e*(w()/2+s),o[y]=Oa(Oa({},j),{},{isShow:!0}))},v=0;v<x;v++)h(v);return o}function gN(e,t,a){var n=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,d=e.tickFormatter,u=e.unit,m=e.angle;if(!s||!s.length||!n)return[];if(He(c)||Ss.isSsr)return ffe(s,typeof c=="number"&&He(c)?c:0);var p=[],g=l==="top"||l==="bottom"?"width":"height",x=u&&g==="width"?Yc(u,{fontSize:t,letterSpacing:a}):{width:0,height:0},h=function(j,_){var w=at(d)?d(j.value,_):j.value;return g==="width"?mfe(Yc(w,{fontSize:t,letterSpacing:a}),x,m):Yc(w,{fontSize:t,letterSpacing:a})[g]},v=s.length>=2?Ga(s[1].coordinate-s[0].coordinate):1,b=pfe(i,v,g);return c==="equidistantPreserveStart"?hfe(v,b,h,s,o):(c==="preserveStart"||c==="preserveStartEnd"?p=bfe(v,b,h,s,o,c==="preserveStartEnd"):p=vfe(v,b,h,s,o),p.filter(function(y){return y.isShow}))}var jfe=["viewBox"],wfe=["viewBox"],_fe=["ticks"];function Td(e){"@babel/helpers - typeof";return Td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Td(e)}function Lc(){return Lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Lc.apply(this,arguments)}function H4(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Qr(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?H4(Object(a),!0).forEach(function(n){xN(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H4(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function qb(e,t){if(e==null)return{};var a=kfe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function kfe(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function Nfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K4(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pL(n.key),n)}}function Sfe(e,t,a){return t&&K4(e.prototype,t),a&&K4(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function Afe(e,t,a){return t=Kx(t),Pfe(e,mL()?Reflect.construct(t,a||[],Kx(e).constructor):t.apply(e,a))}function Pfe(e,t){if(t&&(Td(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cfe(e)}function Cfe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mL=function(){return!!e})()}function Kx(e){return Kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Kx(e)}function Efe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I_(e,t)}function I_(e,t){return I_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},I_(e,t)}function xN(e,t,a){return t=pL(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function pL(e){var t=Tfe(e,"string");return Td(t)=="symbol"?t:t+""}function Tfe(e,t){if(Td(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Td(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var pu=function(e){function t(a){var n;return Nfe(this,t),n=Afe(this,t,[a]),n.state={fontSize:"",letterSpacing:""},n}return Efe(t,e),Sfe(t,[{key:"shouldComponentUpdate",value:function(n,s){var i=n.viewBox,o=qb(n,jfe),l=this.props,c=l.viewBox,d=qb(l,wfe);return!jl(i,c)||!jl(o,d)||!jl(s,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var s=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var s=this.props,i=s.x,o=s.y,l=s.width,c=s.height,d=s.orientation,u=s.tickSize,m=s.mirror,p=s.tickMargin,g,x,h,v,b,y,j=m?-1:1,_=n.tickSize||u,w=He(n.tickCoord)?n.tickCoord:n.coordinate;switch(d){case"top":g=x=n.coordinate,v=o+ +!m*c,h=v-j*_,y=h-j*p,b=w;break;case"left":h=v=n.coordinate,x=i+ +!m*l,g=x-j*_,b=g-j*p,y=w;break;case"right":h=v=n.coordinate,x=i+ +m*l,g=x+j*_,b=g+j*p,y=w;break;default:g=x=n.coordinate,v=o+ +m*c,h=v+j*_,y=h+j*p,b=w;break}return{line:{x1:g,y1:h,x2:x,y2:v},tick:{x:b,y}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.orientation,d=n.mirror,u=n.axisLine,m=Qr(Qr(Qr({},Qe(this.props,!1)),Qe(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var p=+(c==="top"&&!d||c==="bottom"&&d);m=Qr(Qr({},m),{},{x1:s,y1:i+p*l,x2:s+o,y2:i+p*l})}else{var g=+(c==="left"&&!d||c==="right"&&d);m=Qr(Qr({},m),{},{x1:s+g*o,y1:i,x2:s+g*o,y2:i+l})}return le.createElement("line",Lc({},m,{className:wt("recharts-cartesian-axis-line",ya(u,"className"))}))}},{key:"renderTicks",value:function(n,s,i){var o=this,l=this.props,c=l.tickLine,d=l.stroke,u=l.tick,m=l.tickFormatter,p=l.unit,g=gN(Qr(Qr({},this.props),{},{ticks:n}),s,i),x=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),v=Qe(this.props,!1),b=Qe(u,!1),y=Qr(Qr({},v),{},{fill:"none"},Qe(c,!1)),j=g.map(function(_,w){var k=o.getTickLineCoord(_),N=k.line,P=k.tick,A=Qr(Qr(Qr(Qr({textAnchor:x,verticalAnchor:h},v),{},{stroke:"none",fill:d},b),P),{},{index:w,payload:_,visibleTicksCount:g.length,tickFormatter:m});return le.createElement(ft,Lc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},Ao(o.props,_,w)),c&&le.createElement("line",Lc({},y,N,{className:wt("recharts-cartesian-axis-tick-line",ya(c,"className"))})),u&&t.renderTickItem(u,A,"".concat(at(m)?m(_.value,w):_.value).concat(p||"")))});return le.createElement("g",{className:"recharts-cartesian-axis-ticks"},j)}},{key:"render",value:function(){var n=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,c=s.ticksGenerator,d=s.className,u=s.hide;if(u)return null;var m=this.props,p=m.ticks,g=qb(m,_fe),x=p;return at(c)&&(x=p&&p.length>0?c(this.props):c(g)),o<=0||l<=0||!x||!x.length?null:le.createElement(ft,{className:wt("recharts-cartesian-axis",d),ref:function(v){n.layerReference=v}},i&&this.renderAxisLine(),this.renderTicks(x,this.state.fontSize,this.state.letterSpacing),ga.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,s,i){var o,l=wt(s.className,"recharts-cartesian-axis-tick-value");return le.isValidElement(n)?o=le.cloneElement(n,Qr(Qr({},s),{},{className:l})):at(n)?o=n(Qr(Qr({},s),{},{className:l})):o=le.createElement(Il,Lc({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(f.Component);xN(pu,"displayName","CartesianAxis");xN(pu,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Ofe=["x1","y1","x2","y2","key"],Mfe=["offset"];function Rl(e){"@babel/helpers - typeof";return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rl(e)}function V4(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Ia(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?V4(Object(a),!0).forEach(function(n){Dfe(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V4(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Dfe(e,t,a){return t=Ife(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ife(e){var t=Lfe(e,"string");return Rl(t)=="symbol"?t:t+""}function Lfe(e,t){if(Rl(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Rl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fl(){return fl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},fl.apply(this,arguments)}function G4(e,t){if(e==null)return{};var a=$fe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function $fe(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}var Rfe=function(t){var a=t.fill;if(!a||a==="none")return null;var n=t.fillOpacity,s=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return le.createElement("rect",{x:s,y:i,ry:c,width:o,height:l,stroke:"none",fill:a,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function fL(e,t){var a;if(le.isValidElement(e))a=le.cloneElement(e,t);else if(at(e))a=e(t);else{var n=t.x1,s=t.y1,i=t.x2,o=t.y2,l=t.key,c=G4(t,Ofe),d=Qe(c,!1);d.offset;var u=G4(d,Mfe);a=le.createElement("line",fl({},u,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:l}))}return a}function qfe(e){var t=e.x,a=e.width,n=e.horizontal,s=n===void 0?!0:n,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var d=Ia(Ia({},e),{},{x1:t,y1:l,x2:t+a,y2:l,key:"line-".concat(c),index:c});return fL(s,d)});return le.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function Ffe(e){var t=e.y,a=e.height,n=e.vertical,s=n===void 0?!0:n,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var d=Ia(Ia({},e),{},{x1:l,y1:t,x2:l,y2:t+a,key:"line-".concat(c),index:c});return fL(s,d)});return le.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function zfe(e){var t=e.horizontalFill,a=e.fillOpacity,n=e.x,s=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,d=c===void 0?!0:c;if(!d||!t||!t.length)return null;var u=l.map(function(p){return Math.round(p+s-s)}).sort(function(p,g){return p-g});s!==u[0]&&u.unshift(0);var m=u.map(function(p,g){var x=!u[g+1],h=x?s+o-p:u[g+1]-p;if(h<=0)return null;var v=g%t.length;return le.createElement("rect",{key:"react-".concat(g),y:p,x:n,height:h,width:i,stroke:"none",fill:t[v],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return le.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function Bfe(e){var t=e.vertical,a=t===void 0?!0:t,n=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,d=e.verticalPoints;if(!a||!n||!n.length)return null;var u=d.map(function(p){return Math.round(p+i-i)}).sort(function(p,g){return p-g});i!==u[0]&&u.unshift(0);var m=u.map(function(p,g){var x=!u[g+1],h=x?i+l-p:u[g+1]-p;if(h<=0)return null;var v=g%n.length;return le.createElement("rect",{key:"react-".concat(g),x:p,y:o,width:h,height:c,stroke:"none",fill:n[v],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return le.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var Wfe=function(t,a){var n=t.xAxis,s=t.width,i=t.height,o=t.offset;return lI(gN(Ia(Ia(Ia({},pu.defaultProps),n),{},{ticks:fi(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,a)},Ufe=function(t,a){var n=t.yAxis,s=t.width,i=t.height,o=t.offset;return lI(gN(Ia(Ia(Ia({},pu.defaultProps),n),{},{ticks:fi(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,a)},hc={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function jt(e){var t,a,n,s,i,o,l=mN(),c=pN(),d=Tpe(),u=Ia(Ia({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:hc.stroke,fill:(a=e.fill)!==null&&a!==void 0?a:hc.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:hc.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:hc.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:hc.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:hc.verticalFill,x:He(e.x)?e.x:d.left,y:He(e.y)?e.y:d.top,width:He(e.width)?e.width:d.width,height:He(e.height)?e.height:d.height}),m=u.x,p=u.y,g=u.width,x=u.height,h=u.syncWithTicks,v=u.horizontalValues,b=u.verticalValues,y=Ppe(),j=Cpe();if(!He(g)||g<=0||!He(x)||x<=0||!He(m)||m!==+m||!He(p)||p!==+p)return null;var _=u.verticalCoordinatesGenerator||Wfe,w=u.horizontalCoordinatesGenerator||Ufe,k=u.horizontalPoints,N=u.verticalPoints;if((!k||!k.length)&&at(w)){var P=v&&v.length,A=w({yAxis:j?Ia(Ia({},j),{},{ticks:P?v:j.ticks}):void 0,width:l,height:c,offset:d},P?!0:h);Kn(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Rl(A),"]")),Array.isArray(A)&&(k=A)}if((!N||!N.length)&&at(_)){var M=b&&b.length,R=_({xAxis:y?Ia(Ia({},y),{},{ticks:M?b:y.ticks}):void 0,width:l,height:c,offset:d},M?!0:h);Kn(Array.isArray(R),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Rl(R),"]")),Array.isArray(R)&&(N=R)}return le.createElement("g",{className:"recharts-cartesian-grid"},le.createElement(Rfe,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),le.createElement(qfe,fl({},u,{offset:d,horizontalPoints:k,xAxis:y,yAxis:j})),le.createElement(Ffe,fl({},u,{offset:d,verticalPoints:N,xAxis:y,yAxis:j})),le.createElement(zfe,fl({},u,{horizontalPoints:k})),le.createElement(Bfe,fl({},u,{verticalPoints:N})))}jt.displayName="CartesianGrid";var Hfe=["type","layout","connectNulls","ref"],Kfe=["key"];function Od(e){"@babel/helpers - typeof";return Od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Od(e)}function Y4(e,t){if(e==null)return{};var a=Vfe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Vfe(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function zm(){return zm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},zm.apply(this,arguments)}function Z4(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function vn(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Z4(Object(a),!0).forEach(function(n){xs(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z4(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function gc(e){return Xfe(e)||Zfe(e)||Yfe(e)||Gfe()}function Gfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yfe(e,t){if(e){if(typeof e=="string")return L_(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return L_(e,t)}}function Zfe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Xfe(e){if(Array.isArray(e))return L_(e)}function L_(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Qfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X4(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gL(n.key),n)}}function Jfe(e,t,a){return t&&X4(e.prototype,t),a&&X4(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function ehe(e,t,a){return t=Vx(t),the(e,hL()?Reflect.construct(t,a||[],Vx(e).constructor):t.apply(e,a))}function the(e,t){if(t&&(Od(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rhe(e)}function rhe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hL=function(){return!!e})()}function Vx(e){return Vx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Vx(e)}function ahe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$_(e,t)}function $_(e,t){return $_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},$_(e,t)}function xs(e,t,a){return t=gL(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function gL(e){var t=nhe(e,"string");return Od(t)=="symbol"?t:t+""}function nhe(e,t){if(Od(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Od(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Kt=function(e){function t(){var a;Qfe(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=ehe(this,t,[].concat(s)),xs(a,"state",{isAnimationFinished:!0,totalLength:0}),xs(a,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),xs(a,"getStrokeDasharray",function(o,l,c){var d=c.reduce(function(b,y){return b+y});if(!d)return a.generateSimpleStrokeDasharray(l,o);for(var u=Math.floor(o/d),m=o%d,p=l-o,g=[],x=0,h=0;x<c.length;h+=c[x],++x)if(h+c[x]>m){g=[].concat(gc(c.slice(0,x)),[m-h]);break}var v=g.length%2===0?[0,p]:[p];return[].concat(gc(t.repeat(c,u)),gc(g),v).map(function(b){return"".concat(b,"px")}).join(", ")}),xs(a,"id",Di("recharts-line-")),xs(a,"pathRef",function(o){a.mainCurve=o}),xs(a,"handleAnimationEnd",function(){a.setState({isAnimationFinished:!0}),a.props.onAnimationEnd&&a.props.onAnimationEnd()}),xs(a,"handleAnimationStart",function(){a.setState({isAnimationFinished:!1}),a.props.onAnimationStart&&a.props.onAnimationStart()}),a}return ahe(t,e),Jfe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,m=Ja(u,mu);if(!m)return null;var p=function(h,v){return{x:h.x,y:h.y,value:h.value,errorVal:Lt(h.payload,v)}},g={clipPath:n?"url(#clipPath-".concat(s,")"):null};return le.createElement(ft,g,m.map(function(x){return le.cloneElement(x,{key:"bar-".concat(x.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,dataPointFormatter:p})}))}},{key:"renderDots",value:function(n,s,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,u=l.dataKey,m=Qe(this.props,!1),p=Qe(c,!0),g=d.map(function(h,v){var b=vn(vn(vn({key:"dot-".concat(v),r:3},m),p),{},{index:v,cx:h.x,cy:h.y,value:h.value,dataKey:u,payload:h.payload,points:d});return t.renderDotItem(c,b)}),x={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return le.createElement(ft,zm({className:"recharts-line-dots",key:"dots"},x),g)}},{key:"renderCurveStatically",value:function(n,s,i,o){var l=this.props,c=l.type,d=l.layout,u=l.connectNulls;l.ref;var m=Y4(l,Hfe),p=vn(vn(vn({},Qe(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(i,")"):null,points:n},o),{},{type:c,layout:d,connectNulls:u});return le.createElement(_o,zm({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,s){var i=this,o=this.props,l=o.points,c=o.strokeDasharray,d=o.isAnimationActive,u=o.animationBegin,m=o.animationDuration,p=o.animationEasing,g=o.animationId,x=o.animateNewValues,h=o.width,v=o.height,b=this.state,y=b.prevPoints,j=b.totalLength;return le.createElement(gn,{begin:u,duration:m,isActive:d,easing:p,from:{t:0},to:{t:1},key:"line-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var w=_.t;if(y){var k=y.length/l.length,N=l.map(function(O,q){var S=Math.floor(q*k);if(y[S]){var I=y[S],E=wr(I.x,O.x),W=wr(I.y,O.y);return vn(vn({},O),{},{x:E(w),y:W(w)})}if(x){var B=wr(h*2,O.x),C=wr(v/2,O.y);return vn(vn({},O),{},{x:B(w),y:C(w)})}return vn(vn({},O),{},{x:O.x,y:O.y})});return i.renderCurveStatically(N,n,s)}var P=wr(0,j),A=P(w),M;if(c){var R="".concat(c).split(/[,\s]+/gim).map(function(O){return parseFloat(O)});M=i.getStrokeDasharray(A,j,R)}else M=i.generateSimpleStrokeDasharray(j,A);return i.renderCurveStatically(l,n,s,{strokeDasharray:M})})}},{key:"renderCurve",value:function(n,s){var i=this.props,o=i.points,l=i.isAnimationActive,c=this.state,d=c.prevPoints,u=c.totalLength;return l&&o&&o.length&&(!d&&u>0||!Po(d,o))?this.renderCurveWithAnimation(n,s):this.renderCurveStatically(o,n,s)}},{key:"render",value:function(){var n,s=this.props,i=s.hide,o=s.dot,l=s.points,c=s.className,d=s.xAxis,u=s.yAxis,m=s.top,p=s.left,g=s.width,x=s.height,h=s.isAnimationActive,v=s.id;if(i||!l||!l.length)return null;var b=this.state.isAnimationFinished,y=l.length===1,j=wt("recharts-line",c),_=d&&d.allowDataOverflow,w=u&&u.allowDataOverflow,k=_||w,N=dt(v)?this.id:v,P=(n=Qe(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},A=P.r,M=A===void 0?3:A,R=P.strokeWidth,O=R===void 0?2:R,q=Z5(o)?o:{},S=q.clipDot,I=S===void 0?!0:S,E=M*2+O;return le.createElement(ft,{className:j},_||w?le.createElement("defs",null,le.createElement("clipPath",{id:"clipPath-".concat(N)},le.createElement("rect",{x:_?p:p-g/2,y:w?m:m-x/2,width:_?g:g*2,height:w?x:x*2})),!I&&le.createElement("clipPath",{id:"clipPath-dots-".concat(N)},le.createElement("rect",{x:p-E/2,y:m-E/2,width:g+E,height:x+E}))):null,!y&&this.renderCurve(k,N),this.renderErrorBar(k,N),(y||o)&&this.renderDots(k,I,N),(!h||b)&&Ht.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:s.curPoints}:n.points!==s.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,s){for(var i=n.length%2!==0?[].concat(gc(n),[0]):n,o=[],l=0;l<s;++l)o=[].concat(gc(o),gc(i));return o}},{key:"renderDotItem",value:function(n,s){var i;if(le.isValidElement(n))i=le.cloneElement(n,s);else if(at(n))i=n(s);else{var o=s.key,l=Y4(s,Kfe),c=wt("recharts-line-dot",typeof n!="boolean"?n.className:"");i=le.createElement(xf,zm({key:o},l,{className:c}))}return i}}])}(f.PureComponent);xs(Kt,"displayName","Line");xs(Kt,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Ss.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});xs(Kt,"getComposedData",function(e){var t=e.props,a=e.xAxis,n=e.yAxis,s=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,d=e.offset,u=t.layout,m=c.map(function(p,g){var x=Lt(p,o);return u==="horizontal"?{x:bd({axis:a,ticks:s,bandSize:l,entry:p,index:g}),y:dt(x)?null:n.scale(x),value:x,payload:p}:{x:dt(x)?null:a.scale(x),y:bd({axis:n,ticks:i,bandSize:l,entry:p,index:g}),value:x,payload:p}});return vn({points:m,layout:u},d)});var she=["layout","type","stroke","connectNulls","isRange","ref"],ihe=["key"],xL;function Md(e){"@babel/helpers - typeof";return Md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Md(e)}function yL(e,t){if(e==null)return{};var a=ohe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ohe(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function hl(){return hl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},hl.apply(this,arguments)}function Q4(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Gi(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Q4(Object(a),!0).forEach(function(n){Us(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q4(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function lhe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J4(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bL(n.key),n)}}function che(e,t,a){return t&&J4(e.prototype,t),a&&J4(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function dhe(e,t,a){return t=Gx(t),uhe(e,vL()?Reflect.construct(t,a||[],Gx(e).constructor):t.apply(e,a))}function uhe(e,t){if(t&&(Md(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mhe(e)}function mhe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vL=function(){return!!e})()}function Gx(e){return Gx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Gx(e)}function phe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R_(e,t)}function R_(e,t){return R_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},R_(e,t)}function Us(e,t,a){return t=bL(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function bL(e){var t=fhe(e,"string");return Md(t)=="symbol"?t:t+""}function fhe(e,t){if(Md(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Md(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var es=function(e){function t(){var a;lhe(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=dhe(this,t,[].concat(s)),Us(a,"state",{isAnimationFinished:!0}),Us(a,"id",Di("recharts-area-")),Us(a,"handleAnimationEnd",function(){var o=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),at(o)&&o()}),Us(a,"handleAnimationStart",function(){var o=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),at(o)&&o()}),a}return phe(t,e),che(t,[{key:"renderDots",value:function(n,s,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,d=c.dot,u=c.points,m=c.dataKey,p=Qe(this.props,!1),g=Qe(d,!0),x=u.map(function(v,b){var y=Gi(Gi(Gi({key:"dot-".concat(b),r:3},p),g),{},{index:b,cx:v.x,cy:v.y,dataKey:m,value:v.value,payload:v.payload,points:u});return t.renderDotItem(d,y)}),h={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return le.createElement(ft,hl({className:"recharts-area-dots"},h),x)}},{key:"renderHorizontalRect",value:function(n){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].x,d=o[o.length-1].x,u=n*Math.abs(c-d),m=io(o.map(function(p){return p.y||0}));return He(i)&&typeof i=="number"?m=Math.max(i,m):i&&Array.isArray(i)&&i.length&&(m=Math.max(io(i.map(function(p){return p.y||0})),m)),He(m)?le.createElement("rect",{x:c<d?c:c-u,y:0,width:u,height:Math.floor(m+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].y,d=o[o.length-1].y,u=n*Math.abs(c-d),m=io(o.map(function(p){return p.x||0}));return He(i)&&typeof i=="number"?m=Math.max(i,m):i&&Array.isArray(i)&&i.length&&(m=Math.max(io(i.map(function(p){return p.x||0})),m)),He(m)?le.createElement("rect",{x:0,y:c<d?c:c-u,width:m+(l?parseInt("".concat(l),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(n){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,s,i,o){var l=this.props,c=l.layout,d=l.type,u=l.stroke,m=l.connectNulls,p=l.isRange;l.ref;var g=yL(l,she);return le.createElement(ft,{clipPath:i?"url(#clipPath-".concat(o,")"):null},le.createElement(_o,hl({},Qe(g,!0),{points:n,connectNulls:m,type:d,baseLine:s,layout:c,stroke:"none",className:"recharts-area-area"})),u!=="none"&&le.createElement(_o,hl({},Qe(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:m,fill:"none",points:n})),u!=="none"&&p&&le.createElement(_o,hl({},Qe(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:m,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(n,s){var i=this,o=this.props,l=o.points,c=o.baseLine,d=o.isAnimationActive,u=o.animationBegin,m=o.animationDuration,p=o.animationEasing,g=o.animationId,x=this.state,h=x.prevPoints,v=x.prevBaseLine;return le.createElement(gn,{begin:u,duration:m,isActive:d,easing:p,from:{t:0},to:{t:1},key:"area-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var y=b.t;if(h){var j=h.length/l.length,_=l.map(function(P,A){var M=Math.floor(A*j);if(h[M]){var R=h[M],O=wr(R.x,P.x),q=wr(R.y,P.y);return Gi(Gi({},P),{},{x:O(y),y:q(y)})}return P}),w;if(He(c)&&typeof c=="number"){var k=wr(v,c);w=k(y)}else if(dt(c)||$o(c)){var N=wr(v,0);w=N(y)}else w=c.map(function(P,A){var M=Math.floor(A*j);if(v[M]){var R=v[M],O=wr(R.x,P.x),q=wr(R.y,P.y);return Gi(Gi({},P),{},{x:O(y),y:q(y)})}return P});return i.renderAreaStatically(_,w,n,s)}return le.createElement(ft,null,le.createElement("defs",null,le.createElement("clipPath",{id:"animationClipPath-".concat(s)},i.renderClipRect(y))),le.createElement(ft,{clipPath:"url(#animationClipPath-".concat(s,")")},i.renderAreaStatically(l,c,n,s)))})}},{key:"renderArea",value:function(n,s){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,d=this.state,u=d.prevPoints,m=d.prevBaseLine,p=d.totalLength;return c&&o&&o.length&&(!u&&p>0||!Po(u,o)||!Po(m,l))?this.renderAreaWithAnimation(n,s):this.renderAreaStatically(o,l,n,s)}},{key:"render",value:function(){var n,s=this.props,i=s.hide,o=s.dot,l=s.points,c=s.className,d=s.top,u=s.left,m=s.xAxis,p=s.yAxis,g=s.width,x=s.height,h=s.isAnimationActive,v=s.id;if(i||!l||!l.length)return null;var b=this.state.isAnimationFinished,y=l.length===1,j=wt("recharts-area",c),_=m&&m.allowDataOverflow,w=p&&p.allowDataOverflow,k=_||w,N=dt(v)?this.id:v,P=(n=Qe(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},A=P.r,M=A===void 0?3:A,R=P.strokeWidth,O=R===void 0?2:R,q=Z5(o)?o:{},S=q.clipDot,I=S===void 0?!0:S,E=M*2+O;return le.createElement(ft,{className:j},_||w?le.createElement("defs",null,le.createElement("clipPath",{id:"clipPath-".concat(N)},le.createElement("rect",{x:_?u:u-g/2,y:w?d:d-x/2,width:_?g:g*2,height:w?x:x*2})),!I&&le.createElement("clipPath",{id:"clipPath-dots-".concat(N)},le.createElement("rect",{x:u-E/2,y:d-E/2,width:g+E,height:x+E}))):null,y?null:this.renderArea(k,N),(o||y)&&this.renderDots(k,I,N),(!h||b)&&Ht.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:n.points!==s.curPoints||n.baseLine!==s.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(f.PureComponent);xL=es;Us(es,"displayName","Area");Us(es,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ss.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Us(es,"getBaseValue",function(e,t,a,n){var s=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(He(l)&&typeof l=="number")return l;var c=s==="horizontal"?n:a,d=c.scale.domain();if(c.type==="number"){var u=Math.max(d[0],d[1]),m=Math.min(d[0],d[1]);return l==="dataMin"?m:l==="dataMax"||u<0?u:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});Us(es,"getComposedData",function(e){var t=e.props,a=e.item,n=e.xAxis,s=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,d=e.stackedData,u=e.dataStartIndex,m=e.displayedData,p=e.offset,g=t.layout,x=d&&d.length,h=xL.getBaseValue(t,a,n,s),v=g==="horizontal",b=!1,y=m.map(function(_,w){var k;x?k=d[u+w]:(k=Lt(_,c),Array.isArray(k)?b=!0:k=[h,k]);var N=k[1]==null||x&&Lt(_,c)==null;return v?{x:bd({axis:n,ticks:i,bandSize:l,entry:_,index:w}),y:N?null:s.scale(k[1]),value:k,payload:_}:{x:N?null:n.scale(k[1]),y:bd({axis:s,ticks:o,bandSize:l,entry:_,index:w}),value:k,payload:_}}),j;return x||b?j=y.map(function(_){var w=Array.isArray(_.value)?_.value[0]:null;return v?{x:_.x,y:w!=null&&_.y!=null?s.scale(w):null}:{x:w!=null?n.scale(w):null,y:_.y}}):j=v?s.scale(h):n.scale(h),Gi({points:y,baseLine:j,layout:g,isRange:b},p)});Us(es,"renderDotItem",function(e,t){var a;if(le.isValidElement(e))a=le.cloneElement(e,t);else if(at(e))a=e(t);else{var n=wt("recharts-area-dot",typeof e!="boolean"?e.className:""),s=t.key,i=yL(t,ihe);a=le.createElement(xf,hl({},i,{key:s,className:n}))}return a});function Dd(e){"@babel/helpers - typeof";return Dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dd(e)}function hhe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ghe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_L(n.key),n)}}function xhe(e,t,a){return t&&ghe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yhe(e,t,a){return t=Yx(t),vhe(e,jL()?Reflect.construct(t,a||[],Yx(e).constructor):t.apply(e,a))}function vhe(e,t){if(t&&(Dd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bhe(e)}function bhe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jL=function(){return!!e})()}function Yx(e){return Yx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Yx(e)}function jhe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q_(e,t)}function q_(e,t){return q_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},q_(e,t)}function wL(e,t,a){return t=_L(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _L(e){var t=whe(e,"string");return Dd(t)=="symbol"?t:t+""}function whe(e,t){if(Dd(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Dd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Gl=function(e){function t(){return hhe(this,t),yhe(this,t,arguments)}return jhe(t,e),xhe(t,[{key:"render",value:function(){return null}}])}(f.Component);wL(Gl,"displayName","ZAxis");wL(Gl,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var _he=["option","isActive"];function Bm(){return Bm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Bm.apply(this,arguments)}function khe(e,t){if(e==null)return{};var a=Nhe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Nhe(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function She(e){var t=e.option,a=e.isActive,n=khe(e,_he);return typeof t=="string"?f.createElement(Ix,Bm({option:f.createElement(dv,Bm({type:t},n)),isActive:a,shapeType:"symbols"},n)):f.createElement(Ix,Bm({option:t,isActive:a,shapeType:"symbols"},n))}function Id(e){"@babel/helpers - typeof";return Id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Id(e)}function Wm(){return Wm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Wm.apply(this,arguments)}function eE(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Rn(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?eE(Object(a),!0).forEach(function(n){lo(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):eE(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Ahe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tE(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,NL(n.key),n)}}function Phe(e,t,a){return t&&tE(e.prototype,t),a&&tE(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function Che(e,t,a){return t=Zx(t),Ehe(e,kL()?Reflect.construct(t,a||[],Zx(e).constructor):t.apply(e,a))}function Ehe(e,t){if(t&&(Id(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return The(e)}function The(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kL=function(){return!!e})()}function Zx(e){return Zx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Zx(e)}function Ohe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F_(e,t)}function F_(e,t){return F_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},F_(e,t)}function lo(e,t,a){return t=NL(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function NL(e){var t=Mhe(e,"string");return Id(t)=="symbol"?t:t+""}function Mhe(e,t){if(Id(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Id(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Yl=function(e){function t(){var a;Ahe(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=Che(this,t,[].concat(s)),lo(a,"state",{isAnimationFinished:!1}),lo(a,"handleAnimationEnd",function(){a.setState({isAnimationFinished:!0})}),lo(a,"handleAnimationStart",function(){a.setState({isAnimationFinished:!1})}),lo(a,"id",Di("recharts-scatter-")),a}return Ohe(t,e),Phe(t,[{key:"renderSymbolsStatically",value:function(n){var s=this,i=this.props,o=i.shape,l=i.activeShape,c=i.activeIndex,d=Qe(this.props,!1);return n.map(function(u,m){var p=c===m,g=p?l:o,x=Rn(Rn({},d),u);return le.createElement(ft,Wm({className:"recharts-scatter-symbol",key:"symbol-".concat(u?.cx,"-").concat(u?.cy,"-").concat(u?.size,"-").concat(m)},Ao(s.props,u,m),{role:"img"}),le.createElement(She,Wm({option:g,isActive:p,key:"symbol-".concat(m)},x)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,s=this.props,i=s.points,o=s.isAnimationActive,l=s.animationBegin,c=s.animationDuration,d=s.animationEasing,u=s.animationId,m=this.state.prevPoints;return le.createElement(gn,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var g=p.t,x=i.map(function(h,v){var b=m&&m[v];if(b){var y=wr(b.cx,h.cx),j=wr(b.cy,h.cy),_=wr(b.size,h.size);return Rn(Rn({},h),{},{cx:y(g),cy:j(g),size:_(g)})}var w=wr(0,h.size);return Rn(Rn({},h),{},{size:w(g)})});return le.createElement(ft,null,n.renderSymbolsStatically(x))})}},{key:"renderSymbols",value:function(){var n=this.props,s=n.points,i=n.isAnimationActive,o=this.state.prevPoints;return i&&s&&s.length&&(!o||!Po(o,s))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(s)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var s=this.props,i=s.points,o=s.xAxis,l=s.yAxis,c=s.children,d=Ja(c,mu);return d?d.map(function(u,m){var p=u.props,g=p.direction,x=p.dataKey;return le.cloneElement(u,{key:"".concat(g,"-").concat(x,"-").concat(i[m]),data:i,xAxis:o,yAxis:l,layout:g==="x"?"vertical":"horizontal",dataPointFormatter:function(v,b){return{x:v.cx,y:v.cy,value:g==="x"?+v.node.x:+v.node.y,errorVal:Lt(v,b)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,s=n.points,i=n.line,o=n.lineType,l=n.lineJointType,c=Qe(this.props,!1),d=Qe(i,!1),u,m;if(o==="joint")u=s.map(function(j){return{x:j.cx,y:j.cy}});else if(o==="fitting"){var p=MH(s),g=p.xmin,x=p.xmax,h=p.a,v=p.b,b=function(_){return h*_+v};u=[{x:g,y:b(g)},{x,y:b(x)}]}var y=Rn(Rn(Rn({},c),{},{fill:"none",stroke:c&&c.fill},d),{},{points:u});return le.isValidElement(i)?m=le.cloneElement(i,y):at(i)?m=i(y):m=le.createElement(_o,Wm({},y,{type:l})),le.createElement(ft,{className:"recharts-scatter-line",key:"recharts-scatter-line"},m)}},{key:"render",value:function(){var n=this.props,s=n.hide,i=n.points,o=n.line,l=n.className,c=n.xAxis,d=n.yAxis,u=n.left,m=n.top,p=n.width,g=n.height,x=n.id,h=n.isAnimationActive;if(s||!i||!i.length)return null;var v=this.state.isAnimationFinished,b=wt("recharts-scatter",l),y=c&&c.allowDataOverflow,j=d&&d.allowDataOverflow,_=y||j,w=dt(x)?this.id:x;return le.createElement(ft,{className:b,clipPath:_?"url(#clipPath-".concat(w,")"):null},y||j?le.createElement("defs",null,le.createElement("clipPath",{id:"clipPath-".concat(w)},le.createElement("rect",{x:y?u:u-p/2,y:j?m:m-g/2,width:y?p:p*2,height:j?g:g*2}))):null,o&&this.renderLine(),this.renderErrorBar(),le.createElement(ft,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!h||v)&&Ht.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:s.curPoints}:n.points!==s.curPoints?{curPoints:n.points}:null}}])}(f.PureComponent);lo(Yl,"displayName","Scatter");lo(Yl,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Ss.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});lo(Yl,"getComposedData",function(e){var t=e.xAxis,a=e.yAxis,n=e.zAxis,s=e.item,i=e.displayedData,o=e.xAxisTicks,l=e.yAxisTicks,c=e.offset,d=s.props.tooltipType,u=Ja(s.props.children,Vn),m=dt(t.dataKey)?s.props.dataKey:t.dataKey,p=dt(a.dataKey)?s.props.dataKey:a.dataKey,g=n&&n.dataKey,x=n?n.range:Gl.defaultProps.range,h=x&&x[0],v=t.scale.bandwidth?t.scale.bandwidth():0,b=a.scale.bandwidth?a.scale.bandwidth():0,y=i.map(function(j,_){var w=Lt(j,m),k=Lt(j,p),N=!dt(g)&&Lt(j,g)||"-",P=[{name:dt(t.dataKey)?s.props.name:t.name||t.dataKey,unit:t.unit||"",value:w,payload:j,dataKey:m,type:d},{name:dt(a.dataKey)?s.props.name:a.name||a.dataKey,unit:a.unit||"",value:k,payload:j,dataKey:p,type:d}];N!=="-"&&P.push({name:n.name||n.dataKey,unit:n.unit||"",value:N,payload:j,dataKey:g,type:d});var A=bd({axis:t,ticks:o,bandSize:v,entry:j,index:_,dataKey:m}),M=bd({axis:a,ticks:l,bandSize:b,entry:j,index:_,dataKey:p}),R=N!=="-"?n.scale(N):h,O=Math.sqrt(Math.max(R,0)/Math.PI);return Rn(Rn({},j),{},{cx:A,cy:M,x:A-O,y:M-O,xAxis:t,yAxis:a,zAxis:n,width:2*O,height:2*O,size:R,node:{x:w,y:k,z:N},tooltipPayload:P,tooltipPosition:{x:A,y:M},payload:j},u&&u[_]&&u[_].props)});return Rn({points:y},c)});function Ld(e){"@babel/helpers - typeof";return Ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ld(e)}function Dhe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ihe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PL(n.key),n)}}function Lhe(e,t,a){return t&&Ihe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $he(e,t,a){return t=Xx(t),Rhe(e,SL()?Reflect.construct(t,a||[],Xx(e).constructor):t.apply(e,a))}function Rhe(e,t){if(t&&(Ld(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qhe(e)}function qhe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SL=function(){return!!e})()}function Xx(e){return Xx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Xx(e)}function Fhe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z_(e,t)}function z_(e,t){return z_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},z_(e,t)}function AL(e,t,a){return t=PL(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function PL(e){var t=zhe(e,"string");return Ld(t)=="symbol"?t:t+""}function zhe(e,t){if(Ld(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Ld(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function B_(){return B_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},B_.apply(this,arguments)}function Bhe(e){var t=e.xAxisId,a=mN(),n=pN(),s=aL(t);return s==null?null:f.createElement(pu,B_({},s,{className:wt("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:a,height:n},ticksGenerator:function(o){return fi(o,!0)}}))}var ct=function(e){function t(){return Dhe(this,t),$he(this,t,arguments)}return Fhe(t,e),Lhe(t,[{key:"render",value:function(){return f.createElement(Bhe,this.props)}}])}(f.Component);AL(ct,"displayName","XAxis");AL(ct,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function $d(e){"@babel/helpers - typeof";return $d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$d(e)}function Whe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Uhe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TL(n.key),n)}}function Hhe(e,t,a){return t&&Uhe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Khe(e,t,a){return t=Qx(t),Vhe(e,CL()?Reflect.construct(t,a||[],Qx(e).constructor):t.apply(e,a))}function Vhe(e,t){if(t&&($d(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ghe(e)}function Ghe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CL=function(){return!!e})()}function Qx(e){return Qx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Qx(e)}function Yhe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W_(e,t)}function W_(e,t){return W_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},W_(e,t)}function EL(e,t,a){return t=TL(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function TL(e){var t=Zhe(e,"string");return $d(t)=="symbol"?t:t+""}function Zhe(e,t){if($d(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if($d(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function U_(){return U_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},U_.apply(this,arguments)}var Xhe=function(t){var a=t.yAxisId,n=mN(),s=pN(),i=nL(a);return i==null?null:f.createElement(pu,U_({},i,{className:wt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(l){return fi(l,!0)}}))},rt=function(e){function t(){return Whe(this,t),Khe(this,t,arguments)}return Yhe(t,e),Hhe(t,[{key:"render",value:function(){return f.createElement(Xhe,this.props)}}])}(f.Component);EL(rt,"displayName","YAxis");EL(rt,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function rE(e){return tge(e)||ege(e)||Jhe(e)||Qhe()}function Qhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jhe(e,t){if(e){if(typeof e=="string")return H_(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return H_(e,t)}}function ege(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tge(e){if(Array.isArray(e))return H_(e)}function H_(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var K_=function(t,a,n,s,i){var o=Ja(t,hN),l=Ja(t,Ov),c=[].concat(rE(o),rE(l)),d=Ja(t,Dv),u="".concat(s,"Id"),m=s[0],p=a;if(c.length&&(p=c.reduce(function(h,v){if(v.props[u]===n&&Gs(v.props,"extendDomain")&&He(v.props[m])){var b=v.props[m];return[Math.min(h[0],b),Math.max(h[1],b)]}return h},p)),d.length){var g="".concat(m,"1"),x="".concat(m,"2");p=d.reduce(function(h,v){if(v.props[u]===n&&Gs(v.props,"extendDomain")&&He(v.props[g])&&He(v.props[x])){var b=v.props[g],y=v.props[x];return[Math.min(h[0],b,y),Math.max(h[1],b,y)]}return h},p)}return i&&i.length&&(p=i.reduce(function(h,v){return He(v)?[Math.min(h[0],v),Math.max(h[1],v)]:h},p)),p},OL={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,a="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(a=!1));function s(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,m,p){if(typeof u!="function")throw new TypeError("The listener must be a function");var g=new s(u,m||c,p),x=a?a+d:d;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],g]:c._events[x].push(g):(c._events[x]=g,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,m;if(this._eventsCount===0)return d;for(m in u=this._events)t.call(u,m)&&d.push(a?m.slice(1):m);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=a?a+d:d,m=this._events[u];if(!m)return[];if(m.fn)return[m.fn];for(var p=0,g=m.length,x=new Array(g);p<g;p++)x[p]=m[p].fn;return x},l.prototype.listenerCount=function(d){var u=a?a+d:d,m=this._events[u];return m?m.fn?1:m.length:0},l.prototype.emit=function(d,u,m,p,g,x){var h=a?a+d:d;if(!this._events[h])return!1;var v=this._events[h],b=arguments.length,y,j;if(v.fn){switch(v.once&&this.removeListener(d,v.fn,void 0,!0),b){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,m),!0;case 4:return v.fn.call(v.context,u,m,p),!0;case 5:return v.fn.call(v.context,u,m,p,g),!0;case 6:return v.fn.call(v.context,u,m,p,g,x),!0}for(j=1,y=new Array(b-1);j<b;j++)y[j-1]=arguments[j];v.fn.apply(v.context,y)}else{var _=v.length,w;for(j=0;j<_;j++)switch(v[j].once&&this.removeListener(d,v[j].fn,void 0,!0),b){case 1:v[j].fn.call(v[j].context);break;case 2:v[j].fn.call(v[j].context,u);break;case 3:v[j].fn.call(v[j].context,u,m);break;case 4:v[j].fn.call(v[j].context,u,m,p);break;default:if(!y)for(w=1,y=new Array(b-1);w<b;w++)y[w-1]=arguments[w];v[j].fn.apply(v[j].context,y)}}return!0},l.prototype.on=function(d,u,m){return i(this,d,u,m,!1)},l.prototype.once=function(d,u,m){return i(this,d,u,m,!0)},l.prototype.removeListener=function(d,u,m,p){var g=a?a+d:d;if(!this._events[g])return this;if(!u)return o(this,g),this;var x=this._events[g];if(x.fn)x.fn===u&&(!p||x.once)&&(!m||x.context===m)&&o(this,g);else{for(var h=0,v=[],b=x.length;h<b;h++)(x[h].fn!==u||p&&!x[h].once||m&&x[h].context!==m)&&v.push(x[h]);v.length?this._events[g]=v.length===1?v[0]:v:o(this,g)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=a?a+d:d,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=a,l.EventEmitter=l,e.exports=l})(OL);var rge=OL.exports;const age=Dt(rge);var Fb=new age,zb="recharts.syncMouseEvents";function Hp(e){"@babel/helpers - typeof";return Hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hp(e)}function nge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sge(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ML(n.key),n)}}function ige(e,t,a){return t&&sge(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bb(e,t,a){return t=ML(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ML(e){var t=oge(e,"string");return Hp(t)=="symbol"?t:t+""}function oge(e,t){if(Hp(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Hp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var lge=function(){function e(){nge(this,e),Bb(this,"activeIndex",0),Bb(this,"coordinateList",[]),Bb(this,"layout","horizontal")}return ige(e,[{key:"setDetails",value:function(a){var n,s=a.coordinateList,i=s===void 0?null:s,o=a.container,l=o===void 0?null:o,c=a.layout,d=c===void 0?null:c,u=a.offset,m=u===void 0?null:u,p=a.mouseHandlerCallback,g=p===void 0?null:p;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(a){if(this.coordinateList.length!==0)switch(a.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(a){this.activeIndex=a}},{key:"spoofMouse",value:function(){var a,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,c=this.coordinateList[this.activeIndex].coordinate,d=((a=window)===null||a===void 0?void 0:a.scrollX)||0,u=((n=window)===null||n===void 0?void 0:n.scrollY)||0,m=i+c+d,p=o+this.offset.top+l/2+u;this.mouseHandlerCallback({pageX:m,pageY:p})}}}])}();function cge(e,t,a){if(a==="number"&&t===!0&&Array.isArray(e)){var n=e?.[0],s=e?.[1];if(n&&s&&He(n)&&He(s))return!0}return!1}function dge(e,t,a,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:a.left+.5,y:e==="horizontal"?a.top+.5:t.y-s,width:e==="horizontal"?n:a.width-1,height:e==="horizontal"?a.height-1:n}}function DL(e){var t=e.cx,a=e.cy,n=e.radius,s=e.startAngle,i=e.endAngle,o=lr(t,a,n,s),l=lr(t,a,n,i);return{points:[o,l],cx:t,cy:a,radius:n,startAngle:s,endAngle:i}}function uge(e,t,a){var n,s,i,o;if(e==="horizontal")n=t.x,i=n,s=a.top,o=a.top+a.height;else if(e==="vertical")s=t.y,o=s,n=a.left,i=a.left+a.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,d=t.innerRadius,u=t.outerRadius,m=t.angle,p=lr(l,c,d,m),g=lr(l,c,u,m);n=p.x,s=p.y,i=g.x,o=g.y}else return DL(t);return[{x:n,y:s},{x:i,y:o}]}function Kp(e){"@babel/helpers - typeof";return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kp(e)}function aE(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Ch(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?aE(Object(a),!0).forEach(function(n){mge(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):aE(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function mge(e,t,a){return t=pge(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function pge(e){var t=fge(e,"string");return Kp(t)=="symbol"?t:t+""}function fge(e,t){if(Kp(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Kp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hge(e){var t,a,n=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,u=e.tooltipAxisBandSize,m=e.layout,p=e.chartName,g=(t=n.props.cursor)!==null&&t!==void 0?t:(a=n.type.defaultProps)===null||a===void 0?void 0:a.cursor;if(!n||!g||!i||!o||p!=="ScatterChart"&&s!=="axis")return null;var x,h=_o;if(p==="ScatterChart")x=o,h=lde;else if(p==="BarChart")x=dge(m,o,c,u),h=gf;else if(m==="radial"){var v=DL(o),b=v.cx,y=v.cy,j=v.radius,_=v.startAngle,w=v.endAngle;x={cx:b,cy:y,startAngle:_,endAngle:w,innerRadius:j,outerRadius:j},h=bI}else x={points:uge(m,o,c)},h=_o;var k=Ch(Ch(Ch(Ch({stroke:"#ccc",pointerEvents:"none"},c),x),Qe(g,!1)),{},{payload:l,payloadIndex:d,className:wt("recharts-tooltip-cursor",g.className)});return f.isValidElement(g)?f.cloneElement(g,k):f.createElement(h,k)}var gge=["item"],xge=["children","className","width","height","style","compact","title","desc"];function Rd(e){"@babel/helpers - typeof";return Rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rd(e)}function $c(){return $c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},$c.apply(this,arguments)}function nE(e,t){return bge(e)||vge(e,t)||LL(e,t)||yge()}function yge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vge(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(a=a.call(e)).next,t!==0)for(;!(c=(n=i.call(a)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&a.return!=null&&(o=a.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function bge(e){if(Array.isArray(e))return e}function sE(e,t){if(e==null)return{};var a=jge(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function jge(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function wge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _ge(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$L(n.key),n)}}function kge(e,t,a){return t&&_ge(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nge(e,t,a){return t=Jx(t),Sge(e,IL()?Reflect.construct(t,a||[],Jx(e).constructor):t.apply(e,a))}function Sge(e,t){if(t&&(Rd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Age(e)}function Age(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IL=function(){return!!e})()}function Jx(e){return Jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Jx(e)}function Pge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V_(e,t)}function V_(e,t){return V_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},V_(e,t)}function qd(e){return Tge(e)||Ege(e)||LL(e)||Cge()}function Cge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LL(e,t){if(e){if(typeof e=="string")return G_(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return G_(e,t)}}function Ege(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Tge(e){if(Array.isArray(e))return G_(e)}function G_(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function iE(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Oe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?iE(Object(a),!0).forEach(function(n){mt(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):iE(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function mt(e,t,a){return t=$L(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function $L(e){var t=Oge(e,"string");return Rd(t)=="symbol"?t:t+""}function Oge(e,t){if(Rd(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Rd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mge={xAxis:["bottom","top"],yAxis:["left","right"]},Dge={width:"100%",height:"100%"},RL={x:0,y:0};function Eh(e){return e}var Ige=function(t,a){return a==="horizontal"?t.x:a==="vertical"?t.y:a==="centric"?t.angle:t.radius},Lge=function(t,a,n,s){var i=a.find(function(u){return u&&u.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=s.radius;return Oe(Oe(Oe({},s),lr(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,d=s.angle;return Oe(Oe(Oe({},s),lr(s.cx,s.cy,c,d)),{},{angle:d,radius:c})}return RL},Iv=function(t,a){var n=a.graphicalItems,s=a.dataStartIndex,i=a.dataEndIndex,o=(n??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(qd(l),qd(d)):l},[]);return o.length>0?o:t&&t.length&&He(s)&&He(i)?t.slice(s,i+1):[]};function qL(e){return e==="number"?[0,"auto"]:void 0}var Y_=function(t,a,n,s){var i=t.graphicalItems,o=t.tooltipAxis,l=Iv(a,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,d){var u,m=(u=d.props.data)!==null&&u!==void 0?u:a;m&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(m=m.slice(t.dataStartIndex,t.dataEndIndex+1));var p;if(o.dataKey&&!o.allowDuplicatedCategory){var g=m===void 0?l:m;p=Yg(g,o.dataKey,s)}else p=m&&m[n]||l[n];return p?[].concat(qd(c),[pI(d,p)]):c},[])},oE=function(t,a,n,s){var i=s||{x:t.chartX,y:t.chartY},o=Ige(i,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,u=Eie(o,l,d,c);if(u>=0&&d){var m=d[u]&&d[u].value,p=Y_(t,a,u,m),g=Lge(n,l,u,i);return{activeTooltipIndex:u,activeLabel:m,activePayload:p,activeCoordinate:g}}return null},$ge=function(t,a){var n=a.axes,s=a.graphicalItems,i=a.axisType,o=a.axisIdKey,l=a.stackGroups,c=a.dataStartIndex,d=a.dataEndIndex,u=t.layout,m=t.children,p=t.stackOffset,g=oI(u,i);return n.reduce(function(x,h){var v,b=h.type.defaultProps!==void 0?Oe(Oe({},h.type.defaultProps),h.props):h.props,y=b.type,j=b.dataKey,_=b.allowDataOverflow,w=b.allowDuplicatedCategory,k=b.scale,N=b.ticks,P=b.includeHidden,A=b[o];if(x[A])return x;var M=Iv(t.data,{graphicalItems:s.filter(function(L){var X,H=o in L.props?L.props[o]:(X=L.type.defaultProps)===null||X===void 0?void 0:X[o];return H===A}),dataStartIndex:c,dataEndIndex:d}),R=M.length,O,q,S;cge(b.domain,_,y)&&(O=s_(b.domain,null,_),g&&(y==="number"||k!=="auto")&&(S=$m(M,j,"category")));var I=qL(y);if(!O||O.length===0){var E,W=(E=b.domain)!==null&&E!==void 0?E:I;if(j){if(O=$m(M,j,y),y==="category"&&g){var B=OH(O);w&&B?(q=O,O=$x(0,R)):w||(O=NC(W,O,h).reduce(function(L,X){return L.indexOf(X)>=0?L:[].concat(qd(L),[X])},[]))}else if(y==="category")w?O=O.filter(function(L){return L!==""&&!dt(L)}):O=NC(W,O,h).reduce(function(L,X){return L.indexOf(X)>=0||X===""||dt(X)?L:[].concat(qd(L),[X])},[]);else if(y==="number"){var C=Iie(M,s.filter(function(L){var X,H,F=o in L.props?L.props[o]:(X=L.type.defaultProps)===null||X===void 0?void 0:X[o],ke="hide"in L.props?L.props.hide:(H=L.type.defaultProps)===null||H===void 0?void 0:H.hide;return F===A&&(P||!ke)}),j,i,u);C&&(O=C)}g&&(y==="number"||k!=="auto")&&(S=$m(M,j,"category"))}else g?O=$x(0,R):l&&l[A]&&l[A].hasStack&&y==="number"?O=p==="expand"?[0,1]:mI(l[A].stackGroups,c,d):O=iI(M,s.filter(function(L){var X=o in L.props?L.props[o]:L.type.defaultProps[o],H="hide"in L.props?L.props.hide:L.type.defaultProps.hide;return X===A&&(P||!H)}),y,u,!0);if(y==="number")O=K_(m,O,A,i,N),W&&(O=s_(W,O,_));else if(y==="category"&&W){var D=W,z=O.every(function(L){return D.indexOf(L)>=0});z&&(O=D)}}return Oe(Oe({},x),{},mt({},A,Oe(Oe({},b),{},{axisType:i,domain:O,categoricalDomain:S,duplicateDomain:q,originalDomain:(v=b.domain)!==null&&v!==void 0?v:I,isCategorical:g,layout:u})))},{})},Rge=function(t,a){var n=a.graphicalItems,s=a.Axis,i=a.axisType,o=a.axisIdKey,l=a.stackGroups,c=a.dataStartIndex,d=a.dataEndIndex,u=t.layout,m=t.children,p=Iv(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:d}),g=p.length,x=oI(u,i),h=-1;return n.reduce(function(v,b){var y=b.type.defaultProps!==void 0?Oe(Oe({},b.type.defaultProps),b.props):b.props,j=y[o],_=qL("number");if(!v[j]){h++;var w;return x?w=$x(0,g):l&&l[j]&&l[j].hasStack?(w=mI(l[j].stackGroups,c,d),w=K_(m,w,j,i)):(w=s_(_,iI(p,n.filter(function(k){var N,P,A=o in k.props?k.props[o]:(N=k.type.defaultProps)===null||N===void 0?void 0:N[o],M="hide"in k.props?k.props.hide:(P=k.type.defaultProps)===null||P===void 0?void 0:P.hide;return A===j&&!M}),"number",u),s.defaultProps.allowDataOverflow),w=K_(m,w,j,i)),Oe(Oe({},v),{},mt({},j,Oe(Oe({axisType:i},s.defaultProps),{},{hide:!0,orientation:ya(Mge,"".concat(i,".").concat(h%2),null),domain:w,originalDomain:_,isCategorical:x,layout:u})))}return v},{})},qge=function(t,a){var n=a.axisType,s=n===void 0?"xAxis":n,i=a.AxisComp,o=a.graphicalItems,l=a.stackGroups,c=a.dataStartIndex,d=a.dataEndIndex,u=t.children,m="".concat(s,"Id"),p=Ja(u,i),g={};return p&&p.length?g=$ge(t,{axes:p,graphicalItems:o,axisType:s,axisIdKey:m,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(g=Rge(t,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:m,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),g},Fge=function(t){var a=to(t),n=fi(a,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:Dk(n,function(s){return s.coordinate}),tooltipAxis:a,tooltipAxisBandSize:kx(a,n)}},lE=function(t){var a=t.children,n=t.defaultShowTooltip,s=Ur(a,Sd),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},zge=function(t){return!t||!t.length?!1:t.some(function(a){var n=gi(a&&a.type);return n&&n.indexOf("Bar")>=0})},cE=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Bge=function(t,a){var n=t.props,s=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,d=n.width,u=n.height,m=n.children,p=n.margin||{},g=Ur(m,Sd),x=Ur(m,aa),h=Object.keys(c).reduce(function(w,k){var N=c[k],P=N.orientation;return!N.mirror&&!N.hide?Oe(Oe({},w),{},mt({},P,w[P]+N.width)):w},{left:p.left||0,right:p.right||0}),v=Object.keys(o).reduce(function(w,k){var N=o[k],P=N.orientation;return!N.mirror&&!N.hide?Oe(Oe({},w),{},mt({},P,ya(w,"".concat(P))+N.height)):w},{top:p.top||0,bottom:p.bottom||0}),b=Oe(Oe({},v),h),y=b.bottom;g&&(b.bottom+=g.props.height||Sd.defaultProps.height),x&&a&&(b=Mie(b,s,n,a));var j=d-b.left-b.right,_=u-b.top-b.bottom;return Oe(Oe({brushBottom:y},b),{},{width:Math.max(j,0),height:Math.max(_,0)})},Wge=function(t,a){if(a==="xAxis")return t[a].width;if(a==="yAxis")return t[a].height},fu=function(t){var a=t.chartName,n=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,d=t.legendContent,u=t.formatAxisMap,m=t.defaultProps,p=function(b,y){var j=y.graphicalItems,_=y.stackGroups,w=y.offset,k=y.updateId,N=y.dataStartIndex,P=y.dataEndIndex,A=b.barSize,M=b.layout,R=b.barGap,O=b.barCategoryGap,q=b.maxBarSize,S=cE(M),I=S.numericAxisName,E=S.cateAxisName,W=zge(j),B=[];return j.forEach(function(C,D){var z=Iv(b.data,{graphicalItems:[C],dataStartIndex:N,dataEndIndex:P}),L=C.type.defaultProps!==void 0?Oe(Oe({},C.type.defaultProps),C.props):C.props,X=L.dataKey,H=L.maxBarSize,F=L["".concat(I,"Id")],ke=L["".concat(E,"Id")],ae={},ue=c.reduce(function(re,U){var xe=y["".concat(U.axisType,"Map")],J=L["".concat(U.axisType,"Id")];xe&&xe[J]||U.axisType==="zAxis"||$l();var Q=xe[J];return Oe(Oe({},re),{},mt(mt({},U.axisType,Q),"".concat(U.axisType,"Ticks"),fi(Q)))},ae),Z=ue[E],me=ue["".concat(E,"Ticks")],ge=_&&_[F]&&_[F].hasStack&&Uie(C,_[F].stackGroups),se=gi(C.type).indexOf("Bar")>=0,he=kx(Z,me),T=[],oe=W&&Tie({barSize:A,stackGroups:_,totalSize:Wge(ue,E)});if(se){var G,V,Y=dt(H)?q:H,ce=(G=(V=kx(Z,me,!0))!==null&&V!==void 0?V:Y)!==null&&G!==void 0?G:0;T=Oie({barGap:R,barCategoryGap:O,bandSize:ce!==he?ce:he,sizeList:oe[ke],maxBarSize:Y}),ce!==he&&(T=T.map(function(re){return Oe(Oe({},re),{},{position:Oe(Oe({},re.position),{},{offset:re.position.offset-ce/2})})}))}var je=C&&C.type&&C.type.getComposedData;je&&B.push({props:Oe(Oe({},je(Oe(Oe({},ue),{},{displayedData:z,props:b,dataKey:X,item:C,bandSize:he,barPosition:T,offset:w,stackedData:ge,layout:M,dataStartIndex:N,dataEndIndex:P}))),{},mt(mt(mt({key:C.key||"item-".concat(D)},I,ue[I]),E,ue[E]),"animationId",k)),childIndex:UH(C,b.children),item:C})}),B},g=function(b,y){var j=b.props,_=b.dataStartIndex,w=b.dataEndIndex,k=b.updateId;if(!Xg({props:j}))return null;var N=j.children,P=j.layout,A=j.stackOffset,M=j.data,R=j.reverseStackOrder,O=cE(P),q=O.numericAxisName,S=O.cateAxisName,I=Ja(N,n),E=Bie(M,I,"".concat(q,"Id"),"".concat(S,"Id"),A,R),W=c.reduce(function(L,X){var H="".concat(X.axisType,"Map");return Oe(Oe({},L),{},mt({},H,qge(j,Oe(Oe({},X),{},{graphicalItems:I,stackGroups:X.axisType===q&&E,dataStartIndex:_,dataEndIndex:w}))))},{}),B=Bge(Oe(Oe({},W),{},{props:j,graphicalItems:I}),y?.legendBBox);Object.keys(W).forEach(function(L){W[L]=u(j,W[L],B,L.replace("Map",""),a)});var C=W["".concat(S,"Map")],D=Fge(C),z=p(j,Oe(Oe({},W),{},{dataStartIndex:_,dataEndIndex:w,updateId:k,graphicalItems:I,stackGroups:E,offset:B}));return Oe(Oe({formattedGraphicalItems:z,graphicalItems:I,offset:B,stackGroups:E},D),W)},x=function(v){function b(y){var j,_,w;return wge(this,b),w=Nge(this,b,[y]),mt(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),mt(w,"accessibilityManager",new lge),mt(w,"handleLegendBBoxUpdate",function(k){if(k){var N=w.state,P=N.dataStartIndex,A=N.dataEndIndex,M=N.updateId;w.setState(Oe({legendBBox:k},g({props:w.props,dataStartIndex:P,dataEndIndex:A,updateId:M},Oe(Oe({},w.state),{},{legendBBox:k}))))}}),mt(w,"handleReceiveSyncEvent",function(k,N,P){if(w.props.syncId===k){if(P===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(N)}}),mt(w,"handleBrushChange",function(k){var N=k.startIndex,P=k.endIndex;if(N!==w.state.dataStartIndex||P!==w.state.dataEndIndex){var A=w.state.updateId;w.setState(function(){return Oe({dataStartIndex:N,dataEndIndex:P},g({props:w.props,dataStartIndex:N,dataEndIndex:P,updateId:A},w.state))}),w.triggerSyncEvent({dataStartIndex:N,dataEndIndex:P})}}),mt(w,"handleMouseEnter",function(k){var N=w.getMouseInfo(k);if(N){var P=Oe(Oe({},N),{},{isTooltipActive:!0});w.setState(P),w.triggerSyncEvent(P);var A=w.props.onMouseEnter;at(A)&&A(P,k)}}),mt(w,"triggeredAfterMouseMove",function(k){var N=w.getMouseInfo(k),P=N?Oe(Oe({},N),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(P),w.triggerSyncEvent(P);var A=w.props.onMouseMove;at(A)&&A(P,k)}),mt(w,"handleItemMouseEnter",function(k){w.setState(function(){return{isTooltipActive:!0,activeItem:k,activePayload:k.tooltipPayload,activeCoordinate:k.tooltipPosition||{x:k.cx,y:k.cy}}})}),mt(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),mt(w,"handleMouseMove",function(k){k.persist(),w.throttleTriggeredAfterMouseMove(k)}),mt(w,"handleMouseLeave",function(k){w.throttleTriggeredAfterMouseMove.cancel();var N={isTooltipActive:!1};w.setState(N),w.triggerSyncEvent(N);var P=w.props.onMouseLeave;at(P)&&P(N,k)}),mt(w,"handleOuterEvent",function(k){var N=WH(k),P=ya(w.props,"".concat(N));if(N&&at(P)){var A,M;/.*touch.*/i.test(N)?M=w.getMouseInfo(k.changedTouches[0]):M=w.getMouseInfo(k),P((A=M)!==null&&A!==void 0?A:{},k)}}),mt(w,"handleClick",function(k){var N=w.getMouseInfo(k);if(N){var P=Oe(Oe({},N),{},{isTooltipActive:!0});w.setState(P),w.triggerSyncEvent(P);var A=w.props.onClick;at(A)&&A(P,k)}}),mt(w,"handleMouseDown",function(k){var N=w.props.onMouseDown;if(at(N)){var P=w.getMouseInfo(k);N(P,k)}}),mt(w,"handleMouseUp",function(k){var N=w.props.onMouseUp;if(at(N)){var P=w.getMouseInfo(k);N(P,k)}}),mt(w,"handleTouchMove",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(k.changedTouches[0])}),mt(w,"handleTouchStart",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&w.handleMouseDown(k.changedTouches[0])}),mt(w,"handleTouchEnd",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&w.handleMouseUp(k.changedTouches[0])}),mt(w,"handleDoubleClick",function(k){var N=w.props.onDoubleClick;if(at(N)){var P=w.getMouseInfo(k);N(P,k)}}),mt(w,"handleContextMenu",function(k){var N=w.props.onContextMenu;if(at(N)){var P=w.getMouseInfo(k);N(P,k)}}),mt(w,"triggerSyncEvent",function(k){w.props.syncId!==void 0&&Fb.emit(zb,w.props.syncId,k,w.eventEmitterSymbol)}),mt(w,"applySyncEvent",function(k){var N=w.props,P=N.layout,A=N.syncMethod,M=w.state.updateId,R=k.dataStartIndex,O=k.dataEndIndex;if(k.dataStartIndex!==void 0||k.dataEndIndex!==void 0)w.setState(Oe({dataStartIndex:R,dataEndIndex:O},g({props:w.props,dataStartIndex:R,dataEndIndex:O,updateId:M},w.state)));else if(k.activeTooltipIndex!==void 0){var q=k.chartX,S=k.chartY,I=k.activeTooltipIndex,E=w.state,W=E.offset,B=E.tooltipTicks;if(!W)return;if(typeof A=="function")I=A(B,k);else if(A==="value"){I=-1;for(var C=0;C<B.length;C++)if(B[C].value===k.activeLabel){I=C;break}}var D=Oe(Oe({},W),{},{x:W.left,y:W.top}),z=Math.min(q,D.x+D.width),L=Math.min(S,D.y+D.height),X=B[I]&&B[I].value,H=Y_(w.state,w.props.data,I),F=B[I]?{x:P==="horizontal"?B[I].coordinate:z,y:P==="horizontal"?L:B[I].coordinate}:RL;w.setState(Oe(Oe({},k),{},{activeLabel:X,activeCoordinate:F,activePayload:H,activeTooltipIndex:I}))}else w.setState(k)}),mt(w,"renderCursor",function(k){var N,P=w.state,A=P.isTooltipActive,M=P.activeCoordinate,R=P.activePayload,O=P.offset,q=P.activeTooltipIndex,S=P.tooltipAxisBandSize,I=w.getTooltipEventType(),E=(N=k.props.active)!==null&&N!==void 0?N:A,W=w.props.layout,B=k.key||"_recharts-cursor";return le.createElement(hge,{key:B,activeCoordinate:M,activePayload:R,activeTooltipIndex:q,chartName:a,element:k,isActive:E,layout:W,offset:O,tooltipAxisBandSize:S,tooltipEventType:I})}),mt(w,"renderPolarAxis",function(k,N,P){var A=ya(k,"type.axisType"),M=ya(w.state,"".concat(A,"Map")),R=k.type.defaultProps,O=R!==void 0?Oe(Oe({},R),k.props):k.props,q=M&&M[O["".concat(A,"Id")]];return f.cloneElement(k,Oe(Oe({},q),{},{className:wt(A,q.className),key:k.key||"".concat(N,"-").concat(P),ticks:fi(q,!0)}))}),mt(w,"renderPolarGrid",function(k){var N=k.props,P=N.radialLines,A=N.polarAngles,M=N.polarRadius,R=w.state,O=R.radiusAxisMap,q=R.angleAxisMap,S=to(O),I=to(q),E=I.cx,W=I.cy,B=I.innerRadius,C=I.outerRadius;return f.cloneElement(k,{polarAngles:Array.isArray(A)?A:fi(I,!0).map(function(D){return D.coordinate}),polarRadius:Array.isArray(M)?M:fi(S,!0).map(function(D){return D.coordinate}),cx:E,cy:W,innerRadius:B,outerRadius:C,key:k.key||"polar-grid",radialLines:P})}),mt(w,"renderLegend",function(){var k=w.state.formattedGraphicalItems,N=w.props,P=N.children,A=N.width,M=N.height,R=w.props.margin||{},O=A-(R.left||0)-(R.right||0),q=nI({children:P,formattedGraphicalItems:k,legendWidth:O,legendContent:d});if(!q)return null;var S=q.item,I=sE(q,gge);return f.cloneElement(S,Oe(Oe({},I),{},{chartWidth:A,chartHeight:M,margin:R,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),mt(w,"renderTooltip",function(){var k,N=w.props,P=N.children,A=N.accessibilityLayer,M=Ur(P,tt);if(!M)return null;var R=w.state,O=R.isTooltipActive,q=R.activeCoordinate,S=R.activePayload,I=R.activeLabel,E=R.offset,W=(k=M.props.active)!==null&&k!==void 0?k:O;return f.cloneElement(M,{viewBox:Oe(Oe({},E),{},{x:E.left,y:E.top}),active:W,label:I,payload:W?S:[],coordinate:q,accessibilityLayer:A})}),mt(w,"renderBrush",function(k){var N=w.props,P=N.margin,A=N.data,M=w.state,R=M.offset,O=M.dataStartIndex,q=M.dataEndIndex,S=M.updateId;return f.cloneElement(k,{key:k.key||"_recharts-brush",onChange:Nh(w.handleBrushChange,k.props.onChange),data:A,x:He(k.props.x)?k.props.x:R.left,y:He(k.props.y)?k.props.y:R.top+R.height+R.brushBottom-(P.bottom||0),width:He(k.props.width)?k.props.width:R.width,startIndex:O,endIndex:q,updateId:"brush-".concat(S)})}),mt(w,"renderReferenceElement",function(k,N,P){if(!k)return null;var A=w,M=A.clipPathId,R=w.state,O=R.xAxisMap,q=R.yAxisMap,S=R.offset,I=k.type.defaultProps||{},E=k.props,W=E.xAxisId,B=W===void 0?I.xAxisId:W,C=E.yAxisId,D=C===void 0?I.yAxisId:C;return f.cloneElement(k,{key:k.key||"".concat(N,"-").concat(P),xAxis:O[B],yAxis:q[D],viewBox:{x:S.left,y:S.top,width:S.width,height:S.height},clipPathId:M})}),mt(w,"renderActivePoints",function(k){var N=k.item,P=k.activePoint,A=k.basePoint,M=k.childIndex,R=k.isRange,O=[],q=N.props.key,S=N.item.type.defaultProps!==void 0?Oe(Oe({},N.item.type.defaultProps),N.item.props):N.item.props,I=S.activeDot,E=S.dataKey,W=Oe(Oe({index:M,dataKey:E,cx:P.x,cy:P.y,r:4,fill:iN(N.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},Qe(I,!1)),Zg(I));return O.push(b.renderActiveDot(I,W,"".concat(q,"-activePoint-").concat(M))),A?O.push(b.renderActiveDot(I,Oe(Oe({},W),{},{cx:A.x,cy:A.y}),"".concat(q,"-basePoint-").concat(M))):R&&O.push(null),O}),mt(w,"renderGraphicChild",function(k,N,P){var A=w.filterFormatItem(k,N,P);if(!A)return null;var M=w.getTooltipEventType(),R=w.state,O=R.isTooltipActive,q=R.tooltipAxis,S=R.activeTooltipIndex,I=R.activeLabel,E=w.props.children,W=Ur(E,tt),B=A.props,C=B.points,D=B.isRange,z=B.baseLine,L=A.item.type.defaultProps!==void 0?Oe(Oe({},A.item.type.defaultProps),A.item.props):A.item.props,X=L.activeDot,H=L.hide,F=L.activeBar,ke=L.activeShape,ae=!!(!H&&O&&W&&(X||F||ke)),ue={};M!=="axis"&&W&&W.props.trigger==="click"?ue={onClick:Nh(w.handleItemMouseEnter,k.props.onClick)}:M!=="axis"&&(ue={onMouseLeave:Nh(w.handleItemMouseLeave,k.props.onMouseLeave),onMouseEnter:Nh(w.handleItemMouseEnter,k.props.onMouseEnter)});var Z=f.cloneElement(k,Oe(Oe({},A.props),ue));function me(U){return typeof q.dataKey=="function"?q.dataKey(U.payload):null}if(ae)if(S>=0){var ge,se;if(q.dataKey&&!q.allowDuplicatedCategory){var he=typeof q.dataKey=="function"?me:"payload.".concat(q.dataKey.toString());ge=Yg(C,he,I),se=D&&z&&Yg(z,he,I)}else ge=C?.[S],se=D&&z&&z[S];if(ke||F){var T=k.props.activeIndex!==void 0?k.props.activeIndex:S;return[f.cloneElement(k,Oe(Oe(Oe({},A.props),ue),{},{activeIndex:T})),null,null]}if(!dt(ge))return[Z].concat(qd(w.renderActivePoints({item:A,activePoint:ge,basePoint:se,childIndex:S,isRange:D})))}else{var oe,G=(oe=w.getItemByXY(w.state.activeCoordinate))!==null&&oe!==void 0?oe:{graphicalItem:Z},V=G.graphicalItem,Y=V.item,ce=Y===void 0?k:Y,je=V.childIndex,re=Oe(Oe(Oe({},A.props),ue),{},{activeIndex:je});return[f.cloneElement(ce,re),null,null]}return D?[Z,null,null]:[Z,null]}),mt(w,"renderCustomized",function(k,N,P){return f.cloneElement(k,Oe(Oe({key:"recharts-customized-".concat(P)},w.props),w.state))}),mt(w,"renderMap",{CartesianGrid:{handler:Eh,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:Eh},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:Eh},YAxis:{handler:Eh},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((j=y.id)!==null&&j!==void 0?j:Di("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=aD(w.triggeredAfterMouseMove,(_=y.throttleDelay)!==null&&_!==void 0?_:1e3/60),w.state={},w}return Pge(b,v),kge(b,[{key:"componentDidMount",value:function(){var j,_;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var j=this.props,_=j.children,w=j.data,k=j.height,N=j.layout,P=Ur(_,tt);if(P){var A=P.props.defaultIndex;if(!(typeof A!="number"||A<0||A>this.state.tooltipTicks.length-1)){var M=this.state.tooltipTicks[A]&&this.state.tooltipTicks[A].value,R=Y_(this.state,w,A,M),O=this.state.tooltipTicks[A].coordinate,q=(this.state.offset.top+k)/2,S=N==="horizontal",I=S?{x:O,y:q}:{y:O,x:q},E=this.state.formattedGraphicalItems.find(function(B){var C=B.item;return C.type.name==="Scatter"});E&&(I=Oe(Oe({},I),E.props.points[A].tooltipPosition),R=E.props.points[A].tooltipPayload);var W={activeTooltipIndex:A,isTooltipActive:!0,activeLabel:M,activePayload:R,activeCoordinate:I};this.setState(W),this.renderCursor(P),this.accessibilityManager.setIndex(A)}}}},{key:"getSnapshotBeforeUpdate",value:function(j,_){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==_.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==j.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==j.margin){var w,k;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(k=this.props.margin.top)!==null&&k!==void 0?k:0}})}return null}},{key:"componentDidUpdate",value:function(j){jw([Ur(j.children,tt)],[Ur(this.props.children,tt)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var j=Ur(this.props.children,tt);if(j&&typeof j.props.shared=="boolean"){var _=j.props.shared?"axis":"item";return l.indexOf(_)>=0?_:i}return i}},{key:"getMouseInfo",value:function(j){if(!this.container)return null;var _=this.container,w=_.getBoundingClientRect(),k=nre(w),N={chartX:Math.round(j.pageX-k.left),chartY:Math.round(j.pageY-k.top)},P=w.width/_.offsetWidth||1,A=this.inRange(N.chartX,N.chartY,P);if(!A)return null;var M=this.state,R=M.xAxisMap,O=M.yAxisMap,q=this.getTooltipEventType(),S=oE(this.state,this.props.data,this.props.layout,A);if(q!=="axis"&&R&&O){var I=to(R).scale,E=to(O).scale,W=I&&I.invert?I.invert(N.chartX):null,B=E&&E.invert?E.invert(N.chartY):null;return Oe(Oe({},N),{},{xValue:W,yValue:B},S)}return S?Oe(Oe({},N),S):null}},{key:"inRange",value:function(j,_){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,k=this.props.layout,N=j/w,P=_/w;if(k==="horizontal"||k==="vertical"){var A=this.state.offset,M=N>=A.left&&N<=A.left+A.width&&P>=A.top&&P<=A.top+A.height;return M?{x:N,y:P}:null}var R=this.state,O=R.angleAxisMap,q=R.radiusAxisMap;if(O&&q){var S=to(O);return PC({x:N,y:P},S)}return null}},{key:"parseEventsOfWrapper",value:function(){var j=this.props.children,_=this.getTooltipEventType(),w=Ur(j,tt),k={};w&&_==="axis"&&(w.props.trigger==="click"?k={onClick:this.handleClick}:k={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var N=Zg(this.props,this.handleOuterEvent);return Oe(Oe({},N),k)}},{key:"addListener",value:function(){Fb.on(zb,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Fb.removeListener(zb,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(j,_,w){for(var k=this.state.formattedGraphicalItems,N=0,P=k.length;N<P;N++){var A=k[N];if(A.item===j||A.props.key===j.key||_===gi(A.item.type)&&w===A.childIndex)return A}return null}},{key:"renderClipPath",value:function(){var j=this.clipPathId,_=this.state.offset,w=_.left,k=_.top,N=_.height,P=_.width;return le.createElement("defs",null,le.createElement("clipPath",{id:j},le.createElement("rect",{x:w,y:k,height:N,width:P})))}},{key:"getXScales",value:function(){var j=this.state.xAxisMap;return j?Object.entries(j).reduce(function(_,w){var k=nE(w,2),N=k[0],P=k[1];return Oe(Oe({},_),{},mt({},N,P.scale))},{}):null}},{key:"getYScales",value:function(){var j=this.state.yAxisMap;return j?Object.entries(j).reduce(function(_,w){var k=nE(w,2),N=k[0],P=k[1];return Oe(Oe({},_),{},mt({},N,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(j){var _;return(_=this.state.xAxisMap)===null||_===void 0||(_=_[j])===null||_===void 0?void 0:_.scale}},{key:"getYScaleByAxisId",value:function(j){var _;return(_=this.state.yAxisMap)===null||_===void 0||(_=_[j])===null||_===void 0?void 0:_.scale}},{key:"getItemByXY",value:function(j){var _=this.state,w=_.formattedGraphicalItems,k=_.activeItem;if(w&&w.length)for(var N=0,P=w.length;N<P;N++){var A=w[N],M=A.props,R=A.item,O=R.type.defaultProps!==void 0?Oe(Oe({},R.type.defaultProps),R.props):R.props,q=gi(R.type);if(q==="Bar"){var S=(M.data||[]).find(function(B){return Wce(j,B)});if(S)return{graphicalItem:A,payload:S}}else if(q==="RadialBar"){var I=(M.data||[]).find(function(B){return PC(j,B)});if(I)return{graphicalItem:A,payload:I}}else if(Pv(A,k)||Cv(A,k)||Fp(A,k)){var E=Aue({graphicalItem:A,activeTooltipItem:k,itemData:O.data}),W=O.activeIndex===void 0?E:O.activeIndex;return{graphicalItem:Oe(Oe({},A),{},{childIndex:W}),payload:Fp(A,k)?O.data[E]:A.props.data[E]}}}return null}},{key:"render",value:function(){var j=this;if(!Xg(this))return null;var _=this.props,w=_.children,k=_.className,N=_.width,P=_.height,A=_.style,M=_.compact,R=_.title,O=_.desc,q=sE(_,xge),S=Qe(q,!1);if(M)return le.createElement(L4,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},le.createElement(up,$c({},S,{width:N,height:P,title:R,desc:O}),this.renderClipPath(),jA(w,this.renderMap)));if(this.props.accessibilityLayer){var I,E;S.tabIndex=(I=this.props.tabIndex)!==null&&I!==void 0?I:0,S.role=(E=this.props.role)!==null&&E!==void 0?E:"application",S.onKeyDown=function(B){j.accessibilityManager.keyboardEvent(B)},S.onFocus=function(){j.accessibilityManager.focus()}}var W=this.parseEventsOfWrapper();return le.createElement(L4,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},le.createElement("div",$c({className:wt("recharts-wrapper",k),style:Oe({position:"relative",cursor:"default",width:N,height:P},A)},W,{ref:function(C){j.container=C}}),le.createElement(up,$c({},S,{width:N,height:P,title:R,desc:O,style:Dge}),this.renderClipPath(),jA(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(f.Component);mt(x,"displayName",a),mt(x,"defaultProps",Oe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),mt(x,"getDerivedStateFromProps",function(v,b){var y=v.dataKey,j=v.data,_=v.children,w=v.width,k=v.height,N=v.layout,P=v.stackOffset,A=v.margin,M=b.dataStartIndex,R=b.dataEndIndex;if(b.updateId===void 0){var O=lE(v);return Oe(Oe(Oe({},O),{},{updateId:0},g(Oe(Oe({props:v},O),{},{updateId:0}),b)),{},{prevDataKey:y,prevData:j,prevWidth:w,prevHeight:k,prevLayout:N,prevStackOffset:P,prevMargin:A,prevChildren:_})}if(y!==b.prevDataKey||j!==b.prevData||w!==b.prevWidth||k!==b.prevHeight||N!==b.prevLayout||P!==b.prevStackOffset||!jl(A,b.prevMargin)){var q=lE(v),S={chartX:b.chartX,chartY:b.chartY,isTooltipActive:b.isTooltipActive},I=Oe(Oe({},oE(b,j,N)),{},{updateId:b.updateId+1}),E=Oe(Oe(Oe({},q),S),I);return Oe(Oe(Oe({},E),g(Oe({props:v},E),b)),{},{prevDataKey:y,prevData:j,prevWidth:w,prevHeight:k,prevLayout:N,prevStackOffset:P,prevMargin:A,prevChildren:_})}if(!jw(_,b.prevChildren)){var W,B,C,D,z=Ur(_,Sd),L=z&&(W=(B=z.props)===null||B===void 0?void 0:B.startIndex)!==null&&W!==void 0?W:M,X=z&&(C=(D=z.props)===null||D===void 0?void 0:D.endIndex)!==null&&C!==void 0?C:R,H=L!==M||X!==R,F=!dt(j),ke=F&&!H?b.updateId:b.updateId+1;return Oe(Oe({updateId:ke},g(Oe(Oe({props:v},b),{},{updateId:ke,dataStartIndex:L,dataEndIndex:X}),b)),{},{prevChildren:_,dataStartIndex:L,dataEndIndex:X})}return null}),mt(x,"renderActiveDot",function(v,b,y){var j;return f.isValidElement(v)?j=f.cloneElement(v,b):at(v)?j=v(b):j=le.createElement(xf,b),le.createElement(ft,{className:"recharts-active-dot",key:y},j)});var h=f.forwardRef(function(b,y){return le.createElement(x,$c({},b,{ref:y}))});return h.displayName=x.displayName,h},Ci=fu({chartName:"LineChart",GraphicalChild:Kt,axisComponents:[{axisType:"xAxis",AxisComp:ct},{axisType:"yAxis",AxisComp:rt}],formatAxisMap:yf}),Rr=fu({chartName:"BarChart",GraphicalChild:pt,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:ct},{axisType:"yAxis",AxisComp:rt}],formatAxisMap:yf}),FL=fu({chartName:"PieChart",GraphicalChild:Qs,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Av},{axisType:"radiusAxis",AxisComp:Nv}],formatAxisMap:eoe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function Uge(e,t){for(var a=-1,n=e==null?0:e.length;++a<n&&t(e[a],a,e)!==!1;);return e}var Hge=Uge,Kge=lN,Vge=By,Gge=Object.prototype,Yge=Gge.hasOwnProperty;function Zge(e,t,a){var n=e[t];(!(Yge.call(e,t)&&Vge(n,a))||a===void 0&&!(t in e))&&Kge(e,t,a)}var zL=Zge,Xge=zL,Qge=lN;function Jge(e,t,a,n){var s=!a;a||(a={});for(var i=-1,o=t.length;++i<o;){var l=t[i],c=n?n(a[l],e[l],l,a,e):void 0;c===void 0&&(c=e[l]),s?Qge(a,l,c):Xge(a,l,c)}return a}var vf=Jge,exe=vf,txe=iu;function rxe(e,t){return e&&exe(t,txe(t),e)}var axe=rxe;function nxe(e){var t=[];if(e!=null)for(var a in Object(e))t.push(a);return t}var sxe=nxe,ixe=Ts,oxe=Ek,lxe=sxe,cxe=Object.prototype,dxe=cxe.hasOwnProperty;function uxe(e){if(!ixe(e))return lxe(e);var t=oxe(e),a=[];for(var n in e)n=="constructor"&&(t||!dxe.call(e,n))||a.push(n);return a}var mxe=uxe,pxe=DM,fxe=mxe,hxe=su;function gxe(e){return hxe(e)?pxe(e,!0):fxe(e)}var yN=gxe,xxe=vf,yxe=yN;function vxe(e,t){return e&&xxe(t,yxe(t),e)}var bxe=vxe,ey={exports:{}};ey.exports;(function(e,t){var a=Cs,n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===n,o=i?a.Buffer:void 0,l=o?o.allocUnsafe:void 0;function c(d,u){if(u)return d.slice();var m=d.length,p=l?l(m):new d.constructor(m);return d.copy(p),p}e.exports=c})(ey,ey.exports);var jxe=ey.exports;function wxe(e,t){var a=-1,n=e.length;for(t||(t=Array(n));++a<n;)t[a]=e[a];return t}var _xe=wxe,kxe=vf,Nxe=kk;function Sxe(e,t){return kxe(e,Nxe(e),t)}var Axe=Sxe,Pxe=_k,Cxe=oN,Exe=kk,Txe=TM,Oxe=Object.getOwnPropertySymbols,Mxe=Oxe?function(e){for(var t=[];e;)Pxe(t,Exe(e)),e=Cxe(e);return t}:Txe,BL=Mxe,Dxe=vf,Ixe=BL;function Lxe(e,t){return Dxe(e,Ixe(e),t)}var $xe=Lxe,Rxe=EM,qxe=BL,Fxe=yN;function zxe(e){return Rxe(e,Fxe,qxe)}var WL=zxe,Bxe=Object.prototype,Wxe=Bxe.hasOwnProperty;function Uxe(e){var t=e.length,a=new e.constructor(t);return t&&typeof e[0]=="string"&&Wxe.call(e,"index")&&(a.index=e.index,a.input=e.input),a}var Hxe=Uxe,dE=CM;function Kxe(e){var t=new e.constructor(e.byteLength);return new dE(t).set(new dE(e)),t}var vN=Kxe,Vxe=vN;function Gxe(e,t){var a=t?Vxe(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}var Yxe=Gxe,Zxe=/\w*$/;function Xxe(e){var t=new e.constructor(e.source,Zxe.exec(e));return t.lastIndex=e.lastIndex,t}var Qxe=Xxe,uE=Qd,mE=uE?uE.prototype:void 0,pE=mE?mE.valueOf:void 0;function Jxe(e){return pE?Object(pE.call(e)):{}}var eye=Jxe,tye=vN;function rye(e,t){var a=t?tye(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}var aye=rye,nye=vN,sye=Yxe,iye=Qxe,oye=eye,lye=aye,cye="[object Boolean]",dye="[object Date]",uye="[object Map]",mye="[object Number]",pye="[object RegExp]",fye="[object Set]",hye="[object String]",gye="[object Symbol]",xye="[object ArrayBuffer]",yye="[object DataView]",vye="[object Float32Array]",bye="[object Float64Array]",jye="[object Int8Array]",wye="[object Int16Array]",_ye="[object Int32Array]",kye="[object Uint8Array]",Nye="[object Uint8ClampedArray]",Sye="[object Uint16Array]",Aye="[object Uint32Array]";function Pye(e,t,a){var n=e.constructor;switch(t){case xye:return nye(e);case cye:case dye:return new n(+e);case yye:return sye(e,a);case vye:case bye:case jye:case wye:case _ye:case kye:case Nye:case Sye:case Aye:return lye(e,a);case uye:return new n;case mye:case hye:return new n(e);case pye:return iye(e);case fye:return new n;case gye:return oye(e)}}var Cye=Pye,Eye=Ts,fE=Object.create,Tye=function(){function e(){}return function(t){if(!Eye(t))return{};if(fE)return fE(t);e.prototype=t;var a=new e;return e.prototype=void 0,a}}(),Oye=Tye,Mye=Oye,Dye=oN,Iye=Ek;function Lye(e){return typeof e.constructor=="function"&&!Iye(e)?Mye(Dye(e)):{}}var $ye=Lye,Rye=mv,qye=Es,Fye="[object Map]";function zye(e){return qye(e)&&Rye(e)==Fye}var Bye=zye,Wye=Bye,Uye=uv,hE=Ck,gE=hE&&hE.isMap,Hye=gE?Uye(gE):Wye,Kye=Hye,Vye=mv,Gye=Es,Yye="[object Set]";function Zye(e){return Gye(e)&&Vye(e)==Yye}var Xye=Zye,Qye=Xye,Jye=uv,xE=Ck,yE=xE&&xE.isSet,eve=yE?Jye(yE):Qye,tve=eve,rve=jk,ave=Hge,nve=zL,sve=axe,ive=bxe,ove=jxe,lve=_xe,cve=Axe,dve=$xe,uve=LM,mve=WL,pve=mv,fve=Hxe,hve=Cye,gve=$ye,xve=rn,yve=Sk,vve=Kye,bve=Ts,jve=tve,wve=iu,_ve=yN,kve=1,Nve=2,Sve=4,UL="[object Arguments]",Ave="[object Array]",Pve="[object Boolean]",Cve="[object Date]",Eve="[object Error]",HL="[object Function]",Tve="[object GeneratorFunction]",Ove="[object Map]",Mve="[object Number]",KL="[object Object]",Dve="[object RegExp]",Ive="[object Set]",Lve="[object String]",$ve="[object Symbol]",Rve="[object WeakMap]",qve="[object ArrayBuffer]",Fve="[object DataView]",zve="[object Float32Array]",Bve="[object Float64Array]",Wve="[object Int8Array]",Uve="[object Int16Array]",Hve="[object Int32Array]",Kve="[object Uint8Array]",Vve="[object Uint8ClampedArray]",Gve="[object Uint16Array]",Yve="[object Uint32Array]",ar={};ar[UL]=ar[Ave]=ar[qve]=ar[Fve]=ar[Pve]=ar[Cve]=ar[zve]=ar[Bve]=ar[Wve]=ar[Uve]=ar[Hve]=ar[Ove]=ar[Mve]=ar[KL]=ar[Dve]=ar[Ive]=ar[Lve]=ar[$ve]=ar[Kve]=ar[Vve]=ar[Gve]=ar[Yve]=!0;ar[Eve]=ar[HL]=ar[Rve]=!1;function mg(e,t,a,n,s,i){var o,l=t&kve,c=t&Nve,d=t&Sve;if(a&&(o=s?a(e,n,s,i):a(e)),o!==void 0)return o;if(!bve(e))return e;var u=xve(e);if(u){if(o=fve(e),!l)return lve(e,o)}else{var m=pve(e),p=m==HL||m==Tve;if(yve(e))return ove(e,l);if(m==KL||m==UL||p&&!s){if(o=c||p?{}:gve(e),!l)return c?dve(e,ive(o,e)):cve(e,sve(o,e))}else{if(!ar[m])return s?e:{};o=hve(e,m,l)}}i||(i=new rve);var g=i.get(e);if(g)return g;i.set(e,o),jve(e)?e.forEach(function(v){o.add(mg(v,t,a,v,e,i))}):vve(e)&&e.forEach(function(v,b){o.set(b,mg(v,t,a,b,e,i))});var x=d?c?mve:uve:c?_ve:wve,h=u?void 0:x(e);return ave(h||e,function(v,b){h&&(b=v,v=e[b]),nve(o,b,mg(v,t,a,b,e,i))}),o}var Zve=mg,Xve=Gy,Qve=Q5;function Jve(e,t){return t.length<2?e:Xve(e,Qve(t,0,-1))}var e0e=Jve,t0e=Vy,r0e=yI,a0e=e0e,n0e=df;function s0e(e,t){return t=t0e(t,e),e=a0e(e,t),e==null||delete e[n0e(r0e(t))]}var i0e=s0e,o0e=RI;function l0e(e){return o0e(e)?void 0:e}var c0e=l0e,d0e=Ok;function u0e(e){var t=e==null?0:e.length;return t?d0e(e,1):[]}var m0e=u0e,p0e=m0e,f0e=YM,h0e=XM;function g0e(e){return h0e(f0e(e,void 0,p0e),e+"")}var x0e=g0e,y0e=Ky,v0e=Zve,b0e=i0e,j0e=Vy,w0e=vf,_0e=c0e,k0e=x0e,N0e=WL,S0e=1,A0e=2,P0e=4,C0e=k0e(function(e,t){var a={};if(e==null)return a;var n=!1;t=y0e(t,function(i){return i=j0e(i,e),n||(n=i.length>1),i}),w0e(e,N0e(e),a),n&&(a=v0e(a,S0e|A0e|P0e,_0e));for(var s=t.length;s--;)b0e(a,t[s]);return a}),E0e=C0e;const T0e=Dt(E0e);var O0e=["#1890FF","#66B5FF","#41D9C7","#2FC25B","#6EDB8F","#9AE65C","#FACC14","#E6965C","#57AD71","#223273","#738AE6","#7564CC","#8543E0","#A877ED","#5C8EE6","#13C2C2","#70E0E0","#5CA3E6","#3436C7","#8082FF","#DD81E6","#F04864","#FA7D92","#D598D9"],M0e=["width","height","className","style","children","type"];function Fd(e){"@babel/helpers - typeof";return Fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fd(e)}function ty(){return ty=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ty.apply(this,arguments)}function D0e(e,t){if(e==null)return{};var a=I0e(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function I0e(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function L0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vE(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GL(n.key),n)}}function $0e(e,t,a){return t&&vE(e.prototype,t),a&&vE(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function R0e(e,t,a){return t=ry(t),q0e(e,VL()?Reflect.construct(t,a||[],ry(e).constructor):t.apply(e,a))}function q0e(e,t){if(t&&(Fd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F0e(e)}function F0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VL=function(){return!!e})()}function ry(e){return ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ry(e)}function z0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z_(e,t)}function Z_(e,t){return Z_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Z_(e,t)}function bE(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function nr(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?bE(Object(a),!0).forEach(function(n){yi(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):bE(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function yi(e,t,a){return t=GL(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function GL(e){var t=B0e(e,"string");return Fd(t)=="symbol"?t:t+""}function B0e(e,t){if(Fd(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(Fd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Vp="value",Wb=function e(t){var a=t.depth,n=t.node,s=t.index,i=t.valueKey,o=n.children,l=a+1,c=o&&o.length?o.map(function(u,m){return e({depth:l,node:u,index:m,valueKey:i})}):null,d;return o&&o.length?d=c.reduce(function(u,m){return u+m[Vp]},0):d=$o(n[i])||n[i]<=0?0:n[i],nr(nr({},n),{},yi(yi(yi({children:c},Vp,d),"depth",a),"index",s))},W0e=function(t){return{x:t.x,y:t.y,width:t.width,height:t.height}},U0e=function(t,a){var n=a<0?0:a;return t.map(function(s){var i=s[Vp]*n;return nr(nr({},s),{},{area:$o(i)||i<=0?0:i})})},H0e=function(t,a,n){var s=a*a,i=t.area*t.area,o=t.reduce(function(d,u){return{min:Math.min(d.min,u.area),max:Math.max(d.max,u.area)}},{min:1/0,max:0}),l=o.min,c=o.max;return i?Math.max(s*c*n/i,i/(s*l*n)):1/0},K0e=function(t,a,n,s){var i=a?Math.round(t.area/a):0;(s||i>n.height)&&(i=n.height);for(var o=n.x,l,c=0,d=t.length;c<d;c++)l=t[c],l.x=o,l.y=n.y,l.height=i,l.width=Math.min(i?Math.round(l.area/i):0,n.x+n.width-o),o+=l.width;return l.width+=n.x+n.width-o,nr(nr({},n),{},{y:n.y+i,height:n.height-i})},V0e=function(t,a,n,s){var i=a?Math.round(t.area/a):0;(s||i>n.width)&&(i=n.width);for(var o=n.y,l,c=0,d=t.length;c<d;c++)l=t[c],l.x=n.x,l.y=o,l.width=i,l.height=Math.min(i?Math.round(l.area/i):0,n.y+n.height-o),o+=l.height;return l&&(l.height+=n.y+n.height-o),nr(nr({},n),{},{x:n.x+i,width:n.width-i})},jE=function(t,a,n,s){return a===n.width?K0e(t,a,n,s):V0e(t,a,n,s)},Ub=function e(t,a){var n=t.children;if(n&&n.length){var s=W0e(t),i=[],o=1/0,l,c,d=Math.min(s.width,s.height),u=U0e(n,s.width*s.height/t[Vp]),m=u.slice();for(i.area=0;m.length>0;)i.push(l=m[0]),i.area+=l.area,c=H0e(i,d,a),c<=o?(m.shift(),o=c):(i.area-=i.pop().area,s=jE(i,d,s,!1),d=Math.min(s.width,s.height),i.length=i.area=0,o=1/0);return i.length&&(s=jE(i,d,s,!0),i.length=i.area=0),nr(nr({},t),{},{children:u.map(function(p){return e(p,a)})})}return t},G0e={isTooltipActive:!1,isAnimationFinished:!1,activeNode:null,formatRoot:null,currentRoot:null,nestIndex:[]},bN=function(e){function t(){var a;L0e(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=R0e(this,t,[].concat(s)),yi(a,"state",nr({},G0e)),yi(a,"handleAnimationEnd",function(){var o=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),at(o)&&o()}),yi(a,"handleAnimationStart",function(){var o=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),at(o)&&o()}),a}return z0e(t,e),$0e(t,[{key:"handleMouseEnter",value:function(n,s){s.persist();var i=this.props,o=i.onMouseEnter,l=i.children,c=Ur(l,tt);c?this.setState({isTooltipActive:!0,activeNode:n},function(){o&&o(n,s)}):o&&o(n,s)}},{key:"handleMouseLeave",value:function(n,s){s.persist();var i=this.props,o=i.onMouseLeave,l=i.children,c=Ur(l,tt);c?this.setState({isTooltipActive:!1,activeNode:null},function(){o&&o(n,s)}):o&&o(n,s)}},{key:"handleClick",value:function(n){var s=this.props,i=s.onClick,o=s.type;if(o==="nest"&&n.children){var l=this.props,c=l.width,d=l.height,u=l.dataKey,m=l.aspectRatio,p=Wb({depth:0,node:nr(nr({},n),{},{x:0,y:0,width:c,height:d}),index:0,valueKey:u}),g=Ub(p,m),x=this.state.nestIndex;x.push(n),this.setState({formatRoot:g,currentRoot:p,nestIndex:x})}i&&i(n)}},{key:"handleNestIndex",value:function(n,s){var i=this.state.nestIndex,o=this.props,l=o.width,c=o.height,d=o.dataKey,u=o.aspectRatio,m=Wb({depth:0,node:nr(nr({},n),{},{x:0,y:0,width:l,height:c}),index:0,valueKey:d}),p=Ub(m,u);i=i.slice(0,s+1),this.setState({formatRoot:p,currentRoot:n,nestIndex:i})}},{key:"renderItem",value:function(n,s,i){var o=this,l=this.props,c=l.isAnimationActive,d=l.animationBegin,u=l.animationDuration,m=l.animationEasing,p=l.isUpdateAnimationActive,g=l.type,x=l.animationId,h=l.colorPanel,v=this.state.isAnimationFinished,b=s.width,y=s.height,j=s.x,_=s.y,w=s.depth,k=parseInt("".concat((Math.random()*2-1)*b),10),N={};return(i||g==="nest")&&(N={onMouseEnter:this.handleMouseEnter.bind(this,s),onMouseLeave:this.handleMouseLeave.bind(this,s),onClick:this.handleClick.bind(this,s)}),c?le.createElement(gn,{begin:d,duration:u,isActive:c,easing:m,key:"treemap-".concat(x),from:{x:j,y:_,width:b,height:y},to:{x:j,y:_,width:b,height:y},onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(P){var A=P.x,M=P.y,R=P.width,O=P.height;return le.createElement(gn,{from:"translate(".concat(k,"px, ").concat(k,"px)"),to:"translate(0, 0)",attributeName:"transform",begin:d,easing:m,isActive:c,duration:u},le.createElement(ft,N,function(){return w>2&&!v?null:o.constructor.renderContentItem(n,nr(nr({},s),{},{isAnimationActive:c,isUpdateAnimationActive:!p,width:R,height:O,x:A,y:M}),g,h)}()))}):le.createElement(ft,N,this.constructor.renderContentItem(n,nr(nr({},s),{},{isAnimationActive:!1,isUpdateAnimationActive:!1,width:b,height:y,x:j,y:_}),g,h))}},{key:"renderNode",value:function(n,s){var i=this,o=this.props,l=o.content,c=o.type,d=nr(nr(nr({},Qe(this.props,!1)),s),{},{root:n}),u=!s.children||!s.children.length,m=this.state.currentRoot,p=(m.children||[]).filter(function(g){return g.depth===s.depth&&g.name===s.name});return!p.length&&n.depth&&c==="nest"?null:le.createElement(ft,{key:"recharts-treemap-node-".concat(d.x,"-").concat(d.y,"-").concat(d.name),className:"recharts-treemap-depth-".concat(s.depth)},this.renderItem(l,d,u),s.children&&s.children.length?s.children.map(function(g){return i.renderNode(s,g)}):null)}},{key:"renderAllNodes",value:function(){var n=this.state.formatRoot;return n?this.renderNode(n,n):null}},{key:"renderTooltip",value:function(){var n=this.props,s=n.children,i=n.nameKey,o=Ur(s,tt);if(!o)return null;var l=this.props,c=l.width,d=l.height,u=this.state,m=u.isTooltipActive,p=u.activeNode,g={x:0,y:0,width:c,height:d},x=p?{x:p.x+p.width/2,y:p.y+p.height/2}:null,h=m&&p?[{payload:p,name:Lt(p,i,""),value:Lt(p,Vp)}]:[];return le.cloneElement(o,{viewBox:g,active:m,coordinate:x,label:"",payload:h})}},{key:"renderNestIndex",value:function(){var n=this,s=this.props,i=s.nameKey,o=s.nestIndexContent,l=this.state.nestIndex;return le.createElement("div",{className:"recharts-treemap-nest-index-wrapper",style:{marginTop:"8px",textAlign:"center"}},l.map(function(c,d){var u=ya(c,i,"root"),m=null;return le.isValidElement(o)&&(m=le.cloneElement(o,c,d)),at(o)?m=o(c,d):m=u,le.createElement("div",{onClick:n.handleNestIndex.bind(n,c,d),key:"nest-index-".concat(Di()),className:"recharts-treemap-nest-index-box",style:{cursor:"pointer",display:"inline-block",padding:"0 7px",background:"#000",color:"#fff",marginRight:"3px"}},m)}))}},{key:"render",value:function(){if(!Xg(this))return null;var n=this.props,s=n.width,i=n.height,o=n.className,l=n.style,c=n.children,d=n.type,u=D0e(n,M0e),m=Qe(u,!1);return le.createElement("div",{className:wt("recharts-wrapper",o),style:nr(nr({},l),{},{position:"relative",cursor:"default",width:s,height:i}),role:"region"},le.createElement(up,ty({},m,{width:s,height:d==="nest"?i-30:i}),this.renderAllNodes(),X5(c)),this.renderTooltip(),d==="nest"&&this.renderNestIndex())}}],[{key:"getDerivedStateFromProps",value:function(n,s){if(n.data!==s.prevData||n.type!==s.prevType||n.width!==s.prevWidth||n.height!==s.prevHeight||n.dataKey!==s.prevDataKey||n.aspectRatio!==s.prevAspectRatio){var i=Wb({depth:0,node:{children:n.data,x:0,y:0,width:n.width,height:n.height},index:0,valueKey:n.dataKey}),o=Ub(i,n.aspectRatio);return nr(nr({},s),{},{formatRoot:o,currentRoot:i,nestIndex:[i],prevAspectRatio:n.aspectRatio,prevData:n.data,prevWidth:n.width,prevHeight:n.height,prevDataKey:n.dataKey,prevType:n.type})}return null}},{key:"renderContentItem",value:function(n,s,i,o){if(le.isValidElement(n))return le.cloneElement(n,s);if(at(n))return n(s);var l=s.x,c=s.y,d=s.width,u=s.height,m=s.index,p=null;d>10&&u>10&&s.children&&i==="nest"&&(p=le.createElement(TI,{points:[{x:l+2,y:c+u/2},{x:l+6,y:c+u/2+3},{x:l+2,y:c+u/2+6}]}));var g=null,x=Yc(s.name);d>20&&u>20&&x.width<d&&x.height<u&&(g=le.createElement("text",{x:l+8,y:c+u/2+7,fontSize:14},s.name));var h=o||O0e;return le.createElement("g",null,le.createElement(gf,ty({fill:s.depth<2?h[m%h.length]:"rgba(255,255,255,0)",stroke:"#fff"},T0e(s,"children"),{role:"img"})),p,g)}}])}(f.PureComponent);yi(bN,"displayName","Treemap");yi(bN,"defaultProps",{aspectRatio:.5*(1+Math.sqrt(5)),dataKey:"value",type:"flat",isAnimationActive:!Ss.isSsr,isUpdateAnimationActive:!Ss.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"linear"});function Y0e(e,t){for(var a,n=-1,s=e.length;++n<s;){var i=t(e[n]);i!==void 0&&(a=a===void 0?i:a+i)}return a}var Z0e=Y0e,X0e=Ms,Q0e=Z0e;function J0e(e,t){return e&&e.length?Q0e(e,X0e(t)):0}var ebe=J0e;const tbe=Dt(ebe);var rbe=["width","height","className","style","children"],abe=["sourceX","sourceY","sourceControlX","targetX","targetY","targetControlX","linkWidth"];function zd(e){"@babel/helpers - typeof";return zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zd(e)}function wE(e,t){if(e==null)return{};var a=nbe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function nbe(e,t){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function al(){return al=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},al.apply(this,arguments)}function sbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _E(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ZL(n.key),n)}}function ibe(e,t,a){return t&&_E(e.prototype,t),a&&_E(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function obe(e,t,a){return t=ay(t),lbe(e,YL()?Reflect.construct(t,a||[],ay(e).constructor):t.apply(e,a))}function lbe(e,t){if(t&&(zd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cbe(e)}function cbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YL=function(){return!!e})()}function ay(e){return ay=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ay(e)}function dbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X_(e,t)}function X_(e,t){return X_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},X_(e,t)}function kE(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,n)}return a}function Er(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?kE(Object(a),!0).forEach(function(n){Lv(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):kE(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Lv(e,t,a){return t=ZL(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ZL(e){var t=ube(e,"string");return zd(t)=="symbol"?t:t+""}function ube(e,t){if(zd(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(zd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var mbe={x:0,y:0},pbe=function(t,a){var n=+t,s=a-n;return function(i){return n+s*i}},$v=function(t){return t.y+t.dy/2},Gp=function(t){return t&&t.value||0},ny=function(t,a){return a.reduce(function(n,s){return n+Gp(t[s])},0)},fbe=function(t,a,n){return n.reduce(function(s,i){var o=a[i],l=t[o.source];return s+$v(l)*Gp(a[i])},0)},hbe=function(t,a,n){return n.reduce(function(s,i){var o=a[i],l=t[o.target];return s+$v(l)*Gp(a[i])},0)},gbe=function(t,a){return t.y-a.y},xbe=function(t,a){for(var n=[],s=[],i=[],o=[],l=0,c=t.length;l<c;l++){var d=t[l];d.source===a&&(i.push(d.target),o.push(l)),d.target===a&&(n.push(d.source),s.push(l))}return{sourceNodes:n,sourceLinks:s,targetLinks:o,targetNodes:i}},ybe=function e(t,a){for(var n=a.targetNodes,s=0,i=n.length;s<i;s++){var o=t[n[s]];o&&(o.depth=Math.max(a.depth+1,o.depth),e(t,o))}},vbe=function(t,a,n){for(var s=t.nodes,i=t.links,o=s.map(function(h,v){var b=xbe(i,v);return Er(Er(Er({},h),b),{},{value:Math.max(ny(i,b.sourceLinks),ny(i,b.targetLinks)),depth:0})}),l=0,c=o.length;l<c;l++){var d=o[l];d.sourceNodes.length||ybe(o,d)}var u=OI(o,function(h){return h.depth}).depth;if(u>=1)for(var m=(a-n)/u,p=0,g=o.length;p<g;p++){var x=o[p];x.targetNodes.length||(x.depth=u),x.x=x.depth*m,x.dx=n}return{tree:o,maxDepth:u}},bbe=function(t){for(var a=[],n=0,s=t.length;n<s;n++){var i=t[n];a[i.depth]||(a[i.depth]=[]),a[i.depth].push(i)}return a},jbe=function(t,a,n,s){for(var i=hf(t.map(function(m){return(a-(m.length-1)*n)/tbe(m,Gp)})),o=0,l=t.length;o<l;o++)for(var c=0,d=t[o].length;c<d;c++){var u=t[o][c];u.y=c,u.dy=u.value*i}return s.map(function(m){return Er(Er({},m),{},{dy:Gp(m)*i})})},Hb=function(t,a,n){for(var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=0,o=t.length;i<o;i++){var l=t[i],c=l.length;s&&l.sort(gbe);for(var d=0,u=0;u<c;u++){var m=l[u],p=d-m.y;p>0&&(m.y+=p),d=m.y+m.dy+n}d=a+n;for(var g=c-1;g>=0;g--){var x=l[g],h=x.y+x.dy+n-d;if(h>0)x.y-=h,d=x.y;else break}}},wbe=function(t,a,n,s){for(var i=0,o=a.length;i<o;i++)for(var l=a[i],c=0,d=l.length;c<d;c++){var u=l[c];if(u.sourceLinks.length){var m=ny(n,u.sourceLinks),p=fbe(t,n,u.sourceLinks),g=p/m;u.y+=(g-$v(u))*s}}},_be=function(t,a,n,s){for(var i=a.length-1;i>=0;i--)for(var o=a[i],l=0,c=o.length;l<c;l++){var d=o[l];if(d.targetLinks.length){var u=ny(n,d.targetLinks),m=hbe(t,n,d.targetLinks),p=m/u;d.y+=(p-$v(d))*s}}},kbe=function(t,a){for(var n=0,s=t.length;n<s;n++){var i=t[n],o=0,l=0;i.targetLinks.sort(function(x,h){return t[a[x].target].y-t[a[h].target].y}),i.sourceLinks.sort(function(x,h){return t[a[x].source].y-t[a[h].source].y});for(var c=0,d=i.targetLinks.length;c<d;c++){var u=a[i.targetLinks[c]];u&&(u.sy=o,o+=u.dy)}for(var m=0,p=i.sourceLinks.length;m<p;m++){var g=a[i.sourceLinks[m]];g&&(g.ty=l,l+=g.dy)}}},Nbe=function(t){var a=t.data,n=t.width,s=t.height,i=t.iterations,o=t.nodeWidth,l=t.nodePadding,c=t.sort,d=a.links,u=vbe(a,n,o),m=u.tree,p=bbe(m),g=jbe(p,s,l,d);Hb(p,s,l,c);for(var x=1,h=1;h<=i;h++)_be(m,p,g,x*=.99),Hb(p,s,l,c),wbe(m,p,g,x),Hb(p,s,l,c);return kbe(m,g),{nodes:m,links:g}},Sbe=function(t,a){return a==="node"?{x:t.x+t.width/2,y:t.y+t.height/2}:{x:(t.sourceX+t.targetX)/2,y:(t.sourceY+t.targetY)/2}},Abe=function(t,a,n){var s=t.payload;if(a==="node")return[{payload:t,name:Lt(s,n,""),value:Lt(s,"value")}];if(s.source&&s.target){var i=Lt(s.source,n,""),o=Lt(s.target,n,"");return[{payload:t,name:"".concat(i," - ").concat(o),value:Lt(s,"value")}]}return[]},jN=function(e){function t(){var a;sbe(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return a=obe(this,t,[].concat(s)),Lv(a,"state",{activeElement:null,activeElementType:null,isTooltipActive:!1,nodes:[],links:[]}),a}return dbe(t,e),ibe(t,[{key:"handleMouseEnter",value:function(n,s,i){var o=this.props,l=o.onMouseEnter,c=o.children,d=Ur(c,tt);d?this.setState(function(u){return d.props.trigger==="hover"?Er(Er({},u),{},{activeElement:n,activeElementType:s,isTooltipActive:!0}):u},function(){l&&l(n,s,i)}):l&&l(n,s,i)}},{key:"handleMouseLeave",value:function(n,s,i){var o=this.props,l=o.onMouseLeave,c=o.children,d=Ur(c,tt);d?this.setState(function(u){return d.props.trigger==="hover"?Er(Er({},u),{},{activeElement:void 0,activeElementType:void 0,isTooltipActive:!1}):u},function(){l&&l(n,s,i)}):l&&l(n,s,i)}},{key:"handleClick",value:function(n,s,i){var o=this.props,l=o.onClick,c=o.children,d=Ur(c,tt);d&&d.props.trigger==="click"&&(this.state.isTooltipActive?this.setState(function(u){return Er(Er({},u),{},{activeElement:void 0,activeElementType:void 0,isTooltipActive:!1})}):this.setState(function(u){return Er(Er({},u),{},{activeElement:n,activeElementType:s,isTooltipActive:!0})})),l&&l(n,s,i)}},{key:"renderLinks",value:function(n,s){var i=this,o=this.props,l=o.linkCurvature,c=o.link,d=o.margin,u=ya(d,"top")||0,m=ya(d,"left")||0;return le.createElement(ft,{className:"recharts-sankey-links",key:"recharts-sankey-links"},n.map(function(p,g){var x=p.sy,h=p.ty,v=p.dy,b=s[p.source],y=s[p.target],j=b.x+b.dx+m,_=y.x+m,w=pbe(j,_),k=w(l),N=w(1-l),P=b.y+x+v/2+u,A=y.y+h+v/2+u,M=Er({sourceX:j,targetX:_,sourceY:P,targetY:A,sourceControlX:k,targetControlX:N,sourceRelativeY:x,targetRelativeY:h,linkWidth:v,index:g,payload:Er(Er({},p),{},{source:b,target:y})},Qe(c,!1)),R={onMouseEnter:i.handleMouseEnter.bind(i,M,"link"),onMouseLeave:i.handleMouseLeave.bind(i,M,"link"),onClick:i.handleClick.bind(i,M,"link")};return le.createElement(ft,al({key:"link-".concat(p.source,"-").concat(p.target,"-").concat(p.value)},R),i.constructor.renderLinkItem(c,M))}))}},{key:"renderNodes",value:function(n){var s=this,i=this.props,o=i.node,l=i.margin,c=ya(l,"top")||0,d=ya(l,"left")||0;return le.createElement(ft,{className:"recharts-sankey-nodes",key:"recharts-sankey-nodes"},n.map(function(u,m){var p=u.x,g=u.y,x=u.dx,h=u.dy,v=Er(Er({},Qe(o,!1)),{},{x:p+d,y:g+c,width:x,height:h,index:m,payload:u}),b={onMouseEnter:s.handleMouseEnter.bind(s,v,"node"),onMouseLeave:s.handleMouseLeave.bind(s,v,"node"),onClick:s.handleClick.bind(s,v,"node")};return le.createElement(ft,al({key:"node-".concat(u.x,"-").concat(u.y,"-").concat(u.value)},b),s.constructor.renderNodeItem(o,v))}))}},{key:"renderTooltip",value:function(){var n=this.props,s=n.children,i=n.width,o=n.height,l=n.nameKey,c=Ur(s,tt);if(!c)return null;var d=this.state,u=d.isTooltipActive,m=d.activeElement,p=d.activeElementType,g={x:0,y:0,width:i,height:o},x=m?Sbe(m,p):mbe,h=m?Abe(m,p,l):[];return le.cloneElement(c,{viewBox:g,active:u,coordinate:x,label:"",payload:h})}},{key:"render",value:function(){if(!Xg(this))return null;var n=this.props,s=n.width,i=n.height,o=n.className,l=n.style,c=n.children,d=wE(n,rbe),u=this.state,m=u.links,p=u.nodes,g=Qe(d,!1);return le.createElement("div",{className:wt("recharts-wrapper",o),style:Er(Er({},l),{},{position:"relative",cursor:"default",width:s,height:i}),role:"region"},le.createElement(up,al({},g,{width:s,height:i}),X5(c),this.renderLinks(m,p),this.renderNodes(p)),this.renderTooltip())}}],[{key:"getDerivedStateFromProps",value:function(n,s){var i=n.data,o=n.width,l=n.height,c=n.margin,d=n.iterations,u=n.nodeWidth,m=n.nodePadding,p=n.sort;if(i!==s.prevData||o!==s.prevWidth||l!==s.prevHeight||!jl(c,s.prevMargin)||d!==s.prevIterations||u!==s.prevNodeWidth||m!==s.prevNodePadding||p!==s.sort){var g=o-(c&&c.left||0)-(c&&c.right||0),x=l-(c&&c.top||0)-(c&&c.bottom||0),h=Nbe({data:i,width:g,height:x,iterations:d,nodeWidth:u,nodePadding:m,sort:p}),v=h.links,b=h.nodes;return Er(Er({},s),{},{nodes:b,links:v,prevData:i,prevWidth:d,prevHeight:l,prevMargin:c,prevNodePadding:m,prevNodeWidth:u,prevIterations:d,prevSort:p})}return null}},{key:"renderLinkItem",value:function(n,s){if(le.isValidElement(n))return le.cloneElement(n,s);if(at(n))return n(s);var i=s.sourceX,o=s.sourceY,l=s.sourceControlX,c=s.targetX,d=s.targetY,u=s.targetControlX,m=s.linkWidth,p=wE(s,abe);return le.createElement("path",al({className:"recharts-sankey-link",d:`
          M`.concat(i,",").concat(o,`
          C`).concat(l,",").concat(o," ").concat(u,",").concat(d," ").concat(c,",").concat(d,`
        `),fill:"none",stroke:"#333",strokeWidth:m,strokeOpacity:"0.2"},Qe(p,!1)))}},{key:"renderNodeItem",value:function(n,s){return le.isValidElement(n)?le.cloneElement(n,s):at(n)?n(s):le.createElement(gf,al({className:"recharts-sankey-node",fill:"#0088fe",fillOpacity:"0.8"},Qe(s,!1),{role:"img"}))}}])}(f.PureComponent);Lv(jN,"displayName","Sankey");Lv(jN,"defaultProps",{nameKey:"name",dataKey:"value",nodePadding:10,nodeWidth:10,linkCurvature:.5,iterations:32,margin:{top:5,right:5,bottom:5,left:5},sort:!0});var XL=fu({chartName:"ScatterChart",GraphicalChild:Yl,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:ct},{axisType:"yAxis",AxisComp:rt},{axisType:"zAxis",AxisComp:Gl}],formatAxisMap:yf}),Rv=fu({chartName:"AreaChart",GraphicalChild:es,axisComponents:[{axisType:"xAxis",AxisComp:ct},{axisType:"yAxis",AxisComp:rt}],formatAxisMap:yf}),ci=fu({chartName:"ComposedChart",GraphicalChild:[Kt,es,pt,Yl],axisComponents:[{axisType:"xAxis",AxisComp:ct},{axisType:"yAxis",AxisComp:rt},{axisType:"zAxis",AxisComp:Gl}],formatAxisMap:yf});const Pbe=["admin","consultation","pole_director","works_director","hse_director","hr_director","hse_manager","regional_hse_manager","responsable","supervisor","user","hr"];function Cbe({isOpen:e,onClose:t}){const{t:a}=ut(),[n,s]=f.useState("all"),[i,o]=f.useState("user"),[l,c]=f.useState("high"),[d,u]=f.useState(""),[m,p]=f.useState(!1),[g,x]=f.useState(""),[h,v]=f.useState([]),[b,y]=f.useState(!1),[j,_]=f.useState([]);f.useEffect(()=>{e&&(s("all"),o("user"),c("high"),u(""),x(""),v([]),_([]),y(!1),p(!1))},[e]);const w=R=>{const O=`users.roles.${R}`,q=a(O);if(q!==O)return q;const S=`roles.${R}`,I=a(S);return I===S?R:I},k=f.useMemo(()=>new Set(j.map(R=>R.id)),[j]),N=f.useMemo(()=>{const R=String(l||"").toLowerCase();return R==="low"?{badge:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-200",ring:"ring-2 ring-green-200 dark:ring-green-900/40",label:a("notifications.urgent.urgencyLow")}:R==="high"?{badge:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-200",ring:"ring-2 ring-red-200 dark:ring-red-900/40",label:a("notifications.urgent.urgencyHigh")}:{badge:"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200",ring:"ring-2 ring-amber-200 dark:ring-amber-900/40",label:a("notifications.urgent.urgencyMedium")}},[l,a]);f.useEffect(()=>{if(!e||n!=="user_ids")return;const R=g.trim();if(R.length<2){v([]),y(!1);return}let O=!1;const q=setTimeout(async()=>{try{y(!0);const S=await ii.getAll({search:R,per_page:10,sort_by:"name",sort_order:"asc"});if(O)return;v(Array.isArray(S.data?.data)?S.data.data:[])}catch{O||v([])}finally{O||y(!1)}},250);return()=>{O=!0,clearTimeout(q)}},[e,n,g]);const P=R=>{R?.id&&(k.has(R.id)||_(O=>[...O,{id:R.id,name:R.name,email:R.email}]))},A=R=>{_(O=>O.filter(q=>q.id!==R))},M=async()=>{const R=d.trim();if(!R){K.error(a("notifications.urgent.requiredMessage"));return}if(n==="user_ids"&&j.length===0){K.error(a("notifications.urgent.noRecipients"));return}try{p(!0);const O={target:n,urgency:l,message:R};n==="role"&&(O.role=i),n==="user_ids"&&(O.user_ids=j.map(q=>q.id)),await zn.urgentSend(O),K.success(a("notifications.urgent.sentSuccess")),t?.()}catch(O){K.error(O?.response?.data?.message??a("notifications.urgent.sentError"))}finally{p(!1)}};return r.jsx(nt,{isOpen:e,onClose:t,title:a("notifications.urgent.composerTitle"),size:"lg",children:r.jsxs("div",{className:"space-y-5",children:[r.jsx("div",{className:`rounded-2xl p-4 ${N.ring} bg-gray-50 dark:bg-gray-900/30`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-white dark:bg-gray-900 flex items-center justify-center ring-1 ring-gray-200 dark:ring-gray-700",children:r.jsx(Qt,{className:"w-5 h-5 text-gray-700 dark:text-gray-200"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"text-sm font-extrabold text-gray-900 dark:text-gray-100",children:a("notifications.urgent.composerTitle")}),r.jsx("div",{className:"mt-1",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-bold ${N.badge}`,children:N.label})})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200",children:a("notifications.urgent.targetLabel")}),r.jsxs(Ze,{value:n,onChange:R=>{s(R.target.value),x(""),v([]),_([])},className:"mt-1 w-full",children:[r.jsx("option",{value:"all",children:a("notifications.urgent.targetAll")}),r.jsx("option",{value:"role",children:a("notifications.urgent.targetRole")}),r.jsx("option",{value:"user_ids",children:a("notifications.urgent.targetUsers")})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200",children:a("notifications.urgent.urgencyLabel")}),r.jsxs(Ze,{value:l,onChange:R=>c(R.target.value),className:"mt-1 w-full",children:[r.jsx("option",{value:"low",children:a("notifications.urgent.urgencyLow")}),r.jsx("option",{value:"medium",children:a("notifications.urgent.urgencyMedium")}),r.jsx("option",{value:"high",children:a("notifications.urgent.urgencyHigh")})]})]})]}),n==="role"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200",children:a("notifications.urgent.roleLabel")}),r.jsx(Ze,{value:i,onChange:R=>o(R.target.value),className:"mt-1 w-full",children:Pbe.map(R=>r.jsx("option",{value:R,children:w(R)},R))})]}),n==="user_ids"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200",children:a("notifications.urgent.usersLabel")}),r.jsxs("div",{className:"relative",children:[r.jsx(Yr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",value:g,onChange:R=>x(R.target.value),placeholder:a("notifications.urgent.usersSearchPlaceholder"),className:"input pl-10"})]}),j.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(R=>r.jsxs("div",{className:"inline-flex items-center gap-2 px-2.5 py-1 rounded-full bg-gray-100 dark:bg-gray-700 text-sm",children:[r.jsx("span",{className:"text-gray-800 dark:text-gray-100 font-medium",children:R.name}),r.jsx("button",{type:"button",onClick:()=>A(R.id),className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600",title:a("common.remove"),children:r.jsx(qt,{className:"w-3.5 h-3.5 text-gray-500 dark:text-gray-300"})})]},R.id))}),(b||h.length>0)&&r.jsx("div",{className:"rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:b?r.jsx("div",{className:"p-3 text-sm text-gray-500 dark:text-gray-400",children:a("common.loading")}):r.jsx("div",{className:"max-h-56 overflow-y-auto",children:h.filter(R=>!k.has(R.id)).map(R=>r.jsxs("button",{type:"button",onClick:()=>P(R),className:"w-full text-left px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-800 flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 truncate",children:R.name}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:R.email})]}),r.jsx(Dm,{className:"w-4 h-4 text-hse-primary shrink-0"})]},R.id))})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200",children:a("notifications.urgent.messageLabel")}),r.jsx("textarea",{value:d,onChange:R=>u(R.target.value),rows:5,className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm",placeholder:a("notifications.urgent.messagePlaceholder")})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-end gap-2 pt-2",children:[r.jsx("button",{onClick:t,className:"px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 text-sm font-semibold",disabled:m,children:a("common.cancel")}),r.jsx("button",{onClick:M,className:"inline-flex items-center justify-center gap-2 px-4 py-2 rounded-lg bg-hse-primary text-white hover:bg-hse-primary/90 text-sm font-semibold disabled:opacity-50",disabled:m,children:a(m?"notifications.urgent.sending":"notifications.urgent.send")})]})]})})}function Ebe({enabled:e}){const{t}=ut(),[a,n]=f.useState([]),[s,i]=f.useState(null),[o,l]=f.useState(0),[c,d]=f.useState(null),u=f.useRef(new Set),m=f.useRef(null),p=f.useRef(!1),g=f.useRef(0),x=f.useMemo(()=>{const w=s?.data?.forced_visibility_seconds,k=Number(w);return!Number.isFinite(k)||k<=0?5:Math.min(60,Math.max(1,k))},[s]),h=s?.urgency??s?.data?.urgency??"medium",v=String(h).toLowerCase(),b={low:{ring:"ring-2 ring-green-200 dark:ring-green-900/40",badge:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-200",accent:"from-green-500 to-emerald-500",icon:"text-green-600 dark:text-green-300",title:t("notifications.urgent.urgencyLow")},medium:{ring:"ring-2 ring-amber-200 dark:ring-amber-900/40",badge:"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200",accent:"from-amber-500 to-yellow-500",icon:"text-amber-600 dark:text-amber-300",title:t("notifications.urgent.urgencyMedium")},high:{ring:"ring-2 ring-red-200 dark:ring-red-900/40",badge:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-200",accent:"from-red-500 to-rose-500",icon:"text-red-600 dark:text-red-300",title:t("notifications.urgent.urgencyHigh")}},y=b[v]??b.medium;f.useEffect(()=>{if(!e)return;const w=()=>{l(N=>N>0?N-1:0)};if(!s)return;l(x);const k=setInterval(w,1e3);return()=>clearInterval(k)},[e,s,x]),f.useEffect(()=>{if(!e){n([]),i(null),l(0),d(null);return}let w=!1;const k=()=>{m.current&&(clearTimeout(m.current),m.current=null)},N=()=>{const q=Math.min(6,Math.max(0,g.current)),S=1e4*Math.pow(2,q),I=Math.floor(Math.random()*1e3);return Math.min(12e4,S+I)},P=O=>{k(),m.current=setTimeout(()=>{M()},O)},A=async()=>{if(!p.current&&!document.hidden){p.current=!0;try{const q=(await zn.urgentUnread({after_id:c??void 0,limit:20})).data?.data,S=q?.items??[],I=q?.last_id;if(g.current=0,(typeof I=="number"||typeof I=="string"&&String(I)!=="")&&d(E=>{const W=E===null?null:Number(E),B=Number(I);return Number.isFinite(B)?W===null?B:Math.max(W,B):E}),Array.isArray(S)&&S.length>0){const E=S.filter(W=>!W?.id||u.current.has(W.id)?!1:(u.current.add(W.id),!0));E.length>0&&n(W=>[...W,...E])}}catch{g.current+=1}finally{p.current=!1}}},M=async()=>{w||(await A(),!w&&P(N()))};M();const R=()=>{!document.hidden&&!p.current&&!w&&A()};return document.addEventListener("visibilitychange",R),()=>{w=!0,k(),document.removeEventListener("visibilitychange",R)}},[e,c]),f.useEffect(()=>{if(!e||s||a.length===0)return;const w=[...a],k=w[0];i(k),n(w.slice(1));const N=k?.data?.forced_visibility_seconds,P=Number(N),A=Number.isFinite(P)&&P>0?Math.min(60,Math.max(1,P)):5;l(A)},[e,s,a]);const j=o<=0,_=async()=>{if(!s||!j)return;const w=s;i(null);try{await zn.markAsRead(w.id)}catch{}};return!e||!s?null:r.jsx(nt,{isOpen:!0,onClose:_,title:t("notifications.urgent.receivedTitle"),size:"md",showCloseButton:!1,backdropClassName:"bg-black/30 backdrop-blur-sm",modalClassName:"shadow-2xl",children:r.jsxs("div",{className:`rounded-2xl ${y.ring} overflow-hidden`,children:[r.jsx("div",{className:`h-1.5 bg-gradient-to-r ${y.accent}`}),r.jsxs("div",{className:"p-5",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex items-start gap-3 min-w-0",children:[r.jsx("div",{className:`mt-0.5 w-10 h-10 rounded-xl bg-gray-50 dark:bg-gray-900 flex items-center justify-center ${y.ring}`,children:r.jsx(Qt,{className:`w-5 h-5 ${y.icon}`})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"text-base font-extrabold text-gray-900 dark:text-gray-100 truncate",children:s.title||t("notifications.urgent.receivedTitle")}),r.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[r.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-bold ${y.badge}`,children:y.title}),!j&&r.jsx("span",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400",children:t("notifications.urgent.closeIn",{seconds:o})})]})]})]}),r.jsx("button",{type:"button",onClick:_,disabled:!j,className:`shrink-0 inline-flex items-center justify-center px-4 py-2 rounded-xl text-sm font-extrabold transition-colors disabled:opacity-50 ${j?"bg-hse-primary text-white hover:bg-hse-primary/90":"bg-gray-200 text-gray-500 dark:bg-gray-700 dark:text-gray-300"}`,title:j?t("notifications.urgent.close"):t("notifications.urgent.closeIn",{seconds:o}),children:j?t("notifications.urgent.close"):`${o}s`})]}),r.jsx("div",{className:"mt-4 whitespace-pre-wrap text-sm leading-relaxed text-gray-800 dark:text-gray-100",children:s.message})]})]})})}function ps(){const[e,t]=f.useState(!1),[a,n]=f.useState(!1),[s,i]=f.useState(!1),[o,l]=f.useState(!1),[c,d]=f.useState(!1),[u,m]=f.useState(0),[p,g]=f.useState([]),[x,h]=f.useState(!1),[v,b]=f.useState(!1),[y,j]=f.useState(""),[_,w]=f.useState(""),[k,N]=f.useState(""),[P,A]=f.useState(""),[M,R]=f.useState(""),[O,q]=f.useState(0),S=f.useRef(!1),{user:I,logout:E,isAdmin:W}=At(),{simulatedRole:B,setSimulatedRole:C,clearSimulatedRole:D,projectScope:z,setProjectScope:L}=Wl(),{isDark:X,toggleTheme:H}=$y(),{t:F}=ut(),ke=Tn(),ae=Zr(),ue=f.useRef(null),Z=f.useRef(null),me=f.useRef(null),ge=W(),se=I?.role==="dev",he=se&&B?B:I?.role,T=["admin","consultation","pole_director","works_director","hse_director","hr_director"],oe=ge||I?.role==="dev"&&!B||T.includes(he),G=ae.pathname.startsWith("/admin"),V=oe,Y=Fe=>{const Ge=String(Fe||"").trim();if(!Ge)return"";const gt=`roles.${Ge}`,cr=F(gt);return cr===gt?Ge:cr};f.useEffect(()=>{if(!I)return;let Fe=null,Ge=!1;const gt=async()=>{if(!S.current&&!document.hidden){S.current=!0;try{const Le=await zn.getUnreadCount();Ge||m(Le.data?.data?.count??0)}catch(Le){Le.response?.status!==403&&Le.response?.status!==401&&console.error("Error fetching notifications:",Le)}finally{S.current=!1}}},cr=()=>{Ge||(Fe=setTimeout(()=>{gt().then(cr)},6e4))};gt().then(cr);const ve=()=>{!document.hidden&&!S.current&&gt()};return document.addEventListener("visibilitychange",ve),()=>{Ge=!0,Fe&&clearTimeout(Fe),document.removeEventListener("visibilitychange",ve)}},[I]),f.useEffect(()=>{if(!I||!s)return;(async()=>{try{const Ge=await zn.getAll({per_page:5});g(Ge.data?.data??[]);const gt=await zn.getUnreadCount();m(gt.data?.data?.count??0)}catch(Ge){Ge.response?.status!==403&&Ge.response?.status!==401&&console.error("Error fetching notifications:",Ge)}})()},[I,s]),f.useEffect(()=>{if(!x)return;const Fe=setInterval(()=>{q(Ge=>Ge+1)},500);return()=>clearInterval(Fe)},[x]);const ce=async()=>{await E(),ke("/login")},je=Fe=>{const Ge={kpi_submitted:{icon:Ra,color:"text-blue-500",bg:"bg-blue-100 dark:bg-blue-900/30"},kpi_approved:{icon:Xt,color:"text-green-500",bg:"bg-green-100 dark:bg-green-900/30"},kpi_rejected:{icon:Zn,color:"text-red-500",bg:"bg-red-100 dark:bg-red-900/30"},project_assigned:{icon:_z,color:"text-purple-500",bg:"bg-purple-100 dark:bg-purple-900/30"},sor_submitted:{icon:Qt,color:"text-orange-500",bg:"bg-orange-100 dark:bg-orange-900/30"},sor_corrected:{icon:Xt,color:"text-green-500",bg:"bg-green-100 dark:bg-green-900/30"},training_submitted:{icon:eA,color:"text-indigo-500",bg:"bg-indigo-100 dark:bg-indigo-900/30"},awareness_submitted:{icon:sa,color:"text-teal-500",bg:"bg-teal-100 dark:bg-teal-900/30"},worker_training_expiring:{icon:wn,color:"text-amber-500",bg:"bg-amber-100 dark:bg-amber-900/30"},worker_training_expired:{icon:wn,color:"text-red-500",bg:"bg-red-100 dark:bg-red-900/30"},reminder:{icon:oa,color:"text-yellow-500",bg:"bg-yellow-100 dark:bg-yellow-900/30"},system:{icon:mc,color:"text-gray-500",bg:"bg-gray-100 dark:bg-gray-700"},info:{icon:vl,color:"text-blue-500",bg:"bg-blue-100 dark:bg-blue-900/30"},warning:{icon:Qt,color:"text-yellow-500",bg:"bg-yellow-100 dark:bg-yellow-900/30"},success:{icon:Xt,color:"text-green-500",bg:"bg-green-100 dark:bg-green-900/30"},error:{icon:Zn,color:"text-red-500",bg:"bg-red-100 dark:bg-red-900/30"}};return Ge[Fe]||Ge.info},re=async Fe=>{if(!Fe.read_at)try{await zn.markAsRead(Fe.id),m(Ge=>Math.max(0,Ge-1)),g(Ge=>Ge.map(gt=>gt.id===Fe.id?{...gt,read_at:new Date().toISOString()}:gt))}catch(Ge){console.error("Error marking notification as read:",Ge)}if(i(!1),Fe.action_url){ke(Fe.action_url);return}switch(Fe.type){case"kpi_approved":case"kpi_rejected":case"kpi_submitted":ke(oe?"/admin/kpi":"/kpi/history");break;case"project_assigned":ke(oe?"/admin/projects":"/my-projects");break;case"sor_submitted":case"sor_corrected":ke(xe?"/sor":"/user/sor");break;case"training_submitted":ke("/training");break;case"awareness_submitted":ke("/awareness");break}},U=async()=>{try{await zn.markAllAsRead(),m(0),g(Fe=>Fe.map(Ge=>({...Ge,read_at:new Date().toISOString()})))}catch(Fe){console.error("Error marking all as read:",Fe)}},xe=he==="user",J=he==="hr",Q=he==="hr_director",ne=[{to:"/admin",icon:mb,label:F("nav.dashboard")},{to:"/admin/users",icon:sa,label:F("users.title")},{to:"/admin/projects",icon:hn,label:F("projects.title")},{to:"/admin/kpi",icon:tA,label:F("kpi.title")},{to:"/admin/kpi-history",icon:ub,label:F("kpi.history")},{to:"/admin/library",icon:eA,label:F("nav.library")},{to:"/admin/hse-events",icon:gh,label:F("nav.hseEvents")},{to:"/admin/monthly-measurements",icon:lb,label:F("nav.monthlyMeasurements")},{to:"/admin/lighting",icon:pb,label:F("nav.lightingMeasurements")},{to:"/admin/waste-management",icon:Nt,label:F("nav.wasteManagement")},{to:"/admin/effectif",icon:fb,label:F("effectif.title")},{to:"/admin/training",icon:js,label:F("training.navLabel")},{to:"/admin/awareness",icon:mc,label:F("awareness.navLabel")},{to:"/admin/sor",icon:hh,label:F("sor.title")},{to:"/admin/work-permits",icon:ph,label:F("workPermits.title")},{to:"/admin/inspections",icon:fh,label:F("inspections.title")},{to:"/admin/regulatory-watch",icon:Vu,label:F("regulatoryWatch.nav")},{to:"/admin/workers",icon:wn,label:F("workers.title")},{to:"/admin/ppe",icon:jm,label:F("ppe.nav")},{to:"/admin/subcontractors",icon:db,label:F("subcontractors.title")}],ee=[{to:"/admin",icon:mb,label:F("nav.dashboard")},{to:"/admin/kpi",icon:tA,label:F("kpi.title")},{to:"/admin/kpi-history",icon:ub,label:F("kpi.history")},{to:"/admin/hse-events",icon:gh,label:F("nav.hseEvents")},{to:"/admin/monthly-measurements",icon:lb,label:F("nav.monthlyMeasurements")},{to:"/admin/lighting",icon:pb,label:F("nav.lightingMeasurements")},{to:"/admin/waste-management",icon:Nt,label:F("nav.wasteManagement")},{to:"/admin/training",icon:js,label:F("training.navLabel")},{to:"/admin/awareness",icon:mc,label:F("awareness.navLabel")},{to:"/admin/sor",icon:hh,label:F("sor.title")},{to:"/admin/work-permits",icon:ph,label:F("workPermits.title")},{to:"/admin/inspections",icon:fh,label:F("inspections.title")},{to:"/admin/regulatory-watch",icon:Vu,label:F("regulatoryWatch.nav")},{to:"/admin/workers",icon:wn,label:F("workers.title")},{to:"/admin/ppe",icon:jm,label:F("ppe.nav")},{to:"/admin/subcontractors",icon:db,label:F("subcontractors.title")}],ye=[{to:"/admin",icon:mb,label:F("nav.dashboard")},{to:"/admin/effectif",icon:fb,label:F("effectif.title")},{to:"/admin/workers",icon:wn,label:F("workers.title")}],te=()=>{j(""),w(""),N(""),A(""),R("")},Ne=()=>{h(!1)},Ce=()=>{try{Ba.isRecording()?(Ba.stop(),K.success(F("bugReport.recordingStopped"))):(Ba.start({user:I}),h(!1),K.success(F("bugReport.recordingStarted")),K(F("bugReport.tryReplicateHint"),{duration:7e3}))}catch{K.error(F("errors.somethingWentWrong"))}},Ue=()=>{try{Ba.clear(),K.success(F("bugReport.recordingCleared"))}catch{K.error(F("errors.somethingWentWrong"))}},fe=()=>{try{Ba.clearLatestUploadedFile(),K.success(F("bugReport.capturedFileCleared"))}catch{K.error(F("errors.somethingWentWrong"))}},Te=Fe=>{const Ge=Number(Fe);if(!Number.isFinite(Ge)||Ge<=0)return"0 B";const gt=["B","KB","MB","GB"],cr=Math.min(gt.length-1,Math.floor(Math.log(Ge)/Math.log(1024)));return`${(Ge/Math.pow(1024,cr)).toFixed(cr===0?0:1)} ${gt[cr]}`},we=Fe=>{const Ge=Math.max(0,Math.floor(Number(Fe)||0)),gt=Math.floor(Ge/60),cr=Math.floor(gt/60),ve=gt%60,Le=Ge%60;return cr>0?`${cr}h ${ve}m ${Le}s`:gt>0?`${gt}m ${Le}s`:`${Le}s`},Ee=async()=>{if(!v){if(Ba.isRecording()){K.error(F("bugReport.stopBeforeSubmit"));return}if(!y||String(y).trim()===""){K.error(F("bugReport.commentRequired"));return}try{b(!0);const Fe=Ba.getDraft();if(!Fe?.started_at){K.error(F("bugReport.recordingRequired"));return}const Ge=Ba.getLatestUploadedFile()||null;await cg.submit({...Fe,comment:String(y).trim(),severity:_||null,impact:k||null,reproducibility:P||null,extra_notes:M||null,attachment:Ge}),Ba.clear(),te(),h(!1),K.success(F("bugReport.submitted"))}catch(Fe){K.error(Fe.response?.data?.message??F("errors.somethingWentWrong"))}finally{b(!1)}}},Be=[{to:"/dashboard",icon:sk,label:F("nav.dashboard")},{to:"/my-projects",icon:cb,label:F("nav.myProjects")},{to:"/kpi/submit",icon:vz,label:F("kpi.submission")},{to:"/kpi/history",icon:ub,label:F("kpi.history")},{to:"/deviations",icon:bz,label:F("dashboard.themes.deviations")},{to:"/training",icon:js,label:F("training.navLabel")},{to:"/awareness",icon:mc,label:F("awareness.navLabel")},{to:"/work-permits",icon:ph,label:F("workPermits.title")},{to:"/inspections",icon:fh,label:F("inspections.title")},{to:"/regulatory-watch",icon:Vu,label:F("regulatoryWatch.nav")},{to:"/hse-events",icon:gh,label:F("nav.hseEvents")},{to:"/monthly-measurements",icon:lb,label:F("nav.monthlyMeasurements")},{to:"/lighting",icon:pb,label:F("nav.lightingMeasurements")},{to:"/waste-management",icon:Nt,label:F("nav.wasteManagement")},{to:"/workers",icon:wn,label:F("workers.title")},{to:"/ppe",icon:jm,label:F("ppe.nav")},{to:"/subcontractors",icon:db,label:F("subcontractors.title")}],be=[{to:"/sor",icon:hh,label:F("sor.title")},{to:"/sor/projects",icon:cb,label:F("nav.myProjects")},{to:"/sor/awareness",icon:mc,label:F("awareness.navLabel")}],$e=[{to:"/supervisor",icon:hh,label:F("sor.title")},{to:"/supervisor/projects",icon:cb,label:F("nav.myProjects")},{to:"/supervisor/awareness",icon:mc,label:F("awareness.navLabel")},{to:"/supervisor/training",icon:js,label:F("training.navLabel")},{to:"/supervisor/work-permits",icon:ph,label:F("workPermits.title")},{to:"/supervisor/inspections",icon:fh,label:F("inspections.title")},{to:"/supervisor/regulatory-watch",icon:Vu,label:F("regulatoryWatch.nav")},{to:"/supervisor/workers",icon:wn,label:F("workers.title")},{to:"/supervisor/ppe",icon:jm,label:F("ppe.nav")}],Ve=[{to:"/hr/workers",icon:wn,label:F("workers.title")},{to:"/hr/effectif",icon:fb,label:F("effectif.title")}],bt=he==="admin"||he==="consultation"?ne:he==="pole_director"||he==="works_director"||he==="hse_director"?ee:he==="hr_director"?ye:he==="user"?be:he==="supervisor"?$e:he==="hr"?Ve:Be,Pt=bt.some(Fe=>String(Fe?.to||"").endsWith("/regulatory-watch")),It=f.useMemo(()=>ae.pathname.startsWith("/admin")?"/admin/regulatory-watch":ae.pathname.startsWith("/supervisor")?"/supervisor/regulatory-watch":"/regulatory-watch",[ae.pathname]),Ct=ae.pathname.includes("/regulatory-watch"),Yt=f.useMemo(()=>bt.filter(Fe=>!String(Fe?.to||"").endsWith("/regulatory-watch")),[bt]),Ar=!J&&!Q,[lt,Ft]=f.useState(()=>ae.pathname.startsWith("/heavy-machinery")),[Pr,an]=f.useState(()=>ae.pathname.includes("/regulatory-watch"));return f.useEffect(()=>{if(!lt)return;const Fe=ue.current,Ge=Z.current;if(!Fe||!Ge)return;const gt=window.setTimeout(()=>{try{Ge.scrollIntoView({behavior:"smooth",block:"nearest"})}catch{}},0);return()=>window.clearTimeout(gt)},[lt]),f.useEffect(()=>{if(!Pr)return;const Fe=ue.current,Ge=me.current;if(!Fe||!Ge)return;const gt=window.setTimeout(()=>{try{Ge.scrollIntoView({behavior:"smooth",block:"nearest"})}catch{}},0);return()=>window.clearTimeout(gt)},[Pr]),r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950",children:[e&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>t(!1)}),r.jsx("aside",{className:`fixed inset-y-0 left-0 z-50 w-72 bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-300 ease-in-out lg:translate-x-0 ${e?"translate-x-0":"-translate-x-full"}`,children:r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>ke(oe||G?"/admin":"/dashboard"),children:[r.jsx("img",{src:Vg,alt:F("common.appName"),className:"h-10 w-10 object-contain rounded-lg"}),r.jsxs("div",{children:[r.jsx("h1",{className:"font-bold text-sgtm-orange",children:F("common.companyName")}),r.jsx("p",{className:"text-xs text-gray-500",children:F("common.appName")})]})]}),r.jsx("button",{onClick:()=>t(!1),className:"lg:hidden p-2 rounded-lg hover:bg-gray-100",children:r.jsx(qt,{className:"w-5 h-5"})})]}),r.jsxs("nav",{ref:ue,className:"flex-1 p-4 space-y-1 overflow-y-auto scrollbar-thin",children:[r.jsx("div",{className:"mb-4",children:r.jsx("span",{className:"px-4 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:F(G?"nav.administration":"nav.dashboard")})}),Yt.map(Fe=>r.jsxs(Bi,{to:Fe.to,end:Fe.to==="/admin"||Fe.to==="/dashboard"||Fe.to==="/sor",className:({isActive:Ge})=>Ge?"sidebar-link-active":"sidebar-link",onClick:()=>t(!1),children:[r.jsx(Fe.icon,{className:"w-5 h-5"}),r.jsx("span",{children:Fe.label})]},Fe.to)),Pt&&r.jsxs("div",{className:"pt-2",children:[r.jsxs("button",{type:"button",onClick:()=>an(Fe=>!Fe),className:Pr||Ct?"sidebar-link-active w-full justify-between":"sidebar-link w-full justify-between",children:[r.jsxs("span",{className:"flex items-center gap-3",children:[r.jsx(Vu,{className:"w-5 h-5"}),r.jsx("span",{children:F("regulatoryWatch.nav")})]}),r.jsx(Vr,{className:Pr?"w-4 h-4 rotate-180 transition-transform":"w-4 h-4 transition-transform"})]}),Pr&&r.jsxs("div",{className:"mt-1 ml-4 space-y-1",children:[r.jsx(Bi,{to:`${It}/sst`,className:({isActive:Fe})=>Fe?"sidebar-link-active":"sidebar-link",onClick:()=>t(!1),children:r.jsxs("span",{className:"flex items-center gap-3",children:[r.jsx(pr,{className:"w-5 h-5"}),r.jsx("span",{children:F("regulatoryWatch.sstNav")})]})}),r.jsx(Bi,{to:`${It}/environment`,className:({isActive:Fe})=>Fe?"sidebar-link-active":"sidebar-link",onClick:()=>t(!1),ref:me,children:r.jsxs("span",{className:"flex items-center gap-3",children:[r.jsx(Nt,{className:"w-5 h-5"}),r.jsx("span",{children:F("regulatoryWatch.environmentNav")})]})})]})]}),Ar&&r.jsxs("div",{className:"pt-2",children:[r.jsxs("button",{type:"button",onClick:()=>Ft(Fe=>!Fe),className:lt?"sidebar-link-active w-full justify-between":"sidebar-link w-full justify-between",children:[r.jsxs("span",{className:"flex items-center gap-3",children:[r.jsx(cf,{className:"w-5 h-5"}),r.jsx("span",{children:F("heavyMachinery.title")})]}),r.jsx(Vr,{className:lt?"w-4 h-4 rotate-180 transition-transform":"w-4 h-4 transition-transform"})]}),lt&&r.jsxs("div",{className:"mt-1 ml-4 space-y-1",children:[r.jsx(Bi,{to:"/heavy-machinery/view-machines",className:({isActive:Fe})=>Fe?"sidebar-link-active":"sidebar-link",onClick:()=>t(!1),children:r.jsxs("span",{className:"flex items-center gap-3",children:[r.jsx(Hz,{className:"w-5 h-5"}),r.jsx("span",{children:F("heavyMachinery.viewMachines.nav")})]})}),r.jsx(Bi,{to:"/heavy-machinery/global-search",className:({isActive:Fe})=>Fe?"sidebar-link-active":"sidebar-link",onClick:()=>t(!1),children:r.jsxs("span",{className:"flex items-center gap-3",children:[r.jsx(Yr,{className:"w-5 h-5"}),r.jsx("span",{children:F("heavyMachinery.globalSearch.nav")})]})}),r.jsx(Bi,{to:"/heavy-machinery/expired-documentation",className:({isActive:Fe})=>Fe?"sidebar-link-active":"sidebar-link",onClick:()=>t(!1),ref:Z,children:r.jsxs("span",{className:"flex items-center gap-3",children:[r.jsx(jz,{className:"w-5 h-5"}),r.jsx("span",{children:F("heavyMachinery.expiredDocumentation.nav")})]})})]})]})]}),r.jsx("div",{className:"px-4 py-2 border-t border-gray-100 dark:border-gray-700",children:r.jsx("span",{className:"text-xs text-gray-400",children:Y(he)})}),r.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[r.jsx("div",{className:"w-10 h-10 bg-hse-primary rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white font-semibold",children:I?.name?.charAt(0)?.toUpperCase()||"U"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:I?.name}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:Y(I?.role)})]})]})})]})}),r.jsxs("div",{className:"lg:pl-72",children:[r.jsx("header",{className:"sticky top-0 z-[10000] bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center h-16 px-4 sm:px-6",children:[r.jsx("button",{onClick:()=>t(!0),className:"lg:hidden mr-auto p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:r.jsx(Dz,{className:"w-6 h-6 dark:text-gray-300"})}),r.jsx("div",{className:"flex-1"}),r.jsxs("div",{className:"flex items-center gap-2",children:[se&&r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>{l(!o),i(!1),n(!1)},className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:F("devTools.title"),children:[r.jsx("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:F("devTools.shortLabel")}),r.jsx(Vr,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})]}),o&&r.jsxs("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 py-2 animate-fade-in z-50",children:[r.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 dark:border-gray-700",children:[r.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:F("devTools.title")}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:F("devTools.description")})]}),r.jsxs("div",{className:"px-4 py-3 space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400",children:F("devTools.simulatedRole")}),r.jsxs("select",{value:B??"",onChange:Fe=>C(Fe.target.value||null),className:"mt-1 w-full bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg px-3 py-2 text-sm",children:[r.jsx("option",{value:"",children:F("devTools.none")}),r.jsx("option",{value:"admin",children:"admin"}),r.jsx("option",{value:"hse_manager",children:"hse_manager"}),r.jsx("option",{value:"regional_hse_manager",children:"regional_hse_manager"}),r.jsx("option",{value:"responsable",children:"responsable"}),r.jsx("option",{value:"supervisor",children:"supervisor"}),r.jsx("option",{value:"user",children:"user"}),r.jsx("option",{value:"hr",children:"hr"}),r.jsx("option",{value:"pole_director",children:"pole_director"}),r.jsx("option",{value:"works_director",children:"works_director"}),r.jsx("option",{value:"hse_director",children:"hse_director"}),r.jsx("option",{value:"hr_director",children:"hr_director"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400",children:F("devTools.projectScope")}),r.jsxs("select",{value:z,onChange:Fe=>L(Fe.target.value),className:"mt-1 w-full bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg px-3 py-2 text-sm",children:[r.jsx("option",{value:Va.ALL,children:F("common.allProjects")}),r.jsx("option",{value:Va.ASSIGNED,children:F("devTools.assignedOnly")})]})]}),r.jsx("div",{className:"flex items-center justify-end gap-2 pt-1",children:r.jsx("button",{onClick:()=>{D(),L(Va.ALL),l(!1)},className:"text-xs font-semibold px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700",children:F("common.reset")})})]})]})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("button",{onClick:Fe=>{if(ge&&(Fe.ctrlKey||Fe.metaKey)){ke("/admin/bug-reports");return}h(!0),i(!1),n(!1),l(!1)},className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-hse-primary text-white hover:bg-hse-primary/90 transition-colors text-sm font-semibold",title:F("bugReport.open"),children:[r.jsx(_5,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:F("bugReport.open")})]})}),V&&r.jsxs("button",{onClick:()=>{d(!0),i(!1),n(!1),l(!1)},className:"hidden sm:inline-flex items-center gap-2 px-3 py-2 rounded-lg border border-red-200 dark:border-red-900/40 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors text-sm font-semibold text-red-700 dark:text-red-200",title:F("notifications.urgent.sendButton"),children:[r.jsx(gh,{className:"w-4 h-4"}),F("notifications.urgent.sendButton")]}),r.jsx(D5,{variant:"compact"}),r.jsx("button",{onClick:H,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:F(X?"common.lightMode":"common.darkMode"),children:X?r.jsx(qy,{className:"w-5 h-5 text-yellow-500"}):r.jsx(ik,{className:"w-5 h-5 text-gray-600"})}),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>{i(!s),n(!1),l(!1)},className:"relative p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[r.jsx(vl,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),u>0&&r.jsx("span",{className:"absolute top-1 right-1 w-4 h-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:u>9?"9+":u})]}),s&&r.jsxs("div",{className:"absolute right-0 mt-2 w-[calc(100vw-2rem)] max-w-96 sm:w-96 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 animate-fade-in z-50",children:[r.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:F("notifications.title")}),u>0&&r.jsx("button",{onClick:U,className:"text-xs text-hse-primary hover:underline",children:F("notifications.markAllRead")})]}),r.jsx("div",{className:"max-h-80 overflow-y-auto",children:p.length>0?p.map(Fe=>{const Ge=je(Fe.type),gt=Ge.icon;return r.jsxs("div",{onClick:()=>re(Fe),className:`px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer border-b border-gray-50 dark:border-gray-700/50 last:border-0 flex gap-3 ${Fe.read_at?"":"bg-blue-50/30 dark:bg-blue-900/10"}`,children:[r.jsx("div",{className:`w-9 h-9 rounded-full ${Ge.bg} flex items-center justify-center flex-shrink-0`,children:r.jsx(gt,{className:`w-4 h-4 ${Ge.color}`})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsx("p",{className:`text-sm ${Fe.read_at?"font-medium":"font-semibold"} text-gray-900 dark:text-gray-100 line-clamp-1`,children:Fe.title}),!Fe.read_at&&r.jsx("span",{className:"w-2 h-2 bg-hse-primary rounded-full flex-shrink-0 mt-1.5"})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5 line-clamp-2",children:Fe.message}),Fe.project&&r.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1 flex items-center gap-1",children:[r.jsx(hn,{className:"w-3 h-3"}),Fe.project.name]}),r.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:[new Date(Fe.created_at).toLocaleDateString()," ",new Date(Fe.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),Fe.action_url&&r.jsx(xz,{className:"w-4 h-4 text-gray-400 flex-shrink-0 mt-1"})]},Fe.id)}):r.jsxs("div",{className:"px-4 py-12 text-center",children:[r.jsx(vl,{className:"w-10 h-10 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:F("notifications.noNotifications")})]})}),p.length>0&&r.jsx("div",{className:"px-4 py-2 border-t border-gray-100 dark:border-gray-700 text-center",children:r.jsx("button",{onClick:()=>{i(!1),ke("/notifications")},className:"text-sm text-hse-primary hover:underline",children:F("notifications.viewAll")})})]})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>{n(!a),i(!1),l(!1)},className:"flex items-center gap-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[r.jsx("div",{className:"w-8 h-8 bg-hse-primary rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm font-semibold",children:I?.name?.charAt(0)?.toUpperCase()||"U"})}),r.jsx("span",{className:"hidden sm:block text-sm font-medium text-gray-700 dark:text-gray-300",children:I?.name?.split(" ")[0]}),r.jsx(Vr,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})]}),a&&r.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 py-2 animate-fade-in",children:[r.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 dark:border-gray-700",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:I?.name}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:I?.email})]}),r.jsxs("div",{className:"py-1",children:[r.jsxs(Bi,{to:oe?"/admin/profile":"/profile",className:"flex items-center gap-3 px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",onClick:()=>n(!1),children:[r.jsx(Zd,{className:"w-4 h-4"}),F("nav.profile")]}),r.jsxs(Bi,{to:oe?"/admin/profile":"/profile",className:"flex items-center gap-3 px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",onClick:()=>n(!1),children:[r.jsx($z,{className:"w-4 h-4"}),F("nav.settings")]})]}),r.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-1",children:r.jsxs("button",{onClick:ce,className:"flex items-center gap-3 w-full px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:[r.jsx(Mz,{className:"w-4 h-4"}),F("auth.signOut")]})})]})]})]})]})}),r.jsx("main",{className:"p-4 sm:p-6 lg:p-8",children:r.jsx("div",{className:"animate-fade-in",children:r.jsx(AO,{})},ae.pathname)})]}),r.jsx(nt,{isOpen:x,onClose:Ne,title:F("bugReport.modalTitle"),size:"full",children:(()=>{const Fe=Ba.getDraft(),Ge=Ba.isRecording(),gt=Ba.getLatestUploadedFile(),cr=Array.isArray(Fe.console_logs)?Fe.console_logs.length:0,ve=Array.isArray(Fe.network_logs)?Fe.network_logs.length:0,Le=Array.isArray(Fe.route_logs)?Fe.route_logs.length:0,ze=ve+Le,xt=Fe?.started_at?Date.parse(Fe.started_at):null,rr=Fe?.ended_at?Date.parse(Fe.ended_at):null,Sa=Number.isFinite(xt)&&xt!==null,nn=Number.isFinite(Fe?.duration_seconds)?Fe.duration_seconds:Sa?Math.max(0,Math.floor(((Ge?Date.now():rr??Date.now())-xt)/1e3)):0,ts=!!Fe?.started_at;return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"rounded-xl border border-gray-200 dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-800/40",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[r.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-200",children:[r.jsx("div",{className:"font-semibold",children:F(Ge?"bugReport.recordingActive":"bugReport.recordingInactive")}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:F("bugReport.recordingCounts",{console:cr,network:ve,routes:Le})}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:F("bugReport.recordingDuration",{duration:we(nn),actions:ze})})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:Ce,className:Ge?"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 text-sm font-semibold":"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-hse-primary text-white hover:bg-hse-primary/90 text-sm font-semibold",children:[Ge?r.jsx(Fz,{className:"w-4 h-4"}):r.jsx(Iz,{className:"w-4 h-4"}),F(Ge?"bugReport.stopRecording":"bugReport.startRecording")]}),r.jsx("button",{onClick:Ue,className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 text-sm font-semibold",disabled:Ge,title:F(Ge?"bugReport.stopToClear":"bugReport.clearRecording"),children:F("bugReport.clearRecording")})]})]}),!ts&&!Ge&&r.jsx("div",{className:"mt-3 rounded-lg border border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-900/20 px-3 py-2 text-xs text-amber-800 dark:text-amber-200",children:F("bugReport.recordingRequiredHint")})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200",children:F("bugReport.commentLabel")}),r.jsx("textarea",{value:y,onChange:da=>j(da.target.value),rows:4,className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm",placeholder:F("bugReport.commentPlaceholder"),disabled:Ge})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200",children:F("bugReport.severityLabel")}),r.jsxs("select",{value:_,onChange:da=>w(da.target.value),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm",disabled:Ge,children:[r.jsx("option",{value:"",children:F("common.select")}),r.jsx("option",{value:"low",children:"low"}),r.jsx("option",{value:"medium",children:"medium"}),r.jsx("option",{value:"high",children:"high"}),r.jsx("option",{value:"critical",children:"critical"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200",children:F("bugReport.impactLabel")}),r.jsxs("select",{value:k,onChange:da=>N(da.target.value),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm",disabled:Ge,children:[r.jsx("option",{value:"",children:F("common.select")}),r.jsx("option",{value:"minor",children:"minor"}),r.jsx("option",{value:"major",children:"major"}),r.jsx("option",{value:"blocking",children:"blocking"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200",children:F("bugReport.reproducibilityLabel")}),r.jsxs("select",{value:P,onChange:da=>A(da.target.value),className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm",disabled:Ge,children:[r.jsx("option",{value:"",children:F("common.select")}),r.jsx("option",{value:"once",children:"once"}),r.jsx("option",{value:"sometimes",children:"sometimes"}),r.jsx("option",{value:"often",children:"often"}),r.jsx("option",{value:"always",children:"always"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200",children:F("bugReport.extraNotesLabel")}),r.jsx("textarea",{value:M,onChange:da=>R(da.target.value),rows:4,className:"mt-1 w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm",placeholder:F("bugReport.extraNotesPlaceholder"),disabled:Ge})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200",children:F("bugReport.capturedFileLabel")}),r.jsx("div",{className:"mt-1 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm",children:gt?r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100 break-all",children:gt.name}),r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[Te(gt.size),gt.type?`  ${gt.type}`:""]})]}),r.jsx("button",{type:"button",onClick:fe,className:"shrink-0 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 text-sm font-semibold",disabled:Ge,title:F(Ge?"bugReport.stopToClear":"bugReport.clearCapturedFile"),children:F("common.clear")})]}):r.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:F("bugReport.noCapturedFile")})}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:F("bugReport.capturedFileHint")})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-end gap-2 pt-2",children:[r.jsx("button",{onClick:Ne,className:"px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 text-sm font-semibold",disabled:v,children:F("common.cancel")}),r.jsxs("button",{onClick:Ee,className:"inline-flex items-center justify-center gap-2 px-4 py-2 rounded-lg bg-hse-primary text-white hover:bg-hse-primary/90 text-sm font-semibold disabled:opacity-50",disabled:v||Ge||!ts,title:F(Ge?"bugReport.stopBeforeSubmit":ts?"common.submit":"bugReport.recordingRequired"),children:[r.jsx(ok,{className:"w-4 h-4"}),F(v?"bugReport.submitting":"common.submit")]})]})]})})()}),r.jsx(Cbe,{isOpen:c,onClose:()=>d(!1)}),r.jsx(Ebe,{enabled:!!I}),(a||s||o)&&r.jsx("div",{className:"fixed inset-0 z-20",onClick:()=>{n(!1),i(!1),l(!1)}})]})}const Tbe=f.lazy(()=>St(()=>Promise.resolve().then(()=>Jbe),void 0)),Obe=f.lazy(()=>St(()=>Promise.resolve().then(()=>tje),void 0)),Mbe=f.lazy(()=>St(()=>Promise.resolve().then(()=>nje),void 0)),QL=f.lazy(()=>St(()=>Promise.resolve().then(()=>Sje),void 0)),Dbe=f.lazy(()=>St(()=>Promise.resolve().then(()=>Pje),void 0)),Ibe=f.lazy(()=>St(()=>Promise.resolve().then(()=>Eje),void 0)),Lbe=f.lazy(()=>St(()=>Promise.resolve().then(()=>Dje),void 0)),$be=f.lazy(()=>St(()=>Promise.resolve().then(()=>Rje),void 0)),Rbe=f.lazy(()=>St(()=>Promise.resolve().then(()=>Uje),void 0)),qbe=f.lazy(()=>St(()=>Promise.resolve().then(()=>Kje),void 0)),Kb=f.lazy(()=>St(()=>Promise.resolve().then(()=>Gje),void 0)),Vb=f.lazy(()=>St(()=>Promise.resolve().then(()=>twe),void 0)),NE=f.lazy(()=>St(()=>Promise.resolve().then(()=>awe),void 0)),Gb=f.lazy(()=>St(()=>Promise.resolve().then(()=>owe),void 0)),Th=f.lazy(()=>St(()=>Promise.resolve().then(()=>uwe),void 0)),Oh=f.lazy(()=>St(()=>Promise.resolve().then(()=>fwe),void 0)),im=f.lazy(()=>St(()=>Promise.resolve().then(()=>gwe),void 0)),Fbe=f.lazy(()=>St(()=>Promise.resolve().then(()=>ywe),void 0)),Mh=f.lazy(()=>St(()=>Promise.resolve().then(()=>jwe),void 0)),Yb=f.lazy(()=>St(()=>Promise.resolve().then(()=>_we),void 0)),Zb=f.lazy(()=>St(()=>Promise.resolve().then(()=>Nwe),void 0)),om=f.lazy(()=>St(()=>Promise.resolve().then(()=>Pwe),void 0)),Xb=f.lazy(()=>St(()=>Promise.resolve().then(()=>Ewe),void 0)),zbe=f.lazy(()=>St(()=>Promise.resolve().then(()=>Owe),void 0)),Bbe=f.lazy(()=>St(()=>Promise.resolve().then(()=>Lwe),void 0)),SE=f.lazy(()=>St(()=>Promise.resolve().then(()=>Rwe),void 0)),AE=f.lazy(()=>St(()=>Promise.resolve().then(()=>zwe),void 0)),Wbe=f.lazy(()=>St(()=>Promise.resolve().then(()=>Hwe),void 0)),Ube=f.lazy(()=>St(()=>Promise.resolve().then(()=>Vwe),void 0)),Hbe=f.lazy(()=>St(()=>Promise.resolve().then(()=>Qwe),void 0)),Qb=f.lazy(()=>St(()=>Promise.resolve().then(()=>M_e),void 0)),ni=f.lazy(()=>St(()=>Promise.resolve().then(()=>q_e),void 0)),PE=f.lazy(()=>St(()=>Promise.resolve().then(()=>u1e),void 0)),CE=f.lazy(()=>St(()=>Promise.resolve().then(()=>p1e),void 0)),EE=f.lazy(()=>St(()=>Promise.resolve().then(()=>h1e),void 0)),TE=f.lazy(()=>St(()=>Promise.resolve().then(()=>y1e),void 0)),Kbe=f.lazy(()=>St(()=>Promise.resolve().then(()=>j1e),void 0)),Vbe=f.lazy(()=>St(()=>Promise.resolve().then(()=>k1e),void 0)),Gbe=f.lazy(()=>St(()=>Promise.resolve().then(()=>S1e),void 0)),$r=({children:e,adminOnly:t=!1,allowedRoles:a=[],enforceAllowedRoles:n=!1})=>{const{isAuthenticated:s,user:i}=At(),{simulatedRole:o}=Wl(),l=Zr(),c=["admin","consultation","pole_director","works_director","hse_director","hr_director"];if(!s)return r.jsx(Ot,{to:"/login",replace:!0});if(i?.must_change_password&&l.pathname!=="/force-change-password")return r.jsx(Ot,{to:"/force-change-password",replace:!0});const d=i?.role,u=d==="dev"&&o?o:d;return c.includes(u)&&!n||d==="dev"&&!o?e:t&&!c.includes(u)?r.jsx(Ot,{to:"/dashboard",replace:!0}):a.length>0&&!a.includes(u)?u==="user"?r.jsx(Ot,{to:"/sor",replace:!0}):u==="supervisor"?r.jsx(Ot,{to:"/supervisor",replace:!0}):u==="hr"?r.jsx(Ot,{to:"/hr",replace:!0}):c.includes(u)?r.jsx(Ot,{to:"/admin",replace:!0}):r.jsx(Ot,{to:"/dashboard",replace:!0}):e},OE=({basePath:e})=>{const t=Zr();return r.jsx(Ot,{to:`${e}${t.search||""}`,replace:!0})},JL=e=>{const t=String(e||"").trim().toLowerCase();return t==="environment"||t==="environnement"?"environment":"sst"},Jb=({basePath:e})=>{const t=As(),a=JL(t?.category);return r.jsx(Ot,{to:`${e}/${a}/new/1`,replace:!0})},ej=({basePath:e})=>{const t=As(),a=String(t?.page||"1");return r.jsx(Ot,{to:`${e}/sst/new/${a}`,replace:!0})},tj=({basePath:e})=>{const a=As()?.id;return a?r.jsx(Ot,{to:`${e}/sst/${a}/resubmit`,replace:!0}):r.jsx(Ot,{to:`${e}/sst`,replace:!0})},rj=({basePath:e})=>{const t=As(),a=t?.id,n=String(t?.page||"1");return a?r.jsx(Ot,{to:`${e}/sst/${a}/resubmit/${n}`,replace:!0}):r.jsx(Ot,{to:`${e}/sst`,replace:!0})},aj=({basePath:e})=>{const t=As(),a=String(t?.category||"").trim().toLowerCase(),n=JL(a);return a==="sst"||a==="environment"||a==="environnement"?a!==n?r.jsx(Ot,{to:`${e}/${n}`,replace:!0}):r.jsx(Hbe,{}):t?.category?r.jsx(Ot,{to:`${e}/sst/${t.category}`,replace:!0}):r.jsx(Ot,{to:`${e}/sst`,replace:!0})},ME=({children:e})=>{const{isAuthenticated:t,user:a}=At(),{simulatedRole:n}=Wl(),s=["admin","consultation","pole_director","works_director","hse_director","hr_director"];if(t){if(a?.must_change_password)return r.jsx(Ot,{to:"/force-change-password",replace:!0});const i=a?.role,o=i==="dev"&&n?n:i;return s.includes(o)?r.jsx(Ot,{to:"/admin",replace:!0}):i==="dev"&&!n?r.jsx(Ot,{to:"/admin",replace:!0}):o==="user"?r.jsx(Ot,{to:"/sor",replace:!0}):o==="supervisor"?r.jsx(Ot,{to:"/supervisor",replace:!0}):o==="hr"?r.jsx(Ot,{to:"/hr",replace:!0}):r.jsx(Ot,{to:"/dashboard",replace:!0})}return e},Ybe=()=>{const{user:e}=At(),{simulatedRole:t}=Wl(),a=e?.role,n=a==="dev"&&t?t:a;return n==="hse_manager"||n==="regional_hse_manager"?r.jsx(QL,{}):r.jsx(qbe,{})};function Zbe(){const e=$y(s=>s.initTheme),t=Zr(),{user:a,isAuthenticated:n}=At();return f.useEffect(()=>{e()},[e]),f.useEffect(()=>{Ba.trackRoute({pathname:t.pathname,search:t.search,hash:t.hash})},[t.pathname,t.search,t.hash]),r.jsx(Vz,{name:"App",context:{route:{pathname:t.pathname,search:t.search,hash:t.hash},auth:{isAuthenticated:!!n,userId:a?.id??null,role:a?.role??null}},children:r.jsx(f.Suspense,{fallback:r.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50 dark:bg-gray-900",children:r.jsx(Re,{className:"w-8 h-8 animate-spin text-hse-primary"})}),children:r.jsxs(TF,{children:[r.jsxs(De,{element:r.jsx(Gz,{}),children:[r.jsx(De,{path:"/login",element:r.jsx(ME,{children:r.jsx(Tbe,{})})}),r.jsx(De,{path:"/forgot-password",element:r.jsx(ME,{children:r.jsx(Obe,{})})}),r.jsx(De,{path:"/force-change-password",element:r.jsx($r,{children:r.jsx(Mbe,{})})})]}),r.jsx(De,{element:r.jsx($r,{allowedRoles:["admin","consultation","pole_director","works_director","hse_director","hr_director"],children:r.jsx(ps,{})}),children:r.jsx(De,{path:"/admin",element:r.jsx(QL,{})})}),r.jsxs(De,{element:r.jsx($r,{allowedRoles:["admin","consultation","dev","pole_director","works_director","hse_director","hr_director","hse_manager","regional_hse_manager","responsable"],enforceAllowedRoles:!0,children:r.jsx(ps,{})}),children:[r.jsx(De,{path:"/admin/hse-events",element:r.jsx(PE,{})}),r.jsx(De,{path:"/admin/monthly-measurements",element:r.jsx(CE,{})}),r.jsx(De,{path:"/admin/lighting",element:r.jsx(EE,{})}),r.jsx(De,{path:"/admin/waste-management",element:r.jsx(TE,{})})]}),r.jsxs(De,{element:r.jsx($r,{allowedRoles:["admin","consultation","dev","pole_director","works_director","hse_director","hr_director","hse_manager","regional_hse_manager"],enforceAllowedRoles:!0,children:r.jsx(ps,{})}),children:[r.jsx(De,{path:"/admin/kpi",element:r.jsx(Lbe,{})}),r.jsx(De,{path:"/admin/kpi-history",element:r.jsx(NE,{})})]}),r.jsxs(De,{element:r.jsx($r,{adminOnly:!0,children:r.jsx(ps,{})}),children:[r.jsx(De,{path:"/admin/users",element:r.jsx(Dbe,{})}),r.jsx(De,{path:"/admin/projects",element:r.jsx(Ibe,{})}),r.jsx(De,{path:"/admin/projects/:id",element:r.jsx(Oh,{})}),r.jsx(De,{path:"/admin/bug-reports",element:r.jsx($be,{})}),r.jsx(De,{path:"/admin/library",element:r.jsx($r,{allowedRoles:["admin","consultation","dev"],enforceAllowedRoles:!0,children:r.jsx(Rbe,{})})}),r.jsx(De,{path:"/admin/effectif",element:r.jsx($r,{allowedRoles:["admin","hr_director","dev"],enforceAllowedRoles:!0,children:r.jsx(Ube,{})})}),r.jsx(De,{path:"/admin/training",element:r.jsx(Gb,{})}),r.jsx(De,{path:"/admin/awareness",element:r.jsx(Mh,{})}),r.jsx(De,{path:"/admin/sor",element:r.jsx(Th,{})}),r.jsx(De,{path:"/admin/work-permits",element:r.jsx(Yb,{})}),r.jsx(De,{path:"/admin/inspections",element:r.jsx(Zb,{})}),r.jsx(De,{path:"/admin/regulatory-watch",element:r.jsx(Ot,{to:"/admin/regulatory-watch/sst",replace:!0})}),r.jsx(De,{path:"/admin/regulatory-watch/new",element:r.jsx(Ot,{to:"/admin/regulatory-watch/sst/new/1",replace:!0})}),r.jsx(De,{path:"/admin/regulatory-watch/new/:page",element:r.jsx(ej,{basePath:"/admin/regulatory-watch"})}),r.jsx(De,{path:"/admin/regulatory-watch/:id/resubmit",element:r.jsx(tj,{basePath:"/admin/regulatory-watch"})}),r.jsx(De,{path:"/admin/regulatory-watch/:id/resubmit/:page",element:r.jsx(rj,{basePath:"/admin/regulatory-watch"})}),r.jsx(De,{path:"/admin/regulatory-watch/:category",element:r.jsx(aj,{basePath:"/admin/regulatory-watch"})}),r.jsx(De,{path:"/admin/regulatory-watch/:category/new",element:r.jsx(Jb,{basePath:"/admin/regulatory-watch"})}),r.jsx(De,{path:"/admin/regulatory-watch/:category/new/:page",element:r.jsx(ni,{mode:"new"})}),r.jsx(De,{path:"/admin/regulatory-watch/:category/:id",element:r.jsx($r,{allowedRoles:["admin","hse_director","hse_manager","regional_hse_manager","responsable","supervisor"],enforceAllowedRoles:!0,children:r.jsx(Qb,{})})}),r.jsx(De,{path:"/admin/regulatory-watch/:category/:id/resubmit",element:r.jsx(ni,{mode:"resubmit"})}),r.jsx(De,{path:"/admin/regulatory-watch/:category/:id/resubmit/:page",element:r.jsx(ni,{mode:"resubmit"})}),r.jsx(De,{path:"/admin/workers",element:r.jsx(om,{})}),r.jsx(De,{path:"/admin/ppe",element:r.jsx($r,{allowedRoles:["admin","dev","pole_director","works_director","hse_director"],enforceAllowedRoles:!0,children:r.jsx(Xb,{})})}),r.jsx(De,{path:"/admin/ppe/pending-validation-report",element:r.jsx($r,{allowedRoles:["admin","dev"],enforceAllowedRoles:!0,children:r.jsx(zbe,{})})}),r.jsx(De,{path:"/admin/qualified-personnel",element:r.jsx(OE,{basePath:"/admin/workers"})}),r.jsx(De,{path:"/admin/subcontractors",element:r.jsx(SE,{})}),r.jsx(De,{path:"/admin/subcontractors/openings/:id",element:r.jsx(AE,{})}),r.jsx(De,{path:"/admin/profile",element:r.jsx(im,{})})]}),r.jsxs(De,{element:r.jsx($r,{allowedRoles:["user"],children:r.jsx(ps,{})}),children:[r.jsx(De,{path:"/sor",element:r.jsx(Th,{})}),r.jsx(De,{path:"/sor/projects",element:r.jsx(Kb,{showKpiButton:!1})}),r.jsx(De,{path:"/sor/projects/:id",element:r.jsx(Oh,{})}),r.jsx(De,{path:"/sor/awareness",element:r.jsx(Mh,{})}),r.jsx(De,{path:"/sor/profile",element:r.jsx(im,{})})]}),r.jsxs(De,{element:r.jsx($r,{allowedRoles:["supervisor"],children:r.jsx(ps,{})}),children:[r.jsx(De,{path:"/supervisor",element:r.jsx(Th,{})}),r.jsx(De,{path:"/supervisor/projects",element:r.jsx(Kb,{showKpiButton:!1})}),r.jsx(De,{path:"/supervisor/projects/:id",element:r.jsx(Oh,{})}),r.jsx(De,{path:"/supervisor/awareness",element:r.jsx(Mh,{})}),r.jsx(De,{path:"/supervisor/training",element:r.jsx(Gb,{})}),r.jsx(De,{path:"/supervisor/work-permits",element:r.jsx(Yb,{})}),r.jsx(De,{path:"/supervisor/inspections",element:r.jsx(Zb,{})}),r.jsx(De,{path:"/supervisor/regulatory-watch",element:r.jsx(Ot,{to:"/supervisor/regulatory-watch/sst",replace:!0})}),r.jsx(De,{path:"/supervisor/regulatory-watch/new",element:r.jsx(Ot,{to:"/supervisor/regulatory-watch/sst/new/1",replace:!0})}),r.jsx(De,{path:"/supervisor/regulatory-watch/new/:page",element:r.jsx(ej,{basePath:"/supervisor/regulatory-watch"})}),r.jsx(De,{path:"/supervisor/regulatory-watch/:id/resubmit",element:r.jsx(tj,{basePath:"/supervisor/regulatory-watch"})}),r.jsx(De,{path:"/supervisor/regulatory-watch/:id/resubmit/:page",element:r.jsx(rj,{basePath:"/supervisor/regulatory-watch"})}),r.jsx(De,{path:"/supervisor/regulatory-watch/:category",element:r.jsx(aj,{basePath:"/supervisor/regulatory-watch"})}),r.jsx(De,{path:"/supervisor/regulatory-watch/:category/new",element:r.jsx(Jb,{basePath:"/supervisor/regulatory-watch"})}),r.jsx(De,{path:"/supervisor/regulatory-watch/:category/new/:page",element:r.jsx(ni,{mode:"new"})}),r.jsx(De,{path:"/supervisor/regulatory-watch/:category/:id",element:r.jsx($r,{allowedRoles:["admin","hse_director","hse_manager","regional_hse_manager","responsable","supervisor"],enforceAllowedRoles:!0,children:r.jsx(Qb,{})})}),r.jsx(De,{path:"/supervisor/regulatory-watch/:category/:id/resubmit",element:r.jsx(ni,{mode:"resubmit"})}),r.jsx(De,{path:"/supervisor/regulatory-watch/:category/:id/resubmit/:page",element:r.jsx(ni,{mode:"resubmit"})}),r.jsx(De,{path:"/supervisor/workers",element:r.jsx(om,{})}),r.jsx(De,{path:"/supervisor/ppe",element:r.jsx($r,{allowedRoles:["supervisor"],enforceAllowedRoles:!0,children:r.jsx(Xb,{})})}),r.jsx(De,{path:"/supervisor/profile",element:r.jsx(im,{})})]}),r.jsxs(De,{element:r.jsx($r,{allowedRoles:["hse_manager","regional_hse_manager","responsable"],children:r.jsx(ps,{})}),children:[r.jsx(De,{path:"/dashboard",element:r.jsx(Ybe,{})}),r.jsx(De,{path:"/my-projects",element:r.jsx(Kb,{})}),r.jsx(De,{path:"/projects/:id",element:r.jsx(Oh,{})}),r.jsx(De,{path:"/kpi/submit",element:r.jsx(Vb,{})}),r.jsx(De,{path:"/kpi/submit/:projectId",element:r.jsx(Vb,{})}),r.jsx(De,{path:"/kpi/edit/:reportId",element:r.jsx(Vb,{})}),r.jsx(De,{path:"/kpi/history",element:r.jsx(NE,{})}),r.jsx(De,{path:"/training",element:r.jsx(Gb,{})}),r.jsx(De,{path:"/awareness",element:r.jsx(Mh,{})}),r.jsx(De,{path:"/deviations",element:r.jsx(Th,{})}),r.jsx(De,{path:"/user/sor",element:r.jsx(Ot,{to:"/deviations",replace:!0})}),r.jsx(De,{path:"/work-permits",element:r.jsx(Yb,{})}),r.jsx(De,{path:"/inspections",element:r.jsx(Zb,{})}),r.jsx(De,{path:"/regulatory-watch",element:r.jsx(Ot,{to:"/regulatory-watch/sst",replace:!0})}),r.jsx(De,{path:"/regulatory-watch/new",element:r.jsx(Ot,{to:"/regulatory-watch/sst/new/1",replace:!0})}),r.jsx(De,{path:"/regulatory-watch/new/:page",element:r.jsx(ej,{basePath:"/regulatory-watch"})}),r.jsx(De,{path:"/regulatory-watch/:id/resubmit",element:r.jsx(tj,{basePath:"/regulatory-watch"})}),r.jsx(De,{path:"/regulatory-watch/:id/resubmit/:page",element:r.jsx(rj,{basePath:"/regulatory-watch"})}),r.jsx(De,{path:"/regulatory-watch/:category",element:r.jsx(aj,{basePath:"/regulatory-watch"})}),r.jsx(De,{path:"/regulatory-watch/:category/new",element:r.jsx(Jb,{basePath:"/regulatory-watch"})}),r.jsx(De,{path:"/regulatory-watch/:category/new/:page",element:r.jsx(ni,{mode:"new"})}),r.jsx(De,{path:"/regulatory-watch/:category/:id",element:r.jsx($r,{allowedRoles:["admin","hse_director","hse_manager","regional_hse_manager","responsable","supervisor"],enforceAllowedRoles:!0,children:r.jsx(Qb,{})})}),r.jsx(De,{path:"/regulatory-watch/:category/:id/resubmit",element:r.jsx(ni,{mode:"resubmit"})}),r.jsx(De,{path:"/regulatory-watch/:category/:id/resubmit/:page",element:r.jsx(ni,{mode:"resubmit"})}),r.jsx(De,{path:"/workers",element:r.jsx(om,{})}),r.jsx(De,{path:"/ppe",element:r.jsx($r,{allowedRoles:["hse_manager","regional_hse_manager","responsable"],enforceAllowedRoles:!0,children:r.jsx(Xb,{})})}),r.jsx(De,{path:"/profile",element:r.jsx(im,{})}),r.jsx(De,{path:"/subcontractors",element:r.jsx(SE,{})}),r.jsx(De,{path:"/subcontractors/openings/:id",element:r.jsx(AE,{})}),r.jsx(De,{path:"/hse-events",element:r.jsx(PE,{})}),r.jsx(De,{path:"/monthly-measurements",element:r.jsx(CE,{})}),r.jsx(De,{path:"/lighting",element:r.jsx(EE,{})}),r.jsx(De,{path:"/waste-management",element:r.jsx(TE,{})})]}),r.jsxs(De,{element:r.jsx($r,{allowedRoles:["hr"],children:r.jsx(ps,{})}),children:[r.jsx(De,{path:"/hr",element:r.jsx(om,{})}),r.jsx(De,{path:"/hr/workers",element:r.jsx(om,{})}),r.jsx(De,{path:"/hr/effectif",element:r.jsx(Wbe,{})}),r.jsx(De,{path:"/hr/profile",element:r.jsx(im,{})})]}),r.jsx(De,{element:r.jsx($r,{allowedRoles:["hse_manager","regional_hse_manager","responsable","supervisor","hr"],children:r.jsx(ps,{})}),children:r.jsx(De,{path:"/qualified-personnel",element:r.jsx(OE,{basePath:"/workers"})})}),r.jsx(De,{element:r.jsx($r,{children:r.jsx(ps,{})}),children:r.jsx(De,{path:"/notifications",element:r.jsx(Bbe,{})})}),r.jsxs(De,{element:r.jsx($r,{allowedRoles:["admin","dev","hse_manager","regional_hse_manager","responsable","supervisor","user","pole_director","works_director","hse_director"],children:r.jsx(ps,{})}),children:[r.jsx(De,{path:"/heavy-machinery/view-machines",element:r.jsx(Kbe,{})}),r.jsx(De,{path:"/heavy-machinery/global-search",element:r.jsx(Vbe,{})}),r.jsx(De,{path:"/heavy-machinery/expired-documentation",element:r.jsx(Gbe,{})})]}),r.jsx(De,{path:"/",element:r.jsx(Ot,{to:"/login",replace:!0})}),r.jsx(De,{path:"*",element:r.jsx(Fbe,{})})]})})})}const Xbe=e=>{try{return e instanceof Error?e.stack||e.message||String(e):typeof e=="string"?e:JSON.stringify(e)}catch{try{return String(e)}catch{return"[unserializable]"}}},DE=(e,t)=>{try{const a=typeof window<"u"?window.location?.href:"",n=new Date().toISOString(),s=t?.message||t?.reason?.message||t?.error?.message||t?.error?.toString?.()||t?.reason?.toString?.()||"Unknown error";console.groupCollapsed(`[APP:${e}] ${s}`),console.log("time",n),console.log("url",a),console.log("userAgent",typeof navigator<"u"?navigator.userAgent:""),t?.error&&console.error(t.error),t?.reason&&console.error(t.reason),(t?.source||t?.lineno||t?.colno)&&(console.log("source",t.source),console.log("line",t.lineno),console.log("col",t.colno)),t?.promise&&console.log("promise",t.promise),t&&!t.error&&!t.reason&&console.log("payload",t),console.groupEnd()}catch(a){console.error("[APP] Failed to log global error",a,Xbe(t))}};typeof window<"u"&&(window.addEventListener("error",e=>{DE("window.error",{message:e?.message,error:e?.error,source:e?.filename,lineno:e?.lineno,colno:e?.colno})}),window.addEventListener("unhandledrejection",e=>{DE("unhandledrejection",{reason:e?.reason,promise:e?.promise})}));Ba.init();uj.createRoot(document.getElementById("root")).render(r.jsx(le.StrictMode,{children:r.jsx(qF,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:r.jsxs(D8,{children:[r.jsx(Zbe,{}),r.jsx(T8,{position:"top-center",toastOptions:{duration:3e3,style:{background:"#1e293b",color:"#fff"},success:{duration:2500,iconTheme:{primary:"#16a34a",secondary:"#fff"}},error:{iconTheme:{primary:"#dc2626",secondary:"#fff"}}},children:e=>r.jsx("div",{onClick:()=>K.dismiss(e.id),style:{cursor:"pointer",pointerEvents:"auto"},children:r.jsx(LO,{toast:e})})})]})})}));function Qbe(){const[e,t]=f.useState(""),[a,n]=f.useState(""),[s,i]=f.useState(!1),[o,l]=f.useState({}),[c,d]=f.useState(!1),[u,m]=f.useState(!1),{login:p,isLoading:g}=At(),{t:x}=ut(),h=Tn();f.useEffect(()=>{m(!0)},[]);const v=async b=>{b.preventDefault(),l({});const y={};if(e||(y.email=x("auth.emailRequired")),a||(y.password=x("auth.passwordRequired")),Object.keys(y).length>0){l(y);return}try{d(!0);const j=await p(e,a);K.success(x("auth.loginSuccess")),setTimeout(()=>{if(j.user?.must_change_password){h("/force-change-password");return}const _=j.user.role;["admin","pole_director","works_director","hse_director","hr_director"].includes(_)?h("/admin"):h(_==="user"||_==="animateur"?"/sor":_==="supervisor"?"/supervisor":_==="hr"?"/hr":"/dashboard")},1200)}catch(j){d(!1);const _=j.response?.data?.message??x("auth.invalidCredentials");K.error(_),j.response?.status===422&&l(j.response.data.errors??{})}};return r.jsxs("div",{className:`transition-all duration-500 ${u?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[r.jsx("div",{className:"lg:hidden text-center mb-8",children:r.jsxs("div",{className:"inline-flex items-center justify-center gap-6",children:[r.jsx("img",{src:Vg,alt:x("auth.appLogoAlt"),width:112,height:112,loading:"eager",decoding:"async",fetchPriority:"high",className:"w-28 h-28 object-contain animate-float"}),r.jsx("span",{className:"text-3xl text-gray-300 font-light",children:"/"}),r.jsx("img",{src:yw,alt:x("auth.companyLogoAlt"),width:112,height:112,loading:"eager",decoding:"async",fetchPriority:"high",className:"w-28 h-28 object-contain animate-float-delayed"})]})}),r.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 border border-gray-100 dark:border-gray-700 transition-all duration-300 ${c?"scale-95 opacity-50":"scale-100 opacity-100"}`,children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-sgtm-orange via-hse-primary to-sgtm-orange rounded-t-2xl"}),r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-sgtm-orange to-hse-primary mb-4 shadow-lg animate-pulse-slow",children:r.jsx(Ni,{className:"w-8 h-8 text-white"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:x("auth.welcomeBack")}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:x("auth.signInToContinue")})]}),r.jsxs("form",{onSubmit:v,className:"space-y-6",children:[r.jsxs("div",{className:"group",children:[r.jsx("label",{htmlFor:"email",className:"label",children:x("auth.email")}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none transition-colors group-focus-within:text-hse-primary",children:r.jsx(Ry,{className:"h-5 w-5 text-gray-400 dark:text-gray-500 group-focus-within:text-hse-primary transition-colors"})}),r.jsx("input",{id:"email",type:"email",value:e,onChange:b=>t(b.target.value),className:`input pl-10 border-gray-300 dark:border-gray-600 transition-all duration-200 focus:ring-2 focus:ring-hse-primary/20 focus:border-hse-primary ${o.email?"input-error border-red-500":""}`,placeholder:x("auth.emailPlaceholder"),autoComplete:"email",disabled:c})]}),o.email&&r.jsx("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400 animate-shake",children:o.email})]}),r.jsxs("div",{className:"group",children:[r.jsx("label",{htmlFor:"password",className:"label",children:x("auth.password")}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Oz,{className:"h-5 w-5 text-gray-400 dark:text-gray-500 group-focus-within:text-hse-primary transition-colors"})}),r.jsx("input",{id:"password",type:s?"text":"password",value:a,onChange:b=>n(b.target.value),className:`input pl-10 pr-10 border-gray-300 dark:border-gray-600 transition-all duration-200 focus:ring-2 focus:ring-hse-primary/20 focus:border-hse-primary ${o.password?"input-error border-red-500":""}`,placeholder:"",autoComplete:"current-password",disabled:c}),r.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute inset-y-0 right-0 pr-3 flex items-center transition-transform hover:scale-110",disabled:c,"aria-label":x(s?"auth.hidePassword":"auth.showPassword"),children:s?r.jsx(bl,{className:"h-5 w-5 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-400 transition-colors"}):r.jsx(_r,{className:"h-5 w-5 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-400 transition-colors"})})]}),o.password&&r.jsx("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400 animate-shake",children:o.password})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("label",{className:"flex items-center cursor-pointer group",children:[r.jsx("input",{type:"checkbox",className:"w-4 h-4 text-hse-primary border-gray-300 dark:border-gray-600 rounded focus:ring-hse-primary dark:bg-gray-700 transition-transform group-hover:scale-110",disabled:c}),r.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-gray-200 transition-colors",children:x("auth.rememberMe")})]}),r.jsx(xa,{to:"/forgot-password",className:"text-sm font-medium text-sgtm-orange-dark hover:text-sgtm-orange dark:text-sgtm-orange-light dark:hover:text-sgtm-orange underline-offset-2 hover:underline",children:x("auth.forgotPassword")})]}),r.jsxs("button",{type:"submit",disabled:g||c,className:"btn-primary w-full py-3 text-base relative overflow-hidden group transition-all duration-300 hover:shadow-lg hover:shadow-hse-primary/25 active:scale-[0.98]",children:[r.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2",children:g||c?r.jsxs(r.Fragment,{children:[r.jsx(Re,{className:"w-5 h-5 animate-spin"}),x("common.loading")]}):r.jsxs(r.Fragment,{children:[x("auth.signIn"),r.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:""})]})}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700"})]})]})]}),r.jsxs("p",{className:"mt-6 text-center text-sm text-gray-500 dark:text-gray-400",children:[" ",new Date().getFullYear()," ",x("common.companyName")," ",x("common.appName"),"."]})]})}const Jbe=Object.freeze(Object.defineProperty({__proto__:null,default:Qbe},Symbol.toStringTag,{value:"Module"}));function eje(){const{t:e}=ut(),[t,a]=f.useState(""),[n,s]=f.useState(!1),[i,o]=f.useState(!1),l=async c=>{if(c.preventDefault(),!t){K.error(e("auth.forgotPasswordPage.emailRequired"));return}s(!0);try{await oz.forgotPassword(t),o(!0),K.success(e("auth.forgotPasswordPage.resetLinkSent"))}catch(d){K.error(d.response?.data?.message||e("errors.failedToSendResetLink"))}finally{s(!1)}};return i?r.jsx("div",{className:"animate-fade-in",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(Xt,{className:"w-8 h-8 text-green-600"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:e("auth.forgotPasswordPage.checkEmailTitle")}),r.jsxs("p",{className:"text-gray-500 mb-6",children:[e("auth.forgotPasswordPage.checkEmailDescription"),r.jsx("br",{}),r.jsx("strong",{className:"text-gray-700",children:t})]}),r.jsxs(xa,{to:"/login",className:"btn-primary inline-flex items-center gap-2",children:[r.jsx(Tl,{className:"w-4 h-4"}),e("auth.forgotPasswordPage.backToLogin")]})]})}):r.jsxs("div",{className:"animate-fade-in",children:[r.jsx("div",{className:"lg:hidden text-center mb-8",children:r.jsxs("div",{className:"inline-flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-hse-primary rounded-xl flex items-center justify-center",children:r.jsx(Ni,{className:"w-7 h-7 text-white"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("h1",{className:"text-xl font-bold text-hse-primary",children:e("common.appName")}),r.jsxs("p",{className:"text-sm text-gray-500",children:[e("common.companyName")," ",e("auth.forgotPasswordPage.safetyManagement")]})]})]})}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e("auth.forgotPasswordPage.title")}),r.jsx("p",{className:"text-gray-500 mt-2",children:e("auth.forgotPasswordPage.subtitle")})]}),r.jsxs("form",{onSubmit:l,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"label",children:e("auth.email")}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Ry,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"email",type:"email",value:t,onChange:c=>a(c.target.value),className:"input pl-10",placeholder:e("auth.emailPlaceholder"),autoComplete:"email"})]})]}),r.jsx("button",{type:"submit",disabled:n,className:"btn-primary w-full py-3 text-base",children:n?r.jsxs("span",{className:"flex items-center justify-center gap-2",children:[r.jsx(Re,{className:"w-5 h-5 animate-spin"}),e("auth.forgotPasswordPage.sending")]}):e("auth.forgotPasswordPage.submit")}),r.jsxs(xa,{to:"/login",className:"flex items-center justify-center gap-2 text-sm text-gray-600 hover:text-gray-900",children:[r.jsx(Tl,{className:"w-4 h-4"}),e("auth.forgotPasswordPage.backToLogin")]})]})]})]})}const tje=Object.freeze(Object.defineProperty({__proto__:null,default:eje},Symbol.toStringTag,{value:"Module"}));function rje(e){return e==="admin"||e==="consultation"||e==="pole_director"||e==="works_director"||e==="hse_director"||e==="hr_director"?"/admin":e==="user"||e==="animateur"?"/sor":e==="supervisor"?"/supervisor":e==="hr"?"/hr":"/dashboard"}function aje(){const e=Tn(),{t}=ut(),{user:a,changePassword:n}=At(),s=f.useMemo(()=>dd(a?.role),[a?.role]),[i,o]=f.useState({current_password:"",password:"",password_confirmation:""}),[l,c]=f.useState({current:!1,next:!1,confirm:!1}),[d,u]=f.useState(!1),m=async p=>{if(p.preventDefault(),!i.current_password){K.error(t("auth.passwordRequired"));return}if(i.password!==i.password_confirmation){K.error(t("profile.passwordMismatch"));return}if(!Xd(i.password,s).ok){K.error(t("auth.passwordPolicy.invalid"));return}u(!0);try{await n(i.current_password,i.password,i.password_confirmation),K.success(t("success.passwordChanged")),e(rje(a?.role),{replace:!0})}catch(g){K.error(g.response?.data?.message||t("errors.failedToSave"))}finally{u(!1)}};return r.jsx("div",{className:"animate-fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 border border-gray-100 dark:border-gray-700",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-sgtm-orange to-hse-primary mb-4 shadow-lg",children:r.jsx(jm,{className:"w-8 h-8 text-white"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:t("auth.forceChangePassword.title")}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:t("auth.forceChangePassword.subtitle")})]}),r.jsxs("form",{onSubmit:m,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:t("auth.currentPassword")}),r.jsxs("div",{className:"relative",children:[r.jsx(dl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:l.current?"text":"password",value:i.current_password,onChange:p=>o(g=>({...g,current_password:p.target.value})),className:"input pl-10 pr-10",required:!0,autoComplete:"current-password"}),r.jsx("button",{type:"button",onClick:()=>c(p=>({...p,current:!p.current})),className:"absolute right-3 top-1/2 -translate-y-1/2","aria-label":l.current?t("auth.hidePassword"):t("auth.showPassword"),children:l.current?r.jsx(bl,{className:"w-4 h-4 text-gray-400"}):r.jsx(_r,{className:"w-4 h-4 text-gray-400"})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:t("auth.newPassword")}),r.jsxs("div",{className:"relative",children:[r.jsx(dl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:l.next?"text":"password",value:i.password,onChange:p=>o(g=>({...g,password:p.target.value})),className:"input pl-10 pr-10",required:!0,minLength:s.minLength,autoComplete:"new-password"}),r.jsx("button",{type:"button",onClick:()=>c(p=>({...p,next:!p.next})),className:"absolute right-3 top-1/2 -translate-y-1/2","aria-label":l.next?t("auth.hidePassword"):t("auth.showPassword"),children:l.next?r.jsx(bl,{className:"w-4 h-4 text-gray-400"}):r.jsx(_r,{className:"w-4 h-4 text-gray-400"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:t("auth.confirmPassword")}),r.jsxs("div",{className:"relative",children:[r.jsx(dl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:l.confirm?"text":"password",value:i.password_confirmation,onChange:p=>o(g=>({...g,password_confirmation:p.target.value})),className:"input pl-10 pr-10",required:!0,minLength:s.minLength,autoComplete:"new-password"}),r.jsx("button",{type:"button",onClick:()=>c(p=>({...p,confirm:!p.confirm})),className:"absolute right-3 top-1/2 -translate-y-1/2","aria-label":l.confirm?t("auth.hidePassword"):t("auth.showPassword"),children:l.confirm?r.jsx(bl,{className:"w-4 h-4 text-gray-400"}):r.jsx(_r,{className:"w-4 h-4 text-gray-400"})})]})]})]}),r.jsx(Fy,{password:i.password,role:a?.role}),r.jsx("button",{type:"submit",disabled:d,className:"btn-primary w-full py-3",children:d?r.jsxs("span",{className:"flex items-center justify-center gap-2",children:[r.jsx(Re,{className:"w-5 h-5 animate-spin"}),t("common.saving")]}):t("auth.forceChangePassword.submit")})]})]})})}const nje=Object.freeze(Object.defineProperty({__proto__:null,default:aje},Symbol.toStringTag,{value:"Module"})),sje=[{id:"overview",nameKey:"dashboard.themes.overview",icon:mz,gradient:"from-purple-500 to-purple-700"},{id:"safety",nameKey:"dashboard.themes.safety",icon:Ni,gradient:"from-red-500 to-red-700"},{id:"training",nameKey:"dashboard.themes.training",icon:js,gradient:"from-blue-500 to-blue-700"},{id:"compliance",nameKey:"dashboard.themes.compliance",icon:Ra,gradient:"from-green-500 to-green-700"},{id:"ppe",nameKey:"dashboard.themes.ppe",icon:wn,gradient:"from-slate-500 to-slate-700"},{id:"deviations",nameKey:"dashboard.themes.deviations",icon:Qt,gradient:"from-amber-500 to-amber-700"},{id:"environmental",nameKey:"dashboard.themes.environmental",icon:Tz,gradient:"from-emerald-500 to-emerald-700"},{id:"monthly_report",nameKey:"dashboard.themes.monthly_report",icon:pr,gradient:"from-sky-600 to-sky-800",adminOnly:!0}],ije=f.memo(function({activeTheme:t,onThemeChange:a,user:n}){const s=Oi(),i=String(n?.role||"")==="admin";return r.jsx("div",{className:"relative mb-4",children:r.jsx("div",{className:"flex items-center justify-center gap-1 flex-wrap",children:sje.filter(o=>o.adminOnly?i:!0).map(o=>{const l=o.icon,c=t===o.id;return r.jsxs("button",{onClick:()=>a(o.id),className:`flex items-center gap-1.5 px-3 py-2 rounded-lg border transition-all duration-200 ${c?`bg-gradient-to-r ${o.gradient} text-white border-transparent shadow-md`:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600 hover:shadow-sm"}`,children:[r.jsx(l,{className:`w-4 h-4 ${c?"text-white":""}`}),r.jsx("span",{className:`font-medium text-xs ${c?"text-white":""}`,children:s(o.nameKey)})]},o.id)})})})}),Yo={fatal:"#dc2626",serious:"#f59e0b",minor:"#16a34a",tf:"#f59e0b",tg:"#8b5cf6"},Ui=f.memo(function({title:t,value:a,icon:n,color:s,trend:i}){const o={red:"border-red-200 bg-red-50 dark:border-red-700 dark:bg-red-900/50 text-red-600 dark:text-red-400",green:"border-green-200 bg-green-50 dark:border-green-700 dark:bg-green-900/50 text-green-600 dark:text-green-400",amber:"border-amber-200 bg-amber-50 dark:border-amber-700 dark:bg-amber-900/50 text-amber-600 dark:text-amber-400",purple:"border-purple-200 bg-purple-50 dark:border-purple-700 dark:bg-purple-900/50 text-purple-600 dark:text-purple-400"};return r.jsxs("div",{className:`rounded-xl border-2 p-4 ${o[s]}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(n,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:t})]}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:a}),i&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:i})]})}),oje=f.memo(function({kpiSummary:t,weeklyTrends:a,projectPerformance:n,safetyPerformance:s,safetyLoading:i}){const o=Oi(),l=N=>{if(N==null)return o("common.unknown");const P=String(N).trim();return!P||P.toLowerCase()==="unknown"?o("common.unknown"):P},c=!!s?.kpis,d=f.useMemo(()=>{const N=s?.kpis||{};return{totalEvents:N.total_events??0,severityWeightedIndex:N.severity_weighted_index??0,pctSevere:N.pct_severe??0,totalVictims:N.total_victims??0,totalFatalities:N.total_fatalities??0,pctActionsOverdue:N.pct_actions_overdue??0,worstProject:N.worst_project??null,worstLocation:N.worst_location??null,topActivity:N.top_activity??null,topRootCause:N.top_root_cause??null}},[s]),u=f.useMemo(()=>s?.charts||{},[s]),m=f.useMemo(()=>{const N=u?.project_hotspots;return Array.isArray(N)?N.slice(0,10).map(P=>({...P,project_name:l(P?.project_name)})):[]},[u,o]),p=f.useMemo(()=>{const N=u?.activity_driver;return Array.isArray(N)?N.slice(0,10).map(P=>({...P,activity:l(P?.activity)})):[]},[u,o]),g=f.useMemo(()=>{const N=u?.conditions_matrix||{},P=Array.isArray(N.data)?N.data:[],A=Array.isArray(N.rows)?N.rows:[],M=Array.isArray(N.cols)?N.cols:[],R=A.map(I=>l(I)),O=M.map(I=>l(I)),q=P.map(I=>({...I,ground_condition:l(I?.ground_condition),lighting:l(I?.lighting)})),S=q.reduce((I,E)=>Math.max(I,Number(E?.value??0)),0);return{rows:R,cols:O,data:q,max:S}},[u,o]),x=f.useMemo(()=>{const N=u?.cause_path||{},P=Array.isArray(N.nodes)?N.nodes:[],A=Array.isArray(N.links)?N.links:[];return{nodes:P.map(M=>({...M,name:l(M?.name)})),links:A}},[u,o]),h=f.useMemo(()=>{const N=u?.severity_vs_victims;return Array.isArray(N)?N.map(P=>({severity:Number(P?.severity_score??0),victims:Number(P?.victims??0),events:Number(P?.events??0),activity:l(P?.activity)})):[]},[u,o]),v=f.useMemo(()=>{const N=u?.actions_health;return Array.isArray(N)?N.slice(0,10).map(P=>({...P,type:l(P?.type)})):[]},[u,o]),b=f.useMemo(()=>({totalAccidents:t?.total_accidents??0,fatalAccidents:t?.fatal_accidents??0,avgTF:Number(t?.avg_tf??0).toFixed(2),avgTG:Number(t?.avg_tg??0).toFixed(2),lostWorkdays:t?.lost_workdays??0}),[t]),y=f.useMemo(()=>(a??[]).map(N=>({week:N.week_label,accidents:N.accidents??0})),[a]),j=f.useMemo(()=>{b.totalAccidents;const N=b.fatalAccidents,P=t?.serious_accidents,A=t?.minor_accidents,M=P!=null&&A!==null&&A!==void 0,R=M?Number(P??0):(a??[]).reduce((q,S)=>q+Number(S?.serious_accidents??0),0),O=M?Number(A??0):(a??[]).reduce((q,S)=>q+Number(S?.minor_accidents??0),0);return[{name:o("dashboard.safety.fatal"),value:Number(N??0),color:Yo.fatal},{name:o("dashboard.safety.serious"),value:Number(R??0),color:Yo.serious},{name:o("dashboard.safety.minor"),value:Number(O??0),color:Yo.minor}].filter(q=>q.value>0)},[b,o,t,a]),_=f.useMemo(()=>(a??[]).map(N=>({week:N.week_label,tf:Number(N.tf??0).toFixed(4),tg:Number(N.tg??0).toFixed(4)})),[a]),w=f.useMemo(()=>(n??[]).slice(0,6).map(N=>({name:N.name?.length>15?N.name.substring(0,15)+"...":N.name,accidents:N.total_accidents??0})),[n]),k=f.memo(function({data:P,rows:A,cols:M,max:R}){const O=(S,I)=>{const E=(P||[]).find(W=>W.ground_condition===S&&W.lighting===I);return Number(E?.value??0)},q=S=>!R||R<=0?"rgba(220,38,38,0.05)":`rgba(220,38,38,${.08+Math.max(0,Math.min(1,S/R))*.85})`;return r.jsx("div",{className:"w-full overflow-auto",children:r.jsx("div",{className:"min-w-[640px]",children:r.jsxs("div",{className:"grid",style:{gridTemplateColumns:`160px repeat(${M.length}, minmax(80px, 1fr))`},children:[r.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-gray-300 p-2",children:o("dashboard.safety.lighting")||"Lighting"}),M.map(S=>r.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-gray-300 p-2 text-center truncate",title:S,children:S},S)),A.map(S=>r.jsxs("div",{className:"contents",children:[r.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-200 p-2 truncate",title:S,children:S}),M.map(I=>{const E=O(S,I);return r.jsxs("div",{className:"p-2 border border-gray-100 dark:border-gray-800",title:`${S} / ${I}: ${E}`,children:[r.jsx("div",{className:"w-full h-8 rounded",style:{background:q(E)}}),r.jsx("div",{className:"text-[11px] text-gray-600 dark:text-gray-300 mt-1 text-center",children:E})]},`${S}|${I}`)})]},S))]})})})});return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i&&!c&&r.jsx("div",{className:"card",children:r.jsx("div",{className:"card-body",children:r.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600 dark:border-gray-300"}),r.jsx("span",{className:"text-sm",children:o("common.loading")||"Loading..."})]})})}),c&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(Ui,{title:o("dashboard.safety.totalEvents")||"Total events",value:d.totalEvents,icon:Qt,color:d.totalEvents>0?"amber":"green",trend:o("dashboard.safety.yearToDate")||"Year-to-date"}),r.jsx(Ui,{title:o("dashboard.safety.severityWeightedIndex")||"Severity-weighted index",value:d.severityWeightedIndex,icon:jo,color:d.severityWeightedIndex>0?"red":"green",trend:d.worstProject?`${o("dashboard.safety.worstProject")||"Worst project"}: ${l(d.worstProject.project_name)}`:null}),r.jsx(Ui,{title:o("dashboard.safety.severeShare")||"Severe share",value:`${Number(d.pctSevere??0).toFixed(1)}%`,icon:xw,color:d.pctSevere>0?"red":"green",trend:d.totalFatalities>0?`${o("dashboard.safety.fatalAccidents")||"Fatalities"}: ${d.totalFatalities}`:o("dashboard.safety.noFatalities")||"No fatalities"}),r.jsx(Ui,{title:o("dashboard.safety.actionsOverdue")||"Actions overdue",value:`${Number(d.pctActionsOverdue??0).toFixed(1)}%`,icon:oa,color:d.pctActionsOverdue>0?"amber":"green",trend:d.worstLocation?`${o("dashboard.safety.worstLocation")||"Worst location"}: ${l(d.worstLocation.location)}`:null})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:o("dashboard.safety.projectHotspots")||"Project Hotspots (severity-weighted)"})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-72",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Rr,{data:m,layout:"vertical",children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:opacity-20"}),r.jsx(ct,{type:"number",tick:{fontSize:11}}),r.jsx(rt,{type:"category",dataKey:"project_name",tick:{fontSize:10},width:120}),r.jsx(tt,{allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999}}),r.jsx(aa,{}),r.jsx(pt,{dataKey:"fatal",stackId:"a",fill:"#dc2626",name:o("dashboard.safety.eventTypes.fatal")||o("dashboard.safety.fatal")||"Fatal"}),r.jsx(pt,{dataKey:"serious",stackId:"a",fill:"#f59e0b",name:o("dashboard.safety.eventTypes.serious")||o("dashboard.safety.serious")||"Serious"}),r.jsx(pt,{dataKey:"lta",stackId:"a",fill:"#8b5cf6",name:o("dashboard.safety.eventTypes.lta")||"LTA"}),r.jsx(pt,{dataKey:"medical",stackId:"a",fill:"#3b82f6",name:o("dashboard.safety.eventTypes.medical")||"Medical"}),r.jsx(pt,{dataKey:"first_aid",stackId:"a",fill:"#16a34a",name:o("dashboard.safety.eventTypes.firstAid")||"First aid"}),r.jsx(pt,{dataKey:"near_miss",stackId:"a",fill:"#14b8a6",name:o("dashboard.safety.eventTypes.nearMiss")||"Near miss"})]})})})})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:o("dashboard.safety.activityDriver")||"Activity Driver (Pareto)"})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-72",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(ci,{data:p,children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:opacity-20"}),r.jsx(ct,{dataKey:"activity",tick:{fontSize:10},interval:0,angle:-20,textAnchor:"end",height:60}),r.jsx(rt,{yAxisId:"left",allowDecimals:!1,tick:{fontSize:11}}),r.jsx(rt,{yAxisId:"right",orientation:"right",domain:[0,100],tick:{fontSize:11}}),r.jsx(tt,{allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999}}),r.jsx(aa,{}),r.jsx(pt,{yAxisId:"left",dataKey:"count",fill:"#dc2626",name:o("dashboard.safety.metrics.count")||"Count"}),r.jsx(Kt,{yAxisId:"right",type:"monotone",dataKey:"cumulative_pct",stroke:"#3b82f6",strokeWidth:2,dot:{r:3},name:o("dashboard.safety.metrics.cumulativePct")||"Cumulative %"})]})})})})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:o("dashboard.safety.conditionsMatrix")||"Conditions Matrix (severity-weighted)"})}),r.jsx("div",{className:"card-body",children:r.jsx(k,{data:g.data,rows:g.rows,cols:g.cols,max:g.max})})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:o("dashboard.safety.causePath")||"Cause Path (Immediate  Root)"})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-72",children:x.nodes.length>0&&x.links.length>0?r.jsx(ht,{width:"100%",height:"100%",children:r.jsx(jN,{data:x,nodePadding:18,linkCurvature:.6,node:{stroke:"#e5e7eb",strokeWidth:1},children:r.jsx(tt,{allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999}})})}):r.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:o("common.noData")||"No data"})})})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:o("dashboard.safety.severityVsVictims")||"Severity vs Victims (bubble)"})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-72",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(XL,{children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:opacity-20"}),r.jsx(ct,{type:"number",dataKey:"severity",name:o("dashboard.safety.metrics.severity")||"Severity",domain:[1,6],tick:{fontSize:11}}),r.jsx(rt,{type:"number",dataKey:"victims",name:o("dashboard.safety.metrics.victims")||"Victims",allowDecimals:!1,tick:{fontSize:11}}),r.jsx(Gl,{type:"number",dataKey:"events",range:[80,600],name:o("dashboard.safety.metrics.events")||"Events"}),r.jsx(tt,{cursor:{strokeDasharray:"3 3"},allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999}}),r.jsx(aa,{}),r.jsx(Yl,{name:o("dashboard.safety.metrics.events")||"Events",data:h,fill:"#3b82f6",children:h.map((N,P)=>r.jsx(Vn,{fill:N?.severity>=5?"#dc2626":N?.severity>=3?"#f59e0b":"#3b82f6"},`cell-${P}`))})]})})})})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:o("dashboard.safety.actionsHealth")||"Actions Health"})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-72",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Rr,{data:v,children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:opacity-20"}),r.jsx(ct,{dataKey:"type",tick:{fontSize:10},interval:0,angle:-20,textAnchor:"end",height:60}),r.jsx(rt,{allowDecimals:!1,tick:{fontSize:11}}),r.jsx(tt,{allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999}}),r.jsx(aa,{}),r.jsx(pt,{dataKey:"fatal",stackId:"a",fill:"#dc2626",name:o("dashboard.safety.eventTypes.fatal")||o("dashboard.safety.fatal")||"Fatal"}),r.jsx(pt,{dataKey:"serious",stackId:"a",fill:"#f59e0b",name:o("dashboard.safety.eventTypes.serious")||o("dashboard.safety.serious")||"Serious"}),r.jsx(pt,{dataKey:"lta",stackId:"a",fill:"#8b5cf6",name:o("dashboard.safety.eventTypes.lta")||"LTA"}),r.jsx(pt,{dataKey:"medical",stackId:"a",fill:"#3b82f6",name:o("dashboard.safety.eventTypes.medical")||"Medical"})]})})})})]})]})]}),!c&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(Ui,{title:o("dashboard.safety.totalAccidents"),value:b.totalAccidents,icon:Qt,color:b.totalAccidents>0?"red":"green",trend:o("dashboard.safety.yearToDate")}),r.jsx(Ui,{title:o("dashboard.safety.fatalAccidents"),value:b.fatalAccidents,icon:xw,color:b.fatalAccidents>0?"red":"green",trend:b.fatalAccidents===0?o("dashboard.safety.noFatalities"):o("dashboard.safety.critical")}),r.jsx(Ui,{title:o("dashboard.safety.tfRate"),value:b.avgTF,icon:jo,color:"amber",trend:o("dashboard.safety.avgFrequencyRate")}),r.jsx(Ui,{title:o("dashboard.safety.tgRate"),value:b.avgTG,icon:T5,color:"purple",trend:o("dashboard.safety.avgSeverityRate")})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:o("dashboard.safety.accidentTrends")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-64",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Rv,{data:y,children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"accidentGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"#dc2626",stopOpacity:.8}),r.jsx("stop",{offset:"95%",stopColor:"#dc2626",stopOpacity:.1})]})}),r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:opacity-20"}),r.jsx(ct,{dataKey:"week",tick:{fontSize:11}}),r.jsx(rt,{allowDecimals:!1,tick:{fontSize:11}}),r.jsx(tt,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#f3f4f6"},allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999}}),r.jsx(es,{type:"monotone",dataKey:"accidents",stroke:"#dc2626",fill:"url(#accidentGradient)",name:o("dashboard.accidents")||"Accidents"})]})})})})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:o("dashboard.safety.accidentsBySeverity")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-64",children:j.length>0?r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(FL,{children:[r.jsx(Qs,{data:j,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:5,dataKey:"value",label:({name:N,value:P})=>`${N}: ${P}`,children:j.map((N,P)=>r.jsx(Vn,{fill:N.color},`cell-${P}`))}),r.jsx(tt,{allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999}}),r.jsx(aa,{})]})}):r.jsx("div",{className:"flex items-center justify-center h-full text-green-600 dark:text-green-400",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Qt,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),r.jsx("p",{className:"font-medium",children:o("dashboard.safety.noAccidents")}),r.jsx("p",{className:"text-sm text-gray-500",children:o("dashboard.safety.greatSafety")})]})})})})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:o("dashboard.safety.tfVsTg")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-64",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Ci,{data:_,children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:opacity-20"}),r.jsx(ct,{dataKey:"week",tick:{fontSize:11}}),r.jsx(rt,{tick:{fontSize:11}}),r.jsx(tt,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#f3f4f6"},allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999}}),r.jsx(aa,{}),r.jsx(Kt,{type:"monotone",dataKey:"tf",stroke:Yo.tf,strokeWidth:2,dot:{fill:Yo.tf,r:3},name:o("dashboard.safety.tfRate")||"TF Rate"}),r.jsx(Kt,{type:"monotone",dataKey:"tg",stroke:Yo.tg,strokeWidth:2,dot:{fill:Yo.tg,r:3},name:o("dashboard.safety.tgRate")||"TG Rate"})]})})})})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:o("dashboard.safety.accidentsByProject")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-64",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Rr,{data:w,layout:"vertical",children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:opacity-20"}),r.jsx(ct,{type:"number",allowDecimals:!1,tick:{fontSize:11}}),r.jsx(rt,{type:"category",dataKey:"name",tick:{fontSize:10},width:100}),r.jsx(tt,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#f3f4f6"},allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999}}),r.jsx(pt,{dataKey:"accidents",fill:"#dc2626",radius:[0,4,4,0],name:o("dashboard.accidents")||"Accidents"})]})})})})]})]})]})]})}),lje={compliance:"#14b8a6"},Zo=f.memo(function({title:t,value:a,icon:n,color:s,trend:i}){const o={blue:"border-blue-200 bg-blue-50 dark:border-blue-700 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400",green:"border-green-200 bg-green-50 dark:border-green-700 dark:bg-green-900/50 text-green-600 dark:text-green-400",purple:"border-purple-200 bg-purple-50 dark:border-purple-700 dark:bg-purple-900/50 text-purple-600 dark:text-purple-400",amber:"border-amber-200 bg-amber-50 dark:border-amber-700 dark:bg-amber-900/50 text-amber-600 dark:text-amber-400"};return r.jsxs("div",{className:`rounded-xl border-2 p-4 ${o[s]}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(n,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:t})]}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:a}),i&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:i})]})}),cje=f.memo(function({kpiSummary:t,weeklyTrends:a,projectPerformance:n,trainingData:s,awarenessData:i}){const o=Oi(),l=o("dashboard.weekShortPrefix"),c=f.useMemo(()=>{const h=s?.total??t?.total_trainings??0,v=s?.total_participants??t?.employees_trained??0,b=s?.total_hours??t?.total_training_hours??t?.training_hours??0,y=t?.total_trainings_planned??0,j=y>0?Math.round(h/y*100):null;return{totalTrainings:h,employeesTrained:v,trainingHours:b,completionRate:j}},[t,s]),d=f.useMemo(()=>({totalSessions:i?.total??0,totalParticipants:i?.total_participants??0,totalHours:i?.total_hours??0}),[i]),u=f.useMemo(()=>s?.by_week?.length>0?s.by_week.map(h=>({week:`${l}${h.week_number}`,trainings:h.count??0,participants:h.participants??0})):(a??[]).map(h=>({week:h.week_label,trainings:h.trainings??0})),[a,s]),m=f.useMemo(()=>{if(s?.by_theme?.length>0){const h=["#3b82f6","#8b5cf6","#ec4899","#14b8a6","#f59e0b","#ef4444","#10b981","#6366f1"];return s.by_theme.slice(0,8).map((v,b)=>({name:v.theme?.length>20?v.theme.substring(0,20)+"...":v.theme,fullName:v.theme,value:v.count,participants:v.participants??0,color:h[b%h.length]}))}return[]},[s]),p=f.useMemo(()=>s?.by_duration?.length>0?s.by_duration.map(h=>({duration:h.duration,count:h.count,participants:h.participants??0})):[],[s]),g=f.useMemo(()=>{if(i?.by_theme?.length>0){const h=["#16a34a","#0ea5e9","#f97316","#a855f7","#eab308","#06b6d4","#84cc16","#d946ef"];return i.by_theme.slice(0,8).map((v,b)=>({name:v.theme?.length>20?v.theme.substring(0,20)+"...":v.theme,fullName:v.theme,value:v.count,participants:v.participants??0,color:h[b%h.length]}))}return[]},[i]),x=f.useMemo(()=>s?.by_type?.length>0?s.by_type.map(h=>({name:h.type==="internal"?o("dashboard.training.internal"):o("dashboard.training.external"),value:h.count,color:h.type==="internal"?"#3b82f6":"#8b5cf6"})):[],[s,o]);return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[d.totalSessions>0&&r.jsxs("div",{children:[r.jsx("div",{className:"mb-3",children:r.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:o("dashboard.training.sections.awareness")||"TBT/TBM"})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[r.jsx(Zo,{title:o("dashboard.training.totalAwareness"),value:d.totalSessions,icon:sa,color:"green",trend:`${d.totalParticipants} participants`}),r.jsx(Zo,{title:o("dashboard.training.awarenessParticipants"),value:d.totalParticipants,icon:sa,color:"purple"}),r.jsx(Zo,{title:o("dashboard.training.awarenessHours"),value:Math.round(d.totalHours??0),icon:oa,color:"amber"})]})]}),g.length>0&&r.jsxs("div",{children:[r.jsx("div",{className:"mb-3",children:r.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:o("dashboard.training.sections.awarenessCharts")||"TBT/TBM Charts"})}),r.jsx("div",{className:"grid grid-cols-1 gap-6",children:r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:o("dashboard.training.awarenessByTheme")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-72",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Rr,{data:g,layout:"vertical",margin:{left:10,right:20},children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:opacity-20"}),r.jsx(ct,{type:"number",allowDecimals:!1,tick:{fontSize:11}}),r.jsx(rt,{type:"category",dataKey:"name",tick:{fontSize:10},width:120}),r.jsx(tt,{allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999}}),r.jsx(pt,{dataKey:"value",radius:[0,4,4,0],children:g.map((h,v)=>r.jsx(Vn,{fill:h.color},`cell-${v}`))})]})})})})]})})]}),r.jsxs("div",{children:[r.jsx("div",{className:"mb-3",children:r.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:o("dashboard.training.sections.training")||"Training"})}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(Zo,{title:o("dashboard.training.totalTrainings"),value:c.totalTrainings,icon:js,color:"blue",trend:o("dashboard.training.sessionsCompleted")}),r.jsx(Zo,{title:o("dashboard.training.employeesTrained"),value:c.employeesTrained,icon:sa,color:"green",trend:o("dashboard.training.uniqueAttendees")}),r.jsx(Zo,{title:o("dashboard.training.trainingHours"),value:c.trainingHours,icon:oa,color:"purple",trend:o("dashboard.training.totalHoursDelivered")}),r.jsx(Zo,{title:o("dashboard.training.completionRate"),value:c.completionRate!==null?`${c.completionRate}%`:"",icon:Xt,color:"amber",trend:`${o("dashboard.training.target")}: 95%`})]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"mb-3",children:r.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:o("dashboard.training.sections.trainingCharts")||"Training Charts"})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:o("dashboard.training.trainingTrends")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-64",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Rv,{data:u,children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"trainingGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.8}),r.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:.1})]})}),r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:opacity-20"}),r.jsx(ct,{dataKey:"week",tick:{fontSize:11}}),r.jsx(rt,{allowDecimals:!1,tick:{fontSize:11}}),r.jsx(tt,{allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999}}),r.jsx(es,{type:"monotone",dataKey:"trainings",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.2,name:o("dashboard.training.metrics.sessions")||"Sessions"})]})})})})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:o("dashboard.training.trainingByTheme")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-72",children:m.length>0?r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Rr,{data:m,layout:"vertical",margin:{left:10,right:20},children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:opacity-20"}),r.jsx(ct,{type:"number",allowDecimals:!1,tick:{fontSize:11}}),r.jsx(rt,{type:"category",dataKey:"name",tick:{fontSize:10},width:120}),r.jsx(tt,{allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999}}),r.jsx(pt,{dataKey:"value",radius:[0,4,4,0],children:m.map((h,v)=>r.jsx(Vn,{fill:h.color},`cell-${v}`))})]})}):r.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:r.jsxs("div",{className:"text-center",children:[r.jsx(js,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),r.jsx("p",{className:"font-medium",children:o("dashboard.training.noTrainingData")})]})})})})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:o("dashboard.training.trainingByDuration")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-64",children:p.length>0?r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Rr,{data:p,children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:opacity-20"}),r.jsx(ct,{dataKey:"duration",tick:{fontSize:11}}),r.jsx(rt,{allowDecimals:!1,tick:{fontSize:11}}),r.jsx(tt,{allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999}}),r.jsx(pt,{dataKey:"count",fill:lje.compliance,radius:[4,4,0,0]})]})}):r.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:r.jsx("p",{className:"font-medium",children:o("dashboard.training.noTrainingData")})})})})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:o("dashboard.training.trainingByType")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-64",children:x.length>0?r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(FL,{children:[r.jsx(Qs,{data:x,cx:"50%",cy:"50%",outerRadius:90,dataKey:"value",children:x.map((h,v)=>r.jsx(Vn,{fill:h.color},`cell-${v}`))}),r.jsx(tt,{formatter:(h,v)=>[h,v],allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999}})]})}):r.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:r.jsx("p",{className:"font-medium",children:o("dashboard.training.noTrainingData")})})})})]})]})]})]})}),dje={compliance:"#16a34a"},Dh=f.memo(function({title:t,value:a,icon:n,color:s,trend:i}){const o={green:"border-green-200 bg-green-50 dark:border-green-700 dark:bg-green-900/50 text-green-600 dark:text-green-400",blue:"border-blue-200 bg-blue-50 dark:border-blue-700 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400",amber:"border-amber-200 bg-amber-50 dark:border-amber-700 dark:bg-amber-900/50 text-amber-600 dark:text-amber-400",purple:"border-purple-200 bg-purple-50 dark:border-purple-700 dark:bg-purple-900/50 text-purple-600 dark:text-purple-400"};return r.jsxs("div",{className:`rounded-xl border-2 p-4 ${o[s]}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(n,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:t})]}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:a}),i&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:i})]})}),uje=f.memo(function({kpiSummary:t,weeklyTrends:a,inspectionData:n,regulatoryWatch:s}){const i=Oi(),o=i("dashboard.weekShortPrefix"),l=(g,x)=>{const h=i(g);return h===g?x:h},c=f.useMemo(()=>{const g=n?.stats?.total??t?.total_inspections??0,x=n?.stats?.open??0,h=Number(s?.avg_overall_score??0).toFixed(1),v=Number(t?.avg_medical_compliance??0).toFixed(1);return{totalInspections:g,openInspections:x,hseCompliance:h,medicalCompliance:v}},[t,n,s]),d=f.useMemo(()=>{const g=Array.isArray(n?.by_week)?n.by_week:[];return g.length>0?g.map(x=>({week:`${o}${x.week_number}`,inspections:x.count??0})):(a??[]).map(x=>({week:x.week_label,inspections:x.inspections??0}))},[n,a]),u=f.useMemo(()=>(Array.isArray(n?.by_nature)?n.by_nature:[]).map(x=>({nature:x.nature,label:l(`dashboard.compliance.inspectionNature.${x.nature}`,x.label??x.nature),count:x.count??0})),[n,i]),m=f.useMemo(()=>{const g=Array.isArray(s?.by_week)?s.by_week:[];return g.length>0?g.map(x=>({week:`${o}${x.week_number}`,score:x.avg_overall_score??0})):(a??[]).map(x=>({week:x.week_label,score:x.hse_compliance??0}))},[s,a]),p=f.useMemo(()=>(a??[]).map(g=>({week:g.week_label,percent:g.medical_compliance??0})),[a]);return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(Dh,{title:i("dashboard.compliance.totalInspections"),value:c.totalInspections,icon:Ra,color:"green",trend:i("dashboard.compliance.completedThisYear")}),r.jsx(Dh,{title:i("dashboard.compliance.hseCompliance"),value:`${c.hseCompliance}%`,icon:Ni,color:"blue",trend:i("dashboard.compliance.avgScore")}),r.jsx(Dh,{title:i("dashboard.compliance.medicalCompliance"),value:`${c.medicalCompliance}%`,icon:Pz,color:"purple",trend:i("dashboard.compliance.healthChecks")}),r.jsx(Dh,{title:i("dashboard.compliance.openInspections"),value:c.openInspections,icon:yz,color:"amber"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:i("dashboard.compliance.inspectionTrends")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-64",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Rv,{data:d,children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"complianceGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"#16a34a",stopOpacity:.8}),r.jsx("stop",{offset:"95%",stopColor:"#16a34a",stopOpacity:.1})]})}),r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:opacity-20"}),r.jsx(ct,{dataKey:"week",tick:{fontSize:11}}),r.jsx(rt,{allowDecimals:!1,tick:{fontSize:11}}),r.jsx(tt,{allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999}}),r.jsx(es,{type:"monotone",dataKey:"inspections",stroke:"#16a34a",fill:"url(#complianceGradient)",name:i("dashboard.compliance.totalInspections")})]})})})})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:i("dashboard.compliance.inspectionsByNature")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-64",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Rr,{data:u,children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:opacity-20"}),r.jsx(ct,{dataKey:"label",tick:{fontSize:11}}),r.jsx(rt,{allowDecimals:!1,tick:{fontSize:11}}),r.jsx(tt,{allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999}}),r.jsx(pt,{dataKey:"count",fill:dje.compliance,name:i("dashboard.compliance.totalInspections"),radius:[4,4,0,0]})]})})})})]}),m.length>0&&r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:i("dashboard.compliance.regulatoryWatchTrend")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-64",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Ci,{data:m,children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:opacity-20"}),r.jsx(ct,{dataKey:"week",tick:{fontSize:11}}),r.jsx(rt,{tick:{fontSize:11},domain:[0,100]}),r.jsx(tt,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#f3f4f6"},allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999},formatter:g=>[`${g}%`,i("dashboard.compliance.regulatoryWatchScore")]}),r.jsx(Kt,{type:"monotone",dataKey:"score",stroke:"#3b82f6",strokeWidth:2,dot:!1,name:i("dashboard.compliance.regulatoryWatchScore")})]})})})})]}),p.length>0&&r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:i("dashboard.compliance.medicalAptitudeTrend")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-64",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Ci,{data:p,children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:opacity-20"}),r.jsx(ct,{dataKey:"week",tick:{fontSize:11}}),r.jsx(rt,{tick:{fontSize:11},domain:[0,100]}),r.jsx(tt,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#f3f4f6"},allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999},formatter:g=>[`${g}%`,i("dashboard.compliance.aptitudePercent")]}),r.jsx(Kt,{type:"monotone",dataKey:"percent",stroke:"#a855f7",strokeWidth:2,dot:!1,name:i("dashboard.compliance.aptitudePercent")})]})})})})]})]})]})}),IE=["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#ec4899","#14b8a6","#f97316","#84cc16","#0ea5e9","#a855f7"],mje=f.memo(function({active:t,payload:a,label:n,t:s,poleLabelByKey:i}){if(!t||!a||a.length===0)return null;const o=a[0],l=String(o?.dataKey??""),c=l.includes("__p_")?l.split("__p_")[0]:"",d=i?.[c]??"",u=typeof o?.name=="string"&&o.name.trim()!==""?o.name:n,m=d?`${u}  ${d}`:u,p=a.filter(g=>Number(g?.value??0)>0);return r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-3 shadow-lg",children:[r.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100 text-sm mb-2",children:m}),r.jsx("div",{className:"space-y-1",children:p.map(g=>r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded",style:{backgroundColor:g.color}}),r.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-200",children:g.name})]}),r.jsx("span",{className:"text-xs font-semibold text-gray-900 dark:text-gray-100",children:g.value})]},g.dataKey))}),r.jsx("p",{className:"mt-2 text-[11px] text-gray-500 dark:text-gray-400",children:s("ppe.analytics.tooltipHint")})]})}),pje=f.memo(function({year:t,projectId:a,pole:n}){const s=Oi(),i=I=>String(I??"").trim().toLowerCase().replace(/[^a-z0-9]+/g,"_")||"unknown",[o,l]=f.useState(!0),[c,d]=f.useState([]),[u,m]=f.useState([]),[p,g]=f.useState("year"),[x,h]=f.useState(()=>new Date().getMonth()+1),[v,b]=f.useState(""),[y,j]=f.useState([]);f.useEffect(()=>{(async()=>{try{const E=await Ha.getItems(),W=E.data?.data??E.data??[],B=Array.isArray(W)?W:[];d(B),m(B.map(C=>C.id))}catch{d([]),m([])}})()},[]),f.useEffect(()=>{const I=async()=>{try{l(!0);const E={year:t,duration:p,item_ids:u};n&&(E.pole=n),a&&a!=="all"&&(E.project_id=a),p==="month"&&(E.month=x),p==="week"&&(E.week=v);const B=(await Ma.getPpeConsumptionAnalytics(E)).data?.data?.rows??[];j(Array.isArray(B)?B:[])}catch{K.error(s("errors.failedToLoad")),j([])}finally{l(!1)}};if(p==="week"&&(!v||String(v).trim()==="")){j([]),l(!1);return}if(!u||u.length===0){j([]),l(!1);return}I()},[t,p,x,v,u,a,n,s]);const _=f.useMemo(()=>(c??[]).map(I=>({id:I.id,name:I.name})),[c]),w=f.useMemo(()=>new Set(u.map(I=>Number(I))),[u]),k=f.useMemo(()=>!y||y.length===0?[]:y.filter(I=>w.has(Number(I.item_id))),[y,w]),N=f.useMemo(()=>{const I=new Map;for(const W of k){const B=Number(W.project_id),C=Number(W.quantity??0);I.set(B,(I.get(B)??0)+C)}const E=Array.from(I.entries()).map(([W,B])=>{const C=k.find(z=>Number(z.project_id)===Number(W)),D=C?.project_code?`${C.project_code}`:C?.project_name??`#${W}`;return{projectId:W,total:B,name:D}});return E.sort((W,B)=>B.total-W.total),E},[k]),P=f.useMemo(()=>{const I=new Map;return N.forEach((E,W)=>{I.set(E.projectId,IE[W%IE.length])}),I},[N]),A=f.useMemo(()=>{const I=new Set;for(const W of k)I.add(String(W.pole??""));const E=Array.from(I.values());return E.sort((W,B)=>W.localeCompare(B)),E},[k]),M=f.useMemo(()=>{const I={};for(const E of A)I[i(E)]=E;return I},[A]),R=f.useMemo(()=>{const I=new Map;for(const W of k){const B=Number(W.item_id),C=W.item_name;I.has(B)||I.set(B,{item_id:B,label:C,item_name:C,byPole:new Map});const D=I.get(B),z=String(W.pole??"");D.byPole.has(z)||D.byPole.set(z,new Map);const L=Number(W.project_id),X=Number(W.quantity??0),H=D.byPole.get(z);H.set(L,(H.get(L)??0)+X)}const E=Array.from(I.values());return E.sort((W,B)=>String(W.item_name||"").localeCompare(String(B.item_name||""))),E.map(W=>{const B={label:W.label,item_name:W.item_name};for(const[C,D]of W.byPole.entries()){const z=i(C);for(const[L,X]of D.entries())B[`${z}__p_${L}`]=X}return B})},[k]),O=f.useMemo(()=>A.flatMap(I=>{const E=i(I);return N.map(W=>({key:`${E}__p_${W.projectId}`,stackId:E,poleLabel:I,name:W.name,color:P.get(W.projectId)??"#3b82f6"}))}),[A,N,P]),q=I=>{m(I?_.map(E=>E.id):[])},S=u.length>0&&u.length===_.length;return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"card-header flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:s("ppe.analytics.title")}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s("ppe.analytics.subtitle")})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsxs("select",{value:p,onChange:I=>g(I.target.value),className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md px-2 py-1 text-sm",children:[r.jsx("option",{value:"year",children:s("ppe.analytics.duration.year")}),r.jsx("option",{value:"month",children:s("ppe.analytics.duration.month")}),r.jsx("option",{value:"week",children:s("ppe.analytics.duration.week")})]}),p==="month"&&r.jsx("input",{type:"number",min:1,max:12,value:x,onChange:I=>h(Number(I.target.value)),className:"w-20 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md px-2 py-1 text-sm"}),p==="week"&&r.jsx("input",{type:"number",min:1,max:52,value:v,onChange:I=>b(I.target.value),placeholder:"1-52",className:"w-20 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md px-2 py-1 text-sm"})]})]}),r.jsxs("div",{className:"p-4 border-t border-gray-100 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:s("ppe.analytics.filters.items")}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[r.jsx("input",{type:"checkbox",checked:S,onChange:I=>q(I.target.checked)}),s("ppe.analytics.filters.selectAll")]})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 max-h-40 overflow-y-auto pr-1",children:_.map(I=>{const E=w.has(Number(I.id));return r.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-200",children:[r.jsx("input",{type:"checkbox",checked:E,onChange:W=>{const B=new Set(w);W.target.checked?B.add(Number(I.id)):B.delete(Number(I.id)),m(Array.from(B.values()))}}),I.name]},I.id)})})]})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:s("ppe.analytics.chartTitle")})}),r.jsxs("div",{className:"p-4",children:[r.jsx("div",{className:"h-[520px]",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Rr,{data:R,margin:{top:10,right:20,left:10,bottom:90},barCategoryGap:18,children:[r.jsx(jt,{strokeDasharray:"3 3"}),r.jsx(ct,{dataKey:"label",interval:0,angle:-45,textAnchor:"end",height:90,tick:{fontSize:11}}),r.jsx(rt,{tick:{fontSize:11},width:60,label:{value:s("ppe.analytics.yAxis"),angle:-90,position:"insideLeft"}}),r.jsx(tt,{shared:!1,content:I=>r.jsx(mje,{...I,t:s,poleLabelByKey:M}),allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999}}),O.map(I=>r.jsx(pt,{dataKey:I.key,stackId:I.stackId,fill:I.color,name:I.name,isAnimationActive:!1},I.key))]})})}),!o&&R.length===0&&r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:s("ppe.analytics.noData")}),o&&r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:s("common.loading")})]})]})]})}),$s={water:"#0ea5e9",electricity:"#eab308",hse:"#22c55e",medical:"#8b5cf6"},nj=f.memo(function({title:t,value:a,icon:n,color:s,trend:i,unit:o}){const l={blue:"border-blue-200 bg-blue-50 dark:border-blue-700 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400",yellow:"border-yellow-200 bg-yellow-50 dark:border-yellow-700 dark:bg-yellow-900/50 text-yellow-600 dark:text-yellow-400",green:"border-green-200 bg-green-50 dark:border-green-700 dark:bg-green-900/50 text-green-600 dark:text-green-400",purple:"border-purple-200 bg-purple-50 dark:border-purple-700 dark:bg-purple-900/50 text-purple-600 dark:text-purple-400"};return r.jsxs("div",{className:`rounded-xl border-2 p-4 ${l[s]}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(n,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:t})]}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[a,r.jsx("span",{className:"text-sm font-normal ml-1",children:o})]}),i&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:i})]})}),fje=f.memo(function({data:t,loading:a}){const n=Oi(),s=f.useMemo(()=>({1:n("months.january"),2:n("months.february"),3:n("months.march"),4:n("months.april"),5:n("months.may"),6:n("months.june"),7:n("months.july"),8:n("months.august"),9:n("months.september"),10:n("months.october"),11:n("months.november"),12:n("months.december")}),[n]),i=f.useMemo(()=>(Array.isArray(t?.series)?t.series:[]).map(x=>({month:x.month,month_label:s[x.month]??String(x.month),noise_avg:Number(x.noise_avg??0),water_total:Number(x.water_total??0),electricity_total:Number(x.electricity_total??0),lux_avg:Number(x.lux_avg??0),lux_compliance_rate:Number(x.lux_compliance_rate??0),lux_count:Number(x.lux_count??0)})),[t,s]),o=f.useMemo(()=>{const g=t?.stats||{};return{noise_avg:Number(g.noise_avg??0),water_total:Number(g.water_total??0),electricity_total:Number(g.electricity_total??0),lux_avg:Number(g.lux_avg??0),lux_compliance_rate:Number(g.lux_compliance_rate??0),lux_count:Number(g.lux_count??0)}},[t]),l=f.useMemo(()=>{const g=i.filter(h=>Number(h.lux_count??0)>0).length,x=i.length>0?Math.round(g*100/i.length):0;return{waterConsumption:o.water_total,electricityUsage:o.electricity_total,noiseMonitoring:o.noise_avg,luxAvg:o.lux_avg,luxComplianceRate:o.lux_compliance_rate,luxCount:o.lux_count,luxCoverageRate:x}},[i,o]),c=f.useMemo(()=>i.map(g=>({month:g.month_label,water:g.water_total??0,electricity:g.electricity_total??0})),[i]),d=f.useMemo(()=>i.map(g=>({month:g.month_label,lux_avg:g.lux_avg??0,lux_compliance_rate:g.lux_compliance_rate??0})),[i]),u=f.useMemo(()=>i.map(g=>({month:g.month_label,noise_avg:g.noise_avg??0})),[i]),m=f.useMemo(()=>i.map(g=>({month:g.month_label,lux_count:g.lux_count??0,lux_compliance_rate:g.lux_compliance_rate??0})),[i]);f.useMemo(()=>[{name:n("dashboard.environmental.luxComplianceRate"),current:Math.round(l.luxComplianceRate),target:95,color:$s.hse},{name:n("dashboard.environmental.luxDataCoverage"),current:Math.round(l.luxCoverageRate),target:100,color:$s.medical}],[n,l]);const p=f.useMemo(()=>i.some(g=>Number(g.noise_avg??0)>0||Number(g.water_total??0)>0||Number(g.electricity_total??0)>0||Number(g.lux_avg??0)>0||Number(g.lux_compliance_rate??0)>0),[i]);return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[a&&r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:n("common.loading")}),!a&&!p&&r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:n("common.noData")}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsx(nj,{title:n("dashboard.environmental.noiseMonitoring"),value:Number(l.noiseMonitoring??0).toFixed(1),icon:O5,color:"purple",unit:"dB",trend:n("dashboard.environmental.yearToDate")}),r.jsx(nj,{title:n("dashboard.environmental.waterConsumption"),value:l.waterConsumption.toLocaleString(),icon:N5,color:"blue",unit:"m",trend:n("dashboard.environmental.yearToDate")}),r.jsx(nj,{title:n("dashboard.environmental.electricityUsage"),value:l.electricityUsage.toLocaleString(),icon:M5,color:"yellow",unit:"kWh",trend:n("dashboard.environmental.yearToDate")})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:n("dashboard.environmental.lightingTrends")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-64",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Ci,{data:d,children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:opacity-20"}),r.jsx(ct,{dataKey:"month",tick:{fontSize:11}}),r.jsx(rt,{yAxisId:"left",tick:{fontSize:11},domain:[0,100]}),r.jsx(rt,{yAxisId:"right",orientation:"right",tick:{fontSize:11}}),r.jsx(tt,{allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999}}),r.jsx(Kt,{yAxisId:"left",type:"monotone",dataKey:"lux_compliance_rate",stroke:$s.hse,strokeWidth:2,dot:{r:4}}),r.jsx(Kt,{yAxisId:"right",type:"monotone",dataKey:"lux_avg",stroke:$s.medical,strokeWidth:2,dot:{r:4}}),r.jsx(aa,{})]})})})})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:n("dashboard.environmental.waterVsElectricity")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-64",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(ci,{data:c,children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:opacity-20"}),r.jsx(ct,{dataKey:"month",tick:{fontSize:11}}),r.jsx(rt,{yAxisId:"left",tick:{fontSize:11}}),r.jsx(rt,{yAxisId:"right",orientation:"right",tick:{fontSize:11}}),r.jsx(tt,{allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999}}),r.jsx(pt,{yAxisId:"left",dataKey:"water",fill:$s.water,name:`${n("dashboard.environmental.waterConsumption")} (m)`,radius:[4,4,0,0]}),r.jsx(Kt,{yAxisId:"right",type:"monotone",dataKey:"electricity",stroke:$s.electricity,strokeWidth:2,name:`${n("dashboard.environmental.electricityUsage")} (kWh)`})]})})})})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:n("dashboard.environmental.noiseTrends")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-64",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Rv,{data:u,children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:opacity-20"}),r.jsx(ct,{dataKey:"month",tick:{fontSize:11}}),r.jsx(rt,{tick:{fontSize:11}}),r.jsx(tt,{allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999}}),r.jsx(es,{type:"monotone",dataKey:"noise_avg",stroke:$s.medical,fill:$s.medical,fillOpacity:.35,name:n("dashboard.environmental.noiseMonitoring")})]})})})})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:n("dashboard.environmental.lightingSummary")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-64",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(ci,{data:m,children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:opacity-20"}),r.jsx(ct,{dataKey:"month",tick:{fontSize:11}}),r.jsx(rt,{yAxisId:"left",tick:{fontSize:11},allowDecimals:!1}),r.jsx(rt,{yAxisId:"right",orientation:"right",tick:{fontSize:11},domain:[0,100]}),r.jsx(tt,{allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999}}),r.jsx(pt,{yAxisId:"left",dataKey:"lux_count",fill:$s.medical,name:n("dashboard.environmental.luxMeasurements"),radius:[4,4,0,0]}),r.jsx(Kt,{yAxisId:"right",type:"monotone",dataKey:"lux_compliance_rate",stroke:$s.hse,strokeWidth:2,dot:{r:4},name:n("dashboard.environmental.luxComplianceRate")})]})})})})]})]})]})}),Ih={trend:"#3b82f6",resolved:"#16a34a",unresolved:"#dc2626"},Lh=["#2563eb","#7c3aed","#f59e0b","#10b981","#ef4444","#06b6d4","#a855f7","#84cc16"],lm=f.memo(function({title:t,value:a,icon:n,color:s,subtitle:i}){const o={red:"border-red-200 bg-red-50 dark:border-red-700 dark:bg-red-900/50 text-red-600 dark:text-red-400",amber:"border-amber-200 bg-amber-50 dark:border-amber-700 dark:bg-amber-900/50 text-amber-600 dark:text-amber-400",green:"border-green-200 bg-green-50 dark:border-green-700 dark:bg-green-900/50 text-green-600 dark:text-green-400",purple:"border-purple-200 bg-purple-50 dark:border-purple-700 dark:bg-purple-900/50 text-purple-600 dark:text-purple-400",blue:"border-blue-200 bg-blue-50 dark:border-blue-700 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400"};return r.jsxs("div",{className:`rounded-xl border-2 p-4 ${o[s]}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(n,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:t})]}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:a}),i&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:i})]})}),hje=f.memo(function({year:t,projects:a,projectId:n="all",week:s="all",pole:i=""}){const o=Oi(),[l,c]=f.useState(!0),[d,u]=f.useState(null),[m,p]=f.useState(null),[g,x]=f.useState(null),[h,v]=f.useState(null),[b,y]=f.useState(null),[j,_]=f.useState(null),[w,k]=f.useState(null),[N,P]=f.useState(null),[A,M]=f.useState(null),R=o("common.hourShort")??"h",O=o("common.dayShort")??"d",q=ge=>{if(ge==null)return"";const se=Number(ge);return Number.isNaN(se)?"":se<48?`${Math.round(se*10)/10}${R}`:`${Math.round(se/24*10)/10}${O}`},S=f.useMemo(()=>{const ge=new Map,se=T=>{const oe=String(T??"");let G=0;for(let V=0;V<oe.length;V+=1)G=(G<<5)-G+oe.charCodeAt(V),G|=0;return Math.abs(G)};return[...new Set([...(w?.items??[]).map(T=>T?.pole).filter(Boolean),...(A?.rows??[]).map(T=>T?.pole).filter(Boolean)])].forEach(T=>{const oe=se(T)%Lh.length;ge.set(T,Lh[oe])}),T=>{const oe=T&&String(T).trim()!==""?String(T):"";if(!ge.has(oe)){const G=se(oe)%Lh.length;ge.set(oe,Lh[G])}return ge.get(oe)}},[w?.items,A?.rows]);f.useEffect(()=>{let ge=!0;return(async()=>{c(!0);try{const he={year:t};i&&(he.pole=i),n!=="all"&&(he.project_id=n),s!=="all"&&(he.week=s);const[T,oe,G,V,Y,ce,je,re,U]=await Promise.all([Ma.getSorAnalyticsKpis(he),Ma.getSorProjectTreemap(he),Ma.getSorThemeAvgResolution(he),Ma.getSorThemeResolutionBox(he),Ma.getSorThemeUnresolvedCount(he),Ma.getSorThemeResolvedUnresolved(he),Ma.getSorThemeBubble(he),Ma.getSorUserThemeAvgResolution(he),Ma.getSorPoleThemeUnresolvedRate(he)]);if(!ge)return;u(T.data.data),p(oe.data.data),x(G.data.data),v(V.data.data),y(Y.data.data),_(ce.data.data),k(je.data.data),P(re.data.data),M(U.data.data)}finally{ge&&c(!1)}})(),()=>{ge=!1}},[t,n,s,i]);const I=d?.total??0,E=d?.unresolved_pct??0,W=d?.avg_resolution_hours,B=d?.worst_theme,C=d?.worst_project,D=d?.highest_avg_resolution_user,z=f.useMemo(()=>(m?.items??[]).map(se=>({name:se.name,size:se.count??0,pole:se.pole??"",count:se.count??0})),[m?.items]),L=f.useMemo(()=>(g?.items??[]).filter(se=>se?.avg_hours!==null&&se?.avg_hours!==void 0).map(se=>({theme:(se.theme??"").toString().slice(0,28),theme_full:se.theme,avg_hours:Number(se.avg_hours??0),count:se.count??0})),[g?.items]),X=f.useMemo(()=>{const ge=Math.max(0,...L.map(se=>se.avg_hours));return ge>0?ge:1},[L]),H=f.useMemo(()=>(b?.items??[]).map(se=>({theme:(se.theme??"").toString().slice(0,28),theme_full:se.theme,count:se.count??0})),[b?.items]),F=f.useMemo(()=>(j?.items??[]).map(se=>({theme:(se.theme??"").toString().slice(0,26),theme_full:se.theme,resolved:se.resolved??0,unresolved:se.unresolved??0,total:se.total??0})),[j?.items]),ke=f.useMemo(()=>(w?.items??[]).filter(se=>se?.avg_hours!==null&&se?.avg_hours!==void 0).map(se=>({theme:(se.theme??"").toString().slice(0,26),theme_full:se.theme,avg_hours:Number(se.avg_hours??0),count:Number(se.count??0),pole:se.pole??""})),[w?.items]),ae=f.useMemo(()=>{const ge=w?.items??[],se=new Map;return ge.forEach(he=>{const T=he?.pole&&String(he.pole).trim()!==""?String(he.pole):"",oe=Number(he?.count??0),G=Number(he?.avg_hours??0);se.has(T)||se.set(T,{pole:T,total:0,_weightedHours:0});const V=se.get(T);V.total+=oe,V._weightedHours+=oe*G}),Array.from(se.values()).map(he=>({pole:he.pole,total:he.total,avg_hours:he.total>0?he._weightedHours/he.total:0})).sort((he,T)=>T.total-he.total)},[w?.items]),ue=f.useMemo(()=>(h?.items??[]).filter(se=>se&&se.count>0).map(se=>({theme:(se.theme??"").toString().slice(0,26),theme_full:se.theme,count:se.count,min:Number(se.min??0),q1:Number(se.q1??0),median:Number(se.median??0),q3:Number(se.q3??0),max:Number(se.max??0)})),[h?.items]),Z=f.useMemo(()=>{const ge=Math.max(0,...ue.map(se=>se.max));return ge>0?ge:1},[ue]),me=(ge,se,he)=>{if(ge==null)return"transparent";const T=Number(ge);if(Number.isNaN(T)||T<=0)return"transparent";const G=.15+Math.min(1,Math.max(0,T/Math.max(1,se)))*.85;return`rgba(${he[0]}, ${he[1]}, ${he[2]}, ${G})`};return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4",children:[r.jsx(lm,{title:o("dashboard.deviations.total"),value:I,icon:Qt,color:"blue",subtitle:o("dashboard.deviations.yearContext",{year:t})}),r.jsx(lm,{title:o("dashboard.deviations.analytics.unresolvedPct"),value:`${E}%`,icon:oa,color:"red",subtitle:o("dashboard.deviations.analytics.unresolvedSubtitle")}),r.jsx(lm,{title:o("dashboard.deviations.analytics.avgResolution"),value:W==null?"":q(W),icon:nk,color:"green",subtitle:o("dashboard.deviations.analytics.avgResolutionSubtitle")}),r.jsx(lm,{title:o("dashboard.deviations.analytics.worstTheme"),value:B?.label??"",icon:zz,color:"purple",subtitle:B?`${q(B.avg_resolution_hours)}  ${B.unresolved??0}`:""}),r.jsx(lm,{title:o("dashboard.deviations.analytics.worstProject"),value:C?.name??C?.code??"",icon:Ez,color:"amber",subtitle:D?`${D.name}  ${q(D.avg_resolution_hours)}`:""})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:o("dashboard.deviations.analytics.poleTotals")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-[420px]",children:ae.length>0?r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Rr,{data:ae,layout:"vertical",margin:{left:12,right:92,top:10,bottom:10},barCategoryGap:14,children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:opacity-20"}),r.jsx(ct,{type:"number",tick:{fontSize:11}}),r.jsx(rt,{type:"category",dataKey:"pole",width:92,tick:{fontSize:11}}),r.jsx(tt,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#f3f4f6"},allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999},formatter:ge=>[ge,o("dashboard.deviations.analytics.count")]}),r.jsxs(pt,{dataKey:"total",radius:[0,6,6,0],barSize:38,children:[ae.map(ge=>r.jsx(Vn,{fill:S(ge.pole)},ge.pole)),r.jsx(Ht,{dataKey:"total",position:"right",offset:8,fill:"#111827",fontSize:11})]})]})}):r.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:o("common.noData")})})})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:o("dashboard.deviations.analytics.projectTreemap")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-[420px]",children:z.length>0?r.jsx(ht,{width:"100%",height:"100%",children:r.jsx(bN,{data:z,dataKey:"size",nameKey:"name",stroke:"#ffffff",fill:"#93c5fd",content:({depth:ge,x:se,y:he,width:T,height:oe,name:G,payload:V})=>{const Y=V?.pole,ce=V?.count,je=S(Y),re=T>70&&oe>28;return r.jsxs("g",{children:[r.jsx("rect",{x:se,y:he,width:T,height:oe,style:{fill:je,stroke:"#ffffff",strokeWidth:2}}),re&&r.jsx("text",{x:se+6,y:he+18,fill:"#ffffff",fontSize:11,fontWeight:700,children:String(G).slice(0,18)}),re&&r.jsx("text",{x:se+6,y:he+34,fill:"#ffffff",fontSize:11,children:ce})]})}})}):r.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:o("common.noData")})})})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:o("dashboard.deviations.analytics.themeAvgResolution")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-80",children:L.length>0?r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Rr,{data:L,layout:"vertical",margin:{left:10,right:20,top:10,bottom:10},children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:opacity-20"}),r.jsx(ct,{type:"number",tick:{fontSize:11}}),r.jsx(rt,{type:"category",dataKey:"theme",width:160,tick:{fontSize:11}}),r.jsx(tt,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#f3f4f6"},allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999},formatter:(ge,se,he)=>[q(ge),o("dashboard.deviations.analytics.hours")],labelFormatter:(ge,se)=>se?.[0]?.payload?.theme_full??ge}),r.jsxs(pt,{dataKey:"avg_hours",radius:[0,6,6,0],children:[L.map(ge=>{const se=Math.min(1,Math.max(0,ge.avg_hours/X)),he=Math.round(22+se*220),T=Math.round(163-se*120),oe=Math.round(74-se*40);return r.jsx(Vn,{fill:`rgb(${he}, ${T}, ${oe})`},ge.theme_full)}),r.jsx(Ht,{dataKey:"avg_hours",position:"right",formatter:ge=>q(ge),fill:"#111827",fontSize:11})]})]})}):r.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:o("common.noData")})})})]}),r.jsxs("div",{className:"card lg:col-span-2",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:o("dashboard.deviations.analytics.themeResolutionBox")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"space-y-2",children:ue.length===0?r.jsx("div",{className:"flex items-center justify-center h-72 text-gray-400",children:o("common.noData")}):r.jsx("div",{className:"space-y-2",children:ue.map(ge=>{const se=ge.min/Z*100,he=ge.max/Z*100,T=ge.q1/Z*100,oe=ge.q3/Z*100,G=ge.median/Z*100;return r.jsxs("div",{className:"grid grid-cols-[220px_1fr] gap-3 items-center",children:[r.jsx("div",{className:"text-[11px] text-gray-700 dark:text-gray-200 whitespace-nowrap overflow-hidden text-ellipsis",title:ge.theme_full,children:ge.theme}),r.jsxs("div",{className:"relative h-7",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 right-0 bg-gray-50 dark:bg-white/5 rounded"}),r.jsx("div",{className:"absolute top-1/2 h-[2px] bg-gray-300 dark:bg-white/20",style:{left:`${se}%`,right:`${100-he}%`,transform:"translateY(-50%)"}}),r.jsx("div",{className:"absolute top-1/2 w-[2px] bg-gray-400 dark:bg-white/40",style:{left:`${se}%`,height:"10px",transform:"translate(-50%, -50%)"}}),r.jsx("div",{className:"absolute top-1/2 w-[2px] bg-gray-400 dark:bg-white/40",style:{left:`${he}%`,height:"10px",transform:"translate(-50%, -50%)"}}),r.jsx("div",{className:"absolute top-1/2 bg-blue-500/70 dark:bg-blue-400/70 rounded",style:{left:`${T}%`,width:`${Math.max(0,oe-T)}%`,height:"14px",transform:"translateY(-50%)"}}),r.jsx("div",{className:"absolute top-1/2 w-[2px] bg-white",style:{left:`${G}%`,height:"14px",transform:"translate(-50%, -50%)"}}),r.jsx("div",{className:"absolute -top-0.5 right-0 text-[10px] text-gray-500 dark:text-gray-400",children:q(ge.median)})]})]},ge.theme_full)})})})})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:o("dashboard.deviations.analytics.unresolvedByTheme")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-80",children:H.length>0?r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Rr,{data:H,layout:"vertical",margin:{left:10,right:20,top:10,bottom:10},children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:opacity-20"}),r.jsx(ct,{type:"number",tick:{fontSize:11}}),r.jsx(rt,{type:"category",dataKey:"theme",width:170,tick:{fontSize:11}}),r.jsx(tt,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#f3f4f6"},allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999},labelFormatter:(ge,se)=>se?.[0]?.payload?.theme_full??ge}),r.jsx(pt,{dataKey:"count",fill:Ih.unresolved,radius:[0,6,6,0],children:r.jsx(Ht,{dataKey:"count",position:"right",fill:"#111827",fontSize:11})})]})}):r.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:o("common.noData")})})})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:o("dashboard.deviations.analytics.resolvedVsUnresolved")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-80",children:F.length>0?r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Rr,{data:F,layout:"vertical",margin:{left:10,right:20,top:10,bottom:10},children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:opacity-20"}),r.jsx(ct,{type:"number",tick:{fontSize:11}}),r.jsx(rt,{type:"category",dataKey:"theme",width:170,tick:{fontSize:11}}),r.jsx(tt,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#f3f4f6"},allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:9999},labelFormatter:(ge,se)=>se?.[0]?.payload?.theme_full??ge}),r.jsx(aa,{}),r.jsx(pt,{dataKey:"unresolved",stackId:"a",fill:Ih.unresolved,name:o("dashboard.deviations.analytics.unresolved")}),r.jsx(pt,{dataKey:"resolved",stackId:"a",fill:Ih.resolved,name:o("dashboard.deviations.analytics.resolved")})]})}):r.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:o("common.noData")})})})]}),r.jsxs("div",{className:"card lg:col-span-2",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:o("dashboard.deviations.analytics.themeBubble")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-96",children:ke.length>0?r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(XL,{margin:{top:10,right:20,left:10,bottom:10},children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:opacity-20"}),r.jsx(ct,{type:"number",dataKey:"avg_hours",name:o("dashboard.deviations.analytics.avgResolution"),tick:{fontSize:11}}),r.jsx(rt,{type:"category",dataKey:"theme",name:o("dashboard.deviations.analytics.theme"),width:220,tick:{fontSize:11}}),r.jsx(Gl,{type:"number",dataKey:"count",range:[80,600]}),r.jsx(tt,{cursor:{strokeDasharray:"3 3"},contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#f3f4f6"},wrapperStyle:{zIndex:9999},allowEscapeViewBox:{x:!0,y:!0},formatter:(ge,se,he)=>se==="avg_hours"?[q(ge),o("dashboard.deviations.analytics.avgResolution")]:se==="count"?[ge,o("dashboard.deviations.analytics.count")]:[ge,se],labelFormatter:(ge,se)=>se?.[0]?.payload?.theme_full??ge}),r.jsx(Yl,{name:o("dashboard.deviations.analytics.theme"),data:ke,fill:Ih.trend,children:ke.map(ge=>r.jsx(Vn,{fill:S(ge.pole)},ge.theme_full))})]})}):r.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:o("common.noData")})})})]}),r.jsxs("div",{className:"card lg:col-span-2",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:o("dashboard.deviations.analytics.userThemeHeatmap")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"overflow-x-auto",children:(()=>{const ge=N?.themes??[],se=N?.rows??[],he=se.flatMap(oe=>ge.map(G=>Number(oe?.values?.[G.key]??0))).filter(oe=>oe>0),T=Math.max(0,...he);return ge.length===0||se.length===0?r.jsx("div",{className:"flex items-center justify-center h-72 text-gray-400",children:o("common.noData")}):r.jsxs("div",{className:"grid min-w-full",style:{gridTemplateColumns:`220px repeat(${ge.length}, minmax(72px, 1fr))`},children:[r.jsxs("div",{className:"text-xs font-semibold text-gray-600 dark:text-gray-300 p-2",children:[r.jsx(sa,{className:"w-4 h-4 inline-block mr-1"}),o("dashboard.deviations.analytics.user")]}),ge.map(oe=>r.jsx("div",{className:"text-[11px] font-semibold text-gray-600 dark:text-gray-300 p-2 text-center",title:oe.label,children:String(oe.label).slice(0,12)},oe.key)),se.map(oe=>r.jsxs(f.Fragment,{children:[r.jsx("div",{className:"text-[11px] text-gray-700 dark:text-gray-200 p-2 whitespace-nowrap overflow-hidden text-ellipsis",title:oe.user,children:oe.user}),ge.map(G=>{const V=oe?.values?.[G.key],Y=me(V,T,[220,38,38]);return r.jsx("div",{className:"text-[11px] font-semibold text-gray-900 dark:text-gray-100 p-2 text-center border border-gray-100 dark:border-white/10",style:{backgroundColor:Y},title:`${oe.user}  ${G.label}: ${q(V)}`,children:V?q(V):""},`${oe.user_id}-${G.key}`)})]},oe.user_id))]})})()})})]}),r.jsxs("div",{className:"card lg:col-span-2",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:o("dashboard.deviations.analytics.poleThemeHeatmap")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"overflow-x-auto",children:(()=>{const ge=A?.themes??[],se=A?.rows??[],he=se.flatMap(oe=>ge.map(G=>Number(oe?.values?.[G.key]??0))).filter(oe=>oe>0),T=Math.max(0,...he);return ge.length===0||se.length===0?r.jsx("div",{className:"flex items-center justify-center h-72 text-gray-400",children:o("common.noData")}):r.jsxs("div",{className:"grid",style:{gridTemplateColumns:`220px repeat(${ge.length}, minmax(64px, 1fr))`},children:[r.jsxs("div",{className:"text-xs font-semibold text-gray-600 dark:text-gray-300 p-2",children:[r.jsx(Sz,{className:"w-4 h-4 inline-block mr-1"}),o("dashboard.deviations.analytics.pole")]}),ge.map(oe=>r.jsx("div",{className:"text-[11px] font-semibold text-gray-600 dark:text-gray-300 p-2 text-center",title:oe.label,children:String(oe.label).slice(0,12)},oe.key)),se.map(oe=>r.jsxs(f.Fragment,{children:[r.jsx("div",{className:"text-[11px] font-semibold p-2 whitespace-nowrap overflow-hidden text-ellipsis",style:{color:S(oe.pole)},title:oe.pole,children:oe.pole}),ge.map(G=>{const V=oe?.values?.[G.key],Y=me(V,T,[220,38,38]);return r.jsx("div",{className:"text-[11px] font-semibold text-gray-900 dark:text-gray-100 p-2 text-center border border-gray-100 dark:border-white/10",style:{backgroundColor:Y},title:`${oe.pole}  ${G.label}: ${V??0}%`,children:V?`${V}%`:""},`${oe.pole}-${G.key}`)})]},oe.pole))]})})()})})]})]})]})});function $h(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var e$={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(a){e.exports=a()})(function(){return function a(n,s,i){function o(d,u){if(!s[d]){if(!n[d]){var m=typeof $h=="function"&&$h;if(!u&&m)return m(d,!0);if(l)return l(d,!0);var p=new Error("Cannot find module '"+d+"'");throw p.code="MODULE_NOT_FOUND",p}var g=s[d]={exports:{}};n[d][0].call(g.exports,function(x){var h=n[d][1][x];return o(h||x)},g,g.exports,a,n,s,i)}return s[d].exports}for(var l=typeof $h=="function"&&$h,c=0;c<i.length;c++)o(i[c]);return o}({1:[function(a,n,s){var i=a("./utils"),o=a("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(c){for(var d,u,m,p,g,x,h,v=[],b=0,y=c.length,j=y,_=i.getTypeOf(c)!=="string";b<c.length;)j=y-b,m=_?(d=c[b++],u=b<y?c[b++]:0,b<y?c[b++]:0):(d=c.charCodeAt(b++),u=b<y?c.charCodeAt(b++):0,b<y?c.charCodeAt(b++):0),p=d>>2,g=(3&d)<<4|u>>4,x=1<j?(15&u)<<2|m>>6:64,h=2<j?63&m:64,v.push(l.charAt(p)+l.charAt(g)+l.charAt(x)+l.charAt(h));return v.join("")},s.decode=function(c){var d,u,m,p,g,x,h=0,v=0,b="data:";if(c.substr(0,b.length)===b)throw new Error("Invalid base64 input, it looks like a data url.");var y,j=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===l.charAt(64)&&j--,c.charAt(c.length-2)===l.charAt(64)&&j--,j%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=o.uint8array?new Uint8Array(0|j):new Array(0|j);h<c.length;)d=l.indexOf(c.charAt(h++))<<2|(p=l.indexOf(c.charAt(h++)))>>4,u=(15&p)<<4|(g=l.indexOf(c.charAt(h++)))>>2,m=(3&g)<<6|(x=l.indexOf(c.charAt(h++))),y[v++]=d,g!==64&&(y[v++]=u),x!==64&&(y[v++]=m);return y}},{"./support":30,"./utils":32}],2:[function(a,n,s){var i=a("./external"),o=a("./stream/DataWorker"),l=a("./stream/Crc32Probe"),c=a("./stream/DataLengthProbe");function d(u,m,p,g,x){this.compressedSize=u,this.uncompressedSize=m,this.crc32=p,this.compression=g,this.compressedContent=x}d.prototype={getContentWorker:function(){var u=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),m=this;return u.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(u,m,p){return u.pipe(new l).pipe(new c("uncompressedSize")).pipe(m.compressWorker(p)).pipe(new c("compressedSize")).withStreamInfo("compression",m)},n.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(a,n,s){var i=a("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=a("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(a,n,s){var i=a("./utils"),o=function(){for(var l,c=[],d=0;d<256;d++){l=d;for(var u=0;u<8;u++)l=1&l?3988292384^l>>>1:l>>>1;c[d]=l}return c}();n.exports=function(l,c){return l!==void 0&&l.length?i.getTypeOf(l)!=="string"?function(d,u,m,p){var g=o,x=p+m;d^=-1;for(var h=p;h<x;h++)d=d>>>8^g[255&(d^u[h])];return-1^d}(0|c,l,l.length,0):function(d,u,m,p){var g=o,x=p+m;d^=-1;for(var h=p;h<x;h++)d=d>>>8^g[255&(d^u.charCodeAt(h))];return-1^d}(0|c,l,l.length,0):0}},{"./utils":32}],5:[function(a,n,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(a,n,s){var i=null;i=typeof Promise<"u"?Promise:a("lie"),n.exports={Promise:i}},{lie:37}],7:[function(a,n,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=a("pako"),l=a("./utils"),c=a("./stream/GenericWorker"),d=i?"uint8array":"array";function u(m,p){c.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=p,this.meta={}}s.magic="\b\0",l.inherits(u,c),u.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(d,m.data),!1)},u.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(p){m.push({data:p,meta:m.meta})}},s.compressWorker=function(m){return new u("Deflate",m)},s.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(a,n,s){function i(g,x){var h,v="";for(h=0;h<x;h++)v+=String.fromCharCode(255&g),g>>>=8;return v}function o(g,x,h,v,b,y){var j,_,w=g.file,k=g.compression,N=y!==d.utf8encode,P=l.transformTo("string",y(w.name)),A=l.transformTo("string",d.utf8encode(w.name)),M=w.comment,R=l.transformTo("string",y(M)),O=l.transformTo("string",d.utf8encode(M)),q=A.length!==w.name.length,S=O.length!==M.length,I="",E="",W="",B=w.dir,C=w.date,D={crc32:0,compressedSize:0,uncompressedSize:0};x&&!h||(D.crc32=g.crc32,D.compressedSize=g.compressedSize,D.uncompressedSize=g.uncompressedSize);var z=0;x&&(z|=8),N||!q&&!S||(z|=2048);var L=0,X=0;B&&(L|=16),b==="UNIX"?(X=798,L|=function(F,ke){var ae=F;return F||(ae=ke?16893:33204),(65535&ae)<<16}(w.unixPermissions,B)):(X=20,L|=function(F){return 63&(F||0)}(w.dosPermissions)),j=C.getUTCHours(),j<<=6,j|=C.getUTCMinutes(),j<<=5,j|=C.getUTCSeconds()/2,_=C.getUTCFullYear()-1980,_<<=4,_|=C.getUTCMonth()+1,_<<=5,_|=C.getUTCDate(),q&&(E=i(1,1)+i(u(P),4)+A,I+="up"+i(E.length,2)+E),S&&(W=i(1,1)+i(u(R),4)+O,I+="uc"+i(W.length,2)+W);var H="";return H+=`
\0`,H+=i(z,2),H+=k.magic,H+=i(j,2),H+=i(_,2),H+=i(D.crc32,4),H+=i(D.compressedSize,4),H+=i(D.uncompressedSize,4),H+=i(P.length,2),H+=i(I.length,2),{fileRecord:m.LOCAL_FILE_HEADER+H+P+I,dirRecord:m.CENTRAL_FILE_HEADER+i(X,2)+H+i(R.length,2)+"\0\0\0\0"+i(L,4)+i(v,4)+P+I+R}}var l=a("../utils"),c=a("../stream/GenericWorker"),d=a("../utf8"),u=a("../crc32"),m=a("../signature");function p(g,x,h,v){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=x,this.zipPlatform=h,this.encodeFileName=v,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(p,c),p.prototype.push=function(g){var x=g.meta.percent||0,h=this.entriesCount,v=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,c.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:h?(x+100*(h-v-1))/h:100}}))},p.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var x=this.streamFiles&&!g.file.dir;if(x){var h=o(g,x,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:h.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(g){this.accumulate=!1;var x=this.streamFiles&&!g.file.dir,h=o(g,x,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(h.dirRecord),x)this.push({data:function(v){return m.DATA_DESCRIPTOR+i(v.crc32,4)+i(v.compressedSize,4)+i(v.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:h.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var g=this.bytesWritten,x=0;x<this.dirRecords.length;x++)this.push({data:this.dirRecords[x],meta:{percent:100}});var h=this.bytesWritten-g,v=function(b,y,j,_,w){var k=l.transformTo("string",w(_));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(b,2)+i(b,2)+i(y,4)+i(j,4)+i(k.length,2)+k}(this.dirRecords.length,h,g,this.zipComment,this.encodeFileName);this.push({data:v,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(g){this._sources.push(g);var x=this;return g.on("data",function(h){x.processChunk(h)}),g.on("end",function(){x.closedSource(x.previous.streamInfo),x._sources.length?x.prepareNextSource():x.end()}),g.on("error",function(h){x.error(h)}),this},p.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(g){var x=this._sources;if(!c.prototype.error.call(this,g))return!1;for(var h=0;h<x.length;h++)try{x[h].error(g)}catch{}return!0},p.prototype.lock=function(){c.prototype.lock.call(this);for(var g=this._sources,x=0;x<g.length;x++)g[x].lock()},n.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(a,n,s){var i=a("../compressions"),o=a("./ZipFileWorker");s.generateWorker=function(l,c,d){var u=new o(c.streamFiles,d,c.platform,c.encodeFileName),m=0;try{l.forEach(function(p,g){m++;var x=function(y,j){var _=y||j,w=i[_];if(!w)throw new Error(_+" is not a valid compression method !");return w}(g.options.compression,c.compression),h=g.options.compressionOptions||c.compressionOptions||{},v=g.dir,b=g.date;g._compressWorker(x,h).withStreamInfo("file",{name:p,dir:v,date:b,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(u)}),u.entriesCount=m}catch(p){u.error(p)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(a,n,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var l in this)typeof this[l]!="function"&&(o[l]=this[l]);return o}}(i.prototype=a("./object")).loadAsync=a("./load"),i.support=a("./support"),i.defaults=a("./defaults"),i.version="3.10.1",i.loadAsync=function(o,l){return new i().loadAsync(o,l)},i.external=a("./external"),n.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(a,n,s){var i=a("./utils"),o=a("./external"),l=a("./utf8"),c=a("./zipEntries"),d=a("./stream/Crc32Probe"),u=a("./nodejsUtils");function m(p){return new o.Promise(function(g,x){var h=p.decompressed.getContentWorker().pipe(new d);h.on("error",function(v){x(v)}).on("end",function(){h.streamInfo.crc32!==p.decompressed.crc32?x(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}n.exports=function(p,g){var x=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),u.isNode&&u.isStream(p)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",p,!0,g.optimizedBinaryString,g.base64).then(function(h){var v=new c(g);return v.load(h),v}).then(function(h){var v=[o.Promise.resolve(h)],b=h.files;if(g.checkCRC32)for(var y=0;y<b.length;y++)v.push(m(b[y]));return o.Promise.all(v)}).then(function(h){for(var v=h.shift(),b=v.files,y=0;y<b.length;y++){var j=b[y],_=j.fileNameStr,w=i.resolve(j.fileNameStr);x.file(w,j.decompressed,{binary:!0,optimizedBinaryString:!0,date:j.date,dir:j.dir,comment:j.fileCommentStr.length?j.fileCommentStr:null,unixPermissions:j.unixPermissions,dosPermissions:j.dosPermissions,createFolders:g.createFolders}),j.dir||(x.file(w).unsafeOriginalName=_)}return v.zipComment.length&&(x.comment=v.zipComment),x})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(a,n,s){var i=a("../utils"),o=a("../stream/GenericWorker");function l(c,d){o.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(d)}i.inherits(l,o),l.prototype._bindStream=function(c){var d=this;(this._stream=c).pause(),c.on("data",function(u){d.push({data:u,meta:{percent:0}})}).on("error",function(u){d.isPaused?this.generatedError=u:d.error(u)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},l.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(a,n,s){var i=a("readable-stream").Readable;function o(l,c,d){i.call(this,c),this._helper=l;var u=this;l.on("data",function(m,p){u.push(m)||u._helper.pause(),d&&d(p)}).on("error",function(m){u.emit("error",m)}).on("end",function(){u.push(null)})}a("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(a,n,s){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(a,n,s){function i(w,k,N){var P,A=l.getTypeOf(k),M=l.extend(N||{},u);M.date=M.date||new Date,M.compression!==null&&(M.compression=M.compression.toUpperCase()),typeof M.unixPermissions=="string"&&(M.unixPermissions=parseInt(M.unixPermissions,8)),M.unixPermissions&&16384&M.unixPermissions&&(M.dir=!0),M.dosPermissions&&16&M.dosPermissions&&(M.dir=!0),M.dir&&(w=b(w)),M.createFolders&&(P=v(w))&&y.call(this,P,!0);var R=A==="string"&&M.binary===!1&&M.base64===!1;N&&N.binary!==void 0||(M.binary=!R),(k instanceof m&&k.uncompressedSize===0||M.dir||!k||k.length===0)&&(M.base64=!1,M.binary=!0,k="",M.compression="STORE",A="string");var O=null;O=k instanceof m||k instanceof c?k:x.isNode&&x.isStream(k)?new h(w,k):l.prepareContent(w,k,M.binary,M.optimizedBinaryString,M.base64);var q=new p(w,O,M);this.files[w]=q}var o=a("./utf8"),l=a("./utils"),c=a("./stream/GenericWorker"),d=a("./stream/StreamHelper"),u=a("./defaults"),m=a("./compressedObject"),p=a("./zipObject"),g=a("./generate"),x=a("./nodejsUtils"),h=a("./nodejs/NodejsStreamInputAdapter"),v=function(w){w.slice(-1)==="/"&&(w=w.substring(0,w.length-1));var k=w.lastIndexOf("/");return 0<k?w.substring(0,k):""},b=function(w){return w.slice(-1)!=="/"&&(w+="/"),w},y=function(w,k){return k=k!==void 0?k:u.createFolders,w=b(w),this.files[w]||i.call(this,w,null,{dir:!0,createFolders:k}),this.files[w]};function j(w){return Object.prototype.toString.call(w)==="[object RegExp]"}var _={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(w){var k,N,P;for(k in this.files)P=this.files[k],(N=k.slice(this.root.length,k.length))&&k.slice(0,this.root.length)===this.root&&w(N,P)},filter:function(w){var k=[];return this.forEach(function(N,P){w(N,P)&&k.push(P)}),k},file:function(w,k,N){if(arguments.length!==1)return w=this.root+w,i.call(this,w,k,N),this;if(j(w)){var P=w;return this.filter(function(M,R){return!R.dir&&P.test(M)})}var A=this.files[this.root+w];return A&&!A.dir?A:null},folder:function(w){if(!w)return this;if(j(w))return this.filter(function(A,M){return M.dir&&w.test(A)});var k=this.root+w,N=y.call(this,k),P=this.clone();return P.root=N.name,P},remove:function(w){w=this.root+w;var k=this.files[w];if(k||(w.slice(-1)!=="/"&&(w+="/"),k=this.files[w]),k&&!k.dir)delete this.files[w];else for(var N=this.filter(function(A,M){return M.name.slice(0,w.length)===w}),P=0;P<N.length;P++)delete this.files[N[P].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(w){var k,N={};try{if((N=l.extend(w||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=N.type.toLowerCase(),N.compression=N.compression.toUpperCase(),N.type==="binarystring"&&(N.type="string"),!N.type)throw new Error("No output type specified.");l.checkSupport(N.type),N.platform!=="darwin"&&N.platform!=="freebsd"&&N.platform!=="linux"&&N.platform!=="sunos"||(N.platform="UNIX"),N.platform==="win32"&&(N.platform="DOS");var P=N.comment||this.comment||"";k=g.generateWorker(this,N,P)}catch(A){(k=new c("error")).error(A)}return new d(k,N.type||"string",N.mimeType)},generateAsync:function(w,k){return this.generateInternalStream(w).accumulate(k)},generateNodeStream:function(w,k){return(w=w||{}).type||(w.type="nodebuffer"),this.generateInternalStream(w).toNodejsStream(k)}};n.exports=_},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(a,n,s){n.exports=a("stream")},{stream:void 0}],17:[function(a,n,s){var i=a("./DataReader");function o(l){i.call(this,l);for(var c=0;c<this.data.length;c++)l[c]=255&l[c]}a("../utils").inherits(o,i),o.prototype.byteAt=function(l){return this.data[this.zero+l]},o.prototype.lastIndexOfSignature=function(l){for(var c=l.charCodeAt(0),d=l.charCodeAt(1),u=l.charCodeAt(2),m=l.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===c&&this.data[p+1]===d&&this.data[p+2]===u&&this.data[p+3]===m)return p-this.zero;return-1},o.prototype.readAndCheckSignature=function(l){var c=l.charCodeAt(0),d=l.charCodeAt(1),u=l.charCodeAt(2),m=l.charCodeAt(3),p=this.readData(4);return c===p[0]&&d===p[1]&&u===p[2]&&m===p[3]},o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(a,n,s){var i=a("../utils");function o(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var c,d=0;for(this.checkOffset(l),c=this.index+l-1;c>=this.index;c--)d=(d<<8)+this.byteAt(c);return this.index+=l,d},readString:function(l){return i.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},n.exports=o},{"../utils":32}],19:[function(a,n,s){var i=a("./Uint8ArrayReader");function o(l){i.call(this,l)}a("../utils").inherits(o,i),o.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(a,n,s){var i=a("./DataReader");function o(l){i.call(this,l)}a("../utils").inherits(o,i),o.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},o.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},o.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},o.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(a,n,s){var i=a("./ArrayReader");function o(l){i.call(this,l)}a("../utils").inherits(o,i),o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(a,n,s){var i=a("../utils"),o=a("../support"),l=a("./ArrayReader"),c=a("./StringReader"),d=a("./NodeBufferReader"),u=a("./Uint8ArrayReader");n.exports=function(m){var p=i.getTypeOf(m);return i.checkSupport(p),p!=="string"||o.uint8array?p==="nodebuffer"?new d(m):o.uint8array?new u(i.transformTo("uint8array",m)):new l(i.transformTo("array",m)):new c(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(a,n,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(a,n,s){var i=a("./GenericWorker"),o=a("../utils");function l(c){i.call(this,"ConvertWorker to "+c),this.destType=c}o.inherits(l,i),l.prototype.processChunk=function(c){this.push({data:o.transformTo(this.destType,c.data),meta:c.meta})},n.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(a,n,s){var i=a("./GenericWorker"),o=a("../crc32");function l(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}a("../utils").inherits(l,i),l.prototype.processChunk=function(c){this.streamInfo.crc32=o(c.data,this.streamInfo.crc32||0),this.push(c)},n.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(a,n,s){var i=a("../utils"),o=a("./GenericWorker");function l(c){o.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}i.inherits(l,o),l.prototype.processChunk=function(c){if(c){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+c.data.length}o.prototype.processChunk.call(this,c)},n.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(a,n,s){var i=a("../utils"),o=a("./GenericWorker");function l(c){o.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(u){d.dataIsReady=!0,d.data=u,d.max=u&&u.length||0,d.type=i.getTypeOf(u),d.isPaused||d._tickAndRepeat()},function(u){d.error(u)})}i.inherits(l,o),l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,d);break;case"uint8array":c=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":c=this.data.slice(this.index,d)}return this.index=d,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(a,n,s){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,l){return this._listeners[o].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,l){if(this._listeners[o])for(var c=0;c<this._listeners[o].length;c++)this._listeners[o][c].call(this,l)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var l=this;return o.on("data",function(c){l.processChunk(c)}),o.on("end",function(){l.end()}),o.on("error",function(c){l.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,l){return this.extraStreamInfo[o]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=i},{}],29:[function(a,n,s){var i=a("../utils"),o=a("./ConvertWorker"),l=a("./GenericWorker"),c=a("../base64"),d=a("../support"),u=a("../external"),m=null;if(d.nodestream)try{m=a("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(x,h){return new u.Promise(function(v,b){var y=[],j=x._internalType,_=x._outputType,w=x._mimeType;x.on("data",function(k,N){y.push(k),h&&h(N)}).on("error",function(k){y=[],b(k)}).on("end",function(){try{var k=function(N,P,A){switch(N){case"blob":return i.newBlob(i.transformTo("arraybuffer",P),A);case"base64":return c.encode(P);default:return i.transformTo(N,P)}}(_,function(N,P){var A,M=0,R=null,O=0;for(A=0;A<P.length;A++)O+=P[A].length;switch(N){case"string":return P.join("");case"array":return Array.prototype.concat.apply([],P);case"uint8array":for(R=new Uint8Array(O),A=0;A<P.length;A++)R.set(P[A],M),M+=P[A].length;return R;case"nodebuffer":return Buffer.concat(P);default:throw new Error("concat : unsupported type '"+N+"'")}}(j,y),w);v(k)}catch(N){b(N)}y=[]}).resume()})}function g(x,h,v){var b=h;switch(h){case"blob":case"arraybuffer":b="uint8array";break;case"base64":b="string"}try{this._internalType=b,this._outputType=h,this._mimeType=v,i.checkSupport(b),this._worker=x.pipe(new o(b)),x.lock()}catch(y){this._worker=new l("error"),this._worker.error(y)}}g.prototype={accumulate:function(x){return p(this,x)},on:function(x,h){var v=this;return x==="data"?this._worker.on(x,function(b){h.call(v,b.data,b.meta)}):this._worker.on(x,function(){i.delay(h,arguments,v)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(x){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},x)}},n.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(a,n,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!a("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(a,n,s){for(var i=a("./utils"),o=a("./support"),l=a("./nodejsUtils"),c=a("./stream/GenericWorker"),d=new Array(256),u=0;u<256;u++)d[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;d[254]=d[254]=1;function m(){c.call(this,"utf-8 decode"),this.leftOver=null}function p(){c.call(this,"utf-8 encode")}s.utf8encode=function(g){return o.nodebuffer?l.newBufferFrom(g,"utf-8"):function(x){var h,v,b,y,j,_=x.length,w=0;for(y=0;y<_;y++)(64512&(v=x.charCodeAt(y)))==55296&&y+1<_&&(64512&(b=x.charCodeAt(y+1)))==56320&&(v=65536+(v-55296<<10)+(b-56320),y++),w+=v<128?1:v<2048?2:v<65536?3:4;for(h=o.uint8array?new Uint8Array(w):new Array(w),y=j=0;j<w;y++)(64512&(v=x.charCodeAt(y)))==55296&&y+1<_&&(64512&(b=x.charCodeAt(y+1)))==56320&&(v=65536+(v-55296<<10)+(b-56320),y++),v<128?h[j++]=v:(v<2048?h[j++]=192|v>>>6:(v<65536?h[j++]=224|v>>>12:(h[j++]=240|v>>>18,h[j++]=128|v>>>12&63),h[j++]=128|v>>>6&63),h[j++]=128|63&v);return h}(g)},s.utf8decode=function(g){return o.nodebuffer?i.transformTo("nodebuffer",g).toString("utf-8"):function(x){var h,v,b,y,j=x.length,_=new Array(2*j);for(h=v=0;h<j;)if((b=x[h++])<128)_[v++]=b;else if(4<(y=d[b]))_[v++]=65533,h+=y-1;else{for(b&=y===2?31:y===3?15:7;1<y&&h<j;)b=b<<6|63&x[h++],y--;1<y?_[v++]=65533:b<65536?_[v++]=b:(b-=65536,_[v++]=55296|b>>10&1023,_[v++]=56320|1023&b)}return _.length!==v&&(_.subarray?_=_.subarray(0,v):_.length=v),i.applyFromCharCode(_)}(g=i.transformTo(o.uint8array?"uint8array":"array",g))},i.inherits(m,c),m.prototype.processChunk=function(g){var x=i.transformTo(o.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var h=x;(x=new Uint8Array(h.length+this.leftOver.length)).set(this.leftOver,0),x.set(h,this.leftOver.length)}else x=this.leftOver.concat(x);this.leftOver=null}var v=function(y,j){var _;for((j=j||y.length)>y.length&&(j=y.length),_=j-1;0<=_&&(192&y[_])==128;)_--;return _<0||_===0?j:_+d[y[_]]>j?_:j}(x),b=x;v!==x.length&&(o.uint8array?(b=x.subarray(0,v),this.leftOver=x.subarray(v,x.length)):(b=x.slice(0,v),this.leftOver=x.slice(v,x.length))),this.push({data:s.utf8decode(b),meta:g.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=m,i.inherits(p,c),p.prototype.processChunk=function(g){this.push({data:s.utf8encode(g.data),meta:g.meta})},s.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(a,n,s){var i=a("./support"),o=a("./base64"),l=a("./nodejsUtils"),c=a("./external");function d(h){return h}function u(h,v){for(var b=0;b<h.length;++b)v[b]=255&h.charCodeAt(b);return v}a("setimmediate"),s.newBlob=function(h,v){s.checkSupport("blob");try{return new Blob([h],{type:v})}catch{try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return b.append(h),b.getBlob(v)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(h,v,b){var y=[],j=0,_=h.length;if(_<=b)return String.fromCharCode.apply(null,h);for(;j<_;)v==="array"||v==="nodebuffer"?y.push(String.fromCharCode.apply(null,h.slice(j,Math.min(j+b,_)))):y.push(String.fromCharCode.apply(null,h.subarray(j,Math.min(j+b,_)))),j+=b;return y.join("")},stringifyByChar:function(h){for(var v="",b=0;b<h.length;b++)v+=String.fromCharCode(h[b]);return v},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function p(h){var v=65536,b=s.getTypeOf(h),y=!0;if(b==="uint8array"?y=m.applyCanBeUsed.uint8array:b==="nodebuffer"&&(y=m.applyCanBeUsed.nodebuffer),y)for(;1<v;)try{return m.stringifyByChunk(h,b,v)}catch{v=Math.floor(v/2)}return m.stringifyByChar(h)}function g(h,v){for(var b=0;b<h.length;b++)v[b]=h[b];return v}s.applyFromCharCode=p;var x={};x.string={string:d,array:function(h){return u(h,new Array(h.length))},arraybuffer:function(h){return x.string.uint8array(h).buffer},uint8array:function(h){return u(h,new Uint8Array(h.length))},nodebuffer:function(h){return u(h,l.allocBuffer(h.length))}},x.array={string:p,array:d,arraybuffer:function(h){return new Uint8Array(h).buffer},uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return l.newBufferFrom(h)}},x.arraybuffer={string:function(h){return p(new Uint8Array(h))},array:function(h){return g(new Uint8Array(h),new Array(h.byteLength))},arraybuffer:d,uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return l.newBufferFrom(new Uint8Array(h))}},x.uint8array={string:p,array:function(h){return g(h,new Array(h.length))},arraybuffer:function(h){return h.buffer},uint8array:d,nodebuffer:function(h){return l.newBufferFrom(h)}},x.nodebuffer={string:p,array:function(h){return g(h,new Array(h.length))},arraybuffer:function(h){return x.nodebuffer.uint8array(h).buffer},uint8array:function(h){return g(h,new Uint8Array(h.length))},nodebuffer:d},s.transformTo=function(h,v){if(v=v||"",!h)return v;s.checkSupport(h);var b=s.getTypeOf(v);return x[b][h](v)},s.resolve=function(h){for(var v=h.split("/"),b=[],y=0;y<v.length;y++){var j=v[y];j==="."||j===""&&y!==0&&y!==v.length-1||(j===".."?b.pop():b.push(j))}return b.join("/")},s.getTypeOf=function(h){return typeof h=="string"?"string":Object.prototype.toString.call(h)==="[object Array]"?"array":i.nodebuffer&&l.isBuffer(h)?"nodebuffer":i.uint8array&&h instanceof Uint8Array?"uint8array":i.arraybuffer&&h instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(h){if(!i[h.toLowerCase()])throw new Error(h+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(h){var v,b,y="";for(b=0;b<(h||"").length;b++)y+="\\x"+((v=h.charCodeAt(b))<16?"0":"")+v.toString(16).toUpperCase();return y},s.delay=function(h,v,b){setImmediate(function(){h.apply(b||null,v||[])})},s.inherits=function(h,v){function b(){}b.prototype=v.prototype,h.prototype=new b},s.extend=function(){var h,v,b={};for(h=0;h<arguments.length;h++)for(v in arguments[h])Object.prototype.hasOwnProperty.call(arguments[h],v)&&b[v]===void 0&&(b[v]=arguments[h][v]);return b},s.prepareContent=function(h,v,b,y,j){return c.Promise.resolve(v).then(function(_){return i.blob&&(_ instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(_))!==-1)&&typeof FileReader<"u"?new c.Promise(function(w,k){var N=new FileReader;N.onload=function(P){w(P.target.result)},N.onerror=function(P){k(P.target.error)},N.readAsArrayBuffer(_)}):_}).then(function(_){var w=s.getTypeOf(_);return w?(w==="arraybuffer"?_=s.transformTo("uint8array",_):w==="string"&&(j?_=o.decode(_):b&&y!==!0&&(_=function(k){return u(k,i.uint8array?new Uint8Array(k.length):new Array(k.length))}(_))),_):c.Promise.reject(new Error("Can't read the data of '"+h+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(a,n,s){var i=a("./reader/readerFor"),o=a("./utils"),l=a("./signature"),c=a("./zipEntry"),d=a("./support");function u(m){this.files=[],this.loadOptions=m}u.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(p)+", expected "+o.pretty(m)+")")}},isSignature:function(m,p){var g=this.reader.index;this.reader.setIndex(m);var x=this.reader.readString(4)===p;return this.reader.setIndex(g),x},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),p=d.uint8array?"uint8array":"array",g=o.transformTo(p,m);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,p,g,x=this.zip64EndOfCentralSize-44;0<x;)m=this.reader.readInt(2),p=this.reader.readInt(4),g=this.reader.readData(p),this.zip64ExtensibleData[m]={id:m,length:p,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,p;for(m=0;m<this.files.length;m++)p=this.files[m],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(m=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var p=m;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var x=p-g;if(0<x)this.isSignature(p,l.CENTRAL_FILE_HEADER)||(this.reader.zero=x);else if(x<0)throw new Error("Corrupted zip: missing "+Math.abs(x)+" bytes.")},prepareReader:function(m){this.reader=i(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(a,n,s){var i=a("./reader/readerFor"),o=a("./utils"),l=a("./compressedObject"),c=a("./crc32"),d=a("./utf8"),u=a("./compressions"),m=a("./support");function p(g,x){this.options=g,this.loadOptions=x}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var x,h;if(g.skip(22),this.fileNameLength=g.readInt(2),h=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(h),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((x=function(v){for(var b in u)if(Object.prototype.hasOwnProperty.call(u,b)&&u[b].magic===v)return u[b];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,x,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var x=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(x),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var x,h,v,b=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<b;)x=g.readInt(2),h=g.readInt(2),v=g.readData(h),this.extraFields[x]={id:x,length:h,value:v};g.setIndex(b)},handleUTF8:function(){var g=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var x=this.findExtraFieldUnicodePath();if(x!==null)this.fileNameStr=x;else{var h=o.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(h)}var v=this.findExtraFieldUnicodeComment();if(v!==null)this.fileCommentStr=v;else{var b=o.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(b)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var x=i(g.value);return x.readInt(1)!==1||c(this.fileName)!==x.readInt(4)?null:d.utf8decode(x.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var x=i(g.value);return x.readInt(1)!==1||c(this.fileComment)!==x.readInt(4)?null:d.utf8decode(x.readData(g.length-5))}return null}},n.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(a,n,s){function i(x,h,v){this.name=x,this.dir=v.dir,this.date=v.date,this.comment=v.comment,this.unixPermissions=v.unixPermissions,this.dosPermissions=v.dosPermissions,this._data=h,this._dataBinary=v.binary,this.options={compression:v.compression,compressionOptions:v.compressionOptions}}var o=a("./stream/StreamHelper"),l=a("./stream/DataWorker"),c=a("./utf8"),d=a("./compressedObject"),u=a("./stream/GenericWorker");i.prototype={internalStream:function(x){var h=null,v="string";try{if(!x)throw new Error("No output type specified.");var b=(v=x.toLowerCase())==="string"||v==="text";v!=="binarystring"&&v!=="text"||(v="string"),h=this._decompressWorker();var y=!this._dataBinary;y&&!b&&(h=h.pipe(new c.Utf8EncodeWorker)),!y&&b&&(h=h.pipe(new c.Utf8DecodeWorker))}catch(j){(h=new u("error")).error(j)}return new o(h,v,"")},async:function(x,h){return this.internalStream(x).accumulate(h)},nodeStream:function(x,h){return this.internalStream(x||"nodebuffer").toNodejsStream(h)},_compressWorker:function(x,h){if(this._data instanceof d&&this._data.compression.magic===x.magic)return this._data.getCompressedWorker();var v=this._decompressWorker();return this._dataBinary||(v=v.pipe(new c.Utf8EncodeWorker)),d.createWorkerFrom(v,x,h)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof u?this._data:new l(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<m.length;g++)i.prototype[m[g]]=p;n.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(a,n,s){(function(i){var o,l,c=i.MutationObserver||i.WebKitMutationObserver;if(c){var d=0,u=new c(x),m=i.document.createTextNode("");u.observe(m,{characterData:!0}),o=function(){m.data=d=++d%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var h=i.document.createElement("script");h.onreadystatechange=function(){x(),h.onreadystatechange=null,h.parentNode.removeChild(h),h=null},i.document.documentElement.appendChild(h)}:function(){setTimeout(x,0)};else{var p=new i.MessageChannel;p.port1.onmessage=x,o=function(){p.port2.postMessage(0)}}var g=[];function x(){var h,v;l=!0;for(var b=g.length;b;){for(v=g,g=[],h=-1;++h<b;)v[h]();b=g.length}l=!1}n.exports=function(h){g.push(h)!==1||l||o()}}).call(this,typeof ro<"u"?ro:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(a,n,s){var i=a("immediate");function o(){}var l={},c=["REJECTED"],d=["FULFILLED"],u=["PENDING"];function m(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,b!==o&&h(this,b)}function p(b,y,j){this.promise=b,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof j=="function"&&(this.onRejected=j,this.callRejected=this.otherCallRejected)}function g(b,y,j){i(function(){var _;try{_=y(j)}catch(w){return l.reject(b,w)}_===b?l.reject(b,new TypeError("Cannot resolve promise with itself")):l.resolve(b,_)})}function x(b){var y=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof y=="function")return function(){y.apply(b,arguments)}}function h(b,y){var j=!1;function _(N){j||(j=!0,l.reject(b,N))}function w(N){j||(j=!0,l.resolve(b,N))}var k=v(function(){y(w,_)});k.status==="error"&&_(k.value)}function v(b,y){var j={};try{j.value=b(y),j.status="success"}catch(_){j.status="error",j.value=_}return j}(n.exports=m).prototype.finally=function(b){if(typeof b!="function")return this;var y=this.constructor;return this.then(function(j){return y.resolve(b()).then(function(){return j})},function(j){return y.resolve(b()).then(function(){throw j})})},m.prototype.catch=function(b){return this.then(null,b)},m.prototype.then=function(b,y){if(typeof b!="function"&&this.state===d||typeof y!="function"&&this.state===c)return this;var j=new this.constructor(o);return this.state!==u?g(j,this.state===d?b:y,this.outcome):this.queue.push(new p(j,b,y)),j},p.prototype.callFulfilled=function(b){l.resolve(this.promise,b)},p.prototype.otherCallFulfilled=function(b){g(this.promise,this.onFulfilled,b)},p.prototype.callRejected=function(b){l.reject(this.promise,b)},p.prototype.otherCallRejected=function(b){g(this.promise,this.onRejected,b)},l.resolve=function(b,y){var j=v(x,y);if(j.status==="error")return l.reject(b,j.value);var _=j.value;if(_)h(b,_);else{b.state=d,b.outcome=y;for(var w=-1,k=b.queue.length;++w<k;)b.queue[w].callFulfilled(y)}return b},l.reject=function(b,y){b.state=c,b.outcome=y;for(var j=-1,_=b.queue.length;++j<_;)b.queue[j].callRejected(y);return b},m.resolve=function(b){return b instanceof this?b:l.resolve(new this(o),b)},m.reject=function(b){var y=new this(o);return l.reject(y,b)},m.all=function(b){var y=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=b.length,_=!1;if(!j)return this.resolve([]);for(var w=new Array(j),k=0,N=-1,P=new this(o);++N<j;)A(b[N],N);return P;function A(M,R){y.resolve(M).then(function(O){w[R]=O,++k!==j||_||(_=!0,l.resolve(P,w))},function(O){_||(_=!0,l.reject(P,O))})}},m.race=function(b){var y=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=b.length,_=!1;if(!j)return this.resolve([]);for(var w=-1,k=new this(o);++w<j;)N=b[w],y.resolve(N).then(function(P){_||(_=!0,l.resolve(k,P))},function(P){_||(_=!0,l.reject(k,P))});var N;return k}},{immediate:36}],38:[function(a,n,s){var i={};(0,a("./lib/utils/common").assign)(i,a("./lib/deflate"),a("./lib/inflate"),a("./lib/zlib/constants")),n.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(a,n,s){var i=a("./zlib/deflate"),o=a("./utils/common"),l=a("./utils/strings"),c=a("./zlib/messages"),d=a("./zlib/zstream"),u=Object.prototype.toString,m=0,p=-1,g=0,x=8;function h(b){if(!(this instanceof h))return new h(b);this.options=o.assign({level:p,method:x,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},b||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var j=i.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(j!==m)throw new Error(c[j]);if(y.header&&i.deflateSetHeader(this.strm,y.header),y.dictionary){var _;if(_=typeof y.dictionary=="string"?l.string2buf(y.dictionary):u.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(j=i.deflateSetDictionary(this.strm,_))!==m)throw new Error(c[j]);this._dict_set=!0}}function v(b,y){var j=new h(y);if(j.push(b,!0),j.err)throw j.msg||c[j.err];return j.result}h.prototype.push=function(b,y){var j,_,w=this.strm,k=this.options.chunkSize;if(this.ended)return!1;_=y===~~y?y:y===!0?4:0,typeof b=="string"?w.input=l.string2buf(b):u.call(b)==="[object ArrayBuffer]"?w.input=new Uint8Array(b):w.input=b,w.next_in=0,w.avail_in=w.input.length;do{if(w.avail_out===0&&(w.output=new o.Buf8(k),w.next_out=0,w.avail_out=k),(j=i.deflate(w,_))!==1&&j!==m)return this.onEnd(j),!(this.ended=!0);w.avail_out!==0&&(w.avail_in!==0||_!==4&&_!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(o.shrinkBuf(w.output,w.next_out))):this.onData(o.shrinkBuf(w.output,w.next_out)))}while((0<w.avail_in||w.avail_out===0)&&j!==1);return _===4?(j=i.deflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===m):_!==2||(this.onEnd(m),!(w.avail_out=0))},h.prototype.onData=function(b){this.chunks.push(b)},h.prototype.onEnd=function(b){b===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},s.Deflate=h,s.deflate=v,s.deflateRaw=function(b,y){return(y=y||{}).raw=!0,v(b,y)},s.gzip=function(b,y){return(y=y||{}).gzip=!0,v(b,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(a,n,s){var i=a("./zlib/inflate"),o=a("./utils/common"),l=a("./utils/strings"),c=a("./zlib/constants"),d=a("./zlib/messages"),u=a("./zlib/zstream"),m=a("./zlib/gzheader"),p=Object.prototype.toString;function g(h){if(!(this instanceof g))return new g(h);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},h||{});var v=this.options;v.raw&&0<=v.windowBits&&v.windowBits<16&&(v.windowBits=-v.windowBits,v.windowBits===0&&(v.windowBits=-15)),!(0<=v.windowBits&&v.windowBits<16)||h&&h.windowBits||(v.windowBits+=32),15<v.windowBits&&v.windowBits<48&&!(15&v.windowBits)&&(v.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var b=i.inflateInit2(this.strm,v.windowBits);if(b!==c.Z_OK)throw new Error(d[b]);this.header=new m,i.inflateGetHeader(this.strm,this.header)}function x(h,v){var b=new g(v);if(b.push(h,!0),b.err)throw b.msg||d[b.err];return b.result}g.prototype.push=function(h,v){var b,y,j,_,w,k,N=this.strm,P=this.options.chunkSize,A=this.options.dictionary,M=!1;if(this.ended)return!1;y=v===~~v?v:v===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof h=="string"?N.input=l.binstring2buf(h):p.call(h)==="[object ArrayBuffer]"?N.input=new Uint8Array(h):N.input=h,N.next_in=0,N.avail_in=N.input.length;do{if(N.avail_out===0&&(N.output=new o.Buf8(P),N.next_out=0,N.avail_out=P),(b=i.inflate(N,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&A&&(k=typeof A=="string"?l.string2buf(A):p.call(A)==="[object ArrayBuffer]"?new Uint8Array(A):A,b=i.inflateSetDictionary(this.strm,k)),b===c.Z_BUF_ERROR&&M===!0&&(b=c.Z_OK,M=!1),b!==c.Z_STREAM_END&&b!==c.Z_OK)return this.onEnd(b),!(this.ended=!0);N.next_out&&(N.avail_out!==0&&b!==c.Z_STREAM_END&&(N.avail_in!==0||y!==c.Z_FINISH&&y!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(j=l.utf8border(N.output,N.next_out),_=N.next_out-j,w=l.buf2string(N.output,j),N.next_out=_,N.avail_out=P-_,_&&o.arraySet(N.output,N.output,j,_,0),this.onData(w)):this.onData(o.shrinkBuf(N.output,N.next_out)))),N.avail_in===0&&N.avail_out===0&&(M=!0)}while((0<N.avail_in||N.avail_out===0)&&b!==c.Z_STREAM_END);return b===c.Z_STREAM_END&&(y=c.Z_FINISH),y===c.Z_FINISH?(b=i.inflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===c.Z_OK):y!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(N.avail_out=0))},g.prototype.onData=function(h){this.chunks.push(h)},g.prototype.onEnd=function(h){h===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},s.Inflate=g,s.inflate=x,s.inflateRaw=function(h,v){return(v=v||{}).raw=!0,x(h,v)},s.ungzip=x},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(a,n,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(c){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var u=d.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var m in u)u.hasOwnProperty(m)&&(c[m]=u[m])}}return c},s.shrinkBuf=function(c,d){return c.length===d?c:c.subarray?c.subarray(0,d):(c.length=d,c)};var o={arraySet:function(c,d,u,m,p){if(d.subarray&&c.subarray)c.set(d.subarray(u,u+m),p);else for(var g=0;g<m;g++)c[p+g]=d[u+g]},flattenChunks:function(c){var d,u,m,p,g,x;for(d=m=0,u=c.length;d<u;d++)m+=c[d].length;for(x=new Uint8Array(m),d=p=0,u=c.length;d<u;d++)g=c[d],x.set(g,p),p+=g.length;return x}},l={arraySet:function(c,d,u,m,p){for(var g=0;g<m;g++)c[p+g]=d[u+g]},flattenChunks:function(c){return[].concat.apply([],c)}};s.setTyped=function(c){c?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,l))},s.setTyped(i)},{}],42:[function(a,n,s){var i=a("./common"),o=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var c=new i.Buf8(256),d=0;d<256;d++)c[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function u(m,p){if(p<65537&&(m.subarray&&l||!m.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(m,p));for(var g="",x=0;x<p;x++)g+=String.fromCharCode(m[x]);return g}c[254]=c[254]=1,s.string2buf=function(m){var p,g,x,h,v,b=m.length,y=0;for(h=0;h<b;h++)(64512&(g=m.charCodeAt(h)))==55296&&h+1<b&&(64512&(x=m.charCodeAt(h+1)))==56320&&(g=65536+(g-55296<<10)+(x-56320),h++),y+=g<128?1:g<2048?2:g<65536?3:4;for(p=new i.Buf8(y),h=v=0;v<y;h++)(64512&(g=m.charCodeAt(h)))==55296&&h+1<b&&(64512&(x=m.charCodeAt(h+1)))==56320&&(g=65536+(g-55296<<10)+(x-56320),h++),g<128?p[v++]=g:(g<2048?p[v++]=192|g>>>6:(g<65536?p[v++]=224|g>>>12:(p[v++]=240|g>>>18,p[v++]=128|g>>>12&63),p[v++]=128|g>>>6&63),p[v++]=128|63&g);return p},s.buf2binstring=function(m){return u(m,m.length)},s.binstring2buf=function(m){for(var p=new i.Buf8(m.length),g=0,x=p.length;g<x;g++)p[g]=m.charCodeAt(g);return p},s.buf2string=function(m,p){var g,x,h,v,b=p||m.length,y=new Array(2*b);for(g=x=0;g<b;)if((h=m[g++])<128)y[x++]=h;else if(4<(v=c[h]))y[x++]=65533,g+=v-1;else{for(h&=v===2?31:v===3?15:7;1<v&&g<b;)h=h<<6|63&m[g++],v--;1<v?y[x++]=65533:h<65536?y[x++]=h:(h-=65536,y[x++]=55296|h>>10&1023,y[x++]=56320|1023&h)}return u(y,x)},s.utf8border=function(m,p){var g;for((p=p||m.length)>m.length&&(p=m.length),g=p-1;0<=g&&(192&m[g])==128;)g--;return g<0||g===0?p:g+c[m[g]]>p?g:p}},{"./common":41}],43:[function(a,n,s){n.exports=function(i,o,l,c){for(var d=65535&i|0,u=i>>>16&65535|0,m=0;l!==0;){for(l-=m=2e3<l?2e3:l;u=u+(d=d+o[c++]|0)|0,--m;);d%=65521,u%=65521}return d|u<<16|0}},{}],44:[function(a,n,s){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(a,n,s){var i=function(){for(var o,l=[],c=0;c<256;c++){o=c;for(var d=0;d<8;d++)o=1&o?3988292384^o>>>1:o>>>1;l[c]=o}return l}();n.exports=function(o,l,c,d){var u=i,m=d+c;o^=-1;for(var p=d;p<m;p++)o=o>>>8^u[255&(o^l[p])];return-1^o}},{}],46:[function(a,n,s){var i,o=a("../utils/common"),l=a("./trees"),c=a("./adler32"),d=a("./crc32"),u=a("./messages"),m=0,p=4,g=0,x=-2,h=-1,v=4,b=2,y=8,j=9,_=286,w=30,k=19,N=2*_+1,P=15,A=3,M=258,R=M+A+1,O=42,q=113,S=1,I=2,E=3,W=4;function B(T,oe){return T.msg=u[oe],oe}function C(T){return(T<<1)-(4<T?9:0)}function D(T){for(var oe=T.length;0<=--oe;)T[oe]=0}function z(T){var oe=T.state,G=oe.pending;G>T.avail_out&&(G=T.avail_out),G!==0&&(o.arraySet(T.output,oe.pending_buf,oe.pending_out,G,T.next_out),T.next_out+=G,oe.pending_out+=G,T.total_out+=G,T.avail_out-=G,oe.pending-=G,oe.pending===0&&(oe.pending_out=0))}function L(T,oe){l._tr_flush_block(T,0<=T.block_start?T.block_start:-1,T.strstart-T.block_start,oe),T.block_start=T.strstart,z(T.strm)}function X(T,oe){T.pending_buf[T.pending++]=oe}function H(T,oe){T.pending_buf[T.pending++]=oe>>>8&255,T.pending_buf[T.pending++]=255&oe}function F(T,oe){var G,V,Y=T.max_chain_length,ce=T.strstart,je=T.prev_length,re=T.nice_match,U=T.strstart>T.w_size-R?T.strstart-(T.w_size-R):0,xe=T.window,J=T.w_mask,Q=T.prev,ne=T.strstart+M,ee=xe[ce+je-1],ye=xe[ce+je];T.prev_length>=T.good_match&&(Y>>=2),re>T.lookahead&&(re=T.lookahead);do if(xe[(G=oe)+je]===ye&&xe[G+je-1]===ee&&xe[G]===xe[ce]&&xe[++G]===xe[ce+1]){ce+=2,G++;do;while(xe[++ce]===xe[++G]&&xe[++ce]===xe[++G]&&xe[++ce]===xe[++G]&&xe[++ce]===xe[++G]&&xe[++ce]===xe[++G]&&xe[++ce]===xe[++G]&&xe[++ce]===xe[++G]&&xe[++ce]===xe[++G]&&ce<ne);if(V=M-(ne-ce),ce=ne-M,je<V){if(T.match_start=oe,re<=(je=V))break;ee=xe[ce+je-1],ye=xe[ce+je]}}while((oe=Q[oe&J])>U&&--Y!=0);return je<=T.lookahead?je:T.lookahead}function ke(T){var oe,G,V,Y,ce,je,re,U,xe,J,Q=T.w_size;do{if(Y=T.window_size-T.lookahead-T.strstart,T.strstart>=Q+(Q-R)){for(o.arraySet(T.window,T.window,Q,Q,0),T.match_start-=Q,T.strstart-=Q,T.block_start-=Q,oe=G=T.hash_size;V=T.head[--oe],T.head[oe]=Q<=V?V-Q:0,--G;);for(oe=G=Q;V=T.prev[--oe],T.prev[oe]=Q<=V?V-Q:0,--G;);Y+=Q}if(T.strm.avail_in===0)break;if(je=T.strm,re=T.window,U=T.strstart+T.lookahead,xe=Y,J=void 0,J=je.avail_in,xe<J&&(J=xe),G=J===0?0:(je.avail_in-=J,o.arraySet(re,je.input,je.next_in,J,U),je.state.wrap===1?je.adler=c(je.adler,re,J,U):je.state.wrap===2&&(je.adler=d(je.adler,re,J,U)),je.next_in+=J,je.total_in+=J,J),T.lookahead+=G,T.lookahead+T.insert>=A)for(ce=T.strstart-T.insert,T.ins_h=T.window[ce],T.ins_h=(T.ins_h<<T.hash_shift^T.window[ce+1])&T.hash_mask;T.insert&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[ce+A-1])&T.hash_mask,T.prev[ce&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=ce,ce++,T.insert--,!(T.lookahead+T.insert<A)););}while(T.lookahead<R&&T.strm.avail_in!==0)}function ae(T,oe){for(var G,V;;){if(T.lookahead<R){if(ke(T),T.lookahead<R&&oe===m)return S;if(T.lookahead===0)break}if(G=0,T.lookahead>=A&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+A-1])&T.hash_mask,G=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),G!==0&&T.strstart-G<=T.w_size-R&&(T.match_length=F(T,G)),T.match_length>=A)if(V=l._tr_tally(T,T.strstart-T.match_start,T.match_length-A),T.lookahead-=T.match_length,T.match_length<=T.max_lazy_match&&T.lookahead>=A){for(T.match_length--;T.strstart++,T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+A-1])&T.hash_mask,G=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart,--T.match_length!=0;);T.strstart++}else T.strstart+=T.match_length,T.match_length=0,T.ins_h=T.window[T.strstart],T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+1])&T.hash_mask;else V=l._tr_tally(T,0,T.window[T.strstart]),T.lookahead--,T.strstart++;if(V&&(L(T,!1),T.strm.avail_out===0))return S}return T.insert=T.strstart<A-1?T.strstart:A-1,oe===p?(L(T,!0),T.strm.avail_out===0?E:W):T.last_lit&&(L(T,!1),T.strm.avail_out===0)?S:I}function ue(T,oe){for(var G,V,Y;;){if(T.lookahead<R){if(ke(T),T.lookahead<R&&oe===m)return S;if(T.lookahead===0)break}if(G=0,T.lookahead>=A&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+A-1])&T.hash_mask,G=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),T.prev_length=T.match_length,T.prev_match=T.match_start,T.match_length=A-1,G!==0&&T.prev_length<T.max_lazy_match&&T.strstart-G<=T.w_size-R&&(T.match_length=F(T,G),T.match_length<=5&&(T.strategy===1||T.match_length===A&&4096<T.strstart-T.match_start)&&(T.match_length=A-1)),T.prev_length>=A&&T.match_length<=T.prev_length){for(Y=T.strstart+T.lookahead-A,V=l._tr_tally(T,T.strstart-1-T.prev_match,T.prev_length-A),T.lookahead-=T.prev_length-1,T.prev_length-=2;++T.strstart<=Y&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+A-1])&T.hash_mask,G=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),--T.prev_length!=0;);if(T.match_available=0,T.match_length=A-1,T.strstart++,V&&(L(T,!1),T.strm.avail_out===0))return S}else if(T.match_available){if((V=l._tr_tally(T,0,T.window[T.strstart-1]))&&L(T,!1),T.strstart++,T.lookahead--,T.strm.avail_out===0)return S}else T.match_available=1,T.strstart++,T.lookahead--}return T.match_available&&(V=l._tr_tally(T,0,T.window[T.strstart-1]),T.match_available=0),T.insert=T.strstart<A-1?T.strstart:A-1,oe===p?(L(T,!0),T.strm.avail_out===0?E:W):T.last_lit&&(L(T,!1),T.strm.avail_out===0)?S:I}function Z(T,oe,G,V,Y){this.good_length=T,this.max_lazy=oe,this.nice_length=G,this.max_chain=V,this.func=Y}function me(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*N),this.dyn_dtree=new o.Buf16(2*(2*w+1)),this.bl_tree=new o.Buf16(2*(2*k+1)),D(this.dyn_ltree),D(this.dyn_dtree),D(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(P+1),this.heap=new o.Buf16(2*_+1),D(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*_+1),D(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ge(T){var oe;return T&&T.state?(T.total_in=T.total_out=0,T.data_type=b,(oe=T.state).pending=0,oe.pending_out=0,oe.wrap<0&&(oe.wrap=-oe.wrap),oe.status=oe.wrap?O:q,T.adler=oe.wrap===2?0:1,oe.last_flush=m,l._tr_init(oe),g):B(T,x)}function se(T){var oe=ge(T);return oe===g&&function(G){G.window_size=2*G.w_size,D(G.head),G.max_lazy_match=i[G.level].max_lazy,G.good_match=i[G.level].good_length,G.nice_match=i[G.level].nice_length,G.max_chain_length=i[G.level].max_chain,G.strstart=0,G.block_start=0,G.lookahead=0,G.insert=0,G.match_length=G.prev_length=A-1,G.match_available=0,G.ins_h=0}(T.state),oe}function he(T,oe,G,V,Y,ce){if(!T)return x;var je=1;if(oe===h&&(oe=6),V<0?(je=0,V=-V):15<V&&(je=2,V-=16),Y<1||j<Y||G!==y||V<8||15<V||oe<0||9<oe||ce<0||v<ce)return B(T,x);V===8&&(V=9);var re=new me;return(T.state=re).strm=T,re.wrap=je,re.gzhead=null,re.w_bits=V,re.w_size=1<<re.w_bits,re.w_mask=re.w_size-1,re.hash_bits=Y+7,re.hash_size=1<<re.hash_bits,re.hash_mask=re.hash_size-1,re.hash_shift=~~((re.hash_bits+A-1)/A),re.window=new o.Buf8(2*re.w_size),re.head=new o.Buf16(re.hash_size),re.prev=new o.Buf16(re.w_size),re.lit_bufsize=1<<Y+6,re.pending_buf_size=4*re.lit_bufsize,re.pending_buf=new o.Buf8(re.pending_buf_size),re.d_buf=1*re.lit_bufsize,re.l_buf=3*re.lit_bufsize,re.level=oe,re.strategy=ce,re.method=G,se(T)}i=[new Z(0,0,0,0,function(T,oe){var G=65535;for(G>T.pending_buf_size-5&&(G=T.pending_buf_size-5);;){if(T.lookahead<=1){if(ke(T),T.lookahead===0&&oe===m)return S;if(T.lookahead===0)break}T.strstart+=T.lookahead,T.lookahead=0;var V=T.block_start+G;if((T.strstart===0||T.strstart>=V)&&(T.lookahead=T.strstart-V,T.strstart=V,L(T,!1),T.strm.avail_out===0)||T.strstart-T.block_start>=T.w_size-R&&(L(T,!1),T.strm.avail_out===0))return S}return T.insert=0,oe===p?(L(T,!0),T.strm.avail_out===0?E:W):(T.strstart>T.block_start&&(L(T,!1),T.strm.avail_out),S)}),new Z(4,4,8,4,ae),new Z(4,5,16,8,ae),new Z(4,6,32,32,ae),new Z(4,4,16,16,ue),new Z(8,16,32,32,ue),new Z(8,16,128,128,ue),new Z(8,32,128,256,ue),new Z(32,128,258,1024,ue),new Z(32,258,258,4096,ue)],s.deflateInit=function(T,oe){return he(T,oe,y,15,8,0)},s.deflateInit2=he,s.deflateReset=se,s.deflateResetKeep=ge,s.deflateSetHeader=function(T,oe){return T&&T.state?T.state.wrap!==2?x:(T.state.gzhead=oe,g):x},s.deflate=function(T,oe){var G,V,Y,ce;if(!T||!T.state||5<oe||oe<0)return T?B(T,x):x;if(V=T.state,!T.output||!T.input&&T.avail_in!==0||V.status===666&&oe!==p)return B(T,T.avail_out===0?-5:x);if(V.strm=T,G=V.last_flush,V.last_flush=oe,V.status===O)if(V.wrap===2)T.adler=0,X(V,31),X(V,139),X(V,8),V.gzhead?(X(V,(V.gzhead.text?1:0)+(V.gzhead.hcrc?2:0)+(V.gzhead.extra?4:0)+(V.gzhead.name?8:0)+(V.gzhead.comment?16:0)),X(V,255&V.gzhead.time),X(V,V.gzhead.time>>8&255),X(V,V.gzhead.time>>16&255),X(V,V.gzhead.time>>24&255),X(V,V.level===9?2:2<=V.strategy||V.level<2?4:0),X(V,255&V.gzhead.os),V.gzhead.extra&&V.gzhead.extra.length&&(X(V,255&V.gzhead.extra.length),X(V,V.gzhead.extra.length>>8&255)),V.gzhead.hcrc&&(T.adler=d(T.adler,V.pending_buf,V.pending,0)),V.gzindex=0,V.status=69):(X(V,0),X(V,0),X(V,0),X(V,0),X(V,0),X(V,V.level===9?2:2<=V.strategy||V.level<2?4:0),X(V,3),V.status=q);else{var je=y+(V.w_bits-8<<4)<<8;je|=(2<=V.strategy||V.level<2?0:V.level<6?1:V.level===6?2:3)<<6,V.strstart!==0&&(je|=32),je+=31-je%31,V.status=q,H(V,je),V.strstart!==0&&(H(V,T.adler>>>16),H(V,65535&T.adler)),T.adler=1}if(V.status===69)if(V.gzhead.extra){for(Y=V.pending;V.gzindex<(65535&V.gzhead.extra.length)&&(V.pending!==V.pending_buf_size||(V.gzhead.hcrc&&V.pending>Y&&(T.adler=d(T.adler,V.pending_buf,V.pending-Y,Y)),z(T),Y=V.pending,V.pending!==V.pending_buf_size));)X(V,255&V.gzhead.extra[V.gzindex]),V.gzindex++;V.gzhead.hcrc&&V.pending>Y&&(T.adler=d(T.adler,V.pending_buf,V.pending-Y,Y)),V.gzindex===V.gzhead.extra.length&&(V.gzindex=0,V.status=73)}else V.status=73;if(V.status===73)if(V.gzhead.name){Y=V.pending;do{if(V.pending===V.pending_buf_size&&(V.gzhead.hcrc&&V.pending>Y&&(T.adler=d(T.adler,V.pending_buf,V.pending-Y,Y)),z(T),Y=V.pending,V.pending===V.pending_buf_size)){ce=1;break}ce=V.gzindex<V.gzhead.name.length?255&V.gzhead.name.charCodeAt(V.gzindex++):0,X(V,ce)}while(ce!==0);V.gzhead.hcrc&&V.pending>Y&&(T.adler=d(T.adler,V.pending_buf,V.pending-Y,Y)),ce===0&&(V.gzindex=0,V.status=91)}else V.status=91;if(V.status===91)if(V.gzhead.comment){Y=V.pending;do{if(V.pending===V.pending_buf_size&&(V.gzhead.hcrc&&V.pending>Y&&(T.adler=d(T.adler,V.pending_buf,V.pending-Y,Y)),z(T),Y=V.pending,V.pending===V.pending_buf_size)){ce=1;break}ce=V.gzindex<V.gzhead.comment.length?255&V.gzhead.comment.charCodeAt(V.gzindex++):0,X(V,ce)}while(ce!==0);V.gzhead.hcrc&&V.pending>Y&&(T.adler=d(T.adler,V.pending_buf,V.pending-Y,Y)),ce===0&&(V.status=103)}else V.status=103;if(V.status===103&&(V.gzhead.hcrc?(V.pending+2>V.pending_buf_size&&z(T),V.pending+2<=V.pending_buf_size&&(X(V,255&T.adler),X(V,T.adler>>8&255),T.adler=0,V.status=q)):V.status=q),V.pending!==0){if(z(T),T.avail_out===0)return V.last_flush=-1,g}else if(T.avail_in===0&&C(oe)<=C(G)&&oe!==p)return B(T,-5);if(V.status===666&&T.avail_in!==0)return B(T,-5);if(T.avail_in!==0||V.lookahead!==0||oe!==m&&V.status!==666){var re=V.strategy===2?function(U,xe){for(var J;;){if(U.lookahead===0&&(ke(U),U.lookahead===0)){if(xe===m)return S;break}if(U.match_length=0,J=l._tr_tally(U,0,U.window[U.strstart]),U.lookahead--,U.strstart++,J&&(L(U,!1),U.strm.avail_out===0))return S}return U.insert=0,xe===p?(L(U,!0),U.strm.avail_out===0?E:W):U.last_lit&&(L(U,!1),U.strm.avail_out===0)?S:I}(V,oe):V.strategy===3?function(U,xe){for(var J,Q,ne,ee,ye=U.window;;){if(U.lookahead<=M){if(ke(U),U.lookahead<=M&&xe===m)return S;if(U.lookahead===0)break}if(U.match_length=0,U.lookahead>=A&&0<U.strstart&&(Q=ye[ne=U.strstart-1])===ye[++ne]&&Q===ye[++ne]&&Q===ye[++ne]){ee=U.strstart+M;do;while(Q===ye[++ne]&&Q===ye[++ne]&&Q===ye[++ne]&&Q===ye[++ne]&&Q===ye[++ne]&&Q===ye[++ne]&&Q===ye[++ne]&&Q===ye[++ne]&&ne<ee);U.match_length=M-(ee-ne),U.match_length>U.lookahead&&(U.match_length=U.lookahead)}if(U.match_length>=A?(J=l._tr_tally(U,1,U.match_length-A),U.lookahead-=U.match_length,U.strstart+=U.match_length,U.match_length=0):(J=l._tr_tally(U,0,U.window[U.strstart]),U.lookahead--,U.strstart++),J&&(L(U,!1),U.strm.avail_out===0))return S}return U.insert=0,xe===p?(L(U,!0),U.strm.avail_out===0?E:W):U.last_lit&&(L(U,!1),U.strm.avail_out===0)?S:I}(V,oe):i[V.level].func(V,oe);if(re!==E&&re!==W||(V.status=666),re===S||re===E)return T.avail_out===0&&(V.last_flush=-1),g;if(re===I&&(oe===1?l._tr_align(V):oe!==5&&(l._tr_stored_block(V,0,0,!1),oe===3&&(D(V.head),V.lookahead===0&&(V.strstart=0,V.block_start=0,V.insert=0))),z(T),T.avail_out===0))return V.last_flush=-1,g}return oe!==p?g:V.wrap<=0?1:(V.wrap===2?(X(V,255&T.adler),X(V,T.adler>>8&255),X(V,T.adler>>16&255),X(V,T.adler>>24&255),X(V,255&T.total_in),X(V,T.total_in>>8&255),X(V,T.total_in>>16&255),X(V,T.total_in>>24&255)):(H(V,T.adler>>>16),H(V,65535&T.adler)),z(T),0<V.wrap&&(V.wrap=-V.wrap),V.pending!==0?g:1)},s.deflateEnd=function(T){var oe;return T&&T.state?(oe=T.state.status)!==O&&oe!==69&&oe!==73&&oe!==91&&oe!==103&&oe!==q&&oe!==666?B(T,x):(T.state=null,oe===q?B(T,-3):g):x},s.deflateSetDictionary=function(T,oe){var G,V,Y,ce,je,re,U,xe,J=oe.length;if(!T||!T.state||(ce=(G=T.state).wrap)===2||ce===1&&G.status!==O||G.lookahead)return x;for(ce===1&&(T.adler=c(T.adler,oe,J,0)),G.wrap=0,J>=G.w_size&&(ce===0&&(D(G.head),G.strstart=0,G.block_start=0,G.insert=0),xe=new o.Buf8(G.w_size),o.arraySet(xe,oe,J-G.w_size,G.w_size,0),oe=xe,J=G.w_size),je=T.avail_in,re=T.next_in,U=T.input,T.avail_in=J,T.next_in=0,T.input=oe,ke(G);G.lookahead>=A;){for(V=G.strstart,Y=G.lookahead-(A-1);G.ins_h=(G.ins_h<<G.hash_shift^G.window[V+A-1])&G.hash_mask,G.prev[V&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=V,V++,--Y;);G.strstart=V,G.lookahead=A-1,ke(G)}return G.strstart+=G.lookahead,G.block_start=G.strstart,G.insert=G.lookahead,G.lookahead=0,G.match_length=G.prev_length=A-1,G.match_available=0,T.next_in=re,T.input=U,T.avail_in=je,G.wrap=ce,g},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(a,n,s){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(a,n,s){n.exports=function(i,o){var l,c,d,u,m,p,g,x,h,v,b,y,j,_,w,k,N,P,A,M,R,O,q,S,I;l=i.state,c=i.next_in,S=i.input,d=c+(i.avail_in-5),u=i.next_out,I=i.output,m=u-(o-i.avail_out),p=u+(i.avail_out-257),g=l.dmax,x=l.wsize,h=l.whave,v=l.wnext,b=l.window,y=l.hold,j=l.bits,_=l.lencode,w=l.distcode,k=(1<<l.lenbits)-1,N=(1<<l.distbits)-1;e:do{j<15&&(y+=S[c++]<<j,j+=8,y+=S[c++]<<j,j+=8),P=_[y&k];t:for(;;){if(y>>>=A=P>>>24,j-=A,(A=P>>>16&255)===0)I[u++]=65535&P;else{if(!(16&A)){if(!(64&A)){P=_[(65535&P)+(y&(1<<A)-1)];continue t}if(32&A){l.mode=12;break e}i.msg="invalid literal/length code",l.mode=30;break e}M=65535&P,(A&=15)&&(j<A&&(y+=S[c++]<<j,j+=8),M+=y&(1<<A)-1,y>>>=A,j-=A),j<15&&(y+=S[c++]<<j,j+=8,y+=S[c++]<<j,j+=8),P=w[y&N];r:for(;;){if(y>>>=A=P>>>24,j-=A,!(16&(A=P>>>16&255))){if(!(64&A)){P=w[(65535&P)+(y&(1<<A)-1)];continue r}i.msg="invalid distance code",l.mode=30;break e}if(R=65535&P,j<(A&=15)&&(y+=S[c++]<<j,(j+=8)<A&&(y+=S[c++]<<j,j+=8)),g<(R+=y&(1<<A)-1)){i.msg="invalid distance too far back",l.mode=30;break e}if(y>>>=A,j-=A,(A=u-m)<R){if(h<(A=R-A)&&l.sane){i.msg="invalid distance too far back",l.mode=30;break e}if(q=b,(O=0)===v){if(O+=x-A,A<M){for(M-=A;I[u++]=b[O++],--A;);O=u-R,q=I}}else if(v<A){if(O+=x+v-A,(A-=v)<M){for(M-=A;I[u++]=b[O++],--A;);if(O=0,v<M){for(M-=A=v;I[u++]=b[O++],--A;);O=u-R,q=I}}}else if(O+=v-A,A<M){for(M-=A;I[u++]=b[O++],--A;);O=u-R,q=I}for(;2<M;)I[u++]=q[O++],I[u++]=q[O++],I[u++]=q[O++],M-=3;M&&(I[u++]=q[O++],1<M&&(I[u++]=q[O++]))}else{for(O=u-R;I[u++]=I[O++],I[u++]=I[O++],I[u++]=I[O++],2<(M-=3););M&&(I[u++]=I[O++],1<M&&(I[u++]=I[O++]))}break}}break}}while(c<d&&u<p);c-=M=j>>3,y&=(1<<(j-=M<<3))-1,i.next_in=c,i.next_out=u,i.avail_in=c<d?d-c+5:5-(c-d),i.avail_out=u<p?p-u+257:257-(u-p),l.hold=y,l.bits=j}},{}],49:[function(a,n,s){var i=a("../utils/common"),o=a("./adler32"),l=a("./crc32"),c=a("./inffast"),d=a("./inftrees"),u=1,m=2,p=0,g=-2,x=1,h=852,v=592;function b(O){return(O>>>24&255)+(O>>>8&65280)+((65280&O)<<8)+((255&O)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function j(O){var q;return O&&O.state?(q=O.state,O.total_in=O.total_out=q.total=0,O.msg="",q.wrap&&(O.adler=1&q.wrap),q.mode=x,q.last=0,q.havedict=0,q.dmax=32768,q.head=null,q.hold=0,q.bits=0,q.lencode=q.lendyn=new i.Buf32(h),q.distcode=q.distdyn=new i.Buf32(v),q.sane=1,q.back=-1,p):g}function _(O){var q;return O&&O.state?((q=O.state).wsize=0,q.whave=0,q.wnext=0,j(O)):g}function w(O,q){var S,I;return O&&O.state?(I=O.state,q<0?(S=0,q=-q):(S=1+(q>>4),q<48&&(q&=15)),q&&(q<8||15<q)?g:(I.window!==null&&I.wbits!==q&&(I.window=null),I.wrap=S,I.wbits=q,_(O))):g}function k(O,q){var S,I;return O?(I=new y,(O.state=I).window=null,(S=w(O,q))!==p&&(O.state=null),S):g}var N,P,A=!0;function M(O){if(A){var q;for(N=new i.Buf32(512),P=new i.Buf32(32),q=0;q<144;)O.lens[q++]=8;for(;q<256;)O.lens[q++]=9;for(;q<280;)O.lens[q++]=7;for(;q<288;)O.lens[q++]=8;for(d(u,O.lens,0,288,N,0,O.work,{bits:9}),q=0;q<32;)O.lens[q++]=5;d(m,O.lens,0,32,P,0,O.work,{bits:5}),A=!1}O.lencode=N,O.lenbits=9,O.distcode=P,O.distbits=5}function R(O,q,S,I){var E,W=O.state;return W.window===null&&(W.wsize=1<<W.wbits,W.wnext=0,W.whave=0,W.window=new i.Buf8(W.wsize)),I>=W.wsize?(i.arraySet(W.window,q,S-W.wsize,W.wsize,0),W.wnext=0,W.whave=W.wsize):(I<(E=W.wsize-W.wnext)&&(E=I),i.arraySet(W.window,q,S-I,E,W.wnext),(I-=E)?(i.arraySet(W.window,q,S-I,I,0),W.wnext=I,W.whave=W.wsize):(W.wnext+=E,W.wnext===W.wsize&&(W.wnext=0),W.whave<W.wsize&&(W.whave+=E))),0}s.inflateReset=_,s.inflateReset2=w,s.inflateResetKeep=j,s.inflateInit=function(O){return k(O,15)},s.inflateInit2=k,s.inflate=function(O,q){var S,I,E,W,B,C,D,z,L,X,H,F,ke,ae,ue,Z,me,ge,se,he,T,oe,G,V,Y=0,ce=new i.Buf8(4),je=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!O||!O.state||!O.output||!O.input&&O.avail_in!==0)return g;(S=O.state).mode===12&&(S.mode=13),B=O.next_out,E=O.output,D=O.avail_out,W=O.next_in,I=O.input,C=O.avail_in,z=S.hold,L=S.bits,X=C,H=D,oe=p;e:for(;;)switch(S.mode){case x:if(S.wrap===0){S.mode=13;break}for(;L<16;){if(C===0)break e;C--,z+=I[W++]<<L,L+=8}if(2&S.wrap&&z===35615){ce[S.check=0]=255&z,ce[1]=z>>>8&255,S.check=l(S.check,ce,2,0),L=z=0,S.mode=2;break}if(S.flags=0,S.head&&(S.head.done=!1),!(1&S.wrap)||(((255&z)<<8)+(z>>8))%31){O.msg="incorrect header check",S.mode=30;break}if((15&z)!=8){O.msg="unknown compression method",S.mode=30;break}if(L-=4,T=8+(15&(z>>>=4)),S.wbits===0)S.wbits=T;else if(T>S.wbits){O.msg="invalid window size",S.mode=30;break}S.dmax=1<<T,O.adler=S.check=1,S.mode=512&z?10:12,L=z=0;break;case 2:for(;L<16;){if(C===0)break e;C--,z+=I[W++]<<L,L+=8}if(S.flags=z,(255&S.flags)!=8){O.msg="unknown compression method",S.mode=30;break}if(57344&S.flags){O.msg="unknown header flags set",S.mode=30;break}S.head&&(S.head.text=z>>8&1),512&S.flags&&(ce[0]=255&z,ce[1]=z>>>8&255,S.check=l(S.check,ce,2,0)),L=z=0,S.mode=3;case 3:for(;L<32;){if(C===0)break e;C--,z+=I[W++]<<L,L+=8}S.head&&(S.head.time=z),512&S.flags&&(ce[0]=255&z,ce[1]=z>>>8&255,ce[2]=z>>>16&255,ce[3]=z>>>24&255,S.check=l(S.check,ce,4,0)),L=z=0,S.mode=4;case 4:for(;L<16;){if(C===0)break e;C--,z+=I[W++]<<L,L+=8}S.head&&(S.head.xflags=255&z,S.head.os=z>>8),512&S.flags&&(ce[0]=255&z,ce[1]=z>>>8&255,S.check=l(S.check,ce,2,0)),L=z=0,S.mode=5;case 5:if(1024&S.flags){for(;L<16;){if(C===0)break e;C--,z+=I[W++]<<L,L+=8}S.length=z,S.head&&(S.head.extra_len=z),512&S.flags&&(ce[0]=255&z,ce[1]=z>>>8&255,S.check=l(S.check,ce,2,0)),L=z=0}else S.head&&(S.head.extra=null);S.mode=6;case 6:if(1024&S.flags&&(C<(F=S.length)&&(F=C),F&&(S.head&&(T=S.head.extra_len-S.length,S.head.extra||(S.head.extra=new Array(S.head.extra_len)),i.arraySet(S.head.extra,I,W,F,T)),512&S.flags&&(S.check=l(S.check,I,F,W)),C-=F,W+=F,S.length-=F),S.length))break e;S.length=0,S.mode=7;case 7:if(2048&S.flags){if(C===0)break e;for(F=0;T=I[W+F++],S.head&&T&&S.length<65536&&(S.head.name+=String.fromCharCode(T)),T&&F<C;);if(512&S.flags&&(S.check=l(S.check,I,F,W)),C-=F,W+=F,T)break e}else S.head&&(S.head.name=null);S.length=0,S.mode=8;case 8:if(4096&S.flags){if(C===0)break e;for(F=0;T=I[W+F++],S.head&&T&&S.length<65536&&(S.head.comment+=String.fromCharCode(T)),T&&F<C;);if(512&S.flags&&(S.check=l(S.check,I,F,W)),C-=F,W+=F,T)break e}else S.head&&(S.head.comment=null);S.mode=9;case 9:if(512&S.flags){for(;L<16;){if(C===0)break e;C--,z+=I[W++]<<L,L+=8}if(z!==(65535&S.check)){O.msg="header crc mismatch",S.mode=30;break}L=z=0}S.head&&(S.head.hcrc=S.flags>>9&1,S.head.done=!0),O.adler=S.check=0,S.mode=12;break;case 10:for(;L<32;){if(C===0)break e;C--,z+=I[W++]<<L,L+=8}O.adler=S.check=b(z),L=z=0,S.mode=11;case 11:if(S.havedict===0)return O.next_out=B,O.avail_out=D,O.next_in=W,O.avail_in=C,S.hold=z,S.bits=L,2;O.adler=S.check=1,S.mode=12;case 12:if(q===5||q===6)break e;case 13:if(S.last){z>>>=7&L,L-=7&L,S.mode=27;break}for(;L<3;){if(C===0)break e;C--,z+=I[W++]<<L,L+=8}switch(S.last=1&z,L-=1,3&(z>>>=1)){case 0:S.mode=14;break;case 1:if(M(S),S.mode=20,q!==6)break;z>>>=2,L-=2;break e;case 2:S.mode=17;break;case 3:O.msg="invalid block type",S.mode=30}z>>>=2,L-=2;break;case 14:for(z>>>=7&L,L-=7&L;L<32;){if(C===0)break e;C--,z+=I[W++]<<L,L+=8}if((65535&z)!=(z>>>16^65535)){O.msg="invalid stored block lengths",S.mode=30;break}if(S.length=65535&z,L=z=0,S.mode=15,q===6)break e;case 15:S.mode=16;case 16:if(F=S.length){if(C<F&&(F=C),D<F&&(F=D),F===0)break e;i.arraySet(E,I,W,F,B),C-=F,W+=F,D-=F,B+=F,S.length-=F;break}S.mode=12;break;case 17:for(;L<14;){if(C===0)break e;C--,z+=I[W++]<<L,L+=8}if(S.nlen=257+(31&z),z>>>=5,L-=5,S.ndist=1+(31&z),z>>>=5,L-=5,S.ncode=4+(15&z),z>>>=4,L-=4,286<S.nlen||30<S.ndist){O.msg="too many length or distance symbols",S.mode=30;break}S.have=0,S.mode=18;case 18:for(;S.have<S.ncode;){for(;L<3;){if(C===0)break e;C--,z+=I[W++]<<L,L+=8}S.lens[je[S.have++]]=7&z,z>>>=3,L-=3}for(;S.have<19;)S.lens[je[S.have++]]=0;if(S.lencode=S.lendyn,S.lenbits=7,G={bits:S.lenbits},oe=d(0,S.lens,0,19,S.lencode,0,S.work,G),S.lenbits=G.bits,oe){O.msg="invalid code lengths set",S.mode=30;break}S.have=0,S.mode=19;case 19:for(;S.have<S.nlen+S.ndist;){for(;Z=(Y=S.lencode[z&(1<<S.lenbits)-1])>>>16&255,me=65535&Y,!((ue=Y>>>24)<=L);){if(C===0)break e;C--,z+=I[W++]<<L,L+=8}if(me<16)z>>>=ue,L-=ue,S.lens[S.have++]=me;else{if(me===16){for(V=ue+2;L<V;){if(C===0)break e;C--,z+=I[W++]<<L,L+=8}if(z>>>=ue,L-=ue,S.have===0){O.msg="invalid bit length repeat",S.mode=30;break}T=S.lens[S.have-1],F=3+(3&z),z>>>=2,L-=2}else if(me===17){for(V=ue+3;L<V;){if(C===0)break e;C--,z+=I[W++]<<L,L+=8}L-=ue,T=0,F=3+(7&(z>>>=ue)),z>>>=3,L-=3}else{for(V=ue+7;L<V;){if(C===0)break e;C--,z+=I[W++]<<L,L+=8}L-=ue,T=0,F=11+(127&(z>>>=ue)),z>>>=7,L-=7}if(S.have+F>S.nlen+S.ndist){O.msg="invalid bit length repeat",S.mode=30;break}for(;F--;)S.lens[S.have++]=T}}if(S.mode===30)break;if(S.lens[256]===0){O.msg="invalid code -- missing end-of-block",S.mode=30;break}if(S.lenbits=9,G={bits:S.lenbits},oe=d(u,S.lens,0,S.nlen,S.lencode,0,S.work,G),S.lenbits=G.bits,oe){O.msg="invalid literal/lengths set",S.mode=30;break}if(S.distbits=6,S.distcode=S.distdyn,G={bits:S.distbits},oe=d(m,S.lens,S.nlen,S.ndist,S.distcode,0,S.work,G),S.distbits=G.bits,oe){O.msg="invalid distances set",S.mode=30;break}if(S.mode=20,q===6)break e;case 20:S.mode=21;case 21:if(6<=C&&258<=D){O.next_out=B,O.avail_out=D,O.next_in=W,O.avail_in=C,S.hold=z,S.bits=L,c(O,H),B=O.next_out,E=O.output,D=O.avail_out,W=O.next_in,I=O.input,C=O.avail_in,z=S.hold,L=S.bits,S.mode===12&&(S.back=-1);break}for(S.back=0;Z=(Y=S.lencode[z&(1<<S.lenbits)-1])>>>16&255,me=65535&Y,!((ue=Y>>>24)<=L);){if(C===0)break e;C--,z+=I[W++]<<L,L+=8}if(Z&&!(240&Z)){for(ge=ue,se=Z,he=me;Z=(Y=S.lencode[he+((z&(1<<ge+se)-1)>>ge)])>>>16&255,me=65535&Y,!(ge+(ue=Y>>>24)<=L);){if(C===0)break e;C--,z+=I[W++]<<L,L+=8}z>>>=ge,L-=ge,S.back+=ge}if(z>>>=ue,L-=ue,S.back+=ue,S.length=me,Z===0){S.mode=26;break}if(32&Z){S.back=-1,S.mode=12;break}if(64&Z){O.msg="invalid literal/length code",S.mode=30;break}S.extra=15&Z,S.mode=22;case 22:if(S.extra){for(V=S.extra;L<V;){if(C===0)break e;C--,z+=I[W++]<<L,L+=8}S.length+=z&(1<<S.extra)-1,z>>>=S.extra,L-=S.extra,S.back+=S.extra}S.was=S.length,S.mode=23;case 23:for(;Z=(Y=S.distcode[z&(1<<S.distbits)-1])>>>16&255,me=65535&Y,!((ue=Y>>>24)<=L);){if(C===0)break e;C--,z+=I[W++]<<L,L+=8}if(!(240&Z)){for(ge=ue,se=Z,he=me;Z=(Y=S.distcode[he+((z&(1<<ge+se)-1)>>ge)])>>>16&255,me=65535&Y,!(ge+(ue=Y>>>24)<=L);){if(C===0)break e;C--,z+=I[W++]<<L,L+=8}z>>>=ge,L-=ge,S.back+=ge}if(z>>>=ue,L-=ue,S.back+=ue,64&Z){O.msg="invalid distance code",S.mode=30;break}S.offset=me,S.extra=15&Z,S.mode=24;case 24:if(S.extra){for(V=S.extra;L<V;){if(C===0)break e;C--,z+=I[W++]<<L,L+=8}S.offset+=z&(1<<S.extra)-1,z>>>=S.extra,L-=S.extra,S.back+=S.extra}if(S.offset>S.dmax){O.msg="invalid distance too far back",S.mode=30;break}S.mode=25;case 25:if(D===0)break e;if(F=H-D,S.offset>F){if((F=S.offset-F)>S.whave&&S.sane){O.msg="invalid distance too far back",S.mode=30;break}ke=F>S.wnext?(F-=S.wnext,S.wsize-F):S.wnext-F,F>S.length&&(F=S.length),ae=S.window}else ae=E,ke=B-S.offset,F=S.length;for(D<F&&(F=D),D-=F,S.length-=F;E[B++]=ae[ke++],--F;);S.length===0&&(S.mode=21);break;case 26:if(D===0)break e;E[B++]=S.length,D--,S.mode=21;break;case 27:if(S.wrap){for(;L<32;){if(C===0)break e;C--,z|=I[W++]<<L,L+=8}if(H-=D,O.total_out+=H,S.total+=H,H&&(O.adler=S.check=S.flags?l(S.check,E,H,B-H):o(S.check,E,H,B-H)),H=D,(S.flags?z:b(z))!==S.check){O.msg="incorrect data check",S.mode=30;break}L=z=0}S.mode=28;case 28:if(S.wrap&&S.flags){for(;L<32;){if(C===0)break e;C--,z+=I[W++]<<L,L+=8}if(z!==(4294967295&S.total)){O.msg="incorrect length check",S.mode=30;break}L=z=0}S.mode=29;case 29:oe=1;break e;case 30:oe=-3;break e;case 31:return-4;case 32:default:return g}return O.next_out=B,O.avail_out=D,O.next_in=W,O.avail_in=C,S.hold=z,S.bits=L,(S.wsize||H!==O.avail_out&&S.mode<30&&(S.mode<27||q!==4))&&R(O,O.output,O.next_out,H-O.avail_out)?(S.mode=31,-4):(X-=O.avail_in,H-=O.avail_out,O.total_in+=X,O.total_out+=H,S.total+=H,S.wrap&&H&&(O.adler=S.check=S.flags?l(S.check,E,H,O.next_out-H):o(S.check,E,H,O.next_out-H)),O.data_type=S.bits+(S.last?64:0)+(S.mode===12?128:0)+(S.mode===20||S.mode===15?256:0),(X==0&&H===0||q===4)&&oe===p&&(oe=-5),oe)},s.inflateEnd=function(O){if(!O||!O.state)return g;var q=O.state;return q.window&&(q.window=null),O.state=null,p},s.inflateGetHeader=function(O,q){var S;return O&&O.state&&2&(S=O.state).wrap?((S.head=q).done=!1,p):g},s.inflateSetDictionary=function(O,q){var S,I=q.length;return O&&O.state?(S=O.state).wrap!==0&&S.mode!==11?g:S.mode===11&&o(1,q,I,0)!==S.check?-3:R(O,q,I,I)?(S.mode=31,-4):(S.havedict=1,p):g},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(a,n,s){var i=a("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(u,m,p,g,x,h,v,b){var y,j,_,w,k,N,P,A,M,R=b.bits,O=0,q=0,S=0,I=0,E=0,W=0,B=0,C=0,D=0,z=0,L=null,X=0,H=new i.Buf16(16),F=new i.Buf16(16),ke=null,ae=0;for(O=0;O<=15;O++)H[O]=0;for(q=0;q<g;q++)H[m[p+q]]++;for(E=R,I=15;1<=I&&H[I]===0;I--);if(I<E&&(E=I),I===0)return x[h++]=20971520,x[h++]=20971520,b.bits=1,0;for(S=1;S<I&&H[S]===0;S++);for(E<S&&(E=S),O=C=1;O<=15;O++)if(C<<=1,(C-=H[O])<0)return-1;if(0<C&&(u===0||I!==1))return-1;for(F[1]=0,O=1;O<15;O++)F[O+1]=F[O]+H[O];for(q=0;q<g;q++)m[p+q]!==0&&(v[F[m[p+q]]++]=q);if(N=u===0?(L=ke=v,19):u===1?(L=o,X-=257,ke=l,ae-=257,256):(L=c,ke=d,-1),O=S,k=h,B=q=z=0,_=-1,w=(D=1<<(W=E))-1,u===1&&852<D||u===2&&592<D)return 1;for(;;){for(P=O-B,M=v[q]<N?(A=0,v[q]):v[q]>N?(A=ke[ae+v[q]],L[X+v[q]]):(A=96,0),y=1<<O-B,S=j=1<<W;x[k+(z>>B)+(j-=y)]=P<<24|A<<16|M|0,j!==0;);for(y=1<<O-1;z&y;)y>>=1;if(y!==0?(z&=y-1,z+=y):z=0,q++,--H[O]==0){if(O===I)break;O=m[p+v[q]]}if(E<O&&(z&w)!==_){for(B===0&&(B=E),k+=S,C=1<<(W=O-B);W+B<I&&!((C-=H[W+B])<=0);)W++,C<<=1;if(D+=1<<W,u===1&&852<D||u===2&&592<D)return 1;x[_=z&w]=E<<24|W<<16|k-h|0}}return z!==0&&(x[k+z]=O-B<<24|64<<16|0),b.bits=E,0}},{"../utils/common":41}],51:[function(a,n,s){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(a,n,s){var i=a("../utils/common"),o=0,l=1;function c(Y){for(var ce=Y.length;0<=--ce;)Y[ce]=0}var d=0,u=29,m=256,p=m+1+u,g=30,x=19,h=2*p+1,v=15,b=16,y=7,j=256,_=16,w=17,k=18,N=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],P=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],R=new Array(2*(p+2));c(R);var O=new Array(2*g);c(O);var q=new Array(512);c(q);var S=new Array(256);c(S);var I=new Array(u);c(I);var E,W,B,C=new Array(g);function D(Y,ce,je,re,U){this.static_tree=Y,this.extra_bits=ce,this.extra_base=je,this.elems=re,this.max_length=U,this.has_stree=Y&&Y.length}function z(Y,ce){this.dyn_tree=Y,this.max_code=0,this.stat_desc=ce}function L(Y){return Y<256?q[Y]:q[256+(Y>>>7)]}function X(Y,ce){Y.pending_buf[Y.pending++]=255&ce,Y.pending_buf[Y.pending++]=ce>>>8&255}function H(Y,ce,je){Y.bi_valid>b-je?(Y.bi_buf|=ce<<Y.bi_valid&65535,X(Y,Y.bi_buf),Y.bi_buf=ce>>b-Y.bi_valid,Y.bi_valid+=je-b):(Y.bi_buf|=ce<<Y.bi_valid&65535,Y.bi_valid+=je)}function F(Y,ce,je){H(Y,je[2*ce],je[2*ce+1])}function ke(Y,ce){for(var je=0;je|=1&Y,Y>>>=1,je<<=1,0<--ce;);return je>>>1}function ae(Y,ce,je){var re,U,xe=new Array(v+1),J=0;for(re=1;re<=v;re++)xe[re]=J=J+je[re-1]<<1;for(U=0;U<=ce;U++){var Q=Y[2*U+1];Q!==0&&(Y[2*U]=ke(xe[Q]++,Q))}}function ue(Y){var ce;for(ce=0;ce<p;ce++)Y.dyn_ltree[2*ce]=0;for(ce=0;ce<g;ce++)Y.dyn_dtree[2*ce]=0;for(ce=0;ce<x;ce++)Y.bl_tree[2*ce]=0;Y.dyn_ltree[2*j]=1,Y.opt_len=Y.static_len=0,Y.last_lit=Y.matches=0}function Z(Y){8<Y.bi_valid?X(Y,Y.bi_buf):0<Y.bi_valid&&(Y.pending_buf[Y.pending++]=Y.bi_buf),Y.bi_buf=0,Y.bi_valid=0}function me(Y,ce,je,re){var U=2*ce,xe=2*je;return Y[U]<Y[xe]||Y[U]===Y[xe]&&re[ce]<=re[je]}function ge(Y,ce,je){for(var re=Y.heap[je],U=je<<1;U<=Y.heap_len&&(U<Y.heap_len&&me(ce,Y.heap[U+1],Y.heap[U],Y.depth)&&U++,!me(ce,re,Y.heap[U],Y.depth));)Y.heap[je]=Y.heap[U],je=U,U<<=1;Y.heap[je]=re}function se(Y,ce,je){var re,U,xe,J,Q=0;if(Y.last_lit!==0)for(;re=Y.pending_buf[Y.d_buf+2*Q]<<8|Y.pending_buf[Y.d_buf+2*Q+1],U=Y.pending_buf[Y.l_buf+Q],Q++,re===0?F(Y,U,ce):(F(Y,(xe=S[U])+m+1,ce),(J=N[xe])!==0&&H(Y,U-=I[xe],J),F(Y,xe=L(--re),je),(J=P[xe])!==0&&H(Y,re-=C[xe],J)),Q<Y.last_lit;);F(Y,j,ce)}function he(Y,ce){var je,re,U,xe=ce.dyn_tree,J=ce.stat_desc.static_tree,Q=ce.stat_desc.has_stree,ne=ce.stat_desc.elems,ee=-1;for(Y.heap_len=0,Y.heap_max=h,je=0;je<ne;je++)xe[2*je]!==0?(Y.heap[++Y.heap_len]=ee=je,Y.depth[je]=0):xe[2*je+1]=0;for(;Y.heap_len<2;)xe[2*(U=Y.heap[++Y.heap_len]=ee<2?++ee:0)]=1,Y.depth[U]=0,Y.opt_len--,Q&&(Y.static_len-=J[2*U+1]);for(ce.max_code=ee,je=Y.heap_len>>1;1<=je;je--)ge(Y,xe,je);for(U=ne;je=Y.heap[1],Y.heap[1]=Y.heap[Y.heap_len--],ge(Y,xe,1),re=Y.heap[1],Y.heap[--Y.heap_max]=je,Y.heap[--Y.heap_max]=re,xe[2*U]=xe[2*je]+xe[2*re],Y.depth[U]=(Y.depth[je]>=Y.depth[re]?Y.depth[je]:Y.depth[re])+1,xe[2*je+1]=xe[2*re+1]=U,Y.heap[1]=U++,ge(Y,xe,1),2<=Y.heap_len;);Y.heap[--Y.heap_max]=Y.heap[1],function(ye,te){var Ne,Ce,Ue,fe,Te,we,Ee=te.dyn_tree,Be=te.max_code,be=te.stat_desc.static_tree,$e=te.stat_desc.has_stree,Ve=te.stat_desc.extra_bits,_t=te.stat_desc.extra_base,bt=te.stat_desc.max_length,Pt=0;for(fe=0;fe<=v;fe++)ye.bl_count[fe]=0;for(Ee[2*ye.heap[ye.heap_max]+1]=0,Ne=ye.heap_max+1;Ne<h;Ne++)bt<(fe=Ee[2*Ee[2*(Ce=ye.heap[Ne])+1]+1]+1)&&(fe=bt,Pt++),Ee[2*Ce+1]=fe,Be<Ce||(ye.bl_count[fe]++,Te=0,_t<=Ce&&(Te=Ve[Ce-_t]),we=Ee[2*Ce],ye.opt_len+=we*(fe+Te),$e&&(ye.static_len+=we*(be[2*Ce+1]+Te)));if(Pt!==0){do{for(fe=bt-1;ye.bl_count[fe]===0;)fe--;ye.bl_count[fe]--,ye.bl_count[fe+1]+=2,ye.bl_count[bt]--,Pt-=2}while(0<Pt);for(fe=bt;fe!==0;fe--)for(Ce=ye.bl_count[fe];Ce!==0;)Be<(Ue=ye.heap[--Ne])||(Ee[2*Ue+1]!==fe&&(ye.opt_len+=(fe-Ee[2*Ue+1])*Ee[2*Ue],Ee[2*Ue+1]=fe),Ce--)}}(Y,ce),ae(xe,ee,Y.bl_count)}function T(Y,ce,je){var re,U,xe=-1,J=ce[1],Q=0,ne=7,ee=4;for(J===0&&(ne=138,ee=3),ce[2*(je+1)+1]=65535,re=0;re<=je;re++)U=J,J=ce[2*(re+1)+1],++Q<ne&&U===J||(Q<ee?Y.bl_tree[2*U]+=Q:U!==0?(U!==xe&&Y.bl_tree[2*U]++,Y.bl_tree[2*_]++):Q<=10?Y.bl_tree[2*w]++:Y.bl_tree[2*k]++,xe=U,ee=(Q=0)===J?(ne=138,3):U===J?(ne=6,3):(ne=7,4))}function oe(Y,ce,je){var re,U,xe=-1,J=ce[1],Q=0,ne=7,ee=4;for(J===0&&(ne=138,ee=3),re=0;re<=je;re++)if(U=J,J=ce[2*(re+1)+1],!(++Q<ne&&U===J)){if(Q<ee)for(;F(Y,U,Y.bl_tree),--Q!=0;);else U!==0?(U!==xe&&(F(Y,U,Y.bl_tree),Q--),F(Y,_,Y.bl_tree),H(Y,Q-3,2)):Q<=10?(F(Y,w,Y.bl_tree),H(Y,Q-3,3)):(F(Y,k,Y.bl_tree),H(Y,Q-11,7));xe=U,ee=(Q=0)===J?(ne=138,3):U===J?(ne=6,3):(ne=7,4)}}c(C);var G=!1;function V(Y,ce,je,re){H(Y,(d<<1)+(re?1:0),3),function(U,xe,J,Q){Z(U),X(U,J),X(U,~J),i.arraySet(U.pending_buf,U.window,xe,J,U.pending),U.pending+=J}(Y,ce,je)}s._tr_init=function(Y){G||(function(){var ce,je,re,U,xe,J=new Array(v+1);for(U=re=0;U<u-1;U++)for(I[U]=re,ce=0;ce<1<<N[U];ce++)S[re++]=U;for(S[re-1]=U,U=xe=0;U<16;U++)for(C[U]=xe,ce=0;ce<1<<P[U];ce++)q[xe++]=U;for(xe>>=7;U<g;U++)for(C[U]=xe<<7,ce=0;ce<1<<P[U]-7;ce++)q[256+xe++]=U;for(je=0;je<=v;je++)J[je]=0;for(ce=0;ce<=143;)R[2*ce+1]=8,ce++,J[8]++;for(;ce<=255;)R[2*ce+1]=9,ce++,J[9]++;for(;ce<=279;)R[2*ce+1]=7,ce++,J[7]++;for(;ce<=287;)R[2*ce+1]=8,ce++,J[8]++;for(ae(R,p+1,J),ce=0;ce<g;ce++)O[2*ce+1]=5,O[2*ce]=ke(ce,5);E=new D(R,N,m+1,p,v),W=new D(O,P,0,g,v),B=new D(new Array(0),A,0,x,y)}(),G=!0),Y.l_desc=new z(Y.dyn_ltree,E),Y.d_desc=new z(Y.dyn_dtree,W),Y.bl_desc=new z(Y.bl_tree,B),Y.bi_buf=0,Y.bi_valid=0,ue(Y)},s._tr_stored_block=V,s._tr_flush_block=function(Y,ce,je,re){var U,xe,J=0;0<Y.level?(Y.strm.data_type===2&&(Y.strm.data_type=function(Q){var ne,ee=4093624447;for(ne=0;ne<=31;ne++,ee>>>=1)if(1&ee&&Q.dyn_ltree[2*ne]!==0)return o;if(Q.dyn_ltree[18]!==0||Q.dyn_ltree[20]!==0||Q.dyn_ltree[26]!==0)return l;for(ne=32;ne<m;ne++)if(Q.dyn_ltree[2*ne]!==0)return l;return o}(Y)),he(Y,Y.l_desc),he(Y,Y.d_desc),J=function(Q){var ne;for(T(Q,Q.dyn_ltree,Q.l_desc.max_code),T(Q,Q.dyn_dtree,Q.d_desc.max_code),he(Q,Q.bl_desc),ne=x-1;3<=ne&&Q.bl_tree[2*M[ne]+1]===0;ne--);return Q.opt_len+=3*(ne+1)+5+5+4,ne}(Y),U=Y.opt_len+3+7>>>3,(xe=Y.static_len+3+7>>>3)<=U&&(U=xe)):U=xe=je+5,je+4<=U&&ce!==-1?V(Y,ce,je,re):Y.strategy===4||xe===U?(H(Y,2+(re?1:0),3),se(Y,R,O)):(H(Y,4+(re?1:0),3),function(Q,ne,ee,ye){var te;for(H(Q,ne-257,5),H(Q,ee-1,5),H(Q,ye-4,4),te=0;te<ye;te++)H(Q,Q.bl_tree[2*M[te]+1],3);oe(Q,Q.dyn_ltree,ne-1),oe(Q,Q.dyn_dtree,ee-1)}(Y,Y.l_desc.max_code+1,Y.d_desc.max_code+1,J+1),se(Y,Y.dyn_ltree,Y.dyn_dtree)),ue(Y),re&&Z(Y)},s._tr_tally=function(Y,ce,je){return Y.pending_buf[Y.d_buf+2*Y.last_lit]=ce>>>8&255,Y.pending_buf[Y.d_buf+2*Y.last_lit+1]=255&ce,Y.pending_buf[Y.l_buf+Y.last_lit]=255&je,Y.last_lit++,ce===0?Y.dyn_ltree[2*je]++:(Y.matches++,ce--,Y.dyn_ltree[2*(S[je]+m+1)]++,Y.dyn_dtree[2*L(ce)]++),Y.last_lit===Y.lit_bufsize-1},s._tr_align=function(Y){H(Y,2,3),F(Y,j,R),function(ce){ce.bi_valid===16?(X(ce,ce.bi_buf),ce.bi_buf=0,ce.bi_valid=0):8<=ce.bi_valid&&(ce.pending_buf[ce.pending++]=255&ce.bi_buf,ce.bi_buf>>=8,ce.bi_valid-=8)}(Y)}},{"../utils/common":41}],53:[function(a,n,s){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(a,n,s){(function(i){(function(o,l){if(!o.setImmediate){var c,d,u,m,p=1,g={},x=!1,h=o.document,v=Object.getPrototypeOf&&Object.getPrototypeOf(o);v=v&&v.setTimeout?v:o,c={}.toString.call(o.process)==="[object process]"?function(_){process.nextTick(function(){y(_)})}:function(){if(o.postMessage&&!o.importScripts){var _=!0,w=o.onmessage;return o.onmessage=function(){_=!1},o.postMessage("","*"),o.onmessage=w,_}}()?(m="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",j,!1):o.attachEvent("onmessage",j),function(_){o.postMessage(m+_,"*")}):o.MessageChannel?((u=new MessageChannel).port1.onmessage=function(_){y(_.data)},function(_){u.port2.postMessage(_)}):h&&"onreadystatechange"in h.createElement("script")?(d=h.documentElement,function(_){var w=h.createElement("script");w.onreadystatechange=function(){y(_),w.onreadystatechange=null,d.removeChild(w),w=null},d.appendChild(w)}):function(_){setTimeout(y,0,_)},v.setImmediate=function(_){typeof _!="function"&&(_=new Function(""+_));for(var w=new Array(arguments.length-1),k=0;k<w.length;k++)w[k]=arguments[k+1];var N={callback:_,args:w};return g[p]=N,c(p),p++},v.clearImmediate=b}function b(_){delete g[_]}function y(_){if(x)setTimeout(y,0,_);else{var w=g[_];if(w){x=!0;try{(function(k){var N=k.callback,P=k.args;switch(P.length){case 0:N();break;case 1:N(P[0]);break;case 2:N(P[0],P[1]);break;case 3:N(P[0],P[1],P[2]);break;default:N.apply(l,P)}})(w)}finally{b(_),x=!1}}}}function j(_){_.source===o&&typeof _.data=="string"&&_.data.indexOf(m)===0&&y(+_.data.slice(m.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof ro<"u"?ro:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(e$);var gje=e$.exports;const xje=Dt(gje),Tt={orange:"#F2A93B",white:"#FFFFFF",gray:"#8C8C8C",darkGray:"#5A5A5A",deepOrange:"#C97A00",statusGood:"#4CAF50",statusBad:"#D9534F"},Br={grid:"#3A3A3A",axis:"#B5B5B5",label:"#FFFFFF",tooltipBg:"#1F1F1F"},Ye=e=>{const t=Number(e??0);return Number.isFinite(t)?t:0},LE=(e,t,a)=>Math.max(t,Math.min(a,e)),Fr=(e,t)=>(Array.isArray(e)?e:[]).find(s=>s?.dataKey===t)?.value,Ta=e=>String(Math.round(Ye(e))),Rh=e=>Ye(e).toFixed(2),cm=e=>`${Ye(e).toFixed(2)}%`,yje=e=>{const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),a=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-a);const n=t.getUTCFullYear(),s=new Date(Date.UTC(n,0,1)),i=Math.ceil(((t-s)/864e5+1)/7);return{weekYear:n,week:i}},vje=e=>String(Math.max(0,Math.trunc(e))).padStart(2,"0"),$E=e=>{const{weekYear:t,week:a}=yje(e);return`${t}-W${vje(a)}`},bje=f.memo(function({weekStart:t,weekEnd:a,onChangeStart:n,onChangeEnd:s,labelStart:i,labelEnd:o}){return r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:i}),r.jsx(Ml,{value:t,onChange:n,className:"w-full"})]}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:o}),r.jsx(Ml,{value:a,onChange:s,className:"w-full"})]})]})}),$n=(e,{textColor:t=Br.label}={})=>{const a=Array.isArray(e)?e:[];return({width:n,height:s})=>{const i=Ye(n),o=Ye(s),l=18,c=10,d=18,u=Math.max(8,o-22),m=h=>l+8+Math.min(220,Math.max(40,String(h||"").length*7)),p=a.reduce((h,v)=>h+m(v?.label)+d,0);let x=Math.max(8,(i-p)/2);return r.jsx("g",{transform:"translate(0, 0)",children:a.map((h,v)=>{const b=String(h?.color||"#111827"),y=String(h?.label||""),j=String(h?.type||"box"),_=m(y),w=x;return x+=_+d,r.jsxs("g",{transform:`translate(${w}, ${u})`,children:[j==="line"?r.jsxs("g",{children:[r.jsx("line",{x1:"0",y1:c/2,x2:l,y2:c/2,stroke:b,strokeWidth:2}),r.jsx("circle",{cx:l/2,cy:c/2,r:2.5,fill:b})]}):r.jsx("rect",{x:"0",y:"0",width:l,height:c,rx:"2",fill:b}),r.jsx("text",{x:l+8,y:c-1,fontSize:"12",fill:t,children:y})]},`${j}-${v}`)})})}},RE=({formatter:e=d=>d,fontSize:t=10,fontWeight:a=600,textColor:n=Br.label,bgColor:s="#FFFFFF",bgOpacity:i=.92,paddingX:o=4,paddingY:l=2,offsetY:c=8}={})=>{const d=(u,m)=>String(u??"").length*m*.62;return u=>{const{x:m,y:p,width:g,value:x}=u;if(x==null)return null;const h=String(e(x));h.trim();const v=Ye(m)+Ye(g)/2,b=Ye(p)-c,y=d(h,t)+o*2,j=t+l*2;return r.jsxs("g",{children:[r.jsx("rect",{x:v-y/2,y:b-t-l,width:y,height:j,rx:4,fill:s,opacity:i}),r.jsx("text",{x:v,y:b,fill:n,fontSize:t,fontWeight:a,textAnchor:"middle",dominantBaseline:"auto",children:h})]})}},dm=({barKey:e,lineKey:t,barAxisId:a="left",lineAxisId:n="right",formatter:s=h=>h,lineLabelFormatter:i=h=>h,fontSize:o=10,fontWeight:l=600,fill:c=Br.label,collisionYPx:d=14,lineLabelFontSize:u=9,lineLabelOffset:m=12,dotRadius:p=3,dotBuffer:g=4,lineStrokeBuffer:x=4}={})=>{const h=(j,_)=>String(j??"").length*_*.62,v=(j,_)=>!j||!_?!1:!(j.x2<_.x1||j.x1>_.x2||j.y2<_.y1||j.y1>_.y2),b=(j,_,w)=>Math.max(_,Math.min(w,j)),y=(j,_,w,k,N,P)=>{const A=N-w,M=P-k;if(A===0&&M===0)return Math.hypot(j-w,_-k);const R=b(((j-w)*A+(_-k)*M)/(A*A+M*M),0,1),O=w+R*A,q=k+R*M;return Math.hypot(j-O,_-q)};return({data:j,xAxisMap:_,yAxisMap:w})=>{const k=Array.isArray(j)?j:[],P=(_?Object.values(_)[0]:null)?.scale,A=typeof P?.bandwidth=="function"?P.bandwidth():0,M=w?.[a]?.scale,R=w?.[n]?.scale;if(!P||!M||!R)return null;const O=M(0),q=k.map(S=>{const I=S?.pole,E=P(I),W=Number.isFinite(E)?E+A/2:NaN,B=R(Ye(S?.[t]));return{cx:W,y:B}});return r.jsx("g",{children:k.map((S,I)=>{const E=S?.pole,W=P(E);if(!Number.isFinite(W))return null;const B=Ye(S?.[e]);if(!B)return null;const C=Ye(S?.[t]),D=W+A/2,z=M(B),L=Math.max(0,O-z),X=R(C),H=X-m,F=s(B),ke=h(F,o),ae=ke/2,ue=o/2,Z=i(C),me=h(Z,u),ge=Number.isFinite(H)?{x1:D-me/2,x2:D+me/2,y1:H-u,y2:H+2}:null,se=Number.isFinite(X)?{x1:D-(p+g),x2:D+(p+g),y1:X-(p+g),y2:X+(p+g)}:null,he=q[I-1],T=q[I],oe=q[I+1],G=[];he&&Number.isFinite(he.cx)&&Number.isFinite(he.y)&&Number.isFinite(T?.cx)&&Number.isFinite(T?.y)&&G.push([he.cx,he.y,T.cx,T.y]),oe&&Number.isFinite(oe.cx)&&Number.isFinite(oe.y)&&Number.isFinite(T?.cx)&&Number.isFinite(T?.y)&&G.push([T.cx,T.y,oe.cx,oe.y]);const V=fe=>{const Te={x1:D-ae,x2:D+ae,y1:fe-ue,y2:fe+ue};if(v(Te,ge)||v(Te,se))return!0;const we=fe,Ee=Math.max(1,Math.min(ae,ae*.85)),Be=[D,D-Ee,D+Ee];for(const[be,$e,Ve,_t]of G)for(const bt of Be)if(y(bt,we,be,$e,Ve,_t)<=x)return!0;return!!(Number.isFinite(X)&&Math.abs(we-X)<=d||Number.isFinite(H)&&Math.abs(we-H)<=d)},Y=z-8,ce=z+Math.min(L/2,20),je=z+L,re=z+14,U=Math.min(je-14,O-8),xe=3;let J=ce,Q="middle",ne=!1;if(!V(Y))J=Y,Q="auto",ne=!0;else if(Number.isFinite(re)&&Number.isFinite(U)&&re<=U){let fe=!1;const Te=b(ce,re,U);for(let we=Te;we<=U;we+=xe)if(!V(we)){J=we,Q="middle",ne=!1,fe=!0;break}if(!fe){for(let we=Te;we>=re;we-=xe)if(!V(we)){J=we,Q="middle",ne=!1,fe=!0;break}}fe||(J=ce,Q="middle",ne=!1)}else J=b(ce,z+8,O-8),Q="middle",ne=!1;J>O-6&&(J=O-6,Q="auto",ne=!0);const ee=4,ye=2,te=ke+ee*2,Ne=o+ye*2,Ce=D-te/2,Ue=J-o-ye;return r.jsxs("g",{children:[ne?r.jsx("rect",{x:Ce,y:Ue,width:te,height:Ne,rx:4,fill:"#FFFFFF",opacity:.92}):null,r.jsx("text",{x:D,y:J,fill:ne?"#111827":c,fontSize:o,fontWeight:l,textAnchor:"middle",dominantBaseline:Q,children:F})]},`${String(E)}-${I}`)})})}},t$=(e,t,a)=>{const n=String(t??"").trim();if(!n)return[];const s=Math.max(40,Ye(a)),i=n.split(/\s+/g),o=[];let l="";for(const c of i){const d=l?`${l} ${c}`:c;if(e.measureText(d).width<=s){l=d;continue}if(l&&o.push(l),l=c,e.measureText(l).width>s){let m="";for(const p of String(c)){const g=m+p;e.measureText(g).width<=s||!m?m=g:(o.push(m),m=p)}l=m}}return l&&o.push(l),o},jje=async(e,{scale:t=5,background:a="#ffffff",maxCanvasSize:n=8192,title:s}={})=>{const i=new XMLSerializer,o=e.cloneNode(!0);if(String(a).toLowerCase()==="#ffffff"){const O="#2E2E2E";o.querySelectorAll(['path[stroke="#FFFFFF"]','path[stroke="#ffffff"]','circle[stroke="#FFFFFF"]','circle[stroke="#ffffff"]','circle[fill="#FFFFFF"]','circle[fill="#ffffff"]','text[fill="#FFFFFF"]','text[fill="#ffffff"]','tspan[fill="#FFFFFF"]','tspan[fill="#ffffff"]'].join(",")).forEach(q=>{const S=q.getAttribute("stroke"),I=q.getAttribute("fill");S&&S.toLowerCase()==="#ffffff"&&q.setAttribute("stroke",O),I&&I.toLowerCase()==="#ffffff"&&q.setAttribute("fill",O)})}const l=i.serializeToString(o),c=l.includes("xmlns=")?l:l.replace("<svg",'<svg xmlns="http://www.w3.org/2000/svg"'),d=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(c)}`,u=new Image;u.decoding="async",u.crossOrigin="anonymous";const m=e.clientWidth||e.getBoundingClientRect().width||1200,p=e.clientHeight||e.getBoundingClientRect().height||600,g=window.devicePixelRatio||1;let x=Math.max(1,Ye(t)*g);const h=Math.max(512,Ye(n)),v=Math.max(m*x,p*x);v>h&&(x=x*(h/v)),await new Promise((O,q)=>{u.onload=O,u.onerror=q,u.src=d});const b=String(s||"").trim(),y=12,j=10,_=18,w=Math.max(40,Ye(m)-y*2),k=document.createElement("canvas");k.width=Math.round(m*x);const N=k.getContext("2d");if(!N)throw new Error("Canvas not supported");let P=0,A=[];if(b){N.save(),N.scale(x,x),N.font="700 16px system-ui, -apple-system, Segoe UI, Roboto, Arial",A=t$(N,b,w),N.restore();const O=A.length*_;P=Math.max(40,j*2+O+8)}const M=Math.round(P*x);k.height=Math.round(p*x)+M;const R=k.getContext("2d");if(!R)throw new Error("Canvas not supported");if(R.fillStyle=a,R.fillRect(0,0,k.width,k.height),b){R.save(),R.scale(x,x),R.fillStyle="#1F1F1F",R.font="700 16px system-ui, -apple-system, Segoe UI, Roboto, Arial",R.textBaseline="top";const O=j;A.forEach((q,S)=>{R.fillText(q,y,O+S*_)}),R.strokeStyle="#F2A93B",R.globalAlpha=.9,R.lineWidth=2,R.beginPath(),R.moveTo(y,P-4),R.lineTo(Math.max(y,m-y),P-4),R.stroke(),R.restore()}return R.setTransform(x,0,0,x,0,M),R.imageSmoothingEnabled=!0,R.imageSmoothingQuality="high",R.drawImage(u,0,0,m,p),new Promise(O=>{k.toBlob(q=>O(q),"image/png",1)})},wje=async(e,{width:t=1200,height:a=800,scale:n=2,background:s="#ffffff",maxCanvasSize:i=8192,title:o}={})=>{const l=String(e||""),c=Math.max(300,Math.round(Ye(t))),d=Math.max(300,Math.round(Ye(a))),u=`
<svg xmlns="http://www.w3.org/2000/svg" width="${c}" height="${d}">
  <foreignObject x="0" y="0" width="100%" height="100%">
    <div xmlns="http://www.w3.org/1999/xhtml">${l}</div>
  </foreignObject>
</svg>`.trim(),m=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(u)}`,p=new Image;p.decoding="async",p.crossOrigin="anonymous",await new Promise((O,q)=>{p.onload=O,p.onerror=q,p.src=m});const g=String(o||"").trim(),x=12,h=10,v=18,b=Math.max(40,Ye(c)-x*2),y=window.devicePixelRatio||1;let j=Math.max(1,Ye(n)*y);const _=Math.max(512,Ye(i)),w=Math.max(c*j,d*j);w>_&&(j=j*(_/w));const k=document.createElement("canvas");k.width=Math.round(c*j);const N=k.getContext("2d");if(!N)throw new Error("Canvas not supported");let P=0,A=[];if(g){N.save(),N.scale(j,j),N.font="700 16px system-ui, -apple-system, Segoe UI, Roboto, Arial",A=t$(N,g,b),N.restore();const O=A.length*v;P=Math.max(40,h*2+O+8)}const M=Math.round(P*j);k.height=Math.round(d*j)+M;const R=k.getContext("2d");if(!R)throw new Error("Canvas not supported");if(R.fillStyle=s,R.fillRect(0,0,k.width,k.height),g){R.save(),R.scale(j,j),R.fillStyle="#1F1F1F",R.font="700 16px system-ui, -apple-system, Segoe UI, Roboto, Arial",R.textBaseline="top";const O=h;A.forEach((q,S)=>{R.fillText(q,x,O+S*v)}),R.strokeStyle="#F2A93B",R.globalAlpha=.9,R.lineWidth=2,R.beginPath(),R.moveTo(x,P-4),R.lineTo(Math.max(x,c-x),P-4),R.stroke(),R.restore()}return R.setTransform(j,0,0,j,0,M),R.imageSmoothingEnabled=!0,R.imageSmoothingQuality="high",R.drawImage(p,0,0,c,d),new Promise(O=>{k.toBlob(q=>O(q),"image/png",1)})},_je=(e,t)=>{const a=window.URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.download=t,n.click(),window.URL.revokeObjectURL(a)},kje=f.memo(function({user:t,focusPole:a}){const n=Oi(),[s,i]=f.useState(()=>typeof document<"u"?document.documentElement.classList.contains("dark"):!1),[o,l]=f.useState(!1);f.useEffect(()=>{if(typeof document>"u")return;const ee=document.documentElement,ye=()=>i(ee.classList.contains("dark"));ye();const te=new MutationObserver(ye);return te.observe(ee,{attributes:!0,attributeFilter:["class"]}),()=>te.disconnect()},[]),f.useEffect(()=>{if(typeof window>"u")return;const ee=()=>l(!0),ye=()=>l(!1);return window.addEventListener("beforeprint",ee),window.addEventListener("afterprint",ye),()=>{window.removeEventListener("beforeprint",ee),window.removeEventListener("afterprint",ye)}},[]);const c=s?Tt.white:"#2E2E2E",d="monthly_report_theme_filters_v1",[u,m]=f.useState(()=>{const ee=new Date,ye=String(ee.getMonth()+1).padStart(2,"0");return`${ee.getFullYear()}-${ye}`}),[p,g]=f.useState(""),[x,h]=f.useState(!1),[v,b]=f.useState(!1),[y,j]=f.useState(null),[_,w]=f.useState(!1),[k,N]=f.useState(()=>$E(new Date)),[P,A]=f.useState(()=>$E(new Date)),[M,R]=f.useState("");f.useEffect(()=>{if(!(typeof window>"u"))try{const ee=window.localStorage.getItem(d);if(!ee)return;const ye=JSON.parse(ee);typeof ye?.useWeekRange=="boolean"&&w(ye.useWeekRange),typeof ye?.month=="string"&&m(ye.month),typeof ye?.weekStart=="string"&&N(ye.weekStart),typeof ye?.weekEnd=="string"&&A(ye.weekEnd),typeof ye?.projectId=="string"&&g(ye.projectId),String(a||"").trim()===""&&typeof ye?.selectedPole=="string"&&R(ye.selectedPole)}catch{}},[a]),f.useEffect(()=>{if(!(typeof window>"u"))return()=>{try{window.localStorage.removeItem(d)}catch{}}},[d]),f.useEffect(()=>{if(!(typeof window>"u"))try{const ee=String(a||"").trim(),ye={useWeekRange:_,month:u,weekStart:k,weekEnd:P,projectId:p,selectedPole:ee?"":M};window.localStorage.setItem(d,JSON.stringify(ye))}catch{}},[a,u,p,M,_,P,k]);const O=f.useRef({}),q=String(t?.role||"")==="admin",S=f.useCallback(async()=>{if(q){h(!0);try{const ee={};_?(ee.week_start=k,ee.week_end=P):ee.month=u,String(p||"").trim()!==""&&(ee.project_id=p),ee.refresh=1;const ye=await Ma.getMonthlyReportSummary(ee);j(ye.data?.data??null)}catch{j(null),K.error(n("dashboard.monthlyReport.loadFailed")||n("errors.failedToLoad"))}finally{h(!1)}}},[q,u,p,n,_,k,P]);f.useEffect(()=>{S()},[S]);const I=y?.labels??[],E=y?.sections??{},W=String(a||"").trim(),B=String(M||"").trim(),C=f.useMemo(()=>W===""?I:I.filter(ee=>String(ee)===W),[I,W]),D=f.useMemo(()=>W!==""?C:B===""?I:I.filter(ee=>String(ee)===B),[C,I,W,B]),z=D.length<=1,L=z?0:-20,X=z?30:60,H=z?"middle":"end",F=o?"#111827":s?Br.label:"#111827",ke=f.useMemo(()=>(Array.isArray(y?.projects)?y.projects:[]).slice().sort((ye,te)=>String(ye?.name||"").localeCompare(String(te?.name||""))),[y?.projects]),ae=f.useMemo(()=>{const ee=E?.veille?.datasets?.[0],ye=E?.veille?.datasets?.[1],te=Array.isArray(ee?.data)?ee.data:[],Ne=Array.isArray(ye?.data)?ye.data:[];return D.map(Ce=>{const Ue=I.indexOf(Ce);return{pole:Ce,score_sst:Ye(te[Ue]),score_environment:Ye(Ne[Ue])}})},[D,I,E?.veille]),ue=f.useMemo(()=>{const ee=E?.sor?.datasets?.[0],ye=E?.sor?.datasets?.[1],te=Array.isArray(ee?.data)?ee.data:[],Ne=Array.isArray(ye?.data)?ye.data:[];return D.map(Ce=>{const Ue=I.indexOf(Ce);return{pole:Ce,total:Ye(te[Ue]),closurePct:Ye(Ne[Ue])}})},[D,I,E?.sor]),Z=f.useMemo(()=>{const ee=E?.sor_subcontractors?.datasets?.[0],ye=E?.sor_subcontractors?.datasets?.[1],te=Array.isArray(ee?.data)?ee.data:[],Ne=Array.isArray(ye?.data)?ye.data:[];return D.map(Ce=>{const Ue=I.indexOf(Ce);return{pole:Ce,total:Ye(te[Ue]),closurePct:Ye(Ne[Ue])}})},[D,I,E?.sor_subcontractors]),me=f.useMemo(()=>{const ee=E?.closure_duration?.datasets?.[0],ye=Array.isArray(ee?.data)?ee.data:[];return D.map(te=>{const Ne=I.indexOf(te);return{pole:te,avgHours:Ye(ye[Ne])}})},[D,I,E?.closure_duration]),ge=f.useMemo(()=>{const ee=E?.closure_duration_subcontractors?.datasets?.[0],ye=Array.isArray(ee?.data)?ee.data:[];return D.map(te=>{const Ne=I.indexOf(te);return{pole:te,avgHours:Ye(ye[Ne])}})},[D,I,E?.closure_duration_subcontractors]),se=f.useMemo(()=>{const ee=E?.trainings?.datasets?.[0],ye=E?.trainings?.datasets?.[1],te=Array.isArray(ee?.data)?ee.data:[],Ne=Array.isArray(ye?.data)?ye.data:[];return D.map(Ce=>{const Ue=I.indexOf(Ce);return{pole:Ce,count:Ye(te[Ue]),hours:Ye(Ne[Ue])}})},[D,I,E?.trainings]),he=f.useMemo(()=>{const ee=E?.awareness?.datasets?.[0],ye=E?.awareness?.datasets?.[1],te=Array.isArray(ee?.data)?ee.data:[],Ne=Array.isArray(ye?.data)?ye.data:[];return D.map(Ce=>{const Ue=I.indexOf(Ce);return{pole:Ce,count:Ye(te[Ue]),hours:Ye(Ne[Ue])}})},[D,I,E?.awareness]),T=f.useMemo(()=>{const ee=E?.medical?.datasets?.[0],ye=Array.isArray(ee?.data)?ee.data:[];return D.map(te=>{const Ne=I.indexOf(te);return{pole:te,pct:Ye(ye[Ne])}})},[D,I,E?.medical]),oe=f.useMemo(()=>{const ee=E?.tf_tg?.datasets?.[0],ye=E?.tf_tg?.datasets?.[1],te=Array.isArray(ee?.data)?ee.data:[],Ne=Array.isArray(ye?.data)?ye.data:[];return D.map(Ce=>{const Ue=I.indexOf(Ce),fe=E?.tf_tg?.by_pole?.[Ce]||{};return{pole:Ce,tf:Ye(te[Ue]),tg:Ye(Ne[Ue]),accidents:Ye(fe.accidents),lostDays:Ye(fe.lost_days),hours:Ye(fe.hours)}})},[D,I,E?.tf_tg]),G=f.useMemo(()=>{const ee=E?.accidents_incidents?.datasets?.[0],ye=E?.accidents_incidents?.datasets?.[1],te=Array.isArray(ee?.data)?ee.data:[],Ne=Array.isArray(ye?.data)?ye.data:[];return D.map(Ce=>{const Ue=I.indexOf(Ce);return{pole:Ce,accidents:Ye(te[Ue]),incidents:Ye(Ne[Ue])}})},[D,I,E?.accidents_incidents]),V=f.useMemo(()=>{const ee=E?.ppe_consumption?.item_names||{},ye=E?.ppe_consumption?.item_ids||[],te=E?.ppe_consumption?.by_pole||{};return{rows:D.map(Ce=>{const Ue=te[Ce]||{},fe={pole:Ce};return ye.forEach(Te=>{fe[`item_${Te}`]=Ye(Ue[Te])}),fe}),itemNames:ee,itemIds:ye}},[D,E?.ppe_consumption]),Y=f.useMemo(()=>{const ee=E?.machinery?.datasets?.[0],ye=E?.machinery?.datasets?.[1],te=Array.isArray(ee?.data)?ee.data:[],Ne=Array.isArray(ye?.data)?ye.data:[];return D.map(Ce=>{const Ue=I.indexOf(Ce);return{pole:Ce,count:Ye(te[Ue]),avgCompletion:Ye(Ne[Ue])}})},[D,I,E?.machinery]),ce=f.useMemo(()=>{const ee=E?.inspections?.datasets?.[0],ye=Array.isArray(ee?.data)?ee.data:[];return D.map(te=>{const Ne=I.indexOf(te);return{pole:te,count:Ye(ye[Ne])}})},[D,I,E?.inspections]),je={contentStyle:{backgroundColor:Br.tooltipBg,border:`1px solid ${Br.grid}`,borderRadius:10,maxWidth:320,padding:10,lineHeight:1.2},labelStyle:{color:Br.label,fontWeight:700},itemStyle:{color:Br.label},allowEscapeViewBox:{x:!1,y:!1},wrapperStyle:{zIndex:99999,pointerEvents:"none"},isAnimationActive:!1},re=f.useCallback((ee,{side:ye="auto",tooltipWidth:te=320,gutter:Ne=16,estimatedHeight:Ce=220,containerKey:Ue=""}={})=>({active:fe,payload:Te,label:we,coordinate:Ee,viewBox:Be})=>{if(!fe||!Te||Te.length===0)return null;const be=Be?.width||500,$e=Ee?.x||0,Ve=Ee?.y||0,_t=String(Ue||"").trim(),bt=_t?O.current?.[_t]:null,Pt=bt?.getBoundingClientRect?bt.getBoundingClientRect():null,It=typeof window<"u"&&typeof window.innerWidth=="number"&&typeof window.innerHeight=="number",Ct=It?window.innerWidth:1200,Yt=It?window.innerHeight:800,Ar=Pt?Pt.left+$e:$e,lt=Pt?Pt.top+Ve:Ve,Pr=(ye==="auto"?$e+te+Ne>be?"left":"right":ye)==="left"?Ar-te-Ne:Ar+Ne,an=lt-12,Fe=LE(Pr,8,Math.max(8,Ct-te-8)),Ge=LE(an,8,Math.max(8,Yt-Ce-8)),gt=r.jsx("div",{style:{...je.contentStyle,position:"fixed",left:Fe,top:Ge,width:te,zIndex:999999,pointerEvents:"none"},children:ee({active:fe,payload:Te,label:we})});return typeof document<"u"&&document.body?zl.createPortal(gt,document.body):gt},[je.contentStyle]),U={tick:{fontSize:11,fill:Br.axis},axisLine:{stroke:Br.axis,opacity:.7},tickLine:{stroke:Br.axis,opacity:.5}},xe={stroke:Br.grid,opacity:.65},J=(ee,ye,te,{maxRows:Ne=12}={})=>{const Ce=Array.isArray(ye)?ye:[],Ue=Math.max(0,Math.min(12,Ye(Ne))),fe=Ce.slice().sort((we,Ee)=>Ye(te(Ee))-Ye(te(we))).slice(0,Ue),Te=Math.max(0,Ce.length-fe.length);return r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"text-xs font-semibold text-slate-200 leading-tight",children:[n("dashboard.monthlyReport.pole"),": ",ee]}),fe.length===0?r.jsx("div",{className:"text-xs text-slate-300",children:n("common.noData")}):r.jsxs(r.Fragment,{children:[fe.map(we=>r.jsxs("div",{className:"grid grid-cols-[1fr_auto] items-center gap-2 text-xs text-slate-200 leading-tight",children:[r.jsxs("div",{className:"min-w-0 truncate",children:[we.project_name," (",we.project_code,")"]}),r.jsx("div",{className:"text-right font-semibold tabular-nums",children:Ye(te(we))})]},String(we.project_id))),Te>0?r.jsxs("div",{className:"text-[10px] text-slate-300 leading-tight",children:["+",Te," ",n("common.more")||"more"]}):null]})]})},Q=f.useCallback(ee=>n(`dashboard.monthlyReport.sections.${ee}`),[n]),ne=f.useCallback(async()=>{if(!y){K.error(n("dashboard.monthlyReport.noDataToExport")||n("common.noData"));return}const ee=O.current||{},ye=[...Object.entries(ee),["F_subcontractor_documents",null]];if(ye.length===0){K.error(n("dashboard.monthlyReport.noChartsFound")||n("common.noData"));return}b(!0);try{const te=new xje,Ne=te.folder(`monthly_report_${u}`),Ce={A_veille_reglementaire:Q("veille"),B_deviations_closure:Q("sor"),C_closure_duration:Q("closure_duration"),D_trainings:Q("trainings"),E_awareness_sessions:Q("awareness"),F_subcontractor_documents:Q("subcontractors"),G_medical_conformity:Q("medical"),H_deviations_closure_subcontractors:Q("sor_subcontractors"),I_closure_duration_subcontractors:Q("closure_duration_subcontractors"),J_tf_tg:Q("tf_tg"),K_accidents_incidents:Q("accidents_incidents"),L_ppe_consumption:Q("ppe_consumption"),M_machinery:Q("machinery"),N_inspections:Q("inspections")};for(const[fe,Te]of ye){if(!Te&&fe!=="F_subcontractor_documents")continue;let we=null;const Ee=Ce[fe]||fe;if(fe==="F_subcontractor_documents"){const be=(D||[]).flatMap(Yt=>{const Ar=E?.subcontractors?.by_pole?.[Yt],lt=Array.isArray(Ar)?Ar:[];return lt.length===0?[{pole:Yt,contractor:"",project:"",uploaded:"",completion:n("common.noData")}]:lt.map(Ft=>({pole:Yt,contractor:String(Ft?.contractor_name||""),project:String(Ft?.project_name||""),uploaded:`${Ta(Ft?.uploaded_docs_count)}/${Ta(Ft?.required_docs_count)}`,completion:`${Ye(Ft?.completion_pct).toFixed(1)}%`}))}),$e=28,Ve=70,_t=Math.max(1,be.length),bt=Math.min(2400,Ve+_t*$e+40),Pt=1200,It=Yt=>String(Yt).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#39;"),Ct=`
            <div style="font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; color: #111827; background: #ffffff; padding: 16px;">
              <div style="font-size: 12px; color: #6B7280; margin-bottom: 10px;">${It(n("dashboard.monthlyReport.subcontractorHelp"))}</div>
              <table style="width: 100%; border-collapse: collapse; font-size: 12px;">
                <thead>
                  <tr>
                    <th style="text-align: left; padding: 8px 10px; border-bottom: 2px solid #E5E7EB;">${It(n("dashboard.monthlyReport.pole"))}</th>
                    <th style="text-align: left; padding: 8px 10px; border-bottom: 2px solid #E5E7EB;">${It(n("dashboard.monthlyReport.contractor"))}</th>
                    <th style="text-align: left; padding: 8px 10px; border-bottom: 2px solid #E5E7EB;">${It(n("dashboard.monthlyReport.project"))}</th>
                    <th style="text-align: left; padding: 8px 10px; border-bottom: 2px solid #E5E7EB;">${It(n("dashboard.monthlyReport.uploadedDocs"))}</th>
                    <th style="text-align: left; padding: 8px 10px; border-bottom: 2px solid #E5E7EB;">${It(n("dashboard.monthlyReport.completion"))}</th>
                  </tr>
                </thead>
                <tbody>
                  ${be.map((Yt,Ar)=>`
                    <tr>
                      <td style="padding: 7px 10px; border-bottom: 1px solid #F3F4F6; font-weight: ${Ar===0||be[Ar-1]?.pole!==Yt.pole?"600":"400"};">${It(Yt.pole)}</td>
                      <td style="padding: 7px 10px; border-bottom: 1px solid #F3F4F6;">${It(Yt.contractor)}</td>
                      <td style="padding: 7px 10px; border-bottom: 1px solid #F3F4F6;">${It(Yt.project)}</td>
                      <td style="padding: 7px 10px; border-bottom: 1px solid #F3F4F6; font-variant-numeric: tabular-nums;">${It(Yt.uploaded)}</td>
                      <td style="padding: 7px 10px; border-bottom: 1px solid #F3F4F6; font-variant-numeric: tabular-nums; font-weight: 700;">${It(Yt.completion)}</td>
                    </tr>
                  `).join("")}
                </tbody>
              </table>
            </div>
          `;we=await wje(Ct,{width:Pt,height:bt,scale:2,background:"#ffffff",maxCanvasSize:8192,title:Ee})}else{const be=Te?.querySelector("svg");if(!be)continue;we=await jje(be,{scale:5,background:"#ffffff",maxCanvasSize:8192,title:Ee})}if(!we)continue;const Be=`${fe}.png`;Ne.file(Be,we)}const Ue=await te.generateAsync({type:"blob",compression:"DEFLATE"});_je(Ue,`monthly_report_${u}_charts.zip`),K.success(n("dashboard.monthlyReport.exportSuccess")||n("common.exportSuccess"))}catch{K.error(n("dashboard.monthlyReport.exportFailed")||n("common.exportFailed"))}finally{b(!1)}},[D,u,y,Q,E,n]);return q?r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsx("div",{className:"card",children:r.jsx("div",{className:"card-body",children:r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:n("dashboard.monthlyReport.title")}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:n("dashboard.monthlyReport.subtitle")})]}),r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end gap-3",children:[r.jsxs("div",{className:"inline-flex p-1 rounded-2xl bg-gray-100/80 dark:bg-gray-800 border border-gray-200/80 dark:border-gray-700 shadow-sm w-fit",children:[r.jsx("button",{onClick:()=>w(!1),className:`px-3 py-2 rounded-xl text-sm font-semibold transition ${_?"text-gray-600 dark:text-gray-300 hover:bg-white/60 dark:hover:bg-gray-900/40 hover:text-sgtm-orange-dark dark:hover:text-sgtm-orange-light":"bg-sgtm-orange text-white shadow"}`,children:n("dashboard.monthlyReport.useMonth")}),r.jsx("button",{onClick:()=>w(!0),className:`px-3 py-2 rounded-xl text-sm font-semibold transition ${_?"bg-sgtm-orange text-white shadow":"text-gray-600 dark:text-gray-300 hover:bg-white/60 dark:hover:bg-gray-900/40 hover:text-sgtm-orange-dark dark:hover:text-sgtm-orange-light"}`,children:n("dashboard.monthlyReport.useWeekRange")})]}),r.jsx("div",{className:"flex-1",children:_?r.jsx(bje,{weekStart:k,weekEnd:P,onChangeStart:N,onChangeEnd:A,labelStart:n("dashboard.monthlyReport.weekStart"),labelEnd:n("dashboard.monthlyReport.weekEnd")}):r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:n("dashboard.monthlyReport.month")}),r.jsx(dp,{value:u,onChange:m,className:"w-full"})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[W===""?r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:n("dashboard.monthlyReport.pole")||n("common.pole")||"Pole"}),r.jsxs("select",{value:M,onChange:ee=>R(ee.target.value),className:"w-full px-3 py-2 rounded-xl border border-gray-200/80 dark:border-gray-700 bg-white/80 dark:bg-gray-900 text-gray-900 dark:text-gray-100 text-sm shadow-sm hover:bg-white dark:hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500",children:[r.jsx("option",{value:"",children:n("common.allPoles")||n("common.all")||"All"}),I.map(ee=>r.jsx("option",{value:String(ee),children:String(ee)},String(ee)))]})]}):null,r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:n("dashboard.monthlyReport.filterProject")}),r.jsxs("select",{value:p,onChange:ee=>g(ee.target.value),className:"w-full max-w-full px-3 py-2 rounded-xl border border-gray-200/80 dark:border-gray-700 bg-white/80 dark:bg-gray-900 text-gray-900 dark:text-gray-100 text-sm shadow-sm hover:bg-white dark:hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500",children:[r.jsx("option",{value:"",children:n("common.allProjects")}),ke.map(ee=>r.jsxs("option",{value:String(ee.id),children:[ee.name," (",ee.code,")"]},String(ee.id)))]})]}),r.jsx("div",{className:"md:justify-self-end",children:r.jsxs("button",{onClick:ne,disabled:v||x,className:"inline-flex items-center justify-center gap-2 px-4 py-2 rounded-xl border border-gray-200/80 dark:border-gray-700 bg-white/80 dark:bg-gray-900 text-gray-700 dark:text-gray-200 hover:bg-white dark:hover:bg-gray-900 text-sm font-semibold whitespace-nowrap shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 w-full md:w-auto",children:[v?r.jsx(Re,{className:"w-4 h-4 animate-spin"}):r.jsx(jr,{className:"w-4 h-4"}),n("dashboard.monthlyReport.exportZip")]})})]})]})]})})}),x&&r.jsx("div",{className:"card",children:r.jsx("div",{className:"card-body",children:r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[r.jsx(Re,{className:"w-4 h-4 animate-spin"}),n("common.loading")]})})}),!x&&(!y||I.length===0)&&r.jsx("div",{className:"card",children:r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:n("common.noData")})})}),!x&&y&&D.length>0&&r.jsxs("div",{className:`grid grid-cols-1 ${W?"":"lg:grid-cols-2"} gap-6`,children:[r.jsxs("div",{className:"card overflow-visible",ref:ee=>{O.current.A_veille_reglementaire=ee},children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:Q("veille")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-72",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Rr,{data:ae,margin:{top:35,right:18,left:8,bottom:70},children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:xe.stroke,opacity:xe.opacity}),r.jsx(ct,{dataKey:"pole",angle:L,textAnchor:H,height:X,...U}),r.jsx(rt,{domain:[0,100],...U}),r.jsx(tt,{...je,content:re(({payload:ee,label:ye})=>{const te=String(ye||""),Ne=E?.veille?.by_pole_projects?.[te];return r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:je.labelStyle,children:[n("dashboard.monthlyReport.veilleTooltipTitle")," - ",te]}),r.jsxs("div",{className:"text-xs text-slate-200 mt-1",children:["SST: ",cm(Fr(ee,"score_sst"))]}),r.jsxs("div",{className:"text-xs text-slate-200",children:["ENV: ",cm(Fr(ee,"score_environment"))]}),r.jsx("div",{className:"text-[11px] text-slate-300 mt-2",children:"SST"}),r.jsx("div",{className:"mt-2",children:J(te,Ne,Ce=>Ce?.score_sst)}),r.jsx("div",{className:"text-[11px] text-slate-300 mt-2",children:"ENV"}),r.jsx("div",{className:"mt-2",children:J(te,Ne,Ce=>Ce?.score_environment)})]})},{side:"right",containerKey:"A_veille_reglementaire"})}),r.jsx(pt,{dataKey:"score_sst",name:"Veille SST %",fill:Tt.orange,radius:[6,6,0,0],children:r.jsx(Ht,{dataKey:"score_sst",position:"top",fill:Br.label,fontSize:10,fontWeight:600,formatter:ee=>`${Ye(ee).toFixed(0)}%`})}),r.jsx(pt,{dataKey:"score_environment",name:"Veille Environnement %",fill:Tt.darkGray,radius:[6,6,0,0],children:r.jsx(Ht,{dataKey:"score_environment",position:"top",fill:Br.label,fontSize:10,fontWeight:600,formatter:ee=>`${Ye(ee).toFixed(0)}%`})}),r.jsx(pa,{component:$n([{type:"box",color:Tt.orange,label:"Veille SST %"},{type:"box",color:Tt.darkGray,label:"Veille Environnement %"}],{textColor:F})})]})})})})]}),r.jsxs("div",{className:"card overflow-visible",ref:ee=>{O.current.B_deviations_closure=ee},children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-sm leading-snug whitespace-normal break-words pr-2 print:pr-4 max-w-[95%] print:max-w-[92%] text-gray-900 dark:text-gray-100",children:Q("sor")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-72",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(ci,{data:ue,margin:{top:35,right:22,left:8,bottom:70},children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:xe.stroke,opacity:xe.opacity}),r.jsx(ct,{dataKey:"pole",angle:L,textAnchor:H,height:X,...U}),r.jsx(rt,{yAxisId:"left",allowDecimals:!1,...U}),r.jsx(rt,{yAxisId:"right",orientation:"right",domain:[0,100],...U}),r.jsx(tt,{...je,content:re(({payload:ee,label:ye})=>{const te=String(ye||""),Ne=E?.sor?.by_pole_projects?.[te],Ce=Fr(ee,"total"),Ue=Fr(ee,"closurePct");return r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:je.labelStyle,children:[n("dashboard.monthlyReport.deviationTooltipTitle")," - ",te]}),r.jsxs("div",{className:"text-xs text-slate-200 mt-1",children:[n("dashboard.monthlyReport.totalDeviations"),": ",Ta(Ce)]}),r.jsxs("div",{className:"text-xs text-slate-200",children:[n("dashboard.monthlyReport.closureRate"),": ",cm(Ue)]}),r.jsx("div",{className:"mt-2",children:J(te,Ne,fe=>fe?.total)})]})},{side:"left",containerKey:"B_deviations_closure"})}),r.jsx(pt,{yAxisId:"left",dataKey:"total",name:n("dashboard.monthlyReport.totalDeviations"),fill:Tt.orange,radius:[6,6,0,0]}),r.jsx(Kt,{yAxisId:"right",type:"monotone",dataKey:"closurePct",name:n("dashboard.monthlyReport.closureRate"),stroke:c,strokeWidth:2,dot:{r:3,fill:c},children:r.jsx(Ht,{dataKey:"closurePct",position:"top",offset:12,fill:c,fontSize:9,fontWeight:600,formatter:ee=>`${Ye(ee).toFixed(0)}%`})}),r.jsx(pa,{component:dm({barKey:"total",lineKey:"closurePct",barAxisId:"left",lineAxisId:"right",formatter:ee=>Ta(ee)})}),r.jsx(pa,{component:$n([{type:"box",color:Tt.orange,label:n("dashboard.monthlyReport.totalDeviations")},{type:"line",color:c,label:n("dashboard.monthlyReport.closureRate")}],{textColor:F})})]})})})})]}),r.jsxs("div",{className:"card overflow-visible",ref:ee=>{O.current.C_closure_duration=ee},children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:Q("closure_duration")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-72",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Rr,{data:me,margin:{top:35,right:18,left:8,bottom:70},children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:xe.stroke,opacity:xe.opacity}),r.jsx(ct,{dataKey:"pole",angle:L,textAnchor:H,height:X,...U}),r.jsx(rt,{...U}),r.jsx(tt,{...je,content:re(({payload:ee,label:ye})=>{const te=String(ye||""),Ne=Fr(ee,"avgHours"),Ce=E?.closure_duration?.by_pole_projects?.[te],Ue=fe=>{const Te=fe?.avg_hours??fe?.avgHours??fe?.avg_hours_count??fe?.hours??fe?.value;return Ye(Te)};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:je.labelStyle,children:[Q("closure_duration")," - ",te]}),r.jsxs("div",{className:"text-xs text-slate-200 mt-1",children:[n("dashboard.monthlyReport.avgHours"),": ",Ye(Ne).toFixed(2)," ",n("common.hourShort")]}),Array.isArray(Ce)?r.jsx("div",{className:"mt-2",children:J(te,Ce,Ue,{maxRows:8})}):null]})},{side:"right",estimatedHeight:180,containerKey:"C_closure_duration"})}),r.jsx(pt,{dataKey:"avgHours",name:n("dashboard.monthlyReport.avgHours"),fill:Tt.orange,radius:[6,6,0,0],children:r.jsx(Ht,{dataKey:"avgHours",position:"top",fill:Br.label,fontSize:10,fontWeight:600,formatter:ee=>Ye(ee).toFixed(1)})}),r.jsx(pa,{component:$n([{type:"box",color:Tt.orange,label:n("dashboard.monthlyReport.avgHours")}],{textColor:F})})]})})})})]}),r.jsxs("div",{className:"card overflow-visible",ref:ee=>{O.current.D_trainings=ee},children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:Q("trainings")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-72",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(ci,{data:se,margin:{top:35,right:22,left:8,bottom:70},children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:xe.stroke,opacity:xe.opacity}),r.jsx(ct,{dataKey:"pole",angle:L,textAnchor:H,height:X,...U}),r.jsx(rt,{yAxisId:"left",allowDecimals:!1,...U}),r.jsx(rt,{yAxisId:"right",orientation:"right",...U}),r.jsx(tt,{...je,content:re(({payload:ee,label:ye})=>{const te=String(ye||""),Ne=E?.trainings?.by_pole_projects?.[te],Ce=Fr(ee,"count"),Ue=Fr(ee,"hours");return r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:je.labelStyle,children:[n("dashboard.monthlyReport.trainingsTooltipTitle")," - ",te]}),r.jsxs("div",{className:"text-xs text-slate-200 mt-1",children:[n("dashboard.monthlyReport.trainingsCount"),": ",Ta(Ce)]}),r.jsxs("div",{className:"text-xs text-slate-200",children:[n("dashboard.monthlyReport.hours"),": ",Rh(Ue)]}),r.jsx("div",{className:"mt-2",children:J(te,Ne,fe=>fe?.count)}),r.jsx("div",{className:"mt-2",children:J(te,Ne,fe=>fe?.hours)})]})},{side:"left",containerKey:"D_trainings"})}),r.jsx(pt,{yAxisId:"left",dataKey:"count",name:n("dashboard.monthlyReport.trainingsCount"),fill:Tt.orange,radius:[6,6,0,0]}),r.jsx(Kt,{yAxisId:"right",type:"monotone",dataKey:"hours",name:n("dashboard.monthlyReport.hours"),stroke:c,strokeWidth:2,dot:{r:3,fill:c},children:r.jsx(Ht,{dataKey:"hours",position:"top",offset:12,fill:c,fontSize:9,fontWeight:600,formatter:ee=>Ye(ee).toFixed(0)})}),r.jsx(pa,{component:dm({barKey:"count",lineKey:"hours",barAxisId:"left",lineAxisId:"right",formatter:ee=>Ta(ee)})}),r.jsx(pa,{component:$n([{type:"box",color:Tt.orange,label:n("dashboard.monthlyReport.trainingsCount")},{type:"line",color:c,label:n("dashboard.monthlyReport.hours")}],{textColor:F})})]})})})})]}),r.jsxs("div",{className:"card overflow-visible",ref:ee=>{O.current.E_awareness_sessions=ee},children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-sm leading-snug whitespace-normal break-words pr-2 print:pr-4 max-w-[95%] print:max-w-[92%] text-gray-900 dark:text-gray-100",children:Q("awareness")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-72",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(ci,{data:he,margin:{top:35,right:22,left:8,bottom:70},children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:xe.stroke,opacity:xe.opacity}),r.jsx(ct,{dataKey:"pole",angle:L,textAnchor:H,height:X,...U}),r.jsx(rt,{yAxisId:"left",allowDecimals:!1,...U}),r.jsx(rt,{yAxisId:"right",orientation:"right",...U}),r.jsx(tt,{...je,content:re(({payload:ee,label:ye})=>{const te=String(ye||""),Ne=E?.awareness?.by_pole_projects?.[te],Ce=Fr(ee,"count"),Ue=Fr(ee,"hours");return r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:je.labelStyle,children:[n("dashboard.monthlyReport.awarenessTooltipTitle")," - ",te]}),r.jsxs("div",{className:"text-xs text-slate-200 mt-1",children:[n("dashboard.monthlyReport.sessionsCount"),": ",Ta(Ce)]}),r.jsxs("div",{className:"text-xs text-slate-200",children:[n("dashboard.monthlyReport.hours"),": ",Rh(Ue)]}),r.jsx("div",{className:"mt-2",children:J(te,Ne,fe=>fe?.count)}),r.jsx("div",{className:"mt-2",children:J(te,Ne,fe=>fe?.hours)})]})},{side:"right",containerKey:"E_awareness_sessions"})}),r.jsx(pt,{yAxisId:"left",dataKey:"count",name:n("dashboard.monthlyReport.sessionsCount"),fill:Tt.orange,radius:[6,6,0,0]}),r.jsx(Kt,{yAxisId:"right",type:"monotone",dataKey:"hours",name:n("dashboard.monthlyReport.hours"),stroke:c,strokeWidth:2,dot:{r:3,fill:c},children:r.jsx(Ht,{dataKey:"hours",position:"top",offset:12,fill:c,fontSize:9,fontWeight:600,formatter:ee=>Ye(ee).toFixed(0)})}),r.jsx(pa,{component:dm({barKey:"count",lineKey:"hours",barAxisId:"left",lineAxisId:"right",formatter:ee=>Ta(ee)})}),r.jsx(pa,{component:$n([{type:"box",color:Tt.orange,label:n("dashboard.monthlyReport.sessionsCount")},{type:"line",color:c,label:n("dashboard.monthlyReport.hours")}],{textColor:F})})]})})})})]}),r.jsxs("div",{className:"card overflow-visible",ref:ee=>{O.current.G_medical_conformity=ee},children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:Q("medical")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-72",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Rr,{data:T,margin:{top:35,right:18,left:8,bottom:70},children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:xe.stroke,opacity:xe.opacity}),r.jsx(ct,{dataKey:"pole",angle:L,textAnchor:H,height:X,...U}),r.jsx(rt,{domain:[0,100],...U}),r.jsx(tt,{...je,content:re(({payload:ee,label:ye})=>{const te=String(ye||""),Ne=Fr(ee,"pct"),Ce=E?.medical?.by_pole_projects?.[te],Ue=fe=>{const Te=fe?.pct??fe?.percentage??fe?.value??fe?.score;return Ye(Te)};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:je.labelStyle,children:[Q("medical")," - ",te]}),r.jsxs("div",{className:"text-xs text-slate-200 mt-1",children:[n("dashboard.monthlyReport.medicalConformity"),": ",Ye(Ne).toFixed(2),"%"]}),Array.isArray(Ce)?r.jsx("div",{className:"mt-2",children:J(te,Ce,Ue,{maxRows:8})}):null]})},{side:"left",estimatedHeight:180,containerKey:"G_medical_conformity"})}),r.jsx(pt,{dataKey:"pct",name:n("dashboard.monthlyReport.medicalConformity"),fill:Tt.orange,radius:[6,6,0,0],children:r.jsx(Ht,{dataKey:"pct",position:"top",fill:Br.label,fontSize:10,fontWeight:600,formatter:ee=>`${Ye(ee).toFixed(0)}%`})}),r.jsx(pa,{component:$n([{type:"box",color:Tt.orange,label:n("dashboard.monthlyReport.medicalConformity")}],{textColor:F})})]})})})})]}),r.jsxs("div",{className:"card lg:col-span-2",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:Q("subcontractors")})}),r.jsxs("div",{className:"card-body",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:n("dashboard.monthlyReport.subcontractorHelp")}),r.jsx("div",{className:"overflow-auto",children:r.jsxs("table",{className:"min-w-[900px] w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-gray-500 dark:text-gray-400",children:[r.jsx("th",{className:"py-2 pr-4",children:n("dashboard.monthlyReport.pole")}),r.jsx("th",{className:"py-2 pr-4",children:n("dashboard.monthlyReport.contractor")}),r.jsx("th",{className:"py-2 pr-4",children:n("dashboard.monthlyReport.project")}),r.jsx("th",{className:"py-2 pr-4",children:n("dashboard.monthlyReport.uploadedDocs")}),r.jsx("th",{className:"py-2 pr-4",children:n("dashboard.monthlyReport.completion")})]})}),r.jsx("tbody",{children:D.flatMap(ee=>{const ye=E?.subcontractors?.by_pole?.[ee]||[];return!Array.isArray(ye)||ye.length===0?[r.jsxs("tr",{className:"border-t border-gray-100 dark:border-gray-800",children:[r.jsx("td",{className:"py-2 pr-4 font-medium text-gray-800 dark:text-gray-200",children:ee}),r.jsx("td",{colSpan:4,className:"py-2 pr-4 text-gray-500 dark:text-gray-400",children:n("common.noData")})]},`empty-${ee}`)]:ye.map((te,Ne)=>r.jsxs("tr",{className:"border-t border-gray-100 dark:border-gray-800",children:[Ne===0?r.jsx("td",{rowSpan:ye.length,className:"py-2 pr-4 font-medium text-gray-800 dark:text-gray-200 align-top",children:ee}):null,r.jsx("td",{className:"py-2 pr-4 text-gray-700 dark:text-gray-300",children:te.contractor_name}),r.jsx("td",{className:"py-2 pr-4 text-gray-700 dark:text-gray-300",children:te.project_name}),r.jsxs("td",{className:"py-2 pr-4 tabular-nums",children:[Ye(te.uploaded_docs_count),"/",Ye(te.required_docs_count)]}),r.jsxs("td",{className:"py-2 pr-4 tabular-nums font-semibold",children:[Ye(te.completion_pct).toFixed(1),"%"]})]},`${ee}-${te.subcontractor_opening_id}`))})})]})})]})]}),r.jsxs("div",{className:"card overflow-visible",ref:ee=>{O.current.H_deviations_closure_subcontractors=ee},children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-sm leading-snug whitespace-normal break-words pr-2 print:pr-4 max-w-[95%] print:max-w-[92%] text-gray-900 dark:text-gray-100",children:Q("sor_subcontractors")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-72",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(ci,{data:Z,margin:{top:35,right:22,left:8,bottom:70},children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:xe.stroke,opacity:xe.opacity}),r.jsx(ct,{dataKey:"pole",angle:L,textAnchor:H,height:X,...U}),r.jsx(rt,{yAxisId:"left",allowDecimals:!1,...U}),r.jsx(rt,{yAxisId:"right",orientation:"right",domain:[0,100],...U}),r.jsx(tt,{...je,content:re(({payload:ee,label:ye})=>{const te=String(ye||""),Ne=E?.sor_subcontractors?.by_pole_projects?.[te],Ce=Fr(ee,"total"),Ue=Fr(ee,"closurePct");return r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:je.labelStyle,children:[n("dashboard.monthlyReport.deviationTooltipTitle")," - ",te]}),r.jsxs("div",{className:"text-xs text-slate-200 mt-1",children:[n("dashboard.monthlyReport.totalDeviations"),": ",Ta(Ce)]}),r.jsxs("div",{className:"text-xs text-slate-200",children:[n("dashboard.monthlyReport.closureRate"),": ",cm(Ue)]}),r.jsx("div",{className:"mt-2",children:J(te,Ne,fe=>fe?.total)})]})},{side:"right",containerKey:"H_deviations_closure_subcontractors"})}),r.jsx(pt,{yAxisId:"left",dataKey:"total",name:n("dashboard.monthlyReport.totalDeviations"),fill:Tt.orange,radius:[6,6,0,0]}),r.jsx(Kt,{yAxisId:"right",type:"monotone",dataKey:"closurePct",name:n("dashboard.monthlyReport.closureRate"),stroke:c,strokeWidth:2,dot:{r:3,fill:c},children:r.jsx(Ht,{dataKey:"closurePct",position:"top",offset:12,fill:c,fontSize:9,fontWeight:600,formatter:ee=>`${Ye(ee).toFixed(0)}%`})}),r.jsx(pa,{component:dm({barKey:"total",lineKey:"closurePct",barAxisId:"left",lineAxisId:"right",formatter:ee=>Ta(ee)})}),r.jsx(pa,{component:$n([{type:"box",color:Tt.orange,label:n("dashboard.monthlyReport.totalDeviations")},{type:"line",color:c,label:n("dashboard.monthlyReport.closureRate")}],{textColor:F})})]})})})})]}),r.jsxs("div",{className:"card overflow-visible",ref:ee=>{O.current.I_closure_duration_subcontractors=ee},children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:Q("closure_duration_subcontractors")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-72",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Rr,{data:ge,margin:{top:35,right:18,left:8,bottom:70},children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:xe.stroke,opacity:xe.opacity}),r.jsx(ct,{dataKey:"pole",angle:L,textAnchor:H,height:X,...U}),r.jsx(rt,{...U}),r.jsx(tt,{...je,content:re(({payload:ee,label:ye})=>{const te=String(ye||""),Ne=Fr(ee,"avgHours"),Ce=E?.closure_duration_subcontractors?.by_pole_projects?.[te],Ue=fe=>{const Te=fe?.avg_hours??fe?.avgHours??fe?.hours??fe?.value;return Ye(Te)};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:je.labelStyle,children:[Q("closure_duration_subcontractors")," - ",te]}),r.jsxs("div",{className:"text-xs text-slate-200 mt-1",children:[n("dashboard.monthlyReport.avgHours"),": ",Ye(Ne).toFixed(2)," ",n("common.hourShort")]}),Array.isArray(Ce)?r.jsx("div",{className:"mt-2",children:J(te,Ce,Ue,{maxRows:8})}):null]})},{side:"left",estimatedHeight:180,containerKey:"I_closure_duration_subcontractors"})}),r.jsx(pt,{dataKey:"avgHours",name:n("dashboard.monthlyReport.avgHours"),fill:Tt.orange,radius:[6,6,0,0],children:r.jsx(Ht,{dataKey:"avgHours",position:"top",fill:Br.label,fontSize:10,fontWeight:600,formatter:ee=>Ye(ee).toFixed(1)})}),r.jsx(pa,{component:$n([{type:"box",color:Tt.orange,label:n("dashboard.monthlyReport.avgHours")}],{textColor:F})})]})})})})]}),r.jsxs("div",{className:"card overflow-visible",ref:ee=>{O.current.J_tf_tg=ee},children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:Q("tf_tg")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-72",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Rr,{data:oe,margin:{top:35,right:18,left:8,bottom:70},children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:xe.stroke,opacity:xe.opacity}),r.jsx(ct,{dataKey:"pole",angle:L,textAnchor:H,height:X,...U}),r.jsx(rt,{...U}),r.jsx(tt,{...je,content:re(({payload:ee,label:ye})=>{const te=String(ye||""),Ne=E?.tf_tg?.by_pole_projects?.[te],Ce=Fr(ee,"tf"),Ue=Fr(ee,"tg");return r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:je.labelStyle,children:[n("dashboard.monthlyReport.tfTgTooltipTitle")," - ",te]}),r.jsxs("div",{className:"text-xs text-slate-200 mt-1",children:[n("dashboard.monthlyReport.tf"),": ",Rh(Ce)]}),r.jsxs("div",{className:"text-xs text-slate-200",children:[n("dashboard.monthlyReport.tg"),": ",Rh(Ue)]}),r.jsx("div",{className:"mt-2",children:J(te,Ne,fe=>fe?.tf,{maxRows:8})})]})},{side:"right",containerKey:"J_tf_tg"})}),r.jsx(pt,{dataKey:"tf",name:n("dashboard.monthlyReport.tf"),fill:Tt.orange,radius:[6,6,0,0],children:r.jsx(Ht,{dataKey:"tf",content:RE({formatter:ee=>Ye(ee).toFixed(2),textColor:"#111827"})})}),r.jsx(pt,{dataKey:"tg",name:n("dashboard.monthlyReport.tg"),fill:Tt.deepOrange,radius:[6,6,0,0],children:r.jsx(Ht,{dataKey:"tg",content:RE({formatter:ee=>Ye(ee).toFixed(2),textColor:"#111827"})})}),r.jsx(pa,{component:$n([{type:"box",color:Tt.orange,label:n("dashboard.monthlyReport.tf")},{type:"box",color:Tt.deepOrange,label:n("dashboard.monthlyReport.tg")}],{textColor:F})})]})})})})]}),r.jsxs("div",{className:"card overflow-visible",ref:ee=>{O.current.K_accidents_incidents=ee},children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:Q("accidents_incidents")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-72",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Rr,{data:G,margin:{top:35,right:18,left:8,bottom:70},children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:xe.stroke,opacity:xe.opacity}),r.jsx(ct,{dataKey:"pole",angle:L,textAnchor:H,height:X,...U}),r.jsx(rt,{allowDecimals:!1,...U}),r.jsx(tt,{...je,content:re(({payload:ee,label:ye})=>{const te=String(ye||""),Ne=E?.accidents_incidents?.by_pole_projects?.[te],Ce=Fr(ee,"accidents"),Ue=Fr(ee,"incidents");return r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:je.labelStyle,children:[n("dashboard.monthlyReport.accidentsIncidentsTooltipTitle")," - ",te]}),r.jsxs("div",{className:"text-xs text-slate-200 mt-1",children:[n("dashboard.monthlyReport.accidents"),": ",Ta(Ce)]}),r.jsxs("div",{className:"text-xs text-slate-200",children:[n("dashboard.monthlyReport.incidents"),": ",Ta(Ue)]}),r.jsx("div",{className:"mt-2",children:J(te,Ne,fe=>fe?.accidents+fe?.incidents,{maxRows:8})})]})},{side:"left",containerKey:"K_accidents_incidents"})}),r.jsx(pt,{dataKey:"accidents",name:n("dashboard.monthlyReport.accidents"),fill:Tt.statusBad,radius:[6,6,0,0],children:r.jsx(Ht,{dataKey:"accidents",position:"top",fill:Br.label,fontSize:10,fontWeight:600})}),r.jsx(pt,{dataKey:"incidents",name:n("dashboard.monthlyReport.incidents"),fill:Tt.orange,radius:[6,6,0,0],children:r.jsx(Ht,{dataKey:"incidents",position:"top",fill:Br.label,fontSize:10,fontWeight:600})}),r.jsx(pa,{component:$n([{type:"box",color:Tt.statusBad,label:n("dashboard.monthlyReport.accidents")},{type:"box",color:Tt.orange,label:n("dashboard.monthlyReport.incidents")}],{textColor:F})})]})})})})]}),r.jsxs("div",{className:"card overflow-visible",ref:ee=>{O.current.L_ppe_consumption=ee},children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:Q("ppe_consumption")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-72",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Rr,{data:V.rows,margin:{top:35,right:18,left:8,bottom:70},children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:xe.stroke,opacity:xe.opacity}),r.jsx(ct,{dataKey:"pole",angle:L,textAnchor:H,height:X,...U}),r.jsx(rt,{allowDecimals:!1,...U}),r.jsx(tt,{...je,content:re(({payload:ee,label:ye})=>{const te=String(ye||""),Ne=E?.ppe_consumption?.by_pole_projects?.[te];return r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:je.labelStyle,children:[n("dashboard.monthlyReport.ppeTooltipTitle")," - ",te]}),r.jsx("div",{className:"mt-2 space-y-1",children:ee.filter(Ce=>Ye(Ce.value)>0).map(Ce=>r.jsxs("div",{className:"flex items-center justify-between gap-3 text-xs text-slate-200",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"w-2.5 h-2.5 rounded",style:{backgroundColor:Ce.color}}),Ce.name]}),r.jsx("span",{className:"font-semibold",children:Ta(Ce.value)})]},Ce.dataKey))}),Array.isArray(Ne)&&Ne.length>0&&r.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-600",children:[r.jsx("div",{className:"text-[11px] text-slate-400 mb-1",children:n("dashboard.monthlyReport.project")}),Ne.slice(0,6).map(Ce=>r.jsx("div",{className:"text-xs text-slate-300",children:Ce.project_name},Ce.project_id)),Ne.length>6&&r.jsxs("div",{className:"text-xs text-slate-400",children:["... +",Ne.length-6]})]})]})},{side:"right",containerKey:"L_ppe_consumption"})}),V.itemIds.map((ee,ye)=>{const te=[Tt.orange,Tt.deepOrange,Tt.statusGood,Tt.gray,Tt.darkGray,"#6366F1","#EC4899","#14B8A6"];return r.jsx(pt,{dataKey:`item_${ee}`,name:V.itemNames[ee]||`Item ${ee}`,stackId:"ppe",fill:te[ye%te.length]},ee)})]})})})})]}),r.jsxs("div",{className:"card overflow-visible",ref:ee=>{O.current.M_machinery=ee},children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:Q("machinery")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-72",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(ci,{data:Y,margin:{top:35,right:22,left:8,bottom:70},children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:xe.stroke,opacity:xe.opacity}),r.jsx(ct,{dataKey:"pole",angle:L,textAnchor:H,height:X,...U}),r.jsx(rt,{yAxisId:"left",allowDecimals:!1,...U}),r.jsx(rt,{yAxisId:"right",orientation:"right",domain:[0,100],...U}),r.jsx(tt,{...je,content:re(({payload:ee,label:ye})=>{const te=String(ye||""),Ne=E?.machinery?.by_pole_projects?.[te],Ce=Fr(ee,"count"),Ue=Fr(ee,"avgCompletion");return r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:je.labelStyle,children:[n("dashboard.monthlyReport.machineryTooltipTitle")," - ",te]}),r.jsxs("div",{className:"text-xs text-slate-200 mt-1",children:[n("dashboard.monthlyReport.machineCount"),": ",Ta(Ce)]}),r.jsxs("div",{className:"text-xs text-slate-200",children:[n("dashboard.monthlyReport.avgCompletion"),": ",cm(Ue)]}),r.jsx("div",{className:"mt-2",children:J(te,Ne,fe=>fe?.machine_count,{maxRows:8})})]})},{side:"left",containerKey:"M_machinery"})}),r.jsx(pt,{yAxisId:"left",dataKey:"count",name:n("dashboard.monthlyReport.machineCount"),fill:Tt.orange,radius:[6,6,0,0]}),r.jsx(Kt,{yAxisId:"right",type:"monotone",dataKey:"avgCompletion",name:n("dashboard.monthlyReport.avgCompletion"),stroke:c,strokeWidth:2,dot:{r:3,fill:c},children:r.jsx(Ht,{dataKey:"avgCompletion",position:"top",offset:12,fill:c,fontSize:9,fontWeight:600,formatter:ee=>`${Ye(ee).toFixed(0)}%`})}),r.jsx(pa,{component:dm({barKey:"count",lineKey:"avgCompletion",barAxisId:"left",lineAxisId:"right",formatter:ee=>Ta(ee)})}),r.jsx(pa,{component:$n([{type:"box",color:Tt.orange,label:n("dashboard.monthlyReport.machineCount")},{type:"line",color:c,label:n("dashboard.monthlyReport.avgCompletion")}],{textColor:F})})]})})})})]}),r.jsxs("div",{className:"card overflow-visible",ref:ee=>{O.current.N_inspections=ee},children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:Q("inspections")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-72",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Rr,{data:ce,margin:{top:35,right:22,left:8,bottom:70},children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:xe.stroke,opacity:xe.opacity}),r.jsx(ct,{dataKey:"pole",angle:L,textAnchor:H,height:X,...U}),r.jsx(rt,{allowDecimals:!1,...U}),r.jsx(tt,{...je,content:re(({payload:ee,label:ye})=>{const te=String(ye||""),Ne=E?.inspections?.by_pole_projects?.[te],Ce=Fr(ee,"count");return r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:je.labelStyle,children:[n("dashboard.monthlyReport.inspectionsTooltipTitle")," - ",te]}),r.jsxs("div",{className:"text-xs text-slate-200 mt-1",children:[n("common.total"),": ",Ta(Ce)]}),r.jsx("div",{className:"mt-2",children:J(te,Ne,Ue=>Ue?.count,{maxRows:8})})]})},{side:"right",containerKey:"N_inspections"})}),r.jsx(pt,{dataKey:"count",name:n("common.total"),fill:Tt.orange,radius:[6,6,0,0],children:r.jsx(Ht,{dataKey:"count",position:"top",fill:Br.label,fontSize:11,fontWeight:600})}),r.jsx(pa,{component:$n([{type:"box",color:Tt.orange,label:n("common.total")}],{textColor:F})})]})})})})]})]})]}):r.jsx("div",{className:"card",children:r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:n("dashboard.monthlyReport.adminOnly")})})})}),um={CODE:"code",NAME:"name"};function Wt(e){const t=e?.code?String(e.code).trim():"",a=e?.name?String(e.name).trim():"";return!t&&!a?"":t?a?`${t} - ${a}`:t:a}function Ir(e,t=um.CODE){const a=Array.isArray(e)?[...e]:[],n=t===um.NAME?um.NAME:um.CODE,s=i=>String(i??"").trim().toLowerCase();return a.sort((i,o)=>{const l=s(i?.code),c=s(o?.code),d=s(i?.name),u=s(o?.name);if(n===um.NAME){const p=d.localeCompare(u);return p!==0?p:l.localeCompare(c)}const m=l.localeCompare(c);return m!==0?m:d.localeCompare(u)}),a}const qE=typeof document<"u"?document.body:null,FE={zIndex:9999,pointerEvents:"none"};function Nje(){const e=Oi(),{user:t}=At(),[a,n]=f.useState(null),[s,i]=f.useState(!0),[o,l]=f.useState(null),[c,d]=f.useState(!1),[u,m]=f.useState(null),[p,g]=f.useState(!1),[x,h]=f.useState(Hr().year),[v,b]=f.useState(Hr().year-1),[y,j]=f.useState(null),[_,w]=f.useState("overview"),[k,N]=f.useState(""),[P,A]=f.useState([]),[M,R]=f.useState("all"),[O,q]=f.useState("all"),[S,I]=f.useState("all"),[E,W]=f.useState(null),[B,C]=f.useState("all"),[D,z]=f.useState(null),L=f.useRef(null),X=Tn(),H=f.useCallback(async()=>{try{i(!0);const fe={year:x};k&&(fe.pole=k),M!=="all"&&(fe.project_id=M),O!=="all"&&(fe.week=O);const Te=await mh(Ma.getAdminDashboard,"/dashboard/admin",fe,3e4);n(Te.data.data)}catch{K.error(e("dashboard.loadFailed")||e("errors.failedToLoad"))}finally{i(!1)}},[x,k,M,O]),F=f.useCallback(async()=>{try{g(!0);const fe={year:x};k&&(fe.pole=k),M!=="all"&&(fe.project_id=M),S!=="all"&&(fe.month=S);const Te=await mh(Ma.getEnvironmentalMonthly,"/dashboard/environmental-monthly",fe,3e4);m(Te.data.data)}catch{m(null),K.error(e("dashboard.loadFailed")||e("errors.failedToLoad"))}finally{g(!1)}},[x,k,M,S]),ke=f.useCallback(async()=>{try{const fe=await it.getPoles(),Te=fe.data?.data?.poles||fe.data?.poles||[];A(Array.isArray(Te)?Te:[])}catch{A([])}},[]),ae=f.useCallback(fe=>{const Te=String(fe||"").trim();if(!Te)return e("common.unknown");const Ee={approved:"status.approved",submitted:"status.pending",rejected:"status.rejected",draft:"status.draft",partial:"status.partial",missing:"status.missing",not_submitted:"status.notSubmitted",pending:"status.pending"}[Te];return e(Ee||"common.unknown")},[e]),ue=f.useCallback(async()=>{if(!v){j(null);return}try{const fe=await mh(Ma.getAdminDashboard,"/dashboard/admin",{year:v},3e4);j(fe.data.data??null)}catch(fe){console.error("Failed to load comparison dashboard data",fe),K.error(e("dashboard.compareLoadFailed")??e("errors.failedToLoad"))}},[v]),Z=f.useCallback(async()=>{try{d(!0);const fe={year:x};k&&(fe.pole=k),M!=="all"&&(fe.project_id=M),O!=="all"&&(fe.week=O);const Te=await mh(Ma.getSafetyPerformance,"/dashboard/safety-performance",fe,3e4);l(Te.data.data)}catch{K.error(e("dashboard.loadFailed")||e("errors.failedToLoad"))}finally{d(!1)}},[x,k,M,O]);f.useEffect(()=>{H(),ue()},[H,ue]),f.useEffect(()=>{_==="safety"&&Z()},[_,Z]),f.useEffect(()=>{_==="environmental"&&F()},[_,F]),f.useEffect(()=>{ke()},[ke]),f.useEffect(()=>{b(x-1)},[x]);const me=f.useMemo(()=>{if(O==="all")return"";const fe=Number(O);return!Number.isFinite(fe)||fe<1?"":`${x}-W${String(fe).padStart(2,"0")}`},[O,x]),ge=f.useCallback(fe=>{const Te=String(fe||"");if(!Te){q("all");return}const we=Te.match(/^(\d{4})-W(\d{2})$/);if(!we)return;const Ee=Number(we[1]),Be=Number(we[2]);if(!Number.isFinite(Ee)||!Number.isFinite(Be))return;q(Be);const be=new Date().getFullYear();Ee<=be&&h(Ee)},[q,h]),se=f.useMemo(()=>a?.stats??{},[a?.stats]),he=f.useMemo(()=>a?.kpi_summary??{},[a?.kpi_summary]),T=f.useMemo(()=>a?.weekly_trends??[],[a?.weekly_trends]),oe=f.useMemo(()=>a?.project_performance??[],[a?.project_performance]),G=f.useMemo(()=>a?.weekly_status??[],[a?.weekly_status]),V=f.useMemo(()=>a?.projects??[],[a?.projects]);f.useEffect(()=>{L.current&&(!Array.isArray(G)||G.length===0||requestAnimationFrame(()=>{L.current&&L.current.scrollTo({left:L.current.scrollWidth,behavior:"auto"})}))},[G,x]);const Y=f.useMemo(()=>O==="all"?T:T.filter(fe=>fe.week===O),[T,O]),ce=f.useMemo(()=>{if(M==="all")return oe;const fe=Number(M);return Number.isNaN(fe)?oe:(oe||[]).filter(Te=>Number(Te.id)===fe)},[oe,M]),je=f.useCallback((fe,Te,{higherIsBetter:we})=>{const Ee=Number(fe??0),Be=Number(Te??0);if(Ee===Be)return null;const be=we?Ee>Be:Ee<Be,$e=Be===0?100:Math.abs((Ee-Be)/Be*100),Ve=$e>=10?Math.round($e):Math.round($e*10)/10,_t=Ee>Be?fz:pz,bt=be?"bg-green-50 text-green-700 dark:bg-green-900/30 dark:text-green-300":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-300";return r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[11px] font-semibold ${bt}`,children:[r.jsx(_t,{className:"w-3.5 h-3.5"}),Ve,"%"]})},[]),re=f.useMemo(()=>a?.training_data||{},[a?.training_data]),U=f.useMemo(()=>a?.awareness_data||{},[a?.awareness_data]);f.useMemo(()=>a?.sor_data||{},[a?.sor_data]),f.useMemo(()=>a?.permit_data||{},[a?.permit_data]);const xe=f.useMemo(()=>a?.inspection_data||{},[a?.inspection_data]),J=f.useMemo(()=>{const fe=Array.isArray(V)?V:[];return k?fe.filter(Te=>Te?.pole===k):fe},[V,k]),Q=t?.project_list_preference||"code",ne=f.useMemo(()=>Ir(J,Q),[J,Q]);f.useEffect(()=>{if(M==="all")return;J.some(Te=>String(Te.id)===String(M))||R("all")},[J,M]),f.useEffect(()=>{if(B==="all")return;J.some(Te=>String(Te.id)===String(B))||C("all")},[J,B]);const ee=f.useMemo(()=>{if(O==="all")return re;const fe=Number(O);if(Number.isNaN(fe))return re;const we=(Array.isArray(re?.by_week)?re.by_week:[]).filter($e=>Number($e.week_number)===fe),Ee=we.reduce(($e,Ve)=>$e+Number(Ve?.count??0),0),Be=we.reduce(($e,Ve)=>$e+Number(Ve?.participants??0),0),be=we.reduce(($e,Ve)=>$e+Number(Ve?.hours??0),0);return{...re,total:Ee,total_participants:Be,total_hours:be,by_week:we}},[re,O]),ye=f.useMemo(()=>{if(O==="all")return xe;const fe=Number(O);if(Number.isNaN(fe))return xe;const we=(Array.isArray(xe?.by_week)?xe.by_week:[]).filter(Be=>Number(Be.week_number)===fe),Ee=we.reduce((Be,be)=>Be+Number(be?.count??0),0);return{...xe,stats:{...xe?.stats||{},total:Ee},by_week:we}},[xe,O]),te=f.useMemo(()=>{if(O==="all")return U;const fe=Number(O);if(Number.isNaN(fe))return U;const we=(Array.isArray(U?.by_week)?U.by_week:[]).filter($e=>Number($e.week_number)===fe),Ee=we.reduce(($e,Ve)=>$e+Number(Ve?.count??0),0),Be=we.reduce(($e,Ve)=>$e+Number(Ve?.participants??0),0),be=we.reduce(($e,Ve)=>$e+Number(Ve?.hours??0),0);return{...U,total:Ee,total_participants:Be,total_hours:be,by_week:we}},[U,O]),Ne=f.useMemo(()=>{const fe=he||{},Te={...fe,total_trainings:re?.total??fe.total_trainings??0,employees_trained:re?.total_participants??fe.employees_trained??0,total_training_hours:re?.total_hours??fe.total_training_hours??0,total_inspections:xe?.stats?.total??fe.total_inspections??0};if(O!=="all"){const we=Array.isArray(Y)?Y:[],Ee=be=>we.reduce(($e,Ve)=>$e+Number(Ve?.[be]??0),0),Be=be=>{if(we.length===0)return 0;const $e=we.map(Ve=>Number(Ve?.[be]??0));return $e.reduce((Ve,_t)=>Ve+_t,0)/$e.length};return{...Te,total_accidents:Ee("accidents"),fatal_accidents:Ee("fatal_accidents"),serious_accidents:Ee("serious_accidents"),minor_accidents:Ee("minor_accidents"),total_inspections:ye?.stats?.total??Ee("inspections"),total_near_misses:Ee("near_misses"),total_work_permits:Ee("work_permits"),avg_tf:Be("tf"),avg_tg:Be("tg"),avg_hse_compliance:Be("hse_compliance"),avg_medical_compliance:Be("medical_compliance"),total_water_consumption:Ee("water"),total_electricity_consumption:Ee("electricity"),total_trainings:ee?.total??0,employees_trained:ee?.total_participants??0,total_training_hours:ee?.total_hours??0}}if(M!=="all"){const we=Array.isArray(ce)?ce[0]:null;if(we)return{...Te,total_accidents:Number(we.total_accidents??0),total_trainings:Number(we.total_trainings??0),avg_tf:Number(we.avg_tf??0),avg_tg:Number(we.avg_tg??0)}}return Te},[he,re,xe,ee,ye,Y,O,M,ce]),Ce=f.useCallback(fe=>{if(!fe||!fe.activeLabel)return;const Te=fe.activeLabel,we=Y.find(Ee=>Ee.week_label===Te);if(we){W(we);const Ee=new URLSearchParams;let Be=we.week;if(!Be&&typeof Te=="string"){const $e=parseInt(Te.replace(/\D/g,""),10);Number.isNaN($e)||(Be=$e)}Be&&Ee.set("week",Be);const be=we.year||x;be&&Ee.set("year",be),X(`/admin/kpi?${Ee.toString()}`)}},[Y,x,X]),Ue=f.useMemo(()=>[...Array(6)].map((fe,Te)=>Hr().year+1-Te),[]);return s?r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx(Re,{className:"w-8 h-8 animate-spin text-hse-primary"})}):r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e("dashboard.adminTitle")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:e("dashboard.overview")})]}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 px-3 py-2",children:[r.jsx(Na,{className:"w-4 h-4 text-gray-400"}),r.jsx(So,{value:x,onChange:fe=>{const Te=Number(fe);Number.isFinite(Te)&&h(Te)},className:"min-w-[96px]",minYear:Math.min(...Ue),maxYear:Math.max(...Ue)})]})})]}),r.jsx(ije,{activeTheme:_,onThemeChange:w,user:t}),_!=="monthly_report"&&r.jsx("div",{className:"rounded-lg border border-gray-200 dark:border-gray-700 bg-white/70 dark:bg-gray-900/40 px-3 py-3",children:r.jsxs("div",{className:"flex flex-nowrap items-end gap-3 overflow-x-auto",children:[r.jsxs("div",{className:"space-y-1 shrink-0 w-[200px]",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:e("filters.pole")}),r.jsxs("select",{value:k,onChange:fe=>N(fe.target.value),className:"input w-full",children:[r.jsx("option",{value:"",children:e("common.allPoles")}),P.map(fe=>r.jsx("option",{value:fe,children:fe},fe))]})]}),r.jsxs("div",{className:"space-y-1 min-w-[320px] flex-1",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:e("common.project")}),r.jsxs("select",{value:M,onChange:fe=>R(fe.target.value),className:"input w-full",children:[r.jsx("option",{value:"all",children:e("common.allProjects")}),ne.map(fe=>r.jsx("option",{value:fe.id,children:Wt(fe)},fe.id))]})]}),_!=="ppe"&&_!=="environmental"&&r.jsxs("div",{className:"space-y-1 shrink-0 w-[320px]",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:e("dashboard.weekPrefix")}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ml,{value:me,onChange:ge,placeholder:e("common.all"),className:"w-full"}),r.jsx("button",{type:"button",onClick:()=>q("all"),disabled:O==="all","aria-label":e("common.clear"),className:`shrink-0 rounded-md border border-gray-200 dark:border-gray-700 p-2 transition-colors ${O==="all"?"opacity-40 cursor-not-allowed":"hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:r.jsx(qt,{className:"w-4 h-4 text-gray-600 dark:text-gray-300"})})]})]}),_==="environmental"&&r.jsxs("div",{className:"space-y-1 shrink-0 w-[260px]",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:e("dashboard.monthlyReport.month")}),r.jsxs("select",{value:S,onChange:fe=>I(fe.target.value),className:"input w-full",children:[r.jsx("option",{value:"all",children:e("common.all")}),r.jsx("option",{value:"1",children:e("months.january")}),r.jsx("option",{value:"2",children:e("months.february")}),r.jsx("option",{value:"3",children:e("months.march")}),r.jsx("option",{value:"4",children:e("months.april")}),r.jsx("option",{value:"5",children:e("months.may")}),r.jsx("option",{value:"6",children:e("months.june")}),r.jsx("option",{value:"7",children:e("months.july")}),r.jsx("option",{value:"8",children:e("months.august")}),r.jsx("option",{value:"9",children:e("months.september")}),r.jsx("option",{value:"10",children:e("months.october")}),r.jsx("option",{value:"11",children:e("months.november")}),r.jsx("option",{value:"12",children:e("months.december")})]})]})]})}),_==="safety"&&r.jsx(oje,{kpiSummary:Ne,weeklyTrends:Y,projectPerformance:ce,safetyPerformance:o,safetyLoading:c}),_==="training"&&r.jsx(cje,{kpiSummary:Ne,weeklyTrends:Y,projectPerformance:ce,trainingData:ee,awarenessData:te}),_==="compliance"&&r.jsx(uje,{kpiSummary:Ne,weeklyTrends:Y,inspectionData:xe,regulatoryWatch:a?.regulatory_watch}),_==="ppe"&&r.jsx(pje,{year:x,projectId:M,pole:k}),_==="deviations"&&r.jsx(hje,{year:x,projects:V,projectId:M,week:O,pole:k}),_==="environmental"&&r.jsx(fje,{data:u,loading:p}),_==="monthly_report"&&r.jsx(kje,{user:t,focusPole:k}),_==="overview"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(qh,{title:e("dashboard.totalProjects"),value:se.total_projects??0,subtitle:`${se.active_projects??0} ${e("dashboard.activeLabel")}`,icon:hn,color:"blue"}),r.jsx(qh,{title:e("dashboard.totalUsers"),value:se.total_users??0,subtitle:`${se.active_users??0} ${e("dashboard.activeLabel")}`,icon:sa,color:"green"}),r.jsx(qh,{title:e("dashboard.activeMachines"),value:se.active_machines??0,subtitle:e("dashboard.activeMachinesSubtitle"),icon:cf,color:"amber"}),r.jsx(qh,{title:e("dashboard.totalReports"),value:se.total_reports??0,subtitle:e("dashboard.inYear",{year:x}),icon:pr,color:"purple"})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4",children:[r.jsx(mm,{title:e("dashboard.safety.totalAccidents"),value:Ne.total_accidents??0,icon:Qt,color:Ne.total_accidents>0?"red":"green",trend:Ne.fatal_accidents>0?`${Ne.fatal_accidents} ${e("dashboard.safety.fatal")}`:e("dashboard.safety.noFatalities")}),r.jsx(mm,{title:e("dashboard.training.totalTrainings"),value:Ne.total_trainings??0,icon:js,color:"blue",trend:`${Ne.employees_trained??0} ${e("dashboard.training.employeesTrained")}`}),r.jsx(mm,{title:e("dashboard.compliance.totalInspections"),value:Ne.total_inspections??0,icon:Ra,color:"green"}),r.jsx(mm,{title:e("dashboard.avgTf"),value:Number(Ne.avg_tf??0).toFixed(2),icon:T5,color:"amber",trend:e("dashboard.rates.frequencyRate")}),r.jsx(mm,{title:e("dashboard.avgTg"),value:Number(Ne.avg_tg??0).toFixed(2),icon:jo,color:"purple",trend:e("dashboard.rates.severityRate")})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:e("dashboard.weeklyKpiTrends")})}),r.jsxs("div",{className:"card-body",children:[r.jsx("div",{className:"h-80",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Ci,{data:Y,onClick:Ce,children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:opacity-20"}),r.jsx(ct,{dataKey:"week_label",tick:{fontSize:10},interval:"preserveStartEnd"}),r.jsx(rt,{tick:{fontSize:12}}),r.jsx(tt,{labelFormatter:fe=>`${e("dashboard.weekPrefix")} ${String(fe).replace(/^([SW])/,"")}`,allowEscapeViewBox:{x:!0,y:!0},portal:qE,wrapperStyle:FE}),r.jsx(aa,{}),r.jsx(Kt,{type:"monotone",dataKey:"accidents",stroke:"#dc2626",strokeWidth:2,dot:{fill:"#dc2626",r:3},name:e("dashboard.accidents")}),r.jsx(Kt,{type:"monotone",dataKey:"trainings",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",r:3},name:e("dashboard.training.totalTrainings")}),r.jsx(Kt,{type:"monotone",dataKey:"inspections",stroke:"#16a34a",strokeWidth:2,dot:{fill:"#16a34a",r:3},name:e("dashboard.inspections")})]})})}),E&&r.jsxs("div",{className:"mt-4 text-xs text-gray-600 dark:text-gray-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("p",{className:"font-semibold",children:e("dashboard.detailsForWeek",{week:E.week_label})}),r.jsx("button",{type:"button",onClick:()=>X("/admin/kpi"),className:"btn-secondary btn-sm",children:e("dashboard.viewKpiReports")})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:e("dashboard.accidents")}),r.jsx("p",{className:"font-semibold",children:E.accidents??0})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:e("dashboard.training.totalTrainings")}),r.jsx("p",{className:"font-semibold",children:E.trainings??0})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:e("dashboard.inspections")}),r.jsx("p",{className:"font-semibold",children:E.inspections??0})]})]})]})]})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:e("dashboard.tfTgRates")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-80",children:r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(ci,{data:Y,children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:opacity-20"}),r.jsx(ct,{dataKey:"week_label",tick:{fontSize:10},interval:"preserveStartEnd"}),r.jsx(rt,{yAxisId:"left",tick:{fontSize:12},stroke:"#f59e0b",label:{value:e("dashboard.rates.frequencyRate"),angle:-90,position:"insideLeft",style:{fill:"#f59e0b"}}}),r.jsx(rt,{yAxisId:"right",orientation:"right",tick:{fontSize:12},stroke:"#8b5cf6",label:{value:e("dashboard.rates.severityRate"),angle:90,position:"insideRight",style:{fill:"#8b5cf6"}}}),r.jsx(tt,{labelFormatter:fe=>`${e("dashboard.weekPrefix")} ${String(fe).replace(/^([SW])/,"")}`,formatter:(fe,Te)=>[Number(fe).toFixed(4),Te],allowEscapeViewBox:{x:!0,y:!0},portal:qE,wrapperStyle:FE}),r.jsx(aa,{}),r.jsx(pt,{yAxisId:"left",dataKey:"tf",fill:"#f59e0b",name:e("dashboard.rates.frequencyRate"),radius:[4,4,0,0]}),r.jsx(pt,{yAxisId:"right",dataKey:"tg",fill:"#8b5cf6",name:e("dashboard.rates.severityRate"),radius:[4,4,0,0]})]})})})})]})]}),G.filter(fe=>fe.total_projects>0).length>0&&r.jsxs("div",{className:"card mt-6",children:[r.jsxs("div",{className:"card-header flex items-center justify-between",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:e("dashboard.submissionStatus")}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("select",{value:B,onChange:fe=>C(fe.target.value),className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg px-3 py-1.5 text-sm font-medium dark:text-gray-200 focus:ring-2 focus:ring-hse-primary",children:[r.jsx("option",{value:"all",children:e("common.allProjects")}),ne.map(fe=>r.jsx("option",{value:fe.id,children:Wt(fe)},fe.id))]})})]}),r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx("button",{type:"button",onClick:()=>L.current?.scrollBy({left:-300,behavior:"smooth"}),className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 bg-white/90 dark:bg-gray-700/90 hover:bg-white dark:hover:bg-gray-600 shadow-lg rounded-full p-2 border dark:border-gray-600",children:r.jsx(Do,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),r.jsx("button",{type:"button",onClick:()=>L.current?.scrollBy({left:300,behavior:"smooth"}),className:"absolute right-0 top-1/2 -translate-y-1/2 z-10 bg-white/90 dark:bg-gray-700/90 hover:bg-white dark:hover:bg-gray-600 shadow-lg rounded-full p-2 border dark:border-gray-600",children:r.jsx(Io,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),r.jsx("div",{ref:L,className:"flex gap-2 overflow-x-auto scroll-smooth px-10 py-3 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",style:{scrollbarWidth:"thin"},children:(()=>{const fe=Hr(),Te=x<fe.year?52:fe.week;return Array.from({length:Te},(we,Ee)=>Ee+1)})().map(fe=>{const Te=G.find(Ct=>Ct.week===fe),we=Hr(),Ee=x<we.year||x===we.year&&fe<we.week,Be=fe===we.week&&x===we.year;let be="not_submitted";const $e=Te?.projects||[];B==="all"?be=Te?.status||"not_submitted":be=$e.find(Yt=>Yt.project_id===parseInt(B))?.status||"not_submitted";const Ve=Te?.approved_count??0,_t=Te?.submitted_count??0,bt=Te?.draft_count??0,Pt=Te?.total_projects??0;if(Pt<=0)return null;let It="";if(be==="partial"&&Pt>0){const Ct=[];Ve>0&&Ct.push("rgb(34, 197, 94)"),_t>0&&Ct.push("rgb(251, 191, 36)"),bt>0&&Ct.push("rgb(96, 165, 250)"),Pt-Ve-_t-bt>0&&Ct.push("rgb(254, 202, 202)"),It=Ct.length>1?`linear-gradient(135deg, ${Ct.join(", ")})`:""}return r.jsxs("div",{"data-week":fe,className:`relative flex-shrink-0 w-14 p-2 rounded-lg text-center transition-all cursor-pointer ${D===fe?"ring-2 ring-gray-900 ring-offset-2 scale-110":""} ${Be&&D!==fe?"ring-2 ring-hse-primary ring-offset-2":""} ${be==="approved"?"bg-green-500 text-white":be==="partial"?"text-white":be==="submitted"?"bg-amber-400 text-white":be==="draft"?"bg-blue-400 text-white":Ee?"bg-red-100 text-red-600 hover:bg-red-200":"bg-gray-100 text-gray-500"}`,style:be==="partial"&&It?{background:It}:{},onClick:()=>z(D===fe?null:fe),children:[r.jsxs("p",{className:"text-xs font-medium",children:[e("dashboard.weekShortPrefix"),fe]}),B==="all"&&Pt>1?r.jsxs("p",{className:"text-xs font-bold mt-0.5",children:[Ve+_t,"/",Pt]}):r.jsx("p",{className:"text-lg font-bold mt-0.5",children:be==="approved"?"":be==="partial"?"":be==="submitted"?"":be==="draft"?"":Ee?"!":"-"})]},`admin-week-${x}-${fe}`)})})]}),D&&(()=>{const Te=G.find(be=>be.week===D)?.projects||[],we=Hr(),Ee=D===we.week&&x===we.year,Be=x<we.year||x===we.year&&D<we.week;return Te.length===0?null:r.jsxs("div",{className:"mt-3 p-3 bg-gray-900 text-white text-xs rounded-lg shadow-xl",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-gray-700 pb-2 mb-2",children:[r.jsxs("p",{className:"font-semibold",children:[e("dashboard.weekDetailsTitle").replace("{{week}}",D),Ee&&r.jsxs("span",{className:"ml-2 text-hse-primary",children:["(",e("dashboard.currentWeekLabel"),")"]})]}),r.jsx("button",{type:"button",onClick:()=>z(null),className:"text-gray-400 hover:text-white",children:""})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:Te.map(be=>{const Ve=be.status==="not_submitted"&&Be,_t=be.project_name||be.project_code,bt=be.project_name&&be.project_code?`${be.project_name} (${be.project_code})`:be.project_name||be.project_code||"";return r.jsxs("div",{className:"flex items-center justify-between gap-2 bg-gray-800 rounded px-2 py-1.5",children:[r.jsx("span",{className:"truncate font-medium",title:bt,children:_t}),r.jsx("span",{className:`flex-shrink-0 px-1.5 py-0.5 rounded text-[10px] font-medium ${be.status==="approved"?"bg-green-500":be.status==="submitted"?"bg-amber-400":be.status==="draft"?"bg-blue-400":Ve?"bg-red-400":"bg-gray-500"}`,children:be.status==="approved"?e("status.approved"):be.status==="submitted"?e("status.pending"):be.status==="draft"?e("status.draft"):e(Ve?"status.missing":"status.notSubmitted")})]},be.project_id)})})]})})(),r.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 pt-4 mt-2 border-t dark:border-gray-700 text-xs text-gray-600 dark:text-gray-400",children:[r.jsxs("span",{className:"flex items-center gap-1.5",children:[r.jsx("span",{className:"w-3 h-3 rounded bg-green-500"})," ",e("status.approved")]}),r.jsxs("span",{className:"flex items-center gap-1.5",children:[r.jsx("span",{className:"w-3 h-3 rounded bg-gradient-to-br from-green-400 to-amber-400"})," ",e("status.partial")]}),r.jsxs("span",{className:"flex items-center gap-1.5",children:[r.jsx("span",{className:"w-3 h-3 rounded bg-amber-400"})," ",e("status.pending")]}),r.jsxs("span",{className:"flex items-center gap-1.5",children:[r.jsx("span",{className:"w-3 h-3 rounded bg-blue-400"})," ",e("status.draft")]}),r.jsxs("span",{className:"flex items-center gap-1.5",children:[r.jsx("span",{className:"w-3 h-3 rounded bg-red-100 border border-red-200"})," ",e("status.missing")]}),r.jsxs("span",{className:"flex items-center gap-1.5",children:[r.jsx("span",{className:"w-3 h-3 rounded ring-2 ring-hse-primary ring-offset-1"})," ",e("dashboard.currentWeekLabel")]})]})]})]}),y&&r.jsxs("div",{className:"card mt-6",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:e("dashboard.yearOverYearSummary",{year:x,compareYear:v})})}),r.jsxs("div",{className:"card-body grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[r.jsx("span",{children:e("dashboard.safety.totalAccidents")}),je(Ne.total_accidents,y?.kpi_summary?.total_accidents,{higherIsBetter:!1})]}),r.jsxs("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:[Ne.total_accidents??0," ",r.jsxs("span",{className:"text-xs text-gray-400",children:["(",x,")"]})]}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[y?.kpi_summary?.total_accidents??0," (",v,")"]})]}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[r.jsx("span",{children:e("dashboard.training.totalTrainings")}),je(Ne.total_trainings,y?.training_data?.total??y?.kpi_summary?.total_trainings,{higherIsBetter:!0})]}),r.jsxs("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:[Ne.total_trainings??0," ",r.jsxs("span",{className:"text-xs text-gray-400",children:["(",x,")"]})]}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[y?.training_data?.total??y?.kpi_summary?.total_trainings??0," (",v,")"]})]}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[r.jsx("span",{children:e("dashboard.inspections")}),je(Ne.total_inspections,y?.inspection_data?.stats?.total??y?.kpi_summary?.total_inspections,{higherIsBetter:!0})]}),r.jsxs("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:[Ne.total_inspections??0," ",r.jsxs("span",{className:"text-xs text-gray-400",children:["(",x,")"]})]}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[y?.inspection_data?.stats?.total??y?.kpi_summary?.total_inspections??0," (",v,")"]})]}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[r.jsx("span",{children:e("dashboard.tfTgRates")}),je(Number(Ne.avg_tf??0)+Number(Ne.avg_tg??0),Number(y?.kpi_summary?.avg_tf??0)+Number(y?.kpi_summary?.avg_tg??0),{higherIsBetter:!1})]}),r.jsxs("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:[Number(Ne.avg_tf??0).toFixed(2)," / ",Number(Ne.avg_tg??0).toFixed(2),r.jsxs("span",{className:"text-xs text-gray-400",children:[" (",x,")"]})]}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[Number(y?.kpi_summary?.avg_tf??0).toFixed(2)," / ",Number(y?.kpi_summary?.avg_tg??0).toFixed(2)," (",v,")"]})]})]})]}),r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"card-header flex items-center justify-between",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:e("dashboard.projectPerformance")}),r.jsx(xa,{to:"/admin/projects",className:"text-sm text-hse-primary hover:underline",children:e("dashboard.viewAllProjects")})]}),ce.length===0?r.jsx("div",{className:"p-6 text-center text-sm text-gray-500 dark:text-gray-400",children:e("dashboard.noProjectData")}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"space-y-3 p-4 md:hidden",children:ce.slice(0,5).map(fe=>r.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3 bg-white dark:bg-gray-800",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:fe.name}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:fe.code})]}),r.jsxs("div",{className:"text-right text-xs text-gray-600 dark:text-gray-300 space-y-1",children:[r.jsxs("p",{children:[r.jsxs("span",{className:"font-semibold",children:[e("dashboard.reports"),":"]})," ",fe.reports_count]}),r.jsxs("p",{children:[r.jsxs("span",{className:"font-semibold",children:[e("dashboard.training.totalTrainings"),":"]})," ",fe.total_trainings]})]})]}),r.jsxs("div",{className:"mt-3 flex items-center justify-between text-[11px] text-gray-600 dark:text-gray-300",children:[r.jsxs("span",{children:[e("dashboard.accidents"),": ",r.jsx("span",{className:fe.total_accidents>0?"text-red-600 dark:text-red-400 font-semibold":"text-green-600 dark:text-green-400",children:fe.total_accidents})]}),r.jsxs("span",{children:["TF: ",Number(fe.avg_tf).toFixed(2),"  TG: ",Number(fe.avg_tg).toFixed(2)]})]})]},fe.id))}),r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:e("common.project")}),r.jsx("th",{children:e("dashboard.reports")}),r.jsx("th",{children:e("dashboard.accidents")}),r.jsx("th",{children:e("dashboard.training.totalTrainings")}),r.jsx("th",{children:e("dashboard.avgTf")}),r.jsx("th",{children:e("dashboard.avgTg")})]})}),r.jsx("tbody",{children:ce.slice(0,5).map(fe=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium dark:text-gray-100",children:fe.name}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:fe.code})]})}),r.jsx("td",{children:fe.reports_count}),r.jsx("td",{children:r.jsx("span",{className:fe.total_accidents>0?"text-red-600 dark:text-red-400 font-semibold":"text-green-600 dark:text-green-400",children:fe.total_accidents})}),r.jsx("td",{children:fe.total_trainings}),r.jsx("td",{children:Number(fe.avg_tf).toFixed(2)}),r.jsx("td",{children:Number(fe.avg_tg).toFixed(2)})]},fe.id))})]})})]})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:e("dashboard.recentSubmissions")})}),r.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:a?.recent_reports?.filter(fe=>fe.status!=="draft").slice(0,5).map(fe=>r.jsx("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:fe.project?.name||e("common.unknown")}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[fe.report_month,"/",fe.report_year,"  ",e("common.submittedBy"),": ",fe.submitter?.name||e("common.unknown")]})]}),r.jsx("span",{className:`badge ${fe.status==="approved"?"badge-success":fe.status==="submitted"?"badge-warning":fe.status==="rejected"?"badge-danger":"badge-info"}`,children:ae(fe.status)})]})},fe.id))})]})]})]})}const qh=f.memo(function({title:t,value:a,subtitle:n,icon:s,color:i}){const o={blue:"bg-blue-50 text-blue-600",green:"bg-green-50 text-green-600",amber:"bg-amber-50 text-amber-600",purple:"bg-purple-50 text-purple-600",red:"bg-red-50 text-red-600"};return r.jsx("div",{className:"stat-card",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mt-1",children:a}),r.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:n})]}),r.jsx("div",{className:`p-3 rounded-lg ${o[i]}`,children:r.jsx(s,{className:"w-5 h-5"})})]})})}),mm=f.memo(function({title:t,value:a,icon:n,color:s,trend:i}){const o={red:"border-red-200 bg-red-50 dark:border-red-700 dark:bg-red-900/50",green:"border-green-200 bg-green-50 dark:border-green-700 dark:bg-green-900/50",blue:"border-blue-200 bg-blue-50 dark:border-blue-700 dark:bg-blue-900/50",amber:"border-amber-200 bg-amber-50 dark:border-amber-700 dark:bg-amber-900/50",purple:"border-purple-200 bg-purple-50 dark:border-purple-700 dark:bg-purple-900/50"},l={red:"text-red-600 dark:text-red-400",green:"text-green-600 dark:text-green-400",blue:"text-blue-600 dark:text-blue-400",amber:"text-amber-600 dark:text-amber-400",purple:"text-purple-600 dark:text-purple-400"};return r.jsxs("div",{className:`rounded-xl border-2 p-4 ${o[s]}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(n,{className:`w-5 h-5 ${l[s]}`}),r.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:t})]}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:a}),i&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:i})]})}),Sje=Object.freeze(Object.defineProperty({__proto__:null,default:Nje},Symbol.toStringTag,{value:"Module"}));function Aje(){const{t:e}=ut(),{user:t}=At(),[a,n]=f.useState([]),[s,i]=f.useState([]),[o,l]=f.useState(!0),[c,d]=f.useState(""),[u,m]=f.useState(""),[p,g]=f.useState(""),[x,h]=f.useState(""),[v,b]=f.useState([]),[y,j]=f.useState(!1),[_,w]=f.useState(null),[k,N]=f.useState({name:"",email:"",password:"",role:"hse_manager",pole:"",phone:"",project_ids:[]}),[P,A]=f.useState(!1),[M,R]=f.useState({current_page:1,last_page:1}),[O,q]=f.useState(null),[S,I]=f.useState(!1),[E,W]=f.useState(null),[B,C]=f.useState(!1),D=f.useRef(null),z=f.useRef(null),L=t?.project_list_preference??"code",X=f.useMemo(()=>Ir(s,L),[s,L]),H=f.useMemo(()=>dd(k.role),[k.role]),F=re=>{const U=re?.response?.data,xe=[U?.errors,U?.data?.errors,U?.error?.errors];for(const Q of xe)if(Q&&typeof Q=="object"){const ne=Object.keys(Q);if(ne.length>0){const ee=ne[0],ye=Q[ee],te=Array.isArray(ye)?ye[0]:ye;if(typeof te=="string"&&te.trim()!=="")return te}}const J=U?.message??U?.data?.message;return typeof J=="string"&&J.trim()!==""?J:e("users.saveError")},ke=re=>{const U=String(re||"").trim();if(!U)return"";const xe=`users.roles.${U}`,J=e(xe);if(J!==xe)return J;const Q=`roles.${U}`,ne=e(Q);return ne===Q?U:ne},ae=(re,U)=>{const xe=Array.isArray(re.project_ids)?re.project_ids.map(ne=>Number(ne)).filter(ne=>Number.isFinite(ne)):[],J=re.role==="pole_director"||re.role==="regional_hse_manager",Q={...re,name:(re.name??"").trim(),email:(re.email??"").trim(),phone:(re.phone??"").trim()||null,pole:J&&(re.pole??"").trim()||null,project_ids:J?[]:xe};return U&&!Q.password&&delete Q.password,Q};f.useEffect(()=>{se(),he()},[c,u,p,x]),f.useEffect(()=>{(async()=>{try{const U=await it.getPoles(),xe=U.data?.data?.poles??U.data?.poles??[];b(Array.isArray(xe)?xe:[])}catch{b([])}})()},[]),f.useEffect(()=>{const re=U=>{D.current&&!D.current.contains(U.target)&&I(!1)};return document.addEventListener("mousedown",re),()=>document.removeEventListener("mousedown",re)},[]);const ue=re=>{if(!re)return null;const U=/filename\*=UTF-8''([^;]+)|filename="?([^";]+)"?/i.exec(re),xe=decodeURIComponent(U?.[1]??U?.[2]??"");return xe!==""?xe:null},Z=(re,U)=>{const xe=URL.createObjectURL(re),J=document.createElement("a");J.href=xe,J.download=U??"template.xlsx",document.body.appendChild(J),J.click(),J.remove(),setTimeout(()=>URL.revokeObjectURL(xe),5e3)},me=async()=>{try{const re=await ii.downloadTemplate(),U=ue(re.headers?.["content-disposition"])??"SGTM-Users-Template.xlsx";Z(re.data,U)}catch{K.error(e("users.bulk.downloadTemplateFailed"))}},ge=async()=>{if(!E){K.error(e("users.bulk.chooseFile"));return}try{C(!0);const re=new FormData;re.append("file",E);const xe=(await ii.bulkImport(re)).data?.data??{},J=xe.imported??0,Q=xe.updated??0,ne=xe.errors??[],ee=xe.failed_rows_url;if(K.success(e("users.bulk.importSummary",{imported:J,updated:Q})),ne.length>0&&K.error(e("users.bulk.importIssues",{count:ne.length})),ee)try{const te=await(await fetch(ee)).blob();Z(te,"users_failed_rows.xlsx")}catch{}W(null),I(!1),se()}catch(re){K.error(re.response?.data?.message??e("users.bulk.importFailed"))}finally{C(!1)}},se=async(re=1)=>{try{l(!0);const U=await ii.getAll({page:re,search:c,role:u,project_id:p,pole:x,per_page:10});n(U.data.data??[]),R(U.data.meta??{current_page:1,last_page:1})}catch{K.error(e("users.loadError"))}finally{l(!1)}},he=async()=>{try{const re=await it.getAllList({status:"active"});i(re)}catch{console.error("Failed to load projects")}},T=(re=null)=>{re?(w(re),N({name:re.name,email:re.email,password:"",role:re.role,pole:re.pole??"",phone:re.phone??"",project_ids:re.role==="pole_director"||re.role==="regional_hse_manager"?[]:re.projects?.map(U=>U.id)??[]})):(w(null),N({name:"",email:"",password:"",role:"hse_manager",pole:"",phone:"",project_ids:[]})),j(!0)},oe=()=>{j(!1),w(null)},G=async re=>{re.preventDefault();const U=ae(k,!!_);if(U.password&&!Xd(U.password,H).ok){K.error(e("auth.passwordPolicy.invalid"));return}A(!0);try{_?(await ii.update(_.id,U),K.success(e("users.updateSuccess"))):(await ii.create(U),K.success(e("users.createSuccess"))),oe(),se()}catch(xe){K.error(F(xe))}finally{A(!1)}},V=re=>{q(re)},Y=async()=>{if(O)try{await ii.delete(O.id),K.success(e("users.deleteSuccess")),se()}catch(re){K.error(re.response?.data?.message??e("users.deleteError"))}finally{q(null)}},ce=async re=>{try{await ii.toggleStatus(re.id),K.success(re.is_active?e("users.deactivateSuccess"):e("users.activateSuccess")),se()}catch(U){K.error(U.response?.data?.message??e("users.statusError"))}},je=re=>{N(U=>({...U,project_ids:U.project_ids.includes(re)?U.project_ids.filter(xe=>xe!==re):[...U.project_ids,re]}))};return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e("users.title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:e("users.subtitle")})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{ref:D,className:"relative",children:[r.jsxs("button",{type:"button",onClick:()=>I(re=>!re),className:"btn-secondary flex items-center gap-2",children:[r.jsx($a,{className:"w-4 h-4"}),"Massive Add"]}),S&&r.jsx("div",{className:"absolute right-0 mt-2 w-80 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl p-4 z-50",children:r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{type:"button",onClick:me,className:"btn-secondary w-full",children:"Download Template"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("input",{ref:z,type:"file",accept:".xlsx,.xls",onChange:re=>W(re.target.files?.[0]??null),className:"hidden"}),r.jsx("button",{type:"button",onClick:()=>z.current?.click(),className:"w-full rounded-lg border border-dashed border-gray-300 dark:border-gray-600 px-3 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700/50 transition",children:r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Select XLSX file"}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:E?E.name:"Choose the filled template (.xlsx)"})]}),r.jsx("div",{className:"text-xs font-semibold px-2 py-1 rounded-md bg-orange-50 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300",children:"Browse"})]})}),E&&r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-300 truncate",children:["Selected: ",r.jsx("span",{className:"font-semibold",children:E.name})]}),r.jsx("button",{type:"button",onClick:()=>{W(null),z.current&&(z.current.value="")},className:"text-xs font-semibold text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100",children:"Clear"})]})]}),r.jsx("button",{type:"button",onClick:ge,disabled:B||!E,className:"btn-primary w-full",children:B?r.jsxs("span",{className:"flex items-center justify-center gap-2",children:[r.jsx(Re,{className:"w-4 h-4 animate-spin"}),"Uploading..."]}):"Upload"})]})})]}),r.jsxs("button",{onClick:()=>T(),className:"btn-primary flex items-center gap-2",children:[r.jsx(Pn,{className:"w-4 h-4"}),e("users.addUser")]})]})]}),r.jsx("div",{className:"card p-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Yr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:e("users.searchPlaceholder"),value:c,onChange:re=>d(re.target.value),className:"input pl-10"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap sm:items-center gap-2",children:[r.jsx(ki,{className:"hidden sm:block w-4 h-4 text-gray-400"}),r.jsxs(Ze,{value:x,onChange:re=>{h(re.target.value),g("")},className:"w-full sm:w-40",children:[r.jsx("option",{value:"",children:e("common.allPoles")}),v.map(re=>r.jsx("option",{value:re,children:re},re))]}),r.jsxs(Ze,{value:p,onChange:re=>g(re.target.value),className:"w-full sm:w-44",children:[r.jsx("option",{value:"",children:e("common.allProjects")}),(x?X.filter(re=>re?.pole===x):X).map(re=>r.jsx("option",{value:re.id,children:Wt(re)},re.id))]}),r.jsxs(Ze,{value:u,onChange:re=>m(re.target.value),className:"w-full sm:w-40",children:[r.jsx("option",{value:"",children:e("users.allRoles")}),r.jsx("option",{value:"admin",children:e("users.roles.admin")}),r.jsx("option",{value:"consultation",children:e("users.roles.consultation")}),r.jsx("option",{value:"pole_director",children:e("users.roles.pole_director")}),r.jsx("option",{value:"works_director",children:e("users.roles.works_director")}),r.jsx("option",{value:"hse_director",children:e("users.roles.hse_director")}),r.jsx("option",{value:"hr_director",children:e("users.roles.hr_director")}),r.jsx("option",{value:"hse_manager",children:e("users.roles.hse_manager")}),r.jsx("option",{value:"regional_hse_manager",children:e("users.roles.regional_hse_manager")}),r.jsx("option",{value:"responsable",children:e("users.roles.responsable")}),r.jsx("option",{value:"supervisor",children:e("users.roles.supervisor")}),r.jsx("option",{value:"user",children:e("users.roles.user")}),r.jsx("option",{value:"hr",children:e("users.roles.hr")})]})]})]})}),r.jsxs("div",{className:"card",children:[o?r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsx("div",{className:"hidden md:block space-y-2 animate-pulse",children:Array.from({length:6},(re,U)=>r.jsx("div",{className:"h-12 rounded-md bg-gray-100 dark:bg-gray-800"},U))}),r.jsx("div",{className:"md:hidden space-y-3 animate-pulse",children:Array.from({length:4},(re,U)=>r.jsx("div",{className:"h-20 rounded-lg bg-gray-100 dark:bg-gray-800"},U))})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"space-y-3 md:hidden",children:a.map(re=>r.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3 bg-white dark:bg-gray-800",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-hse-primary rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white font-semibold",children:re.name.charAt(0).toUpperCase()})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:re.name}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:re.email})]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-1 text-xs",children:[r.jsx("span",{className:`badge ${re.role==="admin"?"badge-info":"badge-success"}`,children:ke(re.role)}),r.jsx("span",{className:`badge ${re.is_active?"badge-success":"badge-danger"}`,children:re.is_active?e("users.status.active"):e("users.status.inactive")})]})]}),r.jsxs("div",{className:"mt-3 flex items-center justify-between text-[11px] text-gray-600 dark:text-gray-300",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(hn,{className:"w-3 h-3 text-gray-400 dark:text-gray-500"}),r.jsx("span",{children:re.projects?.length??0})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>T(re),className:"p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700",title:e("common.edit"),children:r.jsx(Ol,{className:"w-4 h-4 text-gray-600 dark:text-gray-200"})}),r.jsx("button",{onClick:()=>ce(re),className:"p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700",title:re.is_active?e("users.deactivate"):e("users.activate"),children:re.is_active?r.jsx(nA,{className:"w-4 h-4 text-amber-600"}):r.jsx(aA,{className:"w-4 h-4 text-green-600"})}),r.jsx("button",{onClick:()=>V(re),className:"p-1.5 rounded-md hover:bg-red-50 dark:hover:bg-red-900/30",title:e("common.delete"),children:r.jsx(Nt,{className:"w-4 h-4 text-red-600"})})]})]})]},re.id))}),r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:e("users.table.user")}),r.jsx("th",{children:e("users.table.role")}),r.jsx("th",{children:e("users.table.projects")}),r.jsx("th",{children:e("users.table.status")}),r.jsx("th",{children:e("users.table.actions")})]})}),r.jsx("tbody",{children:a.map(re=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-hse-primary rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white font-semibold",children:re.name.charAt(0).toUpperCase()})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:re.name}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:re.email})]})]})}),r.jsx("td",{children:r.jsx("span",{className:`badge ${re.role==="admin"?"badge-info":"badge-success"}`,children:ke(re.role)})}),r.jsx("td",{children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(hn,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:re.projects?.length??0})]})}),r.jsx("td",{children:r.jsx("span",{className:`badge ${re.is_active?"badge-success":"badge-danger"}`,children:re.is_active?e("users.status.active"):e("users.status.inactive")})}),r.jsx("td",{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>T(re),className:"p-2 hover:bg-gray-100 rounded-lg",title:e("common.edit"),children:r.jsx(Ol,{className:"w-4 h-4 text-gray-600"})}),r.jsx("button",{onClick:()=>ce(re),className:"p-2 hover:bg-gray-100 rounded-lg",title:re.is_active?e("users.deactivate"):e("users.activate"),children:re.is_active?r.jsx(nA,{className:"w-4 h-4 text-amber-600"}):r.jsx(aA,{className:"w-4 h-4 text-green-600"})}),r.jsx("button",{onClick:()=>V(re),className:"p-2 hover:bg-gray-100 rounded-lg",title:e("common.delete"),children:r.jsx(Nt,{className:"w-4 h-4 text-red-600"})})]})})]},re.id))})]})})]}),M.last_page>1&&r.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-100",children:[r.jsxs("p",{className:"text-sm text-gray-500",children:[e("common.page")," ",M.current_page," ",e("common.of")," ",M.last_page]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>se(M.current_page-1),disabled:M.current_page===1,className:"btn-secondary text-sm",children:e("common.previous")}),r.jsx("button",{onClick:()=>se(M.current_page+1),disabled:M.current_page===M.last_page,className:"btn-secondary text-sm",children:e("common.next")})]})]})]}),r.jsx(nt,{isOpen:y,onClose:oe,title:e(_?"users.editUser":"users.createUser"),size:"md",children:r.jsxs("form",{onSubmit:G,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("users.form.fullName")}),r.jsx("input",{type:"text",value:k.name,onChange:re=>N({...k,name:re.target.value}),className:"input",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("users.form.email")}),r.jsx("input",{type:"email",value:k.email,onChange:re=>N({...k,email:re.target.value}),className:"input",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[e("users.form.password")," ",_&&`(${e("users.form.passwordHint")})`]}),r.jsx("input",{type:"password",value:k.password,onChange:re=>N({...k,password:re.target.value}),className:"input",...!_&&{required:!0},minLength:H.minLength}),r.jsx(Fy,{password:k.password,role:k.role})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("users.form.role")}),r.jsx(Ze,{value:k.role,onChange:re=>{const U=re.target.value,xe=U==="pole_director"||U==="regional_hse_manager";N(J=>({...J,role:U,pole:xe?J.pole:"",project_ids:xe?[]:J.project_ids}))},children:r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"hse_manager",children:e("users.roles.hse_manager")}),r.jsx("option",{value:"regional_hse_manager",children:e("users.roles.regional_hse_manager")}),r.jsx("option",{value:"responsable",children:e("users.roles.responsable")}),r.jsx("option",{value:"supervisor",children:e("users.roles.supervisor")}),r.jsx("option",{value:"user",children:e("users.roles.user")}),r.jsx("option",{value:"hr",children:e("users.roles.hr")}),r.jsx("option",{value:"admin",children:e("users.roles.admin")}),r.jsx("option",{value:"consultation",children:e("users.roles.consultation")}),r.jsx("option",{value:"pole_director",children:e("users.roles.pole_director")}),r.jsx("option",{value:"works_director",children:e("users.roles.works_director")}),r.jsx("option",{value:"hse_director",children:e("users.roles.hse_director")}),r.jsx("option",{value:"hr_director",children:e("users.roles.hr_director")})]})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("users.form.phone")}),r.jsx("input",{type:"tel",value:k.phone,onChange:re=>N({...k,phone:re.target.value}),className:"input"})]})]}),(k.role==="pole_director"||k.role==="regional_hse_manager")&&r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("users.form.pole")}),r.jsxs(Ze,{value:k.pole,onChange:re=>N({...k,pole:re.target.value}),required:!0,children:[r.jsx("option",{value:"",children:e("users.form.selectPole")}),v.map(re=>r.jsx("option",{value:re,children:re},re))]})]}),k.role!=="pole_director"&&k.role!=="regional_hse_manager"&&r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("users.form.assignProjects")}),r.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-200 dark:border-gray-600 rounded-lg p-2 space-y-1 bg-white dark:bg-gray-700",children:X.map(re=>r.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-50 dark:hover:bg-gray-600 rounded cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:k.project_ids.includes(re.id),onChange:()=>je(re.id),className:"w-4 h-4 text-hse-primary border-gray-300 dark:border-gray-500 rounded focus:ring-hse-primary"}),r.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:Wt(re)})]},re.id))})]}),r.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:oe,className:"btn-secondary w-full sm:w-auto",children:e("common.cancel")}),r.jsx("button",{type:"submit",disabled:P,className:"btn-primary w-full sm:w-auto",children:P?r.jsxs("span",{className:"flex items-center justify-center gap-2",children:[r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e("common.saving")]}):e(_?"users.updateUser":"users.createUserBtn")})]})]})}),r.jsx(la,{isOpen:!!O,title:e("common.confirm"),message:O?e("users.deleteConfirm",{name:O.name}):"",confirmLabel:e("common.delete"),cancelLabel:e("common.cancel"),variant:"danger",onConfirm:Y,onCancel:()=>q(null)})]})}const Pje=Object.freeze(Object.defineProperty({__proto__:null,default:Aje},Symbol.toStringTag,{value:"Module"}));function Yp({value:e="",onChange:t,suggestions:a=[],placeholder:n="",defaultValue:s="",required:i=!1,className:o="",disabled:l=!1,icon:c=null}){const[d,u]=f.useState(e),[m,p]=f.useState(!1),[g,x]=f.useState([]),[h,v]=f.useState(-1),b=f.useRef(null),y=f.useRef(null);f.useEffect(()=>{u(e)},[e]),f.useEffect(()=>{if(!d.trim())x(a.slice(0,10));else{const P=d.toLowerCase(),A=a.filter(M=>M.toLowerCase().includes(P)).sort((M,R)=>{const O=M.toLowerCase().startsWith(P),q=R.toLowerCase().startsWith(P);return O&&!q?-1:!O&&q?1:M.localeCompare(R)}).slice(0,10);x(A)}v(-1)},[d,a]),f.useEffect(()=>{const P=A=>{y.current&&!y.current.contains(A.target)&&p(!1)};return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[]);const j=P=>{const A=P.target.value;u(A),t(A),p(!0)},_=P=>{u(P),t(P),p(!1),b.current?.focus()},w=P=>{if(!m||g.length===0){P.key==="ArrowDown"&&p(!0);return}switch(P.key){case"ArrowDown":P.preventDefault(),v(A=>A<g.length-1?A+1:A);break;case"ArrowUp":P.preventDefault(),v(A=>A>0?A-1:-1);break;case"Enter":P.preventDefault(),h>=0&&g[h]&&_(g[h]);break;case"Escape":p(!1);break;case"Tab":p(!1);break}},k=()=>{p(!0)},N=()=>{u(""),t(""),b.current?.focus()};return s&&!a.includes(s)&&[...a],r.jsxs("div",{ref:y,className:"relative",children:[r.jsxs("div",{className:"relative",children:[c&&r.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",children:c}),r.jsx("input",{ref:b,type:"text",value:d,onChange:j,onKeyDown:w,onFocus:k,placeholder:n,required:i,disabled:l,className:`input ${c?"pl-10":""} ${d&&!l?"pr-16":"pr-8"} ${o}`}),r.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",children:[d&&!l&&r.jsx("button",{type:"button",onClick:N,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx(qt,{className:"w-3.5 h-3.5 text-gray-400"})}),r.jsx(Vr,{className:`w-4 h-4 text-gray-400 transition-transform ${m?"rotate-180":""}`})]})]}),m&&g.length>0&&r.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:g.map((P,A)=>{const M=A===h,R=P===s;return r.jsxs("button",{type:"button",onClick:()=>_(P),className:`w-full px-3 py-2 text-left text-sm flex items-center justify-between
                  ${M?"bg-hse-primary/10 text-hse-primary":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}
                  ${A===0?"rounded-t-lg":""}
                  ${A===g.length-1?"rounded-b-lg":""}
                `,children:[r.jsx("span",{className:R?"font-medium":"",children:P}),R&&r.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-hse-primary/10 text-hse-primary rounded",children:"dfaut"})]},P)})}),m&&d&&g.length===0&&r.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-3",children:[r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Nouvelle valeur: ",r.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:d})]}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Appuyez sur Entre ou cliquez ailleurs pour confirmer"})]})]})}function wN({projectId:e,projectName:t,isOpen:a,onClose:n}){const{t:s,language:i}=ut(),[o,l]=f.useState([]),[c,d]=f.useState(""),[u,m]=f.useState(!1),[p,g]=f.useState(!1);f.useEffect(()=>{a&&e&&x()},[a,e]);const x=async()=>{try{m(!0);const y=await it.getZones(e);l(y.data.data.zones||[])}catch{K.error(i==="fr"?"chec du chargement des zones":"Failed to load zones")}finally{m(!1)}},h=async()=>{const y=c.trim();if(y){if(o.includes(y)){K.error(i==="fr"?"Cette zone existe dj":"This zone already exists");return}try{g(!0);const j=await it.addZone(e,y);l(j.data.data.zones),d(""),K.success(i==="fr"?"Zone ajoute":"Zone added")}catch{K.error(i==="fr"?"chec de l'ajout":"Failed to add zone")}finally{g(!1)}}},v=async y=>{try{g(!0);const j=await it.removeZone(e,y);l(j.data.data.zones),K.success(i==="fr"?"Zone supprime":"Zone removed")}catch{K.error(i==="fr"?"chec de la suppression":"Failed to remove zone")}finally{g(!1)}},b=y=>{y.key==="Enter"&&(y.preventDefault(),h())};return a?r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:r.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75 dark:bg-gray-900 dark:bg-opacity-75",onClick:n}),r.jsxs("div",{className:"inline-block w-full max-w-lg p-6 my-8 text-left align-middle transition-all transform bg-white dark:bg-gray-800 shadow-xl rounded-2xl relative",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/30 rounded-lg",children:r.jsx(bo,{className:"w-5 h-5 text-amber-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:i==="fr"?"Grer les Zones":"Manage Zones"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t})]})]}),r.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:r.jsx(qt,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:i==="fr"?"Ajouter une zone":"Add a zone"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:c,onChange:y=>d(y.target.value),onKeyPress:b,placeholder:i==="fr"?"Nom de la zone...":"Zone name...",className:"flex-1 input",disabled:p}),r.jsxs("button",{onClick:h,disabled:!c.trim()||p,className:"btn-primary flex items-center gap-2",children:[p?r.jsx(Re,{className:"w-4 h-4 animate-spin"}):r.jsx(Pn,{className:"w-4 h-4"}),i==="fr"?"Ajouter":"Add"]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[i==="fr"?"Zones existantes":"Existing zones"," (",o.length,")"]}),u?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(Re,{className:"w-6 h-6 animate-spin text-amber-500"})}):o.length===0?r.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsx(bo,{className:"w-8 h-8 text-gray-300 dark:text-gray-600 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:i==="fr"?"Aucune zone dfinie":"No zones defined"})]}):r.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2",children:o.map((y,j)=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg group",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(bo,{className:"w-4 h-4 text-amber-500"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:y})]}),r.jsx("button",{onClick:()=>v(y),disabled:p,className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 rounded transition-colors opacity-0 group-hover:opacity-100",children:r.jsx(Nt,{className:"w-4 h-4"})})]},y))})]}),r.jsx("div",{className:"mt-6 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg",children:r.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300",children:i==="fr"?"* Ces zones seront disponibles dans le menu droulant du suivi des carts":"* These zones will be available in the deviation tracking dropdown"})}),r.jsx("div",{className:"mt-6 flex justify-end",children:r.jsxs("button",{onClick:n,className:"btn-secondary flex items-center gap-2",children:[r.jsx(fn,{className:"w-4 h-4"}),i==="fr"?"Termin":"Done"]})})]})]})}):null}function Cje(){const{t:e}=ut(),{user:t}=At(),a=t?.role==="admin"||t?.role==="responsable"||t?.role==="hse_manager"||t?.role==="works_director"||t?.role==="hse_director"||t?.role==="hr_director"||t?.role==="pole_director",[n,s]=f.useState([]),[i,o]=f.useState([]),[l,c]=f.useState(!0),[d,u]=f.useState(""),[m,p]=f.useState(""),[g,x]=f.useState(""),[h,v]=f.useState(""),[b,y]=f.useState(!1),[j,_]=f.useState(null),[w,k]=f.useState([]),[N,P]=f.useState(!1),[A,M]=f.useState(null),[R,O]=f.useState(!1),q=f.useRef(null),S=f.useRef(null),[I,E]=f.useState(!1),[W,B]=f.useState(null),[C,D]=f.useState({name:"",code:"",description:"",location:"",start_date:"",end_date:"",status:"active",pole:"",client_name:"",is_grouping:!1,user_ids:[]}),[z,L]=f.useState(!1),[X,H]=f.useState({current_page:1,last_page:1}),[F,ke]=f.useState(null);f.useEffect(()=>{const ne=setTimeout(()=>{p(d.trim())},350);return()=>clearTimeout(ne)},[d]),f.useEffect(()=>{T(1,m)},[m,g,h]),f.useEffect(()=>{oe()},[]),f.useEffect(()=>{ae()},[]),f.useEffect(()=>{const ne=ee=>{q.current&&!q.current.contains(ee.target)&&P(!1)};return document.addEventListener("mousedown",ne),()=>document.removeEventListener("mousedown",ne)},[]);const ae=async()=>{try{const ne=await it.getPoles(),ee=ne.data?.data?.poles??ne.data?.poles??[];k(Array.isArray(ee)?ee:[])}catch{k([])}},ue=ne=>{B(ne),E(!0)},Z=ne=>{if(!ne)return null;const ee=/filename\*=UTF-8''([^;]+)|filename="?([^";]+)"?/i.exec(ne),ye=decodeURIComponent(ee?.[1]??ee?.[2]??"");return ye!==""?ye:null},me=(ne,ee)=>{const ye=URL.createObjectURL(ne),te=document.createElement("a");te.href=ye,te.download=ee??"template.xlsx",document.body.appendChild(te),te.click(),te.remove(),setTimeout(()=>URL.revokeObjectURL(ye),5e3)},ge=async()=>{try{const ne=await it.downloadTemplate(),ee=Z(ne.headers?.["content-disposition"])??"SGTM-Projects-Template.xlsx";me(ne.data,ee)}catch{K.error(e("projects.bulk.downloadTemplateFailed"))}},se=async()=>{try{const ne=new Date().getFullYear(),ee=await it.managementExport({year:ne}),ye=Z(ee.headers?.["content-disposition"])??`SGTM-Project-Management-Export_${ne}.xlsx`;me(ee.data,ye)}catch{K.error(e("errors.exportFailed"))}},he=async()=>{if(!A){K.error(e("projects.bulk.chooseFile"));return}try{O(!0);const ne=new FormData;ne.append("file",A);const ye=(await it.bulkImport(ne)).data?.data??{},te=ye.imported??0,Ne=ye.updated??0,Ce=ye.errors??[],Ue=ye.failed_rows_url;if(K.success(e("projects.bulk.importSummary",{imported:te,updated:Ne})),Ce.length>0&&K.error(e("projects.bulk.importIssues",{count:Ce.length})),Ue)try{const Te=await(await fetch(Ue)).blob();me(Te,"projects_failed_rows.xlsx")}catch{}M(null),P(!1),T(),ae()}catch(ne){K.error(ne.response?.data?.message??e("projects.bulk.importFailed"))}finally{O(!1)}},T=async(ne=1,ee=d)=>{try{c(!0);const ye=await it.getAll({page:ne,search:ee,status:g,pole:h||void 0,per_page:10});s(ye.data.data??[]),H(ye.data.meta??{current_page:1,last_page:1})}catch{K.error(e("errors.failedToLoad"))}finally{c(!1)}},oe=async()=>{try{const ne=await ii.getAll({per_page:100,role:"responsable"});o(ne.data.data??[])}catch{console.error("Failed to load users")}},G=(ne=null)=>{ne?(_(ne),D({name:ne.name,code:ne.code,description:ne.description??"",location:ne.location??"",start_date:ne.start_date?.split("T")[0]??"",end_date:ne.end_date?.split("T")[0]??"",status:ne.status,pole:ne.pole??"",client_name:ne.client_name??"",is_grouping:!!ne.is_grouping,user_ids:ne.users?.map(ee=>ee.id)??[]})):(_(null),D({name:"",code:"",description:"",location:"",start_date:"",end_date:"",status:"active",pole:"",client_name:"",is_grouping:!1,user_ids:[]})),ae(),y(!0)},V=()=>{y(!1),_(null)},Y=ne=>{const ee=Array.isArray(ne.user_ids)?ne.user_ids.map(te=>Number(te)).filter(te=>Number.isFinite(te)):[];return{...ne,name:(ne.name??"").trim(),code:(ne.code??"").trim(),start_date:ne.start_date?ne.start_date:null,end_date:ne.end_date?ne.end_date:null,status:ne.status?ne.status:"active",pole:(ne.pole??"").trim()||null,client_name:(ne.client_name??"").trim()||null,location:(ne.location??"").trim()||null,description:(ne.description??"").trim()||null,is_grouping:!!ne.is_grouping,user_ids:ee}},ce=ne=>{const ee=ne?.response?.data,ye=[ee?.errors,ee?.data?.errors,ee?.error?.errors];for(const Ne of ye)if(Ne&&typeof Ne=="object"){const Ce=Object.keys(Ne);if(Ce.length>0){const Ue=Ce[0],fe=Ne[Ue],Te=Array.isArray(fe)?fe[0]:fe;if(typeof Te=="string"&&Te.trim()!=="")return Te}}const te=ee?.message??ee?.data?.message;return typeof te=="string"&&te.trim()!==""?te:e("errors.failedToSave")},je=async ne=>{ne.preventDefault(),L(!0);try{const ee=Y(C);j?(await it.update(j.id,ee),K.success(e("projects.projectUpdated"))):(await it.create(ee),K.success(e("projects.projectCreated"))),V(),T()}catch(ee){K.error(ce(ee))}finally{L(!1)}},re=ne=>{ke(ne)},U=async()=>{if(F)try{await it.delete(F.id),K.success(e("projects.projectDeleted")),T()}catch(ne){K.error(ne.response?.data?.message??e("errors.failedToDelete"))}finally{ke(null)}},xe=ne=>{D(ee=>({...ee,user_ids:ee.user_ids.includes(ne)?ee.user_ids.filter(ye=>ye!==ne):[...ee.user_ids,ne]}))},J={active:"badge-success",completed:"badge-info",on_hold:"badge-warning",cancelled:"badge-danger"},Q=ne=>{const ee=String(ne||"").trim();if(!ee)return"";const ye=`projects.${ee}`,te=e(ye);return te===ye?ee.replace(/_/g," "):te};return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e("projects.projectList")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:e("projects.assignedUsers")})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[t?.role==="admin"&&r.jsxs("button",{type:"button",onClick:se,className:"btn-secondary flex items-center gap-2",children:[r.jsx(hn,{className:"w-4 h-4"}),e("common.export")]}),r.jsxs("div",{ref:q,className:"relative",children:[r.jsxs("button",{type:"button",onClick:()=>P(ne=>!ne),className:"btn-secondary flex items-center gap-2",children:[r.jsx($a,{className:"w-4 h-4"}),e("common.import")]}),N&&r.jsx("div",{className:"absolute right-0 mt-2 w-80 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl p-4 z-50",children:r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{type:"button",onClick:ge,className:"btn-secondary w-full",children:e("common.downloadTemplate")}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("input",{ref:S,type:"file",accept:".xlsx,.xls",onChange:ne=>M(ne.target.files?.[0]??null),className:"hidden"}),r.jsx("button",{type:"button",onClick:()=>S.current?.click(),className:"w-full rounded-lg border border-dashed border-gray-300 dark:border-gray-600 px-3 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700/50 transition",children:r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:e("common.chooseFile")}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:A?A.name:`${e("common.chooseFile")} (.xlsx)`})]}),r.jsx("div",{className:"text-xs font-semibold px-2 py-1 rounded-md bg-orange-50 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300",children:e("common.chooseFile")})]})}),A&&r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-300 truncate",children:[e("common.selected"),": ",r.jsx("span",{className:"font-semibold",children:A.name})]}),r.jsx("button",{type:"button",onClick:()=>{M(null),S.current&&(S.current.value="")},className:"text-xs font-semibold text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100",children:e("common.clear")})]})]}),r.jsx("button",{type:"button",onClick:he,disabled:R||!A,className:"btn-primary w-full",children:R?r.jsxs("span",{className:"flex items-center justify-center gap-2",children:[r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e("common.loading")]}):e("common.upload")})]})})]}),r.jsxs("button",{onClick:()=>G(),className:"btn-primary flex items-center gap-2",children:[r.jsx(Pn,{className:"w-4 h-4"}),e("projects.newProject")]})]})]}),r.jsx("div",{className:"card p-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Yr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:e("common.search"),value:d,onChange:ne=>u(ne.target.value),className:"input pl-10"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap sm:items-center gap-2",children:[r.jsx(ki,{className:"hidden sm:block w-4 h-4 text-gray-400"}),r.jsxs(Ze,{value:g,onChange:ne=>x(ne.target.value),className:"w-full sm:w-40",children:[r.jsx("option",{value:"",children:e("common.all")}),r.jsx("option",{value:"active",children:Q("active")}),r.jsx("option",{value:"completed",children:Q("completed")}),r.jsx("option",{value:"on_hold",children:Q("on_hold")}),r.jsx("option",{value:"cancelled",children:Q("cancelled")})]}),r.jsxs(Ze,{value:h,onChange:ne=>v(ne.target.value),className:"w-full sm:w-40",children:[r.jsx("option",{value:"",children:e("common.allPoles")}),w.map(ne=>r.jsx("option",{value:ne,children:ne},ne))]})]})]})}),l?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Re,{className:"w-8 h-8 animate-spin text-hse-primary"})}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(ne=>r.jsx("div",{className:ne.is_grouping?"rounded-xl bg-gradient-to-r from-orange-400 via-amber-400 to-orange-500 p-[2px]":"",children:r.jsx("div",{className:"card hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-hse-primary/10 rounded-lg flex items-center justify-center",children:r.jsx(hn,{className:"w-6 h-6 text-hse-primary"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:ne.name}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:ne.code})]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-1",children:[r.jsx("span",{className:`badge ${J[ne.status]}`,children:Q(ne.status)}),ne.pole&&r.jsx("span",{className:"text-[11px] px-2 py-0.5 rounded-full bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-200",children:ne.pole})]})]}),ne.description&&r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4 line-clamp-2",children:ne.description}),r.jsxs("div",{className:"space-y-2 text-sm",children:[ne.location&&r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[r.jsx(bo,{className:"w-4 h-4"}),r.jsx("span",{children:ne.location})]}),ne.start_date&&r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[r.jsx(Na,{className:"w-4 h-4"}),r.jsxs("span",{children:[new Date(ne.start_date).toLocaleDateString(),ne.end_date&&` - ${new Date(ne.end_date).toLocaleDateString()}`]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[r.jsx(sa,{className:"w-4 h-4"}),r.jsxs("span",{children:[ne.users?.length??0," ",e("projects.assignedUsers")]})]})]}),r.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-100 dark:border-gray-700",children:[r.jsxs("div",{className:"flex -space-x-2",children:[ne.users?.slice(0,3).map(ee=>r.jsx("div",{className:"w-8 h-8 bg-hse-secondary rounded-full flex items-center justify-center border-2 border-white dark:border-gray-800",title:ee.name,children:r.jsx("span",{className:"text-white text-xs font-medium",children:ee.name.charAt(0)})},ee.id)),ne.users?.length>3&&r.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-600 rounded-full flex items-center justify-center border-2 border-white dark:border-gray-800",children:r.jsxs("span",{className:"text-gray-600 dark:text-gray-300 text-xs font-medium",children:["+",ne.users.length-3]})})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(xa,{to:`/admin/projects/${ne.id}`,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:e("common.view"),children:r.jsx(_r,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),a&&r.jsx("button",{type:"button",onClick:()=>ue(ne),className:"p-2 hover:bg-amber-50 dark:hover:bg-amber-900/20 rounded-lg",title:e("projects.manageZones"),children:r.jsx(C5,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"})}),r.jsx("button",{onClick:()=>G(ne),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:e("common.edit"),children:r.jsx(Ol,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),r.jsx("button",{onClick:()=>re(ne),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:e("common.delete"),children:r.jsx(Nt,{className:"w-4 h-4 text-red-600"})})]})]})]})})},ne.id))}),X.last_page>1&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("p",{className:"text-sm text-gray-500",children:[e("common.page")," ",X.current_page," ",e("common.of")," ",X.last_page]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>T(X.current_page-1),disabled:X.current_page===1,className:"btn-secondary text-sm",children:e("common.previous")}),r.jsx("button",{onClick:()=>T(X.current_page+1),disabled:X.current_page===X.last_page,className:"btn-secondary text-sm",children:e("common.next")})]})]}),r.jsx(nt,{isOpen:b,onClose:V,title:e(j?"projects.editProject":"projects.newProject"),size:"lg",children:r.jsxs("form",{onSubmit:je,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[e("projects.projectName")," *"]}),r.jsx("input",{type:"text",value:C.name,onChange:ne=>D({...C,name:ne.target.value}),className:"input",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[e("projects.projectCode")," *"]}),r.jsx("input",{type:"text",value:C.code,onChange:ne=>D({...C,code:ne.target.value.toUpperCase()}),className:"input",required:!0,placeholder:"ex: SGTM-001"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("projects.description")}),r.jsx("textarea",{value:C.description,onChange:ne=>D({...C,description:ne.target.value}),className:"input",rows:3})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("projects.location")}),r.jsx("input",{type:"text",value:C.location,onChange:ne=>D({...C,location:ne.target.value}),className:"input"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("projects.clientName")}),r.jsx("input",{type:"text",value:C.client_name,onChange:ne=>D({...C,client_name:ne.target.value}),className:"input"})]})]}),r.jsxs("div",{className:"flex items-start justify-between gap-3 rounded-xl border border-gray-200 dark:border-gray-700 p-3 bg-gray-50 dark:bg-gray-900/30",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:e("projects.groupingLabel")}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:e("projects.groupingHelp")})]}),r.jsx("label",{className:"inline-flex items-center cursor-pointer",children:r.jsx("input",{type:"checkbox",checked:!!C.is_grouping,onChange:ne=>D({...C,is_grouping:ne.target.checked}),className:"w-5 h-5 rounded border-gray-300 dark:border-gray-600 text-orange-600 focus:ring-orange-500"})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("projects.startDate")}),r.jsx(ot,{value:C.start_date,onChange:ne=>D({...C,start_date:ne})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("projects.endDate")}),r.jsx(ot,{value:C.end_date,onChange:ne=>D({...C,end_date:ne})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("projects.status")}),r.jsxs(Ze,{value:C.status,onChange:ne=>D({...C,status:ne.target.value}),children:[r.jsx("option",{value:"active",children:e("projects.active")}),r.jsx("option",{value:"completed",children:e("projects.completed")}),r.jsx("option",{value:"on_hold",children:e("projects.on_hold")}),r.jsx("option",{value:"cancelled",children:e("projects.cancelled")})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("users.form.pole")}),r.jsx(Yp,{value:C.pole,onChange:ne=>D({...C,pole:ne}),suggestions:w,placeholder:e("users.form.selectPole"),className:"w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("projects.assignUsers")}),r.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-200 dark:border-gray-600 rounded-lg p-2 space-y-1 bg-white dark:bg-gray-700",children:i.map(ne=>r.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-50 dark:hover:bg-gray-600 rounded cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:C.user_ids.includes(ne.id),onChange:()=>xe(ne.id),className:"w-4 h-4 text-hse-primary border-gray-300 dark:border-gray-500 rounded focus:ring-hse-primary"}),r.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:ne.name}),r.jsxs("span",{className:"text-xs text-gray-400",children:["(",ne.email,")"]})]},ne.id))})]}),r.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:V,className:"btn-secondary w-full sm:w-auto",children:e("common.cancel")}),r.jsx("button",{type:"submit",disabled:z,className:"btn-primary w-full sm:w-auto",children:z?r.jsxs("span",{className:"flex items-center justify-center gap-2",children:[r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e("common.loading")]}):e(j?"common.update":"common.create")})]})]})}),r.jsx(la,{isOpen:!!F,title:e("common.confirm"),message:F?e("projects.confirmDelete"):"",confirmLabel:e("common.delete"),cancelLabel:e("common.cancel"),variant:"danger",onConfirm:U,onCancel:()=>ke(null)}),r.jsx(wN,{projectId:W?.id,projectName:W?.name,isOpen:I,onClose:()=>{E(!1),B(null)}})]})}const Eje=Object.freeze(Object.defineProperty({__proto__:null,default:Cje},Symbol.toStringTag,{value:"Module"})),Tje=[{key:"effectif",label:"Effectif",labelEn:"Workforce",unit:""},{key:"induction",label:"Induction",labelEn:"Induction",unit:""},{key:"releve_ecarts",label:"Relev des carts",labelEn:"Deviations",unit:""},{key:"sensibilisation",label:"Sensibilisation",labelEn:"Awareness",unit:""},{key:"presquaccident",label:"Presqu'accident",labelEn:"Near Miss",unit:""},{key:"premiers_soins",label:"Premiers soins",labelEn:"First Aid",unit:""},{key:"accidents",label:"Accident",labelEn:"Accident",unit:""},{key:"jours_arret",label:"Jours d'arrt",labelEn:"Lost Days",unit:""},{key:"heures_travaillees",label:"Heures travailles",labelEn:"Hours Worked",unit:"h"},{key:"inspections",label:"Inspections",labelEn:"Inspections",unit:""},{key:"heures_formation",label:"Heures formation",labelEn:"Training Hours",unit:"h"},{key:"permis_travail",label:"Permis de travail",labelEn:"Work Permits",unit:""},{key:"mesures_disciplinaires",label:"Mesures disc.",labelEn:"Disciplinary",unit:""},{key:"conformite_hse",label:"Conformit HSE",labelEn:"HSE Compliance",unit:"%"},{key:"conformite_medicale",label:"Conformit Md.",labelEn:"Medical Compl.",unit:"%"}],Oje={fr:{Saturday:"Sam",Sunday:"Dim",Monday:"Lun",Tuesday:"Mar",Wednesday:"Mer",Thursday:"Jeu",Friday:"Ven"},en:{Saturday:"Sat",Sunday:"Sun",Monday:"Mon",Tuesday:"Tue",Wednesday:"Wed",Thursday:"Thu",Friday:"Fri"}};function r$({dailySnapshots:e=[]}){const{t,language:a}=ut(),[n,s]=f.useState(!1);if(!e||e.length===0)return null;const i=c=>{const[d,u,m]=c.split("-").map(Number);return`${String(m).padStart(2,"0")}/${String(u).padStart(2,"0")}`},o=c=>Oje[a]?.[c]??c?.slice(0,3)??"",l=(c,d)=>c==null||c===""?"-":c===0?"0":`${c}${d?` ${d}`:""}`;return r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-900 cursor-pointer",onClick:()=>s(!n),children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(E5,{className:"w-4 h-4 text-hse-primary"}),r.jsx("span",{className:"font-medium text-sm text-gray-700 dark:text-gray-300",children:t("kpi.dailyKpi.dailyData")}),r.jsxs("span",{className:"px-2 py-0.5 text-xs bg-hse-primary/10 text-hse-primary rounded-full",children:[e.length," ",t("kpi.dailyKpi.days")]})]}),r.jsx("div",{className:"p-1 rounded bg-gray-200 dark:bg-gray-700",children:n?r.jsx(ld,{className:"w-4 h-4"}):r.jsx(Vr,{className:"w-4 h-4"})})]}),n&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-xs",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-800",children:[r.jsx("th",{className:"sticky left-0 z-10 bg-gray-100 dark:bg-gray-800 text-left py-2 px-2 font-medium text-gray-600 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:t("kpi.dailyKpi.indicator")}),e.map((c,d)=>r.jsxs("th",{className:"text-center py-2 px-2 font-medium text-gray-600 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700 min-w-[60px]",children:[r.jsx("div",{children:o(c.day_name)}),r.jsx("div",{className:"text-[10px] font-normal text-gray-500",children:i(c.entry_date)})]},d))]})}),r.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:Tje.map(c=>r.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[r.jsx("td",{className:"sticky left-0 z-10 bg-white dark:bg-gray-800 py-1.5 px-2 font-medium text-gray-600 dark:text-gray-400 border-r border-gray-100 dark:border-gray-700",children:a==="fr"?c.label:c.labelEn}),e.map((d,u)=>r.jsx("td",{className:"text-center py-1.5 px-2 text-gray-700 dark:text-gray-300",children:l(d[c.key],c.unit)},u))]},c.key))})]})})]})}function Mje(){const{t:e,language:t}=ut(),{user:a}=At(),n=Zr(),s=U=>String(Math.max(0,Math.trunc(Number(U)||0))).padStart(2,"0"),i=(U,xe)=>{const J=String(U??"").trim(),Q=String(xe??"").trim();return!J||!Q?"":`${J}-W${s(Q)}`},o=U=>{const J=String(U??"").trim().match(/^(\d{4})-W(\d{2})$/);if(!J)return null;const Q=J[1],ne=String(Number(J[2]));return{weekYear:Q,week:ne}},[l,c]=f.useState([]),[d,u]=f.useState([]),[m,p]=f.useState(!0),[g,x]=f.useState(null),[h,v]=f.useState([]),[b,y]=f.useState(!1),[j,_]=f.useState(!1),[w,k]=f.useState(""),[N,P]=f.useState(null),[A,M]=f.useState(null),[R,O]=f.useState(!1),[q,S]=f.useState(!1),[I,E]=f.useState({project_id:"",week:Hr().week,year:Hr().year}),[W,B]=f.useState({status:"",project_id:"",pole:"",search:"",week:"",year:""}),[C,D]=f.useState([]),[z,L]=f.useState(""),X=a?.project_list_preference??"code",H=f.useMemo(()=>Ir(d,X),[d,X]),F=t==="fr"?"fr-FR":"en-US",ke=U=>U?new Date(U).toLocaleDateString(F):e("common.unknown"),ae=U=>!U||!se?!1:U.status!=="draft",ue=U=>{ae(U)&&M(U)},Z=async()=>{if(A?.id)try{P(A.id),await Ka.delete(A.id),K.success(e("kpi.historyPage.deleteSuccess")),M(null),oe()}catch(U){K.error(U.response?.data?.message??e("errors.failedToDelete"))}finally{P(null)}},me=a?.role,ge=me==="hse_manager"||me==="regional_hse_manager",se=me==="admin"||me==="consultation"||me==="dev"||me==="pole_director"||me==="works_director"||me==="hse_director"||me==="hr_director",he=U=>!U||U.status!=="submitted"?!1:!!(se||ge&&U?.submitter?.role==="responsable"),T=l.filter(U=>U.status!=="draft");f.useEffect(()=>{const U=new URLSearchParams(n.search),xe=U.get("week")??"",J=U.get("year")??"";(xe||J)&&B(Q=>({...Q,week:xe||Q.week,year:J||Q.year}))},[n.search]),f.useEffect(()=>{const U=setTimeout(()=>{B(xe=>xe.search===z?xe:{...xe,search:z})},300);return()=>clearTimeout(U)},[z]),f.useEffect(()=>{oe()},[W]),f.useEffect(()=>{(async()=>{try{const xe=await it.getPoles(),J=xe.data?.data?.poles??xe.data?.poles??[];D(Array.isArray(J)?J:[])}catch{D([])}})()},[]);const oe=async()=>{try{p(!0);const[U,xe]=await Promise.all([Ka.getAll(W),it.getAllList({status:"active"})]),J=U.data.data||U.data||[];c(Array.isArray(J)?J:[]),u(Array.isArray(xe)?xe:[])}catch(U){console.error("Error loading KPI data:",U),K.error(e("errors.somethingWentWrong"))}finally{p(!1)}},G=async U=>{try{P(U),await Ka.approve(U),K.success(e("kpi.reportApproved")),oe()}catch(xe){console.error("Error approving report:",xe),K.error(e("errors.somethingWentWrong"))}finally{P(null)}},V=async()=>{if(!g||!w.trim()){K.error(e("kpi.management.rejectReasonRequired"));return}try{P(g.id),await Ka.reject(g.id,w),K.success(e("kpi.reportRejected")),_(!1),k(""),x(null),oe()}catch(U){console.error("Error rejecting report:",U),K.error(e("errors.somethingWentWrong"))}finally{P(null)}},Y=async U=>{y(!0),x(U),v([]);try{const J=(await Ka.getById(U.id)).data.data;x(J.report??J),v(J.daily_snapshots??[])}catch(xe){console.error("Failed to load report details:",xe),K.error(e("kpi.management.loadDetailsFailed")??e("errors.failedToLoad"))}finally{y(!1)}},ce=U=>{x(U),_(!0)},je=async()=>{if(!I.project_id){K.error(e("hseExport.noProject"));return}if(!I.week||!I.year){K.error(e("hseExport.noWeek"));return}try{S(!0);const U=await Yd.exportHseWeekly({project_id:I.project_id,week:I.week,year:I.year}),xe=window.URL.createObjectURL(new Blob([U.data])),J=document.createElement("a");J.href=xe;const ne=`HSE_Report_${d.find(ee=>ee.id==I.project_id)?.code||"project"}_S${String(I.week).padStart(2,"0")}_${I.year}.xlsx`;J.setAttribute("download",ne),document.body.appendChild(J),J.click(),J.remove(),window.URL.revokeObjectURL(xe),K.success(e("hseExport.success")),O(!1)}catch(U){console.error("Export error:",U),K.error(U.response?.data?.message||e("hseExport.error"))}finally{S(!1)}};Array.from({length:52},(U,xe)=>xe+1),Hr().year;const re=U=>{const xe={draft:"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-200",submitted:"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-200",approved:"bg-green-100 text-green-700 dark:bg-green-900/40 dark:text-green-200",rejected:"bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-200"},Q={draft:oa,submitted:Qt,approved:Xt,rejected:Zn}[U]||oa;return r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${xe[U]||xe.draft}`,children:[r.jsx(Q,{className:"w-3 h-3"}),e(`kpi.status.${U}`)]})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[r.jsx(Ug,{className:"w-7 h-7 text-hse-primary"}),e("kpi.management.title")]}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:e("kpi.management.subtitle")})]}),r.jsxs("button",{onClick:()=>O(!0),className:"btn-primary flex items-center gap-2",children:[r.jsx(Tr,{className:"w-4 h-4"}),e("hseExport.exportButton")]})]}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Yr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:e("kpi.management.searchPlaceholder"),value:z,onChange:U=>L(U.target.value),className:"input pl-10"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"flex-1",children:r.jsx(Ml,{value:W.week&&W.year?i(W.year,W.week):"",onChange:U=>{const xe=o(U);xe&&B(J=>({...J,year:xe.weekYear,week:xe.week}))},placeholder:e("common.all"),className:"w-full"})}),r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>B(U=>({...U,week:"",year:""})),title:e("common.all"),children:r.jsx(qt,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"flex-1",children:r.jsx(So,{value:W.year,onChange:U=>B(xe=>({...xe,year:String(U??"")})),placeholder:e("common.all"),className:"w-full"})}),r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>B(U=>({...U,year:""})),disabled:!W.year,"aria-label":e("common.all"),title:e("common.all"),children:r.jsx(qt,{className:"w-4 h-4"})})]}),r.jsxs("select",{value:W.status,onChange:U=>B({...W,status:U.target.value}),className:"input",children:[r.jsx("option",{value:"",children:e("kpi.management.allStatuses")}),r.jsx("option",{value:"submitted",children:e("kpi.management.statusSubmitted")}),r.jsx("option",{value:"approved",children:e("kpi.status.approved")}),r.jsx("option",{value:"rejected",children:e("kpi.status.rejected")})]}),r.jsxs("select",{value:W.pole,onChange:U=>B({...W,pole:U.target.value,project_id:""}),className:"input",children:[r.jsx("option",{value:"",children:e("common.allPoles")}),C.map(U=>r.jsx("option",{value:U,children:U},U))]}),r.jsxs("select",{value:W.project_id,onChange:U=>B({...W,project_id:U.target.value}),className:"input",children:[r.jsx("option",{value:"",children:e("common.allProjects")}),(W.pole?H.filter(U=>U?.pole===W.pole):H).map(U=>r.jsx("option",{value:U.id,children:Wt(U)},U.id))]}),r.jsxs("button",{onClick:oe,className:"btn-secondary flex items-center justify-center gap-2",children:[r.jsx(ki,{className:"w-4 h-4"}),e("common.refresh")]})]})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:m?r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsx("div",{className:"hidden md:block space-y-2 animate-pulse",children:Array.from({length:5},(U,xe)=>r.jsx("div",{className:"h-10 rounded-md bg-gray-100 dark:bg-gray-800"},xe))}),r.jsx("div",{className:"md:hidden space-y-3 animate-pulse",children:Array.from({length:3},(U,xe)=>r.jsx("div",{className:"h-24 rounded-lg bg-gray-100 dark:bg-gray-800"},xe))})]}):T.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ug,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:e("kpi.noReports")})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"space-y-3 px-4 py-4 md:hidden",children:T.map(U=>r.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3 bg-white dark:bg-gray-800",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:U.project?.name||e("common.unknown")}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:U.submitter?.name||e("common.unknown")}),r.jsxs("p",{className:"mt-1 text-xs text-gray-600 dark:text-gray-300 flex items-center gap-1",children:[r.jsx(Na,{className:"w-3 h-3 text-gray-400"}),r.jsx("span",{children:U.week_number?e("dashboard.weekLabel",{week:U.week_number,year:U.report_year}):`${U.report_month}/${U.report_year}`})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:ke(U.created_at)})]}),r.jsx("div",{className:"text-right",children:re(U.status)})]}),r.jsxs("div",{className:"mt-3 flex items-center justify-end gap-2",children:[he(U)&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>G(U.id),disabled:N===U.id,className:"px-2 py-1 text-xs rounded-md bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-300",children:N===U.id?r.jsx(Re,{className:"w-4 h-4 animate-spin"}):r.jsx("span",{children:e("kpi.approve")})}),r.jsx("button",{onClick:()=>ce(U),disabled:N===U.id,className:"px-2 py-1 text-xs rounded-md bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300",children:e("kpi.reject")})]}),r.jsxs("button",{onClick:()=>Y(U),className:"px-2 py-1 text-xs rounded-md bg-gray-50 dark:bg-gray-900 text-gray-700 dark:text-gray-200 flex items-center gap-1",children:[r.jsx(_r,{className:"w-4 h-4"}),r.jsx("span",{children:e("common.view")})]}),ae(U)&&r.jsxs("button",{onClick:()=>ue(U),disabled:N===U.id,className:"px-2 py-1 text-xs rounded-md bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300 flex items-center gap-1",children:[r.jsx(Nt,{className:"w-4 h-4"}),r.jsx("span",{children:e("common.delete")})]})]})]},U.id))}),r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-4 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:e("common.project")}),r.jsx("th",{className:"text-left px-4 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:e("kpi.management.submittedBy")}),r.jsx("th",{className:"text-left px-4 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:e("kpi.management.period")}),r.jsx("th",{className:"text-left px-4 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:e("kpi.management.date")}),r.jsx("th",{className:"text-left px-4 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:e("common.status")}),r.jsx("th",{className:"text-right px-4 py-3 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:e("common.actions")})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:T.map(U=>r.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[r.jsx("td",{className:"px-4 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Mo,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:U.project?.name||e("common.unknown")})]})}),r.jsx("td",{className:"px-4 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Zd,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:U.submitter?.name||e("common.unknown")})]})}),r.jsx("td",{className:"px-4 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Na,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:U.week_number?e("dashboard.weekLabel",{week:U.week_number,year:U.report_year}):`${U.report_month}/${U.report_year}`})]})}),r.jsx("td",{className:"px-4 py-4 text-gray-500 dark:text-gray-400 text-sm",children:ke(U.created_at)}),r.jsx("td",{className:"px-4 py-4",children:re(U.status)}),r.jsx("td",{className:"px-4 py-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[he(U)&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>G(U.id),disabled:N===U.id,className:"p-2 text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/30 rounded-lg transition-colors",title:e("kpi.approve"),children:N===U.id?r.jsx(Re,{className:"w-5 h-5 animate-spin"}):r.jsx(fn,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>ce(U),disabled:N===U.id,className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:e("kpi.reject"),children:r.jsx(qt,{className:"w-5 h-5"})})]}),r.jsx("button",{onClick:()=>Y(U),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:e("kpi.management.viewDetails"),children:r.jsx(_r,{className:"w-5 h-5"})}),ae(U)&&r.jsx("button",{onClick:()=>ue(U),disabled:N===U.id,className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:e("common.delete"),children:N===U.id?r.jsx(Re,{className:"w-5 h-5 animate-spin"}):r.jsx(Nt,{className:"w-5 h-5"})})]})})]},U.id))})]})})]})}),r.jsx(la,{isOpen:!!A,title:e("common.delete"),message:e("kpi.confirmDelete"),confirmLabel:e("common.delete"),cancelLabel:e("common.cancel"),variant:"danger",onConfirm:Z,onCancel:()=>M(null)}),r.jsx(nt,{isOpen:j,onClose:()=>{_(!1),k(""),x(null)},title:e("kpi.management.rejectTitle"),size:"sm",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:[e("common.project"),": ",r.jsx("strong",{children:g?.project?.name}),r.jsx("br",{}),e("kpi.management.period"),": ",r.jsx("strong",{children:g?.week_number?e("dashboard.weekLabel",{week:g.week_number,year:g.report_year}):`${g?.report_month}/${g?.report_year}`})]}),r.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/30 border border-amber-200 dark:border-amber-700 rounded-lg p-3",children:r.jsxs("p",{className:"text-amber-800 dark:text-amber-300 text-sm",children:[e("kpi.management.rejectWarningBefore")," ",r.jsx("strong",{children:e("kpi.status.draft")})," ",e("kpi.management.rejectWarningAfter")]})}),r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[e("kpi.rejectionReason")," *"]}),r.jsx("textarea",{value:w,onChange:U=>k(U.target.value),className:"input",rows:3,placeholder:e("kpi.management.rejectReasonPlaceholder")})]}),r.jsxs("div",{className:"flex flex-col-reverse sm:flex-row gap-3 justify-end pt-2",children:[r.jsx("button",{onClick:()=>{_(!1),k(""),x(null)},className:"btn-secondary w-full sm:w-auto",children:e("common.cancel")}),r.jsx("button",{onClick:V,disabled:N,className:"btn-primary bg-red-600 hover:bg-red-700 w-full sm:w-auto",children:N?r.jsx(Re,{className:"w-4 h-4 animate-spin mx-auto"}):e("kpi.reject")})]})]})}),r.jsx(nt,{isOpen:!!g&&!j,onClose:()=>{x(null),v([])},title:e("kpi.management.detailsTitle"),size:"lg",children:g&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("common.project")}),r.jsx("p",{className:"font-medium dark:text-gray-100",children:g.project?.name??""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("kpi.management.submittedBy")}),r.jsx("p",{className:"font-medium dark:text-gray-100",children:g.submitter?.name??""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("kpi.management.period")}),r.jsx("p",{className:"font-medium",children:g.week_number?`${e("dashboard.weekLabel",{week:g.week_number,year:g.report_year})} (${ke(g.start_date)} - ${ke(g.end_date)})`:`${g.report_month}/${g.report_year}`})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("common.status")}),re(g.status)]})]}),r.jsx("hr",{}),r.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-3",children:e("kpi.management.sections.effectifInduction")}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 rounded-lg border border-blue-200 dark:border-blue-800",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["1. ",e("kpi.weekly.effectif")]}),r.jsx("p",{className:"text-lg font-bold text-blue-600",children:g.hours_worked??0})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 rounded-lg border border-blue-200 dark:border-blue-800",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["2. ",e("kpi.weekly.induction")]}),r.jsx("p",{className:"text-lg font-bold text-blue-600",children:g.employees_trained??0})]})]})]}),r.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-semibold text-amber-900 mb-3",children:e("kpi.management.sections.observationsAwareness")}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 rounded-lg border border-amber-200 dark:border-amber-700",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["3. ",e("kpi.weekly.ecarts")]}),r.jsx("p",{className:"text-lg font-bold text-amber-600",children:g.unsafe_conditions_reported??0})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 rounded-lg border border-amber-200 dark:border-amber-700",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["4. ",e("kpi.weekly.sensibilisation")]}),r.jsx("p",{className:"text-lg font-bold text-amber-600",children:g.toolbox_talks??0})]})]})]}),r.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-semibold text-red-900 mb-3",children:e("kpi.management.sections.accidentsIncidents")}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 rounded-lg border border-amber-200 dark:border-amber-700",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["5. ",e("kpi.weekly.presquAccident")]}),r.jsx("p",{className:"text-lg font-bold text-amber-600",children:g.near_misses??0})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 rounded-lg border border-green-200 dark:border-green-700",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["6. ",e("kpi.weekly.premiersSoins")]}),r.jsx("p",{className:"text-lg font-bold text-green-600",children:g.first_aid_cases??0})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 rounded-lg border border-red-300 dark:border-red-700",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["7. ",e("kpi.weekly.accident")]}),r.jsx("p",{className:"text-lg font-bold text-red-600",children:g.accidents??0})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 rounded-lg border border-orange-200 dark:border-orange-700",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["8. ",e("kpi.weekly.joursArret")]}),r.jsx("p",{className:"text-lg font-bold text-orange-600",children:g.lost_workdays??0})]})]})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3",children:e("kpi.management.sections.inspectionsIndicators")}),r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 rounded-lg border dark:border-gray-700",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["9. ",e("kpi.weekly.inspections")]}),r.jsx("p",{className:"text-lg font-bold text-gray-700 dark:text-gray-100",children:g.inspections_completed??0})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 rounded-lg border dark:border-gray-700",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["10. ",e("kpi.weekly.tauxGravite")]}),r.jsx("p",{className:"text-lg font-bold text-gray-700 dark:text-gray-100",children:g.tg_value??0})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 rounded-lg border dark:border-gray-700",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["11. ",e("kpi.weekly.tauxFrequence")]}),r.jsx("p",{className:"text-lg font-bold text-gray-700 dark:text-gray-100",children:g.tf_value??0})]})]})]}),r.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-semibold text-purple-900 mb-3",children:e("kpi.management.sections.trainingPermitsDiscipline")}),r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 rounded-lg border border-purple-200 dark:border-purple-700",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["12. ",e("kpi.weekly.heuresFormation")]}),r.jsxs("p",{className:"text-lg font-bold text-purple-600",children:[g.training_hours??0,"h"]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 rounded-lg border border-purple-200 dark:border-purple-700",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["13. ",e("kpi.weekly.permisTravail")]}),r.jsx("p",{className:"text-lg font-bold text-purple-600",children:g.work_permits??0})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 rounded-lg border border-purple-200 dark:border-purple-700",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["14. ",e("kpi.weekly.mesuresDisciplinaires")]}),r.jsx("p",{className:"text-lg font-bold text-purple-600",children:g.corrective_actions??0})]})]})]}),r.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-semibold text-green-900 mb-3",children:e("kpi.management.sections.complianceMonitoring")}),r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 rounded-lg border border-green-200 dark:border-green-700",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["15. ",e("kpi.weekly.conformiteHSE")]}),r.jsxs("p",{className:"text-lg font-bold text-green-600",children:[g.ppe_compliance_rate??0,"%"]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 rounded-lg border border-green-200 dark:border-green-700",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["16. ",e("kpi.weekly.conformiteMedecine")]}),r.jsxs("p",{className:"text-lg font-bold text-green-600",children:[g.medical_compliance_rate??0,"%"]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 rounded-lg border border-green-200 dark:border-green-700",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["17. ",e("kpi.weekly.suiviBruit")]}),r.jsxs("p",{className:"text-lg font-bold text-green-600",children:[g.noise_monitoring??0," dB"]})]})]})]}),r.jsxs("div",{className:"bg-cyan-50 dark:bg-cyan-900/20 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-semibold text-cyan-900 mb-3",children:e("kpi.management.sections.energyConsumption")}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 rounded-lg border border-cyan-200 dark:border-cyan-700",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["18. ",e("kpi.weekly.consoEau")]}),r.jsxs("p",{className:"text-lg font-bold text-cyan-600",children:[g.water_consumption??0," m"]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 rounded-lg border border-cyan-200 dark:border-cyan-700",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["19. ",e("kpi.weekly.consoElectricite")]}),r.jsxs("p",{className:"text-lg font-bold text-cyan-600",children:[g.electricity_consumption??0," kWh"]})]})]})]}),g.rejection_reason&&r.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200 mb-1",children:e("kpi.management.previouslyRejected")}),r.jsx("p",{className:"text-red-700 dark:text-red-300 text-sm",children:g.rejection_reason}),g.rejected_at&&r.jsx("p",{className:"text-red-600 dark:text-red-300 text-xs mt-2",children:e("kpi.management.rejectedOn",{date:ke(g.rejected_at)})})]}),g.notes&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:e("kpi.notes")}),r.jsx("p",{className:"bg-gray-50 dark:bg-gray-900 p-3 rounded-lg text-gray-700 dark:text-gray-100",children:g.notes})]}),b?r.jsxs("div",{className:"flex items-center justify-center py-4",children:[r.jsx(Re,{className:"w-5 h-5 animate-spin text-gray-400"}),r.jsx("span",{className:"ml-2 text-sm text-gray-500 dark:text-gray-400",children:e("kpi.dailyKpi.loadingDaily")})]}):r.jsx(r$,{dailySnapshots:h}),he(g)&&r.jsxs("div",{className:"flex gap-3 pt-4 border-t dark:border-gray-700",children:[r.jsxs("button",{onClick:()=>G(g.id),disabled:N,className:"btn-primary flex-1 flex items-center justify-center gap-2",children:[r.jsx(fn,{className:"w-4 h-4"}),e("kpi.approve")]}),r.jsxs("button",{onClick:()=>{_(!0)},className:"btn-secondary flex-1 flex items-center justify-center gap-2 text-red-600 dark:text-red-400 border-red-200 dark:border-red-700 hover:bg-red-50 dark:hover:bg-red-900/30",children:[r.jsx(qt,{className:"w-4 h-4"}),e("kpi.reject")]})]})]})}),r.jsx(nt,{isOpen:R,onClose:()=>O(!1),title:e("hseExport.title"),children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[r.jsx(Tr,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-100",children:e("hseExport.exportButton")}),r.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e("hseExport.description")})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("hseExport.selectProject")," *"]}),r.jsxs("select",{value:I.project_id,onChange:U=>E({...I,project_id:U.target.value}),className:"input w-full",children:[r.jsx("option",{value:"",children:e("hseExport.selectProject")}),H.map(U=>r.jsx("option",{value:U.id,children:Wt(U)},U.id))]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("hseExport.week")," *"]}),r.jsx(Ml,{value:i(I.year,I.week),onChange:U=>{const xe=o(U);xe&&E(J=>({...J,year:parseInt(xe.weekYear),week:parseInt(xe.week)}))},className:"w-full",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("hseExport.year")," *"]}),r.jsx(So,{value:I.year,onChange:U=>E(xe=>({...xe,year:parseInt(U)})),className:"w-full",required:!0})]})]}),r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:[r.jsxs("p",{className:"font-medium mb-1",children:[e("hseExport.sheets.projectInfo"),":"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[r.jsxs("span",{children:[" ",e("hseExport.sheets.projectInfo")]}),r.jsxs("span",{children:[" ",e("hseExport.sheets.hseReporting")]}),r.jsxs("span",{children:[" ",e("hseExport.sheets.incidents")]}),r.jsxs("span",{children:[" ",e("hseExport.sheets.deviationsSgtm")]}),r.jsxs("span",{children:[" ",e("hseExport.sheets.deviationsSt")]}),r.jsxs("span",{children:[" ",e("hseExport.sheets.categories")]}),r.jsxs("span",{children:[" ",e("hseExport.sheets.certifications")]}),r.jsxs("span",{children:[" ",e("hseExport.sheets.personnel")]}),r.jsxs("span",{children:[" ",e("hseExport.sheets.training")]}),r.jsxs("span",{children:[" ",e("hseExport.sheets.inspections")]}),r.jsxs("span",{children:[" ",e("hseExport.sheets.workPermits")]})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t dark:border-gray-700",children:[r.jsx("button",{onClick:()=>O(!1),className:"btn-secondary flex-1",disabled:q,children:e("common.cancel")}),r.jsx("button",{onClick:je,disabled:q||!I.project_id,className:"btn-primary flex-1 flex items-center justify-center gap-2",children:q?r.jsxs(r.Fragment,{children:[r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e("hseExport.exporting")]}):r.jsxs(r.Fragment,{children:[r.jsx(jr,{className:"w-4 h-4"}),e("hseExport.exportButton")]})})]})]})})]})}const Dje=Object.freeze(Object.defineProperty({__proto__:null,default:Mje},Symbol.toStringTag,{value:"Module"})),Ije=e=>{if(!e)return null;const t=/filename\*=UTF-8''([^;]+)|filename="?([^";]+)"?/i.exec(e),a=decodeURIComponent(t?.[1]??t?.[2]??"");return a!==""?a:null},Lje=(e,t)=>{const a=URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.download=t??"attachment",document.body.appendChild(n),n.click(),n.remove(),setTimeout(()=>URL.revokeObjectURL(a),5e3)},zE=e=>{const t=String(e||"").toLowerCase();return t==="critical"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":t==="high"?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300":t==="medium"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300":t==="low"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300"};function $je(){const{t:e}=ut(),[t,a]=f.useState(!1),[n,s]=f.useState([]),[i,o]=f.useState({current_page:1,last_page:1,total:0,per_page:25}),[l,c]=f.useState(null),[d,u]=f.useState(null),[m,p]=f.useState(!1),[g,x]=f.useState(!1),[h,v]=f.useState(!1),b=async(A=1)=>{try{a(!0);const M=await cg.list({per_page:25,page:A});s(M.data?.data??[]),o(M.data?.meta??{current_page:1,last_page:1,total:0,per_page:25})}catch(M){K.error(M.response?.data?.message??e("errors.somethingWentWrong"))}finally{a(!1)}};f.useEffect(()=>{b(1)},[]);const y=async A=>{try{c(A),p(!0),x(!0);const M=await cg.getById(A);u(M.data?.data??null)}catch(M){K.error(M.response?.data?.message??e("errors.somethingWentWrong")),p(!1),u(null),c(null)}finally{x(!1)}},j=()=>{p(!1),u(null),c(null)},_=async()=>{if(d?.id)try{v(!0);const A=await cg.downloadAttachment(d.id),M=A.data,R=Ije(A.headers?.["content-disposition"]||A.headers?.["Content-Disposition"])||d?.attachment_original_name||"attachment";Lje(M,R)}catch(A){K.error(A.response?.data?.message??e("errors.somethingWentWrong"))}finally{v(!1)}},w=(i?.current_page??1)>1,k=(i?.current_page??1)<(i?.last_page??1),N=!t&&n.length===0,P=f.useMemo(()=>n.map(A=>{const M=A?.created_at?new Date(A.created_at):null;return{id:A.id,comment:A.comment,severity:A.severity,userName:A.user?.name??null,role:A.user?.role??A.role??null,createdAt:M,hasAttachment:!!A.attachment_path}}),[n]);return r.jsxs("div",{className:"p-4 sm:p-6",children:[r.jsxs("div",{className:"flex items-center justify-between gap-3 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-hse-primary/10 flex items-center justify-center",children:r.jsx(_5,{className:"w-5 h-5 text-hse-primary"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:e("bugReports.title")}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("bugReports.subtitle")})]})]}),r.jsxs("button",{onClick:()=>b(i?.current_page??1),className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 text-sm",disabled:t,children:[r.jsx(cd,{className:t?"w-4 h-4 animate-spin":"w-4 h-4"}),e("common.refresh")]})]}),t&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e("common.loading")]}),N&&r.jsx("div",{className:"rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 p-6 text-center",children:r.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:e("common.noData")})}),!t&&P.length>0&&r.jsxs("div",{className:"space-y-3",children:[P.map(A=>r.jsx("div",{className:"rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 p-4",children:r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold "+zE(A.severity),children:A.severity??e("bugReports.unknownSeverity")}),A.hasAttachment&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300",children:[r.jsx(jr,{className:"w-3 h-3"}),e("bugReports.hasAttachment")]})]}),r.jsx("div",{className:"mt-2 text-sm text-gray-900 dark:text-gray-100 font-semibold line-clamp-2",children:A.comment}),r.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-x-4 gap-y-1 text-xs text-gray-500 dark:text-gray-400",children:[r.jsxs("span",{className:"inline-flex items-center gap-1",children:[r.jsx(Zd,{className:"w-3.5 h-3.5"}),A.userName??e("common.unknown")," ",A.role?`(${A.role})`:""]}),r.jsxs("span",{className:"inline-flex items-center gap-1",children:[r.jsx(Na,{className:"w-3.5 h-3.5"}),A.createdAt?`${A.createdAt.toLocaleDateString()} ${A.createdAt.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:e("common.unknown")]})]})]}),r.jsxs("button",{onClick:()=>y(A.id),className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-hse-primary text-white text-sm font-semibold hover:bg-hse-primary/90",children:[r.jsx(_r,{className:"w-4 h-4"}),e("common.view")]})]})},A.id)),r.jsxs("div",{className:"flex items-center justify-between pt-2",children:[r.jsx("button",{onClick:()=>w&&b((i?.current_page??1)-1),disabled:!w,className:"px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 text-sm disabled:opacity-50",children:e("common.previous")}),r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e("common.page")," ",i?.current_page??1," ",e("common.of")," ",i?.last_page??1]}),r.jsx("button",{onClick:()=>k&&b((i?.current_page??1)+1),disabled:!k,className:"px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 text-sm disabled:opacity-50",children:e("common.next")})]})]}),r.jsx(nt,{isOpen:m,onClose:j,title:e("bugReports.detailsTitle"),size:"lg",children:g?r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e("common.loading")]}):d?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"rounded-xl border border-gray-200 dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-800/40",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold "+zE(d.severity),children:d.severity??e("bugReports.unknownSeverity")}),d.impact&&r.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300",children:[e("bugReports.impact"),": ",d.impact]}),d.reproducibility&&r.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300",children:[e("bugReports.reproducibility"),": ",d.reproducibility]})]}),r.jsx("div",{className:"mt-3 text-sm text-gray-900 dark:text-gray-100 font-semibold",children:d.comment}),d.extra_notes&&r.jsx("div",{className:"mt-2 text-sm text-gray-700 dark:text-gray-200 whitespace-pre-wrap",children:d.extra_notes})]}),d.attachment_path&&r.jsx("div",{className:"rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-900 dark:text-gray-100",children:[r.jsx(Qt,{className:"w-4 h-4 text-amber-500"}),e("bugReports.attachment")]}),r.jsx("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400 break-all",children:d.attachment_original_name??d.attachment_path})]}),r.jsxs("button",{onClick:_,disabled:h,className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-hse-primary text-white text-sm font-semibold hover:bg-hse-primary/90 disabled:opacity-50",children:[h?r.jsx(Re,{className:"w-4 h-4 animate-spin"}):r.jsx(jr,{className:"w-4 h-4"}),e("common.download")]})]})}),r.jsx("div",{className:"flex items-center justify-end",children:r.jsx("button",{onClick:j,className:"px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 text-sm font-semibold",children:e("common.close")})})]}):r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:e("common.noData")})})]})}const Rje=Object.freeze(Object.defineProperty({__proto__:null,default:$je},Symbol.toStringTag,{value:"Module"})),Q_=e=>{const t=String(e??"").toLowerCase().trim();return t?t.replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s._-]/g," ").split(/\s+/).filter(Boolean).map(a=>a.endsWith("ies")&&a.length>4?a.slice(0,-3)+"y":a.endsWith("es")&&a.length>3?a.slice(0,-2):a.endsWith("s")&&a.length>2?a.slice(0,-1):a).join(" "):""},qje=(e,t)=>{const a=String(e),n=String(t);if(a===n)return 0;if(!a)return n.length;if(!n)return a.length;const s=a.length,i=n.length,o=Array.from({length:s+1},()=>Array(i+1).fill(0));for(let l=0;l<=s;l++)o[l][0]=l;for(let l=0;l<=i;l++)o[0][l]=l;for(let l=1;l<=s;l++){const c=a[l-1];for(let d=1;d<=i;d++){const u=n[d-1],m=c===u?0:1;o[l][d]=Math.min(o[l-1][d]+1,o[l][d-1]+1,o[l-1][d-1]+m)}}return o[s][i]},Fje=(e,t)=>{const a=Q_(e),n=Q_(t);if(!a)return 1;if(!n)return 0;if(n.includes(a))return .95;const s=a.split(" "),i=n.split(" ");let o=0;for(const l of s)if(l)for(const c of i){if(!c)continue;if(c.includes(l)||l.includes(c)){o=Math.max(o,.85);continue}const d=qje(l,c),u=Math.max(1,Math.max(l.length,c.length)),m=1-d/u;o=Math.max(o,m)}return a.length<=2?o*.75:o},BE=e=>{const t=Number(e);if(!Number.isFinite(t)||t<=0)return"";const a=["B","KB","MB","GB"],n=Math.min(a.length-1,Math.floor(Math.log(t)/Math.log(1024)));return`${(t/Math.pow(1024,n)).toFixed(n===0?0:1)} ${a[n]}`},zje=e=>{const t=String(e??"").toLowerCase();return t==="pdf"||t==="doc"||t==="docx"?pr:t==="xls"||t==="xlsx"||t==="csv"?Tr:wz},Bje=[{id:"folder-sst",kind:"folder",name:"SST / Scurit",path:["Library"],updated_at:"2026-02-10",count:18},{id:"folder-procedures",kind:"folder",name:"Procdures",path:["Library"],updated_at:"2026-02-08",count:42},{id:"file-epi-guide",kind:"file",name:"Guide EPI - Distribution et traabilit",ext:"pdf",size:218e4,path:["Library","SST / Scurit"],updated_at:"2026-02-07",url:"#"},{id:"file-toolbox",kind:"file",name:"Toolbox Meeting - Checklist",ext:"docx",size:41e4,path:["Library","SST / Scurit"],updated_at:"2026-01-29",url:"#"},{id:"file-training-matrix",kind:"file",name:"Matrice des formations (modle)",ext:"xlsx",size:188e3,path:["Library","Procdures"],updated_at:"2026-01-11",url:"#"}];function Wje(){const{t:e}=ut(),{user:t,isAdmin:a}=At(),n=a?.()||t?.role==="dev",[s,i]=f.useState(""),[o,l]=f.useState("all"),[c,d]=f.useState("relevance"),[u,m]=f.useState("desc"),[p,g]=f.useState([]),x=f.useRef(null),h=f.useMemo(()=>{const b=Q_(s),y=Bje.map(_=>{const w=`${_.name} ${(_.path||[]).join(" / ")}`,k=b?Fje(b,w):1;return{..._,_score:k}}).filter(_=>o!=="all"&&_.kind!==o?!1:b?_._score>=.55:!0),j=u==="asc"?1:-1;return y.sort((_,w)=>c==="name"?_.name.localeCompare(w.name)*j:c==="updated_at"?String(_.updated_at).localeCompare(String(w.updated_at))*j:w._score!==_._score?(w._score-_._score)*j:String(w.updated_at).localeCompare(String(_.updated_at))),y},[s,o,c,u]),v=b=>{if(b.kind==="file"){if(!b.url||b.url==="#"){K(e("common.comingSoon"));return}window.open(b.url,"_blank","noopener,noreferrer")}};return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e("library.title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:e("library.subtitle")})]}),n&&r.jsx("div",{className:"w-full lg:w-[420px]",children:r.jsxs("div",{className:"card p-4 border border-gray-200 dark:border-gray-700 bg-white/70 dark:bg-gray-900/40",children:[r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Bz,{className:"w-4 h-4 text-hse-primary"}),r.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:e("library.adminUpload")})]}),r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>x.current?.click(),children:e("library.selectFiles")})]}),r.jsx("input",{ref:x,type:"file",multiple:!0,className:"hidden",onChange:b=>{const y=Array.from(b.target.files||[]);g(y)},accept:".pdf,.doc,.docx,.xls,.xlsx,.csv"}),r.jsx("div",{className:"mt-3",children:p.length===0?r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("library.uploadHint")}):r.jsxs("div",{className:"space-y-2",children:[p.slice(0,4).map(b=>r.jsxs("div",{className:"flex items-center justify-between gap-3 text-xs",children:[r.jsx("div",{className:"truncate text-gray-700 dark:text-gray-200",children:b.name}),r.jsx("div",{className:"text-gray-400",children:BE(b.size)})]},b.name)),p.length>4&&r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",p.length-4," ",e("common.more")]}),r.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{g([]),x.current&&(x.current.value="")},children:e("common.clear")}),r.jsx("button",{type:"button",className:"btn-primary",onClick:()=>K(e("common.comingSoon")),children:e("library.upload")})]})]})})]})})]}),r.jsxs("div",{className:"card p-5",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Yr,{className:"w-4 h-4 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"}),r.jsx("input",{value:s,onChange:b=>i(b.target.value),placeholder:e("library.searchPlaceholder"),className:"input pl-10 pr-10"}),s&&r.jsx("button",{type:"button",onClick:()=>i(""),className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-800","aria-label":e("common.clear"),title:e("common.clear"),children:r.jsx(qt,{className:"w-4 h-4 text-gray-500"})})]}),r.jsx("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:e("library.searchHint")})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[r.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white/70 dark:bg-gray-900/40 px-3 py-2",children:[r.jsx(ki,{className:"w-4 h-4 text-gray-400"}),r.jsxs("select",{value:o,onChange:b=>l(b.target.value),className:"bg-transparent text-sm text-gray-900 dark:text-gray-100 border-none focus:ring-0",children:[r.jsx("option",{value:"all",children:e("common.all")}),r.jsx("option",{value:"folder",children:e("library.folders")}),r.jsx("option",{value:"file",children:e("library.files")})]})]}),r.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white/70 dark:bg-gray-900/40 px-3 py-2",children:[u==="asc"?r.jsx(JS,{className:"w-4 h-4 text-gray-400"}):r.jsx(QS,{className:"w-4 h-4 text-gray-400"}),r.jsxs("select",{value:c,onChange:b=>d(b.target.value),className:"bg-transparent text-sm text-gray-900 dark:text-gray-100 border-none focus:ring-0",children:[r.jsx("option",{value:"relevance",children:e("library.sort.relevance")}),r.jsx("option",{value:"updated_at",children:e("library.sort.updated")}),r.jsx("option",{value:"name",children:e("library.sort.name")})]}),r.jsx("button",{type:"button",onClick:()=>m(b=>b==="asc"?"desc":"asc"),className:"ml-1 p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800","aria-label":e("library.toggleSort"),title:e("library.toggleSort"),children:u==="asc"?r.jsx(JS,{className:"w-4 h-4 text-gray-500"}):r.jsx(QS,{className:"w-4 h-4 text-gray-500"})})]})]})]}),r.jsx("div",{className:"mt-5",children:h.length===0?r.jsxs("div",{className:"py-10 text-center",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-hse-primary/10 mb-3",children:r.jsx(Yr,{className:"w-5 h-5 text-hse-primary"})}),r.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:e("library.noResults")}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("library.noResultsHint")})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3",children:h.map(b=>{const y=b.kind==="folder"?kz:zje(b.ext);return r.jsxs("div",{className:"rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 p-4 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{className:"flex items-start gap-3 min-w-0",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-hse-primary/10 flex items-center justify-center flex-shrink-0",children:r.jsx(y,{className:"w-5 h-5 text-hse-primary"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:b.name}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 truncate",children:(b.path||[]).join(" / ")})]})]}),b.kind==="file"&&r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>v(b),children:r.jsx(jr,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[r.jsx("div",{children:b.kind==="folder"?`${b.count??0} ${e("library.items")}`:`${String(b.ext||"").toUpperCase()}  ${BE(b.size)}`}),r.jsx("div",{children:b.updated_at})]}),b.kind==="file"&&r.jsx("div",{className:"mt-3",children:r.jsxs("button",{type:"button",onClick:()=>v(b),className:"w-full btn-primary flex items-center justify-center gap-2",children:[r.jsx(jr,{className:"w-4 h-4"}),e("library.download")]})})]},b.id)})})})]})]})}const Uje=Object.freeze(Object.defineProperty({__proto__:null,default:Wje},Symbol.toStringTag,{value:"Module"}));function Hje(){const[e,t]=f.useState(null),[a,n]=f.useState(!0),[s,i]=f.useState(Hr().year),[o,l]=f.useState("all"),[c,d]=f.useState(""),[u,m]=f.useState([]),[p,g]=f.useState(null),{user:x}=At(),{projectScope:h}=Wl(),{t:v}=ut(),b=f.useRef(null);f.useEffect(()=>{y()},[s,o,c,h]),f.useEffect(()=>{(async()=>{try{const S={};x?.role==="dev"&&h===Va.ASSIGNED&&(S.scope="assigned");const I=await it.getPoles(S),E=I.data?.data?.poles??I.data?.poles??[];m(Array.isArray(E)?E:[])}catch{m([])}})()},[x?.role,h]),f.useEffect(()=>{e&&b.current&&requestAnimationFrame(()=>{b.current&&b.current.scrollTo({left:b.current.scrollWidth,behavior:"auto"})})},[e,s]);const y=async()=>{try{n(!0);const q={year:s};c&&(q.pole=c),o!=="all"&&(q.project_id=o),x?.role==="dev"&&h===Va.ASSIGNED&&(q.scope="assigned");const S=await Ma.getUserDashboard(q);t(S.data.data)}catch{K.error(v("errors.failedToLoad"))}finally{n(!1)}},j=v("datePicker.months"),_=e?.stats??{},w=e?.kpi_summary??{},k=e?.training_data??{},N=e?.inspection_data??{},P={...w,total_trainings:k?.total??w.total_trainings??0,total_inspections:N?.stats?.total??w.total_inspections??0},A=e?.projects??[],M=x?.project_list_preference??"code",R=f.useMemo(()=>Ir(A,M),[A,M]),O=e?.recent_reports??[];return f.useEffect(()=>{if(!c||o==="all")return;A.some(S=>String(S.id)===String(o)&&S?.pole===c)||l("all")},[c,o,A]),a?r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx(Re,{className:"w-8 h-8 animate-spin text-hse-primary"})}):r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[v("dashboard.welcome"),", ",x?.name?.split(" ")[0],"!"]}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:v("dashboard.overview")})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 px-3 py-2",children:[r.jsx(Na,{className:"w-4 h-4 text-gray-400"}),r.jsx("select",{value:s,onChange:q=>i(Number(q.target.value)),className:"bg-transparent border-none focus:ring-0 text-sm font-medium dark:text-gray-200",children:[...Array(5)].map((q,S)=>{const I=Hr().year+1-S;return r.jsx("option",{value:I,children:I},I)})})]}),u.length>0&&r.jsx("div",{className:"flex items-center gap-2 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 px-3 py-2",children:r.jsxs("select",{value:c,onChange:q=>{d(q.target.value),l("all")},className:"bg-transparent border-none focus:ring-0 text-sm font-medium dark:text-gray-200",children:[r.jsx("option",{value:"",children:v("common.allPoles")}),u.map(q=>r.jsx("option",{value:q,children:q},q))]})}),r.jsxs(xa,{to:"/kpi/submit",className:"btn-primary flex items-center gap-2",children:[r.jsx(_n,{className:"w-4 h-4"}),v("kpi.submission")]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(Fh,{title:v("nav.myProjects"),value:_.assigned_projects??0,icon:hn,color:"blue"}),r.jsx(Fh,{title:v("dashboard.recentSubmissions"),value:_.reports_submitted??0,subtitle:`${s}`,icon:pr,color:"green"}),r.jsx(Fh,{title:v("dashboard.pendingReports"),value:_.pending_approval??0,icon:oa,color:"amber"}),r.jsx(Fh,{title:v("dashboard.activeMachines"),value:_.active_machines??0,icon:cf,color:"purple"})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4",children:[r.jsx(pm,{title:v("kpi.accidents.title"),value:P.total_accidents??0,icon:Qt,color:P.total_accidents>0?"red":"green"}),r.jsx(pm,{title:v("kpi.training.title"),value:P.total_trainings??0,icon:js,color:"blue"}),r.jsx(pm,{title:v("kpi.inspections.title"),value:P.total_inspections??0,icon:Ra,color:"green"}),r.jsx(pm,{title:v("dashboard.avgTf"),value:Number(P.avg_tf??0).toFixed(2),icon:jo,color:"amber"}),r.jsx(pm,{title:v("dashboard.avgTg"),value:Number(P.avg_tg??0).toFixed(2),icon:jo,color:"purple"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"card-header flex items-center justify-between",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:v("nav.myProjects")}),r.jsx(xa,{to:"/my-projects",className:"text-sm text-hse-primary hover:underline",children:v("common.view")})]}),r.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:[A.slice(0,4).map(q=>r.jsx("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-hse-primary/10 dark:bg-hse-primary/20 rounded-lg flex items-center justify-center",children:r.jsx(hn,{className:"w-5 h-5 text-hse-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:q.name}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:q.code})]})]}),r.jsx(xa,{to:`/kpi/submit/${q.id}`,className:"btn-outline text-xs py-1 px-3",children:v("kpi.submission")})]})},q.id)),A.length===0&&r.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:v("projects.noProjects")})]})]}),(()=>{const q=O.filter(S=>S.status==="draft");return q.length===0?null:r.jsxs("div",{className:"card border-amber-200 dark:border-amber-700 bg-amber-50/30 dark:bg-amber-900/20",children:[r.jsxs("div",{className:"card-header flex items-center justify-between bg-amber-50 dark:bg-amber-900/30 border-b border-amber-200 dark:border-amber-700",children:[r.jsxs("h3",{className:"font-semibold text-amber-900 dark:text-amber-300 flex items-center gap-2",children:[r.jsx(cd,{className:"w-4 h-4"}),v("dashboard.draftsToComplete")]}),r.jsxs("span",{className:"bg-amber-100 dark:bg-amber-800 text-amber-800 dark:text-amber-100 text-xs font-medium px-2 py-1 rounded-full",children:[q.length," ",q.length>1?v("dashboard.draftLabelPlural"):v("dashboard.draftLabel")]})]}),r.jsx("div",{className:"divide-y divide-amber-100 dark:divide-amber-800",children:q.map(S=>r.jsx("div",{className:"p-4 hover:bg-amber-50/50 dark:hover:bg-amber-900/30",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:S.project?.name}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:S.week_number?v("dashboard.weekLabel").replace("{{week}}",S.week_number).replace("{{year}}",S.report_year):v("dashboard.monthYearLabel").replace("{{month}}",j[S.report_month-1]).replace("{{year}}",S.report_year)}),S.rejection_reason&&r.jsxs("div",{className:"mt-2 p-2 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700 rounded text-xs text-red-700 dark:text-red-300",children:[r.jsxs("strong",{children:[v("kpi.rejectionReason"),":"]})," ",S.rejection_reason]})]}),r.jsxs(xa,{to:`/kpi/edit/${S.id}`,className:"btn-primary text-sm py-2 px-4 flex items-center gap-2",children:[r.jsx(Ol,{className:"w-4 h-4"}),v("common.edit")]})]})},S.id))})]})})(),r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"card-header flex items-center justify-between",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:v("dashboard.recentSubmissions")}),r.jsx(xa,{to:"/kpi/history",className:"text-sm text-hse-primary hover:underline",children:v("common.view")})]}),r.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:[O.filter(q=>q.status!=="draft").slice(0,4).map(q=>r.jsx("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:q.project?.name??""}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:q.week_number?v("dashboard.weekLabel").replace("{{week}}",q.week_number).replace("{{year}}",q.report_year):v("dashboard.monthYearLabel").replace("{{month}}",j[q.report_month-1]).replace("{{year}}",q.report_year)})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[q.status==="approved"&&r.jsx(Xt,{className:"w-5 h-5 text-green-500"}),q.status==="rejected"&&r.jsx(Zn,{className:"w-5 h-5 text-red-500"}),q.status==="submitted"&&r.jsx(oa,{className:"w-5 h-5 text-amber-500"}),r.jsx("span",{className:`badge ${q.status==="approved"?"badge-success":q.status==="submitted"?"badge-warning":q.status==="rejected"?"badge-danger":"badge-info"}`,children:v(`kpi.status.${q.status}`)})]})]})},q.id)),O.filter(q=>q.status!=="draft").length===0&&r.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:v("kpi.noReports")})]})]})]}),r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"card-header flex items-center justify-between",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:v("dashboard.submissionStatus")}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("select",{value:o,onChange:q=>l(q.target.value),className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg px-3 py-1.5 text-sm font-medium dark:text-gray-200 focus:ring-2 focus:ring-hse-primary",children:[r.jsx("option",{value:"all",children:v("common.allProjects")}),R.map(q=>r.jsx("option",{value:q.id,children:Wt(q)},q.id))]}),r.jsx("select",{value:s,onChange:q=>i(Number(q.target.value)),className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg px-3 py-1.5 text-sm font-medium dark:text-gray-200 focus:ring-2 focus:ring-hse-primary",children:[...Array(5)].map((q,S)=>{const I=Hr().year+1-S;return r.jsx("option",{value:I,children:I},I)})})]})]}),r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:()=>b.current?.scrollBy({left:-300,behavior:"smooth"}),className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 bg-white/90 dark:bg-gray-700/90 hover:bg-white dark:hover:bg-gray-600 shadow-lg rounded-full p-2 border dark:border-gray-600",children:r.jsx(Do,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),r.jsx("button",{onClick:()=>b.current?.scrollBy({left:300,behavior:"smooth"}),className:"absolute right-0 top-1/2 -translate-y-1/2 z-10 bg-white/90 dark:bg-gray-700/90 hover:bg-white dark:hover:bg-gray-600 shadow-lg rounded-full p-2 border dark:border-gray-600",children:r.jsx(Io,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),r.jsx("div",{ref:b,className:"flex gap-2 overflow-x-auto scroll-smooth px-10 py-3 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",style:{scrollbarWidth:"thin"},children:(()=>{const q=Hr(),S=s<q.year?52:q.week;return Array.from({length:S},(I,E)=>E+1)})().map(q=>{const S=e?.weekly_status?.find(F=>F.week===q),I=Hr(),E=s<I.year||s===I.year&&q<I.week,W=q===I.week&&s===I.year;let B="not_submitted",C=S?.projects??[];o==="all"?B=S?.status??"not_submitted":B=C.find(ke=>ke.project_id===parseInt(o))?.status??"not_submitted";const D=S?.approved_count??0,z=S?.submitted_count??0,L=S?.draft_count??0,X=S?.total_projects??0;let H="";if(B==="partial"&&X>0){const F=[];D>0&&F.push("rgb(34, 197, 94)"),z>0&&F.push("rgb(251, 191, 36)"),L>0&&F.push("rgb(96, 165, 250)"),X-D-z-L>0&&F.push("rgb(254, 202, 202)"),H=F.length>1?`linear-gradient(135deg, ${F.join(", ")})`:""}return r.jsxs("div",{"data-week":q,className:`relative flex-shrink-0 w-14 p-2 rounded-lg text-center transition-all cursor-pointer ${p===q?"ring-2 ring-gray-900 ring-offset-2 scale-110":""} ${W&&p!==q?"ring-2 ring-hse-primary ring-offset-2":""} ${B==="approved"?"bg-green-500 text-white":B==="partial"?"text-white":B==="submitted"?"bg-amber-400 text-white":B==="draft"?"bg-blue-400 text-white":E?"bg-red-100 text-red-600 hover:bg-red-200":"bg-gray-100 text-gray-500"}`,style:B==="partial"&&H?{background:H}:{},onClick:()=>g(p===q?null:q),children:[r.jsxs("p",{className:"text-xs font-medium",children:[v("dashboard.weekShortPrefix"),q]}),o==="all"&&X>1?r.jsxs("p",{className:"text-xs font-bold mt-0.5",children:[D+z,"/",X]}):r.jsx("p",{className:"text-lg font-bold mt-0.5",children:B==="approved"?"":B==="partial"?"":B==="submitted"?"":B==="draft"?"":E?"!":"-"})]},`week-${s}-${q}`)})})]}),p&&(()=>{const S=e?.weekly_status?.find(B=>B.week===p)?.projects||[],I=Hr(),E=p===I.week&&s===I.year,W=s<I.year||s===I.year&&p<I.week;return S.length===0?null:r.jsxs("div",{className:"mt-3 p-3 bg-gray-900 text-white text-xs rounded-lg shadow-xl",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-gray-700 pb-2 mb-2",children:[r.jsxs("p",{className:"font-semibold",children:[v("dashboard.weekDetailsTitle").replace("{{week}}",p),E&&r.jsxs("span",{className:"ml-2 text-hse-primary",children:["(",v("dashboard.currentWeekLabel"),")"]})]}),r.jsx("button",{onClick:()=>g(null),className:"text-gray-400 hover:text-white",children:""})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:S.map(B=>{const D=B.status==="not_submitted"&&W,z=B.project_name||B.project_code,L=B.project_name&&B.project_code?`${B.project_name} (${B.project_code})`:B.project_name||B.project_code||"";return r.jsxs("div",{className:"flex items-center justify-between gap-2 bg-gray-800 rounded px-2 py-1.5",children:[r.jsx("span",{className:"truncate font-medium",title:L,children:z}),r.jsx("span",{className:`flex-shrink-0 px-1.5 py-0.5 rounded text-[10px] font-medium ${B.status==="approved"?"bg-green-500":B.status==="submitted"?"bg-amber-400":B.status==="draft"?"bg-blue-400":D?"bg-red-400":"bg-gray-500"}`,children:B.status==="approved"?v("status.approved"):B.status==="submitted"?v("status.pending"):B.status==="draft"?v("status.draft"):v(D?"status.missing":"status.notSubmitted")})]},B.project_id)})})]})})(),r.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 pt-4 mt-2 border-t dark:border-gray-700 text-xs text-gray-600 dark:text-gray-400",children:[r.jsxs("span",{className:"flex items-center gap-1.5",children:[r.jsx("span",{className:"w-3 h-3 rounded bg-green-500"})," ",v("status.approved")]}),r.jsxs("span",{className:"flex items-center gap-1.5",children:[r.jsx("span",{className:"w-3 h-3 rounded bg-gradient-to-br from-green-400 to-amber-400"})," ",v("status.partial")]}),r.jsxs("span",{className:"flex items-center gap-1.5",children:[r.jsx("span",{className:"w-3 h-3 rounded bg-amber-400"})," ",v("status.pending")]}),r.jsxs("span",{className:"flex items-center gap-1.5",children:[r.jsx("span",{className:"w-3 h-3 rounded bg-blue-400"})," ",v("status.draft")]}),r.jsxs("span",{className:"flex items-center gap-1.5",children:[r.jsx("span",{className:"w-3 h-3 rounded bg-red-100 border border-red-200"})," ",v("status.missing")]}),r.jsxs("span",{className:"flex items-center gap-1.5",children:[r.jsx("span",{className:"w-3 h-3 rounded ring-2 ring-hse-primary ring-offset-1"})," ",v("dashboard.currentWeekLabel")]})]})]})]})]})}function Fh({title:e,value:t,subtitle:a,icon:n,color:s}){const i={blue:"bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400",green:"bg-green-50 text-green-600 dark:bg-green-900/30 dark:text-green-400",amber:"bg-amber-50 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400",purple:"bg-purple-50 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400"};return r.jsx("div",{className:"stat-card",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mt-1",children:t}),a&&r.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:a})]}),r.jsx("div",{className:`p-3 rounded-lg ${i[s]}`,children:r.jsx(n,{className:"w-5 h-5"})})]})})}function pm({title:e,value:t,icon:a,color:n}){const s={red:"border-red-200 bg-red-50 dark:border-red-700 dark:bg-red-900/50",green:"border-green-200 bg-green-50 dark:border-green-700 dark:bg-green-900/50",blue:"border-blue-200 bg-blue-50 dark:border-blue-700 dark:bg-blue-900/50",amber:"border-amber-200 bg-amber-50 dark:border-amber-700 dark:bg-amber-900/50",purple:"border-purple-200 bg-purple-50 dark:border-purple-700 dark:bg-purple-900/50"},i={red:"text-red-600 dark:text-red-400",green:"text-green-600 dark:text-green-400",blue:"text-blue-600 dark:text-blue-400",amber:"text-amber-600 dark:text-amber-400",purple:"text-purple-600 dark:text-purple-400"};return r.jsxs("div",{className:`rounded-xl border-2 p-4 ${s[n]}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(a,{className:`w-5 h-5 ${i[n]}`}),r.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:e})]}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:t})]})}const Kje=Object.freeze(Object.defineProperty({__proto__:null,default:Hje},Symbol.toStringTag,{value:"Module"}));function Vje({showKpiButton:e=!0}){const{t,language:a}=ut(),{user:n}=At(),{projectScope:s}=Wl(),i=Zr(),[o,l]=f.useState([]),[c,d]=f.useState(!0),[u,m]=f.useState(!1),[p,g]=f.useState(null),x=n?.role==="responsable"||n?.role==="hse_manager"||n?.role==="admin"||n?.role==="works_director"||n?.role==="hse_director"||n?.role==="hr_director"||n?.role==="pole_director",v=i.pathname.startsWith("/sor")?"/sor/projects":"/projects",b=_=>{g(_),m(!0)};f.useEffect(()=>{y()},[s]);const y=async()=>{try{d(!0);const _={per_page:50};n?.role==="dev"&&s===Va.ASSIGNED&&(_.scope="assigned");const w=await it.getAll(_);l(w.data.data||[])}catch{K.error("Failed to load projects")}finally{d(!1)}},j={active:"badge-success",completed:"badge-info",on_hold:"badge-warning",cancelled:"badge-danger"};return c?r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx(Re,{className:"w-8 h-8 animate-spin text-hse-primary"})}):r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:t("nav.myProjects")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:t(e?"projects.assignedForKpi":"projects.assignedToYou")})]})}),o.length===0?r.jsxs("div",{className:"card p-12 text-center",children:[r.jsx(hn,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:t("projects.noProjects")})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6",children:o.map(_=>r.jsx("div",{className:_.is_grouping?"rounded-xl bg-gradient-to-r from-orange-400 via-amber-400 to-orange-500 p-[2px]":"",children:r.jsx("div",{className:"card hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-hse-primary/10 rounded-lg flex items-center justify-center",children:r.jsx(hn,{className:"w-6 h-6 text-hse-primary"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:_.name}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:_.code})]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-1",children:[r.jsx("span",{className:`badge ${j[_.status]}`,children:_.status.replace("_"," ")}),_.pole&&r.jsx("span",{className:"text-[11px] px-2 py-0.5 rounded-full bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-200",children:_.pole})]})]}),_.description&&r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4 line-clamp-2",children:_.description}),r.jsxs("div",{className:"space-y-2 text-sm",children:[_.location&&r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[r.jsx(bo,{className:"w-4 h-4"}),r.jsx("span",{children:_.location})]}),_.start_date&&r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[r.jsx(Na,{className:"w-4 h-4"}),r.jsxs("span",{children:["Started ",new Date(_.start_date).toLocaleDateString()]})]})]}),_.kpi_summary&&r.jsx("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:_.kpi_summary.total_accidents??0}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Accidents"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:_.kpi_summary.total_trainings??0}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Trainings"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:_.kpi_summary.total_inspections??0}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Inspections"})]})]})}),r.jsxs("div",{className:"flex items-center justify-between gap-2 mt-4 pt-4 border-t border-gray-100 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(xa,{to:`${v}/${_.id}`,className:"btn-outline btn-sm flex items-center gap-1 text-xs whitespace-nowrap",children:[r.jsx(_r,{className:"w-3 h-3"}),t("common.viewDetails")]}),x&&r.jsxs("button",{onClick:()=>b(_),className:"btn-sm flex items-center gap-1 text-xs whitespace-nowrap bg-amber-50 text-amber-700 hover:bg-amber-100 dark:bg-amber-900/30 dark:text-amber-400 dark:hover:bg-amber-900/50 border border-amber-200 dark:border-amber-800 rounded-lg",children:[r.jsx(C5,{className:"w-3 h-3"}),"Zones"]})]}),e&&r.jsxs(xa,{to:`/kpi/submit/${_.id}`,className:"btn-primary btn-sm flex items-center gap-1 text-xs whitespace-nowrap",children:[r.jsx(_n,{className:"w-3 h-3"}),t("kpi.submitKpi")]})]})]})})},_.id))}),r.jsx(wN,{projectId:p?.id,projectName:p?.name,isOpen:u,onClose:()=>{m(!1),g(null)}})]})}const Gje=Object.freeze(Object.defineProperty({__proto__:null,default:Vje},Symbol.toStringTag,{value:"Module"}));function Yje({formData:e,updateFormData:t,projects:a,t:n,poles:s,selectedPole:i,onPoleChange:o}){const{user:l}=At(),c=f.useMemo(()=>Hr(),[]),d=l?.project_list_preference??"code",u=f.useMemo(()=>{const h=Array.isArray(a)?a:[];return i?h.filter(v=>v?.pole===i):h},[a,i]),m=f.useMemo(()=>Ir(u,d),[u,d]),p=f.useMemo(()=>{const h=e.report_year||new Date().getFullYear();return L5(h)},[e.report_year]),g=h=>{const v=e.report_year||new Date().getFullYear(),b=I5(h,v);t("week_number",h),t("start_date",Im(b.start)),t("end_date",Im(b.end)),t("report_date",Im(b.start)),t("report_month",b.start.getMonth()+1)},x=h=>{t("report_year",parseInt(h)),t("week_number",""),t("start_date",""),t("end_date","")};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-12 h-12 bg-hse-primary/10 rounded-xl flex items-center justify-center",children:r.jsx(Mo,{className:"w-6 h-6 text-hse-primary"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:n("kpi.projectInfo.title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:n("kpi.projectInfo.selectProject")})]})]}),r.jsxs("div",{children:[Array.isArray(s)&&s.length>0&&r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"label",children:"Pole"}),r.jsxs(Ze,{value:i,onChange:h=>o?.(h.target.value),children:[r.jsx("option",{value:"",children:"All"}),s.map(h=>r.jsx("option",{value:h,children:h},h))]})]}),r.jsxs("label",{className:"label",children:[n("projects.projectName")," *"]}),r.jsxs(Ze,{value:e.project_id,onChange:h=>t("project_id",h.target.value),children:[r.jsx("option",{value:"",children:n("kpi.projectInfo.selectProject")}),m.map(h=>r.jsx("option",{value:h.id,children:Wt(h)},h.id))]})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[r.jsx(Na,{className:"w-5 h-5 text-hse-primary"}),n("kpi.projectInfo.reportPeriod")]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:n("kpi.reportYear")}),r.jsx(Ze,{value:e.report_year,onChange:h=>x(h.target.value),children:[...Array(5)].map((h,v)=>{const b=new Date().getFullYear()-2+v;return r.jsx("option",{value:b,children:b},b)})})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"label flex items-center gap-2",children:[r.jsx(Az,{className:"w-4 h-4"}),n("kpi.projectInfo.weekNumber")," * (Sam-Ven)"]}),r.jsxs(Ze,{value:e.week_number??"",onChange:h=>g(parseInt(h.target.value)),children:[r.jsx("option",{value:"",children:"-- Slectionner --"}),p.map(h=>r.jsxs("option",{value:h.week,className:h.week===c.week&&h.year===c.year?"font-bold":"",children:["S",String(h.week).padStart(2,"0")," - ",h.year,h.week===c.week&&h.year===c.year?` (${n("kpi.projectInfo.currentWeek")})`:""]},h.week))]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[n("kpi.projectInfo.startDate")," (Samedi)"]}),r.jsx("div",{className:"input bg-gray-100 dark:bg-gray-600 cursor-not-allowed flex items-center text-sm",children:r.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:e.start_date??""})})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[n("kpi.projectInfo.endDate")," (Vendredi)"]}),r.jsx("div",{className:"input bg-gray-100 dark:bg-gray-600 cursor-not-allowed flex items-center text-sm",children:r.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:e.end_date??""})})]})]}),e.start_date&&e.end_date&&r.jsx("div",{className:"mt-4 p-3 bg-hse-primary/10 rounded-lg",children:r.jsxs("p",{className:"text-sm text-hse-primary font-medium",children:[" Semaine ",e.week_number,": ",new Date(e.start_date).toLocaleDateString("fr-FR")," - ",new Date(e.end_date).toLocaleDateString("fr-FR")]})})]}),e.project_id&&r.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700 rounded-xl",children:[r.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-300 mb-2",children:n("projects.projectDetails")}),(()=>{const h=a.find(v=>v.id===parseInt(e.project_id));return h?r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:[n("projects.projectName"),":"]}),r.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-200",children:h.name})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:[n("projects.projectCode"),":"]}),r.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-200",children:h.code})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:[n("projects.location"),":"]}),r.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-200",children:h.location??""})]}),r.jsxs("div",{children:[r.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:[n("projects.clientName"),":"]}),r.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-200",children:h.client_name??""})]})]}):null})()]})]})}function Zje({formData:e,updateFormData:t,t:a,editableFields:n=null}){const s=(o,l)=>{t(o,l===""?0:parseFloat(l))},i=o=>n?n.includes(o):!0;return r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-12 h-12 bg-hse-primary/10 rounded-xl flex items-center justify-center",children:r.jsx(Ug,{className:"w-6 h-6 text-hse-primary"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:a("kpi.weekly.title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:a("kpi.weekly.subtitle")})]})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[r.jsx(sa,{className:"w-5 h-5 text-hse-primary"}),a("kpi.rates.hoursWorked")," & ",a("kpi.weekly.induction")]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"label flex items-center gap-2",children:[r.jsx(sa,{className:"w-4 h-4 text-gray-400"}),a("kpi.rates.hoursWorked")]}),r.jsx("input",{type:"number",min:"0",value:e.hours_worked??"",onChange:o=>s("hours_worked",o.target.value),disabled:!i("hours_worked"),className:"input",placeholder:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"label flex items-center gap-2",children:[r.jsx(js,{className:"w-4 h-4 text-gray-400"}),a("kpi.weekly.induction")]}),r.jsx("input",{type:"number",min:"0",value:e.employees_trained??"",onChange:o=>s("employees_trained",o.target.value),disabled:!i("employees_trained"),className:"input",placeholder:"0"})]})]})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[r.jsx(Qt,{className:"w-5 h-5 text-amber-500"}),a("kpi.weekly.ecarts")," & ",a("kpi.weekly.sensibilisation")]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:a("kpi.weekly.ecarts")}),r.jsx("input",{type:"number",min:"0",value:e.unsafe_conditions_reported??"",onChange:o=>s("unsafe_conditions_reported",o.target.value),disabled:!i("unsafe_conditions_reported"),className:"input",placeholder:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:a("kpi.weekly.sensibilisation")}),r.jsx("input",{type:"number",min:"0",value:e.toolbox_talks??"",onChange:o=>s("toolbox_talks",o.target.value),disabled:!i("toolbox_talks"),className:"input",placeholder:"0"})]})]})]}),r.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 rounded-xl p-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[r.jsx(Qt,{className:"w-5 h-5 text-red-500"}),a("kpi.weekly.accident"),"s"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:a("kpi.weekly.presquAccident")}),r.jsx("input",{type:"number",min:"0",value:e.near_misses??"",onChange:o=>s("near_misses",o.target.value),disabled:!i("near_misses"),className:"input",placeholder:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:a("kpi.weekly.premiersSoins")}),r.jsx("input",{type:"number",min:"0",value:e.first_aid_cases??"",onChange:o=>s("first_aid_cases",o.target.value),disabled:!i("first_aid_cases"),className:"input",placeholder:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:a("kpi.weekly.accident")}),r.jsx("input",{type:"number",min:"0",value:e.accidents??"",onChange:o=>s("accidents",o.target.value),disabled:!i("accidents"),className:"input",placeholder:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:a("kpi.weekly.joursArret")}),r.jsx("input",{type:"number",min:"0",value:e.lost_workdays??"",onChange:o=>s("lost_workdays",o.target.value),disabled:!i("lost_workdays"),className:"input",placeholder:"0"})]})]})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[r.jsx(Ra,{className:"w-5 h-5 text-green-500"}),a("kpi.weekly.inspections")," & ",a("kpi.weekly.heuresFormation")]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"label flex items-center gap-2",children:[r.jsx(Ra,{className:"w-4 h-4 text-gray-400"}),a("kpi.weekly.inspections")]}),r.jsx("input",{type:"number",min:"0",value:e.inspections_completed??"",onChange:o=>s("inspections_completed",o.target.value),disabled:!i("inspections_completed"),className:"input",placeholder:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"label flex items-center gap-2",children:[r.jsx(oa,{className:"w-4 h-4 text-gray-400"}),a("kpi.weekly.heuresFormation")]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"number",min:"0",step:"0.5",value:e.training_hours??"",onChange:o=>s("training_hours",o.target.value),disabled:!i("training_hours"),className:"input pr-10",placeholder:"0"}),r.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm",children:"h"})]})]})]})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[r.jsx(pr,{className:"w-5 h-5 text-hse-primary"}),a("kpi.weekly.permisTravail")," & ",a("kpi.weekly.mesuresDisciplinaires")]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"label flex items-center gap-2",children:[r.jsx(pr,{className:"w-4 h-4 text-gray-400"}),a("kpi.weekly.permisTravail")]}),r.jsx("input",{type:"number",min:"0",value:e.work_permits??"",onChange:o=>s("work_permits",o.target.value),disabled:!i("work_permits"),className:"input",placeholder:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:a("kpi.weekly.mesuresDisciplinaires")}),r.jsx("input",{type:"number",min:"0",value:e.corrective_actions??"",onChange:o=>s("corrective_actions",o.target.value),disabled:!i("corrective_actions"),className:"input",placeholder:"0"})]})]})]}),r.jsxs("div",{className:"bg-green-50 dark:bg-green-900/30 rounded-xl p-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[r.jsx(Ra,{className:"w-5 h-5 text-green-600"}),a("kpi.weekly.conformiteHSE")]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:a("kpi.weekly.conformiteHSE")}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"number",min:"0",max:"100",value:e.hse_compliance_rate??"",onChange:o=>s("hse_compliance_rate",o.target.value),disabled:!i("hse_compliance_rate"),className:"input pr-10",placeholder:"0"}),r.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm",children:"%"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:a("kpi.weekly.conformiteMedecine")}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"number",min:"0",max:"100",value:e.medical_compliance_rate??"",onChange:o=>s("medical_compliance_rate",o.target.value),disabled:!i("medical_compliance_rate"),className:"input pr-10",placeholder:"0"}),r.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm",children:"%"})]})]})]})]}),!1]})}function Xje({formData:e,updateFormData:t,t:a,editableFields:n=null}){const s=(o,l)=>{t(o,l===""?0:parseInt(l))},i=o=>n?n.includes(o):!1;return r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/30 rounded-xl flex items-center justify-center",children:r.jsx(Qt,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:a("kpi.incidents.title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:a("kpi.incidents.subtitle")})]})]}),r.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 rounded-xl p-6 border border-red-200 dark:border-red-700",children:[r.jsxs("h3",{className:"font-semibold text-red-900 dark:text-red-300 mb-4 flex items-center gap-2",children:[r.jsx(xw,{className:"w-5 h-5"}),a("kpi.incidents.fatality")]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-red-200 dark:border-red-700 max-w-md",children:[r.jsx("label",{className:"font-medium text-red-900 dark:text-red-300 block mb-2",children:a("kpi.incidents.fatality")}),r.jsx("input",{type:"number",min:"0",value:e.accidents_fatal??"",onChange:o=>s("accidents_fatal",o.target.value),disabled:!i("accidents_fatal"),className:"input border-red-300",placeholder:"0"})]})]}),r.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/30 rounded-xl p-6 border border-orange-200 dark:border-orange-700",children:[r.jsxs("h3",{className:"font-semibold text-orange-900 dark:text-orange-300 mb-4 flex items-center gap-2",children:[r.jsx(oa,{className:"w-5 h-5"}),a("kpi.incidents.lostTimeAccident")]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-orange-200 dark:border-orange-700",children:[r.jsx("label",{className:"font-medium text-orange-900 dark:text-orange-300 block mb-2",children:a("kpi.incidents.lostTimeAccident")}),r.jsx("input",{type:"number",min:"0",value:e.accidents_serious??"",onChange:o=>s("accidents_serious",o.target.value),disabled:!i("accidents_serious"),className:"input border-orange-300",placeholder:"0"})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-orange-200 dark:border-orange-700",children:[r.jsx("label",{className:"font-medium text-orange-900 dark:text-orange-300 block mb-2",children:a("kpi.incidents.lostWorkDays")}),r.jsx("input",{type:"number",min:"0",value:e.lost_workdays??"",onChange:o=>s("lost_workdays",o.target.value),disabled:!i("lost_workdays"),className:"input border-orange-300",placeholder:"0"})]})]})]}),r.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 rounded-xl p-6 border border-yellow-200 dark:border-yellow-700",children:[r.jsxs("h3",{className:"font-semibold text-yellow-900 dark:text-yellow-300 mb-4 flex items-center gap-2",children:[r.jsx(Cz,{className:"w-5 h-5"}),a("kpi.incidents.nonLostTimeAccident")," & ",a("kpi.incidents.firstAidCase")]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-yellow-200 dark:border-yellow-700",children:[r.jsx("label",{className:"font-medium text-yellow-900 dark:text-yellow-300 block mb-2",children:a("kpi.incidents.nonLostTimeAccident")}),r.jsx("input",{type:"number",min:"0",value:e.accidents_minor??"",onChange:o=>s("accidents_minor",o.target.value),disabled:!i("accidents_minor"),className:"input border-yellow-300",placeholder:"0"})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-yellow-200 dark:border-yellow-700",children:[r.jsx("label",{className:"font-medium text-yellow-900 dark:text-yellow-300 block mb-2",children:a("kpi.incidents.firstAidCase")}),r.jsx("input",{type:"number",min:"0",value:e.first_aid_cases??"",onChange:o=>s("first_aid_cases",o.target.value),disabled:!i("first_aid_cases"),className:"input border-yellow-300",placeholder:"0"})]})]})]}),r.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/30 rounded-xl p-6 border border-amber-200 dark:border-amber-700",children:[r.jsxs("h3",{className:"font-semibold text-amber-900 dark:text-amber-300 mb-4 flex items-center gap-2",children:[r.jsx(w5,{className:"w-5 h-5"}),a("kpi.incidents.nearMiss")]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-amber-200 dark:border-amber-700 max-w-md",children:[r.jsx("label",{className:"font-medium text-amber-900 dark:text-amber-300 block mb-2",children:a("kpi.incidents.nearMiss")}),r.jsx("input",{type:"number",min:"0",value:e.near_misses??"",onChange:o=>s("near_misses",o.target.value),disabled:!i("near_misses"),className:"input border-amber-300",placeholder:"0"})]})]}),!1,r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[r.jsx(pr,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),a("kpi.notes")]}),r.jsx("textarea",{value:e.notes??"",onChange:o=>t("notes",o.target.value),rows:4,className:"input",placeholder:a("kpi.notes")})]}),r.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 rounded-xl p-6 border border-blue-200 dark:border-blue-700",children:[r.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-300 mb-4",children:a("kpi.incidents.summary")}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-blue-200 dark:border-blue-700",children:[r.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:e.accidents_fatal??0}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:a("kpi.incidents.fatality")})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-blue-200 dark:border-blue-700",children:[r.jsx("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:e.accidents_serious??0}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:a("kpi.incidents.ltaShort")})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-blue-200 dark:border-blue-700",children:[r.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:e.first_aid_cases??0}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:a("kpi.incidents.firstAidCase")})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-blue-200 dark:border-blue-700",children:[r.jsx("p",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:e.near_misses??0}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:a("kpi.incidents.nearMiss")})]})]})]})]})}const Hi=[{key:"effectif",label:"Effectif",labelEn:"Workforce",formula:"MAX",unit:"",editable:!0},{key:"induction",label:"Induction",labelEn:"Induction",formula:"SUM",unit:"",editable:!0},{key:"releve_ecarts",label:"Relev des carts",labelEn:"Deviations",formula:"SUM",unit:"",editable:!1},{key:"sensibilisation",label:"Sensibilisation",labelEn:"Awareness",formula:"SUM",unit:"",editable:!1},{key:"presquaccident",label:"Presqu'accident",labelEn:"Near Miss",formula:"SUM",unit:"",editable:!1},{key:"premiers_soins",label:"Premiers soins",labelEn:"First Aid",formula:"SUM",unit:"",editable:!1},{key:"accidents",label:"Accident",labelEn:"Accident",formula:"SUM",unit:"",editable:!1},{key:"jours_arret",label:"Jours d'arrt",labelEn:"Lost Days",formula:"SUM",unit:"",editable:!1},{key:"heures_travaillees",label:"Heures travailles",labelEn:"Hours Worked",formula:"SUM",unit:"h",editable:!1},{key:"inspections",label:"Inspections",labelEn:"Inspections",formula:"SUM",unit:"",editable:!1},{key:"heures_formation",label:"Heures formation",labelEn:"Training Hours",formula:"SUM",unit:"h",editable:!1},{key:"permis_travail",label:"Permis de travail",labelEn:"Work Permits",formula:"SUM",unit:"",editable:!1},{key:"mesures_disciplinaires",label:"Mesures disc.",labelEn:"Disciplinary",formula:"SUM",unit:"",editable:!1},{key:"conformite_hse",label:"Conformit HSE",labelEn:"HSE Compliance",formula:"AVG",unit:"%",editable:!1},{key:"conformite_medicale",label:"Conformit Md.",labelEn:"Medical Compl.",formula:"AVG",unit:"%",editable:!1}],Qje={fr:{Saturday:"Sam",Sunday:"Dim",Monday:"Lun",Tuesday:"Mar",Wednesday:"Mer",Thursday:"Jeu",Friday:"Ven"},en:{Saturday:"Sat",Sunday:"Sun",Monday:"Mon",Tuesday:"Tue",Wednesday:"Wed",Thursday:"Thu",Friday:"Fri"}};function Jje({projectId:e,weekNumber:t,year:a,onDataConfirmed:n}){const{t:s,language:i}=ut(),[o,l]=f.useState("download"),[c,d]=f.useState([]),[u,m]=f.useState([]),[p,g]=f.useState({}),[x,h]=f.useState(!1),[v,b]=f.useState(!1),[y,j]=f.useState(!0),[_,w]=f.useState(!1),k=f.useCallback((E,W)=>({entry_date:E,day_name:W,...Hi.reduce((B,C)=>({...B,[C.key]:""}),{})}),[]),N=f.useCallback(E=>{const W={};return Hi.forEach(B=>{const C=E.map(D=>D[B.key]).filter(D=>D!==""&&D!==null&&D!==void 0).map(D=>parseFloat(D)).filter(D=>!isNaN(D));if(C.length===0){W[B.key]=0;return}switch(B.formula){case"MAX":W[B.key]=Math.max(...C);break;case"AVG":W[B.key]=Math.round(C.reduce((D,z)=>D+z,0)/C.length*100)/100;break;case"SUM":default:W[B.key]=Math.round(C.reduce((D,z)=>D+z,0)*100)/100}}),W},[]),[P,A]=f.useState(null);f.useEffect(()=>{(async()=>{if(!(!e||!t||!a))try{const W=await Ho.getWeekDates({week_number:t,year:a}),{days:B}=W.data.data;d(B);const C=await Ho.getAutoFillValues({project_id:e,week_number:t,year:a});A(C.data.data);const D=await Ho.getWeekAggregates({project_id:e,week_number:t,year:a}),{aggregates:z,daily_entries:L,has_data:X}=D.data.data;if(X&&L?.length>0){w(!0),g(z);const H=B.map(F=>{const ke=L.find(ae=>ae.entry_date===F.date);return ke?{entry_date:F.date,day_name:F.day_name,...Hi.reduce((ae,ue)=>({...ae,[ue.key]:ke[ue.key]??""}),{})}:k(F.date,F.day_name)});m(H)}else{const H=B.map(F=>{const ke=C.data.data?.daily_values?.find(ae=>ae.entry_date===F.date)?.auto_values||{};return{entry_date:F.date,day_name:F.day_name,...Hi.reduce((ae,ue)=>({...ae,[ue.key]:ke[ue.key]??""}),{})}});m(H),g(N(H))}}catch(W){console.error("Failed to fetch data:",W)}})()},[e,t,a,k,N]);const M=()=>{if(!P?.daily_values)return;const E=(B,C,D)=>Object.prototype.hasOwnProperty.call(C,D)&&C[D]!==null&&C[D]!==void 0?C[D]:B[D]!==null&&B[D]!==void 0?B[D]:"",W=u.map(B=>{const C=P.daily_values.find(D=>D.entry_date===B.entry_date)?.auto_values||{};return{...B,releve_ecarts:E(B,C,"releve_ecarts"),sensibilisation:E(B,C,"sensibilisation"),heures_formation:E(B,C,"heures_formation"),permis_travail:E(B,C,"permis_travail"),inspections:E(B,C,"inspections"),mesures_disciplinaires:E(B,C,"mesures_disciplinaires"),conformite_hse:E(B,C,"conformite_hse")}});m(W),g(N(W)),K.success(s("kpi.dailyKpi.systemDataApplied"))},R=async()=>{h(!0);try{const E=await Ho.downloadTemplate({project_id:e,week_number:t,year:a}),W=new Blob([E.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),B=window.URL.createObjectURL(W),C=document.createElement("a");C.href=B,C.download=`KPI_Journalier_S${t}_${a}.xlsx`,C.click(),window.URL.revokeObjectURL(B),K.success(s("kpi.dailyKpi.templateDownloaded")),l("upload")}catch(E){console.error("Download failed:",E),K.error(s("kpi.dailyKpi.downloadFailed"))}finally{h(!1)}},O=async E=>{const W=E.target.files?.[0];if(W){b(!0);try{const B=new FormData;B.append("file",W),B.append("project_id",e),B.append("week_number",t),B.append("year",a);const C=await Ho.parseTemplate(B),{daily_entries:D,aggregates:z}=C.data.data,L=c.map(X=>{const H=D.find(F=>F.entry_date===X.date);return H?{entry_date:X.date,day_name:X.day_name,...Hi.reduce((F,ke)=>({...F,[ke.key]:H[ke.key]??""}),{})}:k(X.date,X.day_name)});m(L),g(z),l("manual"),K.success(s("kpi.dailyKpi.dataImported"))}catch(B){console.error("Upload failed:",B),K.error(s("kpi.dailyKpi.parseFailed"))}finally{b(!1),E.target.value=""}}},q=(E,W,B)=>{const C=[...u];!C[E]&&c?.[E]&&(C[E]=k(c[E].date,c[E].day_name));const D=Number(B),z=B===""?"":Number.isFinite(D)?D:0;C[E]={...C[E],[W]:z},m(C),g(N(C))},S=async()=>{h(!0);try{const E=Hi.filter(D=>D.editable),W=u.map(D=>{const z={entry_date:D.entry_date};for(const L of E)z[L.key]=D[L.key];return z}).filter(D=>E.some(z=>D[z.key]!==""&&D[z.key]!==null&&D[z.key]!==void 0));if(W.length===0){K.error(s("kpi.dailyKpi.noDataToSave")),h(!1);return}const B=await Ho.bulkSave({project_id:e,week_number:t,year:a,entries:W}),{aggregates:C}=B.data.data;g(C),w(!0);try{const z=(await Ho.getAutoFillValues({project_id:e,week_number:t,year:a})).data?.data?.daily_values||[];Array.isArray(c)&&c.length>0&&m(L=>c.map((X,H)=>{const F=L?.[H]||k(X.date,X.day_name),ke=z.find(ue=>ue.entry_date===X.date)?.auto_values||{},ae={...F};for(const ue of Hi)ue.editable||ke[ue.key]!==void 0&&ke[ue.key]!==null&&(ae[ue.key]=ke[ue.key]);return ae}))}catch{}n&&n(C),K.success(s("kpi.dailyKpi.dataSaved"))}catch(E){console.error("Save failed:",E),K.error(s("kpi.dailyKpi.saveFailed"))}finally{h(!1)}},I=(E,W)=>E==null||E===""?"-":E===0?"0":`${E}${W?` ${W}`:""}`;return r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 mb-6 overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-hse-primary/5 to-transparent cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>j(!y),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-hse-primary/10 rounded-lg",children:r.jsx(E5,{className:"w-5 h-5 text-hse-primary"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:s("kpi.dailyKpi.title")}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s("kpi.dailyKpi.subtitle")})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[_&&r.jsxs("span",{className:"px-2.5 py-1 text-xs font-medium bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300 rounded-full",children:[" ",s("kpi.dailyKpi.hasData")]}),r.jsx("div",{className:"p-1.5 rounded-full bg-gray-100 dark:bg-gray-700",children:y?r.jsx(ld,{className:"w-4 h-4"}):r.jsx(Vr,{className:"w-4 h-4"})})]})]}),y&&r.jsxs("div",{className:"p-4 space-y-4 border-t border-gray-100 dark:border-gray-700",children:[r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs("button",{onClick:()=>l("download"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-all ${o==="download"?"bg-hse-primary text-white shadow-md":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[r.jsx(jr,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:s("kpi.dailyKpi.download")})]}),r.jsxs("button",{onClick:()=>l("upload"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-all ${o==="upload"?"bg-hse-primary text-white shadow-md":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[r.jsx($a,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:s("kpi.dailyKpi.import")})]}),r.jsxs("button",{onClick:()=>l("manual"),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-all ${o==="manual"?"bg-hse-primary text-white shadow-md":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[r.jsx(S5,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:s("kpi.dailyKpi.entry")})]})]}),o==="download"&&r.jsxs("div",{className:"text-center py-8 space-y-4",children:[r.jsx("div",{className:"inline-flex p-4 bg-green-50 dark:bg-green-900/20 rounded-full",children:r.jsx(Tr,{className:"w-12 h-12 text-green-500"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:s("kpi.dailyKpi.downloadTemplate")}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 max-w-sm mx-auto",children:s("kpi.dailyKpi.downloadDesc")})]}),r.jsxs("button",{onClick:R,disabled:x||!e||!t,className:"btn-primary inline-flex items-center gap-2 px-6",children:[x?r.jsx(Re,{className:"w-4 h-4 animate-spin"}):r.jsx(jr,{className:"w-4 h-4"}),s("kpi.dailyKpi.download")]})]}),o==="upload"&&r.jsxs("div",{className:"text-center py-8 space-y-4",children:[r.jsx("div",{className:"inline-flex p-4 bg-blue-50 dark:bg-blue-900/20 rounded-full",children:r.jsx($a,{className:"w-12 h-12 text-blue-500"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:s("kpi.dailyKpi.importFile")}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 max-w-sm mx-auto",children:s("kpi.dailyKpi.importDesc")})]}),r.jsxs("label",{className:"btn-primary inline-flex items-center gap-2 px-6 cursor-pointer",children:[v?r.jsx(Re,{className:"w-4 h-4 animate-spin"}):r.jsx($a,{className:"w-4 h-4"}),s("kpi.dailyKpi.selectFile"),r.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:O,className:"hidden",disabled:v})]})]}),o==="manual"&&c.length>0&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:r.jsx("div",{className:"inline-block min-w-full align-middle",children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-900",children:[r.jsx("th",{className:"sticky left-0 z-10 bg-gray-50 dark:bg-gray-900 text-left py-3 px-3 font-semibold text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-700 min-w-[160px]",children:s("kpi.dailyKpi.indicator")}),c.map((E,W)=>r.jsxs("th",{className:"text-center py-3 px-2 font-medium text-gray-600 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700 min-w-[70px]",children:[r.jsx("div",{className:"font-semibold text-gray-800 dark:text-gray-200",children:Qje[i]?.[E.day_name]||E.day_name?.slice(0,3)}),r.jsx("div",{className:"text-[10px] text-gray-500 font-normal",children:E.display})]},W)),r.jsx("th",{className:"text-center py-3 px-3 font-semibold text-hse-primary bg-hse-primary/5 border-b border-gray-200 dark:border-gray-700 min-w-[80px]",children:s("kpi.dailyKpi.total")})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:Hi.map((E,W)=>r.jsxs("tr",{className:"hover:bg-gray-50/50 dark:hover:bg-gray-800/50 transition-colors",children:[r.jsx("td",{className:"sticky left-0 z-10 bg-white dark:bg-gray-800 py-2 px-3 font-medium text-gray-700 dark:text-gray-300 text-xs border-r border-gray-100 dark:border-gray-700",children:i==="fr"?E.label:E.labelEn}),c.map((B,C)=>r.jsx("td",{className:"py-1.5 px-1",children:E.editable?r.jsx("input",{type:"number",step:E.formula==="AVG"||E.key.includes("heures")?"0.1":"1",min:"0",value:u?.[C]?.[E.key]??"",onChange:D=>q(C,E.key,D.target.value),className:"w-full text-center py-1.5 px-1 text-sm border border-gray-200 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 focus:ring-2 focus:ring-hse-primary/30 focus:border-hse-primary transition-all",placeholder:"-"}):r.jsx("div",{className:"w-full text-center py-1.5 px-1 text-sm text-gray-700 dark:text-gray-300",children:I(u?.[C]?.[E.key]??"",E.unit)})},C)),r.jsx("td",{className:"py-2 px-3 text-center font-semibold text-hse-primary bg-hse-primary/5",children:I(p[E.key],E.unit)})]},E.key))})]})})}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["* ",s("kpi.dailyKpi.formulaInfo")]}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["* ",s("kpi.dailyKpi.workHoursFormula")]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[r.jsxs("button",{onClick:M,disabled:!P,className:"btn-secondary flex items-center gap-2 px-4 w-full sm:w-auto justify-center",children:[r.jsx(cd,{className:"w-4 h-4"}),s("kpi.dailyKpi.autoFill")]}),r.jsxs("button",{onClick:S,disabled:x,className:"btn-primary flex items-center gap-2 px-6 w-full sm:w-auto justify-center",children:[x?r.jsx(Re,{className:"w-4 h-4 animate-spin"}):r.jsx(fn,{className:"w-4 h-4"}),s("kpi.dailyKpi.confirm")]})]})]})]})]})]})}const fm="hse-kpi-draft";function ewe(){const{projectId:e,reportId:t}=As(),a=Tn(),{t:n}=ut(),[s,i]=f.useState(0),[o,l]=f.useState([]),[c,d]=f.useState([]),[u,m]=f.useState(""),[p,g]=f.useState(!0),[x,h]=f.useState(!1),[v,b]=f.useState(!1),[y,j]=f.useState(!1),[_,w]=f.useState(null),[k,N]=f.useState(null),[P,A]=f.useState(!1),[M,R]=f.useState({noise_monitoring:"",water_consumption:"",electricity_consumption:""}),[O,q]=f.useState(!1),[S,I]=f.useState(!1),[E,W]=f.useState(()=>{if(t)return B(e);const ae=localStorage.getItem(fm);if(ae)try{return JSON.parse(ae)}catch(ue){console.error("Error parsing draft:",ue)}return B(e)});function B(ae){const ue=Hr();return{project_id:ae??"",report_date:"",report_month:new Date().getMonth()+1,report_year:ue.year,week_number:"",start_date:"",end_date:"",hours_worked:0,employees_trained:0,unsafe_conditions_reported:0,toolbox_talks:0,near_misses:0,first_aid_cases:0,accidents:0,lost_workdays:0,inspections_completed:0,tg_value:0,tf_value:0,training_hours:0,work_permits:0,corrective_actions:0,hse_compliance_rate:0,medical_compliance_rate:0,noise_monitoring:0,water_consumption:0,electricity_consumption:0,accidents_fatal:0,accidents_serious:0,accidents_minor:0,findings_open:0,findings_closed:0,trainings_conducted:0,trainings_planned:0,inspections_planned:0,unsafe_acts_reported:0,emergency_drills:0,notes:"",status:"draft"}}const C=[{id:"project-info",title:n("kpi.steps.projectInfo"),icon:Mo,description:n("kpi.projectInfo.title")},{id:"weekly-reporting",title:n("kpi.steps.weeklyReporting"),icon:Ug,description:n("kpi.weekly.title")},{id:"incident-tracking",title:n("kpi.steps.incidentTracking"),icon:Qt,description:n("kpi.incidents.title")}],D=(ae,ue)=>{const Z=me=>{const ge=Number(me);return Number.isFinite(ge)?ge:0};W(me=>{const ge={...me,[ae]:ue};if(["accidents","lost_workdays","hours_worked"].includes(ae)){const se=Z(ae==="hours_worked"?ue:ge.hours_worked),he=Z(ae==="accidents"?ue:ge.accidents),T=Z(ae==="lost_workdays"?ue:ge.lost_workdays);se>0?(ge.tf_value=Number((he*1e6/se).toFixed(2)),ge.tg_value=Number((T*1e3/se).toFixed(4))):(ge.tf_value=0,ge.tg_value=0)}return ge})};f.useEffect(()=>{(async()=>{if(!(!E.project_id||!E.report_year||!E.report_month)){q(!0);try{const[ue,Z,me]=await Promise.all([cl.getAll({project_id:E.project_id,year:E.report_year,month:E.report_month,indicator:"noise_monitoring",per_page:1}),cl.getAll({project_id:E.project_id,year:E.report_year,month:E.report_month,indicator:"water_consumption",per_page:1}),cl.getAll({project_id:E.project_id,year:E.report_year,month:E.report_month,indicator:"electricity_consumption",per_page:1})]),ge=ue.data?.data?.[0],se=Z.data?.data?.[0],he=me.data?.data?.[0],T={noise_monitoring:ge?.value??"",water_consumption:se?.value??"",electricity_consumption:he?.value??""};R(T),W(oe=>({...oe,noise_monitoring:ge?.value??oe.noise_monitoring,water_consumption:se?.value??oe.water_consumption,electricity_consumption:he?.value??oe.electricity_consumption}))}catch(ue){console.error("Failed to fetch monthly environmental KPI measurements:",ue)}finally{q(!1)}}})()},[E.project_id,E.report_year,E.report_month]),f.useEffect(()=>{(async()=>{try{const ue=await it.getAllList({status:"active"});l(ue),ue.length===1&&!E.project_id&&D("project_id",ue[0].id.toString())}catch(ue){console.error("Failed to load projects:",ue),K.error(n("errors.somethingWentWrong"))}finally{g(!1)}})()},[n]),f.useEffect(()=>{(async()=>{try{const ue=await it.getPoles(),Z=ue.data?.data?.poles??ue.data?.poles??[];d(Array.isArray(Z)?Z:[])}catch{d([])}})()},[]),f.useEffect(()=>{if(!u)return;!o.some(ue=>String(ue.id)===String(E.project_id)&&ue?.pole===u)&&E.project_id&&D("project_id","")},[u,o,E.project_id,D]),f.useEffect(()=>{(async()=>{if(t)try{g(!0);const Z=(await Ka.getById(t)).data?.data,me=Z?.report||Z;if(me.status==="approved"||me.status==="submitted"){K.error(n("kpi.submissionPage.cannotEditReport")),a("/dashboard");return}j(!0),w(me.id),me.rejection_reason&&N({reason:me.rejection_reason,rejected_at:me.rejected_at}),W({project_id:me.project_id!==null&&me.project_id!==void 0?String(me.project_id):"",report_date:me.report_date??"",report_month:me.report_month,report_year:me.report_year,week_number:me.week_number!==null&&me.week_number!==void 0?String(me.week_number):"",start_date:me.start_date??"",end_date:me.end_date??"",hours_worked:me.hours_worked??0,employees_trained:me.employees_trained??0,unsafe_conditions_reported:me.unsafe_conditions_reported??0,toolbox_talks:me.toolbox_talks??0,near_misses:me.near_misses??0,first_aid_cases:me.first_aid_cases??0,accidents:me.accidents??0,lost_workdays:me.lost_workdays??0,inspections_completed:me.inspections_completed??0,tg_value:me.tg_value??0,tf_value:me.tf_value??0,training_hours:me.training_hours??0,work_permits:me.work_permits??0,corrective_actions:me.corrective_actions??0,hse_compliance_rate:me.hse_compliance_rate??me.ppe_compliance_rate??0,medical_compliance_rate:me.medical_compliance_rate??0,noise_monitoring:me.noise_monitoring??0,water_consumption:me.water_consumption??0,electricity_consumption:me.electricity_consumption??0,accidents_fatal:me.accidents_fatal??0,accidents_serious:me.accidents_serious??0,accidents_minor:me.accidents_minor??0,findings_open:me.findings_open??0,findings_closed:me.findings_closed??0,trainings_conducted:me.trainings_conducted??0,trainings_planned:me.trainings_planned??0,inspections_planned:me.inspections_planned??0,unsafe_acts_reported:me.unsafe_acts_reported??0,emergency_drills:me.emergency_drills??0,notes:me.notes??"",status:"draft"})}catch(ue){console.error("Failed to load report:",ue),K.error(n("kpi.submissionPage.loadReportFailed")),a("/dashboard")}finally{g(!1)}})()},[t,a]),f.useEffect(()=>{if(y)return;const ae=setTimeout(()=>{localStorage.setItem(fm,JSON.stringify(E))},1e3);return()=>clearTimeout(ae)},[E,y]);const z=async()=>{if(!E.project_id){K.error(n("kpi.projectInfo.selectProject"));return}h(!0);try{const ae={...E,status:"draft"};if(_)await Ka.update(_,ae);else{const Z=(await Ka.create(ae))?.data?.data;Z?.id&&(w(Z.id),j(!0))}localStorage.setItem(fm,JSON.stringify(ae)),K.success(n("kpi.reportSaved"))}catch(ae){const ue=ae?.response?.data?.message??n("errors.somethingWentWrong");K.error(ue)}finally{h(!1)}},L=async()=>{if(!E.project_id){K.error(n("kpi.projectInfo.selectProject")),i(0);return}b(!0);try{const ae={...E,status:"submitted"};y&&_?(await Ka.update(_,ae),K.success(n("kpi.reportResubmitted"))):(await Ka.create(ae),K.success(n("kpi.reportSubmitted"))),localStorage.removeItem(fm),a("/dashboard")}catch(ae){const ue=ae.response?.data?.message??n("errors.somethingWentWrong");K.error(ue)}finally{b(!1)}},X=async()=>{try{_&&await Ka.delete(_)}catch(ae){const ue=ae?.response?.data?.message??n("errors.somethingWentWrong");K.error(ue);return}localStorage.removeItem(fm),w(null),j(!1),N(null),W(B("")),i(0),K.success(n("common.success"))},H=()=>{if(s===0&&!E.project_id){K.error(n("kpi.projectInfo.selectProject"));return}if(s===0&&!E.week_number){K.error(n("kpi.submissionPage.selectWeekRequired"));return}if(s===0&&(!E.start_date||!E.end_date)){K.error(n("kpi.submissionPage.selectWeekRequired"));return}s<C.length-1&&(i(ae=>ae+1),window.scrollTo({top:0,behavior:"smooth"}))},F=()=>{s>0&&(i(ae=>ae-1),window.scrollTo({top:0,behavior:"smooth"}))},ke=ae=>{if(ae>0&&!E.project_id){K.error(n("kpi.projectInfo.selectProject"));return}if(ae>0&&(!E.week_number||!E.start_date||!E.end_date)){K.error(n("kpi.submissionPage.selectWeekRequired"));return}i(ae),window.scrollTo({top:0,behavior:"smooth"})};return p?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Re,{className:"w-8 h-8 animate-spin text-hse-primary"})}):r.jsxs("div",{className:"max-w-5xl mx-auto animate-fade-in",children:[k&&r.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-xl p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Qt,{className:"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-red-900",children:"Rapport rejet - Modification requise"}),r.jsx("p",{className:"text-red-700 mt-1",children:k.reason}),k.rejected_at&&r.jsxs("p",{className:"text-red-600 text-sm mt-2",children:["Rejet le ",new Date(k.rejected_at).toLocaleDateString("fr-FR")]})]})]})}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:y?"Modifier le rapport KPI":n("kpi.submission")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:y?"Corrigez et resoumettez votre rapport":n("kpi.weekly.title")})]}),r.jsx("div",{className:"mb-8",children:r.jsx("div",{className:"flex items-center justify-between",children:C.map((ae,ue)=>r.jsxs("div",{className:"flex items-center flex-1",children:[r.jsxs("button",{onClick:()=>ke(ue),className:`flex items-center gap-3 p-3 rounded-xl transition-all w-full ${ue===s?"bg-hse-primary text-white shadow-lg":ue<s?"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-400":"bg-gray-100 text-gray-500 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"}`,children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${ue===s?"bg-white/20":ue<s?"bg-green-200 dark:bg-green-800":"bg-gray-200 dark:bg-gray-600"}`,children:ue<s?r.jsx(fn,{className:"w-5 h-5"}):r.jsx(ae.icon,{className:"w-5 h-5"})}),r.jsxs("div",{className:"hidden sm:block text-left",children:[r.jsxs("p",{className:"text-xs opacity-75",children:[n("common.step")??"tape"," ",ue+1]}),r.jsx("p",{className:"font-medium text-sm",children:ae.title})]})]}),ue<C.length-1&&r.jsx("div",{className:`h-1 flex-1 mx-2 rounded ${ue<s?"bg-green-300":"bg-gray-200"}`})]},ae.id))})}),E.status==="draft"&&E.project_id&&r.jsxs("div",{className:"mb-4 p-3 bg-amber-50 dark:bg-amber-900/30 border border-amber-200 dark:border-amber-700 rounded-lg flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2 text-amber-700 dark:text-amber-300",children:[r.jsx(Kg,{className:"w-4 h-4"}),r.jsxs("span",{className:"text-sm",children:[n("kpi.status.draft")," - ",n("kpi.reportSaved")]})]}),r.jsx("button",{onClick:X,className:"text-sm text-amber-700 dark:text-amber-300 hover:text-amber-800 dark:hover:text-amber-200 underline",children:n("common.delete")})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[s===0&&r.jsx(r.Fragment,{children:r.jsx(Yje,{formData:E,updateFormData:D,projects:o,t:n,poles:c,selectedPole:u,onPoleChange:ae=>m(ae)})}),s===1&&r.jsxs(r.Fragment,{children:[E.project_id&&E.week_number&&r.jsx(Jje,{projectId:E.project_id,weekNumber:E.week_number,year:E.report_year,onDataConfirmed:async ae=>{try{const Z=(await Ka.getAutoPopulatedData({project_id:E.project_id,week:E.week_number,year:E.report_year}))?.data?.data?.data;if(Z){W(me=>{const ge={...me,...Z},se=+ge.hours_worked||0,he=+ge.accidents||0,T=+ge.lost_workdays||0;return ge.tf_value=se?+(he*1e6/se).toFixed(2):0,ge.tg_value=se?+(T*1e3/se).toFixed(4):0,ge}),A(!0);return}}catch{}W(ue=>{const Z={...ue};ae.induction!==void 0&&(Z.employees_trained=ae.induction),ae.releve_ecarts!==void 0&&(Z.unsafe_conditions_reported=ae.releve_ecarts),ae.sensibilisation!==void 0&&(Z.toolbox_talks=ae.sensibilisation),ae.presquaccident!==void 0&&(Z.near_misses=ae.presquaccident),ae.premiers_soins!==void 0&&(Z.first_aid_cases=ae.premiers_soins),ae.accidents!==void 0&&(Z.accidents=ae.accidents),ae.jours_arret!==void 0&&(Z.lost_workdays=ae.jours_arret),ae.inspections!==void 0&&(Z.inspections_completed=ae.inspections),ae.heures_formation!==void 0&&(Z.training_hours=ae.heures_formation),ae.permis_travail!==void 0&&(Z.work_permits=ae.permis_travail),ae.mesures_disciplinaires!==void 0&&(Z.corrective_actions=ae.mesures_disciplinaires),ae.conformite_hse!==void 0&&(Z.hse_compliance_rate=ae.conformite_hse),ae.conformite_medicale!==void 0&&(Z.medical_compliance_rate=ae.conformite_medicale);const me=Number(Z.hours_worked),ge=Number(Z.accidents),se=Number(Z.lost_workdays),he=Number.isFinite(me)?me:0,T=Number.isFinite(ge)?ge:0,oe=Number.isFinite(se)?se:0;return he>0?(Z.tf_value=Number((T*1e6/he).toFixed(2)),Z.tg_value=Number((oe*1e3/he).toFixed(4))):(Z.tf_value=0,Z.tg_value=0),Z}),A(!0)}}),P&&r.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700 rounded-xl",children:[r.jsx("div",{className:"font-semibold text-blue-900 dark:text-blue-200 mb-3",children:n("kpi.dailyKpi.verificationTitle")??"Verify auto-pulled KPI values"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[["hours_worked",n("kpi.rates.hoursWorked")??"Hours worked"],["employees_trained",n("kpi.weekly.induction")??"Induction"],["unsafe_conditions_reported",n("kpi.weekly.ecarts")??"Safety observations"],["toolbox_talks",n("kpi.weekly.sensibilisation")??"Toolbox talks"],["near_misses",n("kpi.weekly.presquAccident")??"Near misses"],["first_aid_cases",n("kpi.weekly.premiersSoins")??"First aid cases"],["accidents",n("kpi.weekly.accident")??"Accidents"],["lost_workdays",n("kpi.weekly.joursArret")??"Lost workdays"],["inspections_completed",n("kpi.weekly.inspections")??"Inspections"],["training_hours",n("kpi.weekly.heuresFormation")??"Training hours"],["work_permits",n("kpi.weekly.permisTravail")??"Work permits"],["corrective_actions",n("kpi.weekly.mesuresDisciplinaires")??"Corrective actions"],["hse_compliance_rate",n("kpi.weekly.conformiteHSE")??"HSE compliance %"],["medical_compliance_rate",n("kpi.weekly.conformiteMedecine")??"Medical compliance %"],["tf_value","TF"],["tg_value","TG"],["noise_monitoring",n("kpi.noiseMonitoring")??"Noise"],["water_consumption",n("kpi.waterConsumption")??"Water"],["electricity_consumption",n("kpi.electricityConsumption")??"Electricity"]].map(([ae,ue])=>r.jsxs("div",{className:"flex items-center justify-between bg-white/70 dark:bg-gray-800/70 rounded-lg px-3 py-2 border border-blue-200/60 dark:border-blue-800/40",children:[r.jsx("div",{className:"text-gray-700 dark:text-gray-200",children:ue}),r.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:E[ae]??0})]},ae))})]}),!1,r.jsx(Zje,{formData:E,updateFormData:D,t:n,editableFields:[]})]}),s===2&&r.jsx(Xje,{formData:E,updateFormData:D,t:n,editableFields:[]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{children:s>0&&r.jsxs("button",{onClick:F,className:"btn-secondary flex items-center gap-2",children:[r.jsx(Do,{className:"w-4 h-4"}),n("common.previous")]})}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:z,disabled:x,className:"btn-secondary flex items-center gap-2",children:[x?r.jsx(Re,{className:"w-4 h-4 animate-spin"}):r.jsx(Kg,{className:"w-4 h-4"}),n("kpi.saveDraft")]}),s<C.length-1?r.jsxs("button",{onClick:H,className:"btn-primary flex items-center gap-2",children:[n("common.next"),r.jsx(Io,{className:"w-4 h-4"})]}):r.jsxs("button",{onClick:L,disabled:v,className:"btn-primary flex items-center gap-2 bg-green-600 hover:bg-green-700",children:[v?r.jsx(Re,{className:"w-4 h-4 animate-spin"}):r.jsx(ok,{className:"w-4 h-4"}),n("kpi.submitReport")]})]})]})]})}const twe=Object.freeze(Object.defineProperty({__proto__:null,default:ewe},Symbol.toStringTag,{value:"Module"})),bf=Cy((e,t)=>({projects:[],isLoading:!1,hasLoaded:!1,error:null,lastScope:null,lastUserKey:null,fetchProjects:async(a,n={})=>{const{isLoading:s,hasLoaded:i,projects:o}=t(),l=At.getState?.()?.user,c=l?.role==="dev",d=c?Wl.getState?.()?.projectScope:null,u=c&&d===Va.ASSIGNED?Va.ASSIGNED:Va.ALL,m=l?`${l.id??"na"}:${l.role??"na"}:${c?u:""}`:null,{lastUserKey:p,lastScope:g}=t(),x=p!==m;x&&e({projects:[],hasLoaded:!1,error:null,lastScope:null,lastUserKey:m});const h=c&&g&&g!==u;if(!n.force&&!x&&!h&&i&&o.length>0||s)return o;const v={...a||{}};c&&(u===Va.ASSIGNED&&(v.scope="assigned"),e({lastScope:u})),e({isLoading:!0,error:null});try{if(Object.prototype.hasOwnProperty.call(v,"page")){const j=(await it.getAll(v)).data?.data??[];return e({projects:j,isLoading:!1,hasLoaded:!0}),j}const b=await it.getAllList(v);return e({projects:b,isLoading:!1,hasLoaded:!0}),b}catch(b){throw console.error("Failed to load projects:",b),e({error:b,isLoading:!1}),b}},setProjects:a=>e({projects:a}),reset:()=>e({projects:[],hasLoaded:!1,error:null,lastScope:null})}));function rwe(){const{t:e}=ut(),{user:t}=At(),[a,n]=f.useState([]),{projects:s,fetchProjects:i}=bf(),[o,l]=f.useState(!0),[c,d]=f.useState({project_id:"",pole:"",status:"",year:Hr().year}),[u,m]=f.useState({current_page:1,last_page:1}),[p,g]=f.useState(null),[x,h]=f.useState([]),[v,b]=f.useState(!1),[y,j]=f.useState(null),[_,w]=f.useState(""),[k,N]=f.useState(""),[P,A]=f.useState(!1),M=t?.project_list_preference??"code",R=f.useMemo(()=>Ir(s,M),[s,M]),[O,q]=f.useState([]);f.useEffect(()=>{(async()=>{try{const F=await it.getPoles(),ke=F.data?.data?.poles??F.data?.poles??[];q(Array.isArray(ke)?ke:[])}catch{q([])}})()},[]);const S=f.useMemo(()=>{const H=Array.isArray(R)?R:[];return c.pole?H.filter(F=>F?.pole===c.pole):H},[R,c.pole]);f.useEffect(()=>{i({per_page:100}).catch(()=>{})},[i]),f.useEffect(()=>{I()},[c]);const I=async(H=1)=>{try{l(!0);const F=await Ka.getAll({page:H,...c,per_page:10});n(F.data.data||[]),m(F.data.meta||{current_page:1,last_page:1})}catch{K.error(e("kpi.historyPage.loadFailed"))}finally{l(!1)}},E=async H=>{b(!0),g(H),h([]);try{const ke=(await Ka.getById(H.id)).data.data;g(ke.report||ke),h(ke.daily_snapshots||[])}catch(F){console.error("Failed to load report details:",F)}finally{b(!1)}},W=H=>{if(H.status!=="draft"){K.error(e("kpi.historyPage.onlyDraftDeletable"));return}j(H)},B=async()=>{if(y)try{await Ka.delete(y.id),K.success(e("kpi.historyPage.deleteSuccess")),I()}catch{K.error(e("errors.failedToDelete"))}finally{j(null)}},C=H=>H?.week_number?e("dashboard.weekLabel",{week:H.week_number,year:H.report_year}):H?.report_month&&H?.report_year?`${H.report_month}/${H.report_year}`:"",D={draft:r.jsx(pr,{className:"w-4 h-4 text-gray-500"}),submitted:r.jsx(oa,{className:"w-4 h-4 text-amber-500"}),approved:r.jsx(Xt,{className:"w-4 h-4 text-green-500"}),rejected:r.jsx(Zn,{className:"w-4 h-4 text-red-500"})},z={draft:"badge-info",submitted:"badge-warning",approved:"badge-success",rejected:"badge-danger"},L=f.useMemo(()=>Array.isArray(a)?!_&&!k?a:a.filter(H=>{let F="";if(H.start_date)F=H.start_date.substring(0,10);else if(H.created_at){const ke=new Date(H.created_at);Number.isNaN(ke.getTime())||(F=ke.toISOString().substring(0,10))}return!(_&&(!F||F<_)||k&&(!F||F>k))}):[],[a,_,k]),X=async()=>{try{A(!0);const H={project_id:c.project_id?c.project_id:void 0,status:c.status?c.status:void 0,year:c.year?c.year:void 0};_&&(H.from_date=_),k&&(H.to_date=k);const F=await Yd.exportKpiHistory(H),ke=new Blob([F.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),ae=window.URL.createObjectURL(ke),ue=document.createElement("a");ue.href=ae,ue.download=`kpi_history_${c.year}.xlsx`,ue.click(),window.URL.revokeObjectURL(ae)}catch(H){console.error("Error exporting KPI history:",H),K.error(e("kpi.historyPage.exportFailed"))}finally{A(!1)}};return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:[e("nav.dashboard")," / ",e("kpi.history")]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e("kpi.history")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:e("kpi.historyPage.subtitle")})]}),r.jsx("div",{className:"card p-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap gap-4",children:[r.jsx("div",{className:"w-full sm:w-44",children:r.jsxs(Ze,{value:c.pole,onChange:H=>d({...c,pole:H.target.value,project_id:""}),children:[r.jsx("option",{value:"",children:e("common.allPoles")}),O.map(H=>r.jsx("option",{value:H,children:H},H))]})}),r.jsx("div",{className:"w-full sm:flex-1 sm:min-w-[180px]",children:r.jsxs(Ze,{value:c.project_id,onChange:H=>d({...c,project_id:H.target.value}),children:[r.jsx("option",{value:"",children:e("common.allProjects")}),S.map(H=>r.jsx("option",{value:H.id,children:Wt(H)},H.id))]})}),r.jsx("div",{className:"w-full sm:w-40",children:r.jsxs(Ze,{value:c.status,onChange:H=>d({...c,status:H.target.value}),children:[r.jsx("option",{value:"",children:e("common.all")}),r.jsx("option",{value:"draft",children:e("kpi.status.draft")}),r.jsx("option",{value:"submitted",children:e("kpi.status.submitted")}),r.jsx("option",{value:"approved",children:e("kpi.status.approved")}),r.jsx("option",{value:"rejected",children:e("kpi.status.rejected")})]})}),r.jsx("div",{className:"w-full sm:w-32",children:r.jsx(So,{value:c.year,onChange:H=>d({...c,year:String(H??"")}),className:"w-full"})}),r.jsx("div",{className:"w-full sm:w-40",children:r.jsx(ot,{value:_,onChange:H=>w(H),placeholder:e("hseEvents.filters.from")})}),r.jsx("div",{className:"w-full sm:w-40",children:r.jsx(ot,{value:k,onChange:H=>N(H),placeholder:e("hseEvents.filters.to")})}),r.jsxs("button",{type:"button",onClick:X,disabled:P||L.length===0,className:"btn-secondary flex items-center justify-center gap-2 text-sm w-full sm:w-auto",children:[r.jsx(Tr,{className:"w-4 h-4"}),r.jsx("span",{children:e("dashboard.exportExcel")})]})]})}),r.jsxs("div",{className:"card",children:[o?r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsx("div",{className:"hidden md:block space-y-2 animate-pulse",children:Array.from({length:5},(H,F)=>r.jsx("div",{className:"h-10 rounded-md bg-gray-100 dark:bg-gray-800"},F))}),r.jsx("div",{className:"md:hidden space-y-3 animate-pulse",children:Array.from({length:3},(H,F)=>r.jsx("div",{className:"h-24 rounded-lg bg-gray-100 dark:bg-gray-800"},F))})]}):L.length===0?r.jsxs("div",{className:"p-12 text-center",children:[r.jsx(pr,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:e("kpi.noReports")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:e("common.noData")})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"space-y-3 md:hidden",children:L.map(H=>r.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3 bg-white dark:bg-gray-800",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:H.project?.name||e("common.unknown")}),H.project?.code&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:H.project.code}),r.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-gray-600 dark:text-gray-300",children:[r.jsx(Na,{className:"w-3 h-3 text-gray-400"}),r.jsx("span",{children:C(H)})]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-1",children:[r.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[D[H.status],r.jsx("span",{className:`badge ${z[H.status]}`,children:e(`kpi.status.${H.status}`)})]}),r.jsxs("div",{className:"mt-1 flex flex-wrap gap-1 justify-end text-[11px] text-gray-600 dark:text-gray-300",children:[r.jsxs("span",{className:H.accidents>0?"text-red-600 dark:text-red-400 font-semibold":"text-green-600",children:[H.accidents," ",e("kpi.accidents.title")]}),r.jsxs("span",{className:"px-1.5 py-0.5 rounded-full bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",children:[H.trainings_conducted," ",e("kpi.training.title")]}),r.jsxs("span",{className:"px-1.5 py-0.5 rounded-full bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300",children:[H.inspections_completed," ",e("kpi.inspections.title")]})]})]})]}),r.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[r.jsxs("button",{onClick:()=>E(H),className:"inline-flex items-center gap-1 text-xs text-hse-primary hover:underline",title:e("common.viewDetails"),children:[r.jsx(_r,{className:"w-4 h-4"}),r.jsx("span",{children:e("common.viewDetails")})]}),H.status==="draft"&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700",title:e("common.edit"),children:r.jsx(Ol,{className:"w-4 h-4 text-gray-600 dark:text-gray-300"})}),r.jsx("button",{onClick:()=>W(H),className:"p-1.5 rounded-md hover:bg-red-50 dark:hover:bg-red-900/30",title:e("common.delete"),children:r.jsx(Nt,{className:"w-4 h-4 text-red-600"})})]})]})]},H.id))}),r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"table w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:e("common.project")}),r.jsx("th",{children:e("kpi.projectInfo.reportPeriod")}),r.jsx("th",{children:e("kpi.accidents.title")}),r.jsx("th",{children:e("kpi.training.title")}),r.jsx("th",{children:e("kpi.inspections.title")}),r.jsx("th",{children:e("common.status")}),r.jsx("th",{children:e("common.actions")})]})}),r.jsx("tbody",{children:L.map(H=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:H.project?.name||e("common.unknown")}),r.jsx("p",{className:"text-xs text-gray-500",children:H.project?.code})]})}),r.jsx("td",{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Na,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{children:C(H)})]})}),r.jsx("td",{children:r.jsx("span",{className:H.accidents>0?"text-red-600 font-semibold":"text-green-600",children:H.accidents})}),r.jsx("td",{children:H.trainings_conducted}),r.jsx("td",{children:H.inspections_completed}),r.jsx("td",{children:r.jsxs("div",{className:"flex items-center gap-2",children:[D[H.status],r.jsx("span",{className:`badge ${z[H.status]}`,children:e(`kpi.status.${H.status}`)})]})}),r.jsx("td",{children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>E(H),className:"p-2 hover:bg-gray-100 rounded-lg",title:e("common.viewDetails"),children:r.jsx(_r,{className:"w-4 h-4 text-gray-600"})}),H.status==="draft"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",title:e("common.edit"),children:r.jsx(Ol,{className:"w-4 h-4 text-gray-600"})}),r.jsx("button",{onClick:()=>W(H),className:"p-2 hover:bg-gray-100 rounded-lg",title:e("common.delete"),children:r.jsx(Nt,{className:"w-4 h-4 text-red-600"})})]})]})})]},H.id))})]})})]}),u.last_page>1&&r.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-100",children:[r.jsxs("p",{className:"text-sm text-gray-500",children:[e("common.page")," ",u.current_page," ",e("common.of")," ",u.last_page]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>I(u.current_page-1),disabled:u.current_page===1,className:"btn-secondary text-sm",children:e("common.previous")}),r.jsx("button",{onClick:()=>I(u.current_page+1),disabled:u.current_page===u.last_page,className:"btn-secondary text-sm",children:e("common.next")})]})]})]}),r.jsx(nt,{isOpen:!!p,onClose:()=>g(null),title:p?.project?.name||e("kpi.management.detailsTitle"),size:"lg",children:p&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:C(p)}),r.jsx("span",{className:`badge ${z[p.status]}`,children:e(`kpi.status.${p.status}`)})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-3",children:e("kpi.accidents.title")}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[r.jsx(Jr,{label:e("kpi.accidents.total"),value:p.accidents,danger:p.accidents>0}),r.jsx(Jr,{label:e("kpi.accidents.fatal"),value:p.accidents_fatal,danger:p.accidents_fatal>0}),r.jsx(Jr,{label:e("kpi.accidents.serious"),value:p.accidents_serious}),r.jsx(Jr,{label:e("kpi.accidents.minor"),value:p.accidents_minor}),r.jsx(Jr,{label:e("kpi.accidents.nearMisses"),value:p.near_misses}),r.jsx(Jr,{label:e("kpi.accidents.firstAidCases"),value:p.first_aid_cases})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-3",children:e("kpi.training.title")}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[r.jsx(Jr,{label:e("kpi.training.conducted"),value:p.trainings_conducted}),r.jsx(Jr,{label:e("kpi.training.planned"),value:p.trainings_planned}),r.jsx(Jr,{label:e("kpi.training.employeesTrained"),value:p.employees_trained}),r.jsx(Jr,{label:e("kpi.training.trainingHours"),value:p.training_hours}),r.jsx(Jr,{label:e("kpi.training.toolboxTalks"),value:p.toolbox_talks})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-3",children:e("kpi.inspections.title")}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[r.jsx(Jr,{label:e("kpi.inspections.completed"),value:p.inspections_completed}),r.jsx(Jr,{label:e("kpi.inspections.planned"),value:p.inspections_planned}),r.jsx(Jr,{label:e("kpi.inspections.findingsOpen"),value:p.findings_open}),r.jsx(Jr,{label:e("kpi.inspections.findingsClosed"),value:p.findings_closed})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-3",children:e("kpi.rates.title")}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(Jr,{label:e("kpi.rates.frequencyRate"),value:Number(p.tf_value).toFixed(4)}),r.jsx(Jr,{label:e("kpi.rates.severityRate"),value:Number(p.tg_value).toFixed(4)}),r.jsx(Jr,{label:e("kpi.rates.hoursWorked"),value:Number(p.hours_worked).toLocaleString()}),r.jsx(Jr,{label:e("kpi.rates.lostWorkdays"),value:p.lost_workdays})]})]}),p.notes&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:e("kpi.notes")}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:p.notes})]}),v?r.jsxs("div",{className:"flex items-center justify-center py-4",children:[r.jsx(Re,{className:"w-5 h-5 animate-spin text-gray-400"}),r.jsx("span",{className:"ml-2 text-sm text-gray-500",children:e("kpi.dailyKpi.loadingDaily")})]}):r.jsx(r$,{dailySnapshots:x}),r.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:r.jsx("button",{onClick:()=>{g(null),h([])},className:"btn-secondary w-full",children:e("common.close")})})]})}),r.jsx(la,{isOpen:!!y,title:e("common.delete"),message:e("kpi.confirmDelete"),confirmLabel:e("common.delete"),cancelLabel:e("common.cancel"),variant:"danger",onConfirm:B,onCancel:()=>j(null)})]})}function Jr({label:e,value:t,danger:a=!1}){return r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3",children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:e}),r.jsx("p",{className:`text-lg font-semibold ${a?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-gray-100"}`,children:t})]})}const awe=Object.freeze(Object.defineProperty({__proto__:null,default:rwe},Symbol.toStringTag,{value:"Module"})),nwe=["30min","1h","1h30","2h","3h","halfDay","1day","2days","3days"],swe={"30min":.5,"1h":1,"1h30":1.5,"2h":2,"3h":3,halfDay:12,"1day":24,"2days":48,"3days":72},sj=10,WE={"30 Min":"30min","1 H":"1h","1 H 30 Min":"1h30","2 H":"2h","3 H":"3h","Half a day":"halfDay","1 day":"1day","2 days":"2days","3 days":"3days"};function iwe(){const{t:e}=ut(),{user:t}=At(),{projects:a,isLoading:n,fetchProjects:s}=bf(),i=f.useMemo(()=>{const be=new Date().getFullYear();return Number.isFinite(be)?be:2025},[]),o=be=>{const Ve=String(be??"").trim().match(/^(\d{4})-W(\d{2})$/);return Ve?{week:String(Number(Ve[2]))}:null},[l,c]=f.useState([]),[d,u]=f.useState(!1),[m,p]=f.useState(""),[g,x]=f.useState(""),[h,v]=f.useState(!1),[b,y]=f.useState(""),[j,_]=f.useState(""),[w,k]=f.useState(""),[N,P]=f.useState(""),[A,M]=f.useState(""),[R,O]=f.useState(""),[q,S]=f.useState(""),[I,E]=f.useState(null),[W,B]=f.useState(""),[C,D]=f.useState(null),[z,L]=f.useState(""),[X,H]=f.useState(!1),[F,ke]=f.useState(""),[ae,ue]=f.useState(""),[Z,me]=f.useState(""),[ge,se]=f.useState(""),[he,T]=f.useState(!1),[oe,G]=f.useState(1),[V,Y]=f.useState(!1),[ce,je]=f.useState(null),re=t?.project_list_preference??"code",U=f.useMemo(()=>Ir(a,re),[a,re]);f.useEffect(()=>{t?.name&&y(t.name)},[t]),f.useEffect(()=>{(async()=>{try{const $e=await s({per_page:50});$e.length===1&&p($e[0].id.toString())}catch($e){console.error("Failed to load projects for training page",$e)}})()},[s]),f.useEffect(()=>()=>{z&&URL.revokeObjectURL(z)},[z]),f.useEffect(()=>{xe()},[F,ae]);const xe=async()=>{try{u(!0);const be={};F&&(be.project_id=F),ae&&(be.week=ae);const $e=await lh.getAll(be);c($e.data.data??[])}catch(be){console.error("Failed to load trainings",be),K.error(e("errors.failedToLoad"))}finally{u(!1)}},J=e("training.themes")??[],Q=f.useMemo(()=>{if(!w.trim())return J;const be=w.toLowerCase();return J.filter($e=>$e.toLowerCase().includes(be))},[w,J]),ne=Number(q),ee=swe[R]??0,ye=ee*ne,te=f.useMemo(()=>Array.isArray(l)?l.filter(be=>{const $e=be.date?be.date.split("T")[0]:"";return!(Z&&(!$e||$e<Z)||ge&&(!$e||$e>ge))}):[],[l,Z,ge]),Ne=Math.max(1,Math.ceil((te.length??0)/sj)),Ce=f.useMemo(()=>{if(!Array.isArray(te))return[];const be=(oe-1)*sj;return te.slice(be,be+sj)},[te,oe]);f.useEffect(()=>{G(1)},[F,ae]);const Ue=async()=>{try{Y(!0);const be={};F&&(be.project_id=F),ae&&(be.week=ae),Z&&(be.from_date=Z),ge&&(be.to_date=ge);const $e=await Yd.exportTrainings(be),Ve=new Blob([$e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),_t=window.URL.createObjectURL(Ve),bt=document.createElement("a");bt.href=_t,bt.download="trainings.xlsx",bt.click(),window.URL.revokeObjectURL(_t)}catch(be){console.error("Error exporting trainings:",be),K.error(e("errors.failedToExport"))}finally{Y(!1)}},fe=be=>{const $e=be.target.files?.[0];if(E($e??null),$e){const Ve=new FileReader;Ve.onloadend=()=>{B(Ve.result.toString())},Ve.readAsDataURL($e)}else B("")},Te=be=>{be?.photo_url&&(D(be),H(!0),z&&(URL.revokeObjectURL(z),L("")),lh.getPhoto(be.id).then($e=>{const Ve=$e.data,_t=URL.createObjectURL(Ve);L(_t)}).catch($e=>{console.error("Failed to load training photo",$e),K.error(e("errors.failedToLoad"))}).finally(()=>{H(!1)}))},we=be=>{je(be)},Ee=async()=>{if(ce?.id)try{await lh.delete(ce.id),K.success(e("common.saved")??"Saved"),xe()}catch(be){console.error("Failed to delete training",be),K.error(e("errors.failedToDelete")??e("common.error")??"Error")}finally{je(null)}},Be=be=>{if(be.preventDefault(),!m||!g||!R||!ne||!N||N==="Other"&&!A)return;const{week:$e,year:Ve}=lk(g),_t={project_id:m,date:g,week_number:$e,week_year:Ve,by_internal:!h,by_name:h?null:b,external_company:h?j:null,theme:N==="Other"?A:N,duration_label:R,duration_hours:ee,participants:ne,training_hours:ye,photo:I};lh.create(_t).then(()=>{K.success(e("training.created")),x(""),v(!1),_(""),k(""),P(""),M(""),O(""),S(""),E(null),B(""),xe()}).catch(bt=>{console.error("Failed to create training",bt);const Pt=bt.response?.data?.message??e("errors.failedToSave");K.error(Pt)})};return r.jsxs("div",{className:"max-w-5xl mx-auto space-y-6 animate-fade-in",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:[e("nav.dashboard")," / ",e("training.navLabel")]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e("training.pageTitle")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:e("training.pageSubtitle")})]}),r.jsxs("div",{className:"card",children:[r.jsxs("button",{type:"button",onClick:()=>T(!he),className:"w-full p-4 flex items-center justify-between text-left hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors rounded-xl",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-hse-primary/10 rounded-lg flex items-center justify-center",children:r.jsx(Pn,{className:"w-5 h-5 text-hse-primary"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:e("training.addTraining")}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("training.clickToExpand")})]})]}),he?r.jsx(ld,{className:"w-5 h-5 text-gray-400"}):r.jsx(Vr,{className:"w-5 h-5 text-gray-400"})]}),he&&r.jsxs("form",{onSubmit:Be,className:"p-6 pt-2 space-y-6 border-t border-gray-100 dark:border-gray-700",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("training.project")}),r.jsxs(Ze,{value:m,onChange:be=>p(be.target.value),disabled:n||a.length===1,required:!0,children:[r.jsx("option",{value:"",children:e(n?"common.loading":"training.selectProject")}),U.map(be=>r.jsx("option",{value:be.id,children:Wt(be)},be.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("training.date")}),r.jsx(ot,{value:g,onChange:x,required:!0})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-end",children:r.jsxs("div",{children:[r.jsxs("label",{className:"label flex items-center justify-between",children:[r.jsx("span",{children:e("training.by")}),r.jsxs("label",{className:"flex items-center gap-2 text-xs cursor-pointer select-none",children:[r.jsx("div",{onClick:()=>v(!h),className:`w-4 h-4 rounded border-2 flex items-center justify-center transition-colors cursor-pointer ${h?"bg-hse-primary border-hse-primary":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800"}`,children:h&&r.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),r.jsx("span",{children:e("training.external")})]})]}),h?r.jsx("input",{type:"text",className:"input",value:j,onChange:be=>_(be.target.value),placeholder:e("training.externalPlaceholder"),required:!0}):r.jsx("input",{type:"text",className:"input",value:b,onChange:be=>y(be.target.value),readOnly:!0})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"label",children:e("training.theme")}),r.jsxs("div",{className:"relative mb-2",children:[r.jsx(Yr,{className:"w-4 h-4 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"}),r.jsx("input",{type:"text",className:"input pl-9",placeholder:e("training.searchTheme"),value:w,onChange:be=>k(be.target.value)}),w&&r.jsx("button",{type:"button",onClick:()=>k(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r.jsx(qt,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-lg divide-y divide-gray-100 dark:divide-gray-700 bg-white dark:bg-gray-800",children:Q.map(be=>r.jsxs("button",{type:"button",onClick:()=>P(be),className:`w-full text-left px-3 py-2.5 text-sm flex items-center justify-between gap-2 transition-colors ${N===be?"bg-hse-primary/10 text-hse-primary font-medium border-l-4 border-hse-primary":"text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/50 border-l-4 border-transparent"}`,children:[r.jsx("span",{children:be==="Other"?e("common.other"):be}),N===be&&r.jsx(fn,{className:"w-4 h-4 text-hse-primary flex-shrink-0"})]},be))}),N==="Other"&&r.jsxs("div",{className:"mt-2",children:[r.jsx("label",{className:"label",children:e("training.otherTheme")}),r.jsx("input",{type:"text",className:"input",value:A,onChange:be=>M(be.target.value),required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("training.duration")}),r.jsxs(Ze,{value:R,onChange:be=>O(be.target.value),children:[r.jsx("option",{value:"",children:e("training.selectDuration")}),nwe.map(be=>r.jsx("option",{value:be,children:e(`training.durations.${be}`)},be))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("training.participants")}),r.jsx("input",{type:"number",min:"1",className:"input",value:q,onChange:be=>S(be.target.value),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("training.trainingHours")}),r.jsxs("div",{className:"input bg-gray-50 dark:bg-gray-800 flex items-center justify-between",children:[r.jsx("span",{children:Number.isFinite(ye)?ye:0}),r.jsx("span",{className:"text-xs text-gray-400 ml-2",children:e("training.hoursUnit")})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"label flex items-center gap-2",children:[r.jsx(Gc,{className:"w-4 h-4"}),e("training.photo")]}),r.jsxs("label",{className:"flex items-center justify-center border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 cursor-pointer hover:border-hse-primary hover:bg-hse-primary/5 transition-colors",children:[r.jsx("input",{type:"file",accept:"image/*",onChange:fe,className:"hidden"}),W?r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:W,alt:"Preview",className:"w-12 h-12 object-cover rounded"}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("training.changePhoto")})]}):r.jsxs("div",{className:"text-center",children:[r.jsx(Gc,{className:"w-8 h-8 mx-auto text-gray-400 mb-2"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("training.uploadPhoto")})]})]})]}),r.jsx("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:r.jsx("button",{type:"submit",className:"btn-primary",disabled:!m||!g||!R||!ne||!N||N==="Other"&&!A,children:e("training.submit")})})]})]}),r.jsxs("div",{className:"card p-6 space-y-4",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[r.jsx(ki,{className:"w-4 h-4 text-hse-primary"}),e("training.listTitle")]}),r.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap md:flex-nowrap items-stretch sm:items-center gap-3",children:[r.jsxs(Ze,{value:F,onChange:be=>ke(be.target.value),className:"h-10 text-sm w-full sm:min-w-[180px]",children:[r.jsx("option",{value:"",children:e("training.allProjects")}),U.map(be=>r.jsx("option",{value:be.id,children:Wt(be)},be.id))]}),r.jsx("div",{className:"w-full sm:w-[170px]",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"flex-1",children:r.jsx(Ml,{value:ae?`${i}-W${String(ae).padStart(2,"0")}`:"",onChange:be=>{const $e=o(be);$e&&(ue($e.week),G(1))},placeholder:e("training.allWeeks"),className:"w-full h-10"})}),r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>ue(""),disabled:!ae,"aria-label":e("training.allWeeks"),title:e("training.allWeeks"),children:r.jsx(qt,{className:"w-4 h-4"})})]})}),r.jsx(ot,{value:Z,onChange:be=>{me(be),G(1)},placeholder:"From date",className:"w-full sm:w-40 h-10"}),r.jsx(ot,{value:ge,onChange:be=>{se(be),G(1)},placeholder:"To date",className:"w-full sm:w-40 h-10"}),r.jsxs("button",{type:"button",onClick:Ue,disabled:V||l.length===0,className:"btn-secondary flex items-center justify-center gap-2 text-sm w-full sm:w-auto",children:[r.jsx(Tr,{className:"w-4 h-4"}),r.jsx("span",{children:e("dashboard.exportExcel")})]})]})]}),d?r.jsxs("div",{className:"space-y-3 py-4",children:[r.jsx("div",{className:"hidden md:block space-y-2 animate-pulse",children:Array.from({length:4},(be,$e)=>r.jsx("div",{className:"h-10 rounded-md bg-gray-100 dark:bg-gray-800"},$e))}),r.jsx("div",{className:"md:hidden space-y-3 animate-pulse",children:Array.from({length:3},(be,$e)=>r.jsx("div",{className:"h-24 rounded-lg bg-gray-100 dark:bg-gray-800"},$e))})]}):l.length===0?r.jsxs("div",{className:"py-12 text-center",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-hse-primary/10 mb-3",children:r.jsx(ki,{className:"w-5 h-5 text-hse-primary"})}),r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e("training.noTrainings")})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"space-y-3 md:hidden",children:Ce.map(be=>r.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3 bg-white dark:bg-gray-800",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:be.project?.name??""}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:be.date?be.date.split("T")[0]:""}),r.jsx("p",{className:"mt-1 text-xs text-gray-600 dark:text-gray-300",children:be.by_internal?be.by_name:be.external_company??""})]}),r.jsxs("div",{className:"text-right text-xs text-gray-600 dark:text-gray-300 space-y-1",children:[r.jsx("p",{className:"font-medium truncate max-w-[140px]",children:be.theme}),r.jsx("p",{children:e(`training.durations.${WE[be.duration_label]??be.duration_label}`)}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{type:"button",onClick:()=>we(be),className:"p-1.5 rounded-md hover:bg-red-50 dark:hover:bg-red-900/30",title:e("common.delete")??"Delete",children:r.jsx(Nt,{className:"w-4 h-4 text-red-600"})})})]})]}),r.jsxs("div",{className:"mt-3 flex items-center justify-between text-[11px] text-gray-600 dark:text-gray-300",children:[r.jsxs("span",{className:"px-1.5 py-0.5 rounded-full bg-gray-50 dark:bg-gray-900",children:[e("training.participants"),": ",be.participants]}),r.jsxs("span",{className:"px-1.5 py-0.5 rounded-full bg-hse-primary/10 text-hse-primary",children:[e("training.trainingHours"),": ",be.training_hours]})]}),be.photo_url&&r.jsx("div",{className:"mt-2 flex justify-end",children:r.jsxs("button",{type:"button",onClick:()=>Te(be),className:"text-[11px] text-hse-primary hover:underline flex items-center gap-1",children:[r.jsx(Gc,{className:"w-3 h-3"}),e("training.viewPhoto")]})})]},be.id))}),r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 text-left",children:[r.jsx("th",{className:"py-2 pr-4 font-medium text-gray-500 dark:text-gray-400",children:e("training.colDate")}),r.jsx("th",{className:"py-2 pr-4 font-medium text-gray-500 dark:text-gray-400",children:e("training.colProject")}),r.jsx("th",{className:"py-2 pr-4 font-medium text-gray-500 dark:text-gray-400",children:e("training.colBy")}),r.jsx("th",{className:"py-2 pr-4 font-medium text-gray-500 dark:text-gray-400",children:e("training.colTheme")}),r.jsx("th",{className:"py-2 pr-4 font-medium text-gray-500 dark:text-gray-400",children:e("training.colDuration")}),r.jsx("th",{className:"py-2 pr-4 font-medium text-gray-500 dark:text-gray-400",children:e("training.colParticipants")}),r.jsx("th",{className:"py-2 pr-4 font-medium text-gray-500 dark:text-gray-400",children:e("training.colHours")}),r.jsx("th",{className:"py-2 pr-4 font-medium text-gray-500 dark:text-gray-400",children:e("training.colPhoto")}),r.jsx("th",{className:"py-2 pr-4 font-medium text-gray-500 dark:text-gray-400",children:e("common.actions")??"Actions"})]})}),r.jsx("tbody",{children:Ce.map(be=>r.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[r.jsx("td",{className:"py-2 pr-4 text-gray-900 dark:text-gray-100 text-xs",children:be.date?be.date.split("T")[0]:""}),r.jsx("td",{className:"py-2 pr-4 text-gray-900 dark:text-gray-100",children:be.project?.name??""}),r.jsx("td",{className:"py-2 pr-4 text-gray-700 dark:text-gray-200",children:be.by_internal?be.by_name:be.external_company??""}),r.jsx("td",{className:"py-2 pr-4 text-gray-700 dark:text-gray-200",children:be.theme}),r.jsx("td",{className:"py-2 pr-4 text-gray-700 dark:text-gray-200",children:e(`training.durations.${WE[be.duration_label]??be.duration_label}`)}),r.jsx("td",{className:"py-2 pr-4 text-gray-700 dark:text-gray-200",children:be.participants}),r.jsx("td",{className:"py-2 pr-4 text-gray-700 dark:text-gray-200",children:be.training_hours}),r.jsx("td",{className:"py-2 pr-4 text-gray-700 dark:text-gray-200",children:be.photo_url?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{type:"button",onClick:()=>Te(be),className:"text-xs text-hse-primary hover:underline",children:e("training.viewPhoto")}),r.jsx("a",{href:be.photo_url,download:!0,className:"text-xs text-gray-500 hover:underline",children:e("training.downloadPhoto")})]}):r.jsx("span",{className:"text-xs text-gray-400"})}),r.jsx("td",{className:"py-2 pr-4 text-gray-700 dark:text-gray-200",children:r.jsx("button",{type:"button",onClick:()=>we(be),className:"p-1.5 rounded-md hover:bg-red-50 dark:hover:bg-red-900/30",title:e("common.delete")??"Delete",children:r.jsx(Nt,{className:"w-4 h-4 text-red-600"})})})]},be.id))})]})})]}),!d&&l.length>0&&Ne>1&&r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100 dark:border-gray-800",children:[r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e("common.page")," ",oe," ",e("common.of")," ",Ne]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:()=>G(be=>Math.max(1,be-1)),disabled:oe===1,className:"btn-secondary text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:e("common.previous")}),r.jsx("button",{type:"button",onClick:()=>G(be=>Math.min(Ne,be+1)),disabled:oe===Ne,className:"btn-secondary text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:e("common.next")})]})]})]}),C&&r.jsx(nt,{isOpen:!!C,onClose:()=>{D(null),z&&(URL.revokeObjectURL(z),L(""))},title:e("training.photo"),size:"xl",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex justify-center",children:X?r.jsx("div",{className:"flex items-center justify-center h-48",children:r.jsx(Re,{className:"w-6 h-6 animate-spin text-hse-primary"})}):z?r.jsx("img",{src:z,alt:e("training.photo"),className:"max-h-[70vh] w-auto rounded-lg shadow-md object-contain bg-gray-900/5"}):r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("errors.failedToLoad")})}),r.jsx("div",{className:"flex justify-end",children:z&&r.jsxs("a",{href:z,download:!0,className:"btn-primary inline-flex items-center gap-2 text-sm",children:[r.jsx(jr,{className:"w-4 h-4"}),e("training.downloadPhoto")]})})]})}),r.jsx(la,{isOpen:!!ce,title:e("common.delete")??"Delete",message:e("common.confirmDelete")??"Are you sure you want to delete this record?",confirmLabel:e("common.delete")??"Delete",cancelLabel:e("common.cancel")??"Cancel",onConfirm:Ee,onCancel:()=>je(null)})]})}const owe=Object.freeze(Object.defineProperty({__proto__:null,default:iwe},Symbol.toStringTag,{value:"Module"})),UE=["nettoyage_rangement","protection_chute","echafaudage","epi","excavations","levage","methode_travail","manutention","vehicule_transport","outils_equipements","chute_trebuchement","electricite","protection_incendie","communication_attitude","acces_passage","formation_toolbox","inspection_evaluation","documentation_hse","gestion_sous_traitants","autre"],qs=new Map,lwe=50,cwe=e=>{let t=e?.replace(/^https?:\/\/[^/]+/,"");return t?(t.startsWith("/api/")?t=t.replace(/^\/api\//,"/"):t==="/api"&&(t="/"),t):null},HE=async e=>{const t=cwe(e);if(!t)return null;const a=qs.get(t);if(a)return qs.delete(t),qs.set(t,a),a;const n=await de.get(t,{responseType:"blob"}),s=window.URL.createObjectURL(n.data);for(qs.set(t,s);qs.size>lwe;){const i=qs.keys().next().value,o=qs.get(i);o&&window.URL.revokeObjectURL(o),qs.delete(i)}return s};function dwe(){const{t:e,language:t}=ut(),{user:a}=At(),[n,s]=f.useState(!1),[i,o]=f.useState(null),[l,c]=f.useState(!1),[d,u]=f.useState(!0),[m,p]=f.useState(!1),[g,x]=f.useState([]),[h,v]=f.useState([]),[b,y]=f.useState([]),[j,_]=f.useState([]),[w,k]=f.useState(!1),[N,P]=f.useState(null),[A,M]=f.useState(null),[R,O]=f.useState({project_id:"",status:"",category:""}),[q,S]=f.useState(!1),[I,E]=f.useState(null),[W,B]=f.useState(!1),[C,D]=f.useState({corrective_action:"",corrective_action_date:new Date().toISOString().split("T")[0],corrective_action_time:"",corrective_action_photo:null}),[z,L]=f.useState(null),[X,H]=f.useState([]),[F,ke]=f.useState(1),[ae,ue]=f.useState(!1),[Z,me]=f.useState(null),ge=ve=>{if(!ve)return null;const Le=/filename\*=UTF-8''([^;]+)|filename="?([^";]+)"?/i.exec(ve),ze=decodeURIComponent(Le?.[1]??Le?.[2]??"");return ze!==""?ze:null},se=ve=>{let Le=String(ve||"").replace(/^https?:\/\/[^/]+/i,"");return Le?(Le.startsWith("/api/")?Le=Le.replace(/^\/api\//,"/"):Le==="/api"&&(Le="/"),Le):null},he=(ve,Le)=>{const ze=URL.createObjectURL(ve),xt=document.createElement("a");xt.href=ze,xt.download=Le??"template.xlsx",document.body.appendChild(xt),xt.click(),xt.remove(),setTimeout(()=>URL.revokeObjectURL(ze),5e3)},T=async(ve,Le)=>{const ze=se(ve);if(!ze)return;const xt=await de.get(ze,{responseType:"blob"}),rr=ge(xt.headers?.["content-disposition"])??Le;he(xt.data,rr)},oe=()=>{o(null),s(!0)},G=async()=>{try{const ve=await ri.downloadTemplate(),Le=ge(ve.headers?.["content-disposition"])??"SGTM-SOR-Template.xlsx";he(ve.data,Le)}catch(ve){K.error(ve.response?.data?.message??e("common.downloadTemplateFailed"))}},V=async()=>{if(!i){K.error(e("common.chooseFile"));return}try{c(!0);const ve=new FormData;ve.append("file",i);const ze=(await ri.bulkImport(ve)).data?.data??{},xt=ze.imported??0,rr=ze.updated??0,Sa=ze.errors??[],nn=ze.failed_rows_url;if(K.success(e("common.importSummary",{imported:xt,updated:rr})),Sa.length>0&&K.error(e("common.importIssues",{count:Sa.length})),nn)try{await T(nn,"sor_reports_failed_rows.xlsx")}catch{}o(null),s(!1),Ee(),Te()}catch(ve){K.error(ve.response?.data?.message??e("common.importFailed"))}finally{c(!1)}},Y=a?.project_list_preference??"code",ce=f.useMemo(()=>Ir(h,Y),[h,Y]),[je,re]=f.useState({project_id:"",company:"",observation_date:new Date().toISOString().split("T")[0],observation_time:"",zone:"",supervisor:a?.name??"",non_conformity:"",photo:null,category:"",responsible_person:"",corrective_action:"",corrective_action_date:"",corrective_action_time:"",corrective_action_photo:null}),[U,xe]=f.useState(null),[J,Q]=f.useState(null),[ne,ee]=f.useState(null),ye=t==="fr"?"fr-FR":"en-GB",te=f.useCallback(ve=>{if(!ve)return"";try{return new Date(ve).toLocaleDateString(ye)}catch{return""}},[ye]),Ne=f.useCallback(ve=>ve?e(`sor.categories.${ve}`):"",[e]),Ce=ve=>{me(ve)},Ue=async()=>{if(Z?.id)try{await ri.delete(Z.id),K.success(e("common.saved")),Ee(),Te()}catch(ve){console.error("Failed to delete SOR report",ve),K.error(e("errors.failedToDelete")??e("common.error"))}finally{me(null)}};f.useEffect(()=>{const ve=Le=>{Le.key==="Escape"&&(w&&(k(!1),Ve()),q&&(S(!1),Ct(),Ve()),W&&(B(!1),Ct(),E(null)),A&&M(null))};return document.addEventListener("keydown",ve),()=>document.removeEventListener("keydown",ve)},[w,q,W,A]),f.useEffect(()=>{let ve=!1;return(async()=>{if(Q(null),ee(null),!!A){try{if(A.photo_view_url){const ze=await HE(A.photo_view_url);ve||Q(ze)}}catch(ze){console.error("Error loading problem photo:",ze)}try{if(A.corrective_action_photo_view_url){const ze=await HE(A.corrective_action_photo_view_url);ve||ee(ze)}}catch(ze){console.error("Error loading corrective photo:",ze)}}})(),()=>{ve=!0}},[A]),f.useEffect(()=>()=>{for(const ve of qs.values())try{window.URL.revokeObjectURL(ve)}catch{}qs.clear()},[]),f.useEffect(()=>{Ee()},[R]),f.useEffect(()=>{fe(),Te()},[]),f.useEffect(()=>{w&&je.project_id&&we(je.project_id)},[w]);const fe=async()=>{try{const[ve,Le]=await Promise.all([it.getAll({per_page:100}),Wa.getEntreprises()]),ze=ve.data.data??[];if(v(ze),_(Le.data.data??[]),ze.length===1){const xt=ze[0].id.toString();re(rr=>({...rr,project_id:xt})),we(xt)}}catch(ve){console.error("Error fetching projects:",ve)}},Te=async()=>{try{const ve=await ri.getPinned();H(ve.data.data??[])}catch(ve){console.error("Error fetching pinned reports:",ve)}},we=async ve=>{if(!ve){y([]);return}try{const Le=await it.getZones(ve);y(Le.data?.data?.zones??[])}catch(Le){console.error("Error fetching project zones:",Le),y([])}},Ee=async()=>{u(!0);try{const ve={};R.project_id&&(ve.project_id=R.project_id),R.status&&(ve.status=R.status),R.category&&(ve.category=R.category);const Le=await ri.getAll(ve);x(Le.data.data??[])}catch(ve){console.error("Error fetching SOR reports:",ve),K.error(e("errors.fetchFailed"))}finally{u(!1)}},Be=(ve,Le)=>{re(ze=>({...ze,[ve]:Le})),ve==="project_id"&&(we(Le),re(ze=>({...ze,zone:""})))},be=ve=>{const Le=ve.target.files[0];if(Le){re(xt=>({...xt,photo:Le}));const ze=new FileReader;ze.onloadend=()=>xe(ze.result),ze.readAsDataURL(Le)}},$e=ve=>{ve.preventDefault(),ve.stopPropagation();const Le=ve.dataTransfer?.files?.[0];if(!Le)return;if(!Le.type?.startsWith("image/")){K.error(e("errors.invalidFileType"));return}re(xt=>({...xt,photo:Le}));const ze=new FileReader;ze.onloadend=()=>xe(ze.result),ze.readAsDataURL(Le)},Ve=()=>{re({project_id:h.length===1?h[0].id.toString():"",company:"",observation_date:new Date().toISOString().split("T")[0],observation_time:"",zone:"",supervisor:a?.name??"",non_conformity:"",photo:null,category:"",responsible_person:"",corrective_action:"",corrective_action_date:"",corrective_action_time:"",corrective_action_photo:null}),xe(null),L(null),P(null)},_t=async ve=>{if(ve.preventDefault(),!je.project_id||!je.observation_date||!je.non_conformity||!je.category){K.error(e("sor.fillRequired"));return}if(N){p(!0);try{await ri.update(N.id,je),K.success(e("sor.updateSuccess")),Ve(),k(!1),Ee(),Te()}catch(Le){const ze=Le.response?.data?.message||e("errors.somethingWentWrong");K.error(ze)}finally{p(!1)}}else k(!1),S(!0)},bt=async()=>{if(!je.project_id||!je.observation_date||!je.non_conformity||!je.category){K.error(e("sor.fillRequired")),S(!1),k(!0);return}p(!0);try{const ve={...je,...C,submit_corrective_action:!0};await ri.create(ve),K.success(e("sor.createClosedSuccess")),Ve(),Ct(),S(!1),ke(1),Ee(),Te()}catch(ve){console.error("SOR submit error:",ve.response?.data);const Le=ve.response?.data?.errors;if(Le){const ze=Object.values(Le)[0];K.error(Array.isArray(ze)?ze[0]:ze)}else K.error(ve.response?.data?.message||e("errors.somethingWentWrong"))}finally{p(!1)}},Pt=async()=>{if(!je.project_id||!je.observation_date||!je.non_conformity||!je.category){K.error(e("sor.fillRequired")),S(!1),k(!0);return}p(!0);try{const ve={...je,submit_later:!0};console.log("Submitting SOR data:",ve),await ri.create(ve),K.success(e("sor.createPinnedSuccess")),Ve(),S(!1),ke(1),Ee(),Te()}catch(ve){console.error("SOR submit later error:",ve.response?.data);const Le=ve.response?.data?.errors;if(Le){const ze=Object.values(Le)[0];K.error(Array.isArray(ze)?ze[0]:ze)}else K.error(ve.response?.data?.message||e("errors.somethingWentWrong"))}finally{p(!1)}},It=async ve=>{if(ve.preventDefault(),!C.corrective_action){K.error(e("sor.correctiveRequired"));return}p(!0);try{await ri.submitCorrectiveAction(I.id,C),K.success(e("sor.correctiveSubmitted")),Ct(),E(null),B(!1),Ee(),Te()}catch(Le){const ze=Le.response?.data?.message||e("errors.somethingWentWrong");K.error(ze)}finally{p(!1)}},Ct=()=>{D({corrective_action:"",corrective_action_date:new Date().toISOString().split("T")[0],corrective_action_time:"",corrective_action_photo:null}),L(null)},Yt=ve=>{const Le=ve.target.files[0];if(Le){D(xt=>({...xt,corrective_action_photo:Le}));const ze=new FileReader;ze.onloadend=()=>L(ze.result),ze.readAsDataURL(Le)}},Ar=ve=>{ve.preventDefault(),ve.stopPropagation();const Le=ve.dataTransfer?.files?.[0];if(!Le)return;if(!Le.type?.startsWith("image/")){K.error(e("errors.invalidFileType"));return}D(xt=>({...xt,corrective_action_photo:Le}));const ze=new FileReader;ze.onloadend=()=>L(ze.result),ze.readAsDataURL(Le)},lt=ve=>{E(ve),D({corrective_action:ve?.corrective_action??"",corrective_action_date:ve?.corrective_action_date?ve.corrective_action_date.split("T")[0]:new Date().toISOString().split("T")[0],corrective_action_time:ve?.corrective_action_time??"",corrective_action_photo:null}),L(null),B(!0)},Ft=ve=>{we(ve.project_id),re({project_id:ve.project_id,company:ve.company??"",observation_date:ve.observation_date?.split("T")[0]??"",observation_time:ve.observation_time??"",zone:ve.zone??"",supervisor:ve.supervisor??"",non_conformity:ve.non_conformity??"",photo:null,category:ve.category??"",responsible_person:ve.responsible_person??"",corrective_action:ve.corrective_action??"",corrective_action_date:ve.corrective_action_date?ve.corrective_action_date.split("T")[0]:"",corrective_action_time:ve.corrective_action_time??"",corrective_action_photo:null}),L(null),P(ve),k(!0)},Pr=ve=>{$e(ve)},an=ve=>{const Le=ve.target.files[0];if(Le){re(xt=>({...xt,corrective_action_photo:Le}));const ze=new FileReader;ze.onloadend=()=>L(ze.result),ze.readAsDataURL(Le)}},Fe=ve=>{ve.preventDefault(),ve.stopPropagation();const Le=ve.dataTransfer?.files?.[0];if(!Le)return;if(!Le.type?.startsWith("image/")){K.error(e("errors.invalidFileType"));return}re(xt=>({...xt,corrective_action_photo:Le}));const ze=new FileReader;ze.onloadend=()=>L(ze.result),ze.readAsDataURL(Le)},Ge=ve=>{E(ve),Ct(),B(!0)},gt=ve=>{const Le={open:"bg-red-100 text-red-700",in_progress:"bg-amber-100 text-amber-700",closed:"bg-green-100 text-green-700"},ze={open:e("sor.status.open"),in_progress:e("sor.status.inProgress"),closed:e("sor.status.closed")};return r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Le[ve]}`,children:ze[ve]})},cr=async()=>{try{ue(!0);const ve={};R.project_id&&(ve.project_id=R.project_id),R.status&&(ve.status=R.status),R.category&&(ve.category=R.category);const Le=await Yd.exportDeviations(ve),ze=new Blob([Le.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),xt=window.URL.createObjectURL(ze),rr=document.createElement("a");rr.href=xt,rr.download="deviations.xlsx",rr.click(),window.URL.revokeObjectURL(xt)}catch(ve){console.error("Error exporting deviations:",ve),K.error(e("errors.somethingWentWrong"))}finally{ue(!1)}};return r.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[r.jsx(Qt,{className:"w-7 h-7 text-amber-500"}),e("sor.title")]}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:e("sor.subtitle")})]}),n&&r.jsx(nt,{isOpen:n,onClose:()=>s(!1),title:"Massive Add",size:"xl",children:r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[r.jsxs("button",{type:"button",onClick:G,className:"btn-secondary flex items-center justify-center gap-2",children:[r.jsx(Tr,{className:"w-4 h-4"}),r.jsx("span",{children:e("common.downloadTemplate")??"Download template"})]}),r.jsxs("label",{className:"flex items-center justify-between border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-xs cursor-pointer hover:border-hse-primary hover:bg-hse-primary/5",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx($a,{className:"w-4 h-4 text-gray-500"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:i?i.name:e("common.chooseFile")??"Choose Excel file"})]}),r.jsx("input",{type:"file",accept:".xlsx,.xls",className:"hidden",onChange:ve=>o(ve.target.files?.[0]??null)})]}),r.jsx("button",{type:"button",onClick:V,disabled:l||!i,className:"btn-primary",children:l?e("common.loading")??"Importing...":e("common.import")??"Import"})]})})}),r.jsxs("button",{onClick:ve=>{if(ve?.ctrlKey){oe();return}Ve(),k(!0)},className:"btn btn-primary flex items-center gap-2",children:[r.jsx(Pn,{className:"w-5 h-5"}),e("sor.addNew")]})]}),X.length>0&&r.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-700 rounded-xl p-4 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(rA,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"}),r.jsx("h3",{className:"font-semibold text-amber-800 dark:text-amber-300",children:e("sor.pendingCorrective")}),r.jsx("span",{className:"bg-amber-200 dark:bg-amber-700 text-amber-800 dark:text-amber-100 text-xs font-bold px-2 py-0.5 rounded-full",children:X.length})]}),r.jsx("div",{className:"grid gap-2",children:X.map(ve=>r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 flex items-center justify-between border border-amber-100 dark:border-gray-700",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium dark:text-gray-100",children:ve.project?.name}),r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:te(ve.observation_date)})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate max-w-md",children:ve.non_conformity})]}),r.jsxs("button",{onClick:()=>lt(ve),className:"btn btn-primary btn-sm flex items-center gap-1",children:[r.jsx(Ra,{className:"w-4 h-4"}),e("sor.addCorrective")]})]},ve.id))})]}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border dark:border-gray-700 p-4 mb-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("sor.project")}),r.jsxs("select",{value:R.project_id,onChange:ve=>O(Le=>({...Le,project_id:ve.target.value})),className:"input",children:[r.jsx("option",{value:"",children:e("common.all")}),ce.map(ve=>r.jsx("option",{value:ve.id,children:Wt(ve)},ve.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("sor.status.label")}),r.jsxs("select",{value:R.status,onChange:ve=>O(Le=>({...Le,status:ve.target.value})),className:"input",children:[r.jsx("option",{value:"",children:e("common.all")}),r.jsx("option",{value:"open",children:e("sor.status.open")}),r.jsx("option",{value:"in_progress",children:e("sor.status.inProgress")}),r.jsx("option",{value:"closed",children:e("sor.status.closed")})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("sor.category")}),r.jsxs("select",{value:R.category,onChange:ve=>O(Le=>({...Le,category:ve.target.value})),className:"input",children:[r.jsx("option",{value:"",children:e("common.all")}),UE.map(ve=>r.jsx("option",{value:ve,children:Ne(ve)},ve))]})]}),r.jsxs("div",{className:"flex items-end gap-2",children:[r.jsx("button",{onClick:()=>O({project_id:"",status:"",category:""}),className:"btn btn-outline w-full",type:"button",children:e("common.reset")}),r.jsxs("button",{type:"button",onClick:cr,disabled:ae||g.length===0,className:"btn-secondary w-full flex items-center justify-center gap-2 text-sm",children:[r.jsx(Tr,{className:"w-4 h-4"}),r.jsx("span",{children:e("dashboard.exportExcel")})]})]})]})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border dark:border-gray-700 overflow-hidden",children:d?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Re,{className:"w-8 h-8 animate-spin text-hse-primary"})}):g.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Qt,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:e("sor.noReports")})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900 border-b dark:border-gray-700",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:e("sor.date")}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:e("sor.project")}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:e("sor.zone")}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:e("sor.category")}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:e("sor.nonConformity")}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:e("sor.status.label")}),r.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase",children:e("common.actions")})]})}),r.jsx("tbody",{className:"divide-y dark:divide-gray-700",children:g.map(ve=>r.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[r.jsx("td",{className:"px-4 py-3 text-sm dark:text-gray-300",children:te(ve.observation_date)}),r.jsx("td",{className:"px-4 py-3 text-sm font-medium dark:text-gray-100",children:ve.project?.name}),r.jsx("td",{className:"px-4 py-3 text-sm dark:text-gray-300",children:ve.zone??""}),r.jsx("td",{className:"px-4 py-3 text-sm",children:r.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 dark:text-gray-300 rounded text-xs",children:Ne(ve.category)||ve.category})}),r.jsx("td",{className:"px-4 py-3 text-sm max-w-xs truncate dark:text-gray-300",children:ve.non_conformity}),r.jsx("td",{className:"px-4 py-3",children:gt(ve.status)}),r.jsx("td",{className:"px-4 py-3",children:r.jsxs("div",{className:"flex items-center justify-center gap-1",children:[r.jsx("button",{onClick:()=>M(ve),className:"p-1.5 text-gray-500 dark:text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded",title:e("common.view"),children:r.jsx(_r,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>Ft(ve),className:"p-1.5 text-gray-500 dark:text-gray-400 hover:text-amber-600 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded",title:e("common.edit"),children:r.jsx(Ol,{className:"w-4 h-4"})}),ve.status!=="closed"&&r.jsx("button",{onClick:()=>Ge(ve),className:"p-1.5 text-gray-500 dark:text-gray-400 hover:text-green-600 hover:bg-green-50 dark:hover:bg-green-900/30 rounded",title:e("sor.markClosed"),children:r.jsx(Xt,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>Ce(ve),className:"p-1.5 text-gray-500 dark:text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded",title:e("common.delete"),children:r.jsx(Nt,{className:"w-4 h-4"})})]})})]},ve.id))})]})})}),r.jsx(nt,{isOpen:w,onClose:()=>{k(!1),Ve()},title:e(N?"sor.editReport":"sor.newReport"),size:"xl",children:r.jsxs("form",{onSubmit:_t,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[e("sor.project")," *"]}),r.jsxs("select",{value:je.project_id,onChange:ve=>Be("project_id",ve.target.value),className:"input",required:!0,children:[r.jsx("option",{value:"",children:e("sor.selectProject")}),ce.map(ve=>r.jsx("option",{value:ve.id,children:Wt(ve)},ve.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("sor.company")}),r.jsx(Yp,{value:je.company,onChange:ve=>Be("company",ve),suggestions:j,placeholder:"SGTM, Sous-traitant...",defaultValue:"SGTM",icon:r.jsx(Mo,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"label flex items-center gap-2",children:[r.jsx(Na,{className:"w-4 h-4"}),e("sor.date")," *"]}),r.jsx(ot,{value:je.observation_date,onChange:ve=>Be("observation_date",ve),required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"label flex items-center gap-2",children:[r.jsx(oa,{className:"w-4 h-4"}),e("sor.time")]}),r.jsx(wm,{value:je.observation_time,onChange:ve=>Be("observation_time",ve)})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"label flex items-center gap-2",children:[r.jsx(bo,{className:"w-4 h-4"}),e("sor.zone")]}),r.jsx(Yp,{value:je.zone,onChange:ve=>Be("zone",ve),suggestions:b,placeholder:e("sor.zonePlaceholder")||"Zone de travail...",disabled:!je.project_id})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"label flex items-center gap-2",children:[r.jsx(Zd,{className:"w-4 h-4"}),e("sor.supervisor")]}),r.jsx("input",{type:"text",value:je.supervisor,onChange:ve=>Be("supervisor",ve.target.value),className:"input",placeholder:e("sor.supervisorPlaceholder")})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[e("sor.nonConformity")," *"]}),r.jsx("textarea",{value:je.non_conformity,onChange:ve=>Be("non_conformity",ve.target.value),className:"input min-h-[100px]",placeholder:e("sor.nonConformityPlaceholder"),required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"label flex items-center gap-2",children:[r.jsx(Ku,{className:"w-4 h-4"}),e("sor.photo")]}),r.jsxs("label",{className:"flex items-center justify-center border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 cursor-pointer hover:border-hse-primary hover:bg-hse-primary/5 transition-colors",onDragOver:ve=>ve.preventDefault(),onDrop:Pr,children:[r.jsx("input",{type:"file",accept:"image/*",onChange:be,className:"hidden"}),U?r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:U,alt:"Preview",className:"w-12 h-12 object-cover rounded"}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("sor.changePhoto")})]}):r.jsxs("div",{className:"text-center",children:[r.jsx(Ku,{className:"w-8 h-8 mx-auto text-gray-400 mb-2"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("sor.uploadPhoto")})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[e("sor.category")," *"]}),r.jsxs("select",{value:je.category,onChange:ve=>Be("category",ve.target.value),className:"input",required:!0,children:[r.jsx("option",{value:"",children:e("sor.selectCategory")}),UE.map(ve=>r.jsx("option",{value:ve,children:Ne(ve)},ve))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("sor.responsiblePerson")}),r.jsx("input",{type:"text",value:je.responsible_person,onChange:ve=>Be("responsible_person",ve.target.value),className:"input",placeholder:e("sor.responsiblePersonPlaceholder")})]}),N&&r.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("sor.correctiveDate")}),r.jsx(ot,{value:je.corrective_action_date,onChange:ve=>Be("corrective_action_date",ve)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("sor.correctiveTime")}),r.jsx(wm,{value:je.corrective_action_time,onChange:ve=>Be("corrective_action_time",ve)})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("sor.correctiveAction")}),r.jsx("textarea",{value:je.corrective_action,onChange:ve=>Be("corrective_action",ve.target.value),className:"input min-h-[80px]",placeholder:e("sor.correctiveActionPlaceholder")})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("sor.correctivePhoto")}),r.jsxs("label",{className:"flex items-center justify-center border-2 border-dashed border-green-200 dark:border-green-800 rounded-lg p-3 cursor-pointer hover:border-hse-primary transition-colors bg-white/60 dark:bg-gray-900/20",onDragOver:ve=>ve.preventDefault(),onDrop:Fe,children:[r.jsx("input",{type:"file",accept:"image/*",onChange:an,className:"hidden"}),z?r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:z,alt:"Preview",className:"w-12 h-12 object-cover rounded"}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("sor.changePhoto")})]}):r.jsxs(r.Fragment,{children:[r.jsx(Ku,{className:"w-5 h-5 text-gray-400 mr-2"}),r.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("sor.uploadPhoto")})]})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[r.jsx("button",{type:"button",onClick:()=>{k(!1),Ve()},className:"btn btn-outline",children:e("common.cancel")}),r.jsx("button",{type:"submit",disabled:m,className:"btn btn-primary flex items-center gap-2",children:m?r.jsxs(r.Fragment,{children:[r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e("common.saving")]}):r.jsxs(r.Fragment,{children:[r.jsx(Xt,{className:"w-4 h-4"}),e(N?"common.update":"common.submit")]})})]})]})}),r.jsx(nt,{isOpen:!!A,onClose:()=>M(null),title:e("sor.viewReport"),size:"lg",children:A&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:e("sor.status.label")}),gt(A.status)]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:e("sor.project")}),r.jsx("p",{className:"font-medium dark:text-gray-100",children:A.project?.name})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:e("sor.company")}),r.jsx("p",{className:"font-medium dark:text-gray-100",children:A.company??""})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:e("sor.date")}),r.jsx("p",{className:"font-medium dark:text-gray-100",children:te(A.observation_date)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:e("sor.time")}),r.jsx("p",{className:"font-medium dark:text-gray-100",children:A.observation_time??""})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:e("sor.zone")}),r.jsx("p",{className:"font-medium dark:text-gray-100",children:A.zone??""})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:e("sor.supervisor")}),r.jsx("p",{className:"font-medium dark:text-gray-100",children:A.supervisor??""})]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:e("sor.category")}),r.jsx("p",{className:"font-medium dark:text-gray-100",children:Ne(A.category)||A.category})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:e("sor.nonConformity")}),r.jsx("p",{className:"font-medium bg-gray-50 dark:bg-gray-700 dark:text-gray-100 p-3 rounded-lg",children:A.non_conformity})]}),J&&r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:e("sor.photo")}),r.jsx("img",{src:J,alt:"Non-conformity",className:"mt-2 rounded-lg max-h-64 object-contain border dark:border-gray-600 cursor-pointer hover:opacity-90",onClick:()=>window.open(J,"_blank")})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:e("sor.responsiblePerson")}),r.jsx("p",{className:"font-medium dark:text-gray-100",children:A.responsible_person??""})]}),A.corrective_action&&r.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[r.jsx("span",{className:"text-green-700 dark:text-green-400 text-sm font-medium",children:e("sor.correctiveAction")}),r.jsx("p",{className:"font-medium text-green-800 dark:text-green-200 mt-1",children:A.corrective_action}),A.corrective_action_date&&r.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 mt-2",children:[e("sor.correctiveDate"),": ",te(A.corrective_action_date),A.corrective_action_time&&` ${e("common.at")} ${A.corrective_action_time}`]}),A.closer_name&&r.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:[e("sor.closedBy"),": ",r.jsx("span",{className:"font-medium",children:A.closer_name})]}),ne&&r.jsx("div",{className:"mt-3",children:r.jsx("img",{src:ne,alt:"Corrective action",className:"rounded-lg max-h-48 object-contain border border-green-200 dark:border-green-700 cursor-pointer hover:opacity-90",onClick:()=>window.open(ne,"_blank")})})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t dark:border-gray-700",children:[r.jsx("button",{onClick:()=>M(null),className:"btn btn-outline",children:e("common.close")}),A.status==="closed"&&A.corrective_action&&r.jsx("button",{onClick:()=>{Ft(A),M(null)},className:"btn btn-outline",children:e("sor.editCorrective")}),r.jsx("button",{onClick:()=>{Ft(A),M(null)},className:"btn btn-primary",children:e("common.edit")})]})]})}),r.jsx(nt,{isOpen:q,onClose:()=>{S(!1),Ct(),Ve()},title:e("sor.correctivePromptTitle"),size:"md",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"w-16 h-16 bg-amber-100 dark:bg-amber-900/50 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ra,{className:"w-8 h-8 text-amber-600 dark:text-amber-400"})}),r.jsx("h2",{className:"text-xl font-bold mb-2 dark:text-gray-100",children:e("sor.correctivePromptTitle")}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("sor.correctivePromptMessage")})]}),r.jsxs("div",{className:"space-y-4 mb-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("sor.correctiveDate")}),r.jsx(ot,{value:C.corrective_action_date,onChange:ve=>D(Le=>({...Le,corrective_action_date:ve}))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("sor.correctiveTime")}),r.jsx(wm,{value:C.corrective_action_time,onChange:ve=>D(Le=>({...Le,corrective_action_time:ve}))})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[e("sor.correctiveAction")," *"]}),r.jsx("textarea",{value:C.corrective_action,onChange:ve=>D(Le=>({...Le,corrective_action:ve.target.value})),className:"input min-h-[80px]",placeholder:e("sor.correctiveActionPlaceholder")})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("sor.correctivePhoto")}),r.jsxs("label",{className:"flex items-center justify-center border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-3 cursor-pointer hover:border-hse-primary transition-colors",onDragOver:ve=>ve.preventDefault(),onDrop:Ar,children:[r.jsx("input",{type:"file",accept:"image/*",onChange:Yt,className:"hidden"}),z?r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:z,alt:"Preview",className:"w-12 h-12 object-cover rounded"}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("sor.changePhoto")})]}):r.jsxs(r.Fragment,{children:[r.jsx(Ku,{className:"w-5 h-5 text-gray-400 mr-2"}),r.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("sor.uploadPhoto")})]})]})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{S(!1),Ct(),Ve()},className:"btn btn-outline flex-1",disabled:m,children:e("common.cancel")}),r.jsxs("button",{onClick:Pt,className:"btn bg-amber-500 hover:bg-amber-600 text-white flex-1 flex items-center justify-center gap-2",disabled:m,children:[m?r.jsx(Re,{className:"w-4 h-4 animate-spin"}):r.jsx(rA,{className:"w-4 h-4"}),e("sor.submitLater")]}),r.jsxs("button",{onClick:bt,className:"btn btn-primary flex-1 flex items-center justify-center gap-2",disabled:m||!C.corrective_action,children:[m?r.jsx(Re,{className:"w-4 h-4 animate-spin"}):r.jsx(Xt,{className:"w-4 h-4"}),e("sor.submitAndClose")]})]})]})}),r.jsx(nt,{isOpen:W&&!!I,onClose:()=>{B(!1),Ct(),E(null)},title:e("sor.addCorrectiveTitle"),size:"lg",children:I&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-sm text-gray-500 dark:text-gray-400 mb-2",children:e("sor.problemSummary")}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("p",{className:"text-sm dark:text-gray-300",children:[r.jsxs("span",{className:"font-medium",children:[e("sor.project"),":"]})," ",I.project?.name]}),r.jsxs("p",{className:"text-sm dark:text-gray-300",children:[r.jsxs("span",{className:"font-medium",children:[e("sor.date"),":"]})," ",te(I.observation_date)]}),r.jsxs("p",{className:"text-sm dark:text-gray-300",children:[r.jsxs("span",{className:"font-medium",children:[e("sor.category"),":"]})," ",Ne(I.category)||I.category]}),r.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-400 mt-2",children:I.non_conformity})]})]}),r.jsxs("form",{onSubmit:It,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("sor.correctiveDate")}),r.jsx(ot,{value:C.corrective_action_date,onChange:ve=>D(Le=>({...Le,corrective_action_date:ve}))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("sor.correctiveTime")}),r.jsx(wm,{value:C.corrective_action_time,onChange:ve=>D(Le=>({...Le,corrective_action_time:ve}))})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[e("sor.correctiveAction")," *"]}),r.jsx("textarea",{value:C.corrective_action,onChange:ve=>D(Le=>({...Le,corrective_action:ve.target.value})),className:"input min-h-[80px]",placeholder:e("sor.correctiveActionPlaceholder"),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("sor.correctivePhoto")}),r.jsxs("label",{className:"flex items-center justify-center border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-3 cursor-pointer hover:border-hse-primary transition-colors",onDragOver:ve=>ve.preventDefault(),onDrop:Ar,children:[r.jsx("input",{type:"file",accept:"image/*",onChange:Yt,className:"hidden"}),z?r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:z,alt:"Preview",className:"w-12 h-12 object-cover rounded"}),r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("sor.changePhoto")})]}):r.jsxs(r.Fragment,{children:[r.jsx(Ku,{className:"w-5 h-5 text-gray-400 mr-2"}),r.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("sor.uploadPhoto")})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[r.jsx("button",{type:"button",onClick:()=>{B(!1),Ct(),E(null)},className:"btn btn-outline",children:e("common.cancel")}),r.jsx("button",{type:"submit",disabled:m,className:"btn btn-primary flex items-center gap-2",children:m?r.jsxs(r.Fragment,{children:[r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e("common.saving")]}):r.jsxs(r.Fragment,{children:[r.jsx(Xt,{className:"w-4 h-4"}),e("sor.submitAndClose")]})})]})]})]})}),r.jsx(la,{isOpen:!!Z,title:e("common.delete"),message:e("common.confirmDelete"),confirmLabel:e("common.delete"),cancelLabel:e("common.cancel"),onConfirm:Ue,onCancel:()=>me(null)})]})}const uwe=Object.freeze(Object.defineProperty({__proto__:null,default:dwe},Symbol.toStringTag,{value:"Module"}));function mwe({projectId:e,projectName:t}){const{t:a}=ut(),{user:n}=At(),s=n?.role==="hse_manager"?["responsable","supervisor","user"]:n?.role==="responsable"?["supervisor","user"]:["supervisor"],[i,o]=f.useState([]),[l,c]=f.useState(!0),[d,u]=f.useState(""),[m,p]=f.useState(!1),[g,x]=f.useState(null),[h,v]=f.useState(!1),[b,y]=f.useState(!1),[j,_]=f.useState([]),[w,k]=f.useState([]),[N,P]=f.useState(!1),[A,M]=f.useState(""),[R,O]=f.useState(!1),[q,S]=f.useState(!1),[I,E]=f.useState(null),[W,B]=f.useState(!1),C=f.useRef(null),D=f.useRef(null),[z,L]=f.useState({name:"",email:"",cin:"",role:"supervisor",phone:"",password:""}),[X,H]=f.useState(null);f.useEffect(()=>{ge()},[e]),f.useEffect(()=>{const Q=ne=>{C.current&&!C.current.contains(ne.target)&&S(!1)};return document.addEventListener("mousedown",Q),()=>document.removeEventListener("mousedown",Q)},[]);const F=Q=>{if(!Q)return null;const ne=/filename\*=UTF-8''([^;]+)|filename="?([^";]+)"?/i.exec(Q),ee=decodeURIComponent(ne?.[1]??ne?.[2]??"");return ee!==""?ee:null},ke=Q=>{let ne=String(Q||"").replace(/^https?:\/\/[^/]+/i,"");return ne?(ne.startsWith("/api/")?ne=ne.replace(/^\/api\//,"/"):ne==="/api"&&(ne="/"),ne):null},ae=(Q,ne)=>{const ee=URL.createObjectURL(Q),ye=document.createElement("a");ye.href=ee,ye.download=ne??"template.xlsx",document.body.appendChild(ye),ye.click(),ye.remove(),setTimeout(()=>URL.revokeObjectURL(ee),5e3)},ue=async(Q,ne)=>{const ee=ke(Q);if(!ee)return;const ye=await de.get(ee,{responseType:"blob"}),te=F(ye.headers?.["content-disposition"])??ne;ae(ye.data,te)},Z=async()=>{try{const Q=await it.downloadTeamTemplate(e),ne=F(Q.headers?.["content-disposition"])??`SGTM-Project-Team-Template-${e}.xlsx`;ae(Q.data,ne)}catch(Q){K.error(Q.response?.data?.message??a("errors.somethingWentWrong"))}},me=async()=>{if(!I){K.error(a("common.chooseFile"));return}try{B(!0);const Q=new FormData;Q.append("file",I);const ee=(await it.importTeam(e,Q)).data?.data??{},ye=ee.added_count??0,te=ee.errors??[],Ne=ee.failed_rows_url;if(K.success(a("common.addedCount",{added:ye})),te.length>0&&K.error(a("common.importIssues",{count:te.length})),Ne)try{await ue(Ne,"project_team_failed_rows.xlsx")}catch{}E(null),S(!1),ge()}catch(Q){K.error(Q.response?.data?.message??a("errors.somethingWentWrong"))}finally{B(!1)}},ge=async()=>{try{c(!0);const[Q,ne]=await Promise.all([it.getMembers(e).catch(()=>({data:{data:[]}})),it.getTeam(e).catch(()=>({data:{data:[]}}))]),ee=Q.data.data??[],ye=ne.data.data??[],te=new Map;ee.forEach(Ne=>{te.set(Ne.id,{...Ne,canEdit:!0,canRemove:!0})}),ye.forEach(Ne=>{te.has(Ne.id)||te.set(Ne.id,{...Ne,isTeamMember:!0,canEdit:!1,canRemove:!0})}),o(Array.from(te.values()))}catch(Q){console.error("Failed to load members:",Q)}finally{c(!1)}},se=async()=>{try{const Q=await it.getAvailableOfficers(e);_(Q.data.data??[])}catch(Q){console.error("Failed to load available officers:",Q)}},he=(Q=null)=>{O(!1),Q&&Q.canEdit?(x(Q),L({name:Q.name,email:Q.email,cin:Q.cin??"",role:Q.role,phone:Q.phone??"",password:""})):(x(null),L({name:"",email:"",cin:"",role:s[0]??"supervisor",phone:"",password:""})),p(!0)},T=async()=>{O(!1),k([]),M(""),await se(),y(!0)},oe=()=>{p(!1),x(null),L({name:"",email:"",cin:"",role:s[0]??"supervisor",phone:"",password:""})},G=async Q=>{if(Q.preventDefault(),z.password){const ne=dd(z.role);if(!Xd(z.password,ne).ok){K.error(a("auth.passwordPolicy.invalid"));return}}v(!0);try{g?(await it.updateMember(e,g.id,z),K.success(a("members.updateSuccess"))):(await it.createMember(e,z)).data.data?.merged?K.success(a("members.createMerged")):K.success(a("members.createSuccess")),oe(),ge()}catch(ne){K.error(ne.response?.data?.message??a("errors.somethingWentWrong"))}finally{v(!1)}},V=async()=>{if(w.length!==0){P(!0);try{await it.addTeamMembers(e,w),K.success(a("projects.membersAdded",{count:w.length})),y(!1),k([]),ge()}catch(Q){K.error(Q.response?.data?.message??a("errors.somethingWentWrong"))}finally{P(!1)}}},Y=Q=>{H(Q)},ce=async()=>{if(X)try{if(X.isTeamMember)await it.removeTeamMember(e,X.id),K.success(a("projects.memberRemoved"));else{const Q=await it.removeMember(e,X.id);K.success(a("members.removeSuccess")),Q.data.data?.deactivated&&K.info(a("members.removeWarning"))}ge()}catch(Q){K.error(Q.response?.data?.message??a("errors.somethingWentWrong"))}finally{H(null)}},je=Q=>{k(ne=>ne.includes(Q)?ne.filter(ee=>ee!==Q):[...ne,Q])},re=i.filter(Q=>{if(!d)return!0;const ne=d.toLowerCase();return Q.name?.toLowerCase().includes(ne)||Q.email?.toLowerCase().includes(ne)||Q.cin?.toLowerCase().includes(ne)}),U=j.filter(Q=>Q.name.toLowerCase().includes(A.toLowerCase())||Q.email.toLowerCase().includes(A.toLowerCase())),xe=Q=>{switch(Q){case"responsable":return"badge-success";case"supervisor":return"badge-info";case"user":return"badge-secondary";default:return"badge-secondary"}},J=i.length;return r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"card-header flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(sa,{className:"w-5 h-5 text-hse-primary"}),r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:a("projects.teamMembers")}),r.jsx("span",{className:"badge badge-info",children:J})]}),r.jsxs("div",{ref:C,className:"relative",children:[r.jsxs("button",{onClick:()=>O(!R),className:"btn-primary btn-sm flex items-center gap-2",children:[r.jsx(Dm,{className:"w-4 h-4"}),a("members.addMember"),r.jsx(Vr,{className:"w-4 h-4"})]}),R&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>O(!1)}),r.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-20",children:[r.jsxs("button",{onClick:T,className:"w-full px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 rounded-t-lg flex items-center gap-3",children:[r.jsx(sa,{className:"w-4 h-4 text-gray-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:a("projects.addToTeam")}),r.jsx("p",{className:"text-xs text-gray-500",children:a("projects.selectOfficers")})]})]}),r.jsxs("button",{onClick:()=>{O(!1),S(!0)},className:"w-full px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-3 border-t border-gray-200 dark:border-gray-700",children:[r.jsx($a,{className:"w-4 h-4 text-gray-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:"Massive Add"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Import XLSX"})]})]}),r.jsxs("button",{onClick:()=>he(),className:"w-full px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 rounded-b-lg flex items-center gap-3 border-t border-gray-200 dark:border-gray-700",children:[r.jsx(Dm,{className:"w-4 h-4 text-gray-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:a("members.newMember")}),r.jsx("p",{className:"text-xs text-gray-500",children:a("members.subtitle")})]})]})]})]}),q&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>S(!1)}),r.jsx("div",{className:"absolute right-0 mt-2 w-80 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl p-4 z-20",children:r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{type:"button",onClick:Z,className:"btn-secondary w-full",children:"Download Template"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("input",{ref:D,type:"file",accept:".xlsx,.xls",onChange:Q=>E(Q.target.files?.[0]??null),className:"hidden"}),r.jsx("button",{type:"button",onClick:()=>D.current?.click(),className:"w-full rounded-lg border border-dashed border-gray-300 dark:border-gray-600 px-3 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700/50 transition",children:r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Select XLSX file"}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:I?I.name:"Choose the filled template (.xlsx)"})]}),r.jsx("div",{className:"text-xs font-semibold px-2 py-1 rounded-md bg-orange-50 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300",children:"Browse"})]})}),I&&r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-300 truncate",children:["Selected: ",r.jsx("span",{className:"font-semibold",children:I.name})]}),r.jsx("button",{type:"button",onClick:()=>{E(null),D.current&&(D.current.value="")},className:"text-xs font-semibold text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100",children:"Clear"})]})]}),r.jsx("button",{type:"button",onClick:me,disabled:W||!I,className:"btn-primary w-full",children:W?r.jsxs("span",{className:"flex items-center justify-center gap-2",children:[r.jsx(Re,{className:"w-4 h-4 animate-spin"}),"Uploading..."]}):"Upload"})]})})]})]})]}),r.jsxs("div",{className:"card-body",children:[J>0&&r.jsx("div",{className:"mb-4",children:r.jsxs("div",{className:"relative",children:[r.jsx(Yr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",value:d,onChange:Q=>u(Q.target.value),placeholder:a("common.search"),className:"input pl-10"})]})}),l?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(Re,{className:"w-6 h-6 animate-spin text-hse-primary"})}):re.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:re.map(Q=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[r.jsx("div",{className:"w-10 h-10 bg-teal-100 dark:bg-teal-900 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-teal-600 dark:text-teal-400 font-semibold",children:Q.name?.charAt(0).toUpperCase()})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:Q.name}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`badge badge-xs ${xe(Q.role)}`,children:a(`users.roles.${Q.role}`)}),Q.cin&&r.jsx("span",{className:"text-xs text-gray-500 font-mono",children:Q.cin})]})]})]}),r.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[Q.canEdit&&r.jsx("button",{onClick:()=>he(Q),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",title:a("common.edit"),children:r.jsx(Lo,{className:"w-4 h-4 text-gray-500"})}),Q.canRemove&&Q.id!==n?.id&&r.jsx("button",{onClick:()=>Y(Q),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:a("projects.removeFromTeam"),children:r.jsx(Wz,{className:"w-4 h-4 text-red-500"})})]})]},Q.id))}):r.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[r.jsx(sa,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:a("projects.noTeamMembers")})]})]}),m&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-lg max-h-[90vh] flex flex-col",children:[r.jsxs("div",{className:"sticky top-0 z-[200] p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between bg-white dark:bg-gray-800",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:a(g?"members.editMember":"members.newMember")}),r.jsx("button",{onClick:oe,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:r.jsx(qt,{className:"w-5 h-5"})})]}),r.jsxs("form",{onSubmit:G,className:"flex-1 overflow-y-auto p-4 space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[a("users.form.fullName")," *"]}),r.jsx("input",{type:"text",value:z.name,onChange:Q=>L({...z,name:Q.target.value}),className:"input",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[a("users.form.cin")," *"]}),r.jsxs("div",{className:"relative",children:[r.jsx(k5,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",value:z.cin,onChange:Q=>L({...z,cin:Q.target.value}),className:"input pl-10",placeholder:a("users.form.cinPlaceholder"),required:!0})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[a("users.form.email")," *"]}),r.jsxs("div",{className:"relative",children:[r.jsx(Ry,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"email",value:z.email,onChange:Q=>L({...z,email:Q.target.value}),className:"input pl-10",required:!0})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[a("users.form.role")," *"]}),r.jsx(Ze,{value:z.role,onChange:Q=>L({...z,role:Q.target.value}),required:!0,children:s.map(Q=>r.jsx("option",{value:Q,children:a(`users.roles.${Q}`)},Q))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:a("users.form.phone")}),r.jsxs("div",{className:"relative",children:[r.jsx(A5,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"tel",value:z.phone,onChange:Q=>L({...z,phone:Q.target.value}),className:"input pl-10"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[a("users.form.password")," ",g&&`(${a("users.form.passwordHint")})`]}),r.jsx("input",{type:"password",value:z.password,onChange:Q=>L({...z,password:Q.target.value}),className:"input",...!g&&{required:!0},minLength:dd(z.role).minLength}),r.jsx(Fy,{password:z.password,role:z.role})]}),!g&&r.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-sm text-blue-700 dark:text-blue-300",children:r.jsx("p",{children:a("members.cinInfo")})}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t dark:border-gray-700",children:[r.jsx("button",{type:"button",onClick:oe,className:"btn-outline",children:a("common.cancel")}),r.jsxs("button",{type:"submit",disabled:h,className:"btn-primary flex items-center gap-2",children:[h&&r.jsx(Re,{className:"w-4 h-4 animate-spin"}),a(g?"common.save":"members.addMember")]})]})]})]})}),b&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-lg max-h-[80vh] flex flex-col",children:[r.jsxs("div",{className:"sticky top-0 z-[200] p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between bg-white dark:bg-gray-800",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:a("projects.selectOfficers")}),r.jsx("button",{onClick:()=>y(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:r.jsx(qt,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"relative",children:[r.jsx(Yr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",value:A,onChange:Q=>M(Q.target.value),placeholder:a("common.search"),className:"input pl-10"})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:U.length>0?r.jsx("div",{className:"space-y-2",children:U.map(Q=>r.jsxs("div",{onClick:()=>je(Q.id),className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors ${w.includes(Q.id)?"bg-hse-primary/10 border-2 border-hse-primary":"bg-gray-50 dark:bg-gray-700 border-2 border-transparent hover:border-gray-300"}`,children:[r.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center ${w.includes(Q.id)?"bg-hse-primary border-hse-primary":"border-gray-300"}`,children:w.includes(Q.id)&&r.jsx(fn,{className:"w-3 h-3 text-white"})}),r.jsx("div",{className:"w-10 h-10 bg-teal-100 dark:bg-teal-900 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-teal-600 dark:text-teal-400 font-semibold",children:Q.name.charAt(0).toUpperCase()})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:Q.name}),r.jsx("p",{className:"text-xs text-gray-500",children:Q.email})]})]},Q.id))}):r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(sa,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:a("projects.noAvailableOfficers")})]})}),r.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[r.jsxs("span",{className:"text-sm text-gray-500",children:[w.length," ",a("common.selected")]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>y(!1),className:"btn-outline",children:a("common.cancel")}),r.jsxs("button",{onClick:V,disabled:w.length===0||N,className:"btn-primary flex items-center gap-2",children:[N?r.jsx(Re,{className:"w-4 h-4 animate-spin"}):r.jsx(Dm,{className:"w-4 h-4"}),a("projects.addSelected")]})]})]})]})}),r.jsx(la,{isOpen:!!X,title:a("common.confirm"),message:X?X.isTeamMember?a("projects.confirmRemoveMember",{name:X.name}):a("members.removeConfirm",{name:X.name}):"",confirmLabel:a("projects.removeFromTeam"),cancelLabel:a("common.cancel"),variant:"danger",onConfirm:ce,onCancel:()=>H(null)})]})}const KE=typeof document<"u"?document.body:null,VE={zIndex:9999,pointerEvents:"none"};function pwe(){const{id:e}=As(),t=Zr(),{t:a,language:n}=ut(),[s,i]=f.useState(null),[o,l]=f.useState([]),[c,d]=f.useState(!0),[u,m]=f.useState(!1),{isAdmin:p,user:g}=At(),x=t.pathname.startsWith("/sor"),h=g?.role==="user",v=p()||g?.role==="hse_manager"||g?.role==="responsable",b=p()||g?.role==="hse_manager"||g?.role==="responsable";f.useEffect(()=>{y()},[e]);const y=async()=>{try{d(!0);const[P,A]=await Promise.all([it.getById(e),it.getKpiTrends(e,12)]);i(P.data.data),l(A.data.data||[])}catch{K.error(a("projects.loadFailed"))}finally{d(!1)}},j=n==="en"?"en-GB":"fr-FR",_=(P,A)=>{const M=Number(P),R=Number(A);return!M||!R?"":new Date(M,R-1,1).toLocaleString(j,{month:"short"})},w=()=>{const P=a("common.weekAbbrev");return o.map(A=>({...A,week:A.week_number?`${P}${String(A.week_number).padStart(2,"0")}`:_(A.report_year,A.report_month),tf:Number(A.tf_value).toFixed(2),tg:Number(A.tg_value).toFixed(2)}))},k={active:"badge-success",completed:"badge-info",on_hold:"badge-warning",cancelled:"badge-danger"};if(c)return r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx(Re,{className:"w-8 h-8 animate-spin text-hse-primary"})});if(!s)return r.jsxs("div",{className:"text-center py-12",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:a("projects.notFound")}),r.jsx(xa,{to:p()?"/admin/projects":"/my-projects",className:"btn-primary mt-4",children:a("projects.backToProjects")})]});const N=s.kpi_summary||{};return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs(xa,{to:p()?"/admin/projects":x?"/sor/projects":"/my-projects",className:"inline-flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100",children:[r.jsx(Tl,{className:"w-4 h-4"}),a("projects.backToProjects")]}),r.jsxs("div",{className:"card p-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-16 h-16 bg-hse-primary/10 rounded-xl flex items-center justify-center",children:r.jsx(hn,{className:"w-8 h-8 text-hse-primary"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:s.name}),r.jsx("span",{className:`badge ${k[s.status]}`,children:a(`projects.${s.status}`)??s.status.replace("_"," ")}),s.pole&&r.jsx("span",{className:"text-[11px] px-2 py-0.5 rounded-full bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-200",children:s.pole})]}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:s.code}),s.description&&r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2 max-w-2xl",children:s.description})]})]}),!p()&&(h||x?r.jsx(xa,{to:"/sor",className:"btn-primary",children:a("sor.submitDeviation")}):r.jsx(xa,{to:`/kpi/submit/${s.id}`,className:"btn-primary",children:a("kpi.submitKpi")}))]}),r.jsxs("div",{className:"flex items-center justify-between gap-3 mt-4",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[(Array.isArray(s.zones)?s.zones:[]).slice(0,6).map(P=>r.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-amber-50 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200",children:P},P)),(Array.isArray(s.zones)?s.zones:[]).length>6&&r.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",(s.zones?.length??0)-6]}),(Array.isArray(s.zones)?s.zones:[]).length===0&&r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:a("common.noData")})]}),b&&r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>m(!0),children:a("projects.manageZones")})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6 pt-6 border-t border-gray-100 dark:border-gray-700",children:[s.location&&r.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[r.jsx(bo,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"text-sm",children:s.location})]}),s.start_date&&r.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[r.jsx(Na,{className:"w-4 h-4 text-gray-400"}),r.jsxs("span",{className:"text-sm",children:[new Date(s.start_date).toLocaleDateString(j),s.end_date&&` - ${new Date(s.end_date).toLocaleDateString(j)}`]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[r.jsx(sa,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"text-sm",children:a("projects.assignedUsersCount",{count:s.users?.length??0})})]}),s.client_name&&r.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"text-gray-400",children:a("projects.clientLabel")})," ",s.client_name]})]})]}),v&&s&&r.jsx(mwe,{projectId:s.id,projectName:s.name}),s&&r.jsx(wN,{projectId:s.id,projectName:s.name,isOpen:u,onClose:()=>m(!1)}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-4",children:[r.jsx(xc,{title:a("projects.summary.accidents"),value:N.total_accidents??0,icon:Qt,color:N.total_accidents>0?"red":"green"}),r.jsx(xc,{title:a("projects.summary.trainings"),value:N.total_trainings??0,icon:js,color:"blue"}),r.jsx(xc,{title:a("projects.summary.inspections"),value:N.total_inspections??0,icon:Ra,color:"green"}),r.jsx(xc,{title:a("projects.summary.hoursWorked"),value:Number(N.total_hours_worked??0).toLocaleString(),icon:jo,color:"purple"}),r.jsx(xc,{title:a("projects.summary.avgTf"),value:Number(N.avg_tf??0).toFixed(2),icon:jo,color:"amber"}),r.jsx(xc,{title:a("projects.summary.avgTg"),value:Number(N.avg_tg??0).toFixed(2),icon:jo,color:"purple"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:a("projects.charts.kpiTrends")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-80",children:o.length>0?r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Ci,{data:w(),children:[r.jsx(jt,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),r.jsx(ct,{dataKey:"week",tick:{fontSize:12}}),r.jsx(rt,{tick:{fontSize:12}}),r.jsx(tt,{allowEscapeViewBox:{x:!0,y:!0},portal:KE,wrapperStyle:VE}),r.jsx(aa,{}),r.jsx(Kt,{type:"monotone",dataKey:"accidents",stroke:"#dc2626",name:a("projects.metrics.accidents")}),r.jsx(Kt,{type:"monotone",dataKey:"trainings_conducted",stroke:"#3b82f6",name:a("projects.metrics.trainings")}),r.jsx(Kt,{type:"monotone",dataKey:"inspections_completed",stroke:"#16a34a",name:a("projects.metrics.inspections")})]})}):r.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:a("common.noData")})})})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:a("projects.charts.tfTgTrends")})}),r.jsx("div",{className:"card-body",children:r.jsx("div",{className:"h-80",children:o.length>0?r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Ci,{data:w(),children:[r.jsx(jt,{strokeDasharray:"3 3",className:"dark:opacity-20"}),r.jsx(ct,{dataKey:"week",tick:{fontSize:12},className:"dark:text-gray-400"}),r.jsx(rt,{tick:{fontSize:12},className:"dark:text-gray-400"}),r.jsx(tt,{allowEscapeViewBox:{x:!0,y:!0},portal:KE,wrapperStyle:VE}),r.jsx(aa,{}),r.jsx(Kt,{type:"monotone",dataKey:"tf",stroke:"#f59e0b",name:a("projects.metrics.tfRate")}),r.jsx(Kt,{type:"monotone",dataKey:"tg",stroke:"#8b5cf6",name:a("projects.metrics.tgRate")})]})}):r.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:a("common.noData")})})})]})]}),s.users&&s.users.length>0&&r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:a("projects.assignedTeamMembers")})}),r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:s.users.map(P=>r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[r.jsx("div",{className:"w-10 h-10 bg-hse-primary rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white font-semibold",children:P.name.charAt(0).toUpperCase()})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:P.name}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a(`roles.${P.role}`)??P.role})]})]},P.id))})})]}),s.kpiReports&&s.kpiReports.length>0&&r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:a("projects.recentKpiReports")})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:a("projects.period")}),r.jsx("th",{children:a("projects.metrics.accidents")}),r.jsx("th",{children:a("projects.metrics.trainings")}),r.jsx("th",{children:a("projects.metrics.inspections")}),r.jsx("th",{children:"TF"}),r.jsx("th",{children:"TG"}),r.jsx("th",{children:a("projects.status")})]})}),r.jsx("tbody",{children:s.kpiReports.map(P=>r.jsxs("tr",{children:[r.jsxs("td",{children:[_(P.report_year,P.report_month)," ",P.report_year]}),r.jsx("td",{className:P.accidents>0?"text-red-600 font-semibold":"",children:P.accidents}),r.jsx("td",{children:P.trainings_conducted}),r.jsx("td",{children:P.inspections_completed}),r.jsx("td",{children:Number(P.tf_value).toFixed(2)}),r.jsx("td",{children:Number(P.tg_value).toFixed(2)}),r.jsx("td",{children:r.jsx("span",{className:`badge ${P.status==="approved"?"badge-success":P.status==="submitted"?"badge-warning":P.status==="rejected"?"badge-danger":"badge-info"}`,children:a(`kpi.status.${P.status}`)??P.status})})]},P.id))})]})})]})]})}function xc({title:e,value:t,icon:a,color:n}){const s={red:"border-red-200 bg-red-50 dark:border-red-700 dark:bg-red-900/50",green:"border-green-200 bg-green-50 dark:border-green-700 dark:bg-green-900/50",blue:"border-blue-200 bg-blue-50 dark:border-blue-700 dark:bg-blue-900/50",amber:"border-amber-200 bg-amber-50 dark:border-amber-700 dark:bg-amber-900/50",purple:"border-purple-200 bg-purple-50 dark:border-purple-700 dark:bg-purple-900/50"},i={red:"text-red-600 dark:text-red-400",green:"text-green-600 dark:text-green-400",blue:"text-blue-600 dark:text-blue-400",amber:"text-amber-600 dark:text-amber-400",purple:"text-purple-600 dark:text-purple-400"};return r.jsxs("div",{className:`rounded-xl border-2 p-4 ${s[n]}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(a,{className:`w-4 h-4 ${i[n]}`}),r.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:e})]}),r.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:t})]})}const fwe=Object.freeze(Object.defineProperty({__proto__:null,default:pwe},Symbol.toStringTag,{value:"Module"}));function hwe(){const{user:e,updateProfile:t,changePassword:a}=At(),{t:n,language:s,setLanguage:i,languages:o}=ut(),{isDark:l,toggleTheme:c}=$y(),d=f.useMemo(()=>dd(e?.role),[e?.role]),[u,m]=f.useState({name:e?.name??"",phone:e?.phone??""}),[p,g]=f.useState({project_list_preference:e?.project_list_preference??"code"}),[x,h]=f.useState({current_password:"",password:"",password_confirmation:""}),[v,b]=f.useState({current:!1,new:!1,confirm:!1}),[y,j]=f.useState(!1),[_,w]=f.useState(!1),[k,N]=f.useState(!1),P=(e?.role??"")==="admin",[A,M]=f.useState(null),[R,O]=f.useState(12),[q,S]=f.useState(!1),[I,E]=f.useState(!1),[W,B]=f.useState(!1),C=H=>{if(!H)return null;const F=/filename\*=UTF-8''([^;]+)|filename="?([^";]+)"?/i.exec(H),ke=decodeURIComponent(F?.[1]??F?.[2]??"");return ke!==""?ke:null},D=async()=>{if(P){S(!0);try{const H=await ob.getSettings(),F=H.data?.data??H.data;M(F),O(Number(F?.frequency_hours??12)||12)}catch(H){K.error(H.response?.data?.message??n("errors.failedToLoad")),M(null)}finally{S(!1)}}};f.useEffect(()=>{D()},[P]);const z=async H=>{H.preventDefault(),j(!0);try{await t(u),K.success(n("profile.profileUpdated"))}catch(F){K.error(F.response?.data?.message??n("errors.failedToSave"))}finally{j(!1)}},L=async()=>{N(!0);try{await t(p),K.success(n("profile.preferencesUpdated"))}catch(H){K.error(H.response?.data?.message??n("errors.failedToSave"))}finally{N(!1)}},X=async H=>{if(H.preventDefault(),x.password!==x.password_confirmation){K.error(n("profile.passwordMismatch"));return}if(!Xd(x.password,d).ok){K.error(n("auth.passwordPolicy.invalid"));return}w(!0);try{await a(x.current_password,x.password,x.password_confirmation),K.success(n("success.passwordChanged")),h({current_password:"",password:"",password_confirmation:""})}catch(F){K.error(F.response?.data?.message||n("errors.failedToSave"))}finally{w(!1)}};return r.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 animate-fade-in",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n("profile.title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:n("profile.subtitle")})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:n("profile.personalInfo")})}),r.jsxs("form",{onSubmit:z,className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsx("div",{className:"w-20 h-20 bg-hse-primary rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-2xl font-bold",children:e?.name?.charAt(0)?.toUpperCase()||"U"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:e?.name}),r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 capitalize flex items-center gap-1",children:[r.jsx(Ni,{className:"w-4 h-4"}),e?.role]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:n("users.form.fullName")}),r.jsxs("div",{className:"relative",children:[r.jsx(Zd,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",value:u.name,onChange:H=>m({...u,name:H.target.value}),className:"input pl-10",required:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:n("users.form.email")}),r.jsxs("div",{className:"relative",children:[r.jsx(Ry,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"email",value:e?.email??"",className:"input pl-10 bg-gray-50 dark:bg-gray-900",disabled:!0})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:n("profile.emailReadOnly")})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:n("users.form.phone")}),r.jsxs("div",{className:"relative",children:[r.jsx(A5,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"tel",value:u.phone,onChange:H=>m({...u,phone:H.target.value}),className:"input pl-10",placeholder:"+212 6XX XXX XXX"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:n("users.form.role")}),r.jsxs("div",{className:"relative",children:[r.jsx(Ni,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",value:e?.role??"",className:"input pl-10 bg-gray-50 dark:bg-gray-900 capitalize",disabled:!0})]})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{type:"submit",disabled:y,className:"btn-primary",children:y?r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Re,{className:"w-4 h-4 animate-spin"}),n("common.saving")]}):r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Kg,{className:"w-4 h-4"}),n("profile.updateProfile")]})})})]})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:n("profile.changePassword")})}),r.jsxs("form",{onSubmit:X,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:n("auth.currentPassword")}),r.jsxs("div",{className:"relative",children:[r.jsx(dl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:v.current?"text":"password",value:x.current_password,onChange:H=>h({...x,current_password:H.target.value}),className:"input pl-10 pr-10",required:!0}),r.jsx("button",{type:"button",onClick:()=>b({...v,current:!v.current}),className:"absolute right-3 top-1/2 -translate-y-1/2",children:v.current?r.jsx(bl,{className:"w-4 h-4 text-gray-400"}):r.jsx(_r,{className:"w-4 h-4 text-gray-400"})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:n("auth.newPassword")}),r.jsxs("div",{className:"relative",children:[r.jsx(dl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:v.new?"text":"password",value:x.password,onChange:H=>h({...x,password:H.target.value}),className:"input pl-10 pr-10",required:!0,minLength:d.minLength}),r.jsx("button",{type:"button",onClick:()=>b({...v,new:!v.new}),className:"absolute right-3 top-1/2 -translate-y-1/2",children:v.new?r.jsx(bl,{className:"w-4 h-4 text-gray-400"}):r.jsx(_r,{className:"w-4 h-4 text-gray-400"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:n("auth.confirmPassword")}),r.jsxs("div",{className:"relative",children:[r.jsx(dl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:v.confirm?"text":"password",value:x.password_confirmation,onChange:H=>h({...x,password_confirmation:H.target.value}),className:"input pl-10 pr-10",required:!0,minLength:d.minLength}),r.jsx("button",{type:"button",onClick:()=>b({...v,confirm:!v.confirm}),className:"absolute right-3 top-1/2 -translate-y-1/2",children:v.confirm?r.jsx(bl,{className:"w-4 h-4 text-gray-400"}):r.jsx(_r,{className:"w-4 h-4 text-gray-400"})})]})]})]}),r.jsx(Fy,{password:x.password,role:e?.role}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{type:"submit",disabled:_,className:"btn-primary",children:_?r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Re,{className:"w-4 h-4 animate-spin"}),n("common.saving")]}):r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(dl,{className:"w-4 h-4"}),n("profile.changePassword")]})})})]})]}),r.jsxs("div",{className:"card p-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-4",children:n("profile.preferencesTitle")}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:n("profile.language")}),r.jsx("select",{className:"input",value:s,onChange:H=>i(H.target.value),children:o.map(H=>r.jsx("option",{value:H.code,children:H.name},H.code))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:n("profile.projectListPreference")}),r.jsxs("select",{className:"input",value:p.project_list_preference,onChange:H=>g({...p,project_list_preference:H.target.value}),children:[r.jsx("option",{value:"code",children:n("profile.projectListByCode")}),r.jsx("option",{value:"name",children:n("profile.projectListByName")})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:n("profile.theme")}),r.jsxs("button",{type:"button",onClick:c,className:"w-full flex items-center justify-between px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[r.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-200",children:n(l?"common.darkMode":"common.lightMode")}),r.jsx("span",{className:"flex items-center gap-1.5 text-gray-600 dark:text-gray-300",children:l?r.jsx(ik,{className:"w-4 h-4"}):r.jsx(qy,{className:"w-4 h-4"})})]})]})]}),r.jsx("div",{className:"flex justify-end mt-4",children:r.jsx("button",{type:"button",onClick:L,disabled:k,className:"btn-primary",children:k?r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Re,{className:"w-4 h-4 animate-spin"}),n("common.saving")]}):r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Kg,{className:"w-4 h-4"}),n("profile.savePreferences")]})})})]}),P&&r.jsxs("div",{className:"card p-6",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:n("profile.backup.title")}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:n("profile.backup.subtitle")}),!!A?.last_run_at&&r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[n("profile.backup.lastRun"),": ",String(A.last_run_at)]}),!!A?.latest_filename&&r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[n("profile.backup.latestFile"),": ",String(A.latest_filename)]})]}),r.jsx("button",{type:"button",onClick:D,disabled:q,className:"btn-secondary",children:n(q?"common.loading":"common.refresh")})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:n("profile.backup.frequency")}),r.jsxs("select",{className:"input",value:R,onChange:H=>O(Number(H.target.value)||12),children:[r.jsx("option",{value:6,children:"6h"}),r.jsx("option",{value:12,children:"12h"}),r.jsx("option",{value:24,children:"24h"}),r.jsx("option",{value:48,children:"48h"})]})]}),r.jsxs("div",{className:"flex items-end justify-end gap-3",children:[r.jsx("button",{type:"button",className:"btn-primary",disabled:I,onClick:async()=>{E(!0);try{await ob.updateSettings({frequency_hours:R}),K.success(n("success.saved")),await D()}catch(H){K.error(H.response?.data?.message??n("errors.failedToSave"))}finally{E(!1)}},children:n(I?"common.saving":"common.save")}),r.jsx("button",{type:"button",className:"btn-secondary",disabled:W,onClick:async()=>{B(!0);try{const H=await ob.downloadLatest(),F=new Blob([H.data],{type:"application/zip"}),ke=window.URL.createObjectURL(F),ae=document.createElement("a");ae.href=ke;const ue=C(H.headers?.["content-disposition"])||"backup.zip";ae.setAttribute("download",ue),document.body.appendChild(ae),ae.click(),ae.remove(),window.URL.revokeObjectURL(ke)}catch(H){K.error(H.response?.data?.message??n("errors.downloadFailed"))}finally{B(!1)}},children:n(W?"common.loading":"profile.backup.downloadLatest")})]})]})]})]})}const gwe=Object.freeze(Object.defineProperty({__proto__:null,default:hwe},Symbol.toStringTag,{value:"Module"}));function xwe(){const{t:e,language:t}=ut(),a=t==="fr"?"Page Non Trouve":"Page Not Found",n=t==="fr"?"Erreur 404":"Error 404",s=t==="fr"?"La page que vous recherchez n'existe pas ou a t dplace.":"The page you're looking for doesn't exist or has been moved.";return r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100 dark:from-gray-900 dark:to-gray-950 flex items-center justify-center p-6 relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 opacity-[0.03] dark:opacity-[0.05]",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),r.jsx("div",{className:"absolute top-1/4 left-1/4 w-[500px] h-[500px] bg-amber-500/5 dark:bg-amber-500/10 rounded-full blur-[100px]"}),r.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-[400px] h-[400px] bg-orange-500/5 dark:bg-orange-500/10 rounded-full blur-[100px]"}),r.jsxs("div",{className:"relative z-10 text-center max-w-lg mx-auto",children:[r.jsx("div",{className:"relative mb-8",children:r.jsxs("div",{className:"relative inline-flex items-center justify-center",children:[r.jsx("div",{className:"absolute w-40 h-40 rounded-full border-2 border-dashed border-amber-300/50 dark:border-amber-600/30 animate-[spin_20s_linear_infinite]"}),r.jsx("div",{className:"absolute w-32 h-32 rounded-full border border-amber-200/50 dark:border-amber-700/30"}),r.jsx("div",{className:"relative w-28 h-28 rounded-2xl bg-gradient-to-br from-amber-400 to-orange-500 dark:from-amber-500 dark:to-orange-600 shadow-2xl shadow-amber-500/25 dark:shadow-amber-500/20 flex items-center justify-center transform rotate-3 hover:rotate-0 transition-transform duration-500",children:r.jsxs("div",{className:"relative",children:[r.jsx(Yr,{className:"w-12 h-12 text-white/90",strokeWidth:2.5}),r.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-white dark:bg-gray-900 rounded-full flex items-center justify-center shadow-lg",children:r.jsx("span",{className:"text-amber-600 dark:text-amber-400 font-bold text-xs",children:"?"})})]})}),r.jsx("div",{className:"absolute -top-2 -right-4 w-8 h-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg flex items-center justify-center animate-bounce",style:{animationDuration:"3s"},children:r.jsx(wn,{className:"w-4 h-4 text-amber-500"})}),r.jsx("div",{className:"absolute -bottom-2 -left-4 w-8 h-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg flex items-center justify-center animate-bounce",style:{animationDuration:"3s",animationDelay:"1s"},children:r.jsx(hz,{className:"w-4 h-4 text-orange-500"})})]})}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-amber-100 dark:bg-amber-900/40 rounded-full mb-4",children:[r.jsx(Qt,{className:"w-3.5 h-3.5 text-amber-600 dark:text-amber-400"}),r.jsx("span",{className:"text-xs font-semibold text-amber-700 dark:text-amber-300 tracking-wide uppercase",children:n})]}),r.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-4 tracking-tight",children:a}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg leading-relaxed max-w-md mx-auto",children:s})]}),r.jsx("div",{className:"my-8 h-2 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-800",children:r.jsx("div",{className:"h-full w-full",style:{background:"repeating-linear-gradient(45deg, #f59e0b, #f59e0b 10px, #1f2937 10px, #1f2937 20px)"}})}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3",children:[r.jsxs("button",{onClick:()=>window.history.back(),className:"group w-full sm:w-auto px-6 py-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl font-medium text-gray-700 dark:text-gray-200 hover:border-amber-400 dark:hover:border-amber-500 hover:shadow-lg transition-all duration-200 flex items-center justify-center gap-2",children:[r.jsx(Tl,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),e("errors.goBack")]}),r.jsxs(xa,{to:"/",className:"group w-full sm:w-auto px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 rounded-xl font-medium text-white shadow-lg shadow-amber-500/25 hover:shadow-xl hover:shadow-amber-500/30 transition-all duration-200 flex items-center justify-center gap-2",children:[r.jsx(sk,{className:"w-4 h-4"}),e("errors.goHome")]})]}),r.jsx("p",{className:"mt-12 text-sm text-gray-400 dark:text-gray-600",children:t==="fr"?"Si le problme persiste, contactez l'administrateur.":"If the problem persists, contact your administrator."})]})]})}const ywe=Object.freeze(Object.defineProperty({__proto__:null,default:xwe},Symbol.toStringTag,{value:"Module"})),vwe=[15,30,45,60],ij=10;function bwe(){const{t:e}=ut(),{user:t}=At(),{projects:a,isLoading:n,fetchProjects:s}=bf(),i=f.useMemo(()=>{const we=new Date().getFullYear();return Number.isFinite(we)?we:2025},[]),o=we=>{const Be=String(we??"").trim().match(/^(\d{4})-W(\d{2})$/);return Be?{week:String(Number(Be[2]))}:null},[l,c]=f.useState(!1),[d,u]=f.useState(null),[m,p]=f.useState(!1),g=t?.project_list_preference??"code",x=f.useMemo(()=>Ir(a,g),[a,g]),[h,v]=f.useState([]),[b,y]=f.useState(!1),[j,_]=f.useState(""),[w,k]=f.useState(""),[N,P]=f.useState(""),[A,M]=f.useState(""),[R,O]=f.useState(""),[q,S]=f.useState(""),[I,E]=f.useState(15),[W,B]=f.useState(""),[C,D]=f.useState(""),[z,L]=f.useState(""),[X,H]=f.useState(""),[F,ke]=f.useState(""),[ae,ue]=f.useState(!1),[Z,me]=f.useState(1),[ge,se]=f.useState(!1),[he,T]=f.useState(null);f.useEffect(()=>{t?.name&&P(t.name)},[t?.name]);const oe=we=>{if(!we)return null;const Ee=/filename\*=UTF-8''([^;]+)|filename="?([^";]+)"?/i.exec(we),Be=decodeURIComponent(Ee?.[1]??Ee?.[2]??"");return Be!==""?Be:null},G=we=>{let Ee=String(we||"").replace(/^https?:\/\/[^/]+/i,"");return Ee?(Ee.startsWith("/api/")?Ee=Ee.replace(/^\/api\//,"/"):Ee==="/api"&&(Ee="/"),Ee):null},V=(we,Ee)=>{const Be=URL.createObjectURL(we),be=document.createElement("a");be.href=Be,be.download=Ee??"template.xlsx",document.body.appendChild(be),be.click(),be.remove(),setTimeout(()=>URL.revokeObjectURL(Be),5e3)},Y=async(we,Ee)=>{const Be=G(we);if(!Be)return;const be=await de.get(Be,{responseType:"blob"}),$e=oe(be.headers?.["content-disposition"])??Ee;V(be.data,$e)},ce=()=>{u(null),c(!0)},je=async()=>{try{const we=await Hu.downloadTemplate(),Ee=oe(we.headers?.["content-disposition"])??"SGTM-Awareness-Template.xlsx";V(we.data,Ee)}catch(we){K.error(we.response?.data?.message??e("common.downloadTemplateFailed"))}},re=async()=>{if(!d){K.error(e("common.chooseFile"));return}try{p(!0);const we=new FormData;we.append("file",d);const Be=(await Hu.bulkImport(we)).data?.data??{},be=Be.imported??0,$e=Be.updated??0,Ve=Be.errors??[],_t=Be.failed_rows_url;if(K.success(e("common.importSummary",{imported:be,updated:$e})),Ve.length>0&&K.error(e("common.importIssues",{count:Ve.length})),_t)try{await Y(_t,"awareness_sessions_failed_rows.xlsx")}catch{}u(null),c(!1),U()}catch(we){K.error(we.response?.data?.message??e("common.importFailed"))}finally{p(!1)}};f.useEffect(()=>{(async()=>{try{const Ee=await s();Ee.length===1&&_(Ee[0].id)}catch(Ee){console.error("Failed to load projects",Ee)}})()},[s]),f.useEffect(()=>{U()},[C,z]);const U=async()=>{try{y(!0);const we={};C&&(we.project_id=C),z&&(we.week=z);const Ee=await Hu.getAll(we);v(Ee.data?.data??Ee.data??[])}catch(we){console.error("Failed to load awareness sessions",we)}finally{y(!1)}},xe=f.useMemo(()=>{const we=e("awareness.themes");return Array.isArray(we)?we:[]},[e]),J=f.useMemo(()=>{if(!A)return xe;const we=A.toLowerCase();return xe.filter(Ee=>Ee.toLowerCase().includes(we))},[xe,A]),Q=parseInt(W,10),ee=I/60*Q,ye=f.useMemo(()=>Array.isArray(h)?h.filter(we=>{const Ee=we.date?we.date.substring(0,10):"";return!(X&&(!Ee||Ee<X)||F&&(!Ee||Ee>F))}):[],[h,X,F]),te=Math.max(1,Math.ceil((ye.length??0)/ij)),Ne=f.useMemo(()=>{if(!Array.isArray(ye))return[];const we=(Z-1)*ij;return ye.slice(we,we+ij)},[ye,Z]);f.useEffect(()=>{me(1)},[C,z]);const Ce=async()=>{try{se(!0);const we={};C&&(we.project_id=C),z&&(we.week=z),X&&(we.from_date=X),F&&(we.to_date=F);const Ee=await Yd.exportAwareness(we),Be=new Blob([Ee.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),be=window.URL.createObjectURL(Be),$e=document.createElement("a");$e.href=be,$e.download="awareness_sessions.xlsx",$e.click(),window.URL.revokeObjectURL(be)}catch(we){console.error("Error exporting awareness sessions:",we),K.error(e("errors.somethingWentWrong")??e("common.exportFailed"))}finally{se(!1)}},Ue=we=>{if(we.preventDefault(),!j||!w||!R||!Q||R==="Other"&&!q.trim())return;const{week:Ee,year:Be}=lk(w),be={project_id:j,date:w,week_number:Ee,week_year:Be,by_name:N,theme:R==="Other"?q:R,duration_minutes:I,participants:Q,session_hours:ee};Hu.create(be).then(()=>{K.success(e("awareness.created")??"Session saved"),k(""),M(""),O(""),S(""),E(15),B(""),U()}).catch($e=>{console.error("Failed to create awareness session",$e);const Ve=$e.response?.data?.message??e("errors.somethingWentWrong")??"Failed to save session";K.error(Ve)})},fe=we=>{T(we)},Te=async()=>{if(he?.id)try{await Hu.delete(he.id),K.success(e("common.saved")??"Saved"),U()}catch(we){console.error("Failed to delete awareness session",we),K.error(e("errors.failedToDelete")??e("common.error")??"Error")}finally{T(null)}};return r.jsxs("div",{className:"max-w-5xl mx-auto space-y-6 animate-fade-in",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:[e("nav.dashboard")," / ",e("awareness.navLabel")]}),l&&r.jsx(nt,{isOpen:l,onClose:()=>c(!1),title:"Massive Add",size:"xl",children:r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[r.jsxs("button",{type:"button",onClick:je,className:"btn-secondary flex items-center justify-center gap-2",children:[r.jsx(Tr,{className:"w-4 h-4"}),r.jsx("span",{children:e("common.downloadTemplate")??"Download template"})]}),r.jsxs("label",{className:"flex items-center justify-between border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-xs cursor-pointer hover:border-hse-primary hover:bg-hse-primary/5",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx($a,{className:"w-4 h-4 text-gray-500"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:d?d.name:e("common.chooseFile")??"Choose Excel file"})]}),r.jsx("input",{type:"file",accept:".xlsx,.xls",className:"hidden",onChange:we=>u(we.target.files?.[0]??null)})]}),r.jsx("button",{type:"button",onClick:re,disabled:m||!d,className:"btn-primary",children:m?e("common.loading")??"Importing...":e("common.import")??"Import"})]})})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e("awareness.pageTitle")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:e("awareness.pageSubtitle")})]}),r.jsxs("div",{className:"card",children:[r.jsxs("button",{type:"button",onClick:we=>{if(we?.ctrlKey){ce();return}ue(!ae)},className:"w-full p-4 flex items-center justify-between text-left hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors rounded-xl",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-hse-primary/10 rounded-lg flex items-center justify-center",children:r.jsx(Pn,{className:"w-5 h-5 text-hse-primary"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:e("awareness.addSession")}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("awareness.clickToExpand")})]})]}),ae?r.jsx(ld,{className:"w-5 h-5 text-gray-400"}):r.jsx(Vr,{className:"w-5 h-5 text-gray-400"})]}),ae&&r.jsxs("form",{onSubmit:Ue,className:"p-6 pt-2 space-y-6 border-t border-gray-100 dark:border-gray-700",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("awareness.project")}),r.jsxs(Ze,{value:j,onChange:we=>_(we.target.value),disabled:n||a.length===1,required:!0,children:[r.jsx("option",{value:"",children:e(n?"common.loading":"awareness.selectProject")}),x.map(we=>r.jsx("option",{value:we.id,children:Wt(we)},we.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("awareness.date")}),r.jsx(ot,{value:w,onChange:k,required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("awareness.by")}),r.jsx("input",{type:"text",className:"input bg-gray-50 dark:bg-gray-800",value:N,readOnly:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"label",children:e("awareness.theme")}),r.jsxs("div",{className:"relative",children:[r.jsx(Yr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",className:"input pl-9",placeholder:e("awareness.searchTheme"),value:A,onChange:we=>M(we.target.value)}),A&&r.jsx("button",{type:"button",onClick:()=>M(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r.jsx(qt,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"max-h-48 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-lg divide-y divide-gray-100 dark:divide-gray-700 bg-white dark:bg-gray-800",children:[J.map((we,Ee)=>r.jsxs("button",{type:"button",onClick:()=>O(we),className:`w-full text-left px-3 py-2.5 text-sm flex items-center justify-between gap-2 transition-colors ${R===we?"bg-hse-primary/10 text-hse-primary font-medium border-l-4 border-hse-primary":"text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/50 border-l-4 border-transparent"}`,children:[r.jsx("span",{children:we}),R===we&&r.jsx(fn,{className:"w-4 h-4 text-hse-primary flex-shrink-0"})]},Ee)),r.jsxs("button",{type:"button",onClick:()=>O("Other"),className:`w-full text-left px-3 py-2.5 text-sm flex items-center justify-between gap-2 transition-colors ${R==="Other"?"bg-hse-primary/10 text-hse-primary font-medium border-l-4 border-hse-primary":"text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700/50 border-l-4 border-transparent"}`,children:[r.jsx("span",{className:"font-medium",children:e("awareness.other")}),R==="Other"&&r.jsx(fn,{className:"w-4 h-4 text-hse-primary flex-shrink-0"})]})]}),R==="Other"&&r.jsxs("div",{className:"pt-2",children:[r.jsx("label",{className:"label text-sm",children:e("awareness.otherTheme")}),r.jsx("input",{type:"text",placeholder:e("awareness.otherTheme"),className:"input",value:q,onChange:we=>S(we.target.value),required:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("awareness.duration")}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"range",min:"15",max:"60",step:"15",value:I,onChange:we=>E(parseInt(we.target.value,10)),className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-hse-primary"}),r.jsx("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:vwe.map(we=>r.jsxs("span",{className:`${I===we?"text-hse-primary font-semibold":""}`,children:[we," min"]},we))}),r.jsx("div",{className:"text-center",children:r.jsxs("span",{className:"inline-block px-4 py-1 bg-hse-primary/10 text-hse-primary rounded-full text-sm font-medium",children:[I," ",e("awareness.minutes")]})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("awareness.participants")}),r.jsx("input",{type:"number",min:"1",className:"input",value:W,onChange:we=>B(we.target.value),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("awareness.sessionHours")}),r.jsxs("div",{className:"input bg-gray-50 dark:bg-gray-800 flex items-center justify-between",children:[r.jsx("span",{className:"font-semibold text-hse-primary",children:Number.isFinite(ee)?ee.toFixed(2):0}),r.jsx("span",{className:"text-xs text-gray-400 ml-2",children:e("awareness.hoursUnit")})]})]})]}),r.jsx("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:r.jsx("button",{type:"submit",className:"btn-primary",disabled:!j||!w||!Q||!R||R==="Other"&&!q,children:e("awareness.submit")})})]})]}),r.jsxs("div",{className:"card p-6 space-y-4",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[r.jsx(ki,{className:"w-4 h-4 text-hse-primary"}),e("awareness.listTitle")]}),r.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap md:flex-nowrap items-stretch sm:items-center gap-3",children:[r.jsxs(Ze,{value:C,onChange:we=>D(we.target.value),className:"h-10 text-sm w-full sm:min-w-[180px]",children:[r.jsx("option",{value:"",children:e("awareness.allProjects")}),x.map(we=>r.jsx("option",{value:we.id,children:Wt(we)},we.id))]}),r.jsx("div",{className:"w-full sm:w-[170px]",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"flex-1",children:r.jsx(Ml,{value:z?`${i}-W${String(z).padStart(2,"0")}`:"",onChange:we=>{const Ee=o(we);Ee&&(L(Ee.week),me(1))},placeholder:e("awareness.allWeeks"),className:"w-full h-10"})}),r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>L(""),disabled:!z,"aria-label":e("awareness.allWeeks"),title:e("awareness.allWeeks"),children:r.jsx(qt,{className:"w-4 h-4"})})]})}),r.jsx(ot,{value:X,onChange:we=>{H(we),me(1)},placeholder:"From date",className:"w-full sm:w-40 h-10"}),r.jsx(ot,{value:F,onChange:we=>{ke(we),me(1)},placeholder:"To date",className:"w-full sm:w-40 h-10"}),r.jsxs("button",{type:"button",onClick:Ce,disabled:ge||h.length===0,className:"btn-secondary flex items-center justify-center gap-2 text-sm w-full sm:w-auto",children:[r.jsx(Tr,{className:"w-4 h-4"}),r.jsx("span",{children:e("dashboard.exportExcel")})]})]})]}),b?r.jsxs("div",{className:"space-y-3 py-4",children:[r.jsx("div",{className:"hidden md:block space-y-2 animate-pulse",children:Array.from({length:4},(we,Ee)=>r.jsx("div",{className:"h-10 rounded-md bg-gray-100 dark:bg-gray-800"},Ee))}),r.jsx("div",{className:"md:hidden space-y-3 animate-pulse",children:Array.from({length:3},(we,Ee)=>r.jsx("div",{className:"h-24 rounded-lg bg-gray-100 dark:bg-gray-800"},Ee))})]}):h.length===0?r.jsxs("div",{className:"py-12 text-center",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-hse-primary/10 mb-3",children:r.jsx(ki,{className:"w-5 h-5 text-hse-primary"})}),r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e("awareness.noSessions")})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"space-y-3 md:hidden",children:Ne.map(we=>r.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3 bg-white dark:bg-gray-800",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:we.project?.name??""}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:we.date?we.date.substring(0,10):""}),r.jsx("p",{className:"mt-1 text-xs text-gray-600 dark:text-gray-300",children:we.by_name??""})]}),r.jsxs("div",{className:"text-right text-xs text-gray-600 dark:text-gray-300 space-y-1",children:[r.jsx("p",{className:"font-medium truncate max-w-[140px]",children:we.theme}),r.jsxs("p",{children:[we.duration_minutes," min"]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{type:"button",onClick:()=>fe(we),className:"p-1.5 rounded-md hover:bg-red-50 dark:hover:bg-red-900/30",title:e("common.delete")??"Delete",children:r.jsx(Nt,{className:"w-4 h-4 text-red-600"})})})]})]}),r.jsxs("div",{className:"mt-3 flex items-center justify-between text-[11px] text-gray-600 dark:text-gray-300",children:[r.jsxs("span",{className:"px-1.5 py-0.5 rounded-full bg-gray-50 dark:bg-gray-900",children:[e("awareness.participants"),": ",we.participants]}),r.jsxs("span",{className:"px-1.5 py-0.5 rounded-full bg-hse-primary/10 text-hse-primary",children:[e("awareness.sessionHours"),": ",we.session_hours]})]})]},we.id))}),r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 text-left",children:[r.jsx("th",{className:"py-2 pr-4 font-medium text-gray-500 dark:text-gray-400",children:e("awareness.colDate")}),r.jsx("th",{className:"py-2 pr-4 font-medium text-gray-500 dark:text-gray-400",children:e("awareness.colProject")}),r.jsx("th",{className:"py-2 pr-4 font-medium text-gray-500 dark:text-gray-400",children:e("awareness.colBy")}),r.jsx("th",{className:"py-2 pr-4 font-medium text-gray-500 dark:text-gray-400",children:e("awareness.colTheme")}),r.jsx("th",{className:"py-2 pr-4 font-medium text-gray-500 dark:text-gray-400",children:e("awareness.colDuration")}),r.jsx("th",{className:"py-2 pr-4 font-medium text-gray-500 dark:text-gray-400",children:e("awareness.colParticipants")}),r.jsx("th",{className:"py-2 pr-4 font-medium text-gray-500 dark:text-gray-400",children:e("awareness.colHours")}),r.jsx("th",{className:"py-2 pr-4 font-medium text-gray-500 dark:text-gray-400",children:e("common.actions")??"Actions"})]})}),r.jsx("tbody",{children:Ne.map(we=>r.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[r.jsx("td",{className:"py-2 pr-4 text-gray-900 dark:text-gray-100 text-xs",children:we.date?we.date.substring(0,10):""}),r.jsx("td",{className:"py-2 pr-4 text-gray-900 dark:text-gray-100",children:we.project?.name??""}),r.jsx("td",{className:"py-2 pr-4 text-gray-700 dark:text-gray-200",children:we.by_name??""}),r.jsx("td",{className:"py-2 pr-4 text-gray-700 dark:text-gray-200 max-w-xs truncate",children:we.theme}),r.jsxs("td",{className:"py-2 pr-4 text-gray-700 dark:text-gray-200",children:[we.duration_minutes," min"]}),r.jsx("td",{className:"py-2 pr-4 text-gray-700 dark:text-gray-200",children:we.participants}),r.jsx("td",{className:"py-2 pr-4 text-gray-700 dark:text-gray-200",children:we.session_hours}),r.jsx("td",{className:"py-2 pr-4 text-gray-700 dark:text-gray-200",children:r.jsx("button",{type:"button",onClick:()=>fe(we),className:"p-1.5 rounded-md hover:bg-red-50 dark:hover:bg-red-900/30",title:e("common.delete")??"Delete",children:r.jsx(Nt,{className:"w-4 h-4 text-red-600"})})})]},we.id))})]})})]}),!b&&h.length>0&&te>1&&r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100 dark:border-gray-800",children:[r.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e("common.page")," ",Z," ",e("common.of")," ",te]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:()=>me(we=>Math.max(1,we-1)),disabled:Z===1,className:"btn-secondary text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:e("common.previous")??"Previous"}),r.jsx("button",{type:"button",onClick:()=>me(we=>Math.min(te,we+1)),disabled:Z===te,className:"btn-secondary text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:e("common.next")??"Next"})]})]})]}),r.jsx(la,{isOpen:!!he,title:e("common.delete")??"Delete",message:e("common.confirmDelete")??"Are you sure you want to delete this record?",confirmLabel:e("common.delete")??"Delete",cancelLabel:e("common.cancel")??"Cancel",onConfirm:Te,onCancel:()=>T(null)})]})}const jwe=Object.freeze(Object.defineProperty({__proto__:null,default:bwe},Symbol.toStringTag,{value:"Module"})),GE=[{key:"type_cold",labelKey:"cold",alwaysChecked:!0},{key:"type_work_at_height",labelKey:"workAtHeight"},{key:"type_hot_work",labelKey:"hotWork"},{key:"type_confined_spaces",labelKey:"confinedSpaces"},{key:"type_electrical_isolation",labelKey:"electricalIsolation"},{key:"type_energized_work",labelKey:"energizedWork"},{key:"type_excavation",labelKey:"excavation"},{key:"type_mechanical_isolation",labelKey:"mechanicalIsolation"},{key:"type_7inch_grinder",labelKey:"grinder7inch"}],YE=e=>{if(!e)return"-";const t=e.substring(0,10),[a,n,s]=t.split("-");return`${s}-${n}-${a}`};function wwe(){const{t:e}=ut(),{user:t}=At(),[a,n]=f.useState([]),[s,i]=f.useState(null),[o,l]=f.useState(null),[c,d]=f.useState(null),[u,m]=f.useState(null),[p,g]=f.useState([]),[x,h]=f.useState([]),[v,b]=f.useState(!0),[y,j]=f.useState(!1),[_,w]=f.useState(!1),[k,N]=f.useState(null),[P,A]=f.useState(ue()),[M,R]=f.useState(!1),[O,q]=f.useState([]),[S,I]=f.useState(!1),[E,W]=f.useState(!1),[B,C]=f.useState(null),D=t?.project_list_preference??"code",z=f.useMemo(()=>Ir(a,D),[a,D]),[L,X]=f.useState(!1),[H,F]=f.useState(""),[ke,ae]=f.useState("");function ue(){return{type_cold:!0,type_work_at_height:!1,type_hot_work:!1,type_confined_spaces:!1,type_electrical_isolation:!1,type_energized_work:!1,type_excavation:!1,type_mechanical_isolation:!1,type_7inch_grinder:!1,description:"",area:"",permit_user:"",signed_by:"",authorizer:"",commence_date:"",end_date:"",enterprise:""}}f.useEffect(()=>{Z(),me()},[]),f.useEffect(()=>{const te=Ne=>{Ne.key==="Escape"&&_&&w(!1)};if(_)return document.addEventListener("keydown",te),()=>document.removeEventListener("keydown",te)},[_]),f.useEffect(()=>{s&&o&&c&&ge()},[s,o,c]);const Z=async()=>{try{const te=await it.getAllList({status:"active"});n(te),te.length===1&&i(te[0])}catch{K.error(e("workPermits.loadProjectsFailed"))}finally{b(!1)}},me=async()=>{try{const Ne=(await Wi.getWeekInfo()).data.data;l(Ne.current_week),d(Ne.current_year),m(Ne)}catch(te){console.error("Failed to get week info:",te)}},ge=async()=>{if(s){j(!0);try{const Ne=(await Wi.getWeekPermits({project_id:s.id,week_number:o,year:c})).data.data;g(Ne.current_week.permits??[]),h(Ne.previous_week.permits??[]),m({...u,current:Ne.current_week,previous:Ne.previous_week})}catch{K.error(e("workPermits.loadPermitsFailed"))}finally{j(!1)}}},se=te=>{let Ne=o+te,Ce=c;Ne>52?(Ne=1,Ce++):Ne<1&&(Ne=52,Ce--),l(Ne),d(Ce)},he=(te=null)=>{if(te)N(te),A({type_cold:te.type_cold,type_work_at_height:te.type_work_at_height,type_hot_work:te.type_hot_work,type_confined_spaces:te.type_confined_spaces,type_electrical_isolation:te.type_electrical_isolation,type_energized_work:te.type_energized_work,type_excavation:te.type_excavation,type_mechanical_isolation:te.type_mechanical_isolation,type_7inch_grinder:te.type_7inch_grinder,description:te.description??"",area:te.area??"",permit_user:te.permit_user,signed_by:te.signed_by??"",authorizer:te.authorizer??"",commence_date:te.commence_date,end_date:te.end_date,enterprise:te.enterprise??""});else{N(null);const Ne=u?.current??{};A({...ue(),commence_date:Ne.start_date??"",end_date:Ne.end_date??""})}w(!0)},T=async te=>{if(te.preventDefault(),!!s){R(!0);try{k?(await Wi.update(k.id,P),K.success(e("workPermits.updated"))):(await Wi.create({...P,project_id:s.id,week_number:o,year:c}),K.success(e("workPermits.created"))),w(!1),ge()}catch(Ne){K.error(Ne.response?.data?.message||e("errors.failedToSave"))}finally{R(!1)}}},oe=te=>{C(te)},G=async()=>{if(B)try{await Wi.delete(B.id),K.success(e("workPermits.deleted")),ge()}catch{K.error(e("workPermits.deleteFailed"))}finally{C(null)}},V=async()=>{X(!0)},Y=async()=>{if(!s||!o||!c){X(!1);return}try{const te=await Wi.launchWeek({project_id:s.id,week_number:o,year:c});K.success(e("workPermits.weekLaunched",{count:te.data.data.activated_count})),ge()}catch{K.error(e("workPermits.launchFailed"))}finally{X(!1)}},ce=async()=>{if(O.length!==0){I(!0);try{const te=await Wi.copyFromPrevious({project_id:s.id,week_number:o,year:c,permit_ids:O});K.success(e("workPermits.copied",{count:te.data.data.copied_count})),q([]),ge()}catch{K.error(e("workPermits.copyFailed"))}finally{I(!1)}}},je=async()=>{if(!(!s||!o||!c)){W(!0);try{const te=await Wi.export({project_id:s.id,week_number:o,year:c}),Ne=window.URL.createObjectURL(new Blob([te.data])),Ce=document.createElement("a");Ce.href=Ne;const Ue="S"+String(o).padStart(2,"0");Ce.setAttribute("download",`Permis_${s.code}_${Ue}_${c}.xlsx`),document.body.appendChild(Ce),Ce.click(),Ce.remove(),window.URL.revokeObjectURL(Ne),K.success(e("workPermits.exported"))}catch(te){console.error("Export error:",te),K.error(e("workPermits.exportError"))}finally{W(!1)}}},re=te=>{q(Ne=>Ne.includes(te)?Ne.filter(Ce=>Ce!==te):[...Ne,te])},U=te=>({draft:"badge-warning",active:"badge-success",closed:"badge-info",cancelled:"badge-danger"})[te]||"badge-info",xe=te=>GE.filter(Ne=>te[Ne.key]).map(Ne=>e(`workPermits.types.${Ne.labelKey}`)),J=(te,Ne)=>{if(!Ne.trim())return te;const Ce=Ne.toLowerCase();return te.filter(Ue=>Ue.permit_number?.toLowerCase().includes(Ce)||Ue.permit_user?.toLowerCase().includes(Ce)||Ue.area?.toLowerCase().includes(Ce)||Ue.enterprise?.toLowerCase().includes(Ce)||Ue.description?.toLowerCase().includes(Ce))},Q=J(x,H),ne=J(p,ke),ee=()=>{O.length===Q.length?q([]):q(Q.map(te=>te.id))},ye=Q.length>0&&O.length===Q.length;return v?r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx(Re,{className:"w-8 h-8 animate-spin text-hse-primary"})}):r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:r.jsxs("div",{children:[r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:[e("nav.dashboard")," / ",e("workPermits.title")]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e("workPermits.pageTitle")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:e("workPermits.pageSubtitle")})]})}),r.jsx("div",{className:"card p-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("workPermits.project")}),r.jsxs(Ze,{value:s?.id??"",onChange:te=>{const Ne=a.find(Ce=>Ce.id===parseInt(te.target.value));i(Ne)},children:[r.jsx("option",{value:"",children:e("workPermits.selectProject")}),z.map(te=>r.jsx("option",{value:te.id,children:Wt(te)},te.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("workPermits.week")}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>se(-1),className:"btn-outline p-2",children:r.jsx(Do,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex-1 text-center font-semibold text-lg",children:["S",String(o).padStart(2,"0")," - ",c]}),r.jsx("button",{onClick:()=>se(1),className:"btn-outline p-2",children:r.jsx(Io,{className:"w-5 h-5"})})]}),u?.current&&r.jsxs("p",{className:"text-xs text-center text-gray-500 mt-1",children:[u.current.start_date,"  ",u.current.end_date]})]}),r.jsxs("div",{className:"flex flex-wrap items-end gap-2 md:col-span-2 lg:col-span-1",children:[r.jsxs("button",{onClick:()=>he(),disabled:!s,className:"btn-primary flex items-center gap-2 whitespace-nowrap",children:[r.jsx(Pn,{className:"w-4 h-4"}),e("workPermits.newPermit")]}),r.jsxs("button",{onClick:V,disabled:!s||p.length===0,className:"btn-success flex items-center gap-2 whitespace-nowrap",children:[r.jsx(Lz,{className:"w-4 h-4"}),e("workPermits.launchWeek")]}),r.jsxs("button",{onClick:je,disabled:!s||p.length===0||E,className:"btn-secondary flex items-center gap-2 whitespace-nowrap",children:[E?r.jsx(Re,{className:"w-4 h-4 animate-spin"}):r.jsx(jr,{className:"w-4 h-4"}),e("workPermits.exportExcel")]})]})]})}),s?r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"card-header pb-2",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 text-sm",children:[e("workPermits.previousWeekPermits"),u?.previous&&r.jsxs("span",{className:"text-xs font-normal text-gray-500 ml-1",children:["(",u.previous.week_label,")"]})]}),O.length>0&&r.jsxs("button",{onClick:ce,disabled:S,className:"btn-primary btn-xs flex items-center gap-1",children:[S?r.jsx(Re,{className:"w-3 h-3 animate-spin"}):r.jsx(gz,{className:"w-3 h-3"}),e("workPermits.copySelected")," (",O.length,")"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx("input",{type:"text",value:H,onChange:te=>F(te.target.value),placeholder:e("common.search"),className:"input input-sm pl-8 h-8 text-xs"}),r.jsx(Yr,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-400"})]}),r.jsxs("button",{onClick:ee,disabled:Q.length===0,className:`btn-xs flex items-center gap-1 ${ye?"btn-primary":"btn-outline"}`,children:[r.jsx(fn,{className:"w-3 h-3"}),e(ye?"common.none":"common.all")]})]})]}),r.jsx("div",{className:"card-body max-h-[600px] overflow-y-auto pt-2",children:y?r.jsx("div",{className:"flex justify-center py-4",children:r.jsx(Re,{className:"w-5 h-5 animate-spin text-hse-primary"})}):Q.length>0?r.jsx("div",{className:"space-y-2",children:Q.map(te=>r.jsx("div",{onClick:()=>re(te.id),className:`p-2 rounded border cursor-pointer transition-colors ${O.includes(te.id)?"border-hse-primary bg-hse-primary/5":"border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("div",{className:`w-4 h-4 mt-0.5 rounded border flex-shrink-0 flex items-center justify-center ${O.includes(te.id)?"bg-hse-primary border-hse-primary":"border-gray-300 dark:border-gray-600"}`,children:O.includes(te.id)&&r.jsx(fn,{className:"w-2.5 h-2.5 text-white"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[r.jsx("span",{className:"font-mono text-xs font-semibold",children:te.permit_number}),r.jsx("span",{className:`badge badge-xs ${U(te.status)}`,children:e(`workPermits.status.${te.status}`)})]}),te.description&&r.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 mt-1",children:te.description}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 gap-y-0.5 mt-1 text-xs text-gray-500 dark:text-gray-400",children:[r.jsx("span",{children:te.permit_user}),te.area&&r.jsxs("span",{className:"text-gray-400",children:[" ",te.area]}),te.enterprise&&r.jsxs("span",{className:"text-gray-400",children:[" ",te.enterprise]})]}),r.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:xe(te).map((Ne,Ce)=>r.jsx("span",{className:"text-[10px] bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-1.5 py-0.5 rounded",children:Ne},Ce))})]})]})},te.id))}):r.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:r.jsx("p",{children:e("workPermits.noPermits")})})})]}),r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"card-header pb-2",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 text-sm",children:[e("workPermits.currentWeekPermits"),u?.current&&r.jsxs("span",{className:"text-xs font-normal text-gray-500 ml-1",children:["(",u.current.week_label,")"]})]}),r.jsx("span",{className:"badge badge-info badge-xs",children:ne.length})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",value:ke,onChange:te=>ae(te.target.value),placeholder:e("common.search"),className:"input input-sm pl-8 h-8 text-xs w-full"}),r.jsx(Yr,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-400"})]})]}),r.jsx("div",{className:"card-body max-h-[600px] overflow-y-auto pt-2",children:y?r.jsx("div",{className:"flex justify-center py-4",children:r.jsx(Re,{className:"w-5 h-5 animate-spin text-hse-primary"})}):ne.length>0?r.jsx("div",{className:"space-y-2",children:ne.map(te=>r.jsx("div",{className:"p-2 rounded border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[r.jsx("span",{className:"font-mono text-xs font-semibold",children:te.permit_number}),r.jsx("span",{className:`badge badge-xs ${U(te.status)}`,children:e(`workPermits.status.${te.status}`)})]}),te.description&&r.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 mt-1",children:te.description}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-0.5 mt-1 text-xs text-gray-500 dark:text-gray-400",children:[r.jsxs("span",{className:"flex items-center gap-0.5",children:[r.jsx(Zd,{className:"w-3 h-3"}),te.permit_user]}),te.signed_by&&r.jsxs("span",{className:"flex items-center gap-0.5",children:[r.jsx(S5,{className:"w-3 h-3"}),te.signed_by]}),te.authorizer&&r.jsxs("span",{className:"flex items-center gap-0.5",children:[r.jsx(Ni,{className:"w-3 h-3"}),te.authorizer]}),te.area&&r.jsxs("span",{className:"flex items-center gap-0.5",children:[r.jsx(bo,{className:"w-3 h-3"}),te.area]}),te.enterprise&&r.jsxs("span",{className:"flex items-center gap-0.5",children:[r.jsx(Mo,{className:"w-3 h-3"}),te.enterprise]}),r.jsxs("span",{className:"flex items-center gap-0.5",children:[r.jsx(Na,{className:"w-3 h-3"}),YE(te.commence_date),"  ",YE(te.end_date)]})]}),r.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:xe(te).map((Ne,Ce)=>r.jsx("span",{className:"text-[10px] bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 px-1.5 py-0.5 rounded",children:Ne},Ce))})]}),r.jsxs("div",{className:"flex items-center gap-0.5 flex-shrink-0",children:[r.jsx("button",{onClick:()=>he(te),className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",title:e("workPermits.editPermit"),children:r.jsx(Lo,{className:"w-3.5 h-3.5 text-gray-500"})}),r.jsx("button",{onClick:()=>oe(te),className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:e("workPermits.deletePermit"),children:r.jsx(Nt,{className:"w-3.5 h-3.5 text-red-500"})})]})]})},te.id))}):r.jsxs("div",{className:"text-center py-4 text-gray-500 text-sm",children:[r.jsx("p",{children:e("workPermits.noPermits")}),r.jsxs("button",{onClick:()=>he(),className:"btn-primary btn-sm mt-2",children:[r.jsx(Pn,{className:"w-3 h-3 mr-1"}),e("workPermits.newPermit")]})]})})]})]}):r.jsxs("div",{className:"card p-12 text-center",children:[r.jsx(w5,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:e("workPermits.selectProject")})]}),r.jsx(nt,{isOpen:_,onClose:()=>w(!1),title:e(k?"workPermits.editPermit":"workPermits.newPermit"),size:"lg",children:r.jsxs("form",{onSubmit:T,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("workPermits.permitTypes")}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:GE.map(te=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:te.key,checked:P[te.key],onChange:Ne=>A({...P,[te.key]:Ne.target.checked}),disabled:te.alwaysChecked,className:"w-4 h-4 text-hse-primary rounded"}),r.jsx("label",{htmlFor:te.key,className:"text-sm",children:e(`workPermits.types.${te.labelKey}`)})]},te.key))})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[e("workPermits.permitUser")," *"]}),r.jsx("input",{type:"text",value:P.permit_user,onChange:te=>A({...P,permit_user:te.target.value}),placeholder:e("workPermits.permitUserPlaceholder"),className:"input",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("workPermits.signedBy")}),r.jsx("input",{type:"text",value:P.signed_by,onChange:te=>A({...P,signed_by:te.target.value}),placeholder:e("workPermits.signedByPlaceholder"),className:"input"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("workPermits.authorizer")}),r.jsx("input",{type:"text",value:P.authorizer,onChange:te=>A({...P,authorizer:te.target.value}),placeholder:e("workPermits.authorizerPlaceholder"),className:"input"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("workPermits.enterprise")}),r.jsx("input",{type:"text",value:P.enterprise,onChange:te=>A({...P,enterprise:te.target.value}),placeholder:e("workPermits.enterprisePlaceholder"),className:"input"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("workPermits.area")}),r.jsx("input",{type:"text",value:P.area,onChange:te=>A({...P,area:te.target.value}),placeholder:e("workPermits.areaPlaceholder"),className:"input"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[e("workPermits.commenceDate")," *"]}),r.jsx(ot,{value:P.commence_date,onChange:te=>A({...P,commence_date:te}),required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[e("workPermits.endDate")," *"]}),r.jsx(ot,{value:P.end_date,onChange:te=>A({...P,end_date:te}),required:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("workPermits.description")}),r.jsx("textarea",{value:P.description,onChange:te=>A({...P,description:te.target.value}),placeholder:e("workPermits.descriptionPlaceholder"),rows:3,className:"input"})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("button",{type:"button",onClick:()=>w(!1),className:"btn-outline",children:e("common.cancel")}),r.jsxs("button",{type:"submit",disabled:M,className:"btn-primary flex items-center gap-2",children:[M?r.jsx(Re,{className:"w-4 h-4 animate-spin"}):r.jsx(fn,{className:"w-4 h-4"}),e(k?"common.update":"common.save")]})]})]})}),r.jsx(la,{isOpen:!!B,title:e("common.confirm"),message:e("workPermits.confirmDelete"),confirmLabel:e("common.delete"),cancelLabel:e("common.cancel"),variant:"danger",onConfirm:G,onCancel:()=>C(null)}),r.jsx(la,{isOpen:L,title:e("common.confirm"),message:e("workPermits.launchConfirm"),confirmLabel:e("workPermits.launchWeek"),cancelLabel:e("common.cancel"),variant:"primary",onConfirm:Y,onCancel:()=>X(!1)})]})}const _we=Object.freeze(Object.defineProperty({__proto__:null,default:wwe},Symbol.toStringTag,{value:"Module"})),ZE=[{value:"sst",labelKey:"sst"},{value:"environment",labelKey:"environment"},{value:"third_party",labelKey:"thirdParty"},{value:"equipment",labelKey:"equipment"},{value:"other",labelKey:"other"}],XE=e=>{if(!e)return"-";const t=e.substring(0,10),[a,n,s]=t.split("-");return`${s}/${n}/${a}`};function kwe(){const{t:e}=ut(),{user:t}=At(),[a,n]=f.useState([]),[s,i]=f.useState([]),[o,l]=f.useState(!0),[c,d]=f.useState(!1),[u,m]=f.useState([]),[p,g]=f.useState(null),[x,h]=f.useState(""),[v,b]=f.useState(""),[y,j]=f.useState(""),[_,w]=f.useState(!1),[k,N]=f.useState(null),[P,A]=f.useState(E()),[M,R]=f.useState(!1),[O,q]=f.useState(null),S=t?.project_list_preference??"code",I=f.useMemo(()=>Ir(a,S),[a,S]);function E(){return{project_id:"",inspection_date:new Date().toISOString().split("T")[0],nature:"sst",nature_other:"",type:"internal",location:"",start_date:new Date().toISOString().split("T")[0],end_date:"",zone:"",inspector:t?.name??"",enterprise:"",status:"open",notes:""}}f.useEffect(()=>{W()},[]),f.useEffect(()=>{const Z=me=>{me.key==="Escape"&&_&&z()};if(_)return document.addEventListener("keydown",Z),()=>document.removeEventListener("keydown",Z)},[_]),f.useEffect(()=>{B(),p&&C(p.id)},[p,x,v]);const W=async()=>{try{const me=(await it.getAll({per_page:100})).data.data??[];n(me)}catch(Z){console.error("Error fetching projects:",Z)}finally{l(!1)}},B=async()=>{l(!0);try{const Z={per_page:100};p&&(Z.project_id=p.id),x&&(Z.status=x),v&&(Z.nature=v);const ge=(await uh.getAll(Z)).data,se=ge.data??ge,he=Array.isArray(se)?se:se?.data??[];i(he)}catch(Z){console.error("Error fetching inspections:",Z)}finally{l(!1)}},C=async Z=>{try{const me=await it.getZones(Z);m(me.data?.data?.zones??[])}catch(me){console.error("Error fetching zones:",me),m([])}},D=(Z=null)=>{Z?(N(Z),A({project_id:Z.project_id.toString(),inspection_date:Z.inspection_date,nature:Z.nature,nature_other:Z.nature_other??"",type:Z.type,location:Z.location??"",start_date:Z.start_date,end_date:Z.end_date??"",zone:Z.zone??"",inspector:Z.inspector,enterprise:Z.enterprise??"",status:Z.status,notes:Z.notes??""}),C(Z.project_id)):(N(null),A({...E(),project_id:p?.id?.toString()??"",inspector:t?.name??""})),w(!0)},z=()=>{w(!1),N(null),A(E())},L=async Z=>{Z.preventDefault(),R(!0);try{const me={...P,project_id:parseInt(P.project_id)};k?(await uh.update(k.id,me),K.success(e("inspections.updated"))):(await uh.create(me),K.success(e("inspections.created"))),z(),B()}catch(me){console.error("Error saving inspection:",me),K.error(e("errors.somethingWentWrong"))}finally{R(!1)}},X=Z=>{q(Z)},H=async()=>{if(O)try{await uh.delete(O.id),K.success(e("inspections.deleted")),B()}catch{K.error(e("errors.somethingWentWrong"))}finally{q(null)}},F=Z=>{if(!Z){g(null),m([]),A(ge=>({...ge,project_id:"",zone:""}));return}const me=a.find(ge=>ge.id===parseInt(Z));g(me??null),A(ge=>({...ge,project_id:Z,zone:""})),me?C(me.id):m([])},ke=s.filter(Z=>{if(!y)return!0;const me=y.toLowerCase();return Z.inspector?.toLowerCase().includes(me)||Z.location?.toLowerCase().includes(me)||Z.zone?.toLowerCase().includes(me)||Z.enterprise?.toLowerCase().includes(me)||Z.notes?.toLowerCase().includes(me)}),ae=(Z,me)=>Z==="other"&&me?me:e(`inspections.natures.${Z}`),ue=async()=>{if(!p){K.error(e("inspections.selectProjectFirst"));return}try{d(!0);const Z={project_id:p.id};x&&(Z.status=x),v&&(Z.nature=v);const me=await Yd.exportInspections(Z),ge=new Blob([me.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),se=window.URL.createObjectURL(ge),he=document.createElement("a");he.href=se;const T=p.code||p.id;he.download=`inspections_${T}.xlsx`,he.click(),window.URL.revokeObjectURL(se)}catch(Z){console.error("Error exporting inspections:",Z),K.error(e("errors.somethingWentWrong"))}finally{d(!1)}};return o&&s.length===0?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Re,{className:"w-8 h-8 animate-spin text-hse-primary"})}):r.jsxs("div",{className:"space-y-6 p-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/50 rounded-xl flex items-center justify-center",children:r.jsx(Ra,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:[e("nav.dashboard")," / ",e("inspections.title")]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e("inspections.pageTitle")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:e("inspections.pageSubtitle")})]})]}),r.jsx("div",{className:"card p-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("inspections.project")}),r.jsxs(Ze,{value:p?.id??"",onChange:Z=>F(Z.target.value),children:[r.jsx("option",{value:"",children:e("common.allProjects")}),I.map(Z=>r.jsx("option",{value:Z.id,children:Wt(Z)},Z.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("inspections.status")}),r.jsxs(Ze,{value:x,onChange:Z=>h(Z.target.value),children:[r.jsx("option",{value:"",children:e("common.all")}),r.jsx("option",{value:"open",children:e("inspections.statusOpen")}),r.jsx("option",{value:"closed",children:e("inspections.statusClosed")})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("inspections.nature")}),r.jsxs(Ze,{value:v,onChange:Z=>b(Z.target.value),children:[r.jsx("option",{value:"",children:e("common.all")}),ZE.map(Z=>r.jsx("option",{value:Z.value,children:e(`inspections.natures.${Z.labelKey}`)},Z.value))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("common.search")}),r.jsxs("div",{className:"relative",children:[r.jsx(Yr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",value:y,onChange:Z=>j(Z.target.value),placeholder:e("inspections.searchPlaceholder"),className:"input pl-10"})]})]}),r.jsx("div",{className:"flex items-end",children:r.jsxs("button",{onClick:()=>D(),disabled:!p,className:"btn-primary flex items-center gap-2 w-full justify-center",children:[r.jsx(Pn,{className:"w-4 h-4"}),e("inspections.newInspection")]})})]})}),r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"card-header flex items-center justify-between",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:[e("inspections.listTitle")," (",ke.length,")"]}),r.jsxs("button",{type:"button",onClick:ue,disabled:!p||c||ke.length===0,className:"btn-secondary flex items-center gap-2 text-sm",children:[r.jsx(Tr,{className:"w-4 h-4"}),r.jsx("span",{children:e("dashboard.exportExcel")})]})]}),r.jsx("div",{className:"overflow-x-auto",children:o?r.jsx("div",{className:"flex items-center justify-center h-32",children:r.jsx(Re,{className:"w-6 h-6 animate-spin text-hse-primary"})}):ke.length>0?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"space-y-3 md:hidden",children:ke.map(Z=>r.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3 bg-white dark:bg-gray-800",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:XE(Z.inspection_date)}),r.jsx("p",{className:"mt-1 text-xs text-gray-600 dark:text-gray-300",children:ae(Z.nature,Z.nature_other)}),r.jsxs("p",{className:"mt-1 text-xs text-gray-600 dark:text-gray-300",children:[Z.location??"","  ",Z.zone??""]}),r.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[e("inspections.inspector"),": ",Z.inspector]})]}),r.jsxs("div",{className:"text-right text-xs text-gray-600 dark:text-gray-300 space-y-1",children:[r.jsx("span",{className:`inline-flex items-center gap-1 badge ${Z.type==="internal"?"badge-info":"badge-warning"}`,children:e(`inspections.types.${Z.type}`)}),r.jsx("span",{className:`inline-flex items-center gap-1 badge ${Z.status==="open"?"badge-warning":"badge-success"}`,children:Z.status==="open"?r.jsxs(r.Fragment,{children:[r.jsx(oa,{className:"w-3 h-3"}),e("inspections.statusOpen")]}):r.jsxs(r.Fragment,{children:[r.jsx(Xt,{className:"w-3 h-3"}),e("inspections.statusClosed")]})})]})]}),r.jsxs("div",{className:"mt-3 flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>D(Z),className:"px-2 py-1 text-xs rounded-md bg-gray-50 dark:bg-gray-900 text-gray-700 dark:text-gray-200",title:e("common.edit"),children:e("common.edit")}),r.jsx("button",{onClick:()=>X(Z),className:"px-2 py-1 text-xs rounded-md bg-red-50 dark:bg-red-900/30 text-red-600",title:e("common.delete"),children:e("common.delete")})]})]},Z.id))}),r.jsx("div",{className:"hidden md:block",children:r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:e("inspections.date")}),r.jsx("th",{children:e("inspections.nature")}),r.jsx("th",{children:e("inspections.type")}),r.jsx("th",{children:e("inspections.location")}),r.jsx("th",{children:e("inspections.zone")}),r.jsx("th",{children:e("inspections.inspector")}),r.jsx("th",{children:e("inspections.status")}),r.jsx("th",{children:e("common.actions")})]})}),r.jsx("tbody",{children:ke.map(Z=>r.jsxs("tr",{children:[r.jsx("td",{className:"whitespace-nowrap",children:XE(Z.inspection_date)}),r.jsx("td",{children:r.jsx("span",{className:"text-sm",children:ae(Z.nature,Z.nature_other)})}),r.jsx("td",{children:r.jsx("span",{className:`badge ${Z.type==="internal"?"badge-info":"badge-warning"}`,children:e(`inspections.types.${Z.type}`)})}),r.jsx("td",{children:Z.location??""}),r.jsx("td",{children:Z.zone??""}),r.jsx("td",{children:Z.inspector}),r.jsx("td",{children:r.jsx("span",{className:`badge ${Z.status==="open"?"badge-warning":"badge-success"}`,children:Z.status==="open"?r.jsxs(r.Fragment,{children:[r.jsx(oa,{className:"w-3 h-3 mr-1"}),e("inspections.statusOpen")]}):r.jsxs(r.Fragment,{children:[r.jsx(Xt,{className:"w-3 h-3 mr-1"}),e("inspections.statusClosed")]})})}),r.jsx("td",{children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>D(Z),className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",title:e("common.edit"),children:r.jsx(Lo,{className:"w-4 h-4 text-gray-500"})}),r.jsx("button",{onClick:()=>X(Z),className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:e("common.delete"),children:r.jsx(Nt,{className:"w-4 h-4 text-red-500"})})]})})]},Z.id))})]})})]}):r.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[r.jsx(Ra,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:e("inspections.noInspections")})]})})]}),r.jsx(nt,{isOpen:_,onClose:z,title:e(k?"inspections.editInspection":"inspections.newInspection"),size:"lg",children:r.jsxs("form",{onSubmit:L,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[e("inspections.project")," *"]}),r.jsxs(Ze,{value:P.project_id,onChange:Z=>F(Z.target.value),required:!0,children:[r.jsx("option",{value:"",children:e("inspections.selectProject")}),I.map(Z=>r.jsx("option",{value:Z.id,children:Wt(Z)},Z.id))]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[e("inspections.date")," *"]}),r.jsx(ot,{value:P.inspection_date,onChange:Z=>A({...P,inspection_date:Z}),required:!0})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[e("inspections.nature")," *"]}),r.jsx(Ze,{value:P.nature,onChange:Z=>A({...P,nature:Z.target.value}),required:!0,children:ZE.map(Z=>r.jsx("option",{value:Z.value,children:e(`inspections.natures.${Z.labelKey}`)},Z.value))})]}),P.nature==="other"&&r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[e("inspections.natureOther")," *"]}),r.jsx("input",{type:"text",value:P.nature_other,onChange:Z=>A({...P,nature_other:Z.target.value}),className:"input",placeholder:e("inspections.natureOtherPlaceholder"),required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[e("inspections.type")," *"]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"radio",name:"type",value:"internal",checked:P.type==="internal",onChange:Z=>A({...P,type:Z.target.value}),className:"w-4 h-4 text-hse-primary"}),r.jsx("span",{children:e("inspections.types.internal")})]}),r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"radio",name:"type",value:"external",checked:P.type==="external",onChange:Z=>A({...P,type:Z.target.value}),className:"w-4 h-4 text-hse-primary"}),r.jsx("span",{children:e("inspections.types.external")})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("inspections.location")}),r.jsx("input",{type:"text",value:P.location,onChange:Z=>A({...P,location:Z.target.value}),className:"input",placeholder:e("inspections.locationPlaceholder")})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("inspections.zone")}),r.jsxs(Ze,{value:P.zone,onChange:Z=>A({...P,zone:Z.target.value}),disabled:u.length===0,children:[r.jsxs("option",{value:"",children:[e("common.select"),"..."]}),u.map((Z,me)=>r.jsx("option",{value:Z,children:Z},me))]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[e("inspections.startDate")," *"]}),r.jsx(ot,{value:P.start_date,onChange:Z=>A({...P,start_date:Z}),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("inspections.endDate")}),r.jsx(ot,{value:P.end_date,onChange:Z=>A({...P,end_date:Z})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[e("inspections.inspector")," *"]}),r.jsx("input",{type:"text",value:P.inspector,onChange:Z=>A({...P,inspector:Z.target.value}),className:"input",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("inspections.enterprise")}),r.jsx("input",{type:"text",value:P.enterprise,onChange:Z=>A({...P,enterprise:Z.target.value}),className:"input",placeholder:e("inspections.enterprisePlaceholder")})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[e("inspections.status")," *"]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"radio",name:"status",value:"open",checked:P.status==="open",onChange:Z=>A({...P,status:Z.target.value}),className:"w-4 h-4 text-hse-primary"}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(oa,{className:"w-4 h-4 text-amber-500"}),e("inspections.statusOpen")]})]}),r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"radio",name:"status",value:"closed",checked:P.status==="closed",onChange:Z=>A({...P,status:Z.target.value}),className:"w-4 h-4 text-hse-primary"}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Xt,{className:"w-4 h-4 text-green-500"}),e("inspections.statusClosed")]})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("inspections.notes")}),r.jsx("textarea",{value:P.notes,onChange:Z=>A({...P,notes:Z.target.value}),className:"input",rows:3,placeholder:e("inspections.notesPlaceholder")})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t dark:border-gray-700",children:[r.jsx("button",{type:"button",onClick:z,className:"btn-outline",children:e("common.cancel")}),r.jsxs("button",{type:"submit",disabled:M,className:"btn-primary flex items-center gap-2",children:[M&&r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e(k?"common.save":"inspections.create")]})]})]})}),r.jsx(la,{isOpen:!!O,title:e("common.confirm"),message:e("inspections.confirmDelete"),confirmLabel:e("common.delete"),cancelLabel:e("common.cancel"),variant:"danger",onConfirm:H,onCancel:()=>q(null)})]})}const Nwe=Object.freeze(Object.defineProperty({__proto__:null,default:kwe},Symbol.toStringTag,{value:"Module"}));function zh({enabled:e,progressId:t,status:a,onProgress:n,interval:s=2e3,maxNotFound:i=5}){const o=f.useRef(!1),l=f.useRef(0),c=f.useCallback(async()=>{if(!t)return!1;if(o.current||document.hidden)return!0;o.current=!0;try{const d=await de.get(`/mass-import/progress/${t}`,{silent:!0}),u=d.data?.data??d.data;return l.current=0,n(u),!0}catch(d){return!(d?.response?.status===404&&(l.current+=1,l.current>=i))}finally{o.current=!1}},[t,n,i]);f.useEffect(()=>{if(!e||!t||a==="completed"||a==="failed")return;let d=!1,u=null;l.current=0;const m=async()=>{if(d)return;const g=await c();d||g&&(u=setTimeout(m,s))};u=setTimeout(m,1e3);const p=()=>{!document.hidden&&!o.current&&!d&&c()};return document.addEventListener("visibilitychange",p),()=>{d=!0,u&&clearTimeout(u),document.removeEventListener("visibilitychange",p)}},[e,t,a,c,s])}const Bh=()=>{try{if(typeof crypto<"u"&&typeof crypto.randomUUID=="function")return crypto.randomUUID()}catch{}return`${Date.now()}-${Math.random().toString(16).slice(2)}`},oj=[{value:"bypassing_safety_controls",labelKey:"workers.details.trainings.types.bypassing_safety_controls"},{value:"formation_coactivite",labelKey:"workers.details.trainings.types.formation_coactivite"},{value:"formation_coffrage_decoffrage",labelKey:"workers.details.trainings.types.formation_coffrage_decoffrage"},{value:"formation_conduite_defensive",labelKey:"workers.details.trainings.types.formation_conduite_defensive"},{value:"formation_analyse_des_risques",labelKey:"workers.details.trainings.types.formation_analyse_des_risques"},{value:"formation_elingage_manutention",labelKey:"workers.details.trainings.types.formation_elingage_manutention"},{value:"formation_ergonomie",labelKey:"workers.details.trainings.types.formation_ergonomie"},{value:"formation_excavations",labelKey:"workers.details.trainings.types.formation_excavations"},{value:"formation_outils_electroportatifs",labelKey:"workers.details.trainings.types.formation_outils_electroportatifs"},{value:"formation_epi",labelKey:"workers.details.trainings.types.formation_epi"},{value:"formation_environnement",labelKey:"workers.details.trainings.types.formation_environnement"},{value:"formation_espaces_confines",labelKey:"workers.details.trainings.types.formation_espaces_confines"},{value:"formation_flagman",labelKey:"workers.details.trainings.types.formation_flagman"},{value:"formation_jha",labelKey:"workers.details.trainings.types.formation_jha"},{value:"formation_line_of_fire",labelKey:"workers.details.trainings.types.formation_line_of_fire"},{value:"formation_manutention_manuelle",labelKey:"workers.details.trainings.types.formation_manutention_manuelle"},{value:"formation_manutention_mecanique",labelKey:"workers.details.trainings.types.formation_manutention_mecanique"},{value:"formation_point_chaud",labelKey:"workers.details.trainings.types.formation_point_chaud"},{value:"formation_produits_chimiques",labelKey:"workers.details.trainings.types.formation_produits_chimiques"},{value:"formation_risques_electriques",labelKey:"workers.details.trainings.types.formation_risques_electriques"},{value:"induction_hse",labelKey:"workers.details.trainings.types.induction_hse"},{value:"travail_en_hauteur",labelKey:"workers.details.trainings.types.travail_en_hauteur"},{value:"other",labelKey:"workers.details.trainings.types.other"}],lj=[{value:"elingueur",labelKey:"workers.details.qualifications.types.elingueur"},{value:"equipier_premiere_intervention",labelKey:"workers.details.qualifications.types.equipier_premiere_intervention"},{value:"habilitation_electrique",labelKey:"workers.details.qualifications.types.habilitation_electrique"},{value:"inspecteur_echafaudage",labelKey:"workers.details.qualifications.types.inspecteur_echafaudage"},{value:"monteur_echafaudage",labelKey:"workers.details.qualifications.types.monteur_echafaudage"},{value:"monteur_grue_a_tour",labelKey:"workers.details.qualifications.types.monteur_grue_a_tour"},{value:"chauffeur",labelKey:"workers.details.qualifications.types.chauffeur"},{value:"operateur",labelKey:"workers.details.qualifications.types.operateur"},{value:"operateur_bulldozer",labelKey:"workers.details.qualifications.types.operateur_bulldozer"},{value:"operateur_chargeuse",labelKey:"workers.details.qualifications.types.operateur_chargeuse"},{value:"operateur_chariot_elevateur",labelKey:"workers.details.qualifications.types.operateur_chariot_elevateur"},{value:"operateur_compacteur",labelKey:"workers.details.qualifications.types.operateur_compacteur"},{value:"operateur_dumper",labelKey:"workers.details.qualifications.types.operateur_dumper"},{value:"operateur_grue_a_tour",labelKey:"workers.details.qualifications.types.operateur_grue_a_tour"},{value:"operateur_grue_mobile",labelKey:"workers.details.qualifications.types.operateur_grue_mobile"},{value:"operateur_niveleuse",labelKey:"workers.details.qualifications.types.operateur_niveleuse"},{value:"operateur_nacelle",labelKey:"workers.details.qualifications.types.operateur_nacelle"},{value:"operateur_pelle",labelKey:"workers.details.qualifications.types.operateur_pelle"},{value:"sst",labelKey:"workers.details.qualifications.types.sst"},{value:"soudeur",labelKey:"workers.details.qualifications.types.soudeur"},{value:"utilisation_meule",labelKey:"workers.details.qualifications.types.utilisation_meule"},{value:"other",labelKey:"workers.details.qualifications.types.other"}],QE=[{value:"embauche_reintegration",labelKey:"workers.details.medical.examNatures.embauche_reintegration"},{value:"visite_systematique",labelKey:"workers.details.medical.examNatures.visite_systematique"},{value:"surveillance_medical_special",labelKey:"workers.details.medical.examNatures.surveillance_medical_special"},{value:"visite_de_reprise",labelKey:"workers.details.medical.examNatures.visite_de_reprise"},{value:"visite_spontanee",labelKey:"workers.details.medical.examNatures.visite_spontanee"}],Swe=[{value:"travaux_en_hauteur",labelKey:"workers.details.medical.ableToOptions.travaux_en_hauteur"},{value:"travaux_electrique",labelKey:"workers.details.medical.ableToOptions.travaux_electrique"},{value:"travaux_en_espace_confine",labelKey:"workers.details.medical.ableToOptions.travaux_en_espace_confine"},{value:"operateur",labelKey:"workers.details.medical.ableToOptions.operateur"},{value:"travaux_point_chaud",labelKey:"workers.details.medical.ableToOptions.travaux_point_chaud"}];function Awe(){const{t:e}=ut(),{user:t}=At(),a=Zr(),n=Tn(),s=f.useRef(null),i=f.useRef(null),o=f.useRef(null),l=f.useRef(null),c=f.useRef(null),d=f.useRef(null),u=f.useRef(null),m=f.useRef(null),p=f.useRef(null),g=t?.role==="hr"||t?.role==="hr_director",x=["hse_manager","responsable","supervisor","user"].includes(t?.role),h=t?.role==="hse_manager",v=f.useRef(0),b=f.useRef(null),y=f.useRef(null),j=f.useRef(null),_=$=>{const pe=$?.training_type;if(!pe)return"-";if(pe==="other")return String($?.training_label??"").trim()||e("workers.details.trainings.types.other");const _e=oj.find(We=>We.value===pe);return _e?.labelKey?e(_e.labelKey):String(pe)},w=$=>{const pe=$?.qualification_type;if(!pe)return"-";if(pe==="other")return String($?.qualification_label??"").trim()||e("workers.details.qualifications.types.other");const _e=lj.find(We=>We.value===pe);return _e?.labelKey?e(_e.labelKey):String(pe)},k=$=>{const pe=$?.exam_nature;if(!pe)return"-";const _e=QE.find(We=>We.value===pe);return _e?.labelKey?e(_e.labelKey):String(pe)},N=$=>{const pe=$?.sanction_type;return pe?e(`workers.details.sanctions.types.${pe}`):"-"},[P,A]=f.useState(!1),[M,R]=f.useState(null),[O,q]=f.useState("trainings"),[S,I]=f.useState([]),[E,W]=f.useState(!1),[B,C]=f.useState([]),[D,z]=f.useState(!1),[L,X]=f.useState([]),[H,F]=f.useState(!1),[ke,ae]=f.useState([]),[ue,Z]=f.useState(!1),[me,ge]=f.useState([]),[se,he]=f.useState(!1),[T,oe]=f.useState([]),[G,V]=f.useState(!1),[Y,ce]=f.useState(!1),[je,re]=f.useState(!1),[U,xe]=f.useState({ppe_item_id:"",ppe_other:"",quantity:1,received_at:""}),[J,Q]=f.useState(!1),[ne,ee]=f.useState(!1),[ye,te]=f.useState({sanction_date:"",sanction_type:"",reason:"",mise_a_pied_days:"",document:null}),[Ne,Ce]=f.useState(!1),[Ue,fe]=f.useState(!1),[Te,we]=f.useState(null),[Ee,Be]=f.useState(!1),[be,$e]=f.useState({training_type:"",training_label:"",training_date:"",expiry_date:"",certificate:null}),[Ve,_t]=f.useState(!1),[bt,Pt]=f.useState(!1),[It,Ct]=f.useState(null),[Yt,Ar]=f.useState(!1),[lt,Ft]=f.useState({qualification_type:"",qualification_level:"",qualification_label:"",start_date:"",expiry_date:"",certificate:null}),[Pr,an]=f.useState(!1),[Fe,Ge]=f.useState(!1),[gt,cr]=f.useState(null),[ve,Le]=f.useState(!1),[ze,xt]=f.useState({aptitude_status:"apte",exam_nature:"",able_to:[],exam_date:"",expiry_date:"",certificate:null}),[rr,Sa]=f.useState(null),[nn,ts]=f.useState(!1),[da,Js]=f.useState(!1),Se=f.useRef(!1),[Me,vt]=f.useState(null),[Jt,ua]=f.useState(null),[Zl,Xl]=f.useState(!1),ei=f.useRef(!1),[rs,hu]=f.useState([]),[Li,gu]=f.useState([]),[xu,yu]=f.useState([]),[Ql,vu]=f.useState([]),[$i,zv]=f.useState(null),[Bv,wf]=f.useState(!0),[Jl,vr]=f.useState(1),[Wv,Uv]=f.useState(1),[bu,Hv]=f.useState(0),[as]=f.useState(50),[Ri,_f]=f.useState(""),[ns,Kv]=f.useState(""),[Xr,ju]=f.useState(""),[ma,ec]=f.useState(""),[xn,kf]=f.useState(""),[yn,qi]=f.useState(""),[zo,tc]=f.useState(!1),Nf=f.useRef(null),Sf=f.useRef(null),[wu,ie]=f.useState(!1),Ae=f.useRef(null),qe=f.useRef(null),[Xe,Ut]=f.useState(""),[Rt,Fa]=f.useState("has"),[Lr,Af]=f.useState(""),[On,Bo]=f.useState("has"),[Aa,ss]=f.useState(""),[Pa,_u]=f.useState(""),[is,_N]=f.useState(""),[os,kN]=f.useState(""),[d$,NN]=f.useState([]),SN=t?.project_list_preference??"code",Pf=f.useMemo(()=>Ir(Li,SN),[Li,SN]),u$=f.useMemo(()=>{const $=Array.isArray(Pf)?Pf:[];return Xr?$.filter(pe=>pe?.pole===Xr):$},[Pf,Xr]),[Wo,Cf]=f.useState([]),[Ef,AN]=f.useState(!1),[m$,PN]=f.useState(!1),[p$,Tf]=f.useState(!1),[f$,CN]=f.useState(!1),[Fi,rc]=f.useState("trainings"),[ku,Vv]=f.useState(null),[EN,TN]=f.useState(!1),[ON,MN]=f.useState(!1),[Nu,Of]=f.useState(null),[Su,Gv]=f.useState(null),[Yv,Zv]=f.useState(null),[Xv,Qv]=f.useState(!1),[ac,Jv]=f.useState(null),[h$,DN]=f.useState(null),[IN,Mf]=f.useState(null),[Au,e0]=f.useState(null),[Pu,t0]=f.useState(null),[r0,a0]=f.useState(!1),[nc,n0]=f.useState(null),[g$,LN]=f.useState(null),[$N,Df]=f.useState(null),[Cu,s0]=f.useState(null),[i0,o0]=f.useState(null),[l0,c0]=f.useState(!1),[sc,d0]=f.useState(null),[x$,RN]=f.useState(null),[qN,If]=f.useState(null),[Eu,u0]=f.useState(null),[Tu,m0]=f.useState(null),[p0,f0]=f.useState(!1),[ic,h0]=f.useState(null),[y$,FN]=f.useState(null),[zN,Lf]=f.useState(null),[oc,g0]=f.useState(null),[v$,$f]=f.useState(!1),[hr,ls]=f.useState({nom:"",prenom:"",fonction:"",cin:"",date_naissance:"",entreprise:"",project_id:"",date_entree:"",is_active:!0});f.useEffect(()=>{BN(),Uo()},[]),f.useEffect(()=>{const pe=new URLSearchParams(a.search).get("worker_id"),_e=pe?String(pe).trim():"";_e&&(async()=>{try{const We=await Wa.getById(_e),st=We.data?.data??We.data;st&&await _0(st)}catch{}finally{const We=new URLSearchParams(a.search);We.delete("worker_id"),n({pathname:a.pathname,search:We.toString()?`?${We.toString()}`:""},{replace:!0})}})()},[]),f.useEffect(()=>{Rf()},[Jl,ns,ma,xn,yn,Xr,Xe,Rt,Lr,On,Aa,Pa,is,os]),f.useEffect(()=>{Uo()},[ns,ma,xn,yn,Xr,Xe,Rt,Lr,On,Aa,Pa,is,os]),f.useEffect(()=>{if(!zo)return;const $=_e=>{_e.key==="Escape"&&tc(!1)},pe=_e=>{const We=Nf.current,st=Sf.current,zt=_e.target;We&&We.contains(zt)||st&&st.contains(zt)||tc(!1)};return document.addEventListener("keydown",$),document.addEventListener("mousedown",pe),()=>{document.removeEventListener("keydown",$),document.removeEventListener("mousedown",pe)}},[zo]),f.useEffect(()=>{if(!wu)return;const $=_e=>{_e.key==="Escape"&&ie(!1)},pe=_e=>{const We=Ae.current,st=qe.current,zt=_e.target;We&&We.contains(zt)||st&&st.contains(zt)||ie(!1)};return document.addEventListener("keydown",$),document.addEventListener("mousedown",pe),()=>{document.removeEventListener("keydown",$),document.removeEventListener("mousedown",pe)}},[wu]),f.useEffect(()=>{(async()=>{try{const pe=await it.getPoles(),_e=pe.data?.data?.poles??pe.data?.poles??[];NN(Array.isArray(_e)?_e:[])}catch{NN([])}})()},[]),f.useEffect(()=>{if(!Xr)return;!Li.some(pe=>String(pe.id)===String(ma)&&pe?.pole===Xr)&&ma&&ec("")},[Xr,ma,Li]),f.useEffect(()=>{const $=setTimeout(()=>{Kv(Ri)},300);return()=>clearTimeout($)},[Ri]);const BN=async()=>{try{const[$,pe,_e]=await Promise.all([it.getAllList({status:"active"}),Wa.getEntreprises(),Wa.getFonctions()]);gu(Array.isArray($)?$:[]),yu(pe.data.data??[]),vu(_e.data.data??[])}catch($){console.error("Failed to load initial data:",$)}},Uo=async()=>{try{y.current&&y.current.abort();const $=new AbortController;y.current=$;const pe={search:ns||void 0,pole:Xr||void 0,project_id:ma||void 0,entreprise:xn||void 0,fonction:yn||void 0,sanction:os||void 0,training_type:Xe||void 0,training_presence:Xe?Rt:void 0,qualification_type:Lr||void 0,qualification_presence:Lr?On:void 0,medical_presence:Aa||void 0,medical_status:Pa||void 0,expired_filter:is||void 0,is_active:!0},_e=await Wa.getStatistics(pe,{signal:$.signal});zv(_e.data.data)}catch($){if($?.name==="CanceledError"||$?.name==="AbortError"||$?.code==="ERR_CANCELED")return}},Rf=async()=>{try{wf(!0),b.current&&b.current.abort();const $=new AbortController;b.current=$;const pe=v.current+1;v.current=pe;const _e={page:Jl,per_page:as,search:ns||void 0,pole:Xr||void 0,project_id:ma||void 0,entreprise:xn||void 0,fonction:yn||void 0,sanction:os||void 0,training_type:Xe||void 0,training_presence:Xe?Rt:void 0,qualification_type:Lr||void 0,qualification_presence:Lr?On:void 0,medical_presence:Aa||void 0,medical_status:Pa||void 0,expired_filter:is||void 0,is_active:!0},We=await Wa.getAll(_e,{signal:$.signal});if(pe!==v.current)return;const st=We.data,zt=st.data??st,za=Array.isArray(zt)?zt:zt?.data??[],ds=st.meta??zt.meta??zt;hu(Mn=>{if(Jl===1)return za;const gr=[...Mn,...za],zf=new Set;return gr.filter(Ou=>{const Mu=Ou?.id;if(Mu==null)return!0;const Bf=String(Mu);return zf.has(Bf)?!1:(zf.add(Bf),!0)})}),Uv(ds.last_page??1),Hv(ds.total??za.length)}catch($){if($?.name==="CanceledError"||$?.name==="AbortError"||$?.code==="ERR_CANCELED")return;K.error(e("errors.somethingWentWrong"))}finally{wf(!1)}},b$=$i?.hse_team??rs.filter($=>{const pe=String($?.fonction??"").toLowerCase();return pe?["infirmier","infirmire","infirmiere","ambulancier","ambulancire","ambulanciere","animateur","animatrice","coordinateur","coordinatrice","coordonnateur","hse","qhse","nurse","paramedic","animator","coordinator","infermier","infermire","infermiere","ambulencier","ambulenciere","animateure","coordonateur","coordinnateur","coordinnatrice","h.s.e","q.h.s.e","nurce","paramedicc","animater","coordinatorr","h-s-e","q-h-s-e"].some(We=>pe.includes(We)):!1}).length,j$=$i?.induction_hse??0,w$=$i?.travail_en_hauteur??0,_$=$i?.medical_aptitude??0,WN=($=null)=>{$?(Vv($),ls({nom:$.nom??"",prenom:$.prenom??"",fonction:$.fonction??"",cin:$.cin?.toUpperCase()??"",date_naissance:$.date_naissance?.split("T")[0]??"",entreprise:$.entreprise??"",project_id:$.project_id??"",date_entree:$.date_entree?.split("T")[0]??"",is_active:$.is_active??!0})):(Vv(null),ls({nom:"",prenom:"",fonction:"",cin:"",date_naissance:"",entreprise:"",project_id:"",date_entree:"",is_active:!0})),PN(!0)},x0=()=>{PN(!1),Vv(null)},k$=async $=>{$.preventDefault(),TN(!0);const pe={...hr,cin:hr.cin?.toUpperCase()};try{ku?(await Wa.update(ku.id,pe),K.success(e("workers.updated"))):(await Wa.create(pe)).data.data?.merged?K.success(e("workers.merged")):K.success(e("workers.created")),x0(),Rf(),Uo()}catch(_e){K.error(_e.response?.data?.message??e("errors.somethingWentWrong"))}finally{TN(!1)}},N$=$=>{g0($)},S$=async()=>{if(oc)try{await Wa.delete(oc.id),K.success(e("workers.deactivated")),Rf(),Uo()}catch{K.error(e("errors.somethingWentWrong"))}finally{g0(null)}},A$=()=>{Wo.length!==0&&$f(!0)},P$=async()=>{if(Wo.length===0){$f(!1);return}try{const $=await Wa.bulkDeactivate(Wo);K.success(e("workers.bulkDeactivated",{count:$.data.data.deactivated_count})),Cf([]),AN(!1),Rf(),Uo()}catch{K.error(e("errors.somethingWentWrong"))}finally{$f(!1)}},C$=async()=>{try{const $=await Wa.downloadTemplate(),pe=window.URL.createObjectURL(new Blob([$.data])),_e=document.createElement("a");_e.href=pe,_e.setAttribute("download","workers_template.xlsx"),document.body.appendChild(_e),_e.click(),_e.remove()}catch{K.error(e("errors.somethingWentWrong"))}},E$=async()=>{try{const $=await cc.downloadMassTemplate(),pe=window.URL.createObjectURL(new Blob([$.data])),_e=document.createElement("a");_e.href=pe,_e.setAttribute("download","worker_trainings_mass_template.xlsx"),document.body.appendChild(_e),_e.click(),_e.remove()}catch($){K.error($.response?.data?.message??e("errors.somethingWentWrong"))}},T$=async()=>{try{const $=await dc.downloadMassTemplate(),pe=window.URL.createObjectURL(new Blob([$.data])),_e=document.createElement("a");_e.href=pe,_e.setAttribute("download","worker_qualifications_mass_template.xlsx"),document.body.appendChild(_e),_e.click(),_e.remove()}catch($){K.error($.response?.data?.message??e("errors.somethingWentWrong"))}},O$=async()=>{try{const $=await uc.downloadMassTemplate(),pe=window.URL.createObjectURL(new Blob([$.data])),_e=document.createElement("a");_e.href=pe,_e.setAttribute("download","worker_medical_aptitudes_mass_template.xlsx"),document.body.appendChild(_e),_e.click(),_e.remove()}catch($){K.error($.response?.data?.message??e("errors.somethingWentWrong"))}},M$=async()=>{try{const $=await Uu.downloadMassTemplate(),pe=window.URL.createObjectURL(new Blob([$.data])),_e=document.createElement("a");_e.href=pe,_e.setAttribute("download","worker_sanctions_mass_template.xlsx"),document.body.appendChild(_e),_e.click(),_e.remove()}catch($){K.error($.response?.data?.message??e("errors.somethingWentWrong"))}},UN=()=>{CN(!1),rc("trainings"),Gv(null),Zv(null),Jv(null),Qv(!1),DN(null),Mf(null),i.current&&(i.current.value=""),o.current&&(o.current.value=""),e0(null),t0(null),n0(null),a0(!1),LN(null),Df(null),l.current&&(l.current.value=""),c.current&&(c.current.value=""),s0(null),o0(null),d0(null),c0(!1),RN(null),If(null),d.current&&(d.current.value=""),u.current&&(u.current.value=""),u0(null),m0(null),h0(null),f0(!1),FN(null),Lf(null),m.current&&(m.current.value=""),p.current&&(p.current.value="")},qf=$=>{if(!$)return null;const pe=Number($?.processed??0),_e=Number($?.total??0),We=Number($?.imported??0),st=Number($?.failed??0),zt=_e>0?_e:0,za=zt>0?Math.min(100,Math.round(pe/zt*100)):0,ds=$?.status==="failed",Mn=$?.status==="completed";return r.jsxs("div",{className:"p-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("div",{className:"text-gray-700 dark:text-gray-200 font-medium",children:e("common.progress")}),r.jsx("div",{className:ds?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400",children:Mn?"100%":`${za}%`})]}),r.jsx("div",{className:"w-full h-2 rounded bg-gray-200 dark:bg-gray-700 overflow-hidden",children:r.jsx("div",{className:"h-2 bg-hse-primary",style:{width:`${Mn?100:za}%`}})}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600 dark:text-gray-300",children:[r.jsxs("div",{children:[e("common.processed"),": ",pe," / ",zt]}),r.jsxs("div",{children:[e("common.imported"),": ",We]}),r.jsxs("div",{children:[e("common.failed"),": ",st]}),r.jsx("div",{className:"text-right",children:String($?.status??"")})]}),ds&&$?.error?r.jsx("div",{className:"text-xs text-red-600 dark:text-red-400",children:String($.error)}):null]})};zh({enabled:Xv,progressId:h$,status:IN?.status,onProgress:f.useCallback($=>Mf($),[])}),zh({enabled:r0,progressId:g$,status:$N?.status,onProgress:f.useCallback($=>Df($),[])}),zh({enabled:l0,progressId:x$,status:qN?.status,onProgress:f.useCallback($=>If($),[])}),zh({enabled:p0,progressId:y$,status:zN?.status,onProgress:f.useCallback($=>Lf($),[])});const D$=async()=>{if(!Su)return;Qv(!0),Jv(null);const $=Bh();DN($),Mf({id:$,status:"running",processed:0,total:0,failed:0,imported:0});try{const pe=await cc.massImport({excel:Su,zip:Yv,progressId:$}),_e=pe.data?.data??pe.data;Jv(_e);const We=_e?.imported??0,st=_e?.failed_count??0;K.success(e("workers.massDocs.trainings.importSuccess",{imported:We,failed:st})),_e?.failed_rows_url&&await Ds(_e.failed_rows_url,"worker_trainings_failed_rows.xlsx")}catch(pe){Mf(_e=>_e&&{..._e,status:"failed",error:pe.response?.data?.message??e("errors.somethingWentWrong")}),K.error(pe.response?.data?.message??e("errors.somethingWentWrong"))}finally{Qv(!1)}},I$=async()=>{if(!Au||!Pu)return;a0(!0),n0(null);const $=Bh();LN($),Df({id:$,status:"running",processed:0,total:0,failed:0,imported:0});try{const pe=await dc.massImport({excel:Au,zip:Pu,progressId:$}),_e=pe.data?.data??pe.data;n0(_e);const We=_e?.imported??0,st=_e?.failed_count??0;K.success(e("workers.massDocs.qualifications.importSuccess",{imported:We,failed:st})),_e?.failed_rows_url&&await Ds(_e.failed_rows_url,"worker_qualifications_failed_rows.xlsx")}catch(pe){Df(_e=>_e&&{..._e,status:"failed",error:pe.response?.data?.message??e("errors.somethingWentWrong")}),K.error(pe.response?.data?.message??e("errors.somethingWentWrong"))}finally{a0(!1)}},L$=async()=>{if(!Cu)return;c0(!0),d0(null);const $=Bh();RN($),If({id:$,status:"running",processed:0,total:0,failed:0,imported:0});try{const pe=await uc.massImport({excel:Cu,zip:i0,progressId:$}),_e=pe.data?.data??pe.data;d0(_e);const We=_e?.imported??0,st=_e?.failed_count??0;K.success(e("workers.massDocs.medical.importSuccess",{imported:We,failed:st})),_e?.failed_rows_url&&await Ds(_e.failed_rows_url,"worker_medical_aptitudes_failed_rows.xlsx")}catch(pe){If(_e=>_e&&{..._e,status:"failed",error:pe.response?.data?.message??e("errors.somethingWentWrong")}),K.error(pe.response?.data?.message??e("errors.somethingWentWrong"))}finally{c0(!1)}},$$=async()=>{if(!Eu||!Tu)return;f0(!0),h0(null);const $=Bh();FN($),Lf({id:$,status:"running",processed:0,total:0,failed:0,imported:0});try{const pe=await Uu.massImport({excel:Eu,zip:Tu,progressId:$}),_e=pe.data?.data??pe.data;h0(_e);const We=_e?.imported??0,st=_e?.failed_count??0;K.success(e("workers.massDocs.sanctions.importSuccess",{imported:We,failed:st})),_e?.failed_rows_url&&await Ds(_e.failed_rows_url,"worker_sanctions_failed_rows.xlsx")}catch(pe){Lf(_e=>_e&&{..._e,status:"failed",error:pe.response?.data?.message??e("errors.somethingWentWrong")}),K.error(pe.response?.data?.message??e("errors.somethingWentWrong"))}finally{f0(!1)}},R$=async()=>{try{const pe={pole:Xr||void 0,project_id:ma||void 0,entreprise:xn||void 0,fonction:yn||void 0,sanction:os||void 0,training_type:Xe||void 0,training_presence:Xe?Rt:void 0,qualification_type:Lr||void 0,qualification_presence:Lr?On:void 0,medical_presence:Aa||void 0,medical_status:Pa||void 0,expired_filter:is||void 0,is_active:!0,search:ns||Ri||void 0},_e=await Wa.export(pe),We=_e.data instanceof Blob?_e.data:new Blob([_e.data]),st=window.URL.createObjectURL(We),za=(_e.headers?.["content-disposition"]??_e.headers?.["Content-Disposition"])?.match(/filename\*=UTF-8''([^;]+)|filename="?([^";]+)"?/i),ds=za?.[1]??za?.[2],Mn=ds?decodeURIComponent(ds):null,gr=[];if(ma){const s2=Li.find(dR=>String(dR.id)===String(ma))?.name;s2&&gr.push(s2)}xn&&gr.push(xn),yn&&gr.push(yn),Xe&&gr.push(`training:${Xe}-${Rt}`),Lr&&gr.push(`qualification:${Lr}-${On}`),Aa&&gr.push(`medical:${Aa}${Pa?`-${Pa}`:""}`),is&&gr.push(`expired:${is}`),os&&gr.push(`sanction:${os}`);const zf=gr.length?gr.join(", "):"active",Ou=new Date,Mu=String(Ou.getDate()).padStart(2,"0"),Bf=String(Ou.getMonth()+1).padStart(2,"0"),nR=String(Ou.getFullYear()),sR=`${Mu}-${Bf}-${nR}`,iR=zf.replace(/[\\/:*?"<>|]/g,"-").replace(/\s+/g," ").trim(),oR=(We.type?.includes("csv")?!0:!!We.type?.includes("text/plain"))?"csv":"xlsx",lR=`Workers_export_(${iR})_date(${sR}).${oR}`,cR=Mn??lR,Du=document.createElement("a");Du.href=st,Du.setAttribute("download",cR),document.body.appendChild(Du),Du.click(),Du.remove(),K.success(e("common.exportSuccess"))}catch($){try{const pe=$?.response?.data;if(pe instanceof Blob&&pe.type?.includes("application/json")){const _e=await pe.text(),We=JSON.parse(_e);K.error(We?.message??e("errors.somethingWentWrong"));return}}catch{}K.error($.response?.data?.message??e("errors.somethingWentWrong"))}},q$=async()=>{if(Nu){MN(!0);try{const $=new FormData;$.append("file",Nu),ma&&$.append("project_id",ma);const pe=await Wa.import($),_e=pe.data?.data??pe.data,We=_e?.imported_count??_e?.imported??0,st=_e?.merged_count??_e?.merged??0;K.success(e("workers.importSuccess",{imported:We,merged:st})),_e?.failed_rows_url&&await Ds(_e.failed_rows_url,"workers_failed_rows.xlsx"),Tf(!1),Of(null),vr(1),hu([]),BN()}catch($){K.error($.response?.data?.message??e("errors.somethingWentWrong"))}finally{MN(!1)}}},F$=$=>{Cf(pe=>pe.includes($)?pe.filter(_e=>_e!==$):[...pe,$])},HN=()=>{Cf(Ef?[]:rs.map($=>$.id)),AN(!Ef)},cs=$=>$?new Date($).toLocaleDateString("fr-FR"):"-",z$=f.useMemo(()=>{const $={};for(const pe of ke){const _e=pe?.ppe_item_id??pe?.ppe_item?.id??pe?.ppeItem?.id,We=pe?.received_at;!_e||!We||(!$[_e]||new Date(We)>new Date($[_e]))&&($[_e]=We)}return $},[ke]),KN=f.useMemo(()=>{const $=[...me].sort((We,st)=>{const zt=We?.sanction_date?new Date(`${We.sanction_date}T00:00:00`).getTime():0,za=st?.sanction_date?new Date(`${st.sanction_date}T00:00:00`).getTime():0;return zt!==za?zt-za:Number(We?.id??0)-Number(st?.id??0)});let pe=0;const _e={};for(const We of $){if(We?.sanction_type==="mise_a_pied"){pe=0;continue}We?.sanction_type==="avertissement"&&(pe+=1,_e[We.id]=pe)}return _e},[me]),y0=($,pe)=>{if(!$)return"";const _e=new Date(`${$}T00:00:00`);if(Number.isNaN(_e.getTime()))return"";_e.setFullYear(_e.getFullYear()+pe);const We=_e.getFullYear(),st=String(_e.getMonth()+1).padStart(2,"0"),zt=String(_e.getDate()).padStart(2,"0");return`${We}-${st}-${zt}`},B$=$=>$?.id?`/api/worker-trainings/${$.id}/certificate/view`:null,VN=$=>$?.id?`/api/worker-trainings/${$.id}/certificate/download`:null,W$=$=>$?.id?`/api/worker-qualifications/${$.id}/certificate/view`:null,GN=$=>$?.id?`/api/worker-qualifications/${$.id}/certificate/download`:null,U$=$=>$?.id?`/api/worker-medical-aptitudes/${$.id}/certificate/view`:null,YN=$=>$?.id?`/api/worker-medical-aptitudes/${$.id}/certificate/download`:null,H$=$=>$?.id?`/api/worker-sanctions/${$.id}/document/view`:null,ZN=$=>$?.id?`/api/worker-sanctions/${$.id}/document/download`:null,XN=$=>{if(!$||typeof $!="string")return null;if($.startsWith("/api/"))return $.slice(4);if($.startsWith("api/"))return $.slice(3);if($.startsWith("/storage/"))return $;if($.startsWith("storage/"))return`/${$}`;if($.startsWith("http://")||$.startsWith("https://"))try{const pe=new URL($);if(pe.pathname.startsWith("/storage/"))return`${pe.pathname}${pe.search}`}catch{}return $},Ds=async($,pe="document.pdf")=>{if($)try{const _e=XN($);let We,st=null;if(typeof _e=="string"&&_e.startsWith("/storage/")){const gr=await fetch(_e);if(!gr.ok)throw new Error(`Failed to fetch: ${gr.status}`);We=await gr.blob(),st={"content-disposition":gr.headers.get("content-disposition")}}else{const gr=await de.get(_e,{responseType:"blob"});We=gr.data,st=gr.headers}let zt=pe;const za=st?.["content-disposition"];if(typeof za=="string"){const gr=/filename="?([^";]+)"?/i.exec(za);gr&&gr[1]&&(zt=gr[1])}const ds=URL.createObjectURL(We),Mn=document.createElement("a");Mn.href=ds,Mn.download=zt,document.body.appendChild(Mn),Mn.click(),Mn.remove(),setTimeout(()=>URL.revokeObjectURL(ds),1e3)}catch(_e){K.error(_e.response?.data?.message??e("errors.somethingWentWrong"))}},QN=()=>{vt(null),Xl(!1),Jt&&ei.current&&URL.revokeObjectURL(Jt),ei.current=!1,ua(null)},Ff=async($,pe)=>{if($)try{if(vt(pe??{}),Xl(!0),Jt&&ei.current&&URL.revokeObjectURL(Jt),ei.current=!1,ua(null),typeof $=="string"&&$.startsWith("blob:")){ua($);return}const _e=XN($);let We;if(typeof _e=="string"&&_e.startsWith("/storage/")){const zt=await fetch(_e);if(!zt.ok)throw new Error(`Failed to fetch: ${zt.status}`);We=await zt.blob()}else We=(await de.get(_e,{responseType:"blob"})).data;const st=URL.createObjectURL(We);ei.current=!0,ua(st)}catch(_e){K.error(_e.response?.data?.message??e("errors.somethingWentWrong")),vt(null)}finally{Xl(!1)}};f.useEffect(()=>()=>{Jt&&ei.current&&URL.revokeObjectURL(Jt)},[Jt]);const v0=async $=>{if($)try{W(!0);const _e=(await cc.getAll({worker_id:$,per_page:100})).data,We=_e.data??_e,st=Array.isArray(We)?We:We.data??[];I(Array.isArray(st)?st:[])}catch(pe){I([]),K.error(pe.response?.data?.message??e("errors.somethingWentWrong"))}finally{W(!1)}},b0=async $=>{if($)try{z(!0);const _e=(await dc.getAll({worker_id:$,per_page:100})).data,We=_e.data??_e,st=Array.isArray(We)?We:We.data??[];C(Array.isArray(st)?st:[])}catch(pe){C([]),K.error(pe.response?.data?.message??e("errors.somethingWentWrong"))}finally{z(!1)}},j0=async $=>{if($)try{F(!0);const _e=(await uc.getAll({worker_id:$,per_page:100})).data,We=_e.data??_e,st=Array.isArray(We)?We:We.data??[];X(Array.isArray(st)?st:[])}catch(pe){X([]),K.error(pe.response?.data?.message??e("errors.somethingWentWrong"))}finally{F(!1)}},JN=async $=>{if($)try{Z(!0);const _e=(await Ha.getWorkerIssues($)).data,We=_e.data??_e,st=Array.isArray(We)?We:We.data??[];ae(Array.isArray(st)?st:[])}catch(pe){ae([]),K.error(pe.response?.data?.message??e("errors.somethingWentWrong"))}finally{Z(!1)}},w0=async $=>{if($)try{he(!0);const _e=(await Uu.getAll({worker_id:$,per_page:100})).data,We=_e.data??_e,st=Array.isArray(We)?We:We.data??[];ge(Array.isArray(st)?st:[])}catch(pe){ge([]),K.error(pe.response?.data?.message??e("errors.somethingWentWrong"))}finally{he(!1)}},e2=async $=>{if(!$){oe([]);return}try{V(!0);const pe=await Ha.getItems({project_id:Number($)});oe(pe.data?.data??[])}catch(pe){oe([]),K.error(pe.response?.data?.message??e("errors.somethingWentWrong"))}finally{V(!1)}},t2=async $=>{if($)try{ts(!0),rr&&Se.current&&(URL.revokeObjectURL(rr),Se.current=!1),Sa(null);const pe=await de.get(`/workers/${$}/image`,{responseType:"blob"}),_e=URL.createObjectURL(pe.data);Se.current=!0,Sa(_e)}catch{Sa(null)}finally{ts(!1)}},K$=async $=>{if(!(!M?.id||!$))try{Js(!0);const pe=new FormData;pe.append("image",$),await de.post(`/workers/${M.id}/image`,pe,{headers:{"Content-Type":"multipart/form-data"}}),await t2(M.id),K.success(e("success.saved"))}catch(pe){K.error(pe.response?.data?.message??e("errors.somethingWentWrong"))}finally{Js(!1)}},_0=async $=>{$&&(R($),A(!0),q("trainings"),await Promise.all([v0($.id),b0($.id),j0($.id),g?null:JN($.id),w0($.id),g?null:e2($.project_id??$.project?.id),t2($.id)].filter(Boolean)))},V$=()=>{A(!1),R(null),q("trainings"),I([]),C([]),X([]),ae([]),ge([]),oe([]),ce(!1),xe({ppe_item_id:"",ppe_other:"",quantity:1,received_at:""}),Q(!1),te({sanction_date:"",sanction_type:"",reason:"",mise_a_pied_days:"",document:null}),rr&&Se.current&&URL.revokeObjectURL(rr),Se.current=!1,Sa(null),QN()},r2=($=null)=>{we($),Be(!1),$e($?{training_type:$.training_type??"",training_label:$.training_label??"",training_date:$.training_date??"",expiry_date:$.expiry_date??"",certificate:null}:{training_type:"",training_label:"",training_date:"",expiry_date:"",certificate:null}),Ce(!0)},k0=()=>{Ce(!1),we(null),Be(!1),$e({training_type:"",training_label:"",training_date:"",expiry_date:"",certificate:null})},G$=$=>{const pe=$.target.files?.[0];if(pe&&pe.type!=="application/pdf"){K.error(e("workers.details.common.pdfOnly"));return}$e(_e=>({..._e,certificate:pe??null}))},a2=($=null)=>{Ct($),Ar(!1),Ft($?{qualification_type:$.qualification_type??"",qualification_level:$.qualification_level??"",qualification_label:$.qualification_label??"",start_date:$.start_date??"",expiry_date:$.expiry_date??"",certificate:null}:{qualification_type:"",qualification_level:"",qualification_label:"",start_date:"",expiry_date:"",certificate:null}),_t(!0)},N0=()=>{_t(!1),Ct(null),Ar(!1),Ft({qualification_type:"",qualification_level:"",qualification_label:"",start_date:"",expiry_date:"",certificate:null})},Y$=$=>{const pe=$.target.files?.[0];if(pe&&pe.type!=="application/pdf"){K.error(e("workers.details.common.pdfOnly"));return}Ft(_e=>({..._e,certificate:pe??null}))},Z$=async $=>{if($.preventDefault(),!!M?.id&&!(!lt.qualification_type||!lt.start_date)&&!(lt.qualification_type==="other"&&!String(lt.qualification_label??"").trim())&&!(lt.qualification_type==="habilitation_electrique"&&!String(lt.qualification_level??"").trim())){Pt(!0);try{const pe={worker_id:M.id,qualification_type:lt.qualification_type,qualification_level:lt.qualification_type==="habilitation_electrique"?String(lt.qualification_level??"").trim():void 0,qualification_label:lt.qualification_type==="other"?String(lt.qualification_label??"").trim():void 0,start_date:lt.start_date,expiry_date:lt.expiry_date?lt.expiry_date:void 0,certificate:lt.certificate?lt.certificate:void 0};It?.id?await dc.update(It.id,pe):await dc.create(pe),K.success(e("success.saved")),N0(),await b0(M.id)}catch(pe){K.error(pe.response?.data?.message??e("errors.somethingWentWrong"))}finally{Pt(!1)}}},X$=async $=>{if($?.id)try{await dc.delete($.id),K.success(e("success.deleted")),M?.id&&await b0(M.id)}catch(pe){K.error(pe.response?.data?.message??e("errors.somethingWentWrong"))}},n2=($=null)=>{cr($),Le(!1),xt($?{aptitude_status:$.aptitude_status??"apte",exam_nature:$.exam_nature??"",able_to:Array.isArray($.able_to)?$.able_to:[],exam_date:$.exam_date??"",expiry_date:$.expiry_date??"",certificate:null}:{aptitude_status:"apte",exam_nature:"",able_to:[],exam_date:"",expiry_date:"",certificate:null}),an(!0)},S0=()=>{an(!1),cr(null),Le(!1),xt({aptitude_status:"apte",exam_nature:"",able_to:[],exam_date:"",expiry_date:"",certificate:null})},Q$=$=>{const pe=$.target.files?.[0];if(pe&&pe.type!=="application/pdf"){K.error(e("workers.details.common.pdfOnly"));return}xt(_e=>({..._e,certificate:pe??null}))},J$=$=>{xt(pe=>{const _e=Array.isArray(pe.able_to)?pe.able_to:[];return _e.includes($)?{...pe,able_to:_e.filter(We=>We!==$)}:{...pe,able_to:[..._e,$]}})},eR=async $=>{if($.preventDefault(),!!M?.id&&!(!ze.exam_nature||!ze.exam_date)){Ge(!0);try{const pe={worker_id:M.id,aptitude_status:ze.aptitude_status,exam_nature:ze.exam_nature,able_to:Array.isArray(ze.able_to)?ze.able_to:[],exam_date:ze.exam_date,expiry_date:ze.expiry_date?ze.expiry_date:void 0,certificate:ze.certificate?ze.certificate:void 0};gt?.id?await uc.update(gt.id,pe):await uc.create(pe),K.success(e("success.saved")),S0(),await j0(M.id),Uo()}catch(pe){K.error(pe.response?.data?.message??e("errors.somethingWentWrong"))}finally{Ge(!1)}}},tR=async $=>{if($?.id)try{await uc.delete($.id),K.success(e("success.deleted")),M?.id&&await j0(M.id),Uo()}catch(pe){K.error(pe.response?.data?.message??e("errors.somethingWentWrong"))}},rR=async $=>{if($.preventDefault(),!!M?.id&&!(!be.training_type||!be.training_date)&&!(be.training_type==="other"&&!String(be.training_label??"").trim())){fe(!0);try{const pe={worker_id:M.id,training_type:be.training_type,training_label:be.training_type==="other"?String(be.training_label??"").trim():void 0,training_date:be.training_date,expiry_date:be.expiry_date?be.expiry_date:void 0,certificate:be.certificate?be.certificate:void 0};Te?.id?(await cc.update(Te.id,pe),K.success(e("success.saved"))):(await cc.create(pe),K.success(e("success.saved"))),k0(),await v0(M.id)}catch(pe){K.error(pe.response?.data?.message??e("errors.somethingWentWrong"))}finally{fe(!1)}}},aR=async $=>{if($?.id)try{await cc.delete($.id),K.success(e("success.deleted")),M?.id&&await v0(M.id)}catch(pe){K.error(pe.response?.data?.message??e("errors.somethingWentWrong"))}};return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e("workers.title")}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("workers.subtitle")})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs("button",{onClick:R$,className:"btn-outline btn-sm flex items-center gap-2",children:[r.jsx(jr,{className:"w-4 h-4"}),e("workers.export")]}),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{ref:Ae,type:"button",onClick:()=>ie($=>!$),className:"btn-primary btn-sm flex items-center gap-2",children:[r.jsx(Dm,{className:"w-4 h-4"}),e("workers.addWorker"),r.jsx(Vr,{className:"w-4 h-4"})]}),wu&&r.jsxs("div",{ref:qe,role:"menu",className:"absolute right-0 mt-2 w-56 z-[70] rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 shadow-lg overflow-hidden",children:[r.jsx("button",{type:"button",className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>{ie(!1),WN()},children:e("workers.addOneWorker")}),r.jsx("button",{type:"button",className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>{ie(!1),Tf(!0)},children:e("workers.massAdd")}),!g&&r.jsx("button",{type:"button",className:"w-full px-3 py-2 text-sm text-left hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>{ie(!1),rc("trainings"),CN(!0)},children:e("workers.massDocs.open")})]})]})]})]}),$i&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"card p-3 flex items-center gap-3",children:[r.jsx("div",{className:"p-2.5 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:r.jsx(sa,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("workers.totalWorkers")}),r.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:$i.active})]})]}),r.jsxs("div",{className:"card p-3 flex items-center gap-3",children:[r.jsx("div",{className:"p-2.5 bg-orange-100 dark:bg-orange-900/50 rounded-lg",children:r.jsx(wn,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("workers.hseTeam")}),r.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:b$})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"card p-3 flex items-center gap-3",children:[r.jsx("div",{className:"p-2.5 bg-emerald-100 dark:bg-emerald-900/50 rounded-lg",children:r.jsx(Xt,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("workers.stats.inductionHse")}),r.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:j$})]})]}),r.jsxs("div",{className:"card p-3 flex items-center gap-3",children:[r.jsx("div",{className:"p-2.5 bg-purple-100 dark:bg-purple-900/50 rounded-lg",children:r.jsx(wn,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("workers.stats.workAtHeight")}),r.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:w$})]})]}),r.jsxs("div",{className:"card p-3 flex items-center gap-3",children:[r.jsx("div",{className:"p-2.5 bg-sky-100 dark:bg-sky-900/50 rounded-lg",children:r.jsx(Xt,{className:"w-5 h-5 text-sky-600 dark:text-sky-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("workers.stats.medicalAptitude")}),r.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:_$})]})]})]})]}),r.jsx("div",{className:"card p-3 overflow-visible",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2",children:[r.jsxs("div",{className:"relative w-full md:max-w-md",children:[r.jsx(Yr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",value:Ri,onChange:$=>{_f($.target.value),vr(1)},placeholder:e("common.search"),className:"input pl-9 py-1.5 text-sm"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{ref:Nf,type:"button",onClick:()=>tc($=>!$),className:"btn-outline btn-sm flex items-center gap-2","aria-haspopup":"menu","aria-expanded":zo,children:[r.jsx(qz,{className:"w-4 h-4"}),e("common.filter"),r.jsx(Vr,{className:"w-4 h-4"})]}),zo&&r.jsxs("div",{ref:Sf,role:"menu",className:"absolute right-0 mt-2 w-[min(28rem,calc(100vw-2rem))] z-[60] card overflow-visible p-3 shadow-lg",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.filters.pole")}),r.jsxs(Ze,{value:Xr,onChange:$=>{ju($.target.value),ec(""),vr(1)},className:"py-1.5 text-sm",children:[r.jsx("option",{value:"",children:e("common.allPoles")}),d$.map($=>r.jsx("option",{value:$,children:$},$))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.filters.project")}),r.jsxs(Ze,{value:ma,onChange:$=>{ec($.target.value),vr(1)},className:"py-1.5 text-sm",children:[r.jsx("option",{value:"",children:e("workers.allProjects")}),u$.map($=>r.jsx("option",{value:$.id,children:Wt($)},$.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.filters.entreprise")}),r.jsxs(Ze,{value:xn,onChange:$=>{kf($.target.value),vr(1)},className:"py-1.5 text-sm",children:[r.jsx("option",{value:"",children:e("workers.allEntreprises")}),xu.map($=>r.jsx("option",{value:$,children:$},$))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.filters.fonction")}),r.jsxs(Ze,{value:yn,onChange:$=>{qi($.target.value),vr(1)},className:"py-1.5 text-sm",children:[r.jsx("option",{value:"",children:e("workers.allFonctions")}),Ql.map($=>r.jsx("option",{value:$,children:$},$))]})]}),r.jsx("div",{className:"md:col-span-2 border-t border-gray-200 dark:border-gray-700 pt-3"}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.filters.training")}),r.jsxs(Ze,{value:Xe,onChange:$=>{Ut($.target.value),vr(1)},className:"py-1.5 text-sm",children:[r.jsx("option",{value:"",children:e("common.all")}),oj.filter($=>$.value!=="other").map($=>r.jsx("option",{value:$.value,children:e($.labelKey)},$.value))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.filters.presence")}),r.jsxs(Ze,{value:Rt,onChange:$=>{Fa($.target.value),vr(1)},className:"py-1.5 text-sm",disabled:!Xe,children:[r.jsx("option",{value:"has",children:e("workers.filters.with")}),r.jsx("option",{value:"missing",children:e("workers.filters.without")})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.filters.qualification")}),r.jsxs(Ze,{value:Lr,onChange:$=>{Af($.target.value),vr(1)},className:"py-1.5 text-sm",children:[r.jsx("option",{value:"",children:e("common.all")}),lj.filter($=>$.value!=="other").map($=>r.jsx("option",{value:$.value,children:e($.labelKey)},$.value))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.filters.presence")}),r.jsxs(Ze,{value:On,onChange:$=>{Bo($.target.value),vr(1)},className:"py-1.5 text-sm",disabled:!Lr,children:[r.jsx("option",{value:"has",children:e("workers.filters.with")}),r.jsx("option",{value:"missing",children:e("workers.filters.without")})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.filters.medical")}),r.jsxs(Ze,{value:Aa,onChange:$=>{ss($.target.value),vr(1)},className:"py-1.5 text-sm",children:[r.jsx("option",{value:"",children:e("common.all")}),r.jsx("option",{value:"has",children:e("workers.filters.with")}),r.jsx("option",{value:"missing",children:e("workers.filters.without")})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.filters.medicalStatus")}),r.jsxs(Ze,{value:Pa,onChange:$=>{_u($.target.value),vr(1)},className:"py-1.5 text-sm",disabled:!Aa||Aa==="missing",children:[r.jsx("option",{value:"",children:e("common.all")}),r.jsx("option",{value:"apte",children:e("workers.details.medical.apte")}),r.jsx("option",{value:"inapte",children:e("workers.details.medical.inapte")})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"label text-xs",children:e("workers.filters.expired")}),r.jsxs(Ze,{value:is,onChange:$=>{_N($.target.value),vr(1)},className:"py-1.5 text-sm",children:[r.jsx("option",{value:"",children:e("workers.filters.expiredAny")}),r.jsx("option",{value:"only_expired",children:e("workers.filters.expiredOnly")}),r.jsx("option",{value:"without_expired",children:e("workers.filters.expiredWithout")})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.filters.sanctions")}),r.jsxs(Ze,{value:os,onChange:$=>{kN($.target.value),vr(1)},className:"py-1.5 text-sm",children:[r.jsx("option",{value:"",children:e("common.all")}),r.jsx("option",{value:"any",children:e("workers.filters.sanctionsAny")}),r.jsx("option",{value:"none",children:e("workers.filters.sanctionsNone")}),r.jsx("option",{value:"mise_a_pied",children:e("workers.details.sanctions.types.mise_a_pied")}),r.jsx("option",{value:"avertissement",children:e("workers.details.sanctions.types.avertissement")}),r.jsx("option",{value:"rappel_a_lordre",children:e("workers.details.sanctions.types.rappel_a_lordre")}),r.jsx("option",{value:"blame",children:e("workers.details.sanctions.types.blame")})]})]})]}),r.jsxs("div",{className:"flex items-center justify-end gap-2 mt-3 border-t border-gray-200 dark:border-gray-700 pt-3",children:[r.jsx("button",{type:"button",onClick:()=>{ju(""),ec(""),kf(""),qi(""),Ut(""),Fa("has"),Af(""),Bo("has"),ss(""),_u(""),_N(""),kN(""),vr(1)},className:"btn-outline btn-sm",children:e("common.reset")}),r.jsx("button",{type:"button",onClick:()=>tc(!1),className:"btn-primary btn-sm",children:e("common.apply")})]})]})]})]})}),Wo.length>0&&r.jsxs("div",{className:"card p-2.5 flex items-center justify-between bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:Ef,onChange:HN,className:"rounded border-red-300 text-red-600 focus:ring-red-500"}),r.jsxs("span",{className:"text-sm font-medium text-red-700 dark:text-red-300",children:[Wo.length," ",e("common.selected")]})]}),r.jsxs("button",{onClick:A$,className:"btn-danger btn-sm flex items-center gap-1.5 text-xs",children:[r.jsx(Nt,{className:"w-3.5 h-3.5"}),e("workers.bulkDeactivate")]})]}),r.jsxs("div",{className:"card overflow-hidden",children:[Bv?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(Re,{className:"w-6 h-6 animate-spin text-hse-primary"})}):rs.length>0?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-[14px]",children:[r.jsx("thead",{className:"text-[11px] uppercase tracking-wider text-gray-500 dark:text-gray-400",children:r.jsxs("tr",{className:"sticky top-0 z-10 bg-white/95 dark:bg-gray-900/95 backdrop-blur border-b border-gray-200 dark:border-gray-700",children:[r.jsx("th",{className:"w-12 px-3 py-3",children:r.jsx("input",{type:"checkbox",checked:Ef,onChange:HN,className:"w-4 h-4 rounded border-gray-300 dark:border-gray-600 text-hse-primary focus:ring-hse-primary"})}),r.jsx("th",{className:"px-3 py-3 text-left font-semibold",children:e("workers.nom")}),r.jsx("th",{className:"px-3 py-3 text-left font-semibold",children:e("workers.prenom")}),r.jsx("th",{className:"px-3 py-3 text-left font-semibold",children:e("workers.cin")}),r.jsx("th",{className:"px-3 py-3 text-left font-semibold",children:e("workers.fonction")}),r.jsx("th",{className:"px-3 py-3 text-left font-semibold",children:e("workers.entreprise")}),r.jsx("th",{className:"px-3 py-3 text-left font-semibold",children:e("workers.projet")}),r.jsx("th",{className:"px-3 py-3 text-left font-semibold whitespace-nowrap",children:e("workers.dateEntree")}),r.jsx("th",{className:"px-3 py-3 text-center font-semibold w-24",children:e("common.actions")})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:rs.map(($,pe)=>r.jsxs("tr",{role:"button",tabIndex:0,onClick:_e=>{const We=_e.target;We instanceof Element&&(We.closest("button")||We.closest("a")||We.closest("input"))||_0($)},onKeyDown:_e=>{_e.key==="Enter"&&_0($)},className:`${pe%2===0?"bg-white dark:bg-gray-900":"bg-gray-50/60 dark:bg-gray-800/30"} hover:bg-hse-primary/5 dark:hover:bg-hse-primary/10 transition-colors cursor-pointer`,children:[r.jsx("td",{className:"px-3 py-2.5 align-middle",children:r.jsx("input",{type:"checkbox",checked:Wo.includes($.id),onChange:_e=>{_e.stopPropagation(),F$($.id)},className:"w-4 h-4 rounded border-gray-300 dark:border-gray-600 text-hse-primary focus:ring-hse-primary"})}),r.jsx("td",{className:"px-3 py-2.5 font-medium text-gray-900 dark:text-gray-100 whitespace-nowrap",children:$.nom}),r.jsx("td",{className:"px-3 py-2.5 text-gray-700 dark:text-gray-200 whitespace-nowrap",children:$.prenom}),r.jsx("td",{className:"px-3 py-2.5 font-mono text-gray-600 dark:text-gray-300 whitespace-nowrap",children:$.cin?.toUpperCase()}),r.jsx("td",{className:"px-3 py-2.5 text-gray-700 dark:text-gray-200",children:$.fonction??""}),r.jsx("td",{className:"px-3 py-2.5 text-gray-700 dark:text-gray-200",children:$.entreprise??""}),r.jsx("td",{className:"px-3 py-2.5 text-gray-700 dark:text-gray-200",children:$.project?.name??""}),r.jsx("td",{className:"px-3 py-2.5 text-gray-600 dark:text-gray-300 whitespace-nowrap",children:cs($.date_entree)}),r.jsx("td",{className:"px-3 py-2.5 align-middle",children:r.jsxs("div",{className:"flex items-center justify-center gap-1",children:[r.jsx("button",{onClick:_e=>{_e.stopPropagation(),WN($)},className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 border border-transparent hover:border-gray-200 dark:hover:border-gray-600",title:e("common.edit"),children:r.jsx(Lo,{className:"w-4 h-4 text-gray-600 dark:text-gray-300"})}),r.jsx("button",{onClick:_e=>{_e.stopPropagation(),N$($)},className:"p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 border border-transparent hover:border-red-200 dark:hover:border-red-800",title:e("workers.deactivate"),children:r.jsx(Nt,{className:"w-4 h-4 text-red-600 dark:text-red-400"})})]})})]},$.id))})]})}):r.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[r.jsx(sa,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),r.jsx("p",{className:"text-sm",children:e("workers.noWorkers")})]}),(rs.length>0?!0:bu>0)&&r.jsxs("div",{className:"px-3 py-2 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between bg-gray-50 dark:bg-gray-800/50",children:[r.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e("pagination.showing")," ",rs.length," ",e("pagination.of")," ",bu," ",e("pagination.results")]}),rs.length<bu&&r.jsx("button",{onClick:()=>vr($=>$+1),className:"px-2 py-1 text-xs rounded border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:e("common.showMore")})]})]}),r.jsx(nt,{isOpen:m$,onClose:x0,title:e(ku?"workers.editWorker":"workers.newWorker"),size:"lg",children:r.jsxs("form",{onSubmit:k$,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[e("workers.nom")," *"]}),r.jsx("input",{type:"text",value:hr.nom,onChange:$=>ls({...hr,nom:$.target.value}),className:"input",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[e("workers.prenom")," *"]}),r.jsx("input",{type:"text",value:hr.prenom,onChange:$=>ls({...hr,prenom:$.target.value}),className:"input",required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"label",children:[e("workers.cin")," *"]}),r.jsxs("div",{className:"relative",children:[r.jsx(k5,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",value:hr.cin,onChange:$=>ls({...hr,cin:$.target.value.toUpperCase()}),className:"input pl-10 uppercase",placeholder:"AB123456",required:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("workers.fonction")}),r.jsx(Yp,{value:hr.fonction,onChange:$=>ls({...hr,fonction:$}),suggestions:Ql,placeholder:e("workers.fonctionPlaceholder"),icon:r.jsx(wn,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("workers.dateNaissance")}),r.jsx(ot,{value:hr.date_naissance,onChange:$=>ls({...hr,date_naissance:$}),placeholder:e("workers.selectDate")}),hr.date_naissance&&(()=>{const $=new Date(hr.date_naissance),pe=new Date,_e=pe.getFullYear()-$.getFullYear(),We=pe.getMonth()-$.getMonth();return(We<0||We===0&&pe.getDate()<$.getDate()?_e-1:_e)<18?r.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400 font-semibold mt-1 flex items-center gap-1",children:[r.jsx("span",{className:"inline-block w-2 h-2 bg-red-500 rounded-full animate-pulse"}),e("workers.minAge")]}):null})()]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("workers.dateEntree")}),r.jsx(ot,{value:hr.date_entree,onChange:$=>ls({...hr,date_entree:$}),placeholder:e("workers.selectDate")})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("workers.entreprise")}),r.jsx(Yp,{value:hr.entreprise,onChange:$=>ls({...hr,entreprise:$}),suggestions:xu,placeholder:e("workers.entreprisePlaceholder"),defaultValue:"SGTM",icon:r.jsx(Mo,{className:"w-4 h-4"})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("workers.projet")}),r.jsxs(Ze,{value:hr.project_id,onChange:$=>ls({...hr,project_id:$.target.value}),children:[r.jsx("option",{value:"",children:e("common.select")}),Pf.map($=>r.jsx("option",{value:$.id,children:Wt($)},$.id))]})]})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("label",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e("workers.status")}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("workers.statusHelp")})]}),r.jsx("button",{type:"button",onClick:()=>ls({...hr,is_active:!hr.is_active}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${hr.is_active?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${hr.is_active?"translate-x-6":"translate-x-1"}`})})]}),!ku&&r.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/30 rounded-lg text-sm text-blue-700 dark:text-blue-300",children:r.jsx("p",{children:e("workers.cinInfo")})}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t dark:border-gray-700",children:[r.jsx("button",{type:"button",onClick:x0,className:"btn-outline",children:e("common.cancel")}),r.jsxs("button",{type:"submit",disabled:EN,className:"btn-primary flex items-center gap-2",children:[EN&&r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e(ku?"common.save":"workers.addWorker")]})]})]})}),P&&M&&r.jsx(nt,{isOpen:P,onClose:V$,title:e("workers.details.title"),size:"full",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"min-w-0 flex flex-col justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:M.project?.name??"-"}),r.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 truncate",children:[M.prenom," ",M.nom]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:M.fonction??"-"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 font-mono",children:M.cin?.toUpperCase()??"-"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:e("workers.entreprise")}),r.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:M.entreprise??"-"})]}),r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:e("workers.dateEntree")}),r.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:cs(M.date_entree)})]})]})]}),r.jsxs("div",{className:"w-full rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 overflow-hidden relative",children:[r.jsxs("div",{className:"absolute top-3 right-3 z-10 flex items-center gap-2",children:[r.jsx("input",{ref:j,type:"file",accept:"image/*",className:"hidden",onChange:$=>{const pe=$.target.files?.[0];pe&&(K$(pe),$.target.value="")}}),r.jsxs("button",{type:"button",onClick:()=>j.current?.click(),className:"btn-outline btn-sm flex items-center gap-2",disabled:da,children:[da?r.jsx(Re,{className:"w-4 h-4 animate-spin"}):r.jsx(_n,{className:"w-4 h-4"}),e("workers.details.image.add")]})]}),nn?r.jsx("div",{className:"w-full h-72 flex items-center justify-center",children:r.jsx(Re,{className:"w-6 h-6 animate-spin text-hse-primary"})}):rr?r.jsx("div",{className:"w-full h-72 flex items-center justify-center p-2",children:r.jsx("img",{src:rr,alt:"",className:"max-w-full max-h-full object-contain"})}):r.jsxs("div",{className:"w-full h-72 flex flex-col items-center justify-center text-sm text-gray-500 dark:text-gray-400 gap-2",children:[r.jsx(Gc,{className:"w-8 h-8"}),r.jsx("span",{children:e("workers.details.noImage")})]})]})]}),r.jsxs("div",{className:"card overflow-hidden",children:[r.jsx("div",{className:"px-4 pt-4 border-b border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex gap-2 -mb-px flex-wrap",children:[r.jsxs("button",{type:"button",onClick:()=>q("trainings"),className:`px-3 py-2 text-sm border rounded-t-lg flex items-center gap-2 ${O==="trainings"?"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700 border-b-white dark:border-b-gray-900 text-hse-primary":"border-transparent text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100"}`,children:[r.jsx(pr,{className:"w-4 h-4"}),e("workers.details.tabs.trainings")]}),r.jsxs("button",{type:"button",onClick:()=>q("qualifications"),className:`px-3 py-2 text-sm border rounded-t-lg flex items-center gap-2 ${O==="qualifications"?"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700 border-b-white dark:border-b-gray-900 text-hse-primary":"border-transparent text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100"}`,children:[r.jsx(Ra,{className:"w-4 h-4"}),e("workers.details.tabs.qualifications")]}),r.jsxs("button",{type:"button",onClick:()=>q("medical"),className:`px-3 py-2 text-sm border rounded-t-lg flex items-center gap-2 ${O==="medical"?"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700 border-b-white dark:border-b-gray-900 text-hse-primary":"border-transparent text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100"}`,children:[r.jsx(Xt,{className:"w-4 h-4"}),e("workers.details.tabs.medical")]}),!g&&r.jsxs("button",{type:"button",onClick:()=>q("ppe"),className:`px-3 py-2 text-sm border rounded-t-lg flex items-center gap-2 ${O==="ppe"?"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700 border-b-white dark:border-b-gray-900 text-hse-primary":"border-transparent text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100"}`,children:[r.jsx(Ni,{className:"w-4 h-4"}),e("ppe.workerTab.title")]}),r.jsxs("button",{type:"button",onClick:()=>q("sanctions"),className:`px-3 py-2 text-sm border rounded-t-lg flex items-center gap-2 ${O==="sanctions"?"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700 border-b-white dark:border-b-gray-900 text-hse-primary":"border-transparent text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100"}`,children:[r.jsx(pr,{className:"w-4 h-4"}),e("workers.details.tabs.sanctions")]})]})}),r.jsxs("div",{className:"p-4",children:[O==="trainings"&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"flex justify-end",children:!g&&r.jsxs("button",{type:"button",className:"btn-primary flex items-center gap-2",onClick:()=>r2(null),children:[r.jsx(_n,{className:"w-4 h-4"}),e("common.add")]})}),E?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(Re,{className:"w-6 h-6 animate-spin text-hse-primary"})}):S.length===0?r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:e("workers.details.trainings.empty")}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-xs",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 text-left",children:[r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("workers.details.trainings.type")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("workers.details.common.startDate")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("workers.details.common.endDate")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("common.actions")})]})}),r.jsx("tbody",{children:S.map($=>r.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[r.jsx("td",{className:"py-2 pr-3 text-gray-900 dark:text-gray-100",children:r.jsx("div",{className:"font-medium",children:_($)})}),r.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200",children:cs($.training_date)}),r.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200",children:cs($.expiry_date)}),r.jsx("td",{className:"py-2 pr-3",children:r.jsxs("div",{className:"flex flex-wrap gap-2",children:[$.certificate_url&&r.jsxs("button",{type:"button",className:"btn-outline btn-sm flex items-center gap-2",onClick:()=>Ff(B$($),{...$,download_url:VN($)}),children:[r.jsx(_r,{className:"w-4 h-4"}),e("common.view")]}),$.certificate_url&&r.jsxs("button",{type:"button",className:"btn-outline btn-sm flex items-center gap-2",onClick:pe=>{pe.stopPropagation(),Ds(VN($),"certificate.pdf")},children:[r.jsx(jr,{className:"w-4 h-4"}),e("common.download")]}),!g&&r.jsxs("button",{type:"button",className:"btn-outline btn-sm flex items-center gap-2",onClick:()=>r2($),children:[r.jsx(Mm,{className:"w-4 h-4"}),e("common.edit")]}),!g&&r.jsxs("button",{type:"button",className:"btn-danger btn-sm flex items-center gap-2",onClick:()=>aR($),children:[r.jsx(Nt,{className:"w-4 h-4"}),e("common.delete")]})]})})]},$.id))})]})})]}),O==="qualifications"&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"flex justify-end",children:!g&&r.jsxs("button",{type:"button",className:"btn-primary flex items-center gap-2",onClick:()=>a2(null),children:[r.jsx(_n,{className:"w-4 h-4"}),e("common.add")]})}),D?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(Re,{className:"w-6 h-6 animate-spin text-hse-primary"})}):B.length===0?r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:e("workers.details.qualifications.empty")}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-xs",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 text-left",children:[r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("workers.details.qualifications.type")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("workers.details.common.startDate")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("workers.details.common.endDate")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("common.actions")})]})}),r.jsx("tbody",{children:B.map($=>r.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[r.jsx("td",{className:"py-2 pr-3 text-gray-900 dark:text-gray-100",children:r.jsxs("div",{className:"font-medium flex items-center gap-2",children:[r.jsx("span",{children:w($)}),$.qualification_type==="habilitation_electrique"&&$.qualification_level?r.jsx("span",{className:"text-[11px] px-2 py-0.5 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200",children:$.qualification_level}):null]})}),r.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200",children:cs($.start_date)}),r.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200",children:cs($.expiry_date)}),r.jsx("td",{className:"py-2 pr-3",children:r.jsxs("div",{className:"flex flex-wrap gap-2",children:[$.certificate_url&&r.jsxs("button",{type:"button",className:"btn-outline btn-sm flex items-center gap-2",onClick:()=>Ff(W$($),{...$,download_url:GN($)}),children:[r.jsx(_r,{className:"w-4 h-4"}),e("common.view")]}),$.certificate_url&&r.jsxs("button",{type:"button",className:"btn-outline btn-sm flex items-center gap-2",onClick:pe=>{pe.stopPropagation(),Ds(GN($),"certificate.pdf")},children:[r.jsx(jr,{className:"w-4 h-4"}),e("common.download")]}),!g&&r.jsxs("button",{type:"button",className:"btn-outline btn-sm flex items-center gap-2",onClick:()=>a2($),children:[r.jsx(Mm,{className:"w-4 h-4"}),e("common.edit")]}),!g&&r.jsxs("button",{type:"button",className:"btn-danger btn-sm flex items-center gap-2",onClick:()=>X$($),children:[r.jsx(Nt,{className:"w-4 h-4"}),e("common.delete")]})]})})]},$.id))})]})})]}),O==="medical"&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"flex justify-end",children:!g&&r.jsxs("button",{type:"button",className:"btn-primary flex items-center gap-2",onClick:()=>n2(null),children:[r.jsx(_n,{className:"w-4 h-4"}),e("common.add")]})}),H?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(Re,{className:"w-6 h-6 animate-spin text-hse-primary"})}):L.length===0?r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:e("workers.details.medical.empty")}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-xs",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 text-left",children:[r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("workers.details.medical.status")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("workers.details.medical.examNature")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("workers.details.common.startDate")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("workers.details.common.endDate")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("common.actions")})]})}),r.jsx("tbody",{children:L.map($=>r.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[r.jsx("td",{className:"py-2 pr-3 text-gray-900 dark:text-gray-100",children:r.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-[11px] font-semibold ${$.aptitude_status==="apte"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300"}`,children:$.aptitude_status==="apte"?e("workers.details.medical.apte"):e("workers.details.medical.inapte")})}),r.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200",children:k($)}),r.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200",children:cs($.exam_date)}),r.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200",children:cs($.expiry_date)}),r.jsx("td",{className:"py-2 pr-3",children:r.jsxs("div",{className:"flex flex-wrap gap-2",children:[$.certificate_url&&r.jsxs("button",{type:"button",className:"btn-outline btn-sm flex items-center gap-2",onClick:()=>Ff(U$($),{...$,download_url:YN($)}),children:[r.jsx(_r,{className:"w-4 h-4"}),e("common.view")]}),$.certificate_url&&r.jsxs("button",{type:"button",className:"btn-outline btn-sm flex items-center gap-2",onClick:pe=>{pe.stopPropagation(),Ds(YN($),"certificate.pdf")},children:[r.jsx(jr,{className:"w-4 h-4"}),e("common.download")]}),!g&&r.jsxs("button",{type:"button",className:"btn-outline btn-sm flex items-center gap-2",onClick:()=>n2($),children:[r.jsx(Mm,{className:"w-4 h-4"}),e("common.edit")]}),!g&&r.jsxs("button",{type:"button",className:"btn-danger btn-sm flex items-center gap-2",onClick:()=>tR($),children:[r.jsx(Nt,{className:"w-4 h-4"}),e("common.delete")]})]})})]},$.id))})]})})]}),!g&&O==="ppe"&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{type:"button",className:"btn-primary flex items-center gap-2",onClick:()=>{M?.id&&(xe({ppe_item_id:"",ppe_other:"",quantity:1,received_at:new Date().toISOString().slice(0,10)}),ce(!0))},children:[r.jsx(vc,{className:"w-4 h-4"}),e("ppe.workerTab.issueButton")]})}),r.jsxs("div",{className:"card p-3",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:e("ppe.workerTab.lastIssuedTitle")}),G?r.jsx("div",{className:"flex items-center justify-center py-6",children:r.jsx(Re,{className:"w-5 h-5 animate-spin text-hse-primary"})}):T.length===0?r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:e("common.noData")}):r.jsx("div",{className:"overflow-x-auto mt-2",children:r.jsxs("table",{className:"min-w-full text-xs",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 text-left",children:[r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("ppe.workerTab.columns.item")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("ppe.items.stock")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("ppe.workerTab.columns.receivedAt")})]})}),r.jsx("tbody",{children:[...T].sort(($,pe)=>String($?.name??"").localeCompare(String(pe?.name??""))).map($=>r.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[r.jsx("td",{className:"py-2 pr-3 text-gray-900 dark:text-gray-100",children:r.jsx("div",{className:"font-medium",children:$.name})}),r.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200 font-mono",children:$.stock_quantity??0}),r.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200",children:cs(z$[$.id])})]},$.id))})]})})]}),r.jsxs("div",{className:"card p-3",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:e("ppe.workerTab.title")}),ue?r.jsx("div",{className:"flex items-center justify-center py-6",children:r.jsx(Re,{className:"w-5 h-5 animate-spin text-hse-primary"})}):ke.length===0?r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:e("ppe.workerTab.empty")}):r.jsx("div",{className:"overflow-x-auto mt-2",children:r.jsxs("table",{className:"min-w-full text-xs",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 text-left",children:[r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("ppe.workerTab.columns.item")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("ppe.workerTab.columns.quantity")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("ppe.workerTab.columns.receivedAt")})]})}),r.jsx("tbody",{children:ke.map($=>r.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[r.jsx("td",{className:"py-2 pr-3 text-gray-900 dark:text-gray-100",children:r.jsx("div",{className:"font-medium",children:$.ppe_item?.name??$.ppeItem?.name??"-"})}),r.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200 font-mono",children:$.quantity??1}),r.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200",children:cs($.received_at)})]},$.id))})]})})]})]}),O==="sanctions"&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"flex justify-end",children:x&&r.jsxs("button",{type:"button",className:"btn-primary flex items-center gap-2",onClick:()=>{te({sanction_date:new Date().toISOString().slice(0,10),sanction_type:"",reason:"",mise_a_pied_days:"",document:null}),Q(!0)},children:[r.jsx(_n,{className:"w-4 h-4"}),e("common.add")]})}),se?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(Re,{className:"w-6 h-6 animate-spin text-hse-primary"})}):me.length===0?r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:e("workers.details.sanctions.empty")}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-xs",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 text-left",children:[r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("workers.details.sanctions.date")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("workers.details.sanctions.type")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("common.project")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("workers.details.sanctions.reason")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("common.actions")})]})}),r.jsx("tbody",{children:[...me].sort(($,pe)=>{const _e=$?.sanction_date?new Date(`${$.sanction_date}T00:00:00`).getTime():0,We=pe?.sanction_date?new Date(`${pe.sanction_date}T00:00:00`).getTime():0;return _e!==We?We-_e:Number(pe?.id??0)-Number($?.id??0)}).map($=>r.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[r.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200 whitespace-nowrap",children:cs($.sanction_date)}),r.jsxs("td",{className:"py-2 pr-3 text-gray-900 dark:text-gray-100",children:[r.jsx("div",{className:"font-medium",children:N($)}),$.sanction_type==="mise_a_pied"&&$.mise_a_pied_days?r.jsxs("div",{className:"text-[11px] text-gray-500 dark:text-gray-400",children:[$.mise_a_pied_days,"j"]}):null,$.sanction_type==="avertissement"&&KN[$.id]?r.jsxs("div",{className:"text-[11px] text-gray-500 dark:text-gray-400",children:[e("workers.details.sanctions.successiveAvertissement")," ",KN[$.id]]}):null]}),r.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200",children:$.project?.name??"-"}),r.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200",children:$.reason??""}),r.jsx("td",{className:"py-2 pr-3",children:r.jsxs("div",{className:"flex flex-wrap gap-2",children:[$.document_url&&r.jsxs("button",{type:"button",className:"btn-outline btn-sm flex items-center gap-2",onClick:()=>Ff(H$($),{...$,download_url:ZN($)}),children:[r.jsx(_r,{className:"w-4 h-4"}),e("common.view")]}),$.document_url&&r.jsxs("button",{type:"button",className:"btn-outline btn-sm flex items-center gap-2",onClick:pe=>{pe.stopPropagation(),Ds(ZN($),"document.pdf")},children:[r.jsx(jr,{className:"w-4 h-4"}),e("common.download")]}),h&&r.jsxs("button",{type:"button",className:"btn-danger btn-sm flex items-center gap-2",onClick:async()=>{if(!(!$?.id||!M?.id))try{await Uu.delete($.id),K.success(e("success.deleted")),await w0(M.id)}catch(pe){K.error(pe.response?.data?.message??e("errors.somethingWentWrong"))}},children:[r.jsx(Nt,{className:"w-4 h-4"}),e("common.delete")]})]})})]},$.id))})]})})]})]})]})]})}),Y&&M&&r.jsx(nt,{isOpen:Y,onClose:()=>ce(!1),title:e("ppe.issue.title"),size:"lg",children:r.jsxs("form",{onSubmit:async $=>{if($.preventDefault(),!!M?.id){if(!U.ppe_item_id&&!String(U.ppe_other??"").trim()){K.error(e("ppe.issue.chooseItem"));return}try{re(!0),await Ha.issueToWorker({worker_id:Number(M.id),ppe_item_id:U.ppe_item_id?Number(U.ppe_item_id):void 0,ppe_name:U.ppe_item_id?void 0:String(U.ppe_other??"").trim(),quantity:Number(U.quantity??1),received_at:U.received_at}),K.success(e("ppe.issue.success")),ce(!1),await Promise.all([JN(M.id),e2(M.project_id??M.project?.id)])}catch(pe){K.error(pe.response?.data?.message??e("errors.somethingWentWrong"))}finally{re(!1)}}},className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("ppe.issue.item")}),r.jsxs(Ze,{value:U.ppe_item_id,onChange:$=>xe(pe=>({...pe,ppe_item_id:$.target.value,ppe_other:""})),children:[r.jsx("option",{value:"",children:e("ppe.issue.other")}),[...T].sort(($,pe)=>String($?.name??"").localeCompare(String(pe?.name??""))).map($=>r.jsxs("option",{value:$.id,children:[$.name," (",$.stock_quantity??0,")"]},$.id))]}),!U.ppe_item_id&&r.jsxs("div",{className:"mt-2",children:[r.jsx("label",{className:"label text-xs",children:e("ppe.issue.otherSpecify")}),r.jsx("input",{className:"input",value:U.ppe_other,onChange:$=>xe(pe=>({...pe,ppe_other:$.target.value})),placeholder:e("ppe.issue.otherPlaceholder")})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("ppe.issue.quantity")}),r.jsx("input",{type:"number",min:1,className:"input",value:U.quantity,onChange:$=>xe(pe=>({...pe,quantity:$.target.value})),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("ppe.issue.receivedAt")}),r.jsx(ot,{value:U.received_at,onChange:$=>xe(pe=>({...pe,received_at:$})),required:!0})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t border-gray-100 dark:border-gray-700",children:[r.jsx("button",{type:"button",onClick:()=>ce(!1),className:"btn-outline btn-sm",children:e("common.cancel")}),r.jsxs("button",{type:"submit",disabled:je,className:"btn-primary btn-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[je&&r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e("ppe.issue.submit")]})]})]})}),J&&M&&x&&r.jsx(nt,{isOpen:J,onClose:()=>Q(!1),title:e("workers.details.sanctions.addTitle"),size:"lg",children:r.jsxs("form",{onSubmit:async $=>{if($.preventDefault(),!!M?.id&&!(!ye.sanction_date||!ye.sanction_type||!String(ye.reason??"").trim())&&!(ye.sanction_type==="mise_a_pied"&&!Number(ye.mise_a_pied_days))&&ye.document)try{ee(!0),await Uu.create({worker_id:M.id,sanction_date:ye.sanction_date,sanction_type:ye.sanction_type,reason:String(ye.reason??"").trim(),mise_a_pied_days:ye.sanction_type==="mise_a_pied"?Number(ye.mise_a_pied_days):void 0,document:ye.document}),K.success(e("success.saved")),Q(!1),te({sanction_date:"",sanction_type:"",reason:"",mise_a_pied_days:"",document:null}),await w0(M.id)}catch(pe){K.error(pe.response?.data?.message??e("errors.somethingWentWrong"))}finally{ee(!1)}},className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.details.sanctions.date")}),r.jsx(ot,{value:ye.sanction_date,onChange:$=>te(pe=>({...pe,sanction_date:$})),placeholder:e("workers.selectDate")})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.details.sanctions.type")}),r.jsxs(Ze,{value:ye.sanction_type,onChange:$=>te(pe=>({...pe,sanction_type:$.target.value})),children:[r.jsx("option",{value:"",children:e("common.select")}),r.jsx("option",{value:"mise_a_pied",children:e("workers.details.sanctions.types.mise_a_pied")}),r.jsx("option",{value:"avertissement",children:e("workers.details.sanctions.types.avertissement")}),r.jsx("option",{value:"rappel_a_lordre",children:e("workers.details.sanctions.types.rappel_a_lordre")}),r.jsx("option",{value:"blame",children:e("workers.details.sanctions.types.blame")})]})]}),ye.sanction_type==="mise_a_pied"&&r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.details.sanctions.miseAPiedDays")}),r.jsx("input",{type:"number",min:1,className:"input",value:ye.mise_a_pied_days,onChange:$=>te(pe=>({...pe,mise_a_pied_days:$.target.value})),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.details.sanctions.reason")}),r.jsx("textarea",{className:"input min-h-[96px]",value:ye.reason,onChange:$=>te(pe=>({...pe,reason:$.target.value})),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.details.sanctions.document")}),r.jsxs("label",{className:"flex items-center justify-between border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-xs cursor-pointer hover:border-hse-primary hover:bg-hse-primary/5",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(pr,{className:"w-4 h-4 text-gray-500"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:ye.document?ye.document.name:e("workers.details.common.choosePdf")})]}),r.jsx("input",{type:"file",accept:"application/pdf",className:"hidden",onChange:$=>{const pe=$.target.files?.[0];if(pe&&pe.type!=="application/pdf"){K.error(e("workers.details.common.pdfOnly"));return}te(_e=>({..._e,document:pe??null}))}})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t border-gray-100 dark:border-gray-700",children:[r.jsx("button",{type:"button",onClick:()=>Q(!1),className:"btn-outline btn-sm",children:e("common.cancel")}),r.jsxs("button",{type:"submit",disabled:ne||!ye.sanction_date||!ye.sanction_type||!String(ye.reason??"").trim()||ye.sanction_type==="mise_a_pied"&&!Number(ye.mise_a_pied_days)||!ye.document,className:"btn-primary btn-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[ne&&r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e("common.save")]})]})]})}),Ve&&r.jsx(nt,{isOpen:Ve,onClose:N0,title:e(It?"common.edit":"workers.details.qualifications.addTitle"),size:"lg",children:r.jsxs("form",{onSubmit:Z$,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.details.qualifications.type")}),r.jsxs(Ze,{value:lt.qualification_type,onChange:$=>{const pe=$.target.value;Ft(_e=>({..._e,qualification_type:pe}))},children:[r.jsx("option",{value:"",children:e("common.select")}),lj.map($=>r.jsx("option",{value:$.value,children:e($.labelKey)},$.value))]})]}),lt.qualification_type==="habilitation_electrique"&&r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.details.qualifications.level")}),r.jsx("input",{className:"input",value:lt.qualification_level,onChange:$=>Ft(pe=>({...pe,qualification_level:$.target.value})),placeholder:e("workers.details.qualifications.levelPlaceholder")})]}),lt.qualification_type==="other"&&r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.details.qualifications.otherLabel")}),r.jsx("input",{className:"input",value:lt.qualification_label,onChange:$=>Ft(pe=>({...pe,qualification_label:$.target.value}))})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.details.common.startDate")}),r.jsx(ot,{value:lt.start_date,onChange:$=>{Ft(pe=>{const _e={...pe,start_date:$};return Yt||(_e.expiry_date=$?y0($,1):""),_e})},placeholder:e("workers.details.common.startDate")})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.details.common.endDate")}),r.jsx(ot,{value:lt.expiry_date,onChange:$=>{Ar(!0),Ft(pe=>({...pe,expiry_date:$}))},placeholder:e("workers.details.common.endDate")}),r.jsx("div",{className:"mt-1 text-[11px] text-gray-500 dark:text-gray-400",children:e("workers.details.common.endDateAutoHelp")})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.details.common.file")}),r.jsxs("label",{className:"flex items-center justify-between border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-xs cursor-pointer hover:border-hse-primary hover:bg-hse-primary/5",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(pr,{className:"w-4 h-4 text-gray-500"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:lt.certificate?lt.certificate.name:e("workers.details.common.choosePdf")})]}),r.jsx("input",{type:"file",accept:"application/pdf",onChange:Y$,className:"hidden"})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t border-gray-100 dark:border-gray-700",children:[r.jsx("button",{type:"button",onClick:N0,className:"btn-outline btn-sm",children:e("common.cancel")}),r.jsxs("button",{type:"submit",disabled:bt||!lt.qualification_type||!lt.start_date||lt.qualification_type==="other"&&!String(lt.qualification_label??"").trim()||lt.qualification_type==="habilitation_electrique"&&!String(lt.qualification_level??"").trim(),className:"btn-primary btn-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[bt&&r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e("common.save")]})]})]})}),Pr&&r.jsx(nt,{isOpen:Pr,onClose:S0,title:e(gt?"common.edit":"workers.details.medical.addTitle"),size:"lg",children:r.jsxs("form",{onSubmit:eR,className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsx("div",{children:r.jsx("label",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e("workers.details.medical.status")})}),r.jsx("button",{type:"button",onClick:()=>xt($=>({...$,aptitude_status:$.aptitude_status==="apte"?"inapte":"apte"})),className:`relative inline-flex h-6 w-14 items-center rounded-full transition-colors ${ze.aptitude_status==="apte"?"bg-green-500":"bg-red-500"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${ze.aptitude_status==="apte"?"translate-x-8":"translate-x-1"}`})})]}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:ze.aptitude_status==="apte"?e("workers.details.medical.apte"):e("workers.details.medical.inapte")}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.details.medical.examNature")}),r.jsxs(Ze,{value:ze.exam_nature,onChange:$=>xt(pe=>({...pe,exam_nature:$.target.value})),children:[r.jsx("option",{value:"",children:e("common.select")}),QE.map($=>r.jsx("option",{value:$.value,children:e($.labelKey)},$.value))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.details.medical.ableTo")}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:Swe.map($=>r.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[r.jsx("input",{type:"checkbox",checked:Array.isArray(ze.able_to)&&ze.able_to.includes($.value),onChange:()=>J$($.value),className:"w-4 h-4 rounded border-gray-300 dark:border-gray-600 text-hse-primary focus:ring-hse-primary"}),r.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-200",children:e($.labelKey)})]},$.value))})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.details.common.startDate")}),r.jsx(ot,{value:ze.exam_date,onChange:$=>{xt(pe=>{const _e={...pe,exam_date:$};return ve||(_e.expiry_date=$?y0($,1):""),_e})},placeholder:e("workers.details.common.startDate")})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.details.common.endDate")}),r.jsx(ot,{value:ze.expiry_date,onChange:$=>{Le(!0),xt(pe=>({...pe,expiry_date:$}))},placeholder:e("workers.details.common.endDate")}),r.jsx("div",{className:"mt-1 text-[11px] text-gray-500 dark:text-gray-400",children:e("workers.details.common.endDateAutoHelp")})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.details.common.file")}),r.jsxs("label",{className:"flex items-center justify-between border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-xs cursor-pointer hover:border-hse-primary hover:bg-hse-primary/5",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(pr,{className:"w-4 h-4 text-gray-500"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:ze.certificate?ze.certificate.name:e("workers.details.common.choosePdf")})]}),r.jsx("input",{type:"file",accept:"application/pdf",onChange:Q$,className:"hidden"})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t border-gray-100 dark:border-gray-700",children:[r.jsx("button",{type:"button",onClick:S0,className:"btn-outline btn-sm",children:e("common.cancel")}),r.jsxs("button",{type:"submit",disabled:Fe||!ze.exam_nature||!ze.exam_date,className:"btn-primary btn-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[Fe&&r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e("common.save")]})]})]})}),Ne&&r.jsx(nt,{isOpen:Ne,onClose:k0,title:e(Te?"common.edit":"workers.details.trainings.addTitle"),size:"lg",children:r.jsxs("form",{onSubmit:rR,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.details.trainings.type")}),r.jsxs(Ze,{value:be.training_type,onChange:$=>{const pe=$.target.value;$e(_e=>({..._e,training_type:pe}))},children:[r.jsx("option",{value:"",children:e("common.select")}),oj.map($=>r.jsx("option",{value:$.value,children:e($.labelKey)},$.value))]})]}),be.training_type==="other"&&r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.details.trainings.otherLabel")}),r.jsx("input",{className:"input",value:be.training_label,onChange:$=>$e(pe=>({...pe,training_label:$.target.value}))})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.details.common.startDate")}),r.jsx(ot,{value:be.training_date,onChange:$=>{$e(pe=>{const _e={...pe,training_date:$};return Ee||(_e.expiry_date=$?y0($,1):""),_e})},placeholder:e("workers.details.common.startDate")})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.details.common.endDate")}),r.jsx(ot,{value:be.expiry_date,onChange:$=>{Be(!0),$e(pe=>({...pe,expiry_date:$}))},placeholder:e("workers.details.common.endDate")}),r.jsx("div",{className:"mt-1 text-[11px] text-gray-500 dark:text-gray-400",children:e("workers.details.common.endDateAutoHelp")})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("workers.details.common.file")}),r.jsxs("label",{className:"flex items-center justify-between border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-xs cursor-pointer hover:border-hse-primary hover:bg-hse-primary/5",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(pr,{className:"w-4 h-4 text-gray-500"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:be.certificate?be.certificate.name:e("workers.details.common.choosePdf")})]}),r.jsx("input",{type:"file",accept:"application/pdf",onChange:G$,className:"hidden"})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t border-gray-100 dark:border-gray-700",children:[r.jsx("button",{type:"button",onClick:k0,className:"btn-outline btn-sm",children:e("common.cancel")}),r.jsxs("button",{type:"submit",disabled:Ue||!be.training_type||!be.training_date||be.training_type==="other"&&!String(be.training_label??"").trim(),className:"btn-primary btn-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[Ue&&r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e("common.save")]})]})]})}),Me&&r.jsx(nt,{isOpen:!!Me,onClose:QN,title:e("common.view"),size:"xl",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"h-[70vh]",children:Zl?r.jsx("div",{className:"w-full h-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 flex items-center justify-center",children:r.jsx(Re,{className:"w-6 h-6 animate-spin text-hse-primary"})}):Jt?r.jsx("iframe",{src:Jt,title:e("common.view"),className:"w-full h-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white"}):r.jsx("div",{className:"w-full h-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 flex items-center justify-center text-sm text-gray-500 dark:text-gray-400",children:e("errors.somethingWentWrong")})}),typeof Me?.download_url=="string"&&Me.download_url||typeof Me?.certificate_url=="string"&&Me.certificate_url||typeof Me?.document_url=="string"&&Me.document_url?r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{type:"button",className:"btn-primary inline-flex items-center gap-2 text-sm",onClick:()=>Ds(Me.download_url??Me.certificate_url??Me.document_url,"document.pdf"),children:[r.jsx(jr,{className:"w-4 h-4"}),e("common.download")]})}):null]})}),r.jsx(nt,{isOpen:f$,onClose:UN,title:e("workers.massDocs.title"),size:"md",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("workers.massDocs.help")}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("button",{type:"button",onClick:()=>rc("trainings"),className:Fi==="trainings"?"btn-primary btn-sm":"btn-outline btn-sm",children:e("workers.massDocs.categories.trainings")}),r.jsx("button",{type:"button",onClick:()=>rc("qualifications"),className:Fi==="qualifications"?"btn-primary btn-sm":"btn-outline btn-sm",children:e("workers.massDocs.categories.qualifications")}),r.jsx("button",{type:"button",onClick:()=>rc("medical"),className:Fi==="medical"?"btn-primary btn-sm":"btn-outline btn-sm",children:e("workers.massDocs.categories.medical")}),r.jsx("button",{type:"button",onClick:()=>{x&&rc("sanctions")},disabled:!x,className:Fi==="sanctions"?"btn-primary btn-sm":x?"btn-outline btn-sm":"btn-outline btn-sm opacity-50 cursor-not-allowed",children:e("workers.massDocs.categories.sanctions")})]}),Fi==="trainings"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("button",{type:"button",onClick:E$,className:"w-full btn-outline flex items-center justify-center gap-2",children:[r.jsx(Tr,{className:"w-4 h-4"}),e("workers.massDocs.trainings.downloadTemplate")]}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center",children:[r.jsx("input",{ref:i,type:"file",accept:".xlsx,.xls,.csv",onChange:$=>Gv($.target.files?.[0]??null),className:"hidden"}),Su?r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(Tr,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{className:"text-sm font-medium",children:Su.name}),r.jsx("button",{type:"button",onClick:()=>{Gv(null),i.current&&(i.current.value="")},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx(qt,{className:"w-4 h-4"})})]}):r.jsx("button",{type:"button",onClick:()=>i.current?.click(),className:"text-hse-primary hover:underline",children:e("workers.massDocs.trainings.chooseExcel")})]}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center",children:[r.jsx("input",{ref:o,type:"file",accept:".zip,application/zip",onChange:$=>Zv($.target.files?.[0]??null),className:"hidden"}),Yv?r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(vc,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{className:"text-sm font-medium",children:Yv.name}),r.jsx("button",{type:"button",onClick:()=>{Zv(null),o.current&&(o.current.value="")},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx(qt,{className:"w-4 h-4"})})]}):r.jsx("button",{type:"button",onClick:()=>o.current?.click(),className:"text-hse-primary hover:underline",children:e("workers.massDocs.trainings.chooseZip")})]}),qf(IN),r.jsxs("button",{type:"button",onClick:D$,disabled:!Su||Xv,className:"w-full btn-primary flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[Xv&&r.jsx(Re,{className:"w-4 h-4 animate-spin"}),r.jsx($a,{className:"w-4 h-4"}),e("workers.massDocs.trainings.import")]}),ac&&r.jsx("div",{className:"p-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm",children:r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsx("div",{className:"text-gray-700 dark:text-gray-200",children:e("workers.massDocs.trainings.result",{imported:ac?.imported??0,failed:ac?.failed_count??0})}),Array.isArray(ac?.zip_errors)&&ac.zip_errors.length>0?r.jsx("div",{className:"text-xs text-amber-700 dark:text-amber-300",children:e("workers.massDocs.trainings.zipErrorsCount",{count:ac.zip_errors.length})}):null]})})]}),Fi==="qualifications"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("button",{type:"button",onClick:T$,className:"w-full btn-outline flex items-center justify-center gap-2",children:[r.jsx(Tr,{className:"w-4 h-4"}),e("workers.massDocs.qualifications.downloadTemplate")]}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center",children:[r.jsx("input",{ref:l,type:"file",accept:".xlsx,.xls,.csv",onChange:$=>e0($.target.files?.[0]??null),className:"hidden"}),Au?r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(Tr,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{className:"text-sm font-medium",children:Au.name}),r.jsx("button",{type:"button",onClick:()=>{e0(null),l.current&&(l.current.value="")},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx(qt,{className:"w-4 h-4"})})]}):r.jsx("button",{type:"button",onClick:()=>l.current?.click(),className:"text-hse-primary hover:underline",children:e("workers.massDocs.qualifications.chooseExcel")})]}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center",children:[r.jsx("input",{ref:c,type:"file",accept:".zip,application/zip",onChange:$=>t0($.target.files?.[0]??null),className:"hidden"}),Pu?r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(vc,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{className:"text-sm font-medium",children:Pu.name}),r.jsx("button",{type:"button",onClick:()=>{t0(null),c.current&&(c.current.value="")},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx(qt,{className:"w-4 h-4"})})]}):r.jsx("button",{type:"button",onClick:()=>c.current?.click(),className:"text-hse-primary hover:underline",children:e("workers.massDocs.qualifications.chooseZip")})]}),qf($N),r.jsxs("button",{type:"button",onClick:I$,disabled:!Au||!Pu||r0,className:"w-full btn-primary flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[r0&&r.jsx(Re,{className:"w-4 h-4 animate-spin"}),r.jsx($a,{className:"w-4 h-4"}),e("workers.massDocs.qualifications.import")]}),nc&&r.jsx("div",{className:"p-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm",children:r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsx("div",{className:"text-gray-700 dark:text-gray-200",children:e("workers.massDocs.qualifications.result",{imported:nc?.imported??0,failed:nc?.failed_count??0})}),Array.isArray(nc?.zip_errors)&&nc.zip_errors.length>0?r.jsx("div",{className:"text-xs text-amber-700 dark:text-amber-300",children:e("workers.massDocs.qualifications.zipErrorsCount",{count:nc.zip_errors.length})}):null]})})]}),Fi==="medical"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("button",{type:"button",onClick:O$,className:"w-full btn-outline flex items-center justify-center gap-2",children:[r.jsx(Tr,{className:"w-4 h-4"}),e("workers.massDocs.medical.downloadTemplate")]}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center",children:[r.jsx("input",{ref:d,type:"file",accept:".xlsx,.xls,.csv",onChange:$=>s0($.target.files?.[0]??null),className:"hidden"}),Cu?r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(Tr,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{className:"text-sm font-medium",children:Cu.name}),r.jsx("button",{type:"button",onClick:()=>{s0(null),d.current&&(d.current.value="")},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx(qt,{className:"w-4 h-4"})})]}):r.jsx("button",{type:"button",onClick:()=>d.current?.click(),className:"text-hse-primary hover:underline",children:e("workers.massDocs.medical.chooseExcel")})]}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center",children:[r.jsx("input",{ref:u,type:"file",accept:".zip,application/zip",onChange:$=>o0($.target.files?.[0]??null),className:"hidden"}),i0?r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(vc,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{className:"text-sm font-medium",children:i0.name}),r.jsx("button",{type:"button",onClick:()=>{o0(null),u.current&&(u.current.value="")},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx(qt,{className:"w-4 h-4"})})]}):r.jsx("button",{type:"button",onClick:()=>u.current?.click(),className:"text-hse-primary hover:underline",children:e("workers.massDocs.medical.chooseZip")})]}),qf(qN),r.jsxs("button",{type:"button",onClick:L$,disabled:!Cu||l0,className:"w-full btn-primary flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[l0&&r.jsx(Re,{className:"w-4 h-4 animate-spin"}),r.jsx($a,{className:"w-4 h-4"}),e("workers.massDocs.medical.import")]}),sc&&r.jsx("div",{className:"p-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm",children:r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsx("div",{className:"text-gray-700 dark:text-gray-200",children:e("workers.massDocs.medical.result",{imported:sc?.imported??0,failed:sc?.failed_count??0})}),Array.isArray(sc?.zip_errors)&&sc.zip_errors.length>0?r.jsx("div",{className:"text-xs text-amber-700 dark:text-amber-300",children:e("workers.massDocs.medical.zipErrorsCount",{count:sc.zip_errors.length})}):null]})})]}),Fi==="sanctions"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("button",{type:"button",onClick:M$,className:"w-full btn-outline flex items-center justify-center gap-2",children:[r.jsx(Tr,{className:"w-4 h-4"}),e("workers.massDocs.sanctions.downloadTemplate")]}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center",children:[r.jsx("input",{ref:m,type:"file",accept:".xlsx,.xls,.csv",onChange:$=>u0($.target.files?.[0]??null),className:"hidden"}),Eu?r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(Tr,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{className:"text-sm font-medium",children:Eu.name}),r.jsx("button",{type:"button",onClick:()=>{u0(null),m.current&&(m.current.value="")},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx(qt,{className:"w-4 h-4"})})]}):r.jsx("button",{type:"button",onClick:()=>m.current?.click(),className:"text-hse-primary hover:underline",children:e("workers.massDocs.sanctions.chooseExcel")})]}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center",children:[r.jsx("input",{ref:p,type:"file",accept:".zip,application/zip",onChange:$=>m0($.target.files?.[0]??null),className:"hidden"}),Tu?r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(vc,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{className:"text-sm font-medium",children:Tu.name}),r.jsx("button",{type:"button",onClick:()=>{m0(null),p.current&&(p.current.value="")},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx(qt,{className:"w-4 h-4"})})]}):r.jsx("button",{type:"button",onClick:()=>p.current?.click(),className:"text-hse-primary hover:underline",children:e("workers.massDocs.sanctions.chooseZip")})]}),qf(zN),r.jsxs("button",{type:"button",onClick:$$,disabled:!Eu||!Tu||p0,className:"w-full btn-primary flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[p0&&r.jsx(Re,{className:"w-4 h-4 animate-spin"}),r.jsx($a,{className:"w-4 h-4"}),e("workers.massDocs.sanctions.import")]}),ic&&r.jsx("div",{className:"p-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm",children:r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsx("div",{className:"text-gray-700 dark:text-gray-200",children:e("workers.massDocs.sanctions.result",{imported:ic?.imported??0,failed:ic?.failed_count??0})}),Array.isArray(ic?.zip_errors)&&ic.zip_errors.length>0?r.jsx("div",{className:"text-xs text-amber-700 dark:text-amber-300",children:e("workers.massDocs.sanctions.zipErrorsCount",{count:ic.zip_errors.length})}):null]})})]}),r.jsx("div",{className:"flex justify-end gap-3 pt-4 border-t dark:border-gray-700",children:r.jsx("button",{type:"button",onClick:UN,className:"btn-outline",children:e("common.cancel")})})]})}),r.jsx(nt,{isOpen:p$,onClose:()=>Tf(!1),title:e("workers.importTitle"),size:"md",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("workers.importHelp")}),r.jsxs("button",{onClick:C$,className:"w-full btn-outline flex items-center justify-center gap-2",children:[r.jsx(Tr,{className:"w-4 h-4"}),e("workers.downloadTemplate")]}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center",children:[r.jsx("input",{ref:s,type:"file",accept:".xlsx,.xls,.csv",onChange:$=>Of($.target.files[0]),className:"hidden"}),Nu?r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(Tr,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{className:"text-sm font-medium",children:Nu.name}),r.jsx("button",{type:"button",onClick:()=>Of(null),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:r.jsx(qt,{className:"w-4 h-4"})})]}):r.jsx("button",{type:"button",onClick:()=>s.current?.click(),className:"text-hse-primary hover:underline",children:e("workers.selectFile")})]}),r.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg text-sm text-amber-700 dark:text-amber-300",children:r.jsx("p",{children:e("workers.cinInfo")})}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t dark:border-gray-700",children:[r.jsx("button",{type:"button",onClick:()=>{Tf(!1),Of(null)},className:"btn-outline",children:e("common.cancel")}),r.jsxs("button",{type:"button",onClick:q$,disabled:!Nu||ON,className:"btn-primary flex items-center gap-2",children:[ON&&r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e("workers.import")]})]})]})}),r.jsx(la,{isOpen:!!oc,title:e("common.confirm"),message:oc?e("workers.confirmDeactivate",{name:`${oc.prenom} ${oc.nom}`}):"",confirmLabel:e("workers.deactivate"),cancelLabel:e("common.cancel"),variant:"danger",onConfirm:S$,onCancel:()=>g0(null)}),r.jsx(la,{isOpen:v$,title:e("common.confirm"),message:e("workers.confirmBulkDeactivate",{count:Wo.length}),confirmLabel:e("workers.bulkDeactivate"),cancelLabel:e("common.cancel"),variant:"danger",onConfirm:P$,onCancel:()=>$f(!1)})]})}const Pwe=Object.freeze(Object.defineProperty({__proto__:null,default:Awe},Symbol.toStringTag,{value:"Module"}));function Cwe(){const{t:e}=ut(),{user:t}=At(),a=Se=>{if(!Se)return null;const Me=/filename\*=UTF-8''([^;]+)|filename="?([^";]+)"?/i.exec(Se),vt=decodeURIComponent(Me?.[1]??Me?.[2]??"");return vt!==""?vt:null},n=Se=>{let Me=String(Se||"").replace(/^https?:\/\/[^/]+/i,"");return Me?(Me.startsWith("/api/")?Me=Me.replace(/^\/api\//,"/"):Me==="/api"&&(Me="/"),Me):null},s=(Se,Me)=>{const vt=URL.createObjectURL(Se),Jt=document.createElement("a");Jt.href=vt,Jt.download=Me??"template.xlsx",document.body.appendChild(Jt),Jt.click(),Jt.remove(),setTimeout(()=>URL.revokeObjectURL(vt),5e3)},i=async(Se,Me)=>{const vt=n(Se);if(!vt)return;const Jt=await de.get(vt,{responseType:"blob"}),ua=a(Jt.headers?.["content-disposition"])??Me;s(Jt.data,ua)},[o,l]=f.useState([]),[c,d]=f.useState(!0),[u,m]=f.useState(""),p=t?.role==="admin"||t?.role==="dev"||t?.role==="hse_manager"||t?.role==="regional_hse_manager"||t?.role==="hse_director",x=!!u&&!(u==="all"),[h,v]=f.useState([]),[b,y]=f.useState(!0),[j,_]=f.useState(""),[w,k]=f.useState(""),[N,P]=f.useState(!1),[A,M]=f.useState(null),[R,O]=f.useState(!1),[q,S]=f.useState({name:""}),[I,E]=f.useState(null),[W,B]=f.useState(!1),[C,D]=f.useState(!1),[z,L]=f.useState(!1),[X,H]=f.useState({ppe_item_id:"",ppe_other:"",quantity:1,low_stock_threshold:""}),[F,ke]=f.useState(!1),[ae,ue]=f.useState(!1),[Z,me]=f.useState({worker_query:"",worker_id:"",worker_label:"",ppe_item_id:"",ppe_other:"",quantity:1,received_at:""}),[ge,se]=f.useState(!1),[he,T]=f.useState([]),oe=f.useRef(0),[G,V]=f.useState(!1),Y=f.useRef(null),[ce,je]=f.useState(!1),[re,U]=f.useState(null),[xe,J]=f.useState(!1),Q=f.useRef(null),ne=t?.role==="admin"||t?.role==="dev",[ee,ye]=f.useState(!1),[te,Ne]=f.useState([]),[Ce,Ue]=f.useState(""),[fe,Te]=f.useState(""),[we,Ee]=f.useState(""),[Be,be]=f.useState([]),[$e,Ve]=f.useState([]),[_t,bt]=f.useState(!1),Pt=f.useMemo(()=>{if(!Array.isArray($e)||$e.length===0||!Array.isArray(Be)||Be.length===0)return!1;const Se=new Set($e.map(vt=>String(vt?.id)).filter(vt=>vt&&vt!=="undefined"&&vt!=="null")),Me=new Set(Be.map(vt=>String(vt?.id)).filter(vt=>vt&&vt!=="undefined"&&vt!=="null"));if(Se.size===0||Me.size!==Se.size)return!1;for(const vt of Se)if(!Me.has(vt))return!1;return!0},[$e,Be]),It=()=>{if(_t)return;if(Pt){be([]);return}const Se=($e??[]).filter(Me=>Me&&Me.id!=null).map(Me=>({id:Me.id,name:Me.name}));be(Se),Ee("")},Ct=f.useMemo(()=>!Ce||!o.some(Me=>Me&&Object.prototype.hasOwnProperty.call(Me,"pole"))?o:o.filter(Me=>String(Me.pole??"")===String(Ce)),[Ce,o]),Yt=async()=>{try{ye(!0),Ue(""),Te(""),Ee(""),be([]),Ve([]),bt(!0);const Se=await it.getPoles(),Me=Se?.data?.data?.poles??Se?.data?.poles??[];Ne(Array.isArray(Me)?Me:[]);const vt=await Ha.getItems({}),Jt=vt?.data?.data??vt?.data??[];Ve(Array.isArray(Jt)?Jt:[])}catch{Ne([]),Ve([])}bt(!1)},Ar=()=>{if(!we)return;const Se=$e.find(Me=>String(Me.id)===String(we));Se&&(be(Me=>Me.some(vt=>String(vt.id)===String(Se.id))?Me:[...Me,{id:Se.id,name:Se.name}]),Ee(""))},lt=Se=>{be(Me=>Me.filter(vt=>String(vt.id)!==String(Se)))},Ft=()=>{if(!fe){K.error(e("ppe.pendingValidation.projectRequired"));return}if(Be.length===0){K.error(e("ppe.pendingValidation.itemsRequired"));return}const Se=Be.map(vt=>vt.id).join(","),Me=`/admin/ppe/pending-validation-report?project_id=${encodeURIComponent(String(fe))}&item_ids=${encodeURIComponent(Se)}`;window.open(Me,"_blank","noopener,noreferrer")};f.useEffect(()=>{const Se=setTimeout(()=>k(j.trim()),300);return()=>clearTimeout(Se)},[j]),f.useEffect(()=>{const Se=Me=>{const vt=Me.target;!Y.current||!(vt instanceof Node)||Y.current.contains(vt)||V(!1)};return document.addEventListener("mousedown",Se),()=>document.removeEventListener("mousedown",Se)},[]),f.useEffect(()=>{(async()=>{try{d(!0);const Me=await it.getAllList({status:"active"});l(Array.isArray(Me)?Me:[]),!u&&Array.isArray(Me)&&Me.length===1&&m(String(Me[0].id))}catch(Me){l([]),K.error(Me.response?.data?.message??e("errors.somethingWentWrong"))}finally{d(!1)}})()},[]);const Pr=async()=>{try{if(y(!0),!u){v([]);return}const Se=await Ha.getItems({project_id:x?Number(u):void 0,search:w||void 0});v(Se.data?.data??[])}catch(Se){v([]),K.error(Se.response?.data?.message??e("errors.somethingWentWrong"))}finally{y(!1)}};f.useEffect(()=>{Pr()},[w,u]);const an=()=>{M(null),S({name:""}),P(!0)},Fe=Se=>{M(Se),S({name:Se?.name??""}),P(!0)},Ge=()=>{P(!1),M(null),S({name:""})},gt=async Se=>{Se.preventDefault();try{O(!0);const Me={id:A?.id,name:q.name};await Ha.upsertItem(Me),K.success(e("success.saved")),Ge(),await Pr()}catch(Me){K.error(Me.response?.data?.message??e("errors.somethingWentWrong"))}finally{O(!1)}},cr=Se=>{E(Se)},ve=async()=>{if(I)try{B(!0),await Ha.deleteItem(I.id),K.success(e("success.deleted")),E(null),await Pr()}catch(Se){K.error(Se.response?.data?.message??e("errors.somethingWentWrong"))}finally{B(!1)}},Le=()=>{if(!x){K.error(e("ppe.projectRequired"));return}ke(!0),me({worker_query:"",worker_id:"",worker_label:"",ppe_item_id:"",ppe_other:"",quantity:1,received_at:""}),T([])},ze=()=>{ke(!1),me({worker_query:"",worker_id:"",worker_label:"",ppe_item_id:"",ppe_other:"",quantity:1,received_at:""}),T([])},xt=async Se=>{const Me=String(Se??"").trim();if(!Me){T([]);return}const vt=++oe.current;try{se(!0);const Jt=await Wa.getAll({search:Me,project_id:x?Number(u):void 0,is_active:!0,per_page:10});if(vt!==oe.current)return;const ua=Jt.data?.data?.data??[];T(Array.isArray(ua)?ua:[])}catch{if(vt!==oe.current)return;T([])}finally{vt===oe.current&&se(!1)}};f.useEffect(()=>{const Se=setTimeout(()=>{xt(Z.worker_query)},350);return()=>clearTimeout(Se)},[Z.worker_query]);const rr=async Se=>{if(Se.preventDefault(),!Z.worker_id){K.error(e("ppe.issue.chooseWorker"));return}if(!Z.ppe_item_id&&!Z.ppe_other.trim()){K.error(e("ppe.issue.chooseItem"));return}try{ue(!0);const Me={worker_id:Number(Z.worker_id),ppe_item_id:Z.ppe_item_id?Number(Z.ppe_item_id):void 0,ppe_name:Z.ppe_item_id?void 0:Z.ppe_other.trim(),quantity:Number(Z.quantity??1),received_at:Z.received_at};await Ha.issueToWorker(Me),K.success(e("ppe.issue.success")),ze(),await Pr()}catch(Me){K.error(Me.response?.data?.message??e("errors.somethingWentWrong"))}finally{ue(!1)}},Sa=!!t,nn=f.useMemo(()=>[...h].sort((Se,Me)=>String(Se.name??"").localeCompare(String(Me.name??""))),[h]),ts=()=>{if(!x){K.error(e("ppe.projectRequired"));return}U(null),Q.current&&(Q.current.value=""),je(!0)},da=async()=>{try{const Se=await Ha.downloadMassTemplate(),Me=a(Se.headers?.["content-disposition"])??"ppe_issues_mass_template.xlsx";s(Se.data,Me)}catch(Se){K.error(Se.response?.data?.message??e("common.downloadTemplateFailed"))}},Js=async()=>{if(!re){K.error(e("common.chooseFile"));return}try{J(!0);const Se=await Ha.massImport({excel:re}),Me=Se.data?.data??Se.data,vt=Me?.imported??0,Jt=Me?.updated??0,ua=Me?.errors??[],Zl=Me?.failed_rows_url;if(K.success(e("common.importSummary",{imported:vt,updated:Jt})),Array.isArray(ua)&&ua.length>0&&K.error(e("common.importIssues",{count:ua.length})),Zl)try{await i(Zl,"ppe_issues_failed_rows.xlsx")}catch{}je(!1),U(null),Q.current&&(Q.current.value=""),await Pr()}catch(Se){K.error(Se.response?.data?.message??e("common.importFailed"))}finally{J(!1)}};return r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"card p-4 overflow-visible",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ni,{className:"w-5 h-5 text-hse-primary"}),r.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e("ppe.title")})]}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:e("ppe.subtitle")})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs("div",{className:"relative",ref:Y,children:[r.jsxs("button",{type:"button",className:"btn-outline btn-sm flex items-center gap-2",onClick:()=>V(Se=>!Se),disabled:!Sa,children:[r.jsx(vc,{className:"w-4 h-4"}),e("ppe.issue.button"),r.jsx(Vr,{className:"w-4 h-4"})]}),G&&r.jsxs("div",{className:"absolute right-0 mt-2 w-56 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 shadow-lg z-50 overflow-hidden",children:[r.jsx("button",{type:"button",className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>{V(!1),Le()},children:e("ppe.issue.menuManual")}),r.jsx("button",{type:"button",className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>{V(!1),ts()},children:e("ppe.issue.menuImport")})]})]}),ne&&r.jsxs("button",{type:"button",className:"btn-outline btn-sm flex items-center gap-2",onClick:Yt,children:[r.jsx(Ra,{className:"w-4 h-4"}),e("ppe.pendingValidation.button")]}),r.jsxs("button",{type:"button",className:"btn-primary btn-sm flex items-center gap-2",onClick:an,disabled:!Sa,children:[r.jsx(_n,{className:"w-4 h-4"}),e("ppe.items.add")]})]})]})}),r.jsx("div",{className:"card p-3",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2",children:[r.jsxs("div",{className:"w-full md:max-w-md",children:[r.jsx("label",{className:"label text-xs",children:e("ppe.project")}),r.jsxs(Ze,{value:u,onChange:Se=>m(Se.target.value),disabled:c,children:[r.jsx("option",{value:"",children:e("common.select")}),p&&r.jsx("option",{value:"all",children:e("common.allProjects")}),o.map(Se=>r.jsx("option",{value:Se.id,children:Se.code?`${Se.code} - ${Se.name}`:Se.name},Se.id))]})]}),r.jsx("div",{className:"flex-1"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:r.jsx("button",{type:"button",className:"btn-outline btn-sm",onClick:()=>{if(!x){K.error(e("ppe.projectRequired"));return}H({ppe_item_id:"",ppe_other:"",quantity:1,low_stock_threshold:""}),D(!0)},disabled:!Sa,children:e("ppe.restock.button")})})]})}),r.jsx("div",{className:"card p-3 overflow-visible",children:r.jsx("div",{className:"flex flex-col md:flex-row md:items-center gap-2",children:r.jsxs("div",{className:"relative w-full md:max-w-md",children:[r.jsx(Yr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{className:"input pl-9 py-1.5 text-sm",value:j,onChange:Se=>_(Se.target.value),placeholder:e("common.search")})]})})}),r.jsx("div",{className:"card overflow-hidden",children:u?b?r.jsx("div",{className:"p-6 flex items-center justify-center",children:r.jsx(Re,{className:"w-6 h-6 animate-spin text-hse-primary"})}):nn.length===0?r.jsx("div",{className:"p-6 text-sm text-gray-600 dark:text-gray-300",children:e("common.noData")}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 text-left",children:[r.jsx("th",{className:"py-3 px-4 font-medium text-gray-500 dark:text-gray-400",children:e("ppe.items.name")}),r.jsx("th",{className:"py-3 px-4 font-medium text-gray-500 dark:text-gray-400",children:e("ppe.items.stock")}),r.jsx("th",{className:"py-3 px-4 font-medium text-gray-500 dark:text-gray-400",children:e("ppe.items.threshold")}),r.jsx("th",{className:"py-3 px-4 font-medium text-gray-500 dark:text-gray-400",children:e("common.actions")})]})}),r.jsx("tbody",{children:nn.map(Se=>r.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[r.jsx("td",{className:"py-3 px-4 text-gray-900 dark:text-gray-100",children:Se.name}),r.jsx("td",{className:"py-3 px-4 text-gray-700 dark:text-gray-200 font-mono",children:Se.stock_quantity??0}),r.jsx("td",{className:"py-3 px-4 text-gray-700 dark:text-gray-200 font-mono",children:Se.low_stock_threshold??0}),r.jsx("td",{className:"py-3 px-4",children:r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs("button",{type:"button",className:"btn-outline btn-sm flex items-center gap-2",onClick:()=>Fe(Se),children:[r.jsx(Mm,{className:"w-4 h-4"}),e("common.edit")]}),r.jsxs("button",{type:"button",className:"btn-danger btn-sm flex items-center gap-2",onClick:()=>cr(Se),children:[r.jsx(Nt,{className:"w-4 h-4"}),e("common.delete")]})]})})]},Se.id))})]})}):r.jsx("div",{className:"p-6 text-sm text-gray-600 dark:text-gray-300",children:e("ppe.projectRequired")})}),N&&r.jsx(nt,{isOpen:N,onClose:Ge,title:e(A?"ppe.items.edit":"ppe.items.add"),size:"lg",children:r.jsxs("form",{onSubmit:gt,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("ppe.items.name")}),r.jsx("input",{className:"input",value:q.name,onChange:Se=>S(Me=>({...Me,name:Se.target.value})),required:!0})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:Ge,children:e("common.cancel")}),r.jsx("button",{type:"submit",className:"btn-primary",disabled:R,children:e(R?"common.saving":"common.save")})]})]})}),ce&&r.jsx(nt,{isOpen:ce,onClose:()=>je(!1),title:e("common.import"),size:"lg",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-200",children:[r.jsx(Tr,{className:"w-4 h-4 text-hse-primary"}),r.jsx("div",{children:e("ppe.note")})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsx("button",{type:"button",onClick:da,className:"btn-secondary",disabled:xe,children:e("common.downloadTemplate")}),r.jsxs("label",{className:"flex items-center justify-between border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-xs cursor-pointer hover:border-hse-primary hover:bg-hse-primary/5",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx($a,{className:"w-4 h-4 text-gray-500"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:re?re.name:e("common.chooseFile")})]}),r.jsx("input",{ref:Q,type:"file",accept:".xlsx,.xls",className:"hidden",onChange:Se=>U(Se.target.files?.[0]??null)})]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>je(!1),disabled:xe,children:e("common.cancel")}),r.jsx("button",{type:"button",className:"btn-primary",onClick:Js,disabled:xe,children:e(xe?"common.importing":"common.import")})]})]})}),ee&&r.jsx(nt,{isOpen:ee,onClose:()=>ye(!1),title:e("ppe.pendingValidation.title"),size:"xl",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("ppe.pendingValidation.pole")}),r.jsxs(Ze,{value:Ce,onChange:Se=>{const Me=Se.target.value;Ue(Me),Te("")},children:[r.jsx("option",{value:"",children:e("common.select")}),te.map(Se=>r.jsx("option",{value:String(Se),children:String(Se)},String(Se)))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("ppe.pendingValidation.project")}),r.jsxs(Ze,{value:fe,onChange:Se=>Te(Se.target.value),children:[r.jsx("option",{value:"",children:e("common.select")}),Ct.map(Se=>r.jsx("option",{value:Se.id,children:Se.code?`${Se.code} - ${Se.name}`:Se.name},Se.id))]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("ppe.pendingValidation.articles")}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"inline-flex items-center gap-2 text-xs text-gray-700 dark:text-gray-200 select-none",children:[r.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:Pt,onChange:It,disabled:_t||$e.length===0}),r.jsx("span",{children:e("common.all")})]}),r.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[r.jsxs(Ze,{value:we,onChange:Se=>Ee(Se.target.value),disabled:Pt,children:[r.jsx("option",{value:"",children:e("common.select")}),_t&&r.jsx("option",{value:"",disabled:!0,children:e("common.loading")}),$e.slice().sort((Se,Me)=>String(Se?.name??"").localeCompare(String(Me?.name??""))).map(Se=>r.jsx("option",{value:Se.id,children:Se.name},Se.id))]}),r.jsx("button",{type:"button",className:"btn-secondary",onClick:Ar,disabled:Pt,children:e("common.add")})]})]})]}),Be.length>0&&r.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 p-3",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-200 mb-2",children:e("ppe.pendingValidation.selected")}),r.jsx("div",{className:"flex flex-wrap gap-2",children:Be.map(Se=>r.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-xs border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:[r.jsx("span",{className:"text-gray-800 dark:text-gray-100",children:Se.name}),r.jsx("button",{type:"button",className:"p-1 rounded-full hover:bg-gray-200/60 dark:hover:bg-gray-700",onClick:()=>lt(Se.id),"aria-label":e("common.remove"),children:r.jsx(qt,{className:"w-3.5 h-3.5"})})]},String(Se.id)))})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>ye(!1),children:e("common.cancel")}),r.jsx("button",{type:"button",className:"btn-primary",onClick:Ft,children:e("ppe.pendingValidation.viewReport")})]})]})}),C&&r.jsx(nt,{isOpen:C,onClose:()=>D(!1),title:e("ppe.restock.title"),size:"lg",children:r.jsxs("form",{onSubmit:async Se=>{if(Se.preventDefault(),!x){K.error(e("ppe.projectRequired"));return}if(!X.ppe_item_id&&!X.ppe_other.trim()){K.error(e("ppe.restock.chooseItem"));return}try{L(!0),await Ha.restock({project_id:Number(u),ppe_item_id:X.ppe_item_id?Number(X.ppe_item_id):void 0,ppe_name:X.ppe_item_id?void 0:X.ppe_other.trim(),quantity:Number(X.quantity??1),low_stock_threshold:String(X.low_stock_threshold??"").trim()!==""?Number(X.low_stock_threshold):void 0}),K.success(e("success.saved")),D(!1),await Pr()}catch(Me){K.error(Me.response?.data?.message??e("errors.somethingWentWrong"))}finally{L(!1)}},className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("ppe.restock.item")}),r.jsxs(Ze,{value:X.ppe_item_id,onChange:Se=>H(Me=>({...Me,ppe_item_id:Se.target.value,ppe_other:""})),children:[r.jsx("option",{value:"",children:e("ppe.issue.other")}),nn.map(Se=>r.jsxs("option",{value:Se.id,children:[Se.name," (",Se.stock_quantity??0,")"]},Se.id))]}),!X.ppe_item_id&&r.jsxs("div",{className:"mt-2",children:[r.jsx("label",{className:"label text-xs",children:e("ppe.issue.otherSpecify")}),r.jsx("input",{className:"input",value:X.ppe_other,onChange:Se=>H(Me=>({...Me,ppe_other:Se.target.value})),placeholder:e("ppe.issue.otherPlaceholder")})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("ppe.restock.quantity")}),r.jsx("input",{type:"number",min:1,className:"input",value:X.quantity,onChange:Se=>H(Me=>({...Me,quantity:Se.target.value})),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("ppe.restock.threshold")}),r.jsx("input",{type:"number",min:0,className:"input",value:X.low_stock_threshold,onChange:Se=>H(Me=>({...Me,low_stock_threshold:Se.target.value})),placeholder:e("ppe.restock.thresholdPlaceholder")})]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>D(!1),children:e("common.cancel")}),r.jsx("button",{type:"submit",className:"btn-primary",disabled:z,children:e(z?"common.saving":"ppe.restock.submit")})]})]})}),I&&r.jsx(nt,{isOpen:!!I,onClose:()=>E(null),title:e("common.confirm"),size:"md",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-200",children:e("ppe.items.confirmDelete",{name:I.name})}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>E(null),children:e("common.cancel")}),r.jsx("button",{type:"button",className:"btn-danger",onClick:ve,disabled:W,children:e(W?"common.deleting":"common.delete")})]})]})}),F&&r.jsx(nt,{isOpen:F,onClose:ze,title:e("ppe.issue.title"),size:"xl",children:r.jsxs("form",{onSubmit:rr,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"label",children:e("ppe.issue.worker")}),r.jsx("input",{className:"input",value:Z.worker_query,onChange:Se=>me(Me=>({...Me,worker_query:Se.target.value,worker_id:"",worker_label:""})),placeholder:e("ppe.issue.workerSearchPlaceholder")}),Z.worker_query.trim()&&!Z.worker_id&&r.jsx("div",{className:"mt-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 overflow-hidden",children:ge?r.jsx("div",{className:"px-3 py-2 text-xs text-gray-500",children:"..."}):he.length===0?r.jsx("div",{className:"px-3 py-2 text-xs text-gray-500",children:e("common.noData")}):r.jsx("div",{className:"max-h-56 overflow-auto",children:he.map(Se=>r.jsxs("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>{me(Me=>({...Me,worker_id:String(Se.id),worker_label:`${Se.full_name}${Se.cin?` (${Se.cin})`:""}`,worker_query:`${Se.full_name}${Se.cin?` (${Se.cin})`:""}`})),T([])},children:[r.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:Se.full_name}),r.jsxs("div",{className:"text-[11px] text-gray-500 dark:text-gray-400",children:[Se.cin??""," ",Se.fonction?` ${Se.fonction}`:""]})]},Se.id))})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("ppe.issue.item")}),r.jsxs(Ze,{value:Z.ppe_item_id,onChange:Se=>me(Me=>({...Me,ppe_item_id:Se.target.value,ppe_other:""})),children:[r.jsx("option",{value:"",children:e("ppe.issue.other")}),nn.map(Se=>r.jsxs("option",{value:Se.id,children:[Se.name," (",Se.stock_quantity??0,")"]},Se.id))]}),!Z.ppe_item_id&&r.jsxs("div",{className:"mt-2",children:[r.jsx("label",{className:"label text-xs",children:e("ppe.issue.otherSpecify")}),r.jsx("input",{className:"input",value:Z.ppe_other,onChange:Se=>me(Me=>({...Me,ppe_other:Se.target.value})),placeholder:e("ppe.issue.otherPlaceholder")})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("ppe.issue.quantity")}),r.jsx("input",{type:"number",min:1,className:"input",value:Z.quantity,onChange:Se=>me(Me=>({...Me,quantity:Se.target.value})),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("ppe.issue.receivedAt")}),r.jsx(ot,{value:Z.received_at,onChange:Se=>me(Me=>({...Me,received_at:Se})),required:!0})]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:ze,children:e("common.cancel")}),r.jsx("button",{type:"submit",className:"btn-primary",disabled:ae,children:e(ae?"common.saving":"ppe.issue.submit")})]})]})}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("ppe.note")})]})}const Ewe=Object.freeze(Object.defineProperty({__proto__:null,default:Cwe},Symbol.toStringTag,{value:"Module"}));function Twe(){const{t:e,language:t}=ut(),a=Zr(),n=f.useMemo(()=>new URLSearchParams(a.search||""),[a.search]),s=n.get("project_id")||"",i=n.get("item_ids")||"",[o,l]=f.useState(!0),[c,d]=f.useState(!1),[u,m]=f.useState(null),[p,g]=f.useState(!1),[x,h]=f.useState(!1),[v,b]=f.useState(null),[y,j]=f.useState([]),_=async()=>{if(!s||!i){m(null),l(!1);return}try{l(!0);const A=await Ha.getPendingValidationReport({project_id:Number(s),item_ids:i});m(A.data?.data??A.data)}catch(A){m(null),K.error(A.response?.data?.message??e("errors.failedToLoad"))}finally{l(!1)}};f.useEffect(()=>{_()},[s,i]);const w=async A=>{if(!(!A?.item_id||!s))try{b(A),g(!0),h(!0);const M=await Ha.getPendingValidationDetails({project_id:Number(s),item_id:Number(A.item_id)}),R=M.data?.data??M.data;j(Array.isArray(R?.rows)?R.rows:[])}catch(M){j([]),K.error(M.response?.data?.message??e("errors.failedToLoad"))}finally{h(!1)}},k=async()=>{if(!(!s||!i))try{d(!0);const A=await Ha.downloadPendingValidationReport({project_id:Number(s),item_ids:i,lang:t==="fr"?"fr":"en"}),M=A.data,R=URL.createObjectURL(M),O=document.createElement("a");O.href=R;const q=A.headers?.["content-disposition"],S=/filename\*=UTF-8''([^;]+)|filename="?([^";]+)"?/i.exec(q||""),I=decodeURIComponent(S?.[1]??S?.[2]??"");O.download=I!==""?I:`ppe_pending_validation_${s}.pdf`,document.body.appendChild(O),O.click(),O.remove(),setTimeout(()=>URL.revokeObjectURL(R),5e3)}catch(A){K.error(A.response?.data?.message??e("errors.failedToExport"))}finally{d(!1)}};if(o)return r.jsx("div",{className:"card p-6 flex items-center justify-center",children:r.jsx(Re,{className:"w-6 h-6 animate-spin text-hse-primary"})});if(!u)return r.jsx("div",{className:"card p-6 text-sm text-gray-600 dark:text-gray-300",children:e("ppe.pendingValidation.missingParams")});const N=u?.project??{},P=Array.isArray(u?.rows)?u.rows:[];return r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"card p-4",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-3",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e("ppe.pendingValidation.reportTitle")}),r.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-200",children:[r.jsxs("div",{children:[r.jsxs("span",{className:"font-medium",children:[e("ppe.pendingValidation.projectName"),":"]})," ",N.name??""]}),r.jsxs("div",{children:[r.jsxs("span",{className:"font-medium",children:[e("ppe.pendingValidation.projectPole"),":"]})," ",N.pole??""]}),r.jsxs("div",{children:[r.jsxs("span",{className:"font-medium",children:[e("ppe.pendingValidation.hseManagerName"),":"]})," ",N.hse_manager_name??"-"]}),r.jsxs("div",{children:[r.jsxs("span",{className:"font-medium",children:[e("ppe.pendingValidation.hseManagerEmail"),":"]})," ",N.hse_manager_email??"-"]}),r.jsxs("div",{className:"inline-flex items-center gap-2 mt-1",children:[r.jsx(sa,{className:"w-4 h-4 text-gray-500"}),r.jsxs("span",{className:"text-sm",children:[r.jsxs("span",{className:"font-medium",children:[e("ppe.pendingValidation.currentWorkers"),":"]})," ",N.current_total_workers??0]})]})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{type:"button",className:"btn-outline btn-sm flex items-center gap-2",onClick:k,disabled:c,children:[c?r.jsx(Re,{className:"w-4 h-4 animate-spin"}):r.jsx(jr,{className:"w-4 h-4"}),e("ppe.pendingValidation.downloadReport")]})})]})}),r.jsx("div",{className:"card overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 text-left",children:[r.jsx("th",{className:"py-3 px-4 font-medium text-gray-500 dark:text-gray-400",children:e("ppe.pendingValidation.table.article")}),r.jsx("th",{className:"py-3 px-4 font-medium text-gray-500 dark:text-gray-400",children:e("ppe.pendingValidation.table.currentStock")}),r.jsx("th",{className:"py-3 px-4 font-medium text-gray-500 dark:text-gray-400",children:e("ppe.pendingValidation.table.week")}),r.jsx("th",{className:"py-3 px-4 font-medium text-gray-500 dark:text-gray-400",children:e("ppe.pendingValidation.table.month")}),r.jsx("th",{className:"py-3 px-4 font-medium text-gray-500 dark:text-gray-400",children:e("ppe.pendingValidation.table.names")})]})}),r.jsxs("tbody",{children:[P.map(A=>r.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[r.jsx("td",{className:"py-3 px-4 text-gray-900 dark:text-gray-100",children:A.article??A.item_name??""}),r.jsx("td",{className:"py-3 px-4 font-mono text-gray-700 dark:text-gray-200",children:A.current_stock??0}),r.jsx("td",{className:"py-3 px-4 font-mono text-gray-700 dark:text-gray-200",children:A.distributed_last_week??0}),r.jsx("td",{className:"py-3 px-4 font-mono text-gray-700 dark:text-gray-200",children:A.distributed_last_month??0}),r.jsx("td",{className:"py-3 px-4",children:r.jsx("button",{type:"button",className:"btn-outline btn-sm",onClick:()=>w(A),children:e("ppe.pendingValidation.viewNames")})})]},String(A.item_id))),P.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"py-6 px-4 text-sm text-gray-600 dark:text-gray-300",children:e("common.noData")})})]})]})})}),p&&r.jsx(nt,{isOpen:p,onClose:()=>{g(!1),b(null),j([])},title:e("ppe.pendingValidation.detailsTitle",{article:v?.article??v?.item_name??""}),size:"xl",children:x?r.jsx("div",{className:"flex items-center justify-center p-6",children:r.jsx(Re,{className:"w-6 h-6 animate-spin text-hse-primary"})}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 text-left",children:[r.jsx("th",{className:"py-3 px-4 font-medium text-gray-500 dark:text-gray-400",children:e("ppe.pendingValidation.details.cin")}),r.jsx("th",{className:"py-3 px-4 font-medium text-gray-500 dark:text-gray-400",children:e("ppe.pendingValidation.details.name")}),r.jsx("th",{className:"py-3 px-4 font-medium text-gray-500 dark:text-gray-400",children:e("ppe.pendingValidation.details.quantity")}),r.jsx("th",{className:"py-3 px-4 font-medium text-gray-500 dark:text-gray-400",children:e("ppe.pendingValidation.details.date")})]})}),r.jsxs("tbody",{children:[y.map((A,M)=>r.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[r.jsx("td",{className:"py-3 px-4 font-mono text-gray-700 dark:text-gray-200",children:A.cin??""}),r.jsx("td",{className:"py-3 px-4 text-gray-900 dark:text-gray-100",children:A.name??""}),r.jsx("td",{className:"py-3 px-4 font-mono text-gray-700 dark:text-gray-200",children:A.quantity??0}),r.jsx("td",{className:"py-3 px-4 font-mono text-gray-700 dark:text-gray-200",children:A.date??""})]},`${String(A.cin??"")}-${String(A.date??"")}-${M}`)),y.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"py-6 px-4 text-sm text-gray-600 dark:text-gray-300",children:e("common.noData")})})]})]})})})]})}const Owe=Object.freeze(Object.defineProperty({__proto__:null,default:Twe},Symbol.toStringTag,{value:"Module"})),Mwe={reminder:"Reminder"},Dwe=e=>{const t={kpi_submitted:{icon:Xt,color:"text-blue-500",bg:"bg-blue-100 dark:bg-blue-900/30"},kpi_approved:{icon:Xt,color:"text-green-500",bg:"bg-green-100 dark:bg-green-900/30"},kpi_rejected:{icon:Zn,color:"text-red-500",bg:"bg-red-100 dark:bg-red-900/30"},project_assigned:{icon:hn,color:"text-purple-500",bg:"bg-purple-100 dark:bg-purple-900/30"},sor_submitted:{icon:Qt,color:"text-orange-500",bg:"bg-orange-100 dark:bg-orange-900/30"},sor_corrected:{icon:Xt,color:"text-green-500",bg:"bg-green-100 dark:bg-green-900/30"},training_submitted:{icon:Xt,color:"text-indigo-500",bg:"bg-indigo-100 dark:bg-indigo-900/30"},awareness_submitted:{icon:Xt,color:"text-teal-500",bg:"bg-teal-100 dark:bg-teal-900/30"},reminder:{icon:oa,color:"text-yellow-500",bg:"bg-yellow-100 dark:bg-yellow-900/30"},system:{icon:vl,color:"text-gray-500",bg:"bg-gray-100 dark:bg-gray-700"},info:{icon:vl,color:"text-blue-500",bg:"bg-blue-100 dark:bg-blue-900/30"},warning:{icon:Qt,color:"text-yellow-500",bg:"bg-yellow-100 dark:bg-yellow-900/30"},success:{icon:Xt,color:"text-green-500",bg:"bg-green-100 dark:bg-green-900/30"},error:{icon:Zn,color:"text-red-500",bg:"bg-red-100 dark:bg-red-900/30"}};return t[e]||t.info};function Iwe(){const{t:e}=ut(),[t,a]=f.useState([]),[n,s]=f.useState(!0),[i,o]=f.useState("all");f.useEffect(()=>{(async()=>{try{s(!0);const p=await zn.getAll({per_page:50});a(p.data.data||[])}catch(p){console.error("Failed to load notifications",p)}finally{s(!1)}})()},[]);const l=async m=>{if(!m.read_at)try{await zn.markAsRead(m.id),a(p=>p.map(g=>g.id===m.id?{...g,read_at:new Date().toISOString()}:g))}catch(p){console.error("Failed to mark notification as read",p)}},c=async()=>{try{await zn.markAllAsRead(),a(m=>m.map(p=>({...p,read_at:new Date().toISOString()})))}catch(m){console.error("Failed to mark all notifications as read",m)}},d=async()=>{try{await zn.deleteRead(),a(m=>m.filter(p=>!p.read_at))}catch(m){console.error("Failed to clear read notifications",m)}},u=f.useMemo(()=>t.filter(m=>!(i==="unread"&&m.read_at||i==="reminders"&&m.type!=="reminder")),[t,i]);return r.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 animate-fade-in",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:[e("nav.dashboard")," / ",e("notifications.title")]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e("notifications.title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"View all alerts, reminders, and system messages related to your HSE activity."})]}),r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"card-header flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(vl,{className:"w-5 h-5 text-hse-primary"}),r.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:e("notifications.title")}),r.jsx("span",{className:"badge badge-info",children:t.length})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[r.jsx("button",{type:"button",onClick:()=>o("all"),className:`px-2 py-1 rounded-full border text-xs ${i==="all"?"bg-hse-primary text-white border-hse-primary":"border-gray-300 text-gray-600 dark:border-gray-600 dark:text-gray-300"}`,children:"All"}),r.jsx("button",{type:"button",onClick:()=>o("unread"),className:`px-2 py-1 rounded-full border text-xs ${i==="unread"?"bg-hse-primary text-white border-hse-primary":"border-gray-300 text-gray-600 dark:border-gray-600 dark:text-gray-300"}`,children:"Unread"}),r.jsxs("button",{type:"button",onClick:()=>o("reminders"),className:`px-2 py-1 rounded-full border text-xs flex items-center gap-1 ${i==="reminders"?"bg-hse-primary text-white border-hse-primary":"border-gray-300 text-gray-600 dark:border-gray-600 dark:text-gray-300"}`,children:[r.jsx(oa,{className:"w-3 h-3"}),"Reminders"]}),r.jsx("span",{className:"hidden sm:inline-flex h-4 w-px bg-gray-200 dark:bg-gray-700"}),r.jsx("button",{type:"button",onClick:c,className:"text-xs text-hse-primary hover:underline",children:e("notifications.markAllRead")}),r.jsxs("button",{type:"button",onClick:d,className:"inline-flex items-center gap-1 text-xs text-red-600 dark:text-red-400 hover:underline",children:[r.jsx(Nt,{className:"w-3 h-3"}),"Clear read"]})]})]}),n?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Re,{className:"w-6 h-6 animate-spin text-hse-primary"})}):u.length===0?r.jsxs("div",{className:"py-12 text-center text-gray-500 dark:text-gray-400",children:[r.jsx(vl,{className:"w-10 h-10 mx-auto mb-3 text-gray-300 dark:text-gray-600"}),r.jsx("p",{className:"text-sm",children:e("notifications.noNotifications")})]}):r.jsx("div",{className:"max-h-[70vh] overflow-y-auto divide-y divide-gray-100 dark:divide-gray-700",children:u.map(m=>{const p=Dwe(m.type),g=p.icon,x=!m.read_at;return r.jsxs("div",{className:`px-4 py-3 flex gap-3 items-start ${x?"bg-blue-50/40 dark:bg-blue-900/10":"bg-white dark:bg-gray-800"}`,children:[r.jsx("div",{className:`w-9 h-9 rounded-full ${p.bg} flex items-center justify-center flex-shrink-0`,children:r.jsx(g,{className:`w-4 h-4 ${p.color}`})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsx("p",{className:`text-sm ${x?"font-semibold":"font-medium"} text-gray-900 dark:text-gray-100`,children:m.title}),x&&r.jsx("button",{type:"button",onClick:()=>l(m),className:"text-xs text-hse-primary hover:underline flex-shrink-0",children:e("notifications.markRead")})]}),m.message&&r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 mt-1",children:m.message}),m.project&&r.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1 flex items-center gap-1",children:[r.jsx(hn,{className:"w-3 h-3"}),m.project.name]}),r.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:[new Date(m.created_at).toLocaleDateString()," ",new Date(m.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),m.type==="reminder"&&r.jsxs("p",{className:"text-[11px] text-amber-700 dark:text-amber-300 mt-1",children:[Mwe.reminder,": pending KPI or SOR action."]})]})]},m.id)})})]})]})}const Lwe=Object.freeze(Object.defineProperty({__proto__:null,default:Iwe},Symbol.toStringTag,{value:"Module"})),JE={green:"bg-green-500",yellow:"bg-amber-500",red:"bg-red-500"};function $we(){const{t:e}=ut(),{user:t}=At(),a=Tn(),n=Zr(),[s,i]=f.useState([]),[o,l]=f.useState(""),[c,d]=f.useState([]),[u,m]=f.useState([]),[p,g]=f.useState(!1),[x,h]=f.useState(""),[v,b]=f.useState(!1),[y,j]=f.useState(!1),_=t?.project_list_preference??"code",w=f.useMemo(()=>Ir(s,_),[s,_]),[k,N]=f.useState(""),[P,A]=f.useState(""),[M,R]=f.useState(""),[O,q]=f.useState("");f.useEffect(()=>{const D=new URLSearchParams(n.search).get("project_id");D&&l(D)},[n.search]),f.useEffect(()=>{(async()=>{try{const[D,z]=await Promise.all([it.getAllList({status:"active"}),Wa.getEntreprises()]);i(Array.isArray(D)?D:[]),d(z.data?.data??[])}catch(D){console.error("Failed to load subcontractor openings bootstrap data",D)}})()},[]);const S=f.useMemo(()=>{if(!x.trim())return u;const C=x.trim().toLowerCase();return u.filter(D=>(D.contractor_name??"").toLowerCase().includes(C))},[u,x]),I=async()=>{try{g(!0);const C={};o&&(C.project_id=o);const z=(await Vc.getAll(C)).data,L=z.data??z;m(Array.isArray(L)?L:L.data??[])}catch(C){console.error("Failed to load subcontractor openings",C),K.error(C.response?.data?.message??e("errors.somethingWentWrong")??"Failed to load")}finally{g(!1)}};f.useEffect(()=>{I()},[o]);const E=async(C,D)=>{if(window.confirm(e("subcontractors.confirmDeleteOpening",{name:D})))try{await Vc.delete(C),K.success(e("subcontractors.openingDeleted")),I()}catch(L){console.error("Failed to delete opening",L),K.error(L.response?.data?.message??e("errors.somethingWentWrong")??"Failed to delete")}},W=async C=>{C.preventDefault();const D=k==="__other__"?P.trim():k;if(!(!o||!D)){j(!0);try{const z=await Vc.create({project_id:o,contractor_name:D,work_type:M.trim()?M.trim():void 0,contractor_start_date:O||void 0});K.success(e("subcontractors.openingCreated")),b(!1),N(""),A(""),R(""),q("");const L=z.data?.data??z.data;if(L?.id){a(`/subcontractors/openings/${L.id}`);return}I()}catch(z){console.error("Failed to create opening",z),K.error(z.response?.data?.message??e("errors.somethingWentWrong")??"Failed to create")}finally{j(!1)}}},B=f.useMemo(()=>{const C=[...S];return C.sort((D,z)=>{const L=(D.contractor_name??"").trim().toLowerCase()==="sgtm",X=(z.contractor_name??"").trim().toLowerCase()==="sgtm";return L===X?(D.contractor_name??"").localeCompare(z.contractor_name??""):L?-1:1}),C},[S]);return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:[e("nav.dashboard")," / ",e("subcontractors.title")]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e("subcontractors.title")}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("subcontractors.subtitle")})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[r.jsxs(Ze,{value:o,onChange:C=>l(C.target.value),className:"min-w-[220px]",children:[r.jsx("option",{value:"",children:e("workers.allProjects")}),w.map(C=>r.jsx("option",{value:C.id,children:Wt(C)},C.id))]}),r.jsxs("button",{type:"button",onClick:()=>b(!0),className:"btn-primary flex items-center gap-2",disabled:!o,title:o?"":e("subcontractors.chooseProjectFirst"),children:[r.jsx(_n,{className:"w-4 h-4"}),e("subcontractors.addOpening")]})]})]}),r.jsx("div",{className:"card p-3",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[r.jsxs("div",{className:"md:col-span-2 relative",children:[r.jsx(Yr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",value:x,onChange:C=>h(C.target.value),placeholder:e("subcontractors.searchPlaceholder"),className:"input pl-9"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[r.jsx(ki,{className:"w-4 h-4"}),r.jsx("span",{children:e("subcontractors.companiesCount",{count:B.length})})]})]})}),p?r.jsx("div",{className:"flex items-center justify-center py-10",children:r.jsx(Re,{className:"w-6 h-6 animate-spin text-hse-primary"})}):B.length===0?r.jsxs("div",{className:"card p-8 text-center",children:[r.jsx(Mo,{className:"w-10 h-10 text-gray-300 dark:text-gray-700 mx-auto mb-3"}),r.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:e("subcontractors.noCompanies")}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("subcontractors.noCompaniesHelp")})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:B.map(C=>{const D=JE[C.status]??JE.red,z=C.documents_uploaded??0,L=C.required_documents_count??0,X=C.expired_documents??[],H=C.expiring_documents??[],F=X.length>0||H.length>0,ke=C.project?.name??"",ae=C.status==="green"?e("subcontractors.statusSummary.green"):C.status==="yellow"?e("subcontractors.statusSummary.yellow"):e("subcontractors.statusSummary.red");return r.jsxs("div",{role:"button",tabIndex:0,onClick:()=>a(`/subcontractors/openings/${C.id}`),onKeyDown:ue=>{ue.key==="Enter"&&a(`/subcontractors/openings/${C.id}`)},className:"card p-4 text-left hover:shadow-md transition-shadow cursor-pointer",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:C.contractor_name}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("subcontractors.cardMeta",{project:ke,start:C.contractor_start_date??"",workers:C.workers_count??0})}),C.work_type&&r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e("subcontractors.workType"),": ",C.work_type]})]}),r.jsxs("div",{className:"relative flex items-center gap-2",children:[r.jsxs("div",{className:"relative group",children:[r.jsx("span",{className:`w-3 h-3 rounded-full ${D} block`}),F&&r.jsx("div",{className:"pointer-events-none absolute right-0 top-5 hidden group-hover:block z-50",children:r.jsxs("div",{className:"w-[360px] max-w-[80vw] rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 shadow-lg p-3",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-900 dark:text-gray-100 mb-2",children:e("subcontractors.popoverTitle")}),X.length>0&&r.jsxs("div",{className:"mb-2",children:[r.jsx("div",{className:"text-[11px] font-semibold text-red-600 dark:text-red-300 mb-1",children:e("subcontractors.expired")}),r.jsxs("div",{className:"space-y-1",children:[X.slice(0,6).map(ue=>r.jsxs("div",{className:"text-[11px] text-gray-700 dark:text-gray-200",children:[r.jsx("span",{className:"font-medium",children:ue.label}),r.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["  ",ue.expiry_date]})]},ue.key)),X.length>6&&r.jsx("div",{className:"text-[11px] text-gray-500 dark:text-gray-400",children:e("subcontractors.othersCount",{count:X.length-6})})]})]}),H.length>0&&r.jsxs("div",{children:[r.jsx("div",{className:"text-[11px] font-semibold text-amber-600 dark:text-amber-300 mb-1",children:e("subcontractors.expiring")}),r.jsxs("div",{className:"space-y-1",children:[H.slice(0,6).map(ue=>r.jsxs("div",{className:"text-[11px] text-gray-700 dark:text-gray-200",children:[r.jsx("span",{className:"font-medium",children:ue.label}),r.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["  ",ue.expiry_date]})]},ue.key)),H.length>6&&r.jsx("div",{className:"text-[11px] text-gray-500 dark:text-gray-400",children:e("subcontractors.othersCount",{count:H.length-6})})]})]})]})})]}),r.jsx("button",{type:"button",className:"btn-outline btn-sm",onClick:ue=>{ue.stopPropagation(),E(C.id,C.contractor_name)},title:e("common.delete"),children:r.jsx(Nt,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"mt-3",children:[r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 dark:text-gray-300",children:[r.jsx("span",{children:e("subcontractors.documentsCount",{uploaded:z,required:L})}),r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:ae})]}),r.jsx("div",{className:"mt-2 h-2 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-hse-primary",style:{width:L>0?`${Math.min(100,z/L*100)}%`:"0%"}})})]})]},C.id)})}),v&&r.jsx(nt,{isOpen:v,onClose:()=>b(!1),title:e("subcontractors.newOpening"),size:"lg",children:r.jsxs("form",{onSubmit:W,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("subcontractors.company")}),r.jsxs(Ze,{value:k,onChange:C=>N(C.target.value),children:[r.jsx("option",{value:"",children:e("common.select")}),c.map(C=>r.jsx("option",{value:C,children:C},C)),r.jsx("option",{value:"__other__",children:e("subcontractors.other")})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("subcontractors.workType")}),r.jsx("input",{type:"text",className:"input",value:M,onChange:C=>R(C.target.value),placeholder:e("subcontractors.workTypePlaceholder")})]}),k==="__other__"&&r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("subcontractors.newCompany")}),r.jsx("input",{type:"text",className:"input",value:P,onChange:C=>A(C.target.value),placeholder:e("subcontractors.companyPlaceholder")})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("subcontractors.startDate")}),r.jsx(ot,{value:O,onChange:q,placeholder:e("datePicker.select")})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t border-gray-100 dark:border-gray-700",children:[r.jsx("button",{type:"button",className:"btn-outline",onClick:()=>b(!1),children:e("common.cancel")}),r.jsxs("button",{type:"submit",className:"btn-primary flex items-center gap-2",disabled:y||!o||!(k==="__other__"?P.trim():k),children:[y&&r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e("common.create")]})]})]})})]})}const Rwe=Object.freeze(Object.defineProperty({__proto__:null,default:$we},Symbol.toStringTag,{value:"Module"})),eT={valid:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300",expiring:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300",expired:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300",no_expiry:"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300",no_file:"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300"},qwe={valid:Xt,expiring:Qt,expired:Zn};function Fwe(){const{t:e}=ut(),t=Zr(),a=Tn(),{id:n}=As(),[s,i]=f.useState(!1),[o,l]=f.useState(!1),[c,d]=f.useState(null),[u,m]=f.useState([]),[p,g]=f.useState(null),[x,h]=f.useState(null),[v,b]=f.useState(null),[y,j]=f.useState(!1),[_,w]=f.useState(null),[k,N]=f.useState(""),[P,A]=f.useState(""),M=H=>!H||typeof H!="string"?null:H.startsWith("/api/")?H.slice(4):H.startsWith("api/")?H.slice(3):H,R=H=>{if(!H)return null;const F=/filename\*=UTF-8''([^;]+)|filename="?([^";]+)"?/i.exec(H),ke=decodeURIComponent(F?.[1]??F?.[2]??"");return ke!==""?ke:null},O=(H,F)=>{const ke=URL.createObjectURL(H),ae=document.createElement("a");ae.href=ke,ae.download=F??"document.pdf",document.body.appendChild(ae),ae.click(),ae.remove(),setTimeout(()=>URL.revokeObjectURL(ke),5e3)},q=async()=>{try{i(!0);const F=(await Vc.getById(n)).data,ke=F.data??F;d(ke.opening),m(ke.documents??[])}catch(H){console.error("Failed to load opening details",H),K.error(H.response?.data?.message??e("errors.somethingWentWrong")??"Failed to load")}finally{i(!1)}},S=async H=>{if(H?.file_view_url)try{h(H),j(!0),v&&(URL.revokeObjectURL(v),b(null));const F=M(H.file_view_url),ae=(await de.get(F,{responseType:"blob"})).data,ue=URL.createObjectURL(ae);b(ue)}catch(F){console.error("Failed to preview PDF",F),K.error(F.response?.data?.message??e("errors.somethingWentWrong")??"Failed to preview"),h(null)}finally{j(!1)}},I=()=>{h(null),j(!1),v&&(URL.revokeObjectURL(v),b(null))},E=async H=>{if(H?.file_download_url)try{const F=M(H.file_download_url),ke=await de.get(F,{responseType:"blob"}),ue=R(ke.headers?.["content-disposition"])??`${H.document_key??"document"}.pdf`;O(ke.data,ue)}catch(F){console.error("Failed to download PDF",F),K.error(F.response?.data?.message??e("errors.somethingWentWrong")??"Failed to download")}};f.useEffect(()=>{q()},[n]),f.useEffect(()=>()=>{v&&URL.revokeObjectURL(v)},[v]);const W=f.useMemo(()=>{if(!c)return"";const H=c.project?.name?`  ${c.project.name}`:"";return`${c.contractor_name}${H}`},[c]),B=H=>{const F=H.target.files?.[0];if(!F){w(null);return}if(F.type!=="application/pdf"){K.error(e("subcontractors.pdfOnly")??"PDF only");return}w(F)},C=H=>{g(H),w(null),N(H.start_date??""),A(H.expiry_date??"")},D=()=>{g(null),w(null),N(""),A("")},z=async H=>{if(H.preventDefault(),!(!c||!p||!_)){l(!0);try{const ke=(await Vc.uploadDocument(c.id,{document_key:p.document_key,document_label:p.document_label,start_date:k||void 0,expiry_date:P||void 0,file:_})).data,ue=(ke.data??ke).document;ue?.was_compressed&&ue.file_size&&ue.compressed_size?K.success(e("subcontractors.documentSavedCompressed",{original:X(ue.file_size),compressed:X(ue.compressed_size)})):ue?.file_size?K.success(e("subcontractors.documentSavedWithSize",{size:X(ue.file_size)})):K.success(e("subcontractors.documentSaved")),D(),q()}catch(F){console.error("Upload failed",F),K.error(F.response?.data?.message??e("subcontractors.uploadFailed")??"Upload failed")}finally{l(!1)}}},L=async()=>{if(!(!c||!window.confirm(e("subcontractors.confirmDeleteOpening",{name:c.contractor_name}))))try{await Vc.delete(c.id),K.success(e("subcontractors.openingDeleted"));const F=(t.pathname??"").startsWith("/admin");a(F?"/admin/subcontractors":"/subcontractors",{replace:!0})}catch(F){console.error("Failed to delete opening",F),K.error(F.response?.data?.message??e("errors.somethingWentWrong")??"Failed to delete")}};if(s||!c)return r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Re,{className:"w-6 h-6 animate-spin text-hse-primary"})});function X(H){if(H==null||Number.isNaN(Number(H)))return"";const F=Number(H);if(F<1024)return`${F} B`;const ke=F/1024;if(ke<1024)return`${ke.toFixed(1)} KB`;const ae=ke/1024;return ae<1024?`${ae.toFixed(2)} MB`:`${(ae/1024).toFixed(2)} GB`}return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:[e("nav.dashboard")," / ",e("subcontractors.title")," / ",e("subcontractors.opening")]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Mo,{className:"w-5 h-5 text-hse-primary"}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 truncate",children:W})]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:e("subcontractors.openingSummary",{start:c.contractor_start_date??"",workers:c.workers_count??0,uploaded:c.documents_uploaded??0,required:c.required_documents_count??0})}),c.work_type&&r.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1 text-sm",children:[e("subcontractors.workType"),": ",c.work_type]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs("button",{type:"button",className:"btn-outline flex items-center gap-2",onClick:()=>a(-1),children:[r.jsx(Tl,{className:"w-4 h-4"}),e("common.back")]}),r.jsxs("button",{type:"button",className:"btn-outline flex items-center gap-2 text-red-600 dark:text-red-400 border-red-200 dark:border-red-800 hover:bg-red-50 dark:hover:bg-red-900/20",onClick:L,children:[r.jsx(Nt,{className:"w-4 h-4"}),e("common.delete")]})]})]}),r.jsx("div",{className:"card p-4",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-xs",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 text-left",children:[r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("subcontractors.table.document")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("subcontractors.table.startDate")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("subcontractors.table.expiryDate")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("common.status")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("subcontractors.table.file")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("common.actions")})]})}),r.jsx("tbody",{children:u.map(H=>{const F=H.status??(H.expiry_date?"valid":"no_expiry"),ke=eT[F]??eT.no_file,ae=qwe[F],ue=e(`subcontractors.docStatus.${F}`);return r.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[r.jsx("td",{className:"py-2 pr-3 text-gray-900 dark:text-gray-100",children:H.document_label}),r.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200",children:H.start_date??""}),r.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200",children:H.expiry_date??""}),r.jsx("td",{className:"py-2 pr-3",children:r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[11px] ${ke}`,children:[ae&&r.jsx(ae,{className:"w-3 h-3"}),ue]})}),r.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200",children:H.file_view_url?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{type:"button",className:"text-[11px] text-hse-primary hover:underline",onClick:()=>S(H),children:e("common.view")}),r.jsxs("button",{type:"button",onClick:()=>E(H),className:"text-[11px] text-gray-500 hover:underline flex items-center gap-1",children:[r.jsx(jr,{className:"w-3 h-3"}),e("common.download")]}),(H.file_size!=null||H.compressed_size!=null)&&r.jsx("span",{className:"text-[11px] text-gray-400 dark:text-gray-500",children:H.was_compressed&&H.file_size&&H.compressed_size?`${X(H.file_size)}  ${X(H.compressed_size)}`:H.file_size?X(H.file_size):X(H.compressed_size)})]}):r.jsx("span",{className:"text-[11px] text-gray-400"})}),r.jsx("td",{className:"py-2 pr-3",children:r.jsxs("button",{type:"button",className:"btn-outline btn-sm flex items-center gap-2",onClick:()=>C(H),children:[r.jsx($a,{className:"w-4 h-4"}),H.file_view_url?e("subcontractors.replace"):e("subcontractors.add")]})})]},H.document_key)})})]})})}),p&&r.jsx(nt,{isOpen:!!p,onClose:D,title:e("subcontractors.uploadTitle",{label:p.document_label}),size:"xl",children:r.jsxs("form",{onSubmit:z,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("subcontractors.table.startDate")}),r.jsx(ot,{value:k,onChange:N,placeholder:e("datePicker.select")})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("subcontractors.table.expiryDate")}),r.jsx(ot,{value:P,onChange:A,placeholder:e("datePicker.select")})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("subcontractors.pdfFile")}),r.jsxs("label",{className:"flex items-center justify-between border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-xs cursor-pointer hover:border-hse-primary hover:bg-hse-primary/5",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(pr,{className:"w-4 h-4 text-gray-500"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:_?_.name:e("subcontractors.choosePdf")})]}),r.jsx("input",{type:"file",accept:"application/pdf",onChange:B,className:"hidden"})]}),r.jsx("p",{className:"text-[11px] text-gray-500 dark:text-gray-400 mt-2",children:e("subcontractors.compressionHint")})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t border-gray-100 dark:border-gray-700",children:[r.jsx("button",{type:"button",className:"btn-outline",onClick:D,children:e("common.cancel")}),r.jsxs("button",{type:"submit",className:"btn-primary flex items-center gap-2",disabled:o||!_,children:[o&&r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e("subcontractors.send")]})]})]})}),x&&r.jsx(nt,{isOpen:!!x,onClose:I,title:e("subcontractors.viewDocument"),size:"xl",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"h-[70vh]",children:y?r.jsx("div",{className:"w-full h-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 flex items-center justify-center",children:r.jsx(Re,{className:"w-6 h-6 animate-spin text-hse-primary"})}):v?r.jsx("iframe",{src:v,title:e("subcontractors.viewDocument"),className:"w-full h-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white"}):r.jsx("div",{className:"w-full h-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 flex items-center justify-center text-sm text-gray-500 dark:text-gray-400",children:e("errors.somethingWentWrong")})}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{type:"button",onClick:()=>E(x),className:"btn-primary inline-flex items-center gap-2 text-sm",children:[r.jsx(jr,{className:"w-4 h-4"}),e("common.download")]})})]})})]})}const zwe=Object.freeze(Object.defineProperty({__proto__:null,default:Fwe},Symbol.toStringTag,{value:"Module"})),Bwe=typeof document<"u"?document.body:null,Wwe={zIndex:9999,pointerEvents:"none"};function Uwe(){const{t:e}=ut(),t=f.useCallback(E=>{if(!E)return"-";const B=String(E).split("T")[0],C=new Date(`${B}T00:00:00`);if(Number.isNaN(C.getTime()))return B;const D=String(C.getDate()).padStart(2,"0"),z=String(C.getMonth()+1).padStart(2,"0"),L=String(C.getFullYear());return`${D}/${z}/${L}`},[]),{user:a}=At(),{fetchProjects:n}=bf(),[s,i]=f.useState([]),[o,l]=f.useState(!1),[c,d]=f.useState(""),[u,m]=f.useState(()=>{const E=new Date,W=E.getFullYear(),B=String(E.getMonth()+1).padStart(2,"0"),C=String(E.getDate()).padStart(2,"0");return`${W}-${B}-${C}`}),[p,g]=f.useState(""),[x,h]=f.useState(!1),[v,b]=f.useState(!1),[y,j]=f.useState(""),[_,w]=f.useState(""),[k,N]=f.useState([]),[P,A]=f.useState(!1),M=a?.project_list_preference||"code";f.useEffect(()=>{let E=!0;return(async()=>{l(!0);try{const B=await n({},{force:!0});if(!E)return;i(Array.isArray(B)?B:[])}catch{if(!E)return;i([]),K.error(e("effectif.loadProjectsFailed"))}finally{E&&l(!1)}})(),()=>{E=!1}},[n,e]);const R=f.useMemo(()=>Ir(s,M),[s,M]),O=f.useMemo(()=>c?R.find(E=>String(E.id)===String(c))??null:null,[R,c]);f.useEffect(()=>{if(!c||!u){g("");return}let E=!0;return(async()=>{h(!0);try{const B=await Kc.entry({project_id:c,entry_date:u});if(!E)return;const C=B.data?.data?.entry;g(C?.effectif!=null?String(C.effectif):"")}catch{if(!E)return;g("")}finally{E&&h(!1)}})(),()=>{E=!1}},[c,u]);const q=f.useCallback(async()=>{if(!c){N([]);return}A(!0);try{const E={project_id:c};y&&(E.from_date=y),_&&(E.to_date=_);const B=(await Kc.list(E)).data?.data?.entries??[];N(Array.isArray(B)?B:[])}catch{N([]),K.error(e("effectif.loadFailed"))}finally{A(!1)}},[c,y,_,e]);f.useEffect(()=>{q()},[q]);const S=async()=>{if(!c){K.error(e("effectif.projectRequired"));return}if(!u){K.error(e("effectif.dateRequired"));return}const E=p===""?null:Number(p);if(E===null||Number.isNaN(E)||E<0){K.error(e("effectif.effectifInvalid"));return}b(!0);try{await Kc.upsert({project_id:c,entry_date:u,effectif:E}),K.success(e("effectif.saveSuccess")),q()}catch{K.error(e("effectif.saveFailed"))}finally{b(!1)}},I=f.useMemo(()=>[...Array.isArray(k)?k:[]].sort((B,C)=>String(B?.entry_date??"").localeCompare(String(C?.entry_date??""))).map(B=>({entry_date:String(B?.entry_date??""),effectif:Number(B?.effectif??0)})),[k]);return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:[e("nav.dashboard")," / ",e("effectif.title")]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e("effectif.title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:e("effectif.subtitleHr")})]}),r.jsxs("div",{className:"card p-4",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:e("effectif.whySubmitTitle")}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e("effectif.whySubmitBody")})]}),r.jsxs("div",{className:"card p-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("effectif.project")}),r.jsxs(Ze,{value:c,onChange:E=>d(E.target.value),disabled:o,children:[r.jsx("option",{value:"",children:e("common.select")}),R.map(E=>r.jsx("option",{value:String(E.id),children:Wt(E)},E.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("effectif.date")}),r.jsx(ot,{value:u,onChange:E=>m(E),placeholder:e("effectif.date")})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("effectif.effectif")}),r.jsx("input",{type:"number",min:"0",step:"1",className:"input",value:p,onChange:E=>g(E.target.value),disabled:!c||!u||x,placeholder:e("effectif.effectifPlaceholder")}),x?r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("common.loading")}):null]})]}),r.jsx("div",{className:"flex justify-end mt-4",children:r.jsx("button",{type:"button",className:"btn-primary",onClick:S,disabled:v||o,children:e(v?"common.saving":"common.save")})})]}),r.jsxs("div",{className:"card p-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:e("effectif.subtitleAnalytics")}),r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e("effectif.project")," : ",O?Wt(O):"-"]})]}),r.jsxs("div",{className:"w-full sm:w-40",children:[r.jsx("label",{className:"label text-xs",children:e("effectif.fromDate")}),r.jsx(ot,{value:y,onChange:E=>j(E),placeholder:e("effectif.fromDate")})]}),r.jsxs("div",{className:"w-full sm:w-40",children:[r.jsx("label",{className:"label text-xs",children:e("effectif.toDate")}),r.jsx(ot,{value:_,onChange:E=>w(E),placeholder:e("effectif.toDate")})]}),r.jsx("button",{type:"button",className:"btn-secondary w-full sm:w-auto",onClick:q,disabled:P||!c,children:e(P?"common.loading":"common.refresh")})]}),r.jsx("div",{className:"h-64 mt-4",children:P?r.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:e("common.loading")}):I.length>0?r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Ci,{data:I,children:[r.jsx(jt,{strokeDasharray:"3 3",className:"dark:opacity-20"}),r.jsx(ct,{dataKey:"entry_date",tick:{fontSize:12},className:"dark:text-gray-400",tickFormatter:t}),r.jsx(rt,{tick:{fontSize:12},className:"dark:text-gray-400"}),r.jsx(tt,{labelFormatter:E=>t(E),allowEscapeViewBox:{x:!0,y:!0},portal:Bwe,wrapperStyle:Wwe}),r.jsx(Kt,{type:"monotone",dataKey:"effectif",stroke:"#16a34a",name:e("effectif.effectif"),strokeWidth:2,dot:!1})]})}):r.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:e(c?"common.noData":"effectif.projectRequired")})}),r.jsx("div",{className:"mt-4 overflow-x-auto",children:r.jsxs("table",{className:"table w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:e("effectif.date")}),r.jsx("th",{children:e("effectif.effectif")})]})}),r.jsx("tbody",{children:(Array.isArray(k)?k:[]).slice(0,50).map(E=>r.jsxs("tr",{children:[r.jsx("td",{children:t(E?.entry_date)}),r.jsx("td",{children:E?.effectif??"-"})]},`${E?.project_id??""}-${String(E?.entry_date??"")}`))})]})})]})]})}const Hwe=Object.freeze(Object.defineProperty({__proto__:null,default:Uwe},Symbol.toStringTag,{value:"Module"})),tT=typeof document<"u"?document.body:null,rT={zIndex:9999,pointerEvents:"none"};function Kwe(){const{t:e}=ut(),t=f.useCallback(L=>{if(!L)return"-";const H=String(L).split("T")[0],F=new Date(`${H}T00:00:00`);if(Number.isNaN(F.getTime()))return H;const ke=String(F.getDate()).padStart(2,"0"),ae=String(F.getMonth()+1).padStart(2,"0"),ue=String(F.getFullYear());return`${ke}/${ae}/${ue}`},[]),{user:a}=At(),{fetchProjects:n}=bf(),[s,i]=f.useState([]),[o,l]=f.useState([]),[c,d]=f.useState(!1),[u,m]=f.useState(""),[p,g]=f.useState(""),[x,h]=f.useState(""),[v,b]=f.useState(""),[y,j]=f.useState([]),[_,w]=f.useState(!1),[k,N]=f.useState([]),[P,A]=f.useState(!1),[M,R]=f.useState([]),[O,q]=f.useState(!1),S=a?.project_list_preference||"code";f.useEffect(()=>{let L=!0;return(async()=>{d(!0);try{const[H,F]=await Promise.all([it.getPoles(),n({},{force:!0})]);if(!L)return;const ke=H.data?.data?.poles||H.data?.poles||[];i(Array.isArray(ke)?ke:[]),l(Array.isArray(F)?F:[])}catch{if(!L)return;i([]),l([]),K.error(e("effectif.loadFailed"))}finally{L&&d(!1)}})(),()=>{L=!1}},[n,e]);const I=f.useMemo(()=>{const L=Ir(o,S);return u?L.filter(X=>String(X?.pole??"")===u):L},[u,o,S]),E=f.useCallback(async()=>{w(!0);try{const L={};x&&(L.from_date=x),v&&(L.to_date=v),u&&(L.pole=u),p&&(L.project_id=p);const H=(await Kc.series(L)).data?.data?.series||[];j(Array.isArray(H)?H:[])}catch{j([]),K.error(e("effectif.loadFailed"))}finally{w(!1)}},[x,v,u,p,e]),W=f.useCallback(async()=>{A(!0);try{const L={limit:200};x&&(L.from_date=x),v&&(L.to_date=v),u&&(L.pole=u),p&&(L.project_id=p);const H=(await Kc.history(L)).data?.data?.entries||[];N(Array.isArray(H)?H:[])}catch{N([]),K.error(e("effectif.loadFailed"))}finally{A(!1)}},[x,v,u,p,e]),B=f.useCallback(async()=>{q(!0);try{const L={};x&&(L.from_date=x),v&&(L.to_date=v),u&&(L.pole=u),p&&(L.project_id=p);const H=(await Kc.byProject(L)).data?.data?.projects||[];R(Array.isArray(H)?H:[])}catch{R([]),K.error(e("effectif.loadFailed"))}finally{q(!1)}},[x,v,u,p,e]),C=f.useCallback(()=>{E(),W(),B()},[E,W,B]);f.useEffect(()=>{E()},[E]),f.useEffect(()=>{W()},[W]),f.useEffect(()=>{B()},[B]);const D=f.useMemo(()=>(Array.isArray(y)?y:[]).map(L=>({entry_date:L.entry_date,total_effectif:Number(L.total_effectif??0)})),[y]),z=f.useMemo(()=>(Array.isArray(M)?M:[]).map(L=>{const X=String(L?.project_code??"").trim(),H=String(L?.project_name??"").trim();return{project:X&&H?`${X} - ${H}`:X||H||String(L?.project_id??""),total_effectif:Number(L?.total_effectif??0)}}),[M]);return f.useEffect(()=>{u&&p&&(I.some(X=>String(X.id)===String(p))||g(""))},[u,p,I]),r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:[e("nav.dashboard")," / ",e("effectif.title")]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e("effectif.title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:e("effectif.subtitleAnalytics")})]}),r.jsx("div",{className:"card p-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap gap-4",children:[r.jsxs("div",{className:"w-full sm:w-44",children:[r.jsx("label",{className:"label text-xs",children:e("effectif.pole")}),r.jsxs(Ze,{value:u,onChange:L=>{m(L.target.value),g("")},disabled:c,children:[r.jsx("option",{value:"",children:e("common.allPoles")}),s.map(L=>r.jsx("option",{value:L,children:L},L))]})]}),r.jsxs("div",{className:"w-full sm:flex-1 sm:min-w-[180px]",children:[r.jsx("label",{className:"label text-xs",children:e("effectif.project")}),r.jsxs(Ze,{value:p,onChange:L=>g(L.target.value),disabled:c,children:[r.jsx("option",{value:"",children:e("common.allProjects")}),I.map(L=>r.jsx("option",{value:String(L.id),children:Wt(L)},L.id))]})]}),r.jsxs("div",{className:"w-full sm:w-40",children:[r.jsx("label",{className:"label text-xs",children:e("effectif.fromDate")}),r.jsx(ot,{value:x,onChange:L=>h(L),placeholder:e("effectif.fromDate")})]}),r.jsxs("div",{className:"w-full sm:w-40",children:[r.jsx("label",{className:"label text-xs",children:e("effectif.toDate")}),r.jsx(ot,{value:v,onChange:L=>b(L),placeholder:e("effectif.toDate")})]}),r.jsx("div",{className:"w-full sm:w-auto sm:self-end",children:r.jsx("button",{type:"button",className:"btn-primary",onClick:C,disabled:_||P||O,children:e(_||P||O?"common.loading":"common.refresh")})})]})}),r.jsx("div",{className:"card p-4",children:r.jsx("div",{className:"h-80",children:_?r.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:e("common.loading")}):D.length>0?r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Ci,{data:D,children:[r.jsx(jt,{strokeDasharray:"3 3",className:"dark:opacity-20"}),r.jsx(ct,{dataKey:"entry_date",tick:{fontSize:12},className:"dark:text-gray-400",tickFormatter:t}),r.jsx(rt,{tick:{fontSize:12},className:"dark:text-gray-400"}),r.jsx(tt,{labelFormatter:L=>t(L),allowEscapeViewBox:{x:!0,y:!0},portal:tT,wrapperStyle:rT}),r.jsx(Kt,{type:"monotone",dataKey:"total_effectif",stroke:"#16a34a",name:e("effectif.effectif"),strokeWidth:2,dot:!1})]})}):r.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:e("common.noData")})})}),r.jsxs("div",{className:"card p-4",children:[r.jsxs("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:[e("effectif.effectif")," ",e("common.by")," ",e("effectif.project")]}),r.jsx("div",{className:"h-80 mt-3",children:O?r.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:e("common.loading")}):z.length>0?r.jsx(ht,{width:"100%",height:"100%",children:r.jsxs(Rr,{data:z,children:[r.jsx(jt,{strokeDasharray:"3 3",className:"dark:opacity-20"}),r.jsx(ct,{dataKey:"project",tick:{fontSize:11},interval:0,angle:-15,textAnchor:"end",height:60}),r.jsx(rt,{tick:{fontSize:12}}),r.jsx(tt,{allowEscapeViewBox:{x:!0,y:!0},portal:tT,wrapperStyle:rT}),r.jsx(aa,{}),r.jsx(pt,{dataKey:"total_effectif",fill:"#16a34a",name:e("effectif.effectif")})]})}):r.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:e("common.noData")})})]}),r.jsxs("div",{className:"card p-4",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:e("common.history")??"History"}),r.jsx("div",{className:"mt-3 overflow-x-auto",children:r.jsxs("table",{className:"table w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:e("effectif.date")}),r.jsx("th",{children:e("effectif.project")}),r.jsx("th",{children:e("effectif.effectif")})]})}),r.jsx("tbody",{children:P?r.jsx("tr",{children:r.jsx("td",{colSpan:3,className:"text-center text-gray-500 dark:text-gray-400",children:e("common.loading")})}):(Array.isArray(k)?k:[]).length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:3,className:"text-center text-gray-500 dark:text-gray-400",children:e("common.noData")})}):(Array.isArray(k)?k:[]).slice(0,200).map(L=>r.jsxs("tr",{children:[r.jsx("td",{children:t(L?.entry_date)}),r.jsx("td",{children:L?.project?.code?`${L.project.code} - ${L.project?.name??""}`:L?.project?.name??L?.project_id??"-"}),r.jsx("td",{children:L?.effectif??"-"})]},`${L?.project_id??""}-${String(L?.entry_date??"")}`))})]})})]})]})}const Vwe=Object.freeze(Object.defineProperty({__proto__:null,default:Kwe},Symbol.toStringTag,{value:"Module"})),Gwe=e=>{try{return JSON.parse(e)}catch{return null}},Ywe=e=>{if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?String(e):t.toLocaleString()},a$=e=>{const t=String(e||"").trim().toLowerCase();return t==="environment"||t==="environnement"?"environment":"sst"},Zwe=(e,t)=>{const a=a$(t);return e.startsWith("/admin/regulatory-watch")?`/admin/regulatory-watch/${a}`:e.startsWith("/supervisor/regulatory-watch")?`/supervisor/regulatory-watch/${a}`:`/regulatory-watch/${a}`};function Xwe(){const{t:e}=ut(),{user:t}=At(),a=Tn(),n=Zr(),s=As(),i=f.useMemo(()=>a$(s?.category),[s?.category]),o=f.useMemo(()=>Zwe(n.pathname,i),[i,n.pathname]),l=e(i==="environment"?"regulatoryWatch.environmentNav":"regulatoryWatch.sstNav"),[c,d]=f.useState([]),[u,m]=f.useState(!0),[p,g]=f.useState(""),x=t?.project_list_preference??"code",h=f.useMemo(()=>Ir(c,x),[c,x]),[v,b]=f.useState(!0),[y,j]=f.useState(null),[_,w]=f.useState([]),[k,N]=f.useState(null),P=f.useMemo(()=>{const E=t?.id?String(t.id):"anonymous";return`regulatory_watch_draft:${i}:new:${E}:new`},[i,t?.id]),[A,M]=f.useState(null);f.useEffect(()=>{if(!(typeof window>"u"))try{const E=window.localStorage.getItem(P);if(!E){M(null);return}const W=Gwe(E);M(W&&typeof W=="object"?W:null)}catch{M(null)}},[P]);const R=()=>{const E=Number.parseInt(String(A?.page??"1"),10),W=Number.isFinite(E)&&E>=1?E:1;a(`${o}/new/${W}`)},O=()=>{try{window.localStorage.removeItem(P)}catch{}M(null)};f.useEffect(()=>{(async()=>{try{m(!0);const W=await it.getAllList({status:"active"});d(Array.isArray(W)?W:[])}catch(W){d([]),K.error(W.response?.data?.message??e("errors.somethingWentWrong"))}finally{m(!1)}})()},[]),f.useEffect(()=>{(async()=>{try{b(!0);const W={per_page:50,category:i};p&&(W.project_id=Number(p));const C=(await vo.getAll(W)).data?.data??null;j(C?.avg_overall_score??null);const z=C?.submissions?.data??[];w(Array.isArray(z)?z:[])}catch(W){j(null),w([]),K.error(W.response?.data?.message??e("errors.somethingWentWrong"))}finally{b(!1)}})()},[p,i]);const q=E=>{N(E)},S=async()=>{if(k?.id)try{await vo.delete(k.id),K.success(e("common.deleted")??"Deleted");const E={per_page:50,category:i};p&&(E.project_id=Number(p));const B=(await vo.getAll(E)).data?.data??null;j(B?.avg_overall_score??null);const D=B?.submissions?.data??[];w(Array.isArray(D)?D:[])}catch(E){K.error(E.response?.data?.message??e("errors.somethingWentWrong"))}finally{N(null)}},I=y===null?"-":`${y}%`;return r.jsxs("div",{className:"space-y-6",children:[A?.answers?r.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/10 rounded-xl border border-amber-200 dark:border-amber-900/30 p-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:e("regulatoryWatch.draftSaved")}),r.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-300 mt-1",children:[e("common.page")," ",A?.page??1]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:O,children:e("common.delete")}),r.jsx("button",{type:"button",className:"btn-primary",onClick:R,children:e("common.continue")})]})]})}):null,r.jsxs("div",{className:"flex items-start justify-between gap-4 flex-col sm:flex-row",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"p-2 bg-hse-primary/10 rounded-lg",children:r.jsx(pr,{className:"w-5 h-5 text-hse-primary"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:l}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("regulatoryWatch.historySubtitle")})]})]}),r.jsxs("button",{type:"button",onClick:()=>a(`${o}/new/1`),className:"btn-primary flex items-center justify-center gap-2 w-full sm:w-auto",children:[r.jsx(_n,{className:"w-4 h-4"}),e("regulatoryWatch.newSubmission")]})]}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"label",children:e("regulatoryWatch.selectProject")}),r.jsxs(Ze,{value:p,onChange:E=>g(E.target.value),disabled:u,children:[r.jsx("option",{value:"",children:e(u?"common.loading":"common.allProjects")}),h.map(E=>r.jsx("option",{value:String(E.id),children:Wt(E)},E.id))]})]}),r.jsx("div",{className:"md:col-span-1",children:r.jsxs("div",{className:"p-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("regulatoryWatch.avgScore")}),r.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:I})]})})]})}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[r.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:r.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:e("regulatoryWatch.historyTitle")})}),v?r.jsxs("div",{className:"p-6 flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e("common.loading")]}):_.length===0?r.jsx("div",{className:"p-6 text-sm text-gray-500 dark:text-gray-400",children:e("regulatoryWatch.noSubmissions")}):r.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:_.map(E=>{const W=E?.overall_score,B=W==null?"-":`${Number(W).toFixed(2)}%`,C=E?.week_year&&E?.week_number?`${e("dashboard.weekPrefix")} ${E.week_number} - ${E.week_year}`:null;return r.jsxs("div",{className:"p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-3 hover:bg-gray-50 dark:hover:bg-gray-900/40",children:[r.jsxs("button",{type:"button",className:"text-left flex-1",onClick:()=>a(`${o}/${E.id}`),children:[r.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:Wt(E.project)||E.project?.name||E.project?.code||e("common.unknown")}),r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e("regulatoryWatch.submittedAt"),": ",Ywe(E.submitted_at)]}),C&&r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:C})]}),r.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-3",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:B}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{type:"button",className:"btn-secondary flex items-center gap-2",onClick:()=>a(`${o}/${E.id}`),children:[r.jsx(_r,{className:"w-4 h-4"}),e("regulatoryWatch.viewDetails")]}),r.jsxs("button",{type:"button",className:"btn-secondary flex items-center gap-2",onClick:()=>a(`${o}/${E.id}/resubmit`),children:[r.jsx(P5,{className:"w-4 h-4"}),e("regulatoryWatch.resubmit")]}),r.jsxs("button",{type:"button",className:"btn-danger flex items-center gap-2",onClick:()=>q(E),children:[r.jsx(Nt,{className:"w-4 h-4"}),e("common.delete")??"Delete"]})]})]})]},E.id)})})]}),r.jsx(la,{isOpen:!!k,title:e("common.confirm")??"Confirm",message:e("common.confirmDelete")??"Are you sure you want to delete this record?",confirmLabel:e("common.delete")??"Delete",cancelLabel:e("common.cancel")??"Cancel",variant:"danger",onConfirm:S,onCancel:()=>N(null)})]})}const Qwe=Object.freeze(Object.defineProperty({__proto__:null,default:Xwe},Symbol.toStringTag,{value:"Module"})),Jwe="v2",e_e="code_travail_titre_iv",n$={section_id:e_e,title:{fr:"1. Loi Code du travail",en:"1. Labor Code Law"},chapters:[{chapter_id:"ch1",title:{fr:`Titre IV : De l'hygine et de la scurit des salaris
Chapitre I : Dispositions gnrales`,en:`Titre IV : De l'hygine et de la scurit des salaris
Chapitre I : Dispositions gnrales`},articles:[{article_id:"281",code:{fr:"Article 281",en:"Article 281"},text:{fr:`-Locaux propres
-Bonne conditions d'hygine, de propret et de salubrit ncessaire  la sant des salaris pour  prvention incendie, clairage, eau potable chauffage, l'aration, l'insonorisation, la ventilation, l'eau potable, les fosses d'aisances,
- l'vacuation des eaux rsiduaires et de lavage, les poussires et vapeurs, les vestiaires, la toilette et le couchage des salaris.
-Approvisionnement normal en eau potable des chantiers et y assurer des logements salubres et des conditions d'hygine satisfaisantes pour les salaris.`,en:`-Locaux propres
-Bonne conditions d'hygine, de propret et de salubrit ncessaire  la sant des salaris pour  prvention incendie, clairage, eau potable chauffage, l'aration, l'insonorisation, la ventilation, l'eau potable, les fosses d'aisances,
- l'vacuation des eaux rsiduaires et de lavage, les poussires et vapeurs, les vestiaires, la toilette et le couchage des salaris.
-Approvisionnement normal en eau potable des chantiers et y assurer des logements salubres et des conditions d'hygine satisfaisantes pour les salaris.`}},{article_id:"282",code:{fr:"Article 282",en:"Article 282"},text:{fr:`- Amnagement des locaux pour garantir la scurit des salaris handicap.
- Mise en place de dispositifs de protection afin que leur utilisation ne prsente pas de danger pour les salaris.`,en:`- Amnagement des locaux pour garantir la scurit des salaris handicap.
- Mise en place de dispositifs de protection afin que leur utilisation ne prsente pas de danger pour les salaris.`}},{article_id:"283",code:{fr:"Article 283",en:"Article 283"},text:{fr:"- Interdiction d'acquisition ou de location de machines prsentant un danger pour les salaris sans dispositifs protection dont elles ont t pourvues  l'origine.",en:"- Interdiction d'acquisition ou de location de machines prsentant un danger pour les salaris sans dispositifs protection dont elles ont t pourvues  l'origine."}},{article_id:"284",code:{fr:"Article 284",en:"Article 284"},text:{fr:"- Obligation de port de ceinture ou autre dispositifs de scurit et de masques de protection pour les salaris appels  raliser ce genre de travaux",en:"- Obligation de port de ceinture ou autre dispositifs de scurit et de masques de protection pour les salaris appels  raliser ce genre de travaux"}},{article_id:"285",code:{fr:"Article 285",en:"Article 285"},text:{fr:`- Obligation de clture des puits, trappes ou ouvertures de descente.
- Obligation de mise en place de barrires de protection/cloisons pour les moteurs.
-  Les escaliers doivent tre solides et munis de fortes rampes.
- Les chafaudages doivent tre munis de garde-corps rigides d'au moins 90 cm de haut.`,en:`- Obligation de clture des puits, trappes ou ouvertures de descente.
- Obligation de mise en place de barrires de protection/cloisons pour les moteurs.
-  Les escaliers doivent tre solides et munis de fortes rampes.
- Les chafaudages doivent tre munis de garde-corps rigides d'au moins 90 cm de haut.`}},{article_id:"286",code:{fr:"Article 286",en:"Article 286"},text:{fr:`- Mettre place de dispositifs de scurit intgr
- Eviter le contact avec les courroies`,en:`- Mettre place de dispositifs de scurit intgr
- Eviter le contact avec les courroies`}},{article_id:"287",code:{fr:"Article 287",en:"Article 287"},text:{fr:`- Interdiction d'utilisation  de produits ou substances, d'appareils ou de machines reconnus par l'autorit comptente comme tant susceptibles de porter atteinte  leur sant ou de compromettre leur scurit.
- Interdiction de  permettre  ses salaris l'utilisation, dans des conditions contraires  celles fixes par voie rglementaire, de produits ou substances,d'appareils ou de machines susceptibles de porter atteinte  leur sant ou de compromettre leur scurit.`,en:`- Interdiction d'utilisation  de produits ou substances, d'appareils ou de machines reconnus par l'autorit comptente comme tant susceptibles de porter atteinte  leur sant ou de compromettre leur scurit.
- Interdiction de  permettre  ses salaris l'utilisation, dans des conditions contraires  celles fixes par voie rglementaire, de produits ou substances,d'appareils ou de machines susceptibles de porter atteinte  leur sant ou de compromettre leur scurit.`}},{article_id:"288",code:{fr:"Article 288",en:"Article 288"},text:{fr:"- Signaler sur les emballages des substances et prparations dangereuses un avertissement des dangers",en:"- Signaler sur les emballages des substances et prparations dangereuses un avertissement des dangers"}},{article_id:"289",code:{fr:"Article 289",en:"Article 289"},text:{fr:`-  informer les salaris des dispositions lgales concernant la protection des dangers que peuvent constituer les machines.
- Afficher un avis lisible indiquant les dangers rsultant de l'utilisation des machines ainsi que les prcautions 
prendre.
- Interdiction d'utiliser des machines sans dispostifs de protection  
- Interdiction de rendre inoprants les dispostifs de protection
- interdiction de demander  un salari d'effectuer le transport manuel des charges dont le poids est susceptible de compromettre sa sant ou sa scurit.`,en:`-  informer les salaris des dispositions lgales concernant la protection des dangers que peuvent constituer les machines.
- Afficher un avis lisible indiquant les dangers rsultant de l'utilisation des machines ainsi que les prcautions 
prendre.
- Interdiction d'utiliser des machines sans dispostifs de protection  
- Interdiction de rendre inoprants les dispostifs de protection
- interdiction de demander  un salari d'effectuer le transport manuel des charges dont le poids est susceptible de compromettre sa sant ou sa scurit.`}},{article_id:"290",code:{fr:"Article 290",en:"Article 290"},text:{fr:"- Ralisation de visite mdicale avant de recruter avec renouvellement priodique",en:"- Ralisation de visite mdicale avant de recruter avec renouvellement priodique"}},{article_id:"294",code:{fr:"Article 294",en:"Article 294"},text:{fr:"-Garantir les conditions d'hygine et de scurit",en:"-Garantir les conditions d'hygine et de scurit"}}]},{chapter_id:"ch2",title:{fr:"Chapitre II : Des dispositions relatives au transport des colis d'un poids suprieur  une tonne",en:"Chapter II: Provisions relating to transport of packages weighing more than one tonne"},articles:[{article_id:"302",code:{fr:"Article 302",en:"Article 302"},text:{fr:`- Indication du poids du colis, sa nature, son contenu et position de chargement  l'extrieur en lettre claires et visibles
- Estimer ce poids  un poids maximum dans les cas expectionnels ou iles difficile de dterminer le poids exact.`,en:`- Indication du poids du colis, sa nature, son contenu et position de chargement  l'extrieur en lettre claires et visibles
- Estimer ce poids  un poids maximum dans les cas expectionnels ou iles difficile de dterminer le poids exact.`}}]},{chapter_id:"ch3",title:{fr:"Chapitre III : Des services mdicaux du travail",en:"Chapter III: Occupational medical services"},articles:[{article_id:"304",code:{fr:"Article 304",en:"Article 304"},text:{fr:"- Cration de service mdical indpendant.",en:"- Cration de service mdical indpendant."}},{article_id:"305",code:{fr:"Article 305",en:"Article 305"},text:{fr:"-  Constituer soit des services mdicaux du travail indpendants ou communs inter-entreprises",en:"-  Constituer soit des services mdicaux du travail indpendants ou communs inter-entreprises"}},{article_id:"310",code:{fr:"Article 310",en:"Article 310"},text:{fr:"- Mdecin de travail titulaire d'un diplme  en mdecine du travail et inscrit au tableau de l'Ordre des mdecins avec l'autorisation d'exercer la mdecine.",en:"- Mdecin de travail titulaire d'un diplme  en mdecine du travail et inscrit au tableau de l'Ordre des mdecins avec l'autorisation d'exercer la mdecine."}},{article_id:"311",code:{fr:"Article 311",en:"Article 311"},text:{fr:"Le mdecin du travail tranger doit avoir obtenu l'autorisation prvue par les dispositions relatives  l'emploi des trangers.",en:"Le mdecin du travail tranger doit avoir obtenu l'autorisation prvue par les dispositions relatives  l'emploi des trangers."}},{article_id:"317",code:{fr:"Article 317",en:"Article 317"},text:{fr:"- Formation sur les techniques et mthodes des premiers secours en cas d'urgence de 2 salaris au moins.",en:"- Formation sur les techniques et mthodes des premiers secours en cas d'urgence de 2 salaris au moins."}},{article_id:"325",code:{fr:"Article 325",en:"Article 325"},text:{fr:"Etablissement d'une fiche d'entreprise mise  jour rgulirement. et qui comprend la liste des risques et maladies professionnels, ainsi que le nombre de salaris exposs  ces risques et maladies.",en:"Etablissement d'une fiche d'entreprise mise  jour rgulirement. et qui comprend la liste des risques et maladies professionnels, ainsi que le nombre de salaris exposs  ces risques et maladies."}},{article_id:"327",code:{fr:"Article 327",en:"Article 327"},text:{fr:`- Ralisation d'examen mdical pour
1 tout salari, avant l'embauchage ou, au plus tard, avant l'expiration de la priode d'essai ;
2 tout salari,  raison d'une fois au moins tous les douze mois, pour les salaris ayant atteint ou dpass 18 ans et tous les six mois pour ceux ayant moins de 18 ans ;
3 tout salari expos  un danger quelconque, la femme enceinte, la mre d'un enfant de moins de deux ans, les mutils et les handicaps suivant une frquence dont le mdecin du travail reste juge ;
- Tout salari dans les cas suivants :
5 aprs une absence de plus de trois semaines pour cause d'accident autre que l'accident du travail ou de maladie autre que professionnelle ;
6-aprs une absence pour cause d'accident du travail ou de maladie professionnelle ;
7en cas d'absences rptes pour raison de sant.`,en:`- Ralisation d'examen mdical pour
1 tout salari, avant l'embauchage ou, au plus tard, avant l'expiration de la priode d'essai ;
2 tout salari,  raison d'une fois au moins tous les douze mois, pour les salaris ayant atteint ou dpass 18 ans et tous les six mois pour ceux ayant moins de 18 ans ;
3 tout salari expos  un danger quelconque, la femme enceinte, la mre d'un enfant de moins de deux ans, les mutils et les handicaps suivant une frquence dont le mdecin du travail reste juge ;
- Tout salari dans les cas suivants :
5 aprs une absence de plus de trois semaines pour cause d'accident autre que l'accident du travail ou de maladie autre que professionnelle ;
6-aprs une absence pour cause d'accident du travail ou de maladie professionnelle ;
7en cas d'absences rptes pour raison de sant.`}},{article_id:"328",code:{fr:"Article 328",en:"Article 328"},text:{fr:"- Ralisation d'examen complmentaire lors de l'embauchage et lors des visites d'inspection lorsque ces examens sont ncessits par le dpistage de maladies professionnelles ou de maladies contagieuses.",en:"- Ralisation d'examen complmentaire lors de l'embauchage et lors des visites d'inspection lorsque ces examens sont ncessits par le dpistage de maladies professionnelles ou de maladies contagieuses."}}]},{chapter_id:"ch5",title:{fr:"Chapitre V : Des comits de scurit et d'hygine",en:"Chapitre V : Des comits de scurit et d'hygine"},articles:[{article_id:"336",code:{fr:"Article 336",en:"Article 336"},text:{fr:"- Cration de comits de scurit et d'hygine",en:"- Cration de comits de scurit et d'hygine"}},{article_id:"337",code:{fr:"Article 337",en:"Article 337"},text:{fr:`Le comit de scurit et d'hygine se compose :
- de l'employeur ou son reprsentant, prsident ;
- du chef du service de scurit, ou  dfaut, un ingnieur ou cadre technique travaillant dans l'entreprise, dsign par l'employeur ;
- du mdecin du travail dans l'entreprise ;
- de deux dlgus des salaris, lus par les dlgus des salaris ;
- d'un ou deux reprsentants des syndicats dans l'entreprise, le cas chant.
- toute personne appartenant  l'entreprise et possdant une comptence et une exprience en matire d'hygine et de scurit professionnelle, notamment le chef du service du personnel ou le directeur de l'administration de la production dans l'entreprise.`,en:`Le comit de scurit et d'hygine se compose :
- de l'employeur ou son reprsentant, prsident ;
- du chef du service de scurit, ou  dfaut, un ingnieur ou cadre technique travaillant dans l'entreprise, dsign par l'employeur ;
- du mdecin du travail dans l'entreprise ;
- de deux dlgus des salaris, lus par les dlgus des salaris ;
- d'un ou deux reprsentants des syndicats dans l'entreprise, le cas chant.
- toute personne appartenant  l'entreprise et possdant une comptence et une exprience en matire d'hygine et de scurit professionnelle, notamment le chef du service du personnel ou le directeur de l'administration de la production dans l'entreprise.`}},{article_id:"339",code:{fr:"Article 339",en:"Article 339"},text:{fr:`Le comit de scurit et d'hygine se runit sur convocation de son prsident:
-  une fois chaque trimestre et chaque fois qu'il est ncessaire.
-  la suite de tout accident ayant entran ou qui aurait pu entraner des consquences graves.`,en:`Le comit de scurit et d'hygine se runit sur convocation de son prsident:
-  une fois chaque trimestre et chaque fois qu'il est ncessaire.
-  la suite de tout accident ayant entran ou qui aurait pu entraner des consquences graves.`}},{article_id:"340",code:{fr:"Article 340",en:"Article 340"},text:{fr:`- Le comit doit procder  une enqute  l'occasion de tout accident du travail, par deux membres du comit, l'un reprsentant l'employeur, l'autre reprsentant les salaris,
- Etablir un rapport sur les circonstances de l'accident du travail, de la maladie professionnelle ou  caractre professionnel,`,en:`- Le comit doit procder  une enqute  l'occasion de tout accident du travail, par deux membres du comit, l'un reprsentant l'employeur, l'autre reprsentant les salaris,
- Etablir un rapport sur les circonstances de l'accident du travail, de la maladie professionnelle ou  caractre professionnel,`}},{article_id:"341",code:{fr:"Article 341",en:"Article 341"},text:{fr:"- Envoyer le rapport d'AT/ de MP  l'agent charg de l'inspection de travail dans les 15 jours qui suivent sa survenue",en:"- Envoyer le rapport d'AT/ de MP  l'agent charg de l'inspection de travail dans les 15 jours qui suivent sa survenue"}},{article_id:"342",code:{fr:"Article 342",en:"Article 342"},text:{fr:`Le comit de scurit et d'hygine doit tablir un rapport annuel  la fin de
chaque anne grgorienne sur l'volution des risques professionnels dans l'entreprise.
Ce rapport, doit tre adress par l'employeur 
l'agent charg de l'inspection du travail et au mdecin charg de l'inspection du travail au plus
tard dans les 90 jours qui suivent l'anne au titre de laquelle il a t tabli.`,en:`Le comit de scurit et d'hygine doit tablir un rapport annuel  la fin de
chaque anne grgorienne sur l'volution des risques professionnels dans l'entreprise.
Ce rapport, doit tre adress par l'employeur 
l'agent charg de l'inspection du travail et au mdecin charg de l'inspection du travail au plus
tard dans les 90 jours qui suivent l'anne au titre de laquelle il a t tabli.`}},{article_id:"343",code:{fr:"Article 343",en:"Article 343"},text:{fr:`le CHS consigne sur un registre spcial qui doit tre tenu  la disposition des
agents chargs de l'inspection du travail et du mdecin charg de l'inspection du travail :
- les procs-verbaux des runions du comit de scurit et d'hygine en cas d'accidents graves ;
- le rapport annuel sur l'volution des risques professionnels dans l'entreprise ;
- le programme annuel de prvention contre les risques professionnels.`,en:`le CHS consigne sur un registre spcial qui doit tre tenu  la disposition des
agents chargs de l'inspection du travail et du mdecin charg de l'inspection du travail :
- les procs-verbaux des runions du comit de scurit et d'hygine en cas d'accidents graves ;
- le rapport annuel sur l'volution des risques professionnels dans l'entreprise ;
- le programme annuel de prvention contre les risques professionnels.`}}]}]},t_e={section_id:"appareils_levage",title:{fr:"5. Appareils de levage",en:"5. Lifting devices"},chapters:[{chapter_id:"al_main",title:{fr:"Dispositions",en:"Provisions"},articles:[{article_id:"al_art_premier_epreuve",code:{fr:"Article Premier",en:"Article First"},text:{fr:"preuve statique et dynamique ralises pour l'appareil et ses accessoires.",en:"Static and dynamic tests carried out for the device and its accessories."}},{article_id:"al_art_2_charge_epreuve",code:{fr:"Article 2",en:"Article 2"},text:{fr:"Si Pm dsigne le poids maximum qu'il est permis de faire mouvoir par l'appareil, la charge d'preuve sera au minimum gale  1,5 Pm pour l'preuve statique et 1,2 Pm pour l'preuve dynamique. Ces minima sont rduits pour certains appareils (palans lectriques  5 t, grues mobiles, grues sur chenilles/pneumatiques/camions, sapines, grues  tours, petites grues/potences, portiques, ponts roulants, lvateurs-gerbeurs).",en:"If Pm denotes the maximum load allowed for the device, the proof load is at least 1.5 Pm for static tests and 1.2 Pm for dynamic tests. These minima are reduced for certain devices (electric hoists  5 t, mobile cranes, crawler/tire/truck cranes, tower cranes, small cranes/jibs, gantries, overhead cranes, stacker-lift trucks)."}},{article_id:"al_art_4_epreuves",code:{fr:"Article 4",en:"Article 4"},text:{fr:"Les appareils seront prouvs : avant mise en service ; aprs dmontage/remontage ; aprs tout accident d  la dfaillance d'un organe essentiel ; aprs toute rparation/transformation importante. Les appareils de chantiers non installs  demeure seront dispenss lorsque le dplacement exige dmontage/remontage,  condition d'tre prouvs au moins tous les six mois.",en:"Devices shall be tested: before commissioning; after disassembly/reassembly; after any accident due to failure of an essential part; after any major repair/modification. Mobile site devices may be exempted when relocation requires dismantling/reassembly, provided they are tested at least every six months."}},{article_id:"al_art_7_inspections",code:{fr:"Article 7",en:"Article 7"},text:{fr:"Chanes, cbles, cordages, lingues, palonniers et crochets seront inspects : en service normal au moins tous les 12 mois ; lors d'une remise en service aprs une inspection datant de 3 mois au plus ;  la suite d'un dmontage ou de toute modification.",en:"Chains, cables, ropes, slings, spreader beams and hooks shall be inspected: at least every 12 months in normal service; when returning to service after an inspection not older than 3 months; after disassembly or any modification."}},{article_id:"al_art_3_passerelles",code:{fr:"Article 3",en:"Article 3"},text:{fr:"Appareil avec passerelles, lorsque deux appareils doivent se mouvoir l'un au-dessus de l'autre : a) Une distance verticale de 2 mtres au moins doit sparer les passerelles et tous objets susceptibles de se prsenter au-dessus du trajet suivi par l'appareil de levage ; b) Un grillage ou une armature rigide, de rsistance mcanique suffisante, formant plafond et obligeant les travailleurs qui se trouvent sur la passerelle  rester en dehors des zones dangereuses, doit tre install.",en:"Appareil avec passerelles, lorsque deux appareils doivent se mouvoir l'un au-dessus de l'autre : a) Une distance verticale de 2 mtres au moins doit sparer les passerelles et tous objets susceptibles de se prsenter au-dessus du trajet suivi par l'appareil de levage ; b) Un grillage ou une armature rigide, de rsistance mcanique suffisante, formant plafond et obligeant les travailleurs qui se trouvent sur la passerelle  rester en dehors des zones dangereuses, doit tre install."}},{article_id:"al_art_5_attestation_mise_service",code:{fr:"Article 5",en:"Article 5"},text:{fr:"Attestation de mise en service en cas de changement de chanes, cbles ou cordages faisant partie d'un appareil (par le fournisseur ou l'organisme comptent l'ayant prouv).",en:"Attestation de mise en service en cas de changement de chanes, cbles ou cordages faisant partie d'un appareil (par le fournisseur ou l'organisme comptent l'ayant prouv)."}},{article_id:"al_art_5_immobilisation_arret",code:{fr:"Article 5",en:"Article 5"},text:{fr:"Les appareils de levage monts sur roues, tels que ponts, portiques roulants, monorails, grues, seront immobiliss  l'arrt par des moyens de calage, d'amarrage ou de freinage.",en:"Les appareils de levage monts sur roues, tels que ponts, portiques roulants, monorails, grues, seront immobiliss  l'arrt par des moyens de calage, d'amarrage ou de freinage."}},{article_id:"al_art_15_interdiction_chiffons",code:{fr:"Article 15",en:"Article 15"},text:{fr:"Tout emmagasinage de chiffons, dchets, huiles ou autres matires combustibles dans la cabine de manuvre est interdit. Des rcipients mtalliques ferms doivent tre placs  l'extrieur des cabines pour recevoir les chiffons ou dchets ; ils seront vids priodiquement.",en:"Tout emmagasinage de chiffons, dchets, huiles ou autres matires combustibles dans la cabine de manuvre est interdit. Des rcipients mtalliques ferms doivent tre placs  l'extrieur des cabines pour recevoir les chiffons ou dchets ; ils seront vids priodiquement."}},{article_id:"al_art_16_extincteurs_cabines",code:{fr:"Article 16",en:"Article 16"},text:{fr:"Les cabines doivent tre munies d'appareils extincteurs d'incendie d'une puissance suffisante.",en:"Les cabines doivent tre munies d'appareils extincteurs d'incendie d'une puissance suffisante."}},{article_id:"al_art_25_interdictions",code:{fr:"Article 25",en:"Article 25"},text:{fr:"Interdiction de soulever une charge suprieure  la limite maximale. Interdiction de transporter habituellement des charges au-dessus du personnel. Chaque conducteur doit disposer d'un avertisseur sonore de puissance suffisante.",en:"Prohibition on lifting loads above the maximum limit. Prohibition on routinely transporting loads above personnel. Each operator must have a sufficiently powerful audible warning device."}},{article_id:"al_art_26_transport_personnes",code:{fr:"Article 26",en:"Article 26"},text:{fr:"Il est interdit d'utiliser les appareils de levage pour le transport des personnes.",en:"It is prohibited to use lifting devices for transporting persons."}},{article_id:"al_art_30_entretien_arret",code:{fr:"Article 30",en:"Article 30"},text:{fr:"Le graissage, le nettoyage, l'entretien et les rparations des appareils doivent tre oprs  l'arrt.",en:"Le graissage, le nettoyage, l'entretien et les rparations des appareils doivent tre oprs  l'arrt."}},{article_id:"al_art_31_epreuve_mise_service",code:{fr:"Article 31",en:"Article 31"},text:{fr:"Les appareils seront prouvs avant leur mise en service.",en:"Les appareils seront prouvs avant leur mise en service."}},{article_id:"al_art_32_examens_periodiques",code:{fr:"Article 32",en:"Article 32"},text:{fr:"Les appareils seront examins  fond une fois au moins tous les douze mois. Vrification des chanes, cbles, cordages, lingues, palonniers et crochets de suspension. Ils seront vrifis, en outre, avant d'tre remis en service aprs un arrt lorsque la dernire inspection normale remontera  plus de trois mois. Ils seront galement vrifis lorsqu'ils auront subi des dmontages ou des modifications.",en:"Les appareils seront examins  fond une fois au moins tous les douze mois. Vrification des chanes, cbles, cordages, lingues, palonniers et crochets de suspension. Ils seront vrifis, en outre, avant d'tre remis en service aprs un arrt lorsque la dernire inspection normale remontera  plus de trois mois. Ils seront galement vrifis lorsqu'ils auront subi des dmontages ou des modifications."}},{article_id:"al_art_33_techniciens_qualifies",code:{fr:"Article 33",en:"Article 33"},text:{fr:"Les preuves, examens et inspections doivent se faire par des techniciens qualifis et spcialiss appartenant soit  l'tablissement lui-mme, ou  un organisme agr.",en:"Les preuves, examens et inspections doivent se faire par des techniciens qualifis et spcialiss appartenant soit  l'tablissement lui-mme, ou  un organisme agr."}},{article_id:"al_art_34_registre",code:{fr:"Article 34",en:"Article 34"},text:{fr:"Consigner les rsultats des preuves sur un registre spcial pour l'appareil et l'ensemble de ses lments.",en:"Record test results in a dedicated register for the device and all its components."}},{article_id:"al_art_35_interdiction_conduite_inapte",code:{fr:"Article 35",en:"Article 35"},text:{fr:"Il est interdit de confier la conduite des appareils de levage  des ouvriers que leur ignorance ou leur connaissance imparfaite des consignes et des manuvres, leur tat de sant ou leurs aptitudes physiques rendent impropres  remplir ces fonctions.",en:"Il est interdit de confier la conduite des appareils de levage  des ouvriers que leur ignorance ou leur connaissance imparfaite des consignes et des manuvres, leur tat de sant ou leurs aptitudes physiques rendent impropres  remplir ces fonctions."}},{article_id:"al_art_36_consignes",code:{fr:"Article 36",en:"Article 36"},text:{fr:"tablir des consignes spcifiant les mesures de scurit en service normal, les prcautions contre les chutes d'objets, et la sauvegarde du personnel lors des oprations de visite/graissage/nettoyage/entretien/rparation. Les afficher en arabe et en franais.",en:"Establish instructions specifying safety measures in normal service, precautions to prevent falling objects, and protection of personnel during inspection/lubrication/cleaning/maintenance/repair operations. Display them in Arabic and French."}},{article_id:"al_art_37_indication_poids_max",code:{fr:"Article 37",en:"Article 37"},text:{fr:"Indiquer les poids maximums des charges que l'appareil peut supporter. Indiquer les poids maximums des charges pour les accessoires, chanes, cbles, cordages, lingues, palonniers, crochets de suspension.",en:"Indiquer les poids maximums des charges que l'appareil peut supporter. Indiquer les poids maximums des charges pour les accessoires, chanes, cbles, cordages, lingues, palonniers, crochets de suspension."}}]}]},r_e={section_id:"appareil_pression",title:{fr:"6. Appareil  Pression",en:"6. Pressure equipment"},chapters:[{chapter_id:"ap_dispositions",title:{fr:"Dispositions",en:"Provisions"},articles:[{article_id:"ap_art_premier_definition",code:{fr:"Article Premier",en:"Article First"},text:{fr:"Appareils  pression de gaz soumis (hors bateaux/aronefs) : compresseurs/canalisations ( 25 hectopizes, diamtre > 8 mm), extincteurs sous pression ( 5 L), gnrateurs d'actylne (sauf petits discontinu), rcipients d'actylne ( 1,5 hectopize), appareils mtalliques de production/stockage/mise en uvre de gaz comprims/liqufis/dissous (pression  4 hectopizes et PV > 80).",en:"Pressure gas equipment covered (excluding ships/aircraft): compressors/piping ( 25 hectopiezes, inner diameter > 8 mm), pressurized fire extinguishers ( 5 L), acetylene generators (except small discontinuous), acetylene storage vessels ( 1.5 hectopiezes), metal equipment for production/storage/use of compressed/liquefied/dissolved gases (pressure  4 hectopiezes and PV > 80)."}},{article_id:"ap_art_2_categories",code:{fr:"Article 2",en:"Article 2"},text:{fr:"Les appareils sont classs en trois catgories : fixes, mi-fixes ou mobiles. Sont considrs mi-fixes les appareils placs pendant leur utilisation sur des engins de transport ou autres engins mobiles.",en:"Equipment is classified into three categories: fixed, semi-fixed, or mobile. Semi-fixed equipment is installed during use on transport equipment or other mobile machines."}},{article_id:"ap_art_3_epreuve_avant_service",code:{fr:"Article 3",en:"Article 3"},text:{fr:"Ralisation d'une preuve avant la mise en service des appareils  pression.",en:"A proof test must be performed before commissioning pressure equipment."}},{article_id:"ap_art_4_presence_mines",code:{fr:"Article 4",en:"Article 4"},text:{fr:"L'preuve est faite sous la direction et en prsence d'un ingnieur du service des mines ou d'organismes agrs. En cas de conformit, des poinons sont apposs sur l'appareil et un PV (rapport) d'preuve est tabli.",en:"The test is performed under the supervision and in the presence of a mining service engineer or approved bodies. If compliant, stamps are affixed to the equipment and a test report (PV) is issued."}},{article_id:"ap_art_7_certificat",code:{fr:"Article 7",en:"Article 7"},text:{fr:"Obligation d'avoir un certificat attestant que l'appareil a t vrifi.",en:"A certificate attesting that the equipment has been inspected is required."}},{article_id:"ap_art_8_manometre",code:{fr:"Article 8",en:"Article 8"},text:{fr:"Tout appareil fixe, ou tout groupe d'appareils fixes, doit tre en communication permanente avec au moins un manomtre indiquant la pression effective maximum en service.",en:"Any fixed equipment (or group of fixed equipment) must be permanently connected to at least one pressure gauge indicating the maximum effective operating pressure."}},{article_id:"ap_art_11_bon_etat",code:{fr:"Article 11",en:"Article 11"},text:{fr:"Les appareils en service et tous leurs accessoires doivent tre constamment en bon tat. Assurer les nettoyages, rparations et remplacements ncessaires.",en:"In-service equipment and all accessories must be kept in good condition; cleaning, repairs and replacements must be ensured."}},{article_id:"ap_art_12_verifications",code:{fr:"Article 12",en:"Article 12"},text:{fr:"Vrification intrieure et extrieure par une personne qualifie en fonction du risque (sans dpasser un dlai de 3 ans).",en:"Internal and external inspection by a qualified person according to risk (no more than every 3 years)."}},{article_id:"ap_art_11bis_reparations",code:{fr:"Article 11 bis",en:"Article 11 bis"},text:{fr:"Tout propritaire/utilisateur/rparateur d'appareils  pression doit consulter pralablement le service rgional des mines ou un organisme agr avant des rparations ou transformations. Interdiction d'entreprendre des rparations sur un appareil rform par l'expert agr ou l'ingnieur des mines.",en:"Any owner/user/repairer of pressure equipment must consult the regional mining service or an approved body before repairs or modifications. It is prohibited to repair equipment that has been condemned by an approved expert or mining engineer."}},{article_id:"ap_art_22_entretien_garnissage_acetylene",code:{fr:"Article 22",en:"Article 22"},text:{fr:"Raliser l'entretien et le garnissage des rcipients d'actylne (pression effective de 1,5 hectopize au moins en solution d'actone). Ce dlai est port  trois ans lorsque le garnissage est constitu par une matire poreuse cohrente.",en:"Raliser l'entretien et le garnissage des rcipients d'actylne (pression effective de 1,5 hectopize au moins en solution d'actone). Ce dlai est port  trois ans lorsque le garnissage est constitu par une matire poreuse cohrente."}},{article_id:"ap_art_23_acetone_pression",code:{fr:"Article 23",en:"Article 23"},text:{fr:"Le poids maximum d'actone et la pression de chargement doivent tre tels que, aprs chargement et la temprature tant suppose ramene  15 C : 1 le volume occup par le gaz non dissous soit suprieur  12 % du volume total du rcipient vide de toute substance ; 2 la pression effective mesure au manomtre n'excde pas 15 hectopizes.",en:"Le poids maximum d'actone et la pression de chargement doivent tre tels que, aprs chargement et la temprature tant suppose ramene  15 C : 1 le volume occup par le gaz non dissous soit suprieur  12 % du volume total du rcipient vide de toute substance ; 2 la pression effective mesure au manomtre n'excde pas 15 hectopizes."}}]},{chapter_id:"ap_marques_identite_service",title:{fr:"Titre Premier : Marques d'Identit et de Service",en:"Title One: Identification and service marks"},articles:[{article_id:"ap_art_3_plaque_identite",code:{fr:"Article 3",en:"Article 3"},text:{fr:"Chaque appareil fixe ou mi fixe doit avoir une plaque avec une marque d'identit de service (dsignation du gaz, pression max, volume...).",en:"Chaque appareil fixe ou mi fixe doit avoir une plaque avec une marque d'identit de service (dsignation du gaz, pression max, volume...)."}},{article_id:"ap_art_4_gdv",code:{fr:"Article 4",en:"Article 4"},text:{fr:"Les rcipients mobiles ou mi-fixes en acier contenant ou ayant contenu du gaz obtenu par la distillation de combustibles solides doivent porter dans le mtal mme l'inscription G.D.V. suivie du poinon de l'expert charg de l'preuve ; cette inscription ne doit sous aucun prtexte tre oblitre ou altre.",en:"Les rcipients mobiles ou mi-fixes en acier contenant ou ayant contenu du gaz obtenu par la distillation de combustibles solides doivent porter dans le mtal mme l'inscription G.D.V. suivie du poinon de l'expert charg de l'preuve ; cette inscription ne doit sous aucun prtexte tre oblitre ou altre."}},{article_id:"ap_art_8_renouvellement_epreuve",code:{fr:"Article 8",en:"Article 8"},text:{fr:"Renouvellement de l'preuve pour tous les appareils  pression.",en:"Renouvellement de l'preuve pour tous les appareils  pression."}},{article_id:"ap_art_26_robinets_capsules",code:{fr:"Article 26",en:"Article 26"},text:{fr:"Les robinets quipant les rcipients dits bouteilles 12 kg et les clapets quipant les rcipients dits bouteilles 3 kg doivent tre munis d'un crou, d'une capsule ou d'un bouchon, dont la conception est agre. L'crou/capsule/bouchon doivent tre en matire rsistante garantissant l'inviolabilit et l'tanchit. Ils doivent rsister  une pression de 20 bars.",en:"Les robinets quipant les rcipients dits bouteilles 12 kg et les clapets quipant les rcipients dits bouteilles 3 kg doivent tre munis d'un crou, d'une capsule ou d'un bouchon, dont la conception est agre. L'crou/capsule/bouchon doivent tre en matire rsistante garantissant l'inviolabilit et l'tanchit. Ils doivent rsister  une pression de 20 bars."}},{article_id:"ap_art_27_centres_emplisseurs",code:{fr:"Article 27",en:"Article 27"},text:{fr:"Tout centre emplisseur est tenu d'acqurir le matriel permettant de doter les rcipients de gaz de la capsule ou de l'crou agr et d'effectuer cette opration systmatiquement sur toutes les bouteilles.",en:"Tout centre emplisseur est tenu d'acqurir le matriel permettant de doter les rcipients de gaz de la capsule ou de l'crou agr et d'effectuer cette opration systmatiquement sur toutes les bouteilles."}},{article_id:"ap_art_28_dispositif_limiteur_debit",code:{fr:"Article 28",en:"Article 28"},text:{fr:"Les rcipients dits bouteilles 12 kg doivent tre munis d'un dispositif limiteur de dbit incorpor soit  la bouteille, soit  son robinet.",en:"Les rcipients dits bouteilles 12 kg doivent tre munis d'un dispositif limiteur de dbit incorpor soit  la bouteille, soit  son robinet."}},{article_id:"ap_art_29_chapeau_anse",code:{fr:"Article 29",en:"Article 29"},text:{fr:"Les robinets des rcipients dits bouteilles 12 kg doivent tre protgs par un chapeau avec anse, visse sur le corps de la bouteille. Il est interdit de manipuler (except lors de l'emplissage) et de transporter toute bouteille de 12 kg non munie de son chapeau.",en:"Les robinets des rcipients dits bouteilles 12 kg doivent tre protgs par un chapeau avec anse, visse sur le corps de la bouteille. Il est interdit de manipuler (except lors de l'emplissage) et de transporter toute bouteille de 12 kg non munie de son chapeau."}},{article_id:"ap_art_30_refus_recipients",code:{fr:"Article 30",en:"Article 30"},text:{fr:"Les centres emplisseurs sont tenus de refuser l'enlvement des rcipients non conformes.",en:"Les centres emplisseurs sont tenus de refuser l'enlvement des rcipients non conformes."}}]}]},a_e={section_id:"page_7",title:{fr:"7. Prvention Incendie",en:"7. Fire prevention"},chapters:[{chapter_id:"prevention_incendie",title:{fr:"Dispositions",en:"Provisions"},articles:[{article_id:"pi_art_premier",code:{fr:"Article Premier",en:"Article First"},text:{fr:"Dispositions applicable pour l'entreposage ou la manipulation de l'ther (oxyde d'ther), du sulfure de carbone et des solutions contenant 30 % au moins de l'un ou l'autre de ces produits.",en:"Dispositions applicable pour l'entreposage ou la manipulation de l'ther (oxyde d'ther), du sulfure de carbone et des solutions contenant 30 % au moins de l'un ou l'autre de ces produits."}},{article_id:"pi_art_2_recipients_etanches",code:{fr:"Article 2",en:"Article 2"},text:{fr:"Les rcipients mobiles de plus de 2 litres contenant les liquides viss  l'article premier, susceptibles d'tre entreposs ou manipuls, doivent tre tanches, avec enveloppe mtallique tanche s'ils sont en verre.",en:"Les rcipients mobiles de plus de 2 litres contenant les liquides viss  l'article premier, susceptibles d'tre entreposs ou manipuls, doivent tre tanches, avec enveloppe mtallique tanche s'ils sont en verre."}},{article_id:"pi_art_3_affichage_inflammable",code:{fr:"Article 3",en:"Article 3"},text:{fr:'Affichage de la dnomination du liquide contenu dans les rcipients avec mention "liquide particulirement inflammable".',en:'Affichage de la dnomination du liquide contenu dans les rcipients avec mention "liquide particulirement inflammable".'}},{article_id:"pi_art_4_quantite_journee",code:{fr:"Article 4",en:"Article 4"},text:{fr:"Entreposer juste la quantit ncessaire  la consommation d'une journe. Les rcipients vides doivent tre bouchs et ne doivent jamais sjourner dans ces locaux.",en:"Entreposer juste la quantit ncessaire  la consommation d'une journe. Les rcipients vides doivent tre bouchs et ne doivent jamais sjourner dans ces locaux."}},{article_id:"pi_art_5_transvasement",code:{fr:"Article 5",en:"Article 5"},text:{fr:"Lorsque les rcipients ont une capacit suprieure  20 litres, le transvasement de ces liquides ne peut se faire qu' l'aide soit d'un dispositif vitant le renversement du rcipient (siphons ou vide-touries), soit de pompes ou autres dispositifs tanches.",en:"Lorsque les rcipients ont une capacit suprieure  20 litres, le transvasement de ces liquides ne peut se faire qu' l'aide soit d'un dispositif vitant le renversement du rcipient (siphons ou vide-touries), soit de pompes ou autres dispositifs tanches."}},{article_id:"pi_art_6_interdictions_local",code:{fr:"Article 6",en:"Article 6"},text:{fr:"Les locaux o sont entreposs, manipuls ou employs ces liquides en quantit suprieure  deux litres ne doivent jamais contenir aucun foyer, aucune flamme, aucun appareil pouvant donner lieu  production extrieure d'tincelles lectriques ou prsentant des parties susceptibles d'tre portes  l'incandescence. Ils ne peuvent tre mis en communication directe avec des locaux prsentant des dangers d'inflammation du mme ordre. Lesdits locaux ne peuvent tre clairs que par des lampes lectriques munies d'une double enveloppe ; les conducteurs lectriques doivent tre installs selon les rgles de l'art et de faon  viter tout court-circuit. Il est interdit d'apporter dans ces locaux une bougie ou une lampe allume, ou tout autre objet produisant des flammes. Il est galement interdit d'y fumer. Cette interdiction doit faire l'objet d'un affichage en franais et en arabe, en caractres trs apparents,  l'entre des locaux. Il est interdit de procder, par un dispositif quelconque, au chauffage des locaux o sont entreposs l'ther, le sulfure de carbone ou les solutions contenant plus de 30 % de l'un ou l'autre de ces produits. Dans les locaux o est manipul du sulfure de carbone, ne peuvent exister ou tre introduits des matires ou objets d'une temprature suprieure  120 centigrades.",en:"Les locaux o sont entreposs, manipuls ou employs ces liquides en quantit suprieure  deux litres ne doivent jamais contenir aucun foyer, aucune flamme, aucun appareil pouvant donner lieu  production extrieure d'tincelles lectriques ou prsentant des parties susceptibles d'tre portes  l'incandescence. Ils ne peuvent tre mis en communication directe avec des locaux prsentant des dangers d'inflammation du mme ordre. Lesdits locaux ne peuvent tre clairs que par des lampes lectriques munies d'une double enveloppe ; les conducteurs lectriques doivent tre installs selon les rgles de l'art et de faon  viter tout court-circuit. Il est interdit d'apporter dans ces locaux une bougie ou une lampe allume, ou tout autre objet produisant des flammes. Il est galement interdit d'y fumer. Cette interdiction doit faire l'objet d'un affichage en franais et en arabe, en caractres trs apparents,  l'entre des locaux. Il est interdit de procder, par un dispositif quelconque, au chauffage des locaux o sont entreposs l'ther, le sulfure de carbone ou les solutions contenant plus de 30 % de l'un ou l'autre de ces produits. Dans les locaux o est manipul du sulfure de carbone, ne peuvent exister ou tre introduits des matires ou objets d'une temprature suprieure  120 centigrades."}},{article_id:"pi_art_7_ventilation",code:{fr:"Article 7",en:"Article 7"},text:{fr:"Les locaux viss  l'article prcdent doivent tre parfaitement ventils.",en:"Les locaux viss  l'article prcdent doivent tre parfaitement ventils."}}]}]},n_e={section_id:"page_9",title:{fr:"9. Conduite routire",en:"9. Road driving"},chapters:[{chapter_id:"conduite_professionnelle",title:{fr:"Chapitre VI : De la conduite professionnelle",en:"Chapter VI: Professional driving"},articles:[{article_id:"cr_art_40_autorisation",code:{fr:"Article 40",en:"Article 40"},text:{fr:`Nul ne peut conduire les vhicules cits ci-aprs,  titre professionnel, sil nest pas titulaire dune autorisation de conducteur professionnel : - Les vhicules dont le poids total en charge dpasse les 3500 Kg, pour le transport de marchandise pour le compte d'autrui ou pour le compte propre. - Les vhicules de transport public de personnes. - Les vhicules dont la conduite ncessite le permis de conduire 'D' ou 'E' pour le transport de personnel ou le transport scolaire. - Les taxis de la premire et la deuxime catgorie. - Les autobus de transport urbain. L'autorisation de conduite professionnelle est dlivre par l'administration au demandeur ayant suivi une formation de qualification initiale sous forme de carte dsigne par la prsente loi "carte de conducteur professionnel".`,en:`Nul ne peut conduire les vhicules cits ci-aprs,  titre professionnel, sil nest pas titulaire dune autorisation de conducteur professionnel : - Les vhicules dont le poids total en charge dpasse les 3500 Kg, pour le transport de marchandise pour le compte d'autrui ou pour le compte propre. - Les vhicules de transport public de personnes. - Les vhicules dont la conduite ncessite le permis de conduire 'D' ou 'E' pour le transport de personnel ou le transport scolaire. - Les taxis de la premire et la deuxime catgorie. - Les autobus de transport urbain. L'autorisation de conduite professionnelle est dlivre par l'administration au demandeur ayant suivi une formation de qualification initiale sous forme de carte dsigne par la prsente loi "carte de conducteur professionnel".`}},{article_id:"cr_art_42_formation",code:{fr:"Article 42",en:"Article 42"},text:{fr:"La formation de qualification et formation continue vises aux articles 40 et 41 ci-dessus doivent porter sur : - L'utilisation rationnelle du vhicule en fonction de ses caractristiques techniques. - L'adoption d'une attitude approprie en situation d'urgence pour anticiper les dangers et respecter les autres usagers de la voie publique. - L'utilisation des dispositifs de contrle de scurit. - L'application des rgles de scurit et l'adaptation du conducteur  l'environnement professionnel de la conduite. - L'acquisition et/ou l'actualisation des connaissances permettant d'appliquer les textes lgislatifs et rglementaires relatifs aux transports, les rgles de la scurit de la circulation routire ainsi que la lgislation du travail. - La matrise des rgles de scurit lors de chargement/dchargement ainsi que des rgles d'arrimage et la prise en compte des dangers des marchandises transportes.",en:"La formation de qualification et formation continue vises aux articles 40 et 41 ci-dessus doivent porter sur : - L'utilisation rationnelle du vhicule en fonction de ses caractristiques techniques. - L'adoption d'une attitude approprie en situation d'urgence pour anticiper les dangers et respecter les autres usagers de la voie publique. - L'utilisation des dispositifs de contrle de scurit. - L'application des rgles de scurit et l'adaptation du conducteur  l'environnement professionnel de la conduite. - L'acquisition et/ou l'actualisation des connaissances permettant d'appliquer les textes lgislatifs et rglementaires relatifs aux transports, les rgles de la scurit de la circulation routire ainsi que la lgislation du travail. - La matrise des rgles de scurit lors de chargement/dchargement ainsi que des rgles d'arrimage et la prise en compte des dangers des marchandises transportes."}}]}]},s_e={section_id:"page_10",title:{fr:"10. Machines",en:"10. Machines"},chapters:[{chapter_id:"machines",title:{fr:"Dispositions",en:"Provisions"},articles:[{article_id:"m_art_7_notice_instruction",code:{fr:"Article 7",en:"Article 7"},text:{fr:"Lemployeur doit sassurer que tous les appareils ou les machines de mme type sont accompagns dune notice dinstruction tablie par le constructeur et indiquant les conditions de manutention, dinstallation, dutilisation et dentretien et prcisant les mesures dhygine et de scurit  prendre lors de ces oprations, et comporte les plans et schmas ncessaires pour lentretien et les vrifications techniques dappareils ou de machines. Pour les appareils portatifs pour emploi  la main, la notice doit en outre mentionner la nature et les caractristiques des accessoires qui peuvent leur tre adapts.",en:"Lemployeur doit sassurer que tous les appareils ou les machines de mme type sont accompagns dune notice dinstruction tablie par le constructeur et indiquant les conditions de manutention, dinstallation, dutilisation et dentretien et prcisant les mesures dhygine et de scurit  prendre lors de ces oprations, et comporte les plans et schmas ncessaires pour lentretien et les vrifications techniques dappareils ou de machines. Pour les appareils portatifs pour emploi  la main, la notice doit en outre mentionner la nature et les caractristiques des accessoires qui peuvent leur tre adapts."}}]}]},i_e={section_id:"normes_obligatoires",title:{fr:"12. Normes obligatoires",en:"12. Mandatory standards"},chapters:[{chapter_id:"no_main",title:{fr:"Dispositions",en:"Provisions"},articles:[{article_id:"no_arrete_2008",code:{fr:"Arrt 12 Dc 2008",en:"Decree Dec 12, 2008"},text:{fr:`Arrt 12 dcembre 2008 rendant d'application obligatoire de normes
Les normes marocaines annexes au prsent arrt sont rendues d'application obligatoire 3 mois aprs la publication du prsent arrt au " Bulletin officiel ".`,en:`Arrt 12 dcembre 2008 rendant d'application obligatoire de normes
Les normes marocaines annexes au prsent arrt sont rendues d'application obligatoire 3 mois aprs la publication du prsent arrt au " Bulletin officiel ".`}},{article_id:"no_normes_liste",code:{fr:"Liste de normes",en:"Standards list"},text:{fr:`- Scurit des appareils lectrodomestiques et analogues - Prescriptions gnrales.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les fers  repasser lectriques.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les grilles pain, les grils, les cocottes et appareils analogues
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour friteuses, les poles  frire et appareils analogues
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les machines de cuisine.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les appareils de chauffage des liquides.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les chauffe- eau instantans.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les aspirateurs et les appareils de nettoyage  aspiration d'eau.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les essoreuses centrifuges.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les lave-vaisselle.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les friteuses lectriques  usage collectif.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les cuisinires, les fours, les tables de cuisson et les foyers de cuisson lectriques  usage collectif
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les plaques  griller lectriques  usage collectif.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les sauteuses lectriques  usage collectif.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les grilles et grille-pain lectriques  usage collectif.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les lave- vaisselle lectriques  usage collectif.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les appareils de chauffage et accumulation.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les machines de cuisine lectriques  usage collectifs.
- Emballages en matires plastiques- Migration des constituants des matriaux et objets en matire plastique destins  entrer en contact avec les denres alimentaires- Rgles de base.
- Gants de protection contre les produits chimiques et les micro-organismes- Technologie et performances requises. EN 374
- Gants de protection contre les risques mcaniques. EN 388
- Gants de protection contre les risques thermiques- chaleur et/ou feu. EN 388
- Gants de protection contre le froid.
- Gants de protection pour les sapeurs- pompiers.
- Chaussures de scurit  usage professionnel- Spcification EN 20345
- Chaussures de scurit  usage professionnel- Spcifications additionnelles. EN 20345
- Sont rendues d'application obligatoire les normes dsignes ci-aprs : NM 21.9.014 : extincteurs mobiles - Rgle d'installation ;
- NM 21.9.015 : extincteurs d'incendie portatifs - Caractristiques et essais.`,en:`- Scurit des appareils lectrodomestiques et analogues - Prescriptions gnrales.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les fers  repasser lectriques.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les grilles pain, les grils, les cocottes et appareils analogues
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour friteuses, les poles  frire et appareils analogues
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les machines de cuisine.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les appareils de chauffage des liquides.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les chauffe- eau instantans.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les aspirateurs et les appareils de nettoyage  aspiration d'eau.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les essoreuses centrifuges.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les lave-vaisselle.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les friteuses lectriques  usage collectif.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les cuisinires, les fours, les tables de cuisson et les foyers de cuisson lectriques  usage collectif
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les plaques  griller lectriques  usage collectif.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les sauteuses lectriques  usage collectif.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les grilles et grille-pain lectriques  usage collectif.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les lave- vaisselle lectriques  usage collectif.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les appareils de chauffage et accumulation.
- Scurit des appareils lectrodomestiques et analogues- Rgles particulires pour les machines de cuisine lectriques  usage collectifs.
- Emballages en matires plastiques- Migration des constituants des matriaux et objets en matire plastique destins  entrer en contact avec les denres alimentaires- Rgles de base.
- Gants de protection contre les produits chimiques et les micro-organismes- Technologie et performances requises. EN 374
- Gants de protection contre les risques mcaniques. EN 388
- Gants de protection contre les risques thermiques- chaleur et/ou feu. EN 388
- Gants de protection contre le froid.
- Gants de protection pour les sapeurs- pompiers.
- Chaussures de scurit  usage professionnel- Spcification EN 20345
- Chaussures de scurit  usage professionnel- Spcifications additionnelles. EN 20345
- Sont rendues d'application obligatoire les normes dsignes ci-aprs : NM 21.9.014 : extincteurs mobiles - Rgle d'installation ;
- NM 21.9.015 : extincteurs d'incendie portatifs - Caractristiques et essais.`}}]}]},o_e={section_id:"transport_marchandises",title:{fr:"15. Transport marchandises",en:"15. Freight transport"},chapters:[{chapter_id:"tm_main",title:{fr:"Dispositions",en:"Provisions"},articles:[{article_id:"tm_decret_2003",code:{fr:"Dcret 26 Mars 2003",en:"Decree Mar 26, 2003"},text:{fr:"Dcret du 26 Mars 2003 relatif au transport routier de marchandise pour compte d'autrui ou pour son compte propre",en:"Dcret du 26 Mars 2003 relatif au transport routier de marchandise pour compte d'autrui ou pour son compte propre"}},{article_id:"tm_arrete_2003",code:{fr:"Arrt 23 Sept 2003",en:"Decree Sep 23, 2003"},text:{fr:"Arrt du 23 septembre 2003 relatif au contrat type de transport routier de marchandises pour compte d'autrui et au contrat type pour la location de vhicules automobiles de transport de marchandises avec conducteur",en:"Arrt du 23 septembre 2003 relatif au contrat type de transport routier de marchandises pour compte d'autrui et au contrat type pour la location de vhicules automobiles de transport de marchandises avec conducteur"}}]}]},l_e={section_id:"produits_chimiques",title:{fr:"11. Produits chimiques",en:"11. Produits chimiques"},chapters:[{chapter_id:"agents_chimiques",title:{fr:"Agents chimiques dangereux",en:"Agents chimiques dangereux"},articles:[{article_id:"pc_art_4",code:{fr:"Article 4",en:"Article 4"},text:{fr:"Lemployeur doit sassurer que lemballage, ltiquetage et la fiche de donnes de scurit rpondent aux conditions du travail prvues par les normes marocaines relatives aux prparations chimiques dangereuses.",en:"Lemployeur doit sassurer que lemballage, ltiquetage et la fiche de donnes de scurit rpondent aux conditions du travail prvues par les normes marocaines relatives aux prparations chimiques dangereuses."}},{article_id:"pc_art_5",code:{fr:"Article 5",en:"Article 5"},text:{fr:"Lemployeur doit valuer les risques encourus pour la sant et la scurit des salaris pour toute activit susceptible de prsenter un risque dexposition  des agents chimiques dangereux. Cette valuation est renouvele, au moins une fois par an, et notamment  loccasion de toute modification importante des conditions du travail pouvant affecter la sant ou la scurit des salaris.",en:"Lemployeur doit valuer les risques encourus pour la sant et la scurit des salaris pour toute activit susceptible de prsenter un risque dexposition  des agents chimiques dangereux. Cette valuation est renouvele, au moins une fois par an, et notamment  loccasion de toute modification importante des conditions du travail pouvant affecter la sant ou la scurit des salaris."}},{article_id:"pc_art_8",code:{fr:"Article 8",en:"Article 8"},text:{fr:"Toute activit nouvelle impliquant des agents chimiques dangereux ne peut tre entreprise quaprs ralisation de lvaluation des risques et mise en uvre des mesures de prvention appropries.",en:"Toute activit nouvelle impliquant des agents chimiques dangereux ne peut tre entreprise quaprs ralisation de lvaluation des risques et mise en uvre des mesures de prvention appropries."}},{article_id:"pc_art_9",code:{fr:"Article 9",en:"Article 9"},text:{fr:"Les rsultats de lvaluation des risques chimiques sont communiqus, sous une forme approprie, au comit de scurit et dhygine ou,  dfaut, aux reprsentants des salaris et, en labsence des reprsentants des salaris,  tout salari intervenant dans lentreprise ainsi quau mdecin du travail. Cette communication intervient, en particulier,  la suite de la mise  jour des rsultats de lopration dvaluation ou de toute modification importante des mthodes et des conditions de travail susceptible daffecter la sant et la scurit des salaris.",en:"Les rsultats de lvaluation des risques chimiques sont communiqus, sous une forme approprie, au comit de scurit et dhygine ou,  dfaut, aux reprsentants des salaris et, en labsence des reprsentants des salaris,  tout salari intervenant dans lentreprise ainsi quau mdecin du travail. Cette communication intervient, en particulier,  la suite de la mise  jour des rsultats de lopration dvaluation ou de toute modification importante des mthodes et des conditions de travail susceptible daffecter la sant et la scurit des salaris."}},{article_id:"pc_art_10",code:{fr:"Article 10",en:"Article 10"},text:{fr:"Les rsultats de lvaluation des risques chimiques sont consigns dans une fiche dvaluation des risques, mise  la disposition de l'agent charg de linspection du travail.",en:"Les rsultats de lvaluation des risques chimiques sont consigns dans une fiche dvaluation des risques, mise  la disposition de l'agent charg de linspection du travail."}},{article_id:"pc_art_11",code:{fr:"Article 11",en:"Article 11"},text:{fr:"L'employeur doit dfinir et appliquer les mesures de prvention visant  supprimer ou  rduire au minimum le risque dexposition  des agents chimiques dangereux : 1 en concevant et en organisant des mthodes de travail adaptes. 2 en prvoyant un matriel adquat ainsi que des procdures dentretien rgulires qui protgent la sant et la scurit des salaris. 3 en rduisant au minimum le nombre de salaris exposs ou susceptibles de ltre. 4 en rduisant au minimum la dure et lintensit de l'exposition. 5 en imposant des mesures dhygine appropries. 6 en rduisant la quantit dagents chimiques prsents sur le lieu de travail pour le type de travail demand. 7 en concevant des procdures de travail adquates, notamment des dispositions assurant la scurit lors de la manutention, du stockage et du transport sur le lieu de travail des agents chimiques dangereux et des dchets contenant de tels agents.",en:"L'employeur doit dfinir et appliquer les mesures de prvention visant  supprimer ou  rduire au minimum le risque dexposition  des agents chimiques dangereux : 1 en concevant et en organisant des mthodes de travail adaptes. 2 en prvoyant un matriel adquat ainsi que des procdures dentretien rgulires qui protgent la sant et la scurit des salaris. 3 en rduisant au minimum le nombre de salaris exposs ou susceptibles de ltre. 4 en rduisant au minimum la dure et lintensit de l'exposition. 5 en imposant des mesures dhygine appropries. 6 en rduisant la quantit dagents chimiques prsents sur le lieu de travail pour le type de travail demand. 7 en concevant des procdures de travail adquates, notamment des dispositions assurant la scurit lors de la manutention, du stockage et du transport sur le lieu de travail des agents chimiques dangereux et des dchets contenant de tels agents."}},{article_id:"pc_art_12",code:{fr:"Article 12",en:"Article 12"},text:{fr:"Lorsque les rsultats de lvaluation des risques rvlent un risque pour la sant et la scurit des salaris, l'employeur doit prendre les dispositions suivantes : 1 mesures et moyens de prvention prvus aux articles 14  21 ci-dessous. 2 vrifications des installations et quipements de protections collectives prvues aux articles 22  24 ci-dessous. 3 contrle de lexposition prvu aux articles 25  29 ci-dessous. 4 mesures en cas daccident ou dincident prvu aux articles 30  34 ci-dessous. 5 tablissement de la notice de poste prvue  larticle 36 ci-dessous. 6 suivi et surveillance mdicale des salaris prvus aux articles 37  54 ci-dessous.",en:"Lorsque les rsultats de lvaluation des risques rvlent un risque pour la sant et la scurit des salaris, l'employeur doit prendre les dispositions suivantes : 1 mesures et moyens de prvention prvus aux articles 14  21 ci-dessous. 2 vrifications des installations et quipements de protections collectives prvues aux articles 22  24 ci-dessous. 3 contrle de lexposition prvu aux articles 25  29 ci-dessous. 4 mesures en cas daccident ou dincident prvu aux articles 30  34 ci-dessous. 5 tablissement de la notice de poste prvue  larticle 36 ci-dessous. 6 suivi et surveillance mdicale des salaris prvus aux articles 37  54 ci-dessous."}},{article_id:"pc_art_13",code:{fr:"Article 13",en:"Article 13"},text:{fr:"Lorsque les rsultats de lvaluation des risques montrent que les quantits dans lesquelles un agent chimique dangereux est prsent sur le lieu de travail ne prsentent quun risque faible pour la sant et la scurit des salaris et que les mesures de prvention prises en application de larticle 11 ci-dessus sont suffisantes pour rduire ce risque, les dispositions de larticle 12 ci-dessus ne sont pas applicables.",en:"Lorsque les rsultats de lvaluation des risques montrent que les quantits dans lesquelles un agent chimique dangereux est prsent sur le lieu de travail ne prsentent quun risque faible pour la sant et la scurit des salaris et que les mesures de prvention prises en application de larticle 11 ci-dessus sont suffisantes pour rduire ce risque, les dispositions de larticle 12 ci-dessus ne sont pas applicables."}},{article_id:"pc_art_14",code:{fr:"Article 14",en:"Article 14"},text:{fr:"Le risque que prsente un agent chimique dangereux pour la sant et la scurit des salaris doit tre supprim. Lorsque la suppression de ce risque est impossible, ce dernier est rduit au minimum par la substitution dun agent chimique dangereux par un autre agent chimique ou par un procd non dangereux ou moins dangereux.",en:"Le risque que prsente un agent chimique dangereux pour la sant et la scurit des salaris doit tre supprim. Lorsque la suppression de ce risque est impossible, ce dernier est rduit au minimum par la substitution dun agent chimique dangereux par un autre agent chimique ou par un procd non dangereux ou moins dangereux."}},{article_id:"pc_art_15",code:{fr:"Article 15",en:"Article 15"},text:{fr:"Lorsque la substitution dun agent chimique dangereux nest pas possible au regard de la nature de lactivit, le risque est rduit au minimum par la mise en uvre, par ordre de priorit, des mesures suivantes : 1 conception des procds de travail et contrles techniques appropris. 2 utilisation des quipements et des matriels adquats de manire  viter ou  rduire le plus possible la libration dagents chimiques dangereux sur le lieu de travail. 3 application,  la source du risque, des mesures efficaces de protection collective, telles quune bonne ventilation et des mesures appropries dorganisation du travail. 4 utilisation, si lexposition ne peut tre rduite par dautres moyens, de moyens de protection individuelle, y compris dquipements de protection individuelle.",en:"Lorsque la substitution dun agent chimique dangereux nest pas possible au regard de la nature de lactivit, le risque est rduit au minimum par la mise en uvre, par ordre de priorit, des mesures suivantes : 1 conception des procds de travail et contrles techniques appropris. 2 utilisation des quipements et des matriels adquats de manire  viter ou  rduire le plus possible la libration dagents chimiques dangereux sur le lieu de travail. 3 application,  la source du risque, des mesures efficaces de protection collective, telles quune bonne ventilation et des mesures appropries dorganisation du travail. 4 utilisation, si lexposition ne peut tre rduite par dautres moyens, de moyens de protection individuelle, y compris dquipements de protection individuelle."}},{article_id:"pc_art_16",code:{fr:"Article 16",en:"Article 16"},text:{fr:"Lemployeur doit prendre les mesures techniques et dfinir les mesures dorganisation du travail appropries pour assurer la protection des salaris contre les dangers dcoulant des proprits chimiques et physico-chimiques des agents chimiques. Ces mesures portent, notamment, sur le stockage, la manutention et lisolement des agents chimiques incompatibles. A cet effet, lemployeur doit prendre les mesures appropries : 1 pour empcher la prsence sur le lieu de travail de concentrations dangereuses de substances inflammables ou de quantits dangereuses de substances chimiques instables ; 2 pour viter les risques de dbordement ou dclaboussures, ainsi que de dversement par rupture des parois des cuves, bassins, rservoirs et rcipients de toute nature contenant des produits susceptibles de provoquer des brlures dorigine thermique ou chimique.",en:"Lemployeur doit prendre les mesures techniques et dfinir les mesures dorganisation du travail appropries pour assurer la protection des salaris contre les dangers dcoulant des proprits chimiques et physico-chimiques des agents chimiques. Ces mesures portent, notamment, sur le stockage, la manutention et lisolement des agents chimiques incompatibles. A cet effet, lemployeur doit prendre les mesures appropries : 1 pour empcher la prsence sur le lieu de travail de concentrations dangereuses de substances inflammables ou de quantits dangereuses de substances chimiques instables ; 2 pour viter les risques de dbordement ou dclaboussures, ainsi que de dversement par rupture des parois des cuves, bassins, rservoirs et rcipients de toute nature contenant des produits susceptibles de provoquer des brlures dorigine thermique ou chimique."}},{article_id:"pc_art_17",code:{fr:"Article 17",en:"Article 17"},text:{fr:"Lorsque les mesures prvues  larticle 16 ci-dessus ne sont pas ralisables au regard de la nature de lactivit, lemployeur doit prendre les dispositions ncessaires pour : 1 viter la prsence sur le lieu de travail de sources dignition susceptibles de provoquer des incendies ou des explosions, ou lexistence de conditions dfavorables pouvant aboutir  ce que des substances ou des mlanges de substances chimiques instables aient des effets physiques dangereux ; 2 attnuer les effets nuisibles pour la sant et la scurit des salaris en cas dincendie ou dexplosion rsultant de linflammation de substances inflammables, ou les effets dangereux dus aux substances ou aux mlanges de substances chimiques instables.",en:"Lorsque les mesures prvues  larticle 16 ci-dessus ne sont pas ralisables au regard de la nature de lactivit, lemployeur doit prendre les dispositions ncessaires pour : 1 viter la prsence sur le lieu de travail de sources dignition susceptibles de provoquer des incendies ou des explosions, ou lexistence de conditions dfavorables pouvant aboutir  ce que des substances ou des mlanges de substances chimiques instables aient des effets physiques dangereux ; 2 attnuer les effets nuisibles pour la sant et la scurit des salaris en cas dincendie ou dexplosion rsultant de linflammation de substances inflammables, ou les effets dangereux dus aux substances ou aux mlanges de substances chimiques instables."}},{article_id:"pc_art_18",code:{fr:"Article 18",en:"Article 18"},text:{fr:"Lemployeur doit assurer lentretien des quipements de protection individuelle et des vtements de travail. Lorsque lentretien est ralis  lextrieur de ltablissement, le chef de lentreprise charge du transport et de lentretien doit tre inform de l'ventualit et de la nature de la contamination ainsi que de ses dangers. Le transport des vtements contamins est ralis dans des rcipients srs et identifiables.",en:"Lemployeur doit assurer lentretien des quipements de protection individuelle et des vtements de travail. Lorsque lentretien est ralis  lextrieur de ltablissement, le chef de lentreprise charge du transport et de lentretien doit tre inform de l'ventualit et de la nature de la contamination ainsi que de ses dangers. Le transport des vtements contamins est ralis dans des rcipients srs et identifiables."}},{article_id:"pc_art_19",code:{fr:"Article 19",en:"Article 19"},text:{fr:"Lemployeur, pour toutes les activits comportant un risque dexposition  des agents chimiques dangereux, doit prvoir des mesures dhygine appropries afin que les salaris ne mangent pas, ne boivent pas et ne fument pas dans les zones de travail concernes.",en:"Lemployeur, pour toutes les activits comportant un risque dexposition  des agents chimiques dangereux, doit prvoir des mesures dhygine appropries afin que les salaris ne mangent pas, ne boivent pas et ne fument pas dans les zones de travail concernes."}},{article_id:"pc_art_20",code:{fr:"Article 20",en:"Article 20"},text:{fr:"L'accs aux locaux de travail o sont utiliss des agents chimiques dangereux est limit aux personnes dont la mission lexige. Ces locaux font lobjet dune signalisation approprie rappelant notamment linterdiction dy pntrer sans motif de service et lexistence dun risque dmissions dangereuses pour la sant.",en:"L'accs aux locaux de travail o sont utiliss des agents chimiques dangereux est limit aux personnes dont la mission lexige. Ces locaux font lobjet dune signalisation approprie rappelant notamment linterdiction dy pntrer sans motif de service et lexistence dun risque dmissions dangereuses pour la sant."}},{article_id:"pc_art_21",code:{fr:"Article 21",en:"Article 21"},text:{fr:"Lors de travaux susceptibles dexposer  des gaz dltres dans des espaces confins tels que les puits, conduites de gaz, canaux de fume, fosses daisances, cuves ou appareils quelconques, les salaris sont attachs par une ceinture ou protgs par un autre dispositif de scurit.",en:"Lors de travaux susceptibles dexposer  des gaz dltres dans des espaces confins tels que les puits, conduites de gaz, canaux de fume, fosses daisances, cuves ou appareils quelconques, les salaris sont attachs par une ceinture ou protgs par un autre dispositif de scurit."}},{article_id:"pc_art_22",code:{fr:"Article 22",en:"Article 22"},text:{fr:"Lemployeur doit assurer rgulirement la vrification et le maintien en parfait tat de fonctionnement des installations et quipements de protection collective.",en:"Lemployeur doit assurer rgulirement la vrification et le maintien en parfait tat de fonctionnement des installations et quipements de protection collective."}},{article_id:"pc_art_23",code:{fr:"Article 23",en:"Article 23"},text:{fr:"Lemployeur doit tablir, aprs avis du comit de scurit et dhygine ou,  dfaut, des dlgus des salaris, une notice fixant les conditions de lentretien des installations et des quipements de protection collective et les procdures  mettre en uvre pour assurer leur surveillance, notamment pour dtecter dventuelles dfaillances et les liminer.",en:"Lemployeur doit tablir, aprs avis du comit de scurit et dhygine ou,  dfaut, des dlgus des salaris, une notice fixant les conditions de lentretien des installations et des quipements de protection collective et les procdures  mettre en uvre pour assurer leur surveillance, notamment pour dtecter dventuelles dfaillances et les liminer."}},{article_id:"pc_art_24",code:{fr:"Article 24",en:"Article 24"},text:{fr:"Des visites priodiques destines  sassurer de ltat des cuves, bassins et rservoirs contenant des produits corrosifs doivent avoir lieu  intervalles nexcdant pas un an. Ces visites sont ralises par une personne qualifie sous la responsabilit de lemployeur.",en:"Des visites priodiques destines  sassurer de ltat des cuves, bassins et rservoirs contenant des produits corrosifs doivent avoir lieu  intervalles nexcdant pas un an. Ces visites sont ralises par une personne qualifie sous la responsabilit de lemployeur."}},{article_id:"pc_art_25",code:{fr:"Article 25",en:"Article 25"},text:{fr:"Lemployeur doit procder de faon rgulire aux mesures de concentration des agents chimiques pouvant prsenter un risque pour la sant et la scurit des salaris, au moins une fois par an, par des organismes qualifis. Les modalits et les conditions de qualification de ces organismes seront fixes par lautorit gouvernementale charge de lemploi. De mme, il procde  de telles mesures lors de tout changement intervenant dans les conditions susceptibles davoir des consquences sur lexposition des salaris aux agents chimiques.",en:"Lemployeur doit procder de faon rgulire aux mesures de concentration des agents chimiques pouvant prsenter un risque pour la sant et la scurit des salaris, au moins une fois par an, par des organismes qualifis. Les modalits et les conditions de qualification de ces organismes seront fixes par lautorit gouvernementale charge de lemploi. De mme, il procde  de telles mesures lors de tout changement intervenant dans les conditions susceptibles davoir des consquences sur lexposition des salaris aux agents chimiques."}},{article_id:"pc_art_26",code:{fr:"Article 26",en:"Article 26"},text:{fr:"Lorsque des valeurs limites dexposition professionnelle ont t tablies pour un agent chimique dangereux, lemployeur doit procder rgulirement  des contrles, en particulier lors de tout changement susceptible davoir des consquences nfastes sur lexposition des salaris.",en:"Lorsque des valeurs limites dexposition professionnelle ont t tablies pour un agent chimique dangereux, lemployeur doit procder rgulirement  des contrles, en particulier lors de tout changement susceptible davoir des consquences nfastes sur lexposition des salaris."}},{article_id:"pc_art_27",code:{fr:"Article 27",en:"Article 27"},text:{fr:"Tout dpassement des valeurs limites dexposition professionnelle contraignantes ncessite sans dlai ltablissement dun nouveau contrle par lemployeur. Si le dpassement est confirm, les mesures de prvention et de protection ncessaires  remdier  la situation sont mises en uvre. Lautorit gouvernementale charge de lEmploi fixera les valeurs limites dexposition professionnelle  certains produits chimiques dangereux.",en:"Tout dpassement des valeurs limites dexposition professionnelle contraignantes ncessite sans dlai ltablissement dun nouveau contrle par lemployeur. Si le dpassement est confirm, les mesures de prvention et de protection ncessaires  remdier  la situation sont mises en uvre. Lautorit gouvernementale charge de lEmploi fixera les valeurs limites dexposition professionnelle  certains produits chimiques dangereux."}},{article_id:"pc_art_28",code:{fr:"Article 28",en:"Article 28"},text:{fr:"Tout dpassement des valeurs limites dexposition professionnelle est pris en compte pour apprcier la ncessit de procder  une nouvelle valuation des risques dexposition.",en:"Tout dpassement des valeurs limites dexposition professionnelle est pris en compte pour apprcier la ncessit de procder  une nouvelle valuation des risques dexposition."}},{article_id:"pc_art_29",code:{fr:"Article 29",en:"Article 29"},text:{fr:"Lorsquil est inform par le mdecin du travail du dpassement dune valeur limite biologique dun agent chimique dangereux, dans les conditions prvues  larticle 41 ci-dessous, lemployeur : 1 procde  lvaluation des risques conformment aux articles 5  10 ci-dessus ; 2 met en uvre les mesures et moyens de prvention prvus aux articles 11, 14 et 15 ci-dessus.",en:"Lorsquil est inform par le mdecin du travail du dpassement dune valeur limite biologique dun agent chimique dangereux, dans les conditions prvues  larticle 41 ci-dessous, lemployeur : 1 procde  lvaluation des risques conformment aux articles 5  10 ci-dessus ; 2 met en uvre les mesures et moyens de prvention prvus aux articles 11, 14 et 15 ci-dessus."}},{article_id:"pc_art_30",code:{fr:"Article 30",en:"Article 30"},text:{fr:"Des systmes dalarme et autres systmes de communication doivent tre installs afin de permettre, en cas daccident, d'incident ou durgence due  la prsence dagents chimiques dangereux sur le lieu de travail : 1 une raction approprie ; 2 la mise en uvre immdiate, en tant que de besoin, des mesures qui simposent ; 3 le dclenchement des oprations de secours, dvacuation et de sauvetage.",en:"Des systmes dalarme et autres systmes de communication doivent tre installs afin de permettre, en cas daccident, d'incident ou durgence due  la prsence dagents chimiques dangereux sur le lieu de travail : 1 une raction approprie ; 2 la mise en uvre immdiate, en tant que de besoin, des mesures qui simposent ; 3 le dclenchement des oprations de secours, dvacuation et de sauvetage."}},{article_id:"pc_art_31",code:{fr:"Article 31",en:"Article 31"},text:{fr:"En prsence dagents chimiques dangereux sur les lieux de travail, ces lieux doivent tre quips de matriel de premier secours appropri. Des exercices de scurit pertinents sont organiss  intervalles rguliers.",en:"En prsence dagents chimiques dangereux sur les lieux de travail, ces lieux doivent tre quips de matriel de premier secours appropri. Des exercices de scurit pertinents sont organiss  intervalles rguliers."}},{article_id:"pc_art_32",code:{fr:"Article 32",en:"Article 32"},text:{fr:"Lorsquun accident, un incident ou une urgence survient, lemployeur doit prendre immdiatement des mesures pour en attnuer les effets et en informer les salaris. Lemployeur doit mettre en uvre les mesures appropries pour remdier le plus rapidement possible  la situation et afin de rtablir une situation normale.",en:"Lorsquun accident, un incident ou une urgence survient, lemployeur doit prendre immdiatement des mesures pour en attnuer les effets et en informer les salaris. Lemployeur doit mettre en uvre les mesures appropries pour remdier le plus rapidement possible  la situation et afin de rtablir une situation normale."}},{article_id:"pc_art_33",code:{fr:"Article 33",en:"Article 33"},text:{fr:"Seuls les salaris chargs de lexcution des rparations ou dautres travaux ncessaires au rtablissement de la situation sont autoriss  travailler dans la zone affecte. Ils doivent disposer dquipements de protection individuelle appropris quils sont tenus dutiliser pendant la dure de leur intervention. Les personnes non protges ne sont pas autorises  rester dans ces zones. En tout tat de cause, lemployeur doit veiller  ce que lexposition des salaris ne soit pas permanente et soit limite pour chacun au strict ncessaire.",en:"Seuls les salaris chargs de lexcution des rparations ou dautres travaux ncessaires au rtablissement de la situation sont autoriss  travailler dans la zone affecte. Ils doivent disposer dquipements de protection individuelle appropris quils sont tenus dutiliser pendant la dure de leur intervention. Les personnes non protges ne sont pas autorises  rester dans ces zones. En tout tat de cause, lemployeur doit veiller  ce que lexposition des salaris ne soit pas permanente et soit limite pour chacun au strict ncessaire."}},{article_id:"pc_art_34",code:{fr:"Article 34",en:"Article 34"},text:{fr:"Lemployeur doit veiller  ce que les informations sur les mesures durgence se rapportant  des agents chimiques dangereux soient disponibles, notamment pour les services dintervention, internes ou externes, comptents en cas daccident ou dincident. Ces informations comprennent : 1 une mention pralable des dangers de lactivit, des mesures didentification du danger, des prcautions et des procdures pertinentes afin que les services durgence puissent prparer leurs propres procdures dintervention et mesures de prcaution ; 2 toute information disponible sur les dangers susceptibles de se prsenter lors dun accident ou dun incident ; 3 les mesures dfinies en application des articles 30 et 31 ci-dessus.",en:"Lemployeur doit veiller  ce que les informations sur les mesures durgence se rapportant  des agents chimiques dangereux soient disponibles, notamment pour les services dintervention, internes ou externes, comptents en cas daccident ou dincident. Ces informations comprennent : 1 une mention pralable des dangers de lactivit, des mesures didentification du danger, des prcautions et des procdures pertinentes afin que les services durgence puissent prparer leurs propres procdures dintervention et mesures de prcaution ; 2 toute information disponible sur les dangers susceptibles de se prsenter lors dun accident ou dun incident ; 3 les mesures dfinies en application des articles 30 et 31 ci-dessus."}},{article_id:"pc_art_35",code:{fr:"Article 35",en:"Article 35"},text:{fr:"Lemployeur doit veiller  ce que les salaris ainsi que le comit de scurit et dhygine ou,  dfaut, les dlgus des salaris : 1 reoivent des informations sous des formes appropries et priodiquement actualises sur les agents chimiques dangereux se trouvant sur le lieu de travail, telles que notamment leurs noms, les risques pour la sant et la scurit quils comportent et, le cas chant, les valeurs limites dexposition professionnelle et les valeurs limites biologiques qui leur sont applicables ; 2 aient accs aux fiches de donnes de scurit fournies par le fournisseur des agents chimiques ; 3 reoivent une formation et des informations sur les prcautions  prendre pour assurer leur protection et celle des autres salaris prsents sur le lieu de travail. Sont notamment portes  leur connaissance les consignes relatives aux mesures dhygine  respecter et  lutilisation des quipements de protection individuelle.",en:"Lemployeur doit veiller  ce que les salaris ainsi que le comit de scurit et dhygine ou,  dfaut, les dlgus des salaris : 1 reoivent des informations sous des formes appropries et priodiquement actualises sur les agents chimiques dangereux se trouvant sur le lieu de travail, telles que notamment leurs noms, les risques pour la sant et la scurit quils comportent et, le cas chant, les valeurs limites dexposition professionnelle et les valeurs limites biologiques qui leur sont applicables ; 2 aient accs aux fiches de donnes de scurit fournies par le fournisseur des agents chimiques ; 3 reoivent une formation et des informations sur les prcautions  prendre pour assurer leur protection et celle des autres salaris prsents sur le lieu de travail. Sont notamment portes  leur connaissance les consignes relatives aux mesures dhygine  respecter et  lutilisation des quipements de protection individuelle."}},{article_id:"pc_art_36",code:{fr:"Article 36",en:"Article 36"},text:{fr:"Lemployeur doit tablir une notice, dnomme notice de poste, pour chaque poste de travail ou situation de travail exposant les salaris  des agents chimiques dangereux. Cette notice, actualise en tant que de besoin, est destine  informer les salaris des risques auxquels leur travail peut les exposer et des dispositions prises pour les viter. La notice rappelle les rgles dhygine applicables ainsi que, le cas chant, les consignes relatives  lemploi des quipements de protection collective ou individuelle.",en:"Lemployeur doit tablir une notice, dnomme notice de poste, pour chaque poste de travail ou situation de travail exposant les salaris  des agents chimiques dangereux. Cette notice, actualise en tant que de besoin, est destine  informer les salaris des risques auxquels leur travail peut les exposer et des dispositions prises pour les viter. La notice rappelle les rgles dhygine applicables ainsi que, le cas chant, les consignes relatives  lemploi des quipements de protection collective ou individuelle."}},{article_id:"pc_art_37",code:{fr:"Article 37",en:"Article 37"},text:{fr:"Lemployeur tient une liste actualise des salaris exposs aux agents chimiques dangereux. Cette liste prcise la nature de lexposition, sa dure ainsi que son degr, tel quil est connu par les rsultats des contrles raliss.",en:"Lemployeur tient une liste actualise des salaris exposs aux agents chimiques dangereux. Cette liste prcise la nature de lexposition, sa dure ainsi que son degr, tel quil est connu par les rsultats des contrles raliss."}},{article_id:"pc_art_38",code:{fr:"Article 38",en:"Article 38"},text:{fr:"Lemployeur doit tablir, pour chacun des salaris exposs aux agents chimiques dangereux, une fiche dexposition indiquant : 1 la nature du travail ralis, les caractristiques des produits, les priodes dexposition et les autres risques ou nuisances dorigine chimique, physique ou biologique du poste de travail ; 2 les dates et les rsultats des contrles de lexposition au poste de travail ainsi que la dure et limportance des expositions accidentelles.",en:"Lemployeur doit tablir, pour chacun des salaris exposs aux agents chimiques dangereux, une fiche dexposition indiquant : 1 la nature du travail ralis, les caractristiques des produits, les priodes dexposition et les autres risques ou nuisances dorigine chimique, physique ou biologique du poste de travail ; 2 les dates et les rsultats des contrles de lexposition au poste de travail ainsi que la dure et limportance des expositions accidentelles."}},{article_id:"pc_art_39",code:{fr:"Article 39",en:"Article 39"},text:{fr:"Chaque salari intress est inform de lexistence de la fiche dexposition et a accs aux informations lintressant. Un exemplaire de cette fiche est transmis au mdecin du travail.",en:"Chaque salari intress est inform de lexistence de la fiche dexposition et a accs aux informations lintressant. Un exemplaire de cette fiche est transmis au mdecin du travail."}},{article_id:"pc_art_40",code:{fr:"Article 40",en:"Article 40"},text:{fr:"Les informations mentionnes  la prsente section doivent tre classes par poste de travail et tenues  disposition des membres du comit de scurit et dhygine ou,  dfaut, des dlgus des salaris.",en:"Les informations mentionnes  la prsente section doivent tre classes par poste de travail et tenues  disposition des membres du comit de scurit et dhygine ou,  dfaut, des dlgus des salaris."}},{article_id:"pc_art_41",code:{fr:"Article 41",en:"Article 41"},text:{fr:"Un salari ne peut tre affect  des travaux lexposant  des agents chimiques dangereux que sil a fait lobjet dun examen mdical pralable par le mdecin du travail et si la fiche mdicale daptitude tablie  cette occasion atteste quil ne prsente pas de contre-indication mdicale  ces travaux. Le mdecin du travail tablit la fiche mdicale daptitude en double exemplaire. Il en remet un exemplaire au salari et transmet lautre  lemployeur, qui le conserve pour tre prsent  tout moment, sur leur demande,  lagent charg de linspection du travail et au mdecin charg de linspection du travail. Cette fiche est renouvele au moins une fois par an, aprs examen par le mdecin du travail.",en:"Un salari ne peut tre affect  des travaux lexposant  des agents chimiques dangereux que sil a fait lobjet dun examen mdical pralable par le mdecin du travail et si la fiche mdicale daptitude tablie  cette occasion atteste quil ne prsente pas de contre-indication mdicale  ces travaux. Le mdecin du travail tablit la fiche mdicale daptitude en double exemplaire. Il en remet un exemplaire au salari et transmet lautre  lemployeur, qui le conserve pour tre prsent  tout moment, sur leur demande,  lagent charg de linspection du travail et au mdecin charg de linspection du travail. Cette fiche est renouvele au moins une fois par an, aprs examen par le mdecin du travail."}},{article_id:"pc_art_42",code:{fr:"Article 42",en:"Article 42"},text:{fr:"La forme de la fiche mdicale daptitude doit tre conforme au modle fix par arrt conjoint du ministre charg de lemploi et le ministre charg de la sant. La fiche mdicale daptitude indique la date de ltude du poste de travail et celle de la dernire mise  jour de la fiche dentreprise, et ne doit contenir aucun renseignement sur la nature des affections dont lagent serait ou aurait t atteint. Elle mentionne uniquement les contre-indications ou les recommandations concernant laffectation ventuelle  certains postes de travail.",en:"La forme de la fiche mdicale daptitude doit tre conforme au modle fix par arrt conjoint du ministre charg de lemploi et le ministre charg de la sant. La fiche mdicale daptitude indique la date de ltude du poste de travail et celle de la dernire mise  jour de la fiche dentreprise, et ne doit contenir aucun renseignement sur la nature des affections dont lagent serait ou aurait t atteint. Elle mentionne uniquement les contre-indications ou les recommandations concernant laffectation ventuelle  certains postes de travail."}},{article_id:"pc_art_43",code:{fr:"Article 43",en:"Article 43"},text:{fr:"Lexamen mdical pratiqu comprend un examen clinique gnral et, selon la nature de lexposition, un ou plusieurs examens spcialiss complmentaires auxquels le mdecin du travail procde ou fait procder. Ces examens sont  la charge de lemployeur.",en:"Lexamen mdical pratiqu comprend un examen clinique gnral et, selon la nature de lexposition, un ou plusieurs examens spcialiss complmentaires auxquels le mdecin du travail procde ou fait procder. Ces examens sont  la charge de lemployeur."}},{article_id:"pc_art_47",code:{fr:"Article 47",en:"Article 47"},text:{fr:"En dehors des visites priodiques, l'employeur fait examiner par le mdecin du travail tout salari expos  des agents chimiques dangereux qui se dclare incommod par des travaux quil excute. Cet examen peut tre ralis  la demande du salari. Le mdecin du travail est inform par lemployeur des absences, pour cause de maladie dune dure suprieure  dix jours, des salaris exposs  ces agents chimiques.",en:"En dehors des visites priodiques, l'employeur fait examiner par le mdecin du travail tout salari expos  des agents chimiques dangereux qui se dclare incommod par des travaux quil excute. Cet examen peut tre ralis  la demande du salari. Le mdecin du travail est inform par lemployeur des absences, pour cause de maladie dune dure suprieure  dix jours, des salaris exposs  ces agents chimiques."}},{article_id:"pc_art_51",code:{fr:"Article 51",en:"Article 51"},text:{fr:"Le mdecin du travail constitue et tient, pour chaque salari expos aux agents chimiques dangereux, un dossier individuel contenant : 1 une copie de la fiche dexposition prvue  larticle 38 ci-dessus ; 2 les dates et les rsultats des examens mdicaux pratiqus.",en:"Le mdecin du travail constitue et tient, pour chaque salari expos aux agents chimiques dangereux, un dossier individuel contenant : 1 une copie de la fiche dexposition prvue  larticle 38 ci-dessus ; 2 les dates et les rsultats des examens mdicaux pratiqus."}},{article_id:"pc_art_52",code:{fr:"Article 52",en:"Article 52"},text:{fr:"Le dossier mdical est conserv pendant au moins cinquante ans aprs la fin de la priode dexposition.",en:"Le dossier mdical est conserv pendant au moins cinquante ans aprs la fin de la priode dexposition."}}]},{chapter_id:"agents_biologiques",title:{fr:"Agents biologiques",en:"Agents biologiques"},articles:[{article_id:"ab_art_60",code:{fr:"Article 60",en:"Article 60"},text:{fr:"Lors de lvaluation des risques, lemployeur porte une attention particulire sur les dangers des agents biologiques susceptibles dtre prsents dans lorganisme des patients ou de personnes dcdes et chez les animaux vivants ou morts, dans les chantillons, les prlvements et les dchets qui en proviennent.",en:"Lors de lvaluation des risques, lemployeur porte une attention particulire sur les dangers des agents biologiques susceptibles dtre prsents dans lorganisme des patients ou de personnes dcdes et chez les animaux vivants ou morts, dans les chantillons, les prlvements et les dchets qui en proviennent."}},{article_id:"ab_art_61",code:{fr:"Article 61",en:"Article 61"},text:{fr:"Les rsultats de lvaluation des risques biologiques sont consigns dans une fiche dvaluation des risques, mise  la disposition de lagent charg de linspection du travail.",en:"Les rsultats de lvaluation des risques biologiques sont consigns dans une fiche dvaluation des risques, mise  la disposition de lagent charg de linspection du travail."}},{article_id:"ab_art_63",code:{fr:"Article 63",en:"Article 63"},text:{fr:"Lorsque les rsultats de lvaluation des risques rvlent lexistence dun risque pour la sant ou la scurit des salaris, toute exposition  un agent biologique dangereux est vite",en:"Lorsque les rsultats de lvaluation des risques rvlent lexistence dun risque pour la sant ou la scurit des salaris, toute exposition  un agent biologique dangereux est vite"}},{article_id:"ab_art_65",code:{fr:"Article 65",en:"Article 65"},text:{fr:"Lemployeur doit tablir une consigne de scurit interdisant lintroduction des produits fixs ci-aprs, par les salaris et pour leur propre usage dans les lieux de travail o existe un risque de contamination, pour les activits qui impliquent des agents biologiques pathognes: 1 de nourriture et de boissons ; 2 darticles pour fumeurs ; 3 de cosmtiques et de mouchoirs autres que les mouchoirs en papier, qui devront tre limins comme des dchets contamins.",en:"Lemployeur doit tablir une consigne de scurit interdisant lintroduction des produits fixs ci-aprs, par les salaris et pour leur propre usage dans les lieux de travail o existe un risque de contamination, pour les activits qui impliquent des agents biologiques pathognes: 1 de nourriture et de boissons ; 2 darticles pour fumeurs ; 3 de cosmtiques et de mouchoirs autres que les mouchoirs en papier, qui devront tre limins comme des dchets contamins."}},{article_id:"ab_art_66",code:{fr:"Article 66",en:"Article 66"},text:{fr:"Pour les activits qui impliquent des agents biologiques pathognes, lemployeur: 1 fournit aux salaris des moyens de protection individuelle, notamment des vtements de protection appropris. 2 veille  ce que les moyens de protection individuelle soient enlevs lorsque le salari quitte le lieu de travail. 3 fait en sorte, lorsquils sont rutilisables, que les moyens de protection individuelle soient rangs dans un endroit spcifique, nettoys, dsinfects et vrifis avant et aprs chaque utilisation et, sil y  lieu, rpars ou remplacs. 4 met  la disposition des salaris des installations sanitaires appropries, un dispositif de lavage oculaire et des antiseptiques pour la peau ainsi que, sil y a lieu, des collyres prescrits par le mdecin du travail. 5 pour les activits impliquant le prlvement, la manipulation et le traitement dchantillons dorigine humaine ou animale, met au point des procdures  suivre et met  disposition des salaris des matriels adapts visant  minimiser les risques de contamination.",en:"Pour les activits qui impliquent des agents biologiques pathognes, lemployeur: 1 fournit aux salaris des moyens de protection individuelle, notamment des vtements de protection appropris. 2 veille  ce que les moyens de protection individuelle soient enlevs lorsque le salari quitte le lieu de travail. 3 fait en sorte, lorsquils sont rutilisables, que les moyens de protection individuelle soient rangs dans un endroit spcifique, nettoys, dsinfects et vrifis avant et aprs chaque utilisation et, sil y  lieu, rpars ou remplacs. 4 met  la disposition des salaris des installations sanitaires appropries, un dispositif de lavage oculaire et des antiseptiques pour la peau ainsi que, sil y a lieu, des collyres prescrits par le mdecin du travail. 5 pour les activits impliquant le prlvement, la manipulation et le traitement dchantillons dorigine humaine ou animale, met au point des procdures  suivre et met  disposition des salaris des matriels adapts visant  minimiser les risques de contamination."}},{article_id:"ab_art_68",code:{fr:"Article 68",en:"Article 68"},text:{fr:"Lemployeur doit prendre les mesures appropries pour prserver la sant et la scurit des salaris, dans les lieux o des salaris sont susceptibles dtre en contact avec des agents biologiques pathognes pouvant tre prsents dans lorganisme de patients ou de personnes dcdes ou chez des animaux vivants ou morts, notamment par une information sur les procds de dcontamination et de dsinfection, et la mise en uvre des procds permettant de manipuler et dliminer sans risque les dchets contamins.",en:"Lemployeur doit prendre les mesures appropries pour prserver la sant et la scurit des salaris, dans les lieux o des salaris sont susceptibles dtre en contact avec des agents biologiques pathognes pouvant tre prsents dans lorganisme de patients ou de personnes dcdes ou chez des animaux vivants ou morts, notamment par une information sur les procds de dcontamination et de dsinfection, et la mise en uvre des procds permettant de manipuler et dliminer sans risque les dchets contamins."}},{article_id:"ab_art_70",code:{fr:"Article 70",en:"Article 70"},text:{fr:"Dans les laboratoires, notamment ceux ralisant des analyses de biologie mdicale et dans les locaux destins aux animaux de laboratoire contamins ou susceptibles de l'tre par des agents biologiques pathognes, des mesures de confinement appropries au rsultat de l'valuation des risques sont prises. Il en est de mme pour les procds industriels utilisant des agents biologiques pathognes. Lorsquau terme de lvaluation des risques un doute subsiste quant au classement dun agent biologique dont lutilisation industrielle pourrait comporter un risque grave pour la sant des salaris, le niveau et les mesures de confinement adopts sont ceux correspondant au moins  un agent du groupe 3 mentionn  larticle 56 ci-dessus.",en:"Dans les laboratoires, notamment ceux ralisant des analyses de biologie mdicale et dans les locaux destins aux animaux de laboratoire contamins ou susceptibles de l'tre par des agents biologiques pathognes, des mesures de confinement appropries au rsultat de l'valuation des risques sont prises. Il en est de mme pour les procds industriels utilisant des agents biologiques pathognes. Lorsquau terme de lvaluation des risques un doute subsiste quant au classement dun agent biologique dont lutilisation industrielle pourrait comporter un risque grave pour la sant des salaris, le niveau et les mesures de confinement adopts sont ceux correspondant au moins  un agent du groupe 3 mentionn  larticle 56 ci-dessus."}},{article_id:"ab_art_71",code:{fr:"Article 71",en:"Article 71"},text:{fr:"Les laboratoires dont lobjectif nest pas de travailler avec des agents biologiques pathognes adoptent, en cas dincertitude quant  la prsence de ces agents, au moins le niveau de confinement requis pour les agents du groupe 2 et, si ncessaire, celui correspondant  ceux des groupes 3 ou 4 mentionns  larticle 56 ci-dessus.",en:"Les laboratoires dont lobjectif nest pas de travailler avec des agents biologiques pathognes adoptent, en cas dincertitude quant  la prsence de ces agents, au moins le niveau de confinement requis pour les agents du groupe 2 et, si ncessaire, celui correspondant  ceux des groupes 3 ou 4 mentionns  larticle 56 ci-dessus."}},{article_id:"ab_art_72",code:{fr:"Article 72",en:"Article 72"},text:{fr:"Lemployeur doit fournir sur le lieu de travail des instructions crites et, le cas chant, des affiches portant sur la procdure  suivre: 1 en cas daccident ou d'incident grave mettant en cause un agent biologique pathogne ; 2 lors de la manipulation de tout agent biologique du groupe 4 mentionn  larticle 56 ci-dessus, notamment lors de son limination.",en:"Lemployeur doit fournir sur le lieu de travail des instructions crites et, le cas chant, des affiches portant sur la procdure  suivre: 1 en cas daccident ou d'incident grave mettant en cause un agent biologique pathogne ; 2 lors de la manipulation de tout agent biologique du groupe 4 mentionn  larticle 56 ci-dessus, notamment lors de son limination."}},{article_id:"ab_art_73",code:{fr:"Article 73",en:"Article 73"},text:{fr:"Lemployeur doit informer les salaris, le mdecin du travail, le comit de scurit et dhygine ou,  dfaut, les dlgus des salaris: 1 sans dlai, de tout accident ou incident ayant pu entraner la dissmination dun agent biologique susceptible de provoquer chez lhomme une infection ou une maladie grave ; 2 le plus rapidement possible, de la cause de cet accident ou incident et des mesures prises ou  prendre pour remdier  la situation.",en:"Lemployeur doit informer les salaris, le mdecin du travail, le comit de scurit et dhygine ou,  dfaut, les dlgus des salaris: 1 sans dlai, de tout accident ou incident ayant pu entraner la dissmination dun agent biologique susceptible de provoquer chez lhomme une infection ou une maladie grave ; 2 le plus rapidement possible, de la cause de cet accident ou incident et des mesures prises ou  prendre pour remdier  la situation."}},{article_id:"ab_art_74",code:{fr:"Article 74",en:"Article 74"},text:{fr:"Des dispositions spcifiques, intgres sil y a lieu au rglement intrieur de ltablissement, rappellent aux salaris leur obligation de signaler immdiatement tout accident ou incident mettant eu cause un agent biologique pathogne.",en:"Des dispositions spcifiques, intgres sil y a lieu au rglement intrieur de ltablissement, rappellent aux salaris leur obligation de signaler immdiatement tout accident ou incident mettant eu cause un agent biologique pathogne."}},{article_id:"ab_art_75",code:{fr:"Article 75",en:"Article 75"},text:{fr:"Lorsque les rsultats de lvaluation des risques rvlent lexistence dun risque pour la sant ou la scurit des salaris, lemployeur doit tenir  la disposition des salaris intresss, et du comit de scurit et dhygine ou,  dfaut, des dlgus des salaris les informations suivantes: 1 les activits au cours desquelles les salaris sont exposs  des agents biologiques pathognes, les procdures, les mthodes de travail et les mesures et moyens de protection et de prvention correspondants. 2 le nombre de salaris exposs. 3 le nom et ladresse du mdecin du travail. 4 le nom de la personne qui, le cas chant, est charge par l'employeur, et sous sa responsabilit, dassurer la scurit sur le lieu de travail. 5 un plan durgence pour la protection des salaris contre lexposition aux agents biologiques des groupes 3 ou 4 mentionns  larticle 56 ci-dessus, en cas de dfaillance du confinement physique.",en:"Lorsque les rsultats de lvaluation des risques rvlent lexistence dun risque pour la sant ou la scurit des salaris, lemployeur doit tenir  la disposition des salaris intresss, et du comit de scurit et dhygine ou,  dfaut, des dlgus des salaris les informations suivantes: 1 les activits au cours desquelles les salaris sont exposs  des agents biologiques pathognes, les procdures, les mthodes de travail et les mesures et moyens de protection et de prvention correspondants. 2 le nombre de salaris exposs. 3 le nom et ladresse du mdecin du travail. 4 le nom de la personne qui, le cas chant, est charge par l'employeur, et sous sa responsabilit, dassurer la scurit sur le lieu de travail. 5 un plan durgence pour la protection des salaris contre lexposition aux agents biologiques des groupes 3 ou 4 mentionns  larticle 56 ci-dessus, en cas de dfaillance du confinement physique."}},{article_id:"ab_art_77",code:{fr:"Article 77",en:"Article 77"},text:{fr:"Lemployeur doit organiser au bnfice des salaris une formation  la scurit portant sur: 1 les risques pour la sant et les prescriptions en matire dhygine. 2 les prcautions  prendre pour viter lexposition. 3 le port et lutilisation des quipements et des vtements de protection individuelle. 4 les modalits de tri, de collecte, de stockage, de transport et dlimination des dchets. 5 les mesures  prendre pour prvenir ou pallier les incidents. 6 la procdure  suivre en cas daccident.",en:"Lemployeur doit organiser au bnfice des salaris une formation  la scurit portant sur: 1 les risques pour la sant et les prescriptions en matire dhygine. 2 les prcautions  prendre pour viter lexposition. 3 le port et lutilisation des quipements et des vtements de protection individuelle. 4 les modalits de tri, de collecte, de stockage, de transport et dlimination des dchets. 5 les mesures  prendre pour prvenir ou pallier les incidents. 6 la procdure  suivre en cas daccident."}},{article_id:"ab_art_78",code:{fr:"Article 78",en:"Article 78"},text:{fr:"La formation  la scurit est dispense avant que les salaris nexercent une activit impliquant un contact avec des agents biologiques. Elle est rpte rgulirement et est adapte  lvolution des risques ainsi que lors de la modification significative des procds de travail.",en:"La formation  la scurit est dispense avant que les salaris nexercent une activit impliquant un contact avec des agents biologiques. Elle est rpte rgulirement et est adapte  lvolution des risques ainsi que lors de la modification significative des procds de travail."}},{article_id:"ab_art_79",code:{fr:"Article 79",en:"Article 79"},text:{fr:"Lemployeur doit tablir, aprs avis du mdecin du travail, une liste des salaris exposs  des agents biologiques des groupes 3 ou 4 mentionns  larticle 56 ci-dessus. Il indique le type de travail ralis, et, lorsque c'est possible, lagent biologique auquel les salaris sont exposs ainsi que les donnes relatives aux expositions, aux accidents et aux incidents. La liste est communique au mdecin du travail.",en:"Lemployeur doit tablir, aprs avis du mdecin du travail, une liste des salaris exposs  des agents biologiques des groupes 3 ou 4 mentionns  larticle 56 ci-dessus. Il indique le type de travail ralis, et, lorsque c'est possible, lagent biologique auquel les salaris sont exposs ainsi que les donnes relatives aux expositions, aux accidents et aux incidents. La liste est communique au mdecin du travail."}},{article_id:"ab_art_80",code:{fr:"Article 80",en:"Article 80"},text:{fr:"La liste des salaris exposs est conserve au moins dix ans aprs la fin de lexposition. Toutefois, lorsque les agents biologiques sont susceptibles de provoquer des maladies prsentant une longue priode dincubation, elle est conserve aussi longtemps que des manifestations pathologiques sont possibles.",en:"La liste des salaris exposs est conserve au moins dix ans aprs la fin de lexposition. Toutefois, lorsque les agents biologiques sont susceptibles de provoquer des maladies prsentant une longue priode dincubation, elle est conserve aussi longtemps que des manifestations pathologiques sont possibles."}},{article_id:"ab_art_83",code:{fr:"Article 83",en:"Article 83"},text:{fr:"Un salari ne peut tre affect  des travaux lexposant  des agents biologiques pathognes, que sil a fait lobjet dun examen mdical pralable par le mdecin du travail et si la fiche mdicale daptitude tablie  cette occasion atteste quil ne prsente pas de contre-indication mdicale  ces travaux. Le mdecin du travail tablit la fiche mdicale daptitude en double exemplaire. Il en remet un exemplaire au salari et transmet lautre  lemployeur, qui le conserve pour tre prsent  tout moment, sur leur demande,  lagent charg de linspection du travail et au mdecin charg de linspection du travail. Cette fiche est renouvele au moins une fois par an, aprs examen par le mdecin du travail.",en:"Un salari ne peut tre affect  des travaux lexposant  des agents biologiques pathognes, que sil a fait lobjet dun examen mdical pralable par le mdecin du travail et si la fiche mdicale daptitude tablie  cette occasion atteste quil ne prsente pas de contre-indication mdicale  ces travaux. Le mdecin du travail tablit la fiche mdicale daptitude en double exemplaire. Il en remet un exemplaire au salari et transmet lautre  lemployeur, qui le conserve pour tre prsent  tout moment, sur leur demande,  lagent charg de linspection du travail et au mdecin charg de linspection du travail. Cette fiche est renouvele au moins une fois par an, aprs examen par le mdecin du travail."}},{article_id:"ab_art_89",code:{fr:"Article 89",en:"Article 89"},text:{fr:"En dehors des visites priodiques, lemployeur fait examiner par le mdecin du travail tout salari expos  des agents biologiques pathognes qui se dclare incommod par des travaux quil excute. Cet examen peut tre ralis  la demande du salari. Le mdecin du travail est inform par l'employeur des absences, pour cause de maladie, des salaris exposs  ces agents biologiques pathognes.",en:"En dehors des visites priodiques, lemployeur fait examiner par le mdecin du travail tout salari expos  des agents biologiques pathognes qui se dclare incommod par des travaux quil excute. Cet examen peut tre ralis  la demande du salari. Le mdecin du travail est inform par l'employeur des absences, pour cause de maladie, des salaris exposs  ces agents biologiques pathognes."}},{article_id:"ab_art_93",code:{fr:"Article 93",en:"Article 93"},text:{fr:"Le mdecin du travail constitue et tient, pour chaque salari susceptible dtre expos aux agents biologiques pathognes, un dossier mdical spcial, ce dossier est complt aprs chaque examen mdical ultrieur.",en:"Le mdecin du travail constitue et tient, pour chaque salari susceptible dtre expos aux agents biologiques pathognes, un dossier mdical spcial, ce dossier est complt aprs chaque examen mdical ultrieur."}}]}]},c_e={section_id:"btp",title:{fr:"13. BTP",en:"13. BTP"},chapters:[{chapter_id:"btp_dispositions_generales",title:{fr:"Dispositions gnrales",en:"Dispositions gnrales"},articles:[{article_id:"btp_art_premier",code:{fr:"Article Premier",en:"Article First"},text:{fr:"Indpendamment des mesures auxquelles ils sont astreints en vertu de la rglementation en vigueur sur la protection, l'hygine et la salubrit des travailleurs, les chefs des tablissements dans lesquels est exerce une profession commerciale, industrielle ou librale et dont le personnel effectue, mme  titre occasionnel, des travaux viss par les titres III  VI du prsent arrt, sont tenus de prendre les mesures particulires de protection et de salubrit nonces aux articles suivants.",en:"Indpendamment des mesures auxquelles ils sont astreints en vertu de la rglementation en vigueur sur la protection, l'hygine et la salubrit des travailleurs, les chefs des tablissements dans lesquels est exerce une profession commerciale, industrielle ou librale et dont le personnel effectue, mme  titre occasionnel, des travaux viss par les titres III  VI du prsent arrt, sont tenus de prendre les mesures particulires de protection et de salubrit nonces aux articles suivants."}},{article_id:"btp_art_2",code:{fr:"Article 2",en:"Article 2"},text:{fr:"Le matriel utilis dans les chantiers pour l'tablissement des chafaudages, chelles, passerelles, appareils de manutention ou de levage et tous autres engins ou installations, doit tre d'une rsistance suffisante pour supporter les charges et les efforts auxquels il sera soumis. Il sera vrifi avant son emploi.",en:"Le matriel utilis dans les chantiers pour l'tablissement des chafaudages, chelles, passerelles, appareils de manutention ou de levage et tous autres engins ou installations, doit tre d'une rsistance suffisante pour supporter les charges et les efforts auxquels il sera soumis. Il sera vrifi avant son emploi."}},{article_id:"btp_art_3",code:{fr:"Article 3",en:"Article 3"},text:{fr:"Avant leur mise en service sur le chantier, les appareils de levage ou de manutention doivent tre vrifis par l'entrepreneur ou son prpos dans toutes leurs parties et essays en vue de s'assurer de leur solidit. La vrification sera renouvele chaque fois que ces appareils auront subi des dmontages ou des modifications, ou que l'une de leurs parties aura t remplace. Elle sera renouvele galement lorsque des ouvriers signaleront le mauvais tat des appareils ou l'existence de causes susceptibles de compromettre la solidit de ceux-ci.",en:"Avant leur mise en service sur le chantier, les appareils de levage ou de manutention doivent tre vrifis par l'entrepreneur ou son prpos dans toutes leurs parties et essays en vue de s'assurer de leur solidit. La vrification sera renouvele chaque fois que ces appareils auront subi des dmontages ou des modifications, ou que l'une de leurs parties aura t remplace. Elle sera renouvele galement lorsque des ouvriers signaleront le mauvais tat des appareils ou l'existence de causes susceptibles de compromettre la solidit de ceux-ci."}},{article_id:"btp_art_4",code:{fr:"Article 4",en:"Article 4"},text:{fr:"Les crochets de suspension seront conus de manire telle qu'un dcrochement accidentel des fardeaux soit impossible.",en:"Les crochets de suspension seront conus de manire telle qu'un dcrochement accidentel des fardeaux soit impossible."}},{article_id:"btp_art_5",code:{fr:"Article 5",en:"Article 5"},text:{fr:"Tous les appareils de levage et de manutention mus mcaniquement seront munis d'un frein ou de tout autre dispositif quivalent capable d'arrter le mouvement dans toutes les positions, et dispos de faon  pouvoir fonctionner automatiquement, ou  tre actionn par le prpos  la manoeuvre de l'appareil immdiatement et directement de sa place de manoeuvre, mme en cas d'interruption de la puissance motrice. Les crics seront disposs de manire  viter les accidents causs par le retour de la manivelle et seront maintenus en bon tat de fonctionnement.",en:"Tous les appareils de levage et de manutention mus mcaniquement seront munis d'un frein ou de tout autre dispositif quivalent capable d'arrter le mouvement dans toutes les positions, et dispos de faon  pouvoir fonctionner automatiquement, ou  tre actionn par le prpos  la manoeuvre de l'appareil immdiatement et directement de sa place de manoeuvre, mme en cas d'interruption de la puissance motrice. Les crics seront disposs de manire  viter les accidents causs par le retour de la manivelle et seront maintenus en bon tat de fonctionnement."}},{article_id:"btp_art_6",code:{fr:"Article 6",en:"Article 6"},text:{fr:"En service normal, aucune chane, aucun cble mtallique ou cordage ne peut travailler  une charge suprieure au sixime de sa rsistance  la rupture.",en:"En service normal, aucune chane, aucun cble mtallique ou cordage ne peut travailler  une charge suprieure au sixime de sa rsistance  la rupture."}},{article_id:"btp_art_7",code:{fr:"Article 7",en:"Article 7"},text:{fr:"Des dispositions seront prises et des consignes seront donnes pour assurer la scurit des ouvriers pendant le fonctionnement des appareils de levage ou de manutention. Pour les travaux exceptionnels, toutes dispositions spciales devront tre prises pour garantir les ouvriers contre les dangers de la rupture ventuelle de la chane ou du cble. Lorsque les matriaux sont levs  l'aide de poulies, les ouvriers ne doivent en aucun cas demeurer sous l'aplomb du fardeau. Dans la mesure du possible, des barrires de protection devront empcher le passage sous l'aplomb du chemin parcouru par les bennes. Il sera, en outre, interdit d'installer des poulies dont les projections verticales se trouveraient  moins de 2 mtres de distance les unes des autres.",en:"Des dispositions seront prises et des consignes seront donnes pour assurer la scurit des ouvriers pendant le fonctionnement des appareils de levage ou de manutention. Pour les travaux exceptionnels, toutes dispositions spciales devront tre prises pour garantir les ouvriers contre les dangers de la rupture ventuelle de la chane ou du cble. Lorsque les matriaux sont levs  l'aide de poulies, les ouvriers ne doivent en aucun cas demeurer sous l'aplomb du fardeau. Dans la mesure du possible, des barrires de protection devront empcher le passage sous l'aplomb du chemin parcouru par les bennes. Il sera, en outre, interdit d'installer des poulies dont les projections verticales se trouveraient  moins de 2 mtres de distance les unes des autres."}},{article_id:"btp_art_8",code:{fr:"Article 8",en:"Article 8"},text:{fr:"Toutes prcautions seront prises pour viter la chute des objets dplacs par les appareils de levage. Les outils et objets divers, les matriaux ( l'exception des pices de bois et des pices mtalliques servant d'armature ou utilises pour le coffrage, la construction des chafaudages, de la charpente, etc.) ne pourront tre suspendus directement aux cbles et cordages des appareils de levage : ils seront placs dans des bennes bien constitues. L'emploi des couffins pour le levage et, le cas chant, la descente du bton et des matriaux,  l'aide des engins en service, est formellement interdit. Les objets qui dpassent le bord de la benne doivent tre rattachs au cble,  la chane ou au cordage,  moins que la benne ne soit pourvue d'un filet de scurit. Les ouvriers prposs  la manoeuvre des treuils tablis sur le sol, pour la monte des matriaux, seront protgs contre les chutes d'outils, de matriaux ou objets analogues par un toit de scurit suffisamment rsistant.",en:"Toutes prcautions seront prises pour viter la chute des objets dplacs par les appareils de levage. Les outils et objets divers, les matriaux ( l'exception des pices de bois et des pices mtalliques servant d'armature ou utilises pour le coffrage, la construction des chafaudages, de la charpente, etc.) ne pourront tre suspendus directement aux cbles et cordages des appareils de levage : ils seront placs dans des bennes bien constitues. L'emploi des couffins pour le levage et, le cas chant, la descente du bton et des matriaux,  l'aide des engins en service, est formellement interdit. Les objets qui dpassent le bord de la benne doivent tre rattachs au cble,  la chane ou au cordage,  moins que la benne ne soit pourvue d'un filet de scurit. Les ouvriers prposs  la manoeuvre des treuils tablis sur le sol, pour la monte des matriaux, seront protgs contre les chutes d'outils, de matriaux ou objets analogues par un toit de scurit suffisamment rsistant."}},{article_id:"btp_art_9",code:{fr:"Article 9",en:"Article 9"},text:{fr:"Les treuils  bras doivent tre munis d'un encliquetage et d'un frein ou de tout autre dispositif permettant leur immobilisation immdiate. Le tambour du treuil sera conu de manire telle que la sortie du cble dudit tambour soit impossible.",en:"Les treuils  bras doivent tre munis d'un encliquetage et d'un frein ou de tout autre dispositif permettant leur immobilisation immdiate. Le tambour du treuil sera conu de manire telle que la sortie du cble dudit tambour soit impossible."}},{article_id:"btp_art_10",code:{fr:"Article 10",en:"Article 10"},text:{fr:"Sauf le cas vis  l'article 12 et le cas des tlfriques qui fera l'objet d'un rglement spcial, il est interdit d'utiliser les monte-charge ou les bennes des transporteurs pour transporter du personnel.",en:"Sauf le cas vis  l'article 12 et le cas des tlfriques qui fera l'objet d'un rglement spcial, il est interdit d'utiliser les monte-charge ou les bennes des transporteurs pour transporter du personnel."}}]},{chapter_id:"btp_titre_iii_travaux_souterrains",title:{fr:"Titre III : Travaux souterrains",en:"Titre III : Travaux souterrains"},articles:[{article_id:"btp_art_11",code:{fr:"Article 11",en:"Article 11"},text:{fr:"Les orifices au jour des puits et galeries d'une inclinaison dangereuse doivent tre, outre la clture prvue  l'article 30 du dahir susvis du 2 juillet 1947 (13 chaabane 1366) portant rglementation du travail, entours d'une plinthe ayant au moins 15 centimtres de hauteur, destine  empcher la chute des matriaux. Les dblais de ces puits et galeries seront placs  une distance d'au moins 1 mtre des orifices de ceux-ci. Les orifices au jour des puits et galeries d'inclinaison dangereuse seront toujours protgs par un dispositif appropri contre l'envahissement des eaux de surface.",en:"Les orifices au jour des puits et galeries d'une inclinaison dangereuse doivent tre, outre la clture prvue  l'article 30 du dahir susvis du 2 juillet 1947 (13 chaabane 1366) portant rglementation du travail, entours d'une plinthe ayant au moins 15 centimtres de hauteur, destine  empcher la chute des matriaux. Les dblais de ces puits et galeries seront placs  une distance d'au moins 1 mtre des orifices de ceux-ci. Les orifices au jour des puits et galeries d'inclinaison dangereuse seront toujours protgs par un dispositif appropri contre l'envahissement des eaux de surface."}},{article_id:"btp_art_12",code:{fr:"Article 12",en:"Article 12"},text:{fr:"A dfaut d'engins mcaniques ou d'un fonctionnement prouv et sr, tous les puits en construction, ainsi que les puits de service, doivent tre munis d'un treuil de puisatier pourvu d'un frein  main, d'un cble ou d'un tui ou d'une benne convenablement installe, pour la descente ou la remonte des ouvriers. Une personne capable de faire fonctionner le treuil doit tre constamment prsente auprs de celui-ci tant qu'il y a des hommes au fond ; quand la profondeur des puits dpassera 15 mtres, le service du treuil devra tre assur par deux hommes.",en:"A dfaut d'engins mcaniques ou d'un fonctionnement prouv et sr, tous les puits en construction, ainsi que les puits de service, doivent tre munis d'un treuil de puisatier pourvu d'un frein  main, d'un cble ou d'un tui ou d'une benne convenablement installe, pour la descente ou la remonte des ouvriers. Une personne capable de faire fonctionner le treuil doit tre constamment prsente auprs de celui-ci tant qu'il y a des hommes au fond ; quand la profondeur des puits dpassera 15 mtres, le service du treuil devra tre assur par deux hommes."}},{article_id:"btp_art_13",code:{fr:"Article 13",en:"Article 13"},text:{fr:"Dans le cas de visite ou de rparation d'un ancien puits, on devra s'assurer pralablement que l'atmosphre y est respirable. Les ouvriers ne pourront tre autoriss  y descendre qu'aprs que des mesures auront t prises pour amener et maintenir l'atmosphre dans l'tat de puret ncessaire  la sant et  la scurit des ouvriers. La descente des ouvriers devra se faire au moyen d'une sellette avec ceinture de sret.",en:"Dans le cas de visite ou de rparation d'un ancien puits, on devra s'assurer pralablement que l'atmosphre y est respirable. Les ouvriers ne pourront tre autoriss  y descendre qu'aprs que des mesures auront t prises pour amener et maintenir l'atmosphre dans l'tat de puret ncessaire  la sant et  la scurit des ouvriers. La descente des ouvriers devra se faire au moyen d'une sellette avec ceinture de sret."}},{article_id:"btp_art_14",code:{fr:"Article 14",en:"Article 14"},text:{fr:"L'atmosphre des chantiers souterrains ou des puits sera maintenue dans l'tat de puret ncessaire  la sant des ouvriers. Dans les chantiers souterrains il sera procd  une vacuation efficace des eaux d'infiltration.",en:"L'atmosphre des chantiers souterrains ou des puits sera maintenue dans l'tat de puret ncessaire  la sant des ouvriers. Dans les chantiers souterrains il sera procd  une vacuation efficace des eaux d'infiltration."}},{article_id:"btp_art_15",code:{fr:"Article 15",en:"Article 15"},text:{fr:"Dans les chantiers souterrains o les travailleurs sont incommods par l'eau, chaque ouvrier doit disposer de vtements et de chaussures impermables, en bon tat ; lorsque le chantier comporte l'abri vis  l'article 59 ces vtements et chaussures seront mis  la disposition des ouvriers dans cet abri.",en:"Dans les chantiers souterrains o les travailleurs sont incommods par l'eau, chaque ouvrier doit disposer de vtements et de chaussures impermables, en bon tat ; lorsque le chantier comporte l'abri vis  l'article 59 ces vtements et chaussures seront mis  la disposition des ouvriers dans cet abri."}},{article_id:"btp_art_16",code:{fr:"Article 16",en:"Article 16"},text:{fr:"Dans les puits o il est possible d'installer une descenderie par chelle : a) Il pourra tre utilis des chelles en bois bien conditionnes et solidement fixes du haut et du bas, si la profondeur n'excde pas 5 mtres ; b) Il sera fait usage d'chelles mtalliques verticales ou de toute autre disposition offrant une scurit quivalente, pour les profondeurs excdant 5 mtres,  condition, dans le premier cas, que ces chelles soient solidement fixes et que les paliers de repos soient tablis  6 mtres au plus les uns des autres. Des poignes fixes seront places afin de permettre facilement l'accs de chaque palier. Toutefois pour les profondeurs ne dpassant pas 20 mtres, il pourra n'tre amnag qu'un seul palier de repos  mi-distance entre le bord suprieur et le fond du puits. L'emploi d'chelles en corde est interdit.",en:"Dans les puits o il est possible d'installer une descenderie par chelle : a) Il pourra tre utilis des chelles en bois bien conditionnes et solidement fixes du haut et du bas, si la profondeur n'excde pas 5 mtres ; b) Il sera fait usage d'chelles mtalliques verticales ou de toute autre disposition offrant une scurit quivalente, pour les profondeurs excdant 5 mtres,  condition, dans le premier cas, que ces chelles soient solidement fixes et que les paliers de repos soient tablis  6 mtres au plus les uns des autres. Des poignes fixes seront places afin de permettre facilement l'accs de chaque palier. Toutefois pour les profondeurs ne dpassant pas 20 mtres, il pourra n'tre amnag qu'un seul palier de repos  mi-distance entre le bord suprieur et le fond du puits. L'emploi d'chelles en corde est interdit."}},{article_id:"btp_art_17",code:{fr:"Article 17",en:"Article 17"},text:{fr:"Les parois des puits, les parois et le toit des galeries souterraines doivent tre boiss ou consolids de faon  prvenir les boulements possibles. Lorsqu'un puits ou une galerie doivent tre maonns ou btonns, le boisage ou le blindage ne sont enlevs qu'au fur et  mesure de l'avancement des travaux et seulement dans la mesure o, tant donne la nature du terrain travers, cette opration ne peut nuire  la scurit du personnel. Les mmes prcautions seront prises pour l'excution des travaux d'abattage latral.",en:"Les parois des puits, les parois et le toit des galeries souterraines doivent tre boiss ou consolids de faon  prvenir les boulements possibles. Lorsqu'un puits ou une galerie doivent tre maonns ou btonns, le boisage ou le blindage ne sont enlevs qu'au fur et  mesure de l'avancement des travaux et seulement dans la mesure o, tant donne la nature du terrain travers, cette opration ne peut nuire  la scurit du personnel. Les mmes prcautions seront prises pour l'excution des travaux d'abattage latral."}},{article_id:"btp_art_18",code:{fr:"Article 18",en:"Article 18"},text:{fr:"Dans les galeries souterraines o se trouvent disposes des voies ferres, il devra tre amnag un espace libre de 55 centimtres mesurs entre la partie la plus saillante du matriel roulant et les parties les plus saillantes des parois de la galerie. A dfaut, il sera amnag, au fur et  mesure de l'avancement des travaux et tous les 10 mtres au plus, une niche de sret ayant des dimensions suffisantes pour abriter simultanment deux personnes et ayant au moins 60 centimtres de profondeur. En cas d'impossibilit, il pourra tre drog  cette prescription  la condition que la scurit du personnel soit assure d'une autre manire par des dispositions portes pralablement  la connaissance de l'agent charg de l'inspection du travail comptent, et agres par celui-ci.",en:"Dans les galeries souterraines o se trouvent disposes des voies ferres, il devra tre amnag un espace libre de 55 centimtres mesurs entre la partie la plus saillante du matriel roulant et les parties les plus saillantes des parois de la galerie. A dfaut, il sera amnag, au fur et  mesure de l'avancement des travaux et tous les 10 mtres au plus, une niche de sret ayant des dimensions suffisantes pour abriter simultanment deux personnes et ayant au moins 60 centimtres de profondeur. En cas d'impossibilit, il pourra tre drog  cette prescription  la condition que la scurit du personnel soit assure d'une autre manire par des dispositions portes pralablement  la connaissance de l'agent charg de l'inspection du travail comptent, et agres par celui-ci."}},{article_id:"btp_art_19",code:{fr:"Article 19",en:"Article 19"},text:{fr:"Lorsque les chantiers souterrains seront clairs lectriquement, un clairage de scurit sera prvu pour fonctionner en cas d'arrt du courant, pendant le temps ncessaire pour assurer la scurit du chantier. Il est interdit de se servir de lampes  feu au-dessous ou au voisinage des moteurs  essence ou  huile lourde et d'en approcher toute flamme. Tous les conducteurs et appareils lectriques seront convenablement isols. En cas de travail de nuit, l'orifice de chaque puits sera signal par un clairage suffisamment puissant.",en:"Lorsque les chantiers souterrains seront clairs lectriquement, un clairage de scurit sera prvu pour fonctionner en cas d'arrt du courant, pendant le temps ncessaire pour assurer la scurit du chantier. Il est interdit de se servir de lampes  feu au-dessous ou au voisinage des moteurs  essence ou  huile lourde et d'en approcher toute flamme. Tous les conducteurs et appareils lectriques seront convenablement isols. En cas de travail de nuit, l'orifice de chaque puits sera signal par un clairage suffisamment puissant."}}]},{chapter_id:"btp_titre_iv_terrassement",title:{fr:"Titre IV : Travaux de terrassement",en:"Titre IV : Travaux de terrassement"},articles:[{article_id:"btp_art_20",code:{fr:"Article 20",en:"Article 20"},text:{fr:"Les fouilles en excavation ou en tranche doivent prsenter un talus suffisamment inclin, eu gard  la nature des terres, pour viter les boulements. Si cette condition n'est pas remplie, elles doivent tre convenablement boises. L'largissement des fouilles de terre par sapement ou havage des bords est interdit. Si les terres provenant des dblais, des excavations ou des tranches sans talus ne peuvent tre rejetes assez loin, des mesures seront prises pour viter tout boulement. En particulier, et sauf dans le cas d'impossibilit, une banquette de 50 centimtres de largeur, au minimum, sera toujours amnage entre le bord de la fouille et la base du talus des terres de dblai.",en:"Les fouilles en excavation ou en tranche doivent prsenter un talus suffisamment inclin, eu gard  la nature des terres, pour viter les boulements. Si cette condition n'est pas remplie, elles doivent tre convenablement boises. L'largissement des fouilles de terre par sapement ou havage des bords est interdit. Si les terres provenant des dblais, des excavations ou des tranches sans talus ne peuvent tre rejetes assez loin, des mesures seront prises pour viter tout boulement. En particulier, et sauf dans le cas d'impossibilit, une banquette de 50 centimtres de largeur, au minimum, sera toujours amnage entre le bord de la fouille et la base du talus des terres de dblai."}},{article_id:"btp_art_21",code:{fr:"Article 21",en:"Article 21"},text:{fr:"Les travaux de terrassement  excuter en dessous ou dans le voisinage de constructions existantes, de voies carrossables ou de voies ferres, ne peuvent tre effectus qu'aprs que les taiements ncessaires auront t poss.",en:"Les travaux de terrassement  excuter en dessous ou dans le voisinage de constructions existantes, de voies carrossables ou de voies ferres, ne peuvent tre effectus qu'aprs que les taiements ncessaires auront t poss."}},{article_id:"btp_art_22",code:{fr:"Article 22",en:"Article 22"},text:{fr:"La reprise des fondations en sous-oeuvre ne doit tre excute que par petites portions et au fur et  mesure que les talements mis en place assurent une scurit suffisante.",en:"La reprise des fondations en sous-oeuvre ne doit tre excute que par petites portions et au fur et  mesure que les talements mis en place assurent une scurit suffisante."}}]},{chapter_id:"btp_titre_v_demolition",title:{fr:"Titre V : Travaux de dmolition",en:"Titre V : Travaux de dmolition"},articles:[{article_id:"btp_art_23",code:{fr:"Article 23",en:"Article 23"},text:{fr:"Avant de commencer les travaux de dmolition, toutes les parties de l'immeuble  dmolir devront tre visites avec soin par le chef d'entreprise ou ses prposs afin de se rendre compte de la rsistance de chacune des parties, et il sera procd aux talements, notamment des planchers, qui seraient reconnus ncessaires au point de vue de la scurit des ouvriers.",en:"Avant de commencer les travaux de dmolition, toutes les parties de l'immeuble  dmolir devront tre visites avec soin par le chef d'entreprise ou ses prposs afin de se rendre compte de la rsistance de chacune des parties, et il sera procd aux talements, notamment des planchers, qui seraient reconnus ncessaires au point de vue de la scurit des ouvriers."}},{article_id:"btp_art_24",code:{fr:"Article 24",en:"Article 24"},text:{fr:"Les murs  abattre doivent tre pralablement dbarrasss de toutes les pices de bois ou de fer en saillie si ces pices ne sont pas scelles ou si, quoique scelles, elles sont en saillie de plus de 2 mtres sur le mur  abattre. La dmolition de murs par sapement est interdite.",en:"Les murs  abattre doivent tre pralablement dbarrasss de toutes les pices de bois ou de fer en saillie si ces pices ne sont pas scelles ou si, quoique scelles, elles sont en saillie de plus de 2 mtres sur le mur  abattre. La dmolition de murs par sapement est interdite."}},{article_id:"btp_art_25",code:{fr:"Article 25",en:"Article 25"},text:{fr:"Les ouvriers ne peuvent travailler  des hauteurs diffrentes que si des prcautions sont prises pour assurer la scurit de ceux qui sont occups dans les plans infrieurs.",en:"Les ouvriers ne peuvent travailler  des hauteurs diffrentes que si des prcautions sont prises pour assurer la scurit de ceux qui sont occups dans les plans infrieurs."}},{article_id:"btp_art_26",code:{fr:"Article 26",en:"Article 26"},text:{fr:"Lorsque des ouvriers dmolisseurs ont  oprer  plus de 10 mtres du sol, sur un mur contre lequel il n'existe de plancher que d'un seul ct, il doit tre tabli sur l'autre face un chafaudage de garantie, un auvent ou un dispositif quivalent s'opposant efficacement  toute chute d'ouvrier sur le sol. Dans le cas d'un mur  dmolir d'une hauteur de plus de 6 mtres et ne comportant de plancher d'aucun ct, il devra tre tabli sur une des faces du mur un dispositif de scurit s'opposant efficacement  toute chute d'ouvrier sur le sol. Pour la dmolition  la main d'une construction isole et leve, telle que chemine d'usine ou clocher, un chafaudage solide doit tre tabli.",en:"Lorsque des ouvriers dmolisseurs ont  oprer  plus de 10 mtres du sol, sur un mur contre lequel il n'existe de plancher que d'un seul ct, il doit tre tabli sur l'autre face un chafaudage de garantie, un auvent ou un dispositif quivalent s'opposant efficacement  toute chute d'ouvrier sur le sol. Dans le cas d'un mur  dmolir d'une hauteur de plus de 6 mtres et ne comportant de plancher d'aucun ct, il devra tre tabli sur une des faces du mur un dispositif de scurit s'opposant efficacement  toute chute d'ouvrier sur le sol. Pour la dmolition  la main d'une construction isole et leve, telle que chemine d'usine ou clocher, un chafaudage solide doit tre tabli."}},{article_id:"btp_art_27",code:{fr:"Article 27",en:"Article 27"},text:{fr:"Lorsque, par suite des dmolitions, l'quilibre des constructions voisines apparat compromis, des mesures doivent tre prises pour mettre les ouvriers du chantier  l'abri de tout risque d'boulement.",en:"Lorsque, par suite des dmolitions, l'quilibre des constructions voisines apparat compromis, des mesures doivent tre prises pour mettre les ouvriers du chantier  l'abri de tout risque d'boulement."}},{article_id:"btp_art_28",code:{fr:"Article 28",en:"Article 28"},text:{fr:"Lorsque dix ouvriers au moins seront occups sur un chantier de dmolition, l'emploi de chefs d'quipe, affects exclusivement  la surveillance du travail, est obligatoire. Il y aura au moins un chef d'quipe par dix ouvriers, sauf dans le cas o l'excution des travaux exige l'unit de commandement des ouvriers engags dans une seule et mme manoeuvre. Aucun ouvrier ne doit tre charg d'un travail de dmolition pour lequel il ne serait pas qualifi et qui serait de nature  lui faire courir un risque anormal.",en:"Lorsque dix ouvriers au moins seront occups sur un chantier de dmolition, l'emploi de chefs d'quipe, affects exclusivement  la surveillance du travail, est obligatoire. Il y aura au moins un chef d'quipe par dix ouvriers, sauf dans le cas o l'excution des travaux exige l'unit de commandement des ouvriers engags dans une seule et mme manoeuvre. Aucun ouvrier ne doit tre charg d'un travail de dmolition pour lequel il ne serait pas qualifi et qui serait de nature  lui faire courir un risque anormal."}}]},{chapter_id:"btp_titre_vi",title:{fr:"Titre VI",en:"Titre VI"},articles:[{article_id:"btp_art_29",code:{fr:"Article 29",en:"Article 29"},text:{fr:"Les chafaudages fixes doivent tre construits, entretoiss et contrevents de manire  supporter les charges et  rsister  la pousse du vent.",en:"Les chafaudages fixes doivent tre construits, entretoiss et contrevents de manire  supporter les charges et  rsister  la pousse du vent."}},{article_id:"btp_art_30",code:{fr:"Article 30",en:"Article 30"},text:{fr:"Les montants d'chafaudage, tubes ou chasses, doivent tre fixs de manire  viter tout dplacement du pied. Ils doivent tre entretoiss lorsque leur cartement rend cette mesure ncessaire. En cas d'enture des montants, la consolidation est faite de telle faon que la rsistance de la partie ente des montants soit au moins gale  celle de la partie qui lui est immdiatement infrieure. Lorsqu'il est fait usage de cordages pour fixer les parties horizontales aux parties verticales, ils doivent tre d'une longueur suffisante pour faire au moins cinq fois le tour de la partie horizontale et de la partie verticale. Les boulins, en bois de chne entirement sain, doivent tre soigneusement fixs  leurs extrmits. Leur cartement doit tre en rapport avec les charges prvues et avec la nature du plancher, qui devra tre constitu par trois madriers au moins placs cte  cte, sans intervalle et reposer sur trois boulins au moins de manire  ne pouvoir basculer. S'il subsiste un porte--faux dangereux, ou lorsque l'installation ne comporte que deux boulins, le plancher doit tre fix de manire  ne pas basculer.",en:"Les montants d'chafaudage, tubes ou chasses, doivent tre fixs de manire  viter tout dplacement du pied. Ils doivent tre entretoiss lorsque leur cartement rend cette mesure ncessaire. En cas d'enture des montants, la consolidation est faite de telle faon que la rsistance de la partie ente des montants soit au moins gale  celle de la partie qui lui est immdiatement infrieure. Lorsqu'il est fait usage de cordages pour fixer les parties horizontales aux parties verticales, ils doivent tre d'une longueur suffisante pour faire au moins cinq fois le tour de la partie horizontale et de la partie verticale. Les boulins, en bois de chne entirement sain, doivent tre soigneusement fixs  leurs extrmits. Leur cartement doit tre en rapport avec les charges prvues et avec la nature du plancher, qui devra tre constitu par trois madriers au moins placs cte  cte, sans intervalle et reposer sur trois boulins au moins de manire  ne pouvoir basculer. S'il subsiste un porte--faux dangereux, ou lorsque l'installation ne comporte que deux boulins, le plancher doit tre fix de manire  ne pas basculer."}},{article_id:"btp_art_31",code:{fr:"Article 31",en:"Article 31"},text:{fr:"Lorsque les chafaudages ne comportent qu'un seul rang d'chasses ou de supports mtalliques, une extrmit des boulins doit tre fixe dans le mur. Les scellements, faits solidement, auront une profondeur d'au moins 10 centimtres. A dfaut de scellement, l'ensemble devra tre solidement attach au gros oeuvre.",en:"Lorsque les chafaudages ne comportent qu'un seul rang d'chasses ou de supports mtalliques, une extrmit des boulins doit tre fixe dans le mur. Les scellements, faits solidement, auront une profondeur d'au moins 10 centimtres. A dfaut de scellement, l'ensemble devra tre solidement attach au gros oeuvre."}},{article_id:"btp_art_32",code:{fr:"Article 32",en:"Article 32"},text:{fr:"Les garde-corps prescrits par l'article 30 du dahir du 2 juillet 1947 (13 chaabane 1366) portant rglementation du travail, doivent tre constitus par une traverse de 40 centimtres carrs de section au moins, solidement fixe  l'intrieur des montants et place dans le plan vertical renfermant l'arte extrieure du plancher de l'chafaudage.",en:"Les garde-corps prescrits par l'article 30 du dahir du 2 juillet 1947 (13 chaabane 1366) portant rglementation du travail, doivent tre constitus par une traverse de 40 centimtres carrs de section au moins, solidement fixe  l'intrieur des montants et place dans le plan vertical renfermant l'arte extrieure du plancher de l'chafaudage."}},{article_id:"btp_art_33",code:{fr:"Article 33",en:"Article 33"},text:{fr:"Lorsque des chafaudages fixes seront tablis sur les toitures, leurs montants devront reposer sur les parties solides de la construction.",en:"Lorsque des chafaudages fixes seront tablis sur les toitures, leurs montants devront reposer sur les parties solides de la construction."}},{article_id:"btp_art_34",code:{fr:"Article 34",en:"Article 34"},text:{fr:"Lorsque des chafaudages fixes sont tablis en porte  faux, ils doivent tre supports par des pices de fort quarrissage si elles sont en bois et de gros chantillon si elles sont en fer. Les extrmits infrieures de ces pices seront solidement maintenues. Seules les parties rsistantes de la construction peuvent tre utilises comme points d'appui des pices d'chafaudage.",en:"Lorsque des chafaudages fixes sont tablis en porte  faux, ils doivent tre supports par des pices de fort quarrissage si elles sont en bois et de gros chantillon si elles sont en fer. Les extrmits infrieures de ces pices seront solidement maintenues. Seules les parties rsistantes de la construction peuvent tre utilises comme points d'appui des pices d'chafaudage."}},{article_id:"btp_art_35",code:{fr:"Article 35",en:"Article 35"},text:{fr:"Les chafaudages lgers construits en encorbellement sans montants le long des murs ne peuvent tre supports par des barres scelles dans le mur que si celui-ci a au moins 35 centimtres d'paisseur, le scellement tant de 16 centimtres au moins. Les barres de fer employes dans la construction de ces chafaudages doivent tre de fort chantillon et ne peuvent tre remplaces que par des traverses en bois rsistant. L'extrmit libre de chaque barre, munie d'un oeil ou de la traverse en bois, doit tre relie par un cordage  une pice rsistante de la construction, ou soutenue par une jambe de force.",en:"Les chafaudages lgers construits en encorbellement sans montants le long des murs ne peuvent tre supports par des barres scelles dans le mur que si celui-ci a au moins 35 centimtres d'paisseur, le scellement tant de 16 centimtres au moins. Les barres de fer employes dans la construction de ces chafaudages doivent tre de fort chantillon et ne peuvent tre remplaces que par des traverses en bois rsistant. L'extrmit libre de chaque barre, munie d'un oeil ou de la traverse en bois, doit tre relie par un cordage  une pice rsistante de la construction, ou soutenue par une jambe de force."}},{article_id:"btp_art_36",code:{fr:"Article 36",en:"Article 36"},text:{fr:"Les planchers des chafaudages lgers doivent tre jointifs. S'ils sont monts sur chevalets, ceux-ci ne peuvent tre espacs de plus de 2 mtres et doivent tre solidement fixs  des pices rsistantes de la construction. En aucun cas, les chevalets trteaux ne pourront tre superposs.",en:"Les planchers des chafaudages lgers doivent tre jointifs. S'ils sont monts sur chevalets, ceux-ci ne peuvent tre espacs de plus de 2 mtres et doivent tre solidement fixs  des pices rsistantes de la construction. En aucun cas, les chevalets trteaux ne pourront tre superposs."}},{article_id:"btp_art_37",code:{fr:"Article 37",en:"Article 37"},text:{fr:"Les chelles verticales employes  la confection d'chafaudages lgers doivent tre fixes solidement  diverses hauteurs et tre soigneusement trsillonnes.",en:"Les chelles verticales employes  la confection d'chafaudages lgers doivent tre fixes solidement  diverses hauteurs et tre soigneusement trsillonnes."}},{article_id:"btp_art_38",code:{fr:"Article 38",en:"Article 38"},text:{fr:"Les chafaudages lgers doivent, comme les chafaudages fixes, tre munis de garde-corps rigides et de plinthes. Les garde-corps des chafaudages sur lesquels les ouvriers travaillent assis doivent tre constitus par deux lisses rigides, l'une  90 centimtres, l'autre  45 centimtres au-dessus du plancher.",en:"Les chafaudages lgers doivent, comme les chafaudages fixes, tre munis de garde-corps rigides et de plinthes. Les garde-corps des chafaudages sur lesquels les ouvriers travaillent assis doivent tre constitus par deux lisses rigides, l'une  90 centimtres, l'autre  45 centimtres au-dessus du plancher."}},{article_id:"btp_art_39",code:{fr:"Article 39",en:"Article 39"},text:{fr:"Les chafaudages mobiles ou volants de toute nature, y compris ceux qui sont confectionns sur un chantier pour une courte dure, doivent satisfaire aux conditions suivantes. Leur longueur ne doit pas dpasser 8 mtres. Ils doivent avoir un plancher jointif bord sur le ct extrieur et aux deux extrmits par une plinthe de 15 centimtres de haut. Ils doivent tre munis de garde-corps composs d'une traverse rigide place  70 centimtres de hauteur au moins du ct du mur et  90 centimtres de hauteur sur les trois autres faces. Ces garde-corps doivent tre ports par des montants espacs de 1 mtre 50 au plus, fixs solidement au plancher. Les triers des chafaudages volants seront quips de telle sorte que les ouvriers ne puissent, pendant le travail, passer  l'extrmit de la cage de l'chafaudage volant. L'ensemble constitu par le plancher, les triers et les garde-corps doit tre rendu rigide avant suspension.",en:"Les chafaudages mobiles ou volants de toute nature, y compris ceux qui sont confectionns sur un chantier pour une courte dure, doivent satisfaire aux conditions suivantes. Leur longueur ne doit pas dpasser 8 mtres. Ils doivent avoir un plancher jointif bord sur le ct extrieur et aux deux extrmits par une plinthe de 15 centimtres de haut. Ils doivent tre munis de garde-corps composs d'une traverse rigide place  70 centimtres de hauteur au moins du ct du mur et  90 centimtres de hauteur sur les trois autres faces. Ces garde-corps doivent tre ports par des montants espacs de 1 mtre 50 au plus, fixs solidement au plancher. Les triers des chafaudages volants seront quips de telle sorte que les ouvriers ne puissent, pendant le travail, passer  l'extrmit de la cage de l'chafaudage volant. L'ensemble constitu par le plancher, les triers et les garde-corps doit tre rendu rigide avant suspension."}},{article_id:"btp_art_40",code:{fr:"Article 40",en:"Article 40"},text:{fr:"Lorsque les chafaudages mobiles ou volants sont suspendus par des cordages, ceux-ci, au nombre de trois au moins, doivent tre espacs de 3 mtres au plus et tre adapts  des triers en fer qui entourent et supportent la cage rigide de l'chafaudage. Ces cordages sont manoeuvrs par des moufles ou organes similaires et suspendus et relis  des parties solides de la construction, avec toutes les prcautions contre les causes d'boulement. Les chafaudages mobiles ou volants dont la longueur ne dpasse pas 3 mtres peuvent n'tre suspendus que par deux cordages.",en:"Lorsque les chafaudages mobiles ou volants sont suspendus par des cordages, ceux-ci, au nombre de trois au moins, doivent tre espacs de 3 mtres au plus et tre adapts  des triers en fer qui entourent et supportent la cage rigide de l'chafaudage. Ces cordages sont manoeuvrs par des moufles ou organes similaires et suspendus et relis  des parties solides de la construction, avec toutes les prcautions contre les causes d'boulement. Les chafaudages mobiles ou volants dont la longueur ne dpasse pas 3 mtres peuvent n'tre suspendus que par deux cordages."}},{article_id:"btp_art_41",code:{fr:"Article 41",en:"Article 41"},text:{fr:"Pour l'excution des travaux de couverture, de plomberie, de fumisterie ou de peinture dont l'importance ne justifierait pas l'emploi d'chafaudages volants, l'usage de corde  noeuds, d'chelles suspendues ou de plates-formes attaches  un cordage est tolr,  condition que les chelles suspendues ou les cordages soient fixs  une partie solide de l'difice et que le travail ne comporte pas l'emploi de produits corrosifs tels que lessive, acide chlorhydrique (ou esprit de sel).",en:"Pour l'excution des travaux de couverture, de plomberie, de fumisterie ou de peinture dont l'importance ne justifierait pas l'emploi d'chafaudages volants, l'usage de corde  noeuds, d'chelles suspendues ou de plates-formes attaches  un cordage est tolr,  condition que les chelles suspendues ou les cordages soient fixs  une partie solide de l'difice et que le travail ne comporte pas l'emploi de produits corrosifs tels que lessive, acide chlorhydrique (ou esprit de sel)."}},{article_id:"btp_art_42",code:{fr:"Article 42",en:"Article 42"},text:{fr:"Les plates-formes servant  l'excution des travaux  l'intrieur des constructions doivent prendre appui non sur les hourdis de remplissage, mais sur des traverses reposant sur des solives.",en:"Les plates-formes servant  l'excution des travaux  l'intrieur des constructions doivent prendre appui non sur les hourdis de remplissage, mais sur des traverses reposant sur des solives."}},{article_id:"btp_art_43",code:{fr:"Article 43",en:"Article 43"},text:{fr:"Lorsque des plates-formes reposent sur des trteaux, ces trteaux doivent tre solides. Il est interdit de superposer les trteaux de support les uns au-dessus des autres. Lorsque les plates-formes sont tablies  plus de 3 mtres du sol, elles doivent, comme les chafaudages fixes, tre munies de garde-corps rigides et de plinthes.",en:"Lorsque des plates-formes reposent sur des trteaux, ces trteaux doivent tre solides. Il est interdit de superposer les trteaux de support les uns au-dessus des autres. Lorsque les plates-formes sont tablies  plus de 3 mtres du sol, elles doivent, comme les chafaudages fixes, tre munies de garde-corps rigides et de plinthes."}},{article_id:"btp_art_44",code:{fr:"Article 44",en:"Article 44"},text:{fr:"Lorsque les murs d'un btiment sont maonns du dedans, les baies ouvrant sur le vide doivent, une fois les maonneries d'un tage termines, tre munies d'un garde-corps rigide de 0 m 90 de hauteur. Au cas o, pour l'excution des travaux  l'intrieur, il serait install des plates-formes coupant les baies dans leur hauteur,  une distance verticale du linteau de plus de 0 m 90, un garde-corps rigide et une plinthe seraient tablis en face desdites baies.",en:"Lorsque les murs d'un btiment sont maonns du dedans, les baies ouvrant sur le vide doivent, une fois les maonneries d'un tage termines, tre munies d'un garde-corps rigide de 0 m 90 de hauteur. Au cas o, pour l'excution des travaux  l'intrieur, il serait install des plates-formes coupant les baies dans leur hauteur,  une distance verticale du linteau de plus de 0 m 90, un garde-corps rigide et une plinthe seraient tablis en face desdites baies."}},{article_id:"btp_art_45",code:{fr:"Article 45",en:"Article 45"},text:{fr:"Les chelles doivent tre disposes et fixes de faon  ne pouvoir ni glisser du bas, ni basculer. Elles doivent dpasser l'endroit o elles s'appuient de 1 mtre au moins, ou tre prolonges par un montant de mme hauteur formant main-courante  l'arrive. Les chelons doivent tre rigides, d'gales sections, placs  gale distance les uns des autres, le long des montants dans lesquels ils doivent tre soit encastrs, soit embots solidement. Une seule chelle ne pourra,  moins d'tre consolide en son milieu, franchir plus de 5 mtres. Les chelles reliant les tages doivent tre chevauches et un palier de protection doit tre tabli  chaque tage. Il ne pourra tre fait usage d'une chelle qu'autant qu'elle sera en bon tat de solidit et munie de tous ses chelons. Les chelles ne peuvent tre utilises pour le transport des fardeaux dpassant 50 kilos.",en:"Les chelles doivent tre disposes et fixes de faon  ne pouvoir ni glisser du bas, ni basculer. Elles doivent dpasser l'endroit o elles s'appuient de 1 mtre au moins, ou tre prolonges par un montant de mme hauteur formant main-courante  l'arrive. Les chelons doivent tre rigides, d'gales sections, placs  gale distance les uns des autres, le long des montants dans lesquels ils doivent tre soit encastrs, soit embots solidement. Une seule chelle ne pourra,  moins d'tre consolide en son milieu, franchir plus de 5 mtres. Les chelles reliant les tages doivent tre chevauches et un palier de protection doit tre tabli  chaque tage. Il ne pourra tre fait usage d'une chelle qu'autant qu'elle sera en bon tat de solidit et munie de tous ses chelons. Les chelles ne peuvent tre utilises pour le transport des fardeaux dpassant 50 kilos."}},{article_id:"btp_art_46",code:{fr:"Article 46",en:"Article 46"},text:{fr:"Les chelles doubles doivent, pendant leur emploi, avoir leurs montants relis ou immobiliss afin d'viter tout cartement accidentel.",en:"Les chelles doubles doivent, pendant leur emploi, avoir leurs montants relis ou immobiliss afin d'viter tout cartement accidentel."}},{article_id:"btp_art_47",code:{fr:"Article 47",en:"Article 47"},text:{fr:"Les paliers extrieurs, ainsi que les diverses passerelles, plans inclins ou ponts de service doivent tre installs solidement et munis de garde-corps rigides avec plinthes sur les deux cts. Leur largeur doit tre de 60 centimtres au moins. Les encorbellements, auvents et balcons ne peuvent tre utiliss pour l'excution de travaux que s'ils sont munis de garde-corps rigides de 90 centimtres de hauteur.",en:"Les paliers extrieurs, ainsi que les diverses passerelles, plans inclins ou ponts de service doivent tre installs solidement et munis de garde-corps rigides avec plinthes sur les deux cts. Leur largeur doit tre de 60 centimtres au moins. Les encorbellements, auvents et balcons ne peuvent tre utiliss pour l'excution de travaux que s'ils sont munis de garde-corps rigides de 90 centimtres de hauteur."}},{article_id:"btp_art_48",code:{fr:"Article 48",en:"Article 48"},text:{fr:"Les chafaudages, paliers, passerelles, escaliers doivent tre constamment dbarrasss de tous gravats et dcombres et des pices de bois garnies de pointes.",en:"Les chafaudages, paliers, passerelles, escaliers doivent tre constamment dbarrasss de tous gravats et dcombres et des pices de bois garnies de pointes."}},{article_id:"btp_art_49",code:{fr:"Article 49",en:"Article 49"},text:{fr:"Les escaliers utiliss par les ouvriers doivent tre munis de rampes provisoires rigides. Les ouvertures amnages en vue du passage des ascenseurs doivent tre cltures. Les escaliers en construction ne pourront tre utiliss que si,  l'emplacement de chaque marche, existe soit une range de briques solidement fixes et maintenues en bon tat, soit tout autre matriau dispos de telle faon que la monte et la descente puissent s'effectuer sans risques.",en:"Les escaliers utiliss par les ouvriers doivent tre munis de rampes provisoires rigides. Les ouvertures amnages en vue du passage des ascenseurs doivent tre cltures. Les escaliers en construction ne pourront tre utiliss que si,  l'emplacement de chaque marche, existe soit une range de briques solidement fixes et maintenues en bon tat, soit tout autre matriau dispos de telle faon que la monte et la descente puissent s'effectuer sans risques."}},{article_id:"btp_art_50",code:{fr:"Article 50",en:"Article 50"},text:{fr:"Dans les travaux excuts sur les toits et autres travaux exposant les ouvriers  des chutes graves, il sera install,  dfaut d'chafaudage, des garde-corps, crochets, plinthes ou autres dispositifs protecteurs s'opposant efficacement  la chute de l'ouvrier sur le sol. Lorsqu'il y aura impossibilit d'utiliser ces dispositifs protecteurs, et pour l'excution des travaux de charpente, des ceintures de sret avec cordages permettant de s'attacher  un point fixe seront mises  la disposition des ouvriers. Les ouvriers occups sur des toits constitus en matriaux fragiles ou peu rsistants, tels que vitres ou plaques de fibrociment, doivent travailler sur des chafaudages, plates-formes, planches ou chelles leur permettant de ne pas avoir  prendre appui directement sur ces matriaux. Les dispositifs ainsi interposs entre les ouvriers et la toiture devront porter sur une tendue de toiture comprenant plusieurs lments de charpente, dont un  chaque extrmit des dispositifs. Les dispositifs seront agencs de manire  prvenir tout effet de bascule. Dans les travaux de vitrage importants, il y a lieu soit de munir les ouvriers de ceintures et cordages de sret, soit d'installer  faible distance au-dessous du vitrage une plate-forme destine  retenir les ouvriers en cas de chute. Les dbris de verre doivent tre immdiatement enlevs.",en:"Dans les travaux excuts sur les toits et autres travaux exposant les ouvriers  des chutes graves, il sera install,  dfaut d'chafaudage, des garde-corps, crochets, plinthes ou autres dispositifs protecteurs s'opposant efficacement  la chute de l'ouvrier sur le sol. Lorsqu'il y aura impossibilit d'utiliser ces dispositifs protecteurs, et pour l'excution des travaux de charpente, des ceintures de sret avec cordages permettant de s'attacher  un point fixe seront mises  la disposition des ouvriers. Les ouvriers occups sur des toits constitus en matriaux fragiles ou peu rsistants, tels que vitres ou plaques de fibrociment, doivent travailler sur des chafaudages, plates-formes, planches ou chelles leur permettant de ne pas avoir  prendre appui directement sur ces matriaux. Les dispositifs ainsi interposs entre les ouvriers et la toiture devront porter sur une tendue de toiture comprenant plusieurs lments de charpente, dont un  chaque extrmit des dispositifs. Les dispositifs seront agencs de manire  prvenir tout effet de bascule. Dans les travaux de vitrage importants, il y a lieu soit de munir les ouvriers de ceintures et cordages de sret, soit d'installer  faible distance au-dessous du vitrage une plate-forme destine  retenir les ouvriers en cas de chute. Les dbris de verre doivent tre immdiatement enlevs."}},{article_id:"btp_art_51",code:{fr:"Article 51",en:"Article 51"},text:{fr:"Toutes les fois qu'il sera fait usage de wagonnets circulant sur voie ferre, les prcautions ci-aprs seront observes, indpendamment de celles prvues par l'arrt viziriel susvis du 4 juillet 1949 (7 ramadan 1368). Avant l'installation de la voie, le sol sera aplani et, si ncessaire, recharg et dam ou simplement tass. Les rails seront convenablement clisss ; il sera tenu compte des dilatations ; les surfaces de roulement des rails voisins, situs du mme ct de la voie, seront en prolongement l'une de l'autre. De part et d'autre de la voie, quand celle-ci sera tablie sur chafaudage, et partout o cela sera jug ncessaire, quand la voie sera tablie au sol, il devra tre amnag un garde-corps solide de hauteur suffisante. Entre la partie la plus saillante du matriel roulant, d'une part, et le garde-corps install ou les obstacles les plus proches, d'autre part, un espace libre de 55 centimtres sera amnag,  moins d'impossibilit. Si la partie terminale de la voie est en pente, un butoir solide sera plac en fin de course. Les sauterails seront toujours maintenus en bon tat et devront pouvoir tre immobiliss dans la direction choisie pour la circulation. Chaque wagonnet doit tre pourvu d'un systme de scurit empchant le renversement accidentel de la benne pendant le chargement ou le transport. Des dispositifs convenables seront installs sur chaque wagonnet de manire  empcher l'engagement du pied sous une roue quelconque du vhicule en marche. Des dispositifs appropris empcheront l'introduction des mains dans les organes de basculement de la benne. Un systme appropri permettra toujours le freinage du wagonnet pendant la marche. La charge du wagonnet ne pourra en aucun cas dpasser les cotes d'encombrement horizontales (longueur et largeur) de la partie suprieure de la benne. Si la charge dpasse, en hauteur, les bords de la benne, elle sera fixe de faon  ne pouvoir se dplacer par choc, par arrt brusque du wagonnet, ou par l'effet de l'inclinaison de la voie. Le wagonnet doit tre cal, avant toute opration de chargement ou de dchargement,  moins que la pente ne soit nulle. Des instructions seront donnes pour que les manoeuvres s'accomplissent dans les meilleures conditions de scurit. En particulier, il sera formellement interdit de monter dans les bennes des wagonnets et sur les tampons entre les wagonnets.",en:"Toutes les fois qu'il sera fait usage de wagonnets circulant sur voie ferre, les prcautions ci-aprs seront observes, indpendamment de celles prvues par l'arrt viziriel susvis du 4 juillet 1949 (7 ramadan 1368). Avant l'installation de la voie, le sol sera aplani et, si ncessaire, recharg et dam ou simplement tass. Les rails seront convenablement clisss ; il sera tenu compte des dilatations ; les surfaces de roulement des rails voisins, situs du mme ct de la voie, seront en prolongement l'une de l'autre. De part et d'autre de la voie, quand celle-ci sera tablie sur chafaudage, et partout o cela sera jug ncessaire, quand la voie sera tablie au sol, il devra tre amnag un garde-corps solide de hauteur suffisante. Entre la partie la plus saillante du matriel roulant, d'une part, et le garde-corps install ou les obstacles les plus proches, d'autre part, un espace libre de 55 centimtres sera amnag,  moins d'impossibilit. Si la partie terminale de la voie est en pente, un butoir solide sera plac en fin de course. Les sauterails seront toujours maintenus en bon tat et devront pouvoir tre immobiliss dans la direction choisie pour la circulation. Chaque wagonnet doit tre pourvu d'un systme de scurit empchant le renversement accidentel de la benne pendant le chargement ou le transport. Des dispositifs convenables seront installs sur chaque wagonnet de manire  empcher l'engagement du pied sous une roue quelconque du vhicule en marche. Des dispositifs appropris empcheront l'introduction des mains dans les organes de basculement de la benne. Un systme appropri permettra toujours le freinage du wagonnet pendant la marche. La charge du wagonnet ne pourra en aucun cas dpasser les cotes d'encombrement horizontales (longueur et largeur) de la partie suprieure de la benne. Si la charge dpasse, en hauteur, les bords de la benne, elle sera fixe de faon  ne pouvoir se dplacer par choc, par arrt brusque du wagonnet, ou par l'effet de l'inclinaison de la voie. Le wagonnet doit tre cal, avant toute opration de chargement ou de dchargement,  moins que la pente ne soit nulle. Des instructions seront donnes pour que les manoeuvres s'accomplissent dans les meilleures conditions de scurit. En particulier, il sera formellement interdit de monter dans les bennes des wagonnets et sur les tampons entre les wagonnets."}}]},{chapter_id:"btp_titre_vii_prescriptions_diverses",title:{fr:"Titre VII : Prescriptions diverses",en:"Titre VII : Prescriptions diverses"},articles:[{article_id:"btp_art_52",code:{fr:"Article 52",en:"Article 52"},text:{fr:"Les ouvertures existant dans les tages ou les chafaudages doivent, outre la clture prvue par l'article 30 du dahir du 2 juillet 1947 (13 chaabane 1366) portant rglementation du travail, tre bordes d'une plinthe de 15 centimtres au moins de hauteur.",en:"Les ouvertures existant dans les tages ou les chafaudages doivent, outre la clture prvue par l'article 30 du dahir du 2 juillet 1947 (13 chaabane 1366) portant rglementation du travail, tre bordes d'une plinthe de 15 centimtres au moins de hauteur."}},{article_id:"btp_art_53",code:{fr:"Article 53",en:"Article 53"},text:{fr:"Les charpentes sur lesquelles les ouvriers travaillent doivent recevoir un plancher suffisamment large pour permettre aux ouvriers d'accomplir leur besogne en toute scurit. En particulier, la largeur de ce plancher tabli sur solives  l'cartement ordinaire de 70 centimtres pour le travail des maons briqueteurs doit tre de 3 mtres au moins. Lorsque l'cartement des solives dpassera 70 centimtres, le plancher install sera considr comme un chafaudage.",en:"Les charpentes sur lesquelles les ouvriers travaillent doivent recevoir un plancher suffisamment large pour permettre aux ouvriers d'accomplir leur besogne en toute scurit. En particulier, la largeur de ce plancher tabli sur solives  l'cartement ordinaire de 70 centimtres pour le travail des maons briqueteurs doit tre de 3 mtres au moins. Lorsque l'cartement des solives dpassera 70 centimtres, le plancher install sera considr comme un chafaudage."}},{article_id:"btp_art_54",code:{fr:"Article 54",en:"Article 54"},text:{fr:"En cas de verglas, de gele ou de neige, des scories, cendres, sables ou autres matires pulvrulentes doivent tre rpandus en quantit suffisante sur les chafaudages et passerelles de manire  prvenir toute glissade.",en:"En cas de verglas, de gele ou de neige, des scories, cendres, sables ou autres matires pulvrulentes doivent tre rpandus en quantit suffisante sur les chafaudages et passerelles de manire  prvenir toute glissade."}},{article_id:"btp_art_55",code:{fr:"Article 55",en:"Article 55"},text:{fr:"Par grands vents, le travail ne peut continuer que si toutes les prcautions sont prises pour consolider les installations provisoires, pour attacher ou descendre les matriaux susceptibles de tomber.",en:"Par grands vents, le travail ne peut continuer que si toutes les prcautions sont prises pour consolider les installations provisoires, pour attacher ou descendre les matriaux susceptibles de tomber."}},{article_id:"btp_art_56",code:{fr:"Article 56",en:"Article 56"},text:{fr:"Les ouvriers occups  des travaux sur pierres dures susceptibles de produire des clats doivent avoir  leur disposition des lunettes de sret. L'inspecteur du travail pourra exiger que les ouvriers occups au sol  tailler ou  polir des pierres aient  leur disposition un cran contre le soleil.",en:"Les ouvriers occups  des travaux sur pierres dures susceptibles de produire des clats doivent avoir  leur disposition des lunettes de sret. L'inspecteur du travail pourra exiger que les ouvriers occups au sol  tailler ou  polir des pierres aient  leur disposition un cran contre le soleil."}},{article_id:"btp_art_57",code:{fr:"Article 57",en:"Article 57"},text:{fr:"Des mesures doivent tre prises pour que les dcintrements, enlvements d'tanons et toutes oprations analogues ne puissent se faire que sur l'ordre du chef de chantier et sous son contrle personnel. Les matriaux en bois provenant de dmolitions, notamment d'chafaudages, de coffrages et autres, doivent tre dbarrasss de leurs pointes, ou,  dfaut, tre poss de manire telle que les pointes qui y sont fixes et toutes autres parties saillantes qu'ils peuvent prsenter ne puissent provoquer une blessure.",en:"Des mesures doivent tre prises pour que les dcintrements, enlvements d'tanons et toutes oprations analogues ne puissent se faire que sur l'ordre du chef de chantier et sous son contrle personnel. Les matriaux en bois provenant de dmolitions, notamment d'chafaudages, de coffrages et autres, doivent tre dbarrasss de leurs pointes, ou,  dfaut, tre poss de manire telle que les pointes qui y sont fixes et toutes autres parties saillantes qu'ils peuvent prsenter ne puissent provoquer une blessure."}},{article_id:"btp_art_58",code:{fr:"Article 58",en:"Article 58"},text:{fr:"Dans le cas o des travaux sont effectus au-dessus de cours d'eau, tangs, canaux, ainsi que dans les travaux maritimes, des mesures doivent tre prises afin que les ouvriers tombs  l'eau puissent tre rapidement secourus. Les passerelles donnant accs aux travaux doivent tre munies sur les deux cts de garde-corps rigides de 90 centimtres de hauteur et de plinthes de 15 centimtres de hauteur.",en:"Dans le cas o des travaux sont effectus au-dessus de cours d'eau, tangs, canaux, ainsi que dans les travaux maritimes, des mesures doivent tre prises afin que les ouvriers tombs  l'eau puissent tre rapidement secourus. Les passerelles donnant accs aux travaux doivent tre munies sur les deux cts de garde-corps rigides de 90 centimtres de hauteur et de plinthes de 15 centimtres de hauteur."}},{article_id:"btp_art_59",code:{fr:"Article 59",en:"Article 59"},text:{fr:"Dans les chantiers fixes occupant plus de vingt ouvriers pendant plus de quinze jours, les employeurs doivent mettre un abri clos  la disposition du personnel. Cet abri doit tre clair, chauff en hiver, et tenu en tat constant de propret. Dans les chantiers souterrains, l'abri sera tabli au jour. Dispense de tout ou partie de ces prescriptions pourra tre accorde par l'inspecteur du travail lorsque leur observation sera reconnue impossible.",en:"Dans les chantiers fixes occupant plus de vingt ouvriers pendant plus de quinze jours, les employeurs doivent mettre un abri clos  la disposition du personnel. Cet abri doit tre clair, chauff en hiver, et tenu en tat constant de propret. Dans les chantiers souterrains, l'abri sera tabli au jour. Dispense de tout ou partie de ces prescriptions pourra tre accorde par l'inspecteur du travail lorsque leur observation sera reconnue impossible."}},{article_id:"btp_art_60",code:{fr:"Article 60",en:"Article 60"},text:{fr:"Lorsque les ouvriers sont appels, au cours de l'excution de leurs travaux,  tre occups  moins de 3 mtres de conducteurs ou de supports de lignes de distribution ou de transport d'nergie lectrique, l'entrepreneur doit, avant de commencer les travaux, et aprs s'tre concert avec l'exploitant de la ligne lectrique, prendre les mesures ncessaires pour sauvegarder la scurit des ouvriers occups sur son chantier pendant la dure des travaux.",en:"Lorsque les ouvriers sont appels, au cours de l'excution de leurs travaux,  tre occups  moins de 3 mtres de conducteurs ou de supports de lignes de distribution ou de transport d'nergie lectrique, l'entrepreneur doit, avant de commencer les travaux, et aprs s'tre concert avec l'exploitant de la ligne lectrique, prendre les mesures ncessaires pour sauvegarder la scurit des ouvriers occups sur son chantier pendant la dure des travaux."}}]}]},d_e={section_id:"poussieres_industrielles",title:{fr:"14. Poussires industrielles",en:"14. Poussires industrielles"},chapters:[{chapter_id:"pi_poussieres",title:{fr:"Poussires dorigine industrielle",en:"Poussires dorigine industrielle"},articles:[{article_id:"pi_art_2_visites",code:{fr:"Article 2",en:"Article 2"},text:{fr:"En sus des examens prvus aux articles 10 et 11 du dcret susvis n 2-56-248 du 18 rejeb 1377 (8 fvrier 1958), tout travailleur occup de faon habituelle dans les locaux ou chantiers o sont excuts les travaux viss  l'article prcdent est soumis  des visites mdicales priodiques. Ces visites doivent tre effectues, la premire immdiatement avant l'affectation du travailleur aux locaux ou chantiers.",en:"En sus des examens prvus aux articles 10 et 11 du dcret susvis n 2-56-248 du 18 rejeb 1377 (8 fvrier 1958), tout travailleur occup de faon habituelle dans les locaux ou chantiers o sont excuts les travaux viss  l'article prcdent est soumis  des visites mdicales priodiques. Ces visites doivent tre effectues, la premire immdiatement avant l'affectation du travailleur aux locaux ou chantiers."}},{article_id:"pi_art_premier",code:{fr:"Article Premier",en:"Article Premier"},text:{fr:"Est fixe ainsi qu'il suit la liste des travaux exposant le personnel, d'une faon habituelle,  l'inhalation de poussires d'origine industrielle : A.- Travaux exposant  l'inhalation de poussires de silice libre, notamment : Travaux de forage, d'abattage, d'extraction de minerais ou de roches renfermant de la silice libre ; Concassage, broyage, tamisage et manipulation, effectus  sec, de minerais ou de roches renfermant de la silice libre ou de produits renfermant de la silice libre ; Taille et polissage de roches renfermant de la silice libre ; Fabrication et manipulation de produits abrasifs, de poudres  nettoyer ou autres produits renfermant de la silice libre ; Fabrication du Carborundum, du verre, de la porcelaine, de la faence et autres produits cramiques, ainsi que des produits rfractaires ; Travaux de fonderie exposant aux poussires de sable (dcochage, barbage, dessablage) ; Travaux de moulage, polissage, aiguisage, effectus  sec, au moyen de meules renfermant de la silice libre ; Travaux de dcapage ou de polissage au jet de sable exposant aux poussires de silice libre ;",en:"Est fixe ainsi qu'il suit la liste des travaux exposant le personnel, d'une faon habituelle,  l'inhalation de poussires d'origine industrielle : A.- Travaux exposant  l'inhalation de poussires de silice libre, notamment : Travaux de forage, d'abattage, d'extraction de minerais ou de roches renfermant de la silice libre ; Concassage, broyage, tamisage et manipulation, effectus  sec, de minerais ou de roches renfermant de la silice libre ou de produits renfermant de la silice libre ; Taille et polissage de roches renfermant de la silice libre ; Fabrication et manipulation de produits abrasifs, de poudres  nettoyer ou autres produits renfermant de la silice libre ; Fabrication du Carborundum, du verre, de la porcelaine, de la faence et autres produits cramiques, ainsi que des produits rfractaires ; Travaux de fonderie exposant aux poussires de sable (dcochage, barbage, dessablage) ; Travaux de moulage, polissage, aiguisage, effectus  sec, au moyen de meules renfermant de la silice libre ; Travaux de dcapage ou de polissage au jet de sable exposant aux poussires de silice libre ;"}}]},{chapter_id:"pi_amiante",title:{fr:"Amiante (valeurs limites)",en:"Amiante (valeurs limites)"},articles:[{article_id:"pi_art_1_amiante",code:{fr:"Article 1",en:"Article 1"},text:{fr:"La valeur moyenne d'exposition dans le milieu de travail pour l'amiante chrysotile est fixe  une fibre par cm3 d'air pour 8 h de travail pendant une dure d'un an  partir de la date de mise en uvre du prsent arrt.",en:"La valeur moyenne d'exposition dans le milieu de travail pour l'amiante chrysotile est fixe  une fibre par cm3 d'air pour 8 h de travail pendant une dure d'un an  partir de la date de mise en uvre du prsent arrt."}},{article_id:"pi_art_2_amiante",code:{fr:"Article 2",en:"Article 2"},text:{fr:"La valeur moyenne d'exposition fixe par l'article premier passera  0,6 fibre par cm3 d'air ds le dbut de la 2me anne de mise en vigueur du prsent arrt.",en:"La valeur moyenne d'exposition fixe par l'article premier passera  0,6 fibre par cm3 d'air ds le dbut de la 2me anne de mise en vigueur du prsent arrt."}},{article_id:"pi_art_3_amiante",code:{fr:"Article 3",en:"Article 3"},text:{fr:"La valeur moyenne d'exposition aux poussires d'amiante rsultant des travaux sur des matriaux  base d'amphibole dj installs est fixe  0,3 par cm3 d'air  partir de la date de mise en uvre du prsent arrt.",en:"La valeur moyenne d'exposition aux poussires d'amiante rsultant des travaux sur des matriaux  base d'amphibole dj installs est fixe  0,3 par cm3 d'air  partir de la date de mise en uvre du prsent arrt."}}]}]},u_e={section_id:"transport_md",title:{fr:"16. Transport MD",en:"16. Transport MD"},chapters:[{chapter_id:"tmd_dispositions",title:{fr:"Dispositions",en:"Dispositions"},articles:[{article_id:"tmd_art_7",code:{fr:"Article 7",en:"Article 7"},text:{fr:`Les vhicules viss  l'alina 5 du prsent article, utiliss pour le transport par route de marchandises dangereuses, doivent tre munis d'un document appel  certificat d'agrment  attestant leur conformit avec les prescriptions relatives  la construction et  l'quipement prvues  l'article 6 ci-dessus.
- Le certificat d'agrment est dlivr et renouvel par l'administration suite  un contrle technique, lorsque le vhicule concern est conforme aux prescriptions requises pour la catgorie  laquelle il appartient.
- il est valable un an`,en:`Les vhicules viss  l'alina 5 du prsent article, utiliss pour le transport par route de marchandises dangereuses, doivent tre munis d'un document appel  certificat d'agrment  attestant leur conformit avec les prescriptions relatives  la construction et  l'quipement prvues  l'article 6 ci-dessus.
- Le certificat d'agrment est dlivr et renouvel par l'administration suite  un contrle technique, lorsque le vhicule concern est conforme aux prescriptions requises pour la catgorie  laquelle il appartient.
- il est valable un an`}},{article_id:"tmd_art_9",code:{fr:"Article 9",en:"Article 9"},text:{fr:"Tout vhiculetransportant des marchandises dangereuses par route doit porter, d'une manire apparente, une signalisation identifiant les marchandises transportes avec les dangers qu'ils reprsentent.",en:"Tout vhiculetransportant des marchandises dangereuses par route doit porter, d'une manire apparente, une signalisation identifiant les marchandises transportes avec les dangers qu'ils reprsentent."}},{article_id:"tmd_art_13",code:{fr:"Article 13",en:"Article 13"},text:{fr:"Les emballages destins  contenir des marchandises dangereuses expdies en tant que colis doivent tre adapts  la nature et aux dangers que ces marchandises prsentent et aux moyens utiliss pour le chargement, le transport et le dchargement desdits colis. Ils doivent tre solides pour rsister aux chocs et aux contraintes normales du transport. Les colis doivent comporter la signalisation de danger propre aux marchandises qu'ils contiennent.",en:"Les emballages destins  contenir des marchandises dangereuses expdies en tant que colis doivent tre adapts  la nature et aux dangers que ces marchandises prsentent et aux moyens utiliss pour le chargement, le transport et le dchargement desdits colis. Ils doivent tre solides pour rsister aux chocs et aux contraintes normales du transport. Les colis doivent comporter la signalisation de danger propre aux marchandises qu'ils contiennent."}},{article_id:"tmd_art_19",code:{fr:"Article 19",en:"Article 19"},text:{fr:`Le transporteur doit remettre au conducteur du vhicule, au plus tard, au moment du chargement ou du remplissage des marchandises dangereuses dans le vhicule concern, une fiche de scurit pour chaque marchandise transporte ou pour chaque groupe de marchandises prsentant les mmes dangers. Chaque fiche comporte des instructions de scurtit et toutes informations utiles, notamment :
- 1. l'identification de la ou des marchandises dangereuses transportes ;
- 2. la nature du danger prsent par lesdites marchandises ;
- 3. les mesures que doit prendre le conducteur en cas d'incident ou d'accident et les quipements ncessaires pour l'application de ces mesures ;
- 4. les moyens d'intervention pour limiter les consquences de l'incident ou de l'accident survenu.
- 5. L'administration fixe le modle de la fiche de scurit et les modalits de sa dlivrance et de son utilisation.
- 6. Le transporteur est responsable du contenu de la fiche de scurit.`,en:`Le transporteur doit remettre au conducteur du vhicule, au plus tard, au moment du chargement ou du remplissage des marchandises dangereuses dans le vhicule concern, une fiche de scurit pour chaque marchandise transporte ou pour chaque groupe de marchandises prsentant les mmes dangers. Chaque fiche comporte des instructions de scurtit et toutes informations utiles, notamment :
- 1. l'identification de la ou des marchandises dangereuses transportes ;
- 2. la nature du danger prsent par lesdites marchandises ;
- 3. les mesures que doit prendre le conducteur en cas d'incident ou d'accident et les quipements ncessaires pour l'application de ces mesures ;
- 4. les moyens d'intervention pour limiter les consquences de l'incident ou de l'accident survenu.
- 5. L'administration fixe le modle de la fiche de scurit et les modalits de sa dlivrance et de son utilisation.
- 6. Le transporteur est responsable du contenu de la fiche de scurit.`}},{article_id:"tmd_art_21",code:{fr:"Article 21",en:"Article 21"},text:{fr:"Nul ne peut conduire les vhicules viss  l'alina 2 du prsent article s'il n'est titulaire d'un certificat attestant qu'il a suivi une formation spciale en matire de transport de marchandises dangereuses. L'administration fixe les catgories de vhicules destins au transport par route de marchandises dangereuses dont les conducteurs doivent tre titulaires du certificat de formation, indiqu ci-dessus, en tenant compte du poids maximal autoris en charge desdits vhicules, de la nature et des quantits de marchandises dangereuses  transporter par ces vhicules ainsi que des conditions de transport. La formation susvise est dispense par des tablissements agrs par l'administration  cet effet. Le certificat de formation est dlivr par lesdits tablissements au postulant qui a russi la formation spciale. Tout conducteur titulaire du certificat de la formation spciale doit suivre tous les cinq ans, en vue de renouvellement de son certificat, une formation de recyclage au cours de la dernire anne de ladite priode. Le programme et les conditions d'organisation de ladite formation, les modalits d'valuation, les conditions d'agrment des tablissements de formation, le modle et le contenu du certificat de formation ainsi que les modalits de sa dlivrance et de son renouvellement sont fixs par voie rglementaire",en:"Nul ne peut conduire les vhicules viss  l'alina 2 du prsent article s'il n'est titulaire d'un certificat attestant qu'il a suivi une formation spciale en matire de transport de marchandises dangereuses. L'administration fixe les catgories de vhicules destins au transport par route de marchandises dangereuses dont les conducteurs doivent tre titulaires du certificat de formation, indiqu ci-dessus, en tenant compte du poids maximal autoris en charge desdits vhicules, de la nature et des quantits de marchandises dangereuses  transporter par ces vhicules ainsi que des conditions de transport. La formation susvise est dispense par des tablissements agrs par l'administration  cet effet. Le certificat de formation est dlivr par lesdits tablissements au postulant qui a russi la formation spciale. Tout conducteur titulaire du certificat de la formation spciale doit suivre tous les cinq ans, en vue de renouvellement de son certificat, une formation de recyclage au cours de la dernire anne de ladite priode. Le programme et les conditions d'organisation de ladite formation, les modalits d'valuation, les conditions d'agrment des tablissements de formation, le modle et le contenu du certificat de formation ainsi que les modalits de sa dlivrance et de son renouvellement sont fixs par voie rglementaire"}}]},{chapter_id:"tmd_chapitre_v_obligations_generales",title:{fr:`Chapitre V
Des obligations des intervenants dans le transport par route des marchandises dangereuses
Section I. - De l'obligation gnrale de scurit et d'information`,en:`Chapitre V
Des obligations des intervenants dans le transport par route des marchandises dangereuses
Section I. - De l'obligation gnrale de scurit et d'information`},articles:[{article_id:"tmd_art_22",code:{fr:"Article 22",en:"Article 22"},text:{fr:`Tous les intervenants dans le transport par route de marchandises dangereuses doivent prendre toutes les mesures ncessaires, conformment aux dispositions de la prsente loi, selon la nature et l'ampleur des dangers prvisibles afin d'viter tout dommage aux personnes, aux biens ou  l'environnement du fait du transport par route de marchandises dangereuses, et, le cas chant, prendre toutes les mesures
ncessaires pour en minimiser les effets.
Lorsque la scurit du transport ou la scurit publique est menace ou risque d'tre menace lors d'un transport par route de marchandises dangereuses, l'intervenant qui a connaissance de cette menace doit en aviser immdiatement les autorits comptentes ainsi que les autres intervenants dans l'opration de transport concerne et mettre  leur disposition les informations dont il dispose.`,en:`Tous les intervenants dans le transport par route de marchandises dangereuses doivent prendre toutes les mesures ncessaires, conformment aux dispositions de la prsente loi, selon la nature et l'ampleur des dangers prvisibles afin d'viter tout dommage aux personnes, aux biens ou  l'environnement du fait du transport par route de marchandises dangereuses, et, le cas chant, prendre toutes les mesures
ncessaires pour en minimiser les effets.
Lorsque la scurit du transport ou la scurit publique est menace ou risque d'tre menace lors d'un transport par route de marchandises dangereuses, l'intervenant qui a connaissance de cette menace doit en aviser immdiatement les autorits comptentes ainsi que les autres intervenants dans l'opration de transport concerne et mettre  leur disposition les informations dont il dispose.`}},{article_id:"tmd_art_24",code:{fr:"Article 24",en:"Article 24"},text:{fr:"Dans le cas o l'expditeur confie certaines oprations telles que l'emballage, le chargement ou le remplissage  un tiers, il demeure responsable desdites oprations et de leur conformit avec les dispositions de la prsente loi. Lorsque le propritaire des marchandises dangereuses ne procde pas lui-mme  l'expdition de ses marchandises, il doit informer, par crit, l'expditeur que lesdites marchandises sont des marchandises dangereuses et soumises aux dispositions de la prsente loi. Il doit lui fournir toutes les informations et les documents exigs par la prsente loi et ncessaires  l'accomplissement de ses obligations.",en:"Dans le cas o l'expditeur confie certaines oprations telles que l'emballage, le chargement ou le remplissage  un tiers, il demeure responsable desdites oprations et de leur conformit avec les dispositions de la prsente loi. Lorsque le propritaire des marchandises dangereuses ne procde pas lui-mme  l'expdition de ses marchandises, il doit informer, par crit, l'expditeur que lesdites marchandises sont des marchandises dangereuses et soumises aux dispositions de la prsente loi. Il doit lui fournir toutes les informations et les documents exigs par la prsente loi et ncessaires  l'accomplissement de ses obligations."}}]},{chapter_id:"tmd_obligations_transporteur",title:{fr:"Section 4. - Des obligations du transporteur",en:"Section 4. - Des obligations du transporteur"},articles:[{article_id:"tmd_art_26",code:{fr:"Article 26",en:"Article 26"},text:{fr:`Le transporteur doit contracter une assurance complmentaire  l'assurance du vhicule terrestre  moteur utilis pour le transport par route des marchandises dangereuses, destine  couvrir sa responsabilit pour les dommages corporels, matriels et environnementaux qui peuvent tre causs par lesdites marchandises lors de leur transport par route.
Cette assurance est contracte dans les conditions et selon les modalits prvues par la loi n 17-99 portant code des assurances.
Dans le cas o le transport par route des marchandises dangereuses constitue une partie d'une expdition comprenant galement un transport par voie maritime, sans rupture de charge, les rgles de responsabilit et d'assurance applicables en matire de transport par mer de marchandises dangereuses s'appliquent  l'ensemble de l'expdition sans qu'il y ait  distinguer entre la partie maritime et la partie
terrestre de celle-ci.`,en:`Le transporteur doit contracter une assurance complmentaire  l'assurance du vhicule terrestre  moteur utilis pour le transport par route des marchandises dangereuses, destine  couvrir sa responsabilit pour les dommages corporels, matriels et environnementaux qui peuvent tre causs par lesdites marchandises lors de leur transport par route.
Cette assurance est contracte dans les conditions et selon les modalits prvues par la loi n 17-99 portant code des assurances.
Dans le cas o le transport par route des marchandises dangereuses constitue une partie d'une expdition comprenant galement un transport par voie maritime, sans rupture de charge, les rgles de responsabilit et d'assurance applicables en matire de transport par mer de marchandises dangereuses s'appliquent  l'ensemble de l'expdition sans qu'il y ait  distinguer entre la partie maritime et la partie
terrestre de celle-ci.`}},{article_id:"tmd_art_27",code:{fr:"Article 27",en:"Article 27"},text:{fr:"Le transporteur de marchandises dangereuses par route ne doit pas utiliser, pour le transport desdites marchandises, un vhicule comportant plus d'une remorque. Il doit veiller  ce que seul un personnel disposant du certificat de formation spciale prvu  l'article 21 cidessus assure la conduite du vhicule transportant les marchandises dangereuses. Il doit remettre au conducteur la fiche de scurit prvue par l'article 19 ci-dessus. Avant d'effectuer l'opration de transport par route de marchandises dangereuses, il doit s'assurer que : 1) la marchandise dangereuse, objet du transport, est classe et autorise au transport par route, conformment aux dispositions de la prsente loi ; 2) le vhicule et le chargement ne prsentent pas de dfauts manifestes ou d'insuffisance des quipements ; 3) le poids maximum autoris du vhicule n'est pas dpass ; 4) le vhicule utilis pour le transport est adapt  la marchandise  transporter et notamment qu'il est construit et quip conformment aux dispositions de la prsente loi ; 5) la copie de la dclaration d'expdition prvue  l'article 20 ci-dessus se trouve  bord du vhicule ; 6) le vhicule porte la signalisation approprie  la marchandise transporte ; les quipements prescrits dans la fiche de scurit se trouvent  bord du vhicule ; 8) la citerne porte les marques et la signalisation appropries ainsi que l'indication de l'chance des prochaines preuves de vrification. Le transporteur ne doit pas utiliser une citerne dont la date d'preuve est dpasse ; 9) l'assurance vise  l'article 26 ci-dessus est en cours de validit et couvre les marchandises dangereuses transportes",en:"Le transporteur de marchandises dangereuses par route ne doit pas utiliser, pour le transport desdites marchandises, un vhicule comportant plus d'une remorque. Il doit veiller  ce que seul un personnel disposant du certificat de formation spciale prvu  l'article 21 cidessus assure la conduite du vhicule transportant les marchandises dangereuses. Il doit remettre au conducteur la fiche de scurit prvue par l'article 19 ci-dessus. Avant d'effectuer l'opration de transport par route de marchandises dangereuses, il doit s'assurer que : 1) la marchandise dangereuse, objet du transport, est classe et autorise au transport par route, conformment aux dispositions de la prsente loi ; 2) le vhicule et le chargement ne prsentent pas de dfauts manifestes ou d'insuffisance des quipements ; 3) le poids maximum autoris du vhicule n'est pas dpass ; 4) le vhicule utilis pour le transport est adapt  la marchandise  transporter et notamment qu'il est construit et quip conformment aux dispositions de la prsente loi ; 5) la copie de la dclaration d'expdition prvue  l'article 20 ci-dessus se trouve  bord du vhicule ; 6) le vhicule porte la signalisation approprie  la marchandise transporte ; les quipements prescrits dans la fiche de scurit se trouvent  bord du vhicule ; 8) la citerne porte les marques et la signalisation appropries ainsi que l'indication de l'chance des prochaines preuves de vrification. Le transporteur ne doit pas utiliser une citerne dont la date d'preuve est dpasse ; 9) l'assurance vise  l'article 26 ci-dessus est en cours de validit et couvre les marchandises dangereuses transportes"}}]},{chapter_id:"tmd_obligations_conducteur",title:{fr:"Section 5. - Des obligations du conducteur",en:"Section 5. - Des obligations du conducteur"},articles:[{article_id:"tmd_art_28",code:{fr:"Article 28",en:"Article 28"},text:{fr:`Tout conducteur d'un vhicule transportant des marchandises dangereuses doit :
- 1) s'assurer que les documents ncessaires au transport prvus par la prsente loi se trouvent  bord du vhicule et qu'ils sont en cours de validit ;
- 2) afficher dans la cabine de conduite une copie de la fiche de scurit correspondant  chaque marchandise dangereuse transporte ;
- 3) respecter les conditions de circulation et de limitation de vitesse prvues aux articles 15, 16 et 18 ci-dessus ainsi que les conditions de transport particulires  la marchandise ;
- 4) conserver sur le vhicule la signalisation qu'il comportait si ce vhicule n'a pas t nettoy, ni assaini avant son retour  vide ;
- 5) s'abstenir de charger dans le vhicule des marchandises pour son propre compte.
- 6) Les documents prvus aux 1) et 2) de l'alina premier ci- dessus doivent tre prsents  toute rquisition de l'un des agents verbalisateurs prvus  l'article 38 de la prsente loi.`,en:`Tout conducteur d'un vhicule transportant des marchandises dangereuses doit :
- 1) s'assurer que les documents ncessaires au transport prvus par la prsente loi se trouvent  bord du vhicule et qu'ils sont en cours de validit ;
- 2) afficher dans la cabine de conduite une copie de la fiche de scurit correspondant  chaque marchandise dangereuse transporte ;
- 3) respecter les conditions de circulation et de limitation de vitesse prvues aux articles 15, 16 et 18 ci-dessus ainsi que les conditions de transport particulires  la marchandise ;
- 4) conserver sur le vhicule la signalisation qu'il comportait si ce vhicule n'a pas t nettoy, ni assaini avant son retour  vide ;
- 5) s'abstenir de charger dans le vhicule des marchandises pour son propre compte.
- 6) Les documents prvus aux 1) et 2) de l'alina premier ci- dessus doivent tre prsents  toute rquisition de l'un des agents verbalisateurs prvus  l'article 38 de la prsente loi.`}},{article_id:"tmd_art_29",code:{fr:"Article 29",en:"Article 29"},text:{fr:"En cas d'incident ou d'accident impliquant un vhicule de transport par route de marchandises dangereuses, notamment en cas d'explosion, d'incendie, de fuite ou de menace de fuite suite  un choc, ou en cas de perte ou de vol de marchandises dangereuses survenant en cours de transport, le conducteur doit appliquer les instructions mentionnes dans la fiche de scurit et prendre les mesures qui y sont indiques. De mme il doit, sans dlai, aviser le transporteur et les autorits comptentes les plus proches du lieu de l'incident ou de l'accident survenu. Si, en cours de route, il constate que la scurit du transport ou la scurit publique peut tre compromise, il doit immobiliser le vhicule. Celui-ci ne peut reprendre la route que si les conditions de scurit ncessaires sont  nouveau remplies, conformment aux dispositions de la prsente loi.",en:"En cas d'incident ou d'accident impliquant un vhicule de transport par route de marchandises dangereuses, notamment en cas d'explosion, d'incendie, de fuite ou de menace de fuite suite  un choc, ou en cas de perte ou de vol de marchandises dangereuses survenant en cours de transport, le conducteur doit appliquer les instructions mentionnes dans la fiche de scurit et prendre les mesures qui y sont indiques. De mme il doit, sans dlai, aviser le transporteur et les autorits comptentes les plus proches du lieu de l'incident ou de l'accident survenu. Si, en cours de route, il constate que la scurit du transport ou la scurit publique peut tre compromise, il doit immobiliser le vhicule. Celui-ci ne peut reprendre la route que si les conditions de scurit ncessaires sont  nouveau remplies, conformment aux dispositions de la prsente loi."}},{article_id:"tmd_art_30",code:{fr:"Article 30",en:"Article 30"},text:{fr:"Il est interdit au conducteur ou  tout autre membre de l'quipage du vhicule : 1) d'ouvrir, au cours du transport, un colis ou une citerne contenant des marchandises dangereuses ; 2) de fumer ou d'utiliser toute source de feu  l'intrieur du vhicule et  son voisinage pendant le transport, le chargement et le dchargement des marchandises dangereuses.",en:"Il est interdit au conducteur ou  tout autre membre de l'quipage du vhicule : 1) d'ouvrir, au cours du transport, un colis ou une citerne contenant des marchandises dangereuses ; 2) de fumer ou d'utiliser toute source de feu  l'intrieur du vhicule et  son voisinage pendant le transport, le chargement et le dchargement des marchandises dangereuses."}},{article_id:"tmd_art_31",code:{fr:"Article 31",en:"Article 31"},text:{fr:"En dehors des membres de l'quipage du vhicule, il est interdit au conducteur de transporter des personnes dans son vhicule transportant des marchandises dangereuses.",en:"En dehors des membres de l'quipage du vhicule, il est interdit au conducteur de transporter des personnes dans son vhicule transportant des marchandises dangereuses."}}]}]},sy=e=>e?typeof e!="string"?String(e):e.replace(/\r\n/g,`
`).replace(/([.;:])\s*-\s+/g,`$1
- `).replace(/\s+-\s+/g,`
- `).replace(/\n{3,}/g,`

`).trim():"",m_e={section_id:"classement_etablissement",title:{fr:"3. Classement Etablissement",en:"3. Establishment classification"},chapters:[{chapter_id:"ce_main",title:{fr:"Dispositions",en:"Provisions"},articles:[{article_id:"ce_dahir_1914",code:{fr:"Dahir 7 Sept 1914",en:"Dahir Sep 7, 1914"},text:{fr:"Dahir portant rglementation des tablissements insalubres, incommodes ou dangereux du 7 Sept 1914",en:"Dahir portant rglementation des tablissements insalubres, incommodes ou dangereux du 7 Sept 1914"}},{article_id:"ce_article_premier_autorisation",code:{fr:"ARTICLE PREMIER",en:"ARTICLE FIRST"},text:{fr:`
- Autorisation obligatoire pour les tablissements qui prsentent des causes de danger, dinsalubrit ou dincommodit`,en:`
- Autorisation obligatoire pour les tablissements qui prsentent des causes de danger, dinsalubrit ou dincommodit`}},{article_id:"ce_arrete_1933",code:{fr:"Arrt 13 Oct 1933",en:"Decree Oct 13, 1933"},text:{fr:"Arrt du 13 octobre 1933 portant classement des tablissements insalubres, incommodes ou dangereux: Tableau",en:"Arrt du 13 octobre 1933 portant classement des tablissements insalubres, incommodes ou dangereux: Tableau"}},{article_id:"ce_arrete_1939",code:{fr:"Arrt 25 Aot 1939",en:"Decree Aug 25, 1939"},text:{fr:"Arrt du 25 aot 1939 assimilant certains tablissements insalubres, incommodes ou dangereux de 3e catgorie aux tablissements des deux premires catgories, en ce qui concerne leur installation dans des zones rserves  l'habitation.",en:"Decree of August 25, 1939 aligning certain 3rd category establishments with 1st and 2nd categories regarding installation in residential zones."}},{article_id:"ce_arrete_1950",code:{fr:"Arrt 18 Jan 1950",en:"Decree Jan 18, 1950"},text:{fr:"Arrt du 18 Janvier 1950 interdisant l'installation de certaines industries dans Ies villes municipales et les centres dlimits par arrt viziriel, avec leurs zones de banlieue ou leurs zones priphriques.",en:"Arrt du 18 Janvier 1950 interdisant l'installation de certaines industries dans Ies villes municipales et les centres dlimits par arrt viziriel, avec leurs zones de banlieue ou leurs zones priphriques."}}]}]},p_e={section_id:"reglementation_travail",title:{fr:"2. Rglementation travail",en:"2. Labor regulations"},chapters:[{chapter_id:"rt_dahir_29_dec_2014_at",title:{fr:"Dahir 29 Dcembre 2014  : Rparation des Accidents de travail",en:"Dahir 29 Dcembre 2014  : Rparation des Accidents de travail"},articles:[]},{chapter_id:"rt_general",title:{fr:`>>> Dcret du 29 Dcembre 2004 : Dure de travail (Art 184)

>>> Dcret 29 Dcembre 2004 : Travaux de nuit des femmes

>>> Dcret 13 juillet 2005 (art 315 et 316 du code de travail)`,en:`>>> Dcret du 29 Dcembre 2004 : Dure de travail (Art 184)

>>> Dcret 29 Dcembre 2004 : Travaux de nuit des femmes

>>> Dcret 13 juillet 2005 (art 315 et 316 du code de travail)`},articles:[{article_id:"rt_art_1_duree",code:{fr:"Article 1",en:"Article 1"},text:{fr:"- Duree normale de travail des salaries,, est fixee a 44 heures par semaine ou a 2288 heures par annee avec repartition hebdomadaire ou annuelle de la duree du travail.",en:"- Duree normale de travail des salaries,, est fixee a 44 heures par semaine ou a 2288 heures par annee avec repartition hebdomadaire ou annuelle de la duree du travail."}},{article_id:"rt_art_2_repartition",code:{fr:"Article 2",en:"Article 2"},text:{fr:"Lemployeur peut, lorsquil adopte le regime de 44 heures du travail dans les activites non agricoles, repartir cette duree de maniere egale ou non egale sur les jours de la semaine, sous reserve du repos hebdomadaire.",en:"Lemployeur peut, lorsquil adopte le regime de 44 heures du travail dans les activites non agricoles, repartir cette duree de maniere egale ou non egale sur les jours de la semaine, sous reserve du repos hebdomadaire."}},{article_id:"rt_art_3_annuel",code:{fr:"Article 3",en:"Article 3"},text:{fr:`Le regime de repartition annuelle peut etre adopte selon les besoins de letablissement, la nature de son activite, ses conditions techniques et ses ressources humaines et ce, dans les conditions suivantes :
- demander lavis des representants des salaries ou du comite de lentreprise, sil y a lieu ;
- mettre en place un programme previsionnel du changement de la duree de travail, au cours de lannee ou pendant une periode determinee de lannee ;
- respecter un delai dinformation sur tout changement du programme de repartition de la duree du travail qui ne peut etre inferieur a 8 jours.`,en:`Le regime de repartition annuelle peut etre adopte selon les besoins de letablissement, la nature de son activite, ses conditions techniques et ses ressources humaines et ce, dans les conditions suivantes :
- demander lavis des representants des salaries ou du comite de lentreprise, sil y a lieu ;
- mettre en place un programme previsionnel du changement de la duree de travail, au cours de lannee ou pendant une periode determinee de lannee ;
- respecter un delai dinformation sur tout changement du programme de repartition de la duree du travail qui ne peut etre inferieur a 8 jours.`}},{article_id:"rt_art_premier_transport_repos",code:{fr:"Article premier",en:"Article first"},text:{fr:`- mettre a leur disposition, en cas dabsence de moyens de transport publics, des moyens de transport de leurs lieux de residence vers le lieu de travail et vice-versa ;
- Repos dau moins une demie heure apres chaque duree de travail continu de quatre heures.
- mettre a leur disposition des moyens de repos.`,en:`- mettre a leur disposition, en cas dabsence de moyens de transport publics, des moyens de transport de leurs lieux de residence vers le lieu de travail et vice-versa ;
- Repos dau moins une demie heure apres chaque duree de travail continu de quatre heures.
- mettre a leur disposition des moyens de repos.`}},{article_id:"rt_art_1_infirmiers_500_1000",code:{fr:"Article 1",en:"Article 1"},text:{fr:`- 1 Seul infirmier pour un effecif entre 500 et 1000 Salaris
- 2 infirmiers pour un effectif entre 1001 et 1500 salaris
- Concours d'assitante sociale et d'1 infirmier supplmentaire pour plus de 1500 salaris`,en:`- 1 Seul infirmier pour un effecif entre 500 et 1000 Salaris
- 2 infirmiers pour un effectif entre 1001 et 1500 salaris
- Concours d'assitante sociale et d'1 infirmier supplmentaire pour plus de 1500 salaris`}},{article_id:"rt_art_1_infirmiers_200_2000",code:{fr:"Article 1",en:"Article 1"},text:{fr:`- 1 infirmier pour un effectif entre 200 et 800.
- Un assistant social et 2 infirmiers pour un effectif entre 801 et 2000.
- Concours d'assistante sociale et 1 infirmier supplmentaire pour chaque 1500 pour un effectif de plus de 2000 salaris.`,en:`- 1 infirmier pour un effectif entre 200 et 800.
- Un assistant social et 2 infirmiers pour un effectif entre 801 et 2000.
- Concours d'assistante sociale et 1 infirmier supplmentaire pour chaque 1500 pour un effectif de plus de 2000 salaris.`}},{article_id:"rt_art_2_service_garde",code:{fr:"Article 2",en:"Article 2"},text:{fr:"Un service de garde est assur par l'infirmier pour les entreprises prcites",en:"Un service de garde est assur par l'infirmier pour les entreprises prcites"}}]},{chapter_id:"rt_decret_22_mars_2010_csh",title:{fr:"Dcret 22 Mars 2010 fixant le modle du rapport annuel que doit tablir le comit scurit et hygine (C.S.H),  la fin de chaque anne grgorienne sur l'volution des risques professionnels dans l'entreprise",en:"Dcret 22 Mars 2010 fixant le modle du rapport annuel que doit tablir le comit scurit et hygine (C.S.H),  la fin de chaque anne grgorienne sur l'volution des risques professionnels dans l'entreprise"},articles:[]},{chapter_id:"rt_decret_16_nov_2010_travaux_interdits",title:{fr:">>> Dcret du 16 novembre 2010 : Liste des travaux auxquels il est interdit d'occuper certaines catgories de personnes.",en:">>> Dcret du 16 novembre 2010 : Liste des travaux auxquels il est interdit d'occuper certaines catgories de personnes."},articles:[{article_id:"rt_decret_16nov2010_art_2",code:{fr:"ART. 2.",en:"ART. 2."},text:{fr:`Il est interdit d'employer les mineurs de moins de 18 ans et les personnes handicapes dans les travaux dangereux ci-aprs:
1) les travaux de graissage, de nettoyage pendant l'opration de visite ou de rparation des appareils mcaniques
en marche;
2) utilisation des machines, actionnes  la main ou par un moteur mcanique, dont les parties dangereuses ne disposent pas d'organes protecteurs ncessaires;
3) services des robinets  vapeur;
4) laminage et tirage de la verge de trfilerie;
5) travaux dont l'excution ncessite: -le montage d'chafaudages volants en bois 011 en mtal, pour la rfection ou le nettoyage des maisons;
-le montage d'chafaudages fixes, en bois ou en mtal, utiliss dans les industries du btiment et des travaux publics;
6) travaux effectus sur les toitures;
7) les travaux de dmolition;
8) fonte du verre;
9) utilisation des machines dans les verreries o s'effectue
la fabrication des bouteilles par des procds mcaniques ;
10) tirage des tubes et baguettes du verre;
11) tout travailles exposant aux rayonnements ionisants ;
3) les travaux effectus dans les tanneries ;
14) les travaux de production de l'lectricit, et toute force motrice de toute sorte, de transformation et de transmission ;
15) les travaux de ramassage et de traitement des ordures ;
16) la fabrication et transport des explosifs;
17) la fabrication, manipulation des pesticides, insecticides et des herbicides;
18) les travaux de terrassement;
19) les travaux effectus dans l'air comprim;
20) les travaux de peintures dangereux contenant le plomb et l'hexane ;
21) les travaux o sont utiliss des produits d'amiante ou contenant du benzne ;
22) les travaux d'abattage des animaux dans les abattoirs;
23) confection, manutention et vente d'crits, imprims, affiches, dessins, gravures, peinture, emblmes, images ou autres, objets dont la vente, l'offre, l'exposition, l'affichage ou la distribution sont rprims par le code pnal du fait qu'ils sont contraires aux bonnes murs ou sont de nature  blesser la moralit des enfants mme s'ils ne sont pas incrimins par le code prcit;
24) les travaux effectus dans les bars, dans les dbits de boisson et dans les salles de jeu ;
25) les travaux ou activits exposant . des agents biologiques dangereux;
26) les travaux effectus dans une atmosphre de chaleur, de froid ou d'humidit extrmes ;
27) les travaux effectus par les peigneuses  main dans l'industrie du crin vgtal';
28) les travaux effectus par les machines utilises dans les industries de bois ;
29) les travaux effectus avec des cisailles mcaniques
tranchantes ainsi que tout travail fait  l'aide des presses de toute
nature autres que celles actionnes  la main ;
30) le travail  la tche
31) les diffrents travaux souterrains;
32) tout autre travail susceptible de causer des maladies professionnelles telles que fixes par l'arrt du ministre du dveloppement social, de la solidarit, de l'emploi et la formation professionnelle n 919-99 du 14 ramadan 1420 (23 dcembre 1999) ;
33) tout travail effectu dans des conditions marques par le bruit et les vibrations nuisibles.`,en:`Il est interdit d'employer les mineurs de moins de 18 ans et les personnes handicapes dans les travaux dangereux ci-aprs:
1) les travaux de graissage, de nettoyage pendant l'opration de visite ou de rparation des appareils mcaniques
en marche;
2) utilisation des machines, actionnes  la main ou par un moteur mcanique, dont les parties dangereuses ne disposent pas d'organes protecteurs ncessaires;
3) services des robinets  vapeur;
4) laminage et tirage de la verge de trfilerie;
5) travaux dont l'excution ncessite: -le montage d'chafaudages volants en bois 011 en mtal, pour la rfection ou le nettoyage des maisons;
-le montage d'chafaudages fixes, en bois ou en mtal, utiliss dans les industries du btiment et des travaux publics;
6) travaux effectus sur les toitures;
7) les travaux de dmolition;
8) fonte du verre;
9) utilisation des machines dans les verreries o s'effectue
la fabrication des bouteilles par des procds mcaniques ;
10) tirage des tubes et baguettes du verre;
11) tout travailles exposant aux rayonnements ionisants ;
3) les travaux effectus dans les tanneries ;
14) les travaux de production de l'lectricit, et toute force motrice de toute sorte, de transformation et de transmission ;
15) les travaux de ramassage et de traitement des ordures ;
16) la fabrication et transport des explosifs;
17) la fabrication, manipulation des pesticides, insecticides et des herbicides;
18) les travaux de terrassement;
19) les travaux effectus dans l'air comprim;
20) les travaux de peintures dangereux contenant le plomb et l'hexane ;
21) les travaux o sont utiliss des produits d'amiante ou contenant du benzne ;
22) les travaux d'abattage des animaux dans les abattoirs;
23) confection, manutention et vente d'crits, imprims, affiches, dessins, gravures, peinture, emblmes, images ou autres, objets dont la vente, l'offre, l'exposition, l'affichage ou la distribution sont rprims par le code pnal du fait qu'ils sont contraires aux bonnes murs ou sont de nature  blesser la moralit des enfants mme s'ils ne sont pas incrimins par le code prcit;
24) les travaux effectus dans les bars, dans les dbits de boisson et dans les salles de jeu ;
25) les travaux ou activits exposant . des agents biologiques dangereux;
26) les travaux effectus dans une atmosphre de chaleur, de froid ou d'humidit extrmes ;
27) les travaux effectus par les peigneuses  main dans l'industrie du crin vgtal';
28) les travaux effectus par les machines utilises dans les industries de bois ;
29) les travaux effectus avec des cisailles mcaniques
tranchantes ainsi que tout travail fait  l'aide des presses de toute
nature autres que celles actionnes  la main ;
30) le travail  la tche
31) les diffrents travaux souterrains;
32) tout autre travail susceptible de causer des maladies professionnelles telles que fixes par l'arrt du ministre du dveloppement social, de la solidarit, de l'emploi et la formation professionnelle n 919-99 du 14 ramadan 1420 (23 dcembre 1999) ;
33) tout travail effectu dans des conditions marques par le bruit et les vibrations nuisibles.`}},{article_id:"rt_decret_16nov2010_art_3",code:{fr:"AR.T. 3.",en:"AR.T. 3."},text:{fr:`Il est interdit d'employer tout enfant g de moins de dix huit ans dans des travaux suivants qui consistent  porter, pousser ou trainer des charges d'un poids suprieur  ceux prvus dans le prsent article:
1) Port de fardeaux:
Personnel masculin:
 les enfants gs de 15 ans : 15 kg;
 les enfants gs de 16  17 ans : 20 kg.
Personnel fminin:
 les filles ges de 15 ans : 8 kg ;
 les filles ges de 16  17 ans : 10 kg.
2) Les charges  pousser ou  traner :
Pousser ou traner des wagonnets circulant sur voie ferre:
 les enfants gs de 15 ans rvolus  18 ans : 500 kg y compris le poids du vhicule;
 les filles ges de 15 ans: 300 kg Y compris le poids du vhicule.
Pousser ou traiter une brouette:
 les garons: 40 kg ;
 les filles : 25 kg.
Pousser ou traner une vhicule  trois ou quatre roues:
 les garons et filles: 60 kg.
Pousser ou traner une charrette  bras  deux roues:
 les garons gs de 15  18 ans : 130 kg Y compris le poids du vhicule;
 les filles ges de 15  18 ans: 80 kg Y compris le poids du vhicule.
Pousser ou traner un tricycle porteurs  pdales :
Personnel masculin:
 de moins de 16 ans: 50 kg Y compris le poids du vhicule;
 de moins de 18 ans: 75 kg Y compris le poids du vhicule;
Personnel fminin:
 de moins de 16 ans: 25 kg Y compris le poids du vhicule;
 de moins de 18 ans : 50 kg Y compris le poids du vhicule.`,en:`Il est interdit d'employer tout enfant g de moins de dix huit ans dans des travaux suivants qui consistent  porter, pousser ou trainer des charges d'un poids suprieur  ceux prvus dans le prsent article:
1) Port de fardeaux:
Personnel masculin:
 les enfants gs de 15 ans : 15 kg;
 les enfants gs de 16  17 ans : 20 kg.
Personnel fminin:
 les filles ges de 15 ans : 8 kg ;
 les filles ges de 16  17 ans : 10 kg.
2) Les charges  pousser ou  traner :
Pousser ou traner des wagonnets circulant sur voie ferre:
 les enfants gs de 15 ans rvolus  18 ans : 500 kg y compris le poids du vhicule;
 les filles ges de 15 ans: 300 kg Y compris le poids du vhicule.
Pousser ou traiter une brouette:
 les garons: 40 kg ;
 les filles : 25 kg.
Pousser ou traner une vhicule  trois ou quatre roues:
 les garons et filles: 60 kg.
Pousser ou traner une charrette  bras  deux roues:
 les garons gs de 15  18 ans : 130 kg Y compris le poids du vhicule;
 les filles ges de 15  18 ans: 80 kg Y compris le poids du vhicule.
Pousser ou traner un tricycle porteurs  pdales :
Personnel masculin:
 de moins de 16 ans: 50 kg Y compris le poids du vhicule;
 de moins de 18 ans: 75 kg Y compris le poids du vhicule;
Personnel fminin:
 de moins de 16 ans: 25 kg Y compris le poids du vhicule;
 de moins de 18 ans : 50 kg Y compris le poids du vhicule.`}},{article_id:"rt_decret_16nov2010_art_4",code:{fr:"ART. 4.",en:"ART. 4."},text:{fr:`Il est interdit d'employer les femmes dans:
1. les carrires et les travaux souterrains effectus dans les mines.
Toutefois, cette interdiction ne s'applique pas aux femmes qui:
- occupent des postes de direction;
- sont occupes dans les services sanitaires et sociaux ;
- sont appeles, occasionnellement,  descendre dans les mines pour l'exercice des travaux  caractre non manuel;
2. les travaux les exposant au risque de chute ou de glissage ainsi que les travaux en position accroupie ou penche constante;
3. les travaux ou activits utilisant l'amiante et le benzne et toute autre activit les exposant aux agents chimiques dangereux.
 Il est galement interdit de charger la femme enceinte ou allaitante de :
- soulever des charges dpassant cinq kilos;
- travaux la mettant en contact avec des substances chimiques contenant le plomb ou des agents biologiques tels que le toxoplasme ou le virus de la rubole.`,en:`Il est interdit d'employer les femmes dans:
1. les carrires et les travaux souterrains effectus dans les mines.
Toutefois, cette interdiction ne s'applique pas aux femmes qui:
- occupent des postes de direction;
- sont occupes dans les services sanitaires et sociaux ;
- sont appeles, occasionnellement,  descendre dans les mines pour l'exercice des travaux  caractre non manuel;
2. les travaux les exposant au risque de chute ou de glissage ainsi que les travaux en position accroupie ou penche constante;
3. les travaux ou activits utilisant l'amiante et le benzne et toute autre activit les exposant aux agents chimiques dangereux.
 Il est galement interdit de charger la femme enceinte ou allaitante de :
- soulever des charges dpassant cinq kilos;
- travaux la mettant en contact avec des substances chimiques contenant le plomb ou des agents biologiques tels que le toxoplasme ou le virus de la rubole.`}}]},{chapter_id:"rt_chapitre_i_amenagement_locaux",title:{fr:"Chapitre I : Amnagement locaux de travail",en:"Chapitre I : Amnagement locaux de travail"},articles:[{article_id:"rt_chap1_art_premier",code:{fr:"Article premier",en:"Article first"},text:{fr:`- Les btiments (lieux de travail) sont des structures et une solidit appropries au type d'utilisation.
- Les portes et portails en va-et-vient doivent tre transparentes ou possder des panneaux transparents. avec marquage appos  hauteur de vue sur les portes transparentes. Les parties transparentes doivent tre constitues de matriaux de scurit ou tre protges contre l'enfoncement de sorte que les travailleurs ne puissent tre blesss en cas de bris de ces surfaces.
- Les portes et portails coulissantes doivent tre munis d'un systme de scurit les empchant de sortir de leur rail et de tomber.
- Les portes et portails s'ouvrant vers le haut doivent tre munis d'un systme de scurit les empchant de retomber.
- Les portes et portails automatiques doivent fonctionner sans risque d'accident pour les travailleurs ;
- Entretien et contrle rgulier de toutes ces portes,  Lorsque leur chute peut prsenter un danger pour les salaris, notamment en raison de leurs dimensions, de leur poids ou de leur mode de fixation.
- La priodicit des contrles et les interventions sont consignes dans un registre spcial.
- Signaler ls zones de dangers quand elles sont invitables (chute de personnes et d'objets) .
- Limiter l'accs aux personnes non autorises pour les zones de danger.
- Mettre en place un matriel de Premier secours  adapt  la nature des risques et facilement accessible. et le signaler`,en:`- Les btiments (lieux de travail) sont des structures et une solidit appropries au type d'utilisation.
- Les portes et portails en va-et-vient doivent tre transparentes ou possder des panneaux transparents. avec marquage appos  hauteur de vue sur les portes transparentes. Les parties transparentes doivent tre constitues de matriaux de scurit ou tre protges contre l'enfoncement de sorte que les travailleurs ne puissent tre blesss en cas de bris de ces surfaces.
- Les portes et portails coulissantes doivent tre munis d'un systme de scurit les empchant de sortir de leur rail et de tomber.
- Les portes et portails s'ouvrant vers le haut doivent tre munis d'un systme de scurit les empchant de retomber.
- Les portes et portails automatiques doivent fonctionner sans risque d'accident pour les travailleurs ;
- Entretien et contrle rgulier de toutes ces portes,  Lorsque leur chute peut prsenter un danger pour les salaris, notamment en raison de leurs dimensions, de leur poids ou de leur mode de fixation.
- La priodicit des contrles et les interventions sont consignes dans un registre spcial.
- Signaler ls zones de dangers quand elles sont invitables (chute de personnes et d'objets) .
- Limiter l'accs aux personnes non autorises pour les zones de danger.
- Mettre en place un matriel de Premier secours  adapt  la nature des risques et facilement accessible. et le signaler`}},{article_id:"rt_chap1_art_2",code:{fr:"Article 2",en:"Article 2"},text:{fr:`- Faciliter l'accs aux postes de travail et aux locaux de restauration aux salaris handicaps.
- Signaler et amnager les locaux en fonction de l'handicap`,en:`- Faciliter l'accs aux postes de travail et aux locaux de restauration aux salaris handicaps.
- Signaler et amnager les locaux en fonction de l'handicap`}},{article_id:"rt_chap1_art_3",code:{fr:"Article 3",en:"Article 3"},text:{fr:`- Faciliter et scuriser la circulation des pitons et des vhicules.(en interne et en externe) Les postes de travail extrieurs doivent tre amnags de telle faon que les salaris :
- puissent rapidement quitter leur poste de travail en cas de danger ou puissent rapidement tre secourus ;
- soient protgs contre la chute d'objets ;
- soient protgs contre les mauvaises conditions atmosphriques ;
- ne soient pas exposs  des niveaux sonores nocifs ou  des missions de gaz, vapeurs, arosols de particules solides ou liquides de substances insalubres, gnantes ou dangereuses ;
- ne puissent glisser ou chuter.`,en:`- Faciliter et scuriser la circulation des pitons et des vhicules.(en interne et en externe) Les postes de travail extrieurs doivent tre amnags de telle faon que les salaris :
- puissent rapidement quitter leur poste de travail en cas de danger ou puissent rapidement tre secourus ;
- soient protgs contre la chute d'objets ;
- soient protgs contre les mauvaises conditions atmosphriques ;
- ne soient pas exposs  des niveaux sonores nocifs ou  des missions de gaz, vapeurs, arosols de particules solides ou liquides de substances insalubres, gnantes ou dangereuses ;
- ne puissent glisser ou chuter.`}}]},{chapter_id:"rt_chapitre_ii_section_i_nettoyage",title:{fr:"Chapitre II : Prservation de l'hygine et de la scurit des salaris dans les locaux du travail : Section I : Nettoyage et dsinfection des locaux du travail",en:"Chapitre II : Prservation de l'hygine et de la scurit des salaris dans les locaux du travail : Section I : Nettoyage et dsinfection des locaux du travail"},articles:[{article_id:"rt_art_4_nettoyage",code:{fr:"Article 4",en:"Article 4"},text:{fr:`- Locaux du travail constamment propres.
- Sol nettoy une fois/jour minimum.
- Sols nettoys jour et nuit, avant et aprs clture
- Nettoyage permanent et par aspiration ou par tous autres procds ne soulevant pas de poussires.
- Nettoyage des murs, plafonds regulirement
- Murs des locaux du travail  recouverts d'enduits ou de peinture d'un ton clair ou de chaux.
- Nivelage des sols constitus de terre battue`,en:`- Locaux du travail constamment propres.
- Sol nettoy une fois/jour minimum.
- Sols nettoys jour et nuit, avant et aprs clture
- Nettoyage permanent et par aspiration ou par tous autres procds ne soulevant pas de poussires.
- Nettoyage des murs, plafonds regulirement
- Murs des locaux du travail  recouverts d'enduits ou de peinture d'un ton clair ou de chaux.
- Nivelage des sols constitus de terre battue`}},{article_id:"rt_art_5_sols_murs",code:{fr:"Article 5",en:"Article 5"},text:{fr:`- Sol nivel et impremable avec pente d'un Milimtre par mtre dans la direction de la conduite d'vacuation pour : Locaux o l'on utilise des matires organiques prissables ou altrables, manipulation des chiffons souills, sol humides
- Murs couverts d'enduit facilitant lavage.
-Nettoyage et dsinfection des murs et sols assez souvent.
- Nettoyage des locaux o l'on utilise des matires organiques altrables avec appareils mcaniques d'aspiration.
- Elimination des rsidus putrscibles ou dposs dans des rcipients mtalliques hermtiquement clos, vids et lavs avec une solution dsinfectante au moins une fois par jour
- Elevation du Plancher pour les sols humides pour viter que les pieds des salaris soient en contact direct avec l'eau ou les liquides rpandus sur le sol ou les dotter de chaussures de scurit`,en:`- Sol nivel et impremable avec pente d'un Milimtre par mtre dans la direction de la conduite d'vacuation pour : Locaux o l'on utilise des matires organiques prissables ou altrables, manipulation des chiffons souills, sol humides
- Murs couverts d'enduit facilitant lavage.
-Nettoyage et dsinfection des murs et sols assez souvent.
- Nettoyage des locaux o l'on utilise des matires organiques altrables avec appareils mcaniques d'aspiration.
- Elimination des rsidus putrscibles ou dposs dans des rcipients mtalliques hermtiquement clos, vids et lavs avec une solution dsinfectante au moins une fois par jour
- Elevation du Plancher pour les sols humides pour viter que les pieds des salaris soient en contact direct avec l'eau ou les liquides rpandus sur le sol ou les dotter de chaussures de scurit`}}]},{chapter_id:"rt_section_ii_evacuation_eaux",title:{fr:"Section II : Evacuation des eaux rsiduaires ou de lavage",en:"Section II : Evacuation des eaux rsiduaires ou de lavage"},articles:[{article_id:"rt_art_6_evacuation",code:{fr:"Article 6",en:"Article 6"},text:{fr:`- Protger les aterliers et locaux contre : les manations  d'gouts, fosses, fosses d'aisances ou de toute autre source d'infection.
- Veiller  l'tanchit des : Conduites d'vacuation des eaux rsiduaires ou de lavage et les conduites de vidange des gouts traversant les locaux de travail.
- Mettre en place des  intercepteur hydraulique nettoy au moins une fois par jour pour empcher la communication entre got et tablissement.
- Eviers construits en matriaux impermables, bien joints, avec pente dans la direction du tuyau d'coulemenent, amnags de faon  ne dgager aucune odeur.
- Ventiler efficacement les puits, conduits de gaz, canaux de fume, fosses d'aisances, cuves ou appareils quelconques pouvant contenir des gaz nocifs avant les travaux`,en:`- Protger les aterliers et locaux contre : les manations  d'gouts, fosses, fosses d'aisances ou de toute autre source d'infection.
- Veiller  l'tanchit des : Conduites d'vacuation des eaux rsiduaires ou de lavage et les conduites de vidange des gouts traversant les locaux de travail.
- Mettre en place des  intercepteur hydraulique nettoy au moins une fois par jour pour empcher la communication entre got et tablissement.
- Eviers construits en matriaux impermables, bien joints, avec pente dans la direction du tuyau d'coulemenent, amnags de faon  ne dgager aucune odeur.
- Ventiler efficacement les puits, conduits de gaz, canaux de fume, fosses d'aisances, cuves ou appareils quelconques pouvant contenir des gaz nocifs avant les travaux`}}]},{chapter_id:"rt_section_iii_installations_sanitaires",title:{fr:"Section III : Les installations sanitaires vestiaires, lavabos, douches et toilettes",en:"Section III : Les installations sanitaires vestiaires, lavabos, douches et toilettes"},articles:[{article_id:"rt_art_7_sanitaires",code:{fr:"Article 7",en:"Article 7"},text:{fr:`- Mettre  la disposition des salaris les moyens d'assurer leur propret individuelle :  vestiaires, et des lavabos.
- Les lavabos : installs dans des locaux spciaux isols des locaux du travail et placs  leur proximit.
- Amnagement des vestiaires pour au moins 10 salaris.
-Communication entre vestiaires et lavabos placs dans des locaux spars sans passer par l'extrieur, locaux de travail ou de stockage
- Sol et les parois des locaux des vestiaires et des lavabos  construis en matriaux faciles  nettoyer et impermables.
- Vestiaires et les lavabos  ars, clairs et convenablement chauffs et propre.
- Parois recouvertes de carreaux de faences ou peinture claire ou chaux.
- Sparation vestiaires hommes et femmes pour entreprises avec personnel mixte.
-Vestiaires  pourvus d'un nombre suffisant de siges et d'armoires individuelles pouvant tre fermes avec :
- des tringles portant un nombre suffisant de cintres ;
- d'un compartiment rserv aux vtements de travail souills de mauvaise odeur ou portant des matires dangereuses, et muni de deux cintres.
-Parois de ces armoires ne devront comporter aucune asprit.
- Armoires nettoyes au moins une fois par semaine.
- Lavabos  munis en eau potable  raison d'un robinet au moins pour 5 salaris.
- Mise  la disposition des salaris de savon et des serviettes propres`,en:`- Mettre  la disposition des salaris les moyens d'assurer leur propret individuelle :  vestiaires, et des lavabos.
- Les lavabos : installs dans des locaux spciaux isols des locaux du travail et placs  leur proximit.
- Amnagement des vestiaires pour au moins 10 salaris.
-Communication entre vestiaires et lavabos placs dans des locaux spars sans passer par l'extrieur, locaux de travail ou de stockage
- Sol et les parois des locaux des vestiaires et des lavabos  construis en matriaux faciles  nettoyer et impermables.
- Vestiaires et les lavabos  ars, clairs et convenablement chauffs et propre.
- Parois recouvertes de carreaux de faences ou peinture claire ou chaux.
- Sparation vestiaires hommes et femmes pour entreprises avec personnel mixte.
-Vestiaires  pourvus d'un nombre suffisant de siges et d'armoires individuelles pouvant tre fermes avec :
- des tringles portant un nombre suffisant de cintres ;
- d'un compartiment rserv aux vtements de travail souills de mauvaise odeur ou portant des matires dangereuses, et muni de deux cintres.
-Parois de ces armoires ne devront comporter aucune asprit.
- Armoires nettoyes au moins une fois par semaine.
- Lavabos  munis en eau potable  raison d'un robinet au moins pour 5 salaris.
- Mise  la disposition des salaris de savon et des serviettes propres`}},{article_id:"rt_art_8_douches",code:{fr:"Article 8",en:"Article 8"},text:{fr:"Mise en place de douches, avec sol et paroi facilement nettoyable, temprature de l'eau rglable",en:"Mise en place de douches, avec sol et paroi facilement nettoyable, temprature de l'eau rglable"}},{article_id:"rt_art_9_toilettes",code:{fr:"Article 9",en:"Article 9"},text:{fr:`- Toilettes et urinoirs : bien ventils, claires , pas de communication directe avec les locaux de travail, cabine avec porte pleine ayant au moins 1,50 mtre de hauteur avec dispositif de fermeture intrieur et extrieur, chasse d'eau entretenue,
-Etablissements de plus de 25 salaris : chasse automatique.
- Sol et parois en matriaux impermables recouvertes de carreaux de faence ou de granites, ou de peintures ou de chaux.
- Une toilette et un urinoir pour 25 salaris et une toilette pour 25 salaries.
- Etablissements de plus de 50 salaries : Toilettes  sige pour les femmes enceintes.
- Dans les tablissements avec personnel mixte  l'exception des bureaux : Sparation toilettes hommes et femmes.
- Propret des toilettes et urinaires
-Etablissements de plus de 100 salari : dsigner un salari pour les nettoyer.
- Evacuation des effluents dans les collecteurs d'gouts publics fosses septiques sauf pour les installations temporaires de chantiers
- L'emploi de puits absorbants est interdit.`,en:`- Toilettes et urinoirs : bien ventils, claires , pas de communication directe avec les locaux de travail, cabine avec porte pleine ayant au moins 1,50 mtre de hauteur avec dispositif de fermeture intrieur et extrieur, chasse d'eau entretenue,
-Etablissements de plus de 25 salaris : chasse automatique.
- Sol et parois en matriaux impermables recouvertes de carreaux de faence ou de granites, ou de peintures ou de chaux.
- Une toilette et un urinoir pour 25 salaris et une toilette pour 25 salaries.
- Etablissements de plus de 50 salaries : Toilettes  sige pour les femmes enceintes.
- Dans les tablissements avec personnel mixte  l'exception des bureaux : Sparation toilettes hommes et femmes.
- Propret des toilettes et urinaires
-Etablissements de plus de 100 salari : dsigner un salari pour les nettoyer.
- Evacuation des effluents dans les collecteurs d'gouts publics fosses septiques sauf pour les installations temporaires de chantiers
- L'emploi de puits absorbants est interdit.`}},{article_id:"rt_art_10_handicapes",code:{fr:"Article 10",en:"Article 10"},text:{fr:"Amnager des installations sanitaires appropries aux salaris handicaps.",en:"Amnager des installations sanitaires appropries aux salaris handicaps."}}]},{chapter_id:"rt_chapitre_iii_section_i_aeration_chauffage",title:{fr:"Section I : Aration et chauffage : Chapitre III : Ambiances des locaux du travail Aration, chauffage, clairage des locaux du travail et la prvention contre les risques dus au bruit",en:"Section I : Aration et chauffage : Chapitre III : Ambiances des locaux du travail Aration, chauffage, clairage des locaux du travail et la prvention contre les risques dus au bruit"},articles:[{article_id:"rt_art_11",code:{fr:"Article 11",en:"Article 11"},text:{fr:"- Renouvellement de l'air des locaux ferms  o les salaris sont appels  sjourner, pour un atmosphre propre  et pour viter les lvations exagres de la temprature, les odeurs dsagrables et les condensations.",en:"- Renouvellement de l'air des locaux ferms  o les salaris sont appels  sjourner, pour un atmosphre propre  et pour viter les lvations exagres de la temprature, les odeurs dsagrables et les condensations."}},{article_id:"rt_art_12",code:{fr:"Article 12",en:"Article 12"},text:{fr:`- Evacuation des poussires et gaz incommodes, insalubres ou toxiques par des installations de captage et de ventilation.
- Installation de dispositif d'avertissement automatique pour signaler toute dfaillance des installations de captage.`,en:`- Evacuation des poussires et gaz incommodes, insalubres ou toxiques par des installations de captage et de ventilation.
- Installation de dispositif d'avertissement automatique pour signaler toute dfaillance des installations de captage.`}},{article_id:"rt_art_13",code:{fr:"Article 13",en:"Article 13"},text:{fr:"-Dotter les salaris de masques de protection si le captage est impossible (masques entretenus et dsinfects avant rutilisation par un nouvel utilisateur)",en:"-Dotter les salaris de masques de protection si le captage est impossible (masques entretenus et dsinfects avant rutilisation par un nouvel utilisateur)"}}]},{chapter_id:"rt_chapitre_iii_section_ii_chauffage_eclairage",title:{fr:"Section II. - Chauffage et clairage des locaux du travail",en:"Section II. - Chauffage et clairage des locaux du travail"},articles:[{article_id:"rt_art_14",code:{fr:"Article 14",en:"Article 14"},text:{fr:`- Chauffage des locaux ferms pour maintenir une temprature convenable et ne donner lieu  aucune manation dltre.
-Les gardiens de chantier doivent disposer d'un abri qui les protge contre le froid.
- Eclairage naturel suffisant
- Mesurer les niveaux d'clairement des locaux o il y a prsence de salaris
Locaux affectes au travail et leurs dpendances valeurs minimales d'clairement
- Voies de circulation intrieure ........................................ 40 lux
- Escaliers et entrepts .................................................. 60 lux
- Locaux de travail, services sanitaires ............................... 120 lux
- Locaux aveugles affects  un travail permanent .................. 200 lux
Espaces extrieurs Valeurs minimales d'clairement
- Zones et voies de circulation extrieures .............. 10 lux
- Espaces extrieurs o sont effectus des travaux  caractre permanent ........................................ 40 lux
- Adapter le niveau d'clairement  la nature du travail
-En cas d'clairage artificiel, dans un mme local et pour les locaux contigus en communication., entre celui de la zone de travail et le rapport des niveaux d'clairement, l'clairement gnral doit tre compris entre 1 et 5.
-Protection des postes de travail contre les rayons solaires
- Mettre en place des  dispositions de protection contre l'blouissement et la fatigue visuelle.
- Entretenir lLes organes de commande d'clairage`,en:`- Chauffage des locaux ferms pour maintenir une temprature convenable et ne donner lieu  aucune manation dltre.
-Les gardiens de chantier doivent disposer d'un abri qui les protge contre le froid.
- Eclairage naturel suffisant
- Mesurer les niveaux d'clairement des locaux o il y a prsence de salaris
Locaux affectes au travail et leurs dpendances valeurs minimales d'clairement
- Voies de circulation intrieure ........................................ 40 lux
- Escaliers et entrepts .................................................. 60 lux
- Locaux de travail, services sanitaires ............................... 120 lux
- Locaux aveugles affects  un travail permanent .................. 200 lux
Espaces extrieurs Valeurs minimales d'clairement
- Zones et voies de circulation extrieures .............. 10 lux
- Espaces extrieurs o sont effectus des travaux  caractre permanent ........................................ 40 lux
- Adapter le niveau d'clairement  la nature du travail
-En cas d'clairage artificiel, dans un mme local et pour les locaux contigus en communication., entre celui de la zone de travail et le rapport des niveaux d'clairement, l'clairement gnral doit tre compris entre 1 et 5.
-Protection des postes de travail contre les rayons solaires
- Mettre en place des  dispositions de protection contre l'blouissement et la fatigue visuelle.
- Entretenir lLes organes de commande d'clairage`}}]},{chapter_id:"rt_chapitre_iii_section_iii_bruit",title:{fr:"Section III : Prvention contre les risques rsultant du bruit :",en:"Section III : Prvention contre les risques rsultant du bruit :"},articles:[{article_id:"rt_art_16",code:{fr:"Article 16",en:"Article 16"},text:{fr:`Mesurer le niveau de bruit pour identifier les salaris pour lesquels l'exposition sonore quotidienne atteint ou dpasse le niveau de 85 dB ou pour lesquels la pression acoustique de crte atteint ou dpasse le niveau de 135 dB.
- Renouveler le mesurage en cas modification des installations ou des modes de travail est susceptible d'entraner une lvation des niveaux de bruit.
- Consigner les rsultats de mesure
- Conserver les rsultats pendant 10 ans.`,en:`Mesurer le niveau de bruit pour identifier les salaris pour lesquels l'exposition sonore quotidienne atteint ou dpasse le niveau de 85 dB ou pour lesquels la pression acoustique de crte atteint ou dpasse le niveau de 135 dB.
- Renouveler le mesurage en cas modification des installations ou des modes de travail est susceptible d'entraner une lvation des niveaux de bruit.
- Consigner les rsultats de mesure
- Conserver les rsultats pendant 10 ans.`}},{article_id:"rt_art_17",code:{fr:"Article 17",en:"Article 17"},text:{fr:"- tablir un programme de mesurage du bruit, ou procder  l'organisation du travail pour rduire l'exposition au bruit. Lorsque l'exposition sonore quotidienne subie par un salari dpasse le niveau de 85 dB ou lorsque la pression acoustique de crte dpasse 135 dB",en:"- tablir un programme de mesurage du bruit, ou procder  l'organisation du travail pour rduire l'exposition au bruit. Lorsque l'exposition sonore quotidienne subie par un salari dpasse le niveau de 85 dB ou lorsque la pression acoustique de crte dpasse 135 dB"}},{article_id:"rt_art_18",code:{fr:"Article 18",en:"Article 18"},text:{fr:`- Mettre  la disposition des salaris des protecteurs auditifs adapts quand l'exposition sonore quotidienne dpasse 85 dB ou lorsque la pression acoustique de crte dpasse le niveau de 135 dB.
- Lorsque le port des protecteurs individuels est susceptible d'entrainer un risque d'accident, toutes mesures appropriees, notamment l'emploi de signaux d'avertissement adequats, doivent etre prises`,en:`- Mettre  la disposition des salaris des protecteurs auditifs adapts quand l'exposition sonore quotidienne dpasse 85 dB ou lorsque la pression acoustique de crte dpasse le niveau de 135 dB.
- Lorsque le port des protecteurs individuels est susceptible d'entrainer un risque d'accident, toutes mesures appropriees, notamment l'emploi de signaux d'avertissement adequats, doivent etre prises`}},{article_id:"rt_art_19",code:{fr:"Article 19",en:"Article 19"},text:{fr:`- Raliser un examen mdicale pour les salaris qui seront affects  des travaux avec un niveau d'exposition sonore suprieur  85 dB
- Les salaris exposs  un niveau suprieur  85 dB subissent une surveillance mdicale particulire.
- Les rsultats de ces examens mdicaux doivent tre conservs pendant dix ans aprs la cessation de l'exposition du salari au bruit.
- Si le salari change d'tablissement, un extrait de ces rsultats est transmis au mdecin du travail du nouvel tablissement  la demande du salari.`,en:`- Raliser un examen mdicale pour les salaris qui seront affects  des travaux avec un niveau d'exposition sonore suprieur  85 dB
- Les salaris exposs  un niveau suprieur  85 dB subissent une surveillance mdicale particulire.
- Les rsultats de ces examens mdicaux doivent tre conservs pendant dix ans aprs la cessation de l'exposition du salari au bruit.
- Si le salari change d'tablissement, un extrait de ces rsultats est transmis au mdecin du travail du nouvel tablissement  la demande du salari.`}},{article_id:"rt_art_20",code:{fr:"Article 20",en:"Article 20"},text:{fr:`Raliser une sensibilisation quand le niveau sonore dpasse 85 dB sur :
- les risques rsultant, de l'exposition au bruit au sens de l'oue ;
- les moyens mis en uvre pour prvenir ces risques ;
- l'obligation de se conformer aux mesures de prvention et de protection prvues par le rglement intrieur de l'tablissement
- le port et les modalits d'utilisation des protecteurs individuels ;
- le rle de la surveillance mdicale de la fonction auditive.`,en:`Raliser une sensibilisation quand le niveau sonore dpasse 85 dB sur :
- les risques rsultant, de l'exposition au bruit au sens de l'oue ;
- les moyens mis en uvre pour prvenir ces risques ;
- l'obligation de se conformer aux mesures de prvention et de protection prvues par le rglement intrieur de l'tablissement
- le port et les modalits d'utilisation des protecteurs individuels ;
- le rle de la surveillance mdicale de la fonction auditive.`}}]},{chapter_id:"rt_chapitre_iv_section_i_repas",title:{fr:"Chapitre IV : Les locaux rservs aux repas et les locaux rservs  l'hbergement des salaris : Section I : Les locaux rservs  la prise de repas.",en:"Chapitre IV : Les locaux rservs aux repas et les locaux rservs  l'hbergement des salaris : Section I : Les locaux rservs  la prise de repas."},articles:[{article_id:"rt_art_21",code:{fr:"Article 21",en:"Article 21"},text:{fr:`- Prise de repas dans les locaux rservs, selon rglement intrieur.
- Mettre en place un local de restauration  partir de 25 salaris. Avec.avec eau potable fraiche et chaude pour chaque 10 salaris, rfrigrateur, installation pour rchauffer les plats.
- Mettre en place un local de pause de repas hyginique pour moins de 25 salaris.
- nettoyage rgulier de ces locaux.
- analyser l'eau potable qui ne provient pas de rseau de distribution publique.`,en:`- Prise de repas dans les locaux rservs, selon rglement intrieur.
- Mettre en place un local de restauration  partir de 25 salaris. Avec.avec eau potable fraiche et chaude pour chaque 10 salaris, rfrigrateur, installation pour rchauffer les plats.
- Mettre en place un local de pause de repas hyginique pour moins de 25 salaris.
- nettoyage rgulier de ces locaux.
- analyser l'eau potable qui ne provient pas de rseau de distribution publique.`}}]},{chapter_id:"rt_chapitre_iv_section_ii_hebergement",title:{fr:"Section II : Les locaux rservs  l'hbergement des salaris",en:"Section II : Les locaux rservs  l'hbergement des salaris"},articles:[{article_id:"rt_art_22",code:{fr:"Article 22",en:"Article 22"},text:{fr:`- Locaux pour l'hbergement : 6 mtres carres et 15 mtres cubes pour chaque salari. Les parties des locaux d'une hauteur infrieure  1,90 mtre ne sont pas considres comme surfaces habitables.
- interdiction d'hberger les salaris dans les locaux affects  un usage industriel ou commercial.
- Locaux ar, propre avec fermeture
- Chaque couple a le droit d'avoir une chambre.
- Les pices  usage de dortoir ne doivent tre occupes que par des salaris du mme sexe (6 max) avec des lits de 80 cm au moins.`,en:`- Locaux pour l'hbergement : 6 mtres carres et 15 mtres cubes pour chaque salari. Les parties des locaux d'une hauteur infrieure  1,90 mtre ne sont pas considres comme surfaces habitables.
- interdiction d'hberger les salaris dans les locaux affects  un usage industriel ou commercial.
- Locaux ar, propre avec fermeture
- Chaque couple a le droit d'avoir une chambre.
- Les pices  usage de dortoir ne doivent tre occupes que par des salaris du mme sexe (6 max) avec des lits de 80 cm au moins.`}},{article_id:"rt_art_24",code:{fr:"Article 24",en:"Article 24"},text:{fr:`- Mise  disposition des salaris de serviettes, du savon et des lavabos  eau potable  raison d'un lavabo par trois salaris.
- Des toilettes et des urinoirs doivent tre installs  proximit des locaux rservs  l'hbergement des salaris
- Des douches,  temprature rglable, doivent tre installes  proximit des locaux rservs  l'hbergement des salaris dans des cabines individuelles,  raison d'une cabine pour 6 salaris.`,en:`- Mise  disposition des salaris de serviettes, du savon et des lavabos  eau potable  raison d'un lavabo par trois salaris.
- Des toilettes et des urinoirs doivent tre installs  proximit des locaux rservs  l'hbergement des salaris
- Des douches,  temprature rglable, doivent tre installes  proximit des locaux rservs  l'hbergement des salaris dans des cabines individuelles,  raison d'une cabine pour 6 salaris.`}}]},{chapter_id:"rt_chapitre_v_incendies",title:{fr:"Chapitre V : Prvention contre les incendies",en:"Chapitre V : Prvention contre les incendies"},articles:[{article_id:"rt_art_25",code:{fr:"Article 25",en:"Article 25"},text:{fr:`Classement des matires inflammables
- Premier groupe : Les produits facilement inflammables : Comprend les matires mettant des vapeurs inflammables, les matires susceptibles de brler sans apport d'oxygne, les matires dans un tat physique prsente de grandes divisions, susceptibles de former avec l'air un mlange explosif.
- Deuxime groupe: Les produits extrmement inflammables : Comprend les autres matires susceptibles de prendre feu presque instantanment au contact d'une flamme ou d'une tincelle et de propager rapidement l'incendie.
-Troisime groupe : Les produits comburants : Comprend les matires combustibles moins inflammables que le premier et le deuxime groupe prcits.`,en:`Classement des matires inflammables
- Premier groupe : Les produits facilement inflammables : Comprend les matires mettant des vapeurs inflammables, les matires susceptibles de brler sans apport d'oxygne, les matires dans un tat physique prsente de grandes divisions, susceptibles de former avec l'air un mlange explosif.
- Deuxime groupe: Les produits extrmement inflammables : Comprend les autres matires susceptibles de prendre feu presque instantanment au contact d'une flamme ou d'une tincelle et de propager rapidement l'incendie.
-Troisime groupe : Les produits comburants : Comprend les matires combustibles moins inflammables que le premier et le deuxime groupe prcits.`}},{article_id:"rt_art_26",code:{fr:"Article 26",en:"Article 26"},text:{fr:`Locaux o sont entreposes o manipules des produits facilement inflammables :
- Eclairage par des lampes lectriques munies d'une double enveloppe ou par des lampes extrieures derrire un verre dormant.
- Pas de foyer, pas de flamme, ou appareil produisant des tincelles.
- Ventilation de ces locaux
- Affichage en arabe et en Franais de l'interdiction de fumer`,en:`Locaux o sont entreposes o manipules des produits facilement inflammables :
- Eclairage par des lampes lectriques munies d'une double enveloppe ou par des lampes extrieures derrire un verre dormant.
- Pas de foyer, pas de flamme, ou appareil produisant des tincelles.
- Ventilation de ces locaux
- Affichage en arabe et en Franais de l'interdiction de fumer`}},{article_id:"rt_art_27",code:{fr:"Article 27",en:"Article 27"},text:{fr:`Locaux o sont entreposs ou manipuls des produits facilement ou extrmement inflammables ou des produits comburants,
- Aucun poste habituel de travail ne doit se trouver  plus de 10 mtres d'une issue.
- Si les fenetres de ces locaux sont munies de grilles ou de grillages, ceux-ci doivent souvrir tres facilement de linterieur.
- Pas de stockage des produits facilement ou extrmement inflammables dans les escaliers, passages et couloirs ou sous les escaliers et des issues des locaux de travail et btiments.
- Les rcipients mobiles contenant des produits facilement ou extrmement inflammables doivent tre tanches. ou avec enveloppe mtallique tanche s'ils sont en verre.
- Les chiffons, cotons et papiers imprgns de liquides inflammables ou de matires grasses doivent tre, aprs usage, enferms dans des rcipients mtalliques clos et tanches.`,en:`Locaux o sont entreposs ou manipuls des produits facilement ou extrmement inflammables ou des produits comburants,
- Aucun poste habituel de travail ne doit se trouver  plus de 10 mtres d'une issue.
- Si les fenetres de ces locaux sont munies de grilles ou de grillages, ceux-ci doivent souvrir tres facilement de linterieur.
- Pas de stockage des produits facilement ou extrmement inflammables dans les escaliers, passages et couloirs ou sous les escaliers et des issues des locaux de travail et btiments.
- Les rcipients mobiles contenant des produits facilement ou extrmement inflammables doivent tre tanches. ou avec enveloppe mtallique tanche s'ils sont en verre.
- Les chiffons, cotons et papiers imprgns de liquides inflammables ou de matires grasses doivent tre, aprs usage, enferms dans des rcipients mtalliques clos et tanches.`}},{article_id:"rt_art_28",code:{fr:"Article 28",en:"Article 28"},text:{fr:`Mise en place d'issues et dgagements pour vacuation en cas d'incendie
- Dgagements toujours libres, Aucun objet, marchandises ou matriel ne doit faire obstacle  la circulation des personnes ou rduire la largeur des dgagements, viter les culs-de-sac.
- 2 issues min pour chaque 100 , une unit par 500 personnes.
- La largeur des dgagements de 80 cm min
- Largeur des dgagements de 21 et 100 ne doit pas tre infrieure  1,50 mtre.
- Entre 101 et 300, cette largeur ne doit pas tre infrieure  2 mtres.
- Entre 301 et 500, elle ne doit pas tre infrieure  2,50 mtres.
- Elle augmentera de 50 centimtres par 100 personnes lorsque le nombre de personnes dpasse 500.`,en:`Mise en place d'issues et dgagements pour vacuation en cas d'incendie
- Dgagements toujours libres, Aucun objet, marchandises ou matriel ne doit faire obstacle  la circulation des personnes ou rduire la largeur des dgagements, viter les culs-de-sac.
- 2 issues min pour chaque 100 , une unit par 500 personnes.
- La largeur des dgagements de 80 cm min
- Largeur des dgagements de 21 et 100 ne doit pas tre infrieure  1,50 mtre.
- Entre 101 et 300, cette largeur ne doit pas tre infrieure  2 mtres.
- Entre 301 et 500, elle ne doit pas tre infrieure  2,50 mtres.
- Elle augmentera de 50 centimtres par 100 personnes lorsque le nombre de personnes dpasse 500.`}},{article_id:"rt_art_29",code:{fr:"Article 29",en:"Article 29"},text:{fr:"- Ouverture des portes d'vacuation de plus de 20 personnes, et des portes des locaux o sont entreposs des produits facilement ou extrmement inflammables vers l'extrieur si elles ne donnent pas accs sur la voie publique.",en:"- Ouverture des portes d'vacuation de plus de 20 personnes, et des portes des locaux o sont entreposs des produits facilement ou extrmement inflammables vers l'extrieur si elles ne donnent pas accs sur la voie publique."}},{article_id:"rt_art_30",code:{fr:"Article 30",en:"Article 30"},text:{fr:`- Signalisation du chemin de la sortie.
-Signalisation des "Sorties de secours"
- Mise en place d'clairage de scurit`,en:`- Signalisation du chemin de la sortie.
-Signalisation des "Sorties de secours"
- Mise en place d'clairage de scurit`}},{article_id:"rt_art_31",code:{fr:"Article 31",en:"Article 31"},text:{fr:`- Mettre en place les mesures ncessaires pour matriser tout dpart de feu.
- Avoir un nombre suffisant d'extincteurs, maintenus en bon tat de fonctionnement, d'une puissance suffisante et utilisant un produit appropri au type de feu.
- Consulter un service d'incendie comptent et agre pour la dtermination du type et du nombre des quipements ncessaires.
- Le matriel de lutte contre l'incendie doit tre entretenu et tenu en bon tat.
- Extincteurs accessible, judicieusement repartit, signal de manire efficace et facilement utilisable.`,en:`- Mettre en place les mesures ncessaires pour matriser tout dpart de feu.
- Avoir un nombre suffisant d'extincteurs, maintenus en bon tat de fonctionnement, d'une puissance suffisante et utilisant un produit appropri au type de feu.
- Consulter un service d'incendie comptent et agre pour la dtermination du type et du nombre des quipements ncessaires.
- Le matriel de lutte contre l'incendie doit tre entretenu et tenu en bon tat.
- Extincteurs accessible, judicieusement repartit, signal de manire efficace et facilement utilisable.`}}]},{chapter_id:"rt_chapitre_vi_accidents",title:{fr:"Chapitre VI : Prvention des accidents du travail",en:"Chapitre VI : Prvention des accidents du travail"},articles:[{article_id:"rt_art_32",code:{fr:"Article 32",en:"Article 32"},text:{fr:"Les passerelles, planchers en encorbellement plates-formes en surlvation ainsi que leurs moyens d'y accder, doivent tre construits, installs ou protgs de telle faon que les salaris ne soient pas exposs aux chutes.",en:"Les passerelles, planchers en encorbellement plates-formes en surlvation ainsi que leurs moyens d'y accder, doivent tre construits, installs ou protgs de telle faon que les salaris ne soient pas exposs aux chutes."}},{article_id:"rt_art_33",code:{fr:"Article 33",en:"Article 33"},text:{fr:`- Les chelles de service doivent tre munies de leurs chelons disposes ou fixes de faon  ne pouvoir ni glisser, ni basculer. Leurs chelons devront tre rigides, quidistants et soit encastrs, soit embots dans les montants, hauteur max 5 m
- Les chelles reliant les tages doivent tre chevauches et un palier de protection sera tabli  chaque tage.
-Interdit d'utiliser les chelles pour le transport de fardeaux pesant plus de 50 kilogrammes.
-Les montants des chelles doubles doivent, pendant l'emploi de celle-ci, tre immobiliss ou relis par un dispositif rigide.
- Les ponts volants ou les passerelles rservs au chargement ou le dchargement des navires ou bateaux doivent tre munis de garde-corps des deux cts. Leurs lments doivent constituer un ensemble rigide.`,en:`- Les chelles de service doivent tre munies de leurs chelons disposes ou fixes de faon  ne pouvoir ni glisser, ni basculer. Leurs chelons devront tre rigides, quidistants et soit encastrs, soit embots dans les montants, hauteur max 5 m
- Les chelles reliant les tages doivent tre chevauches et un palier de protection sera tabli  chaque tage.
-Interdit d'utiliser les chelles pour le transport de fardeaux pesant plus de 50 kilogrammes.
-Les montants des chelles doubles doivent, pendant l'emploi de celle-ci, tre immobiliss ou relis par un dispositif rigide.
- Les ponts volants ou les passerelles rservs au chargement ou le dchargement des navires ou bateaux doivent tre munis de garde-corps des deux cts. Leurs lments doivent constituer un ensemble rigide.`}},{article_id:"rt_art_34",code:{fr:"Article 34",en:"Article 34"},text:{fr:`- Interdiction d'accs aux locaux de machines  part pour le personnel d'entretien (Affichage en Arabe et en Franais)
-Les passages entre les machines, mcanismes, : Largeur de 80 centimtres min
- Nivelage des sols`,en:`- Interdiction d'accs aux locaux de machines  part pour le personnel d'entretien (Affichage en Arabe et en Franais)
-Les passages entre les machines, mcanismes, : Largeur de 80 centimtres min
- Nivelage des sols`}},{article_id:"rt_art_35",code:{fr:"Article 35",en:"Article 35"},text:{fr:`- Protection des cuves, bassins ou rservoirs pour viter les risques de chute, de dbordement, d'claboussement ainsi que contre les dangers de dversement par rupture des parois des cuves, bassins, rservoirs et bonbonnes contenant des produits susceptibles de provoquer des brlures d'origine thermique ou chimique.
- Visites priodiques des cuves, bassins et rservoirs contenant des produits corrosifs doivent avoir lieu au moins une fois par an. par une personne qualifie sous la responsabilit de l'employeur
- Conserver la date et les rsultats des visites`,en:`- Protection des cuves, bassins ou rservoirs pour viter les risques de chute, de dbordement, d'claboussement ainsi que contre les dangers de dversement par rupture des parois des cuves, bassins, rservoirs et bonbonnes contenant des produits susceptibles de provoquer des brlures d'origine thermique ou chimique.
- Visites priodiques des cuves, bassins et rservoirs contenant des produits corrosifs doivent avoir lieu au moins une fois par an. par une personne qualifie sous la responsabilit de l'employeur
- Conserver la date et les rsultats des visites`}},{article_id:"rt_art_36",code:{fr:"Article 36",en:"Article 36"},text:{fr:`- Les bouteilles contenant des gaz comprims ou dissous, doivent tre soit places sur chariot, soit immobilises au poste d'utilisation ou en parc.
-Les bouteilles vides doivent tre poses horizontalement si elles ne sont pas immobilises.
- Port de lunettes spciales  verre teints pour les travaux de soudure
- Afficher l'obligation de port des EPI.(En arabe et en Franais)`,en:`- Les bouteilles contenant des gaz comprims ou dissous, doivent tre soit places sur chariot, soit immobilises au poste d'utilisation ou en parc.
-Les bouteilles vides doivent tre poses horizontalement si elles ne sont pas immobilises.
- Port de lunettes spciales  verre teints pour les travaux de soudure
- Afficher l'obligation de port des EPI.(En arabe et en Franais)`}},{article_id:"rt_art_37",code:{fr:"Article 37",en:"Article 37"},text:{fr:`- Fosses d'entretiens et de vidange des vhicules avec escalier d'accs  chacune de leur extrmit, dgags quand les vhicules seront en place.
-Le vhicule en stationnement sur la fosse doit tre dispos de faon  pouvoir tre dplac rapidement en cas de besoin.
-Un extincteur doit tre install dans chaque fosse.`,en:`- Fosses d'entretiens et de vidange des vhicules avec escalier d'accs  chacune de leur extrmit, dgags quand les vhicules seront en place.
-Le vhicule en stationnement sur la fosse doit tre dispos de faon  pouvoir tre dplac rapidement en cas de besoin.
-Un extincteur doit tre install dans chaque fosse.`}},{article_id:"rt_art_38",code:{fr:"Article 38",en:"Article 38"},text:{fr:`- Stockage d'objets lourds en vitant les risques de chute (caisses, sacs, planches, balles de crin vgtal, briques et autres matriaux ou objets...)
-Passage interdit entre les piles sauf si elles se touchent entre elles.
- Afficher l'interdiction de passage (Arabe et Franais)
- L'accs au sommet des empilements doit se faire par le biais d'un plat penchant constitu par deux madriers au moins soigneusement entretoiss.`,en:`- Stockage d'objets lourds en vitant les risques de chute (caisses, sacs, planches, balles de crin vgtal, briques et autres matriaux ou objets...)
-Passage interdit entre les piles sauf si elles se touchent entre elles.
- Afficher l'interdiction de passage (Arabe et Franais)
- L'accs au sommet des empilements doit se faire par le biais d'un plat penchant constitu par deux madriers au moins soigneusement entretoiss.`}},{article_id:"rt_art_39",code:{fr:"Article 39",en:"Article 39"},text:{fr:"Il est interdit aux salaris portant des vtements non ajusts ou flottants de s'installer prs des machines ou des pices mobiles de machines",en:"Il est interdit aux salaris portant des vtements non ajusts ou flottants de s'installer prs des machines ou des pices mobiles de machines"}},{article_id:"rt_art_40",code:{fr:"Article 40",en:"Article 40"},text:{fr:"L'employeur est tenu d'afficher le rglement intrieur de l'tablissement dans les locaux o se font le recrutement et la paie des salaris et de veiller  son excution.",en:"L'employeur est tenu d'afficher le rglement intrieur de l'tablissement dans les locaux o se font le recrutement et la paie des salaris et de veiller  son excution."}}]},{chapter_id:"rt_arrete_22nov2010_305_330",title:{fr:">>> Arrt du 22 novembre 2010 pris pour l'application des articles 305 et 330 du code du travail",en:">>> Arrt du 22 novembre 2010 pris pour l'application des articles 305 et 330 du code du travail"},articles:[{article_id:"rt_arrete_22nov2010_305_330_art_2",code:{fr:"ART. 2.",en:"ART. 2."},text:{fr:"-  Obtention de l'attestation de conformit du service mdical (valable 5 ans, renouvellement 3 mois avant expiration)",en:"-  Obtention de l'attestation de conformit du service mdical (valable 5 ans, renouvellement 3 mois avant expiration)"}},{article_id:"rt_arrete_22nov2010_305_330_art_3",code:{fr:"ART. 3.",en:"ART. 3."},text:{fr:`Locaux rservs au service mdical  :
a) Services mdicaux indpendants au sein de l'tablissement :
  moins de 500 salaris : 2 pices de 16 mtres carrs chacune ;
  entre 500 et 1000 salaris : 3 pices de 16 mtres carrs chacune ;
 plus de 1000 salaris : une salle d'attente, un cabinet mdical, une salle de pansements, la surface de chacune de ces pices est de 16 mtres carrs,trois cabines de dshabillage dont la surface est de 4 mtres carrs chacune, une petite salle de repos de 8 mtres carrs.
- service Mdical avec deux mdecins  temps plein, il devra y avoir un second cabinet mdical.
-Installation d'eau courante, avoir un clairage et un chauffage suffisants et tre amnags de telle sorte qu'aucun bruit ne puisse gner les examens mdicaux.
b) Services mdicaux interentreprises  l'extrieur de ltablissement :
- examens mdicaux  dans un centre avec l'ensemble des quipements prvus au point a) ci-dessus, pour 1000 salaris et plus.
- une pice sera rserve  l'usage d'un poste de secours.
Dans les deux cas prcits, les examens pourront avoir lieu dans des camions dispensaires amnags suivant les normes en vigueur.`,en:`Locaux rservs au service mdical  :
a) Services mdicaux indpendants au sein de l'tablissement :
  moins de 500 salaris : 2 pices de 16 mtres carrs chacune ;
  entre 500 et 1000 salaris : 3 pices de 16 mtres carrs chacune ;
 plus de 1000 salaris : une salle d'attente, un cabinet mdical, une salle de pansements, la surface de chacune de ces pices est de 16 mtres carrs,trois cabines de dshabillage dont la surface est de 4 mtres carrs chacune, une petite salle de repos de 8 mtres carrs.
- service Mdical avec deux mdecins  temps plein, il devra y avoir un second cabinet mdical.
-Installation d'eau courante, avoir un clairage et un chauffage suffisants et tre amnags de telle sorte qu'aucun bruit ne puisse gner les examens mdicaux.
b) Services mdicaux interentreprises  l'extrieur de ltablissement :
- examens mdicaux  dans un centre avec l'ensemble des quipements prvus au point a) ci-dessus, pour 1000 salaris et plus.
- une pice sera rserve  l'usage d'un poste de secours.
Dans les deux cas prcits, les examens pourront avoir lieu dans des camions dispensaires amnags suivant les normes en vigueur.`}},{article_id:"rt_arrete_22nov2010_305_330_art_4",code:{fr:"ART. 4. ",en:"ART. 4. "},text:{fr:`- Dans le cas d'un service mdical du travail interentreprises est organis en plusieurs centres mdicaux: 5 mdecins max  temps complet
- Affichage des noms des mdecins avec l'indication des lieux o ils peuvent tre joints.
Dans les services mdicaux  interentreprises, les examens mdicaux ont lieu soit :
 dans l'un des centres fixes ;
 dans un centre mobile ;
 dans les locaux quips  l'intrieur de l'entreprise.
Ces locaux doivent rpondre aux conditions de sant et de scurit.
- Pas plus d'1 seul mdecin  temps plein ou partiel si le nombre de salaris n'exige pas plus`,en:`- Dans le cas d'un service mdical du travail interentreprises est organis en plusieurs centres mdicaux: 5 mdecins max  temps complet
- Affichage des noms des mdecins avec l'indication des lieux o ils peuvent tre joints.
Dans les services mdicaux  interentreprises, les examens mdicaux ont lieu soit :
 dans l'un des centres fixes ;
 dans un centre mobile ;
 dans les locaux quips  l'intrieur de l'entreprise.
Ces locaux doivent rpondre aux conditions de sant et de scurit.
- Pas plus d'1 seul mdecin  temps plein ou partiel si le nombre de salaris n'exige pas plus`}}]},{chapter_id:"rt_medecin_maladies",title:{fr:">>> Arrt du 16 juillet 2012 : article 327 du Code du travail.",en:">>> Arrt du 16 juillet 2012 : article 327 du Code du travail."},articles:[{article_id:"rt_art_medecin_missions",code:{fr:"Article 1- Article 4",en:"Article 1- Article 4"},text:{fr:"Missions du Mdecin",en:"Missions du Mdecin"}},{article_id:"rt_art_5_dossier_medical",code:{fr:"ART. 5. -",en:"ART. 5. -"},text:{fr:`-  Le mdecin doit constituer un dossier mdical
- Etablir, en double exemplaire, une fiche d'aptitude aprs chaque visite mdicale.`,en:`-  Le mdecin doit constituer un dossier mdical
- Etablir, en double exemplaire, une fiche d'aptitude aprs chaque visite mdicale.`}},{article_id:"rt_annexe_i_16_juillet_2012_surveillance",code:{fr:"Annexe I 16 juillet 2012",en:"Annexe I 16 juillet 2012"},text:{fr:`Liste indicative des travaux ncessitant une surveillance mdicale particulire
 Application des peintures et vernis par pulvrisation ;
 Travaux effectus en air comprim et en milieu hyperbare ;
 Emploi d'outils pneumatiques  main, transmettant des vibrations ;
 Travaux effectus dans les gouts ;
 Travaux effectus dans les abattoirs, travaux d'quarrissage ;
 Manipulation, chargement, dchargement, transport soit des peaux brutes, poils, crins, soies de porc, laine, os ou autres dpouilles animales, soit de sacs, enveloppes ou rcipients contenant ou ayant contenu de telles dpouilles,  l'exclusion des os dglatins ou dgraisss et des dchets de tannerie chauls ;
 Collecte et traitement des ordures ;
 Travaux exposant  de hautes tempratures,  des poussires ou manations toxiques et concernant le traitement et l'extraction des minerais, la production des mtaux et les verreries ;
 Travaux de btiment, de construction (plomberie, pltrerie, carrelage, marbre  ) et de dmolition (retrait de matires contenant de l'amiante) ;
 Travail de nuit ou travail en quipes alternantes
 Travaux souterrains :
 Travaux en atmosphre chaude et humide ;
 Travaux au contact des animaux ;
 Travail en service arien ;
 Travaux exposant au :
- Fluor et ses composs ;
- Bryllium ;
- Cadmium ;
- Fer ;
- Chlore ;
- Cobalt :
- Nickel ;
- Glycols ;
- Formol (l'aldhyde formique et ses polymres)
- Brome ;
- Chlorure de vinyle ;
- Iode ;
- Isocyanates organiques ;
- Bis chlorthal ther ;
- Phosphore et composs, notamment les esters  phosphorique& pyrophosphoriques, thiophosphoriques,  ainsi que  ie& autres composs organiques du phosphore ;
- Arsenic et ses composs ;
- Sulfure de carbone ;
- Oxychlorure de carbone ;
- Acide chromique, chromates,  bichrornates akalins,  l'exception de  leurs solutions aqueuses dilues ;
- Bioxyde de manganse ;
- Plomb et ses composs ;
- Mercure et ses composs ;
- Glucine et ses sels ;
- Benzne et homologues ;
- Hexanes aromatiques ;
- Rsines poxy ;
- Phnols et naphtols
- Drivs halogns, nitrs et amins  des hydrocarbures  et de leurs drivs ;
- Brais, goudrons et huiles minrales ;
- Poussires de bois ;
- Rayons X et substances radioactives ;
- Niveau de bruit > 85 dB (A) ;`,en:`Liste indicative des travaux ncessitant une surveillance mdicale particulire
 Application des peintures et vernis par pulvrisation ;
 Travaux effectus en air comprim et en milieu hyperbare ;
 Emploi d'outils pneumatiques  main, transmettant des vibrations ;
 Travaux effectus dans les gouts ;
 Travaux effectus dans les abattoirs, travaux d'quarrissage ;
 Manipulation, chargement, dchargement, transport soit des peaux brutes, poils, crins, soies de porc, laine, os ou autres dpouilles animales, soit de sacs, enveloppes ou rcipients contenant ou ayant contenu de telles dpouilles,  l'exclusion des os dglatins ou dgraisss et des dchets de tannerie chauls ;
 Collecte et traitement des ordures ;
 Travaux exposant  de hautes tempratures,  des poussires ou manations toxiques et concernant le traitement et l'extraction des minerais, la production des mtaux et les verreries ;
 Travaux de btiment, de construction (plomberie, pltrerie, carrelage, marbre  ) et de dmolition (retrait de matires contenant de l'amiante) ;
 Travail de nuit ou travail en quipes alternantes
 Travaux souterrains :
 Travaux en atmosphre chaude et humide ;
 Travaux au contact des animaux ;
 Travail en service arien ;
 Travaux exposant au :
- Fluor et ses composs ;
- Bryllium ;
- Cadmium ;
- Fer ;
- Chlore ;
- Cobalt :
- Nickel ;
- Glycols ;
- Formol (l'aldhyde formique et ses polymres)
- Brome ;
- Chlorure de vinyle ;
- Iode ;
- Isocyanates organiques ;
- Bis chlorthal ther ;
- Phosphore et composs, notamment les esters  phosphorique& pyrophosphoriques, thiophosphoriques,  ainsi que  ie& autres composs organiques du phosphore ;
- Arsenic et ses composs ;
- Sulfure de carbone ;
- Oxychlorure de carbone ;
- Acide chromique, chromates,  bichrornates akalins,  l'exception de  leurs solutions aqueuses dilues ;
- Bioxyde de manganse ;
- Plomb et ses composs ;
- Mercure et ses composs ;
- Glucine et ses sels ;
- Benzne et homologues ;
- Hexanes aromatiques ;
- Rsines poxy ;
- Phnols et naphtols
- Drivs halogns, nitrs et amins  des hydrocarbures  et de leurs drivs ;
- Brais, goudrons et huiles minrales ;
- Poussires de bois ;
- Rayons X et substances radioactives ;
- Niveau de bruit > 85 dB (A) ;`}},{article_id:"rt_art_premier_tableau_maladies",code:{fr:"Article premier",en:"Article first"},text:{fr:"Le tableau (annexe N1) fixant la liste des maladies professionnelles, annex  l'arrt susvis N 919-99 du ramadan 1420 (23 dcembre 1999) est abrog et remplac par les tableaux des maladies professionnelles (annexe N1), annexs au prsent arrt.",en:"Le tableau (annexe N1) fixant la liste des maladies professionnelles, annex  l'arrt susvis N 919-99 du ramadan 1420 (23 dcembre 1999) est abrog et remplac par les tableaux des maladies professionnelles (annexe N1), annexs au prsent arrt."}}]},{chapter_id:"rt_arrete_22nov2010_temps_min_medecins",title:{fr:">>> Arrete du 22 novembre 2010 fixant le temps minimum que le ou les medecins du travail doivent consacrer aux salaries.",en:">>> Arrete du 22 novembre 2010 fixant le temps minimum que le ou les medecins du travail doivent consacrer aux salaries."},articles:[{article_id:"rt_arrete_22nov2010_temps_min_article_premier",code:{fr:"ARTICLE PREMIER. ",en:"ARTICLE PREMIER. "},text:{fr:`Le temps minimum que le ou les mdecins du travail doivent consacrer aux salaris :
a) dans les entreprises ne prsentant aucun risque pour la sant des salaris : une heure par mois pour 20 salaris ou 10 salaris de moins de 18 ans ;
b) dans les entreprises o les salaris doivent tre soumis  une surveillance mdicale particulire : une heure par mois pour 10 salaris.`,en:`Le temps minimum que le ou les mdecins du travail doivent consacrer aux salaris :
a) dans les entreprises ne prsentant aucun risque pour la sant des salaris : une heure par mois pour 20 salaris ou 10 salaris de moins de 18 ans ;
b) dans les entreprises o les salaris doivent tre soumis  une surveillance mdicale particulire : une heure par mois pour 10 salaris.`}}]}]},f_e={section_id:"installations_electriques",title:{fr:"4. Installations lectriques",en:"4. Electrical installations"},chapters:[{chapter_id:"ie_main",title:{fr:"Dispositions",en:"Provisions"},articles:[{article_id:"ie_art_1",code:{fr:"Article 1",en:"Article 1"},text:{fr:"Premier groupe 1 Locaux o existent des risques particuliers d'explosion ou de dgradation, 2 Locaux o sont entreposes ou manipules les matires inflammables des catgories suivantes : matires mettant des vapeurs inflammables, matires susceptibles de brler sans apport d'oxygne, matires dans un tat physique de grande division, susceptibles de former avec l'air un mlange explosif ; 3 Installations provisoires de chantiers et emplacements de travail  l'extrieur et  dcouvert ; 4 Locaux dans lesquels il existe des installations de deuxime ou troisime catgorie, dfinies  l'article 2 de l'arrt viziriel prcit du 28 juin 1938, quel que soit le nombre de personnes qu'ils occupent ou qu'ils sont susceptibles de recevoir.",en:"First group: 1) Premises where there are particular risks of explosion or deterioration; 2) Premises where flammable materials of the following categories are stored or handled: materials emitting flammable vapors, materials capable of burning without oxygen supply, materials in a highly divided physical state likely to form an explosive mixture with air; 3) Temporary site installations and outdoor/open work locations; 4) Premises in which there are second- or third-category installations, as defined in Article 2 of the above-mentioned vizierial decree of June 28, 1938, regardless of the number of persons they occupy or may receive."}},{article_id:"ie_art_19_lampes_incandescence",code:{fr:"Article 19",en:"Article 19"},text:{fr:"Mise en place de lampes  incandescences dans les locaux contenant des produits explosifs et locaux d'accumulateurs, avec une ventilation suffisante.",en:"Mise en place de lampes  incandescences dans les locaux contenant des produits explosifs et locaux d'accumulateurs, avec une ventilation suffisante."}},{article_id:"ie_art_25_extincteurs_sable",code:{fr:"Article 25",en:"Article 25"},text:{fr:"Mise en place de sacs ou seaux remplis de sable ou des extincteurs appropris pour rpondre  un incendie d'origine lectrique.",en:"Mise en place de sacs ou seaux remplis de sable ou des extincteurs appropris pour rpondre  un incendie d'origine lectrique."}},{article_id:"ie_art_33_interdiction_changement_lampes",code:{fr:"Article 33",en:"Article 33"},text:{fr:"Interdiction de changement des lampes dans les locaux contenant des produits explosifs.",en:"Interdiction de changement des lampes dans les locaux contenant des produits explosifs."}},{article_id:"ie_art_37_verification_terres",code:{fr:"Article 37",en:"Article 37"},text:{fr:"Vrification des rsistances des terres par une personne qualifie ou organisme agr.",en:"Vrification des rsistances des terres par une personne qualifie ou organisme agr."}},{article_id:"ie_art_39_protection_soudure_arc",code:{fr:"Article 39",en:"Article 39"},text:{fr:"Doter les oprateurs utilisant la soudure  arc lectriques de matriel de protection isolants (cran, lunettes, chaussures).",en:"Doter les oprateurs utilisant la soudure  arc lectriques de matriel de protection isolants (cran, lunettes, chaussures)."}},{article_id:"ie_art_premier_modifications_1938",code:{fr:"Article Premier",en:"Article First"},text:{fr:"Les articles 19, 23, 24, 30 et 45 de l'arrt viziriel susvis du 28 juin 1938 sont modifis.",en:"Les articles 19, 23, 24, 30 et 45 de l'arrt viziriel susvis du 28 juin 1938 sont modifis."}}]},{chapter_id:"ie_circuits_secours",title:{fr:"Section I : Circuits de Secours",en:"Section I: Emergency circuits"},articles:[{article_id:"ie_art_2_circuits_secours",code:{fr:"Article 2",en:"Article 2"},text:{fr:"Alimenter les circuits de secours par une source indpendante pour ne pas interrompre le fonctionnement en cas de coupure d'lectricit.",en:"Alimenter les circuits de secours par une source indpendante pour ne pas interrompre le fonctionnement en cas de coupure d'lectricit."}}]},{chapter_id:"ie_circuits_securite",title:{fr:"Section II : Circuits de Scurit",en:"Section II: Safety circuits"},articles:[{article_id:"ie_art_4_circuit_securite",code:{fr:"Article 4",en:"Article 4"},text:{fr:"Constitue un circuit de scurit l'installation lectrique qui assure essentiellement la scurit du personnel et qui permet :  l'clairage de scurit d'viter la panique, de prendre les mesures de scurit qui s'imposent et d'assurer l'vacuation des personnes en cas d'interruption accidentelle de l'clairage normal ; et l'alimentation de tous autres circuits de scurit.",en:"Constitue un circuit de scurit l'installation lectrique qui assure essentiellement la scurit du personnel et qui permet :  l'clairage de scurit d'viter la panique, de prendre les mesures de scurit qui s'imposent et d'assurer l'vacuation des personnes en cas d'interruption accidentelle de l'clairage normal ; et l'alimentation de tous autres circuits de scurit."}},{article_id:"ie_art_7_alimentation_circuits_securite",code:{fr:"Article 7",en:"Article 7"},text:{fr:"L'alimentation des circuits de scurit doit tre indpendante de l'alimentation normale. Elle peut tre assure notamment par une batterie d'accumulateurs, par un groupe lectrogne ou par un rseau de distribution.",en:"L'alimentation des circuits de scurit doit tre indpendante de l'alimentation normale. Elle peut tre assure notamment par une batterie d'accumulateurs, par un groupe lectrogne ou par un rseau de distribution."}}]},{chapter_id:"ie_eclairage_securite",title:{fr:"Section III : Dispositions spciales concernant lclairage de scurit",en:"Section III: Special provisions for safety lighting"},articles:[{article_id:"ie_art_9_signaler_eclairage",code:{fr:"Article 9",en:"Article 9"},text:{fr:"Signaler l'clairage de scurit.",en:"Signaler l'clairage de scurit."}},{article_id:"ie_art_10_lampes_portatives",code:{fr:"Article 10",en:"Article 10"},text:{fr:"Dans les petits tablissements o l'vacuation serait reconnue facile  assurer par le seul moyen des lampes lectriques portatives, celles-ci pourront constituer l'clairage de scurit.",en:"Dans les petits tablissements o l'vacuation serait reconnue facile  assurer par le seul moyen des lampes lectriques portatives, celles-ci pourront constituer l'clairage de scurit."}},{article_id:"ie_art_premier_verification_organismes",code:{fr:"Article Premier",en:"Article First"},text:{fr:"La vrification des installations lectriques doit se faire par des organismes agrs.",en:"La vrification des installations lectriques doit se faire par des organismes agrs."}}]}]},qv=[n$,p_e,m_e,f_e,t_e,r_e,a_e,n_e,s_e,l_e,i_e,c_e,d_e,o_e,u_e],s$=qv.flatMap(e=>(e.chapters??[]).flatMap(t=>(t.articles??[]).map(a=>({...a,section_id:e.section_id,chapter_id:t.chapter_id}))));n$.chapters.flatMap(e=>e.articles.map(t=>({...t,chapter_id:e.chapter_id})));const h_e=({previousNonApplicableArticleIds:e=[]}={})=>{const t=new Set(e);return{sections:[...qv.map(a=>{const n=s$.filter(s=>s.section_id===a.section_id);return{section_id:a.section_id,articles:n.map(s=>({article_id:s.article_id,chapter_id:s.chapter_id,applicable:!t.has(s.article_id),compliant:!0,corrective_action:"",comment:""}))}})]}},iy=(e,t)=>e?typeof e=="string"?e:e[t==="en"?"en":"fr"]??e.fr??"":"",g_e=e=>s$.find(t=>t.article_id===e)??null,x_e=e=>qv.find(t=>t.section_id===e)??null,y_e="v3_env",v_e={section_id:"env_charte",title:{fr:"1. Charte",en:"1. Charter"},chapters:[{chapter_id:"charte",title:{fr:"Charte",en:"Charter"},articles:[{article_id:"env_charte_21",code:{fr:"Article 21",en:"Article 21"},text:{fr:`Les tablissements publics et socits dEtat, notamment ceux exerant une activit industrielle et commerciale et les entreprises prives sengagent  respecter les principes et les objectifs prvus par la prsente loi-cadre. A cet effet, ils veillent :
- adopter les modes et mthodes dapprovisionnement, dexploitation, de production et de gestion responsables, rpondant aux exigences du dveloppement durable;
- valuer priodiquement limpact de leurs activits sur lenvironnement;
- rduire au strict minimum les effets ngatifs de leurs activits sur les milieux et les cosystmes dans lesquels ils sont implants;
- contribuer  la diffusion des valeurs du dveloppement durable en exigeant de leurs partenaires, notamment de leurs fournisseurs, le respect de lenvironnement et desdites valeurs;
- adopter une communication transparente sur leur gestion environnementale.`,en:`Les tablissements publics et socits dEtat, notamment ceux exerant une activit industrielle et commerciale et les entreprises prives sengagent  respecter les principes et les objectifs prvus par la prsente loi-cadre. A cet effet, ils veillent :
- adopter les modes et mthodes dapprovisionnement, dexploitation, de production et de gestion responsables, rpondant aux exigences du dveloppement durable;
- valuer priodiquement limpact de leurs activits sur lenvironnement;
- rduire au strict minimum les effets ngatifs de leurs activits sur les milieux et les cosystmes dans lesquels ils sont implants;
- contribuer  la diffusion des valeurs du dveloppement durable en exigeant de leurs partenaires, notamment de leurs fournisseurs, le respect de lenvironnement et desdites valeurs;
- adopter une communication transparente sur leur gestion environnementale.`}}]}]},b_e={section_id:"env_eiid",title:{fr:"2. EIID",en:"2. EIID"},chapters:[{chapter_id:"eiid",title:{fr:"tablissements insalubres, incommodes ou dangereux (EIID)",en:"Unhealthy, Inconvenient or Dangerous Establishments (EIID)"},articles:[{article_id:"env_eiid_1",code:{fr:"Article 1",en:"Article 1"},text:{fr:`Les tablissements qui prsentent des causes d'insalubrit, d'incommodit ou de danger sont soumis au contrle et  la surveillance de l'autorit administrative.
Toutefois, les tablissements de cette nature appartenant  l'autorit militaire ne sont pas soumis aux dispositions du prsent dahir ; ces tablissements devront cependant tre installs de manire  prsenter, notamment en ce qui concerne la protection du voisinage, toutes les garanties de scurit requises pour les tablissements civils de mme catgorie.`,en:`Les tablissements qui prsentent des causes d'insalubrit, d'incommodit ou de danger sont soumis au contrle et  la surveillance de l'autorit administrative.
Toutefois, les tablissements de cette nature appartenant  l'autorit militaire ne sont pas soumis aux dispositions du prsent dahir ; ces tablissements devront cependant tre installs de manire  prsenter, notamment en ce qui concerne la protection du voisinage, toutes les garanties de scurit requises pour les tablissements civils de mme catgorie.`}},{article_id:"env_eiid_2",code:{fr:"Article 2",en:"Article 2"},text:{fr:`Ces tablissements sont diviss en trois classes suivant la nature des oprations qui y sont effectues ou les inconvnients qu'ils prsentent au point de vue de la scurit, de la salubrit ou de la commodit publiques. La nomenclature et le classement desdits tablissements seront dtermins par arrt de Notre Grand Vizir, sur la proposition du directeur gnral des travaux publics (1).
(1) V. A. V. 13 octobre. 1933 - 22 joumada II 1352.`,en:`Ces tablissements sont diviss en trois classes suivant la nature des oprations qui y sont effectues ou les inconvnients qu'ils prsentent au point de vue de la scurit, de la salubrit ou de la commodit publiques. La nomenclature et le classement desdits tablissements seront dtermins par arrt de Notre Grand Vizir, sur la proposition du directeur gnral des travaux publics (1).
(1) V. A. V. 13 octobre. 1933 - 22 joumada II 1352.`}},{article_id:"env_eiid_arretes",code:{fr:"Arrts",en:"Decrees"},text:{fr:`- Arrt 1933 portant classement des tablissements insalubres, incommodes ou dangereux
- Arrt 1939 assimilant certains tablissements insalubres, incommodes ou dangereux en ce qui concerne leur installation dans des zones rserves  l'habitation
- Arrt 1950 interdisant l'installation de certaines industries dans les villes municipales et les centres dlimits par arrt viziriel, avec leurs zones de banlieue ou leurs zones priphriques`,en:`- Arrt 1933 portant classement des tablissements insalubres, incommodes ou dangereux
- Arrt 1939 assimilant certains tablissements insalubres, incommodes ou dangereux en ce qui concerne leur installation dans des zones rserves  l'habitation
- Arrt 1950 interdisant l'installation de certaines industries dans les villes municipales et les centres dlimits par arrt viziriel, avec leurs zones de banlieue ou leurs zones priphriques`}},{article_id:"env_eiid_4",code:{fr:"Article 4",en:"Article 4"},text:{fr:"Les tablissements rangs dans la premire ou la deuxime classe ne peuvent tre ouverts sans une autorisation pralable. Cette autorisation est dlivre par arrt du pacha ou cad, sur avis de l'autorit municipale ou locale de contrle, pour les tablissements de la deuxime classe. Les tablissements rangs dans la troisime classe doivent faire l'objet, avant leur ouverture, d'une dclaration crite adresse  l'autorit municipale ou locale de contrle du lieu o sera situ l'tablissement.",en:"Les tablissements rangs dans la premire ou la deuxime classe ne peuvent tre ouverts sans une autorisation pralable. Cette autorisation est dlivre par arrt du pacha ou cad, sur avis de l'autorit municipale ou locale de contrle, pour les tablissements de la deuxime classe. Les tablissements rangs dans la troisime classe doivent faire l'objet, avant leur ouverture, d'une dclaration crite adresse  l'autorit municipale ou locale de contrle du lieu o sera situ l'tablissement."}}]}]},j_e={section_id:"env_eie",title:{fr:"3. EIE",en:"3. EIA"},chapters:[{chapter_id:"eie",title:{fr:"tude d'impact sur l'environnement (EIE)",en:"Environmental impact assessment (EIA)"},articles:[{article_id:"env_eie_2_7",code:{fr:"Article 2 et 7",en:"Article 2 & 7"},text:{fr:`Tous les projets mentionns dans la liste annexe  la prsente loi, entrepris par toute personne physique ou morale, prive ou publique, qui en raison de leur nature, de leur dimension ou de leur lieu d'implantation risquent de produire des impacts ngatifs sur le milieu biophysique et humain, font l'objet d'une tude d'impact sur l'environnement.
L'autorisation de tout projet soumis  l'tude d'impact sur l'environnement est subordonne  une dcision d'acceptabilit environnementale. Cette dcision constitue l'un des documents du dossier de la demande prsente en vue de l'obtention de l'autorisation du projet.`,en:`Tous les projets mentionns dans la liste annexe  la prsente loi, entrepris par toute personne physique ou morale, prive ou publique, qui en raison de leur nature, de leur dimension ou de leur lieu d'implantation risquent de produire des impacts ngatifs sur le milieu biophysique et humain, font l'objet d'une tude d'impact sur l'environnement.
L'autorisation de tout projet soumis  l'tude d'impact sur l'environnement est subordonne  une dcision d'acceptabilit environnementale. Cette dcision constitue l'un des documents du dossier de la demande prsente en vue de l'obtention de l'autorisation du projet.`}},{article_id:"env_eie_liste",code:{fr:"Liste des projets",en:"Project list"},text:{fr:`1 - Etablissements insalubres, incommodes ou dangereux classs en premire catgorie.
2 - Projets d'infrastructures
- Construction de routes (routes nationales et autoroutes);
- Voies ferres;
- Aroports;
- Amnagement de zones urbaines;
- Amnagement de zones industrielles;
- Ports de commerce et ports de plaisance;
- Barrages ou toutes autres installations destines  retenir et  stocker les eaux d'une manire permanente;
- Complexes touristiques, notamment ceux situs au littoral,  la montagne et en milieu rural;
- Installations de stockage ou d'limination de dchets quel que soit leur nature et la mthode de leur limination;
- Stations d'puration des eaux uses et ouvrages annexes;
- Emissaires d'vacuation marin;
- Transport de matires dangereuses ou toxiques.
3 - Projets industriels
3.1 - Industrie extractive :
- Mines;
- Carrires de sable et gravier;
- Cimenteries;
- Industrie de pltre;
- Transformation du lige.
3.2 - Industrie de l'nergie :
- Installations destines au stockage du gaz et tous produits inflammables;
- Raffineries de ptrole;
- Grands travaux de transfert d'nergie;
- Centrales thermiques et autres installations  combustion puissance calorifique d'au moins 300 MW;
- Centrales nuclaires;
- Centrales hydrolectriques.
3.3 - Industrie chimique :
- Installations de fabrication de produits chimiques, de pesticides, de produits pharmaceutiques, de peintures de vernis, d'lastomres et peroxydes;
- Lancement de nouveaux produits chimiques sur le march;
- Extraction, traitement et transformation d'amiante.
3.4 - Traitement des mtaux :
- Usines sidrurgiques;
- Traitement de surface et revtement des mtaux;
- Chaudronnerie et appareils mtalliques.
3.5 - Industrie des produits alimentaires :
- Conserverie de produits animal et vgtal;
- Fabrication de produits laitiers;
- Brasserie;
- Fabrication de confiseries et de boissons;
- Usines de farine de poisson et d'huile de poisson;
- Fculerie industrielle;
- Sucreries et transformation de mlasses;
- Minoteries et semouleries;
- Huileries.
3.6 - Industrie textile, du cuir, du bois, du papier, de carton et de poterie :
- Fabrication de pte  papier, de papier et de carton;
- Tanneries et mgisserie;
- Production et traitement de cellulose;
- Teinturerie de fibres;
- Fabrication de panneaux de fibres, de particules et de contre-plaqus;
- Industrie de textile et teintureries;
- Poterie.
3.7 - Industrie de caoutchouc :
- Fabrication et traitement de produits  base d'lastomres.
4 - Agriculture
- Projets de remembrement rural;
- Projets de reboisement d'une superficie suprieur  100 hectares;
- Projets d'affectation de terre inculte ou d'tendue semi-naturelle  l'exploitation agricole intensive.
5 - Projets d'aquaculture et de pisciculture`,en:`1 - Etablissements insalubres, incommodes ou dangereux classs en premire catgorie.
2 - Projets d'infrastructures
- Construction de routes (routes nationales et autoroutes);
- Voies ferres;
- Aroports;
- Amnagement de zones urbaines;
- Amnagement de zones industrielles;
- Ports de commerce et ports de plaisance;
- Barrages ou toutes autres installations destines  retenir et  stocker les eaux d'une manire permanente;
- Complexes touristiques, notamment ceux situs au littoral,  la montagne et en milieu rural;
- Installations de stockage ou d'limination de dchets quel que soit leur nature et la mthode de leur limination;
- Stations d'puration des eaux uses et ouvrages annexes;
- Emissaires d'vacuation marin;
- Transport de matires dangereuses ou toxiques.
3 - Projets industriels
3.1 - Industrie extractive :
- Mines;
- Carrires de sable et gravier;
- Cimenteries;
- Industrie de pltre;
- Transformation du lige.
3.2 - Industrie de l'nergie :
- Installations destines au stockage du gaz et tous produits inflammables;
- Raffineries de ptrole;
- Grands travaux de transfert d'nergie;
- Centrales thermiques et autres installations  combustion puissance calorifique d'au moins 300 MW;
- Centrales nuclaires;
- Centrales hydrolectriques.
3.3 - Industrie chimique :
- Installations de fabrication de produits chimiques, de pesticides, de produits pharmaceutiques, de peintures de vernis, d'lastomres et peroxydes;
- Lancement de nouveaux produits chimiques sur le march;
- Extraction, traitement et transformation d'amiante.
3.4 - Traitement des mtaux :
- Usines sidrurgiques;
- Traitement de surface et revtement des mtaux;
- Chaudronnerie et appareils mtalliques.
3.5 - Industrie des produits alimentaires :
- Conserverie de produits animal et vgtal;
- Fabrication de produits laitiers;
- Brasserie;
- Fabrication de confiseries et de boissons;
- Usines de farine de poisson et d'huile de poisson;
- Fculerie industrielle;
- Sucreries et transformation de mlasses;
- Minoteries et semouleries;
- Huileries.
3.6 - Industrie textile, du cuir, du bois, du papier, de carton et de poterie :
- Fabrication de pte  papier, de papier et de carton;
- Tanneries et mgisserie;
- Production et traitement de cellulose;
- Teinturerie de fibres;
- Fabrication de panneaux de fibres, de particules et de contre-plaqus;
- Industrie de textile et teintureries;
- Poterie.
3.7 - Industrie de caoutchouc :
- Fabrication et traitement de produits  base d'lastomres.
4 - Agriculture
- Projets de remembrement rural;
- Projets de reboisement d'une superficie suprieur  100 hectares;
- Projets d'affectation de terre inculte ou d'tendue semi-naturelle  l'exploitation agricole intensive.
5 - Projets d'aquaculture et de pisciculture`}}]}]},w_e={section_id:"env_air",title:{fr:"4. Air",en:"4. Air"},chapters:[{chapter_id:"pollution_air",title:{fr:"Loi n 13-03 relative  la lutte contre la pollution de l'air",en:"Law 13-03 on combating air pollution"},articles:[{article_id:"env_air_13_03_4",code:{fr:"Article 4",en:"Article 4"},text:{fr:`Il est interdit de dgager, d'mettre ou de rejeter, de permettre le dgagement, l'mission ou le rejet dans l'air de polluants tels que les gaz toxiques ou corrosifs, les fumes, les vapeurs, la chaleur, les poussires, les odeurs au-del de la quantit ou de la concentration autorises par les normes fixes par voie rglementaire.
Toute personne, est tenue de prvenir, de rduire et de limiter les missions de polluants dans l'air susceptibles de porter atteinte  la sant de l'homme,  la faune,  la flore, aux monuments et aux sites ou ayant des effets nocifs sur l'environnement en gnral et ce, conformment aux normes vises  l'alina prcdent.
En l'absence de normes fixes par voie rglementaire, les exploitants des installations prvues  l'article 2 (alina 1) sont tenus d'appliquer les techniques disponibles et plus avances afin de prvenir ou de rduire les missions.`,en:`Il est interdit de dgager, d'mettre ou de rejeter, de permettre le dgagement, l'mission ou le rejet dans l'air de polluants tels que les gaz toxiques ou corrosifs, les fumes, les vapeurs, la chaleur, les poussires, les odeurs au-del de la quantit ou de la concentration autorises par les normes fixes par voie rglementaire.
Toute personne, est tenue de prvenir, de rduire et de limiter les missions de polluants dans l'air susceptibles de porter atteinte  la sant de l'homme,  la faune,  la flore, aux monuments et aux sites ou ayant des effets nocifs sur l'environnement en gnral et ce, conformment aux normes vises  l'alina prcdent.
En l'absence de normes fixes par voie rglementaire, les exploitants des installations prvues  l'article 2 (alina 1) sont tenus d'appliquer les techniques disponibles et plus avances afin de prvenir ou de rduire les missions.`}},{article_id:"env_air_decret_2_09_631",code:{fr:"Dcret n 2-09-631",en:"Decree 2-09-631"},text:{fr:"Dcret n 2-09-631 fixant les valeurs limites de dgagement, d'mission ou de rejet de polluants dans l'air manant de sources de pollution fixes et les modalits de leur contrle",en:"Dcret n 2-09-631 fixant les valeurs limites de dgagement, d'mission ou de rejet de polluants dans l'air manant de sources de pollution fixes et les modalits de leur contrle"}},{article_id:"env_air_13_03_8",code:{fr:"Article 8",en:"Article 8"},text:{fr:"Toute personne responsable d'un incident grave d  l'un des polluants viss  l'article 4 ci-dessus, doit en aviser immdiatement l'autorit locale et les autorits comptentes en fournissant  celles-ci toutes informations sur les circonstances de la pollution.",en:"Toute personne responsable d'un incident grave d  l'un des polluants viss  l'article 4 ci-dessus, doit en aviser immdiatement l'autorit locale et les autorits comptentes en fournissant  celles-ci toutes informations sur les circonstances de la pollution."}}]},{chapter_id:"code_route",title:{fr:"Loi n52-05 portant code de la route",en:"Road Code Law 52-05"},articles:[{article_id:"env_air_code_route_67",code:{fr:"Article 67",en:"Article 67"},text:{fr:`1- Les vhicules  moteur ne doivent pas mettre de fumes, de gaz toxique, corrosifs ou odorants, dans des conditions susceptibles d'incommoder la population, de compromettre la sant et la scurit publiques ou de porter prjudice  l'environnement.

2- Les moteurs des vhicules ne doivent pas mettre de bruits susceptibles de causer une gne aux usagers de la route ou aux riverains.
Le moteur doit tre muni d'un dispositif d'chappement silencieux en bon tat de fonctionnement sans possibilit d'interruption par le conducteur.
Toute opration tendant  supprimer ou  rduire l'efficacit du dispositif d'chappement silencieux est interdite.`,en:`1- Les vhicules  moteur ne doivent pas mettre de fumes, de gaz toxique, corrosifs ou odorants, dans des conditions susceptibles d'incommoder la population, de compromettre la sant et la scurit publiques ou de porter prjudice  l'environnement.

2- Les moteurs des vhicules ne doivent pas mettre de bruits susceptibles de causer une gne aux usagers de la route ou aux riverains.
Le moteur doit tre muni d'un dispositif d'chappement silencieux en bon tat de fonctionnement sans possibilit d'interruption par le conducteur.
Toute opration tendant  supprimer ou  rduire l'efficacit du dispositif d'chappement silencieux est interdite.`}},{article_id:"env_air_decret_2_97_377",code:{fr:"Dcret n 2-97-377",en:"Decree 2-97-377"},text:{fr:`Dcret n 2-97-377 sur la police de la circulation et du roulage:
1- Les vhicules automobiles fonctionnant  l'essence ou au gazoil -  l'exception des vhicules spciaux des travaux publics dont la liste est fixe par voie rglementaire - doivent tre conus, construits, rgls, entretenus, aliments, utiliss et conduits de faon  ne pas provoquer d'mission de fume ou de gaz dpassant les valeurs de 4,5% de monoxyde de carbone et de 70% d'opacit.
2- Il est interdit, sauf cas de ncessit dment justifi, de laisser en tat de marche le moteur d'un vhicule en stationnement.`,en:`Dcret n 2-97-377 sur la police de la circulation et du roulage:
1- Les vhicules automobiles fonctionnant  l'essence ou au gazoil -  l'exception des vhicules spciaux des travaux publics dont la liste est fixe par voie rglementaire - doivent tre conus, construits, rgls, entretenus, aliments, utiliss et conduits de faon  ne pas provoquer d'mission de fume ou de gaz dpassant les valeurs de 4,5% de monoxyde de carbone et de 70% d'opacit.
2- Il est interdit, sauf cas de ncessit dment justifi, de laisser en tat de marche le moteur d'un vhicule en stationnement.`}}]}]},__e={section_id:"env_eau",title:{fr:"5. Eau",en:"5. Water"},chapters:[{chapter_id:"dph_conditions_generales",title:{fr:"Conditions Gnrales relatives au domaine public hydraulique",en:"General conditions related to the hydraulic public domain"},articles:[{article_id:"env_eau_12a",code:{fr:"Article 12 a",en:"Article 12 a"},text:{fr:`Interdictions:
1 - d'anticiper de quelque manire que ce soit, notamment par des constructions, sur les limites des francs-bords des cours d'eau temporaires ou permanents, des sguias, des lacs, des sources ainsi que sur les limites d'emprises des aqueducs, des conduites d'eau, des canaux de navigation, d'irrigation ou d'assainissement faisant partie du domaine public hydraulique ;
2 - de placer  l'intrieur des limites du domaine public hydraulique tous obstacles entravant la navigation, le libre coulement des eaux et la libre circulation sur les francs-bords ;
3 - de jeter dans le lit des cours d'eau des objets susceptibles d'embarrasser ce lit ou y provoquer des atterrissements ;
4 - de traverser les sguias, conduites, aqueducs ou canalisations  ciel ouvert inclus dans le domaine public hydraulique, avec des vhicules ou animaux, en dehors des passages spcialement rservs  cet effet, et de laisser pntrer les bestiaux dans les emprises des canaux d'irrigation ou d'assainissement. Les points o les troupeaux pourront exceptionnellement accder  ces canaux pour s'y abreuver sont fixs par l'agence de bassin.`,en:`Interdictions:
1 - d'anticiper de quelque manire que ce soit, notamment par des constructions, sur les limites des francs-bords des cours d'eau temporaires ou permanents, des sguias, des lacs, des sources ainsi que sur les limites d'emprises des aqueducs, des conduites d'eau, des canaux de navigation, d'irrigation ou d'assainissement faisant partie du domaine public hydraulique ;
2 - de placer  l'intrieur des limites du domaine public hydraulique tous obstacles entravant la navigation, le libre coulement des eaux et la libre circulation sur les francs-bords ;
3 - de jeter dans le lit des cours d'eau des objets susceptibles d'embarrasser ce lit ou y provoquer des atterrissements ;
4 - de traverser les sguias, conduites, aqueducs ou canalisations  ciel ouvert inclus dans le domaine public hydraulique, avec des vhicules ou animaux, en dehors des passages spcialement rservs  cet effet, et de laisser pntrer les bestiaux dans les emprises des canaux d'irrigation ou d'assainissement. Les points o les troupeaux pourront exceptionnellement accder  ces canaux pour s'y abreuver sont fixs par l'agence de bassin.`}},{article_id:"env_eau_12b",code:{fr:"Article 12 b",en:"Article 12 b"},text:{fr:`Interdictions sauf autorisation pralable dlivre suivant des modalits fixes par voie rglementaire :
1 - d'effectuer ou enlever tout dpt, toute plantation ou culture dans le domaine public hydraulique,
2 - de curer, approfondir, largir, redresser ou rgulariser les cours d'eau temporaires ou permanents,
3 - de pratiquer sur les ouvrages publics, les cours d'eau et toute autre partie du domaine public hydraulique des saignes ou prises d'eau,
4 - d'effectuer des excavations de quelque nature que ce soit, notamment des extractions de matriaux de construction, dans les lits des cours d'eau,  une distance infrieure  10 mtres de la limite des francs-bords des cours d'eau, ou de l'emprise des conduites, aqueducs et canaux. L'autorisation n'est pas accorde lorsque ces excavations sont de nature  porter prjudice aux ouvrages publics,  la stabilit des berges des cours d'eau ou  la faune aquatique.`,en:`Interdictions sauf autorisation pralable dlivre suivant des modalits fixes par voie rglementaire :
1 - d'effectuer ou enlever tout dpt, toute plantation ou culture dans le domaine public hydraulique,
2 - de curer, approfondir, largir, redresser ou rgulariser les cours d'eau temporaires ou permanents,
3 - de pratiquer sur les ouvrages publics, les cours d'eau et toute autre partie du domaine public hydraulique des saignes ou prises d'eau,
4 - d'effectuer des excavations de quelque nature que ce soit, notamment des extractions de matriaux de construction, dans les lits des cours d'eau,  une distance infrieure  10 mtres de la limite des francs-bords des cours d'eau, ou de l'emprise des conduites, aqueducs et canaux. L'autorisation n'est pas accorde lorsque ces excavations sont de nature  porter prjudice aux ouvrages publics,  la stabilit des berges des cours d'eau ou  la faune aquatique.`}},{article_id:"env_eau_25",code:{fr:"Article 25",en:"Article 25"},text:{fr:`Les propritaires ont le droit d'user des eaux pluviales tombes sur leurs fonds.
Les conditions d'accumulation artificielle des eaux sur les proprits prives sont fixes par voie rglementaire.`,en:`Les propritaires ont le droit d'user des eaux pluviales tombes sur leurs fonds.
Les conditions d'accumulation artificielle des eaux sur les proprits prives sont fixes par voie rglementaire.`}},{article_id:"env_eau_decret_2_97_224",code:{fr:"Dcret n 2-97-224",en:"Decree 2-97-224"},text:{fr:`Dcret n 2-97-224 fixant les conditions d'accumulation artificielle des eaux.
L'accumulation artificielle des eaux prvue au 2e alina de l'article 25 de la loi n 10-95, est soumise  autorisation dlivre par le directeur de l'agence du bassin hydraulique concerne dans les conditions fixes par le prsent dcret.

Toutefois, les ouvrages d'accumulation artificielle des eaux d'un volume infrieur  deux mille (2000) mtres cubes d'eaux sont soumis  une simple dclaration.`,en:`Dcret n 2-97-224 fixant les conditions d'accumulation artificielle des eaux.
L'accumulation artificielle des eaux prvue au 2e alina de l'article 25 de la loi n 10-95, est soumise  autorisation dlivre par le directeur de l'agence du bassin hydraulique concerne dans les conditions fixes par le prsent dcret.

Toutefois, les ouvrages d'accumulation artificielle des eaux d'un volume infrieur  deux mille (2000) mtres cubes d'eaux sont soumis  une simple dclaration.`}},{article_id:"env_eau_26",code:{fr:"Article 26",en:"Article 26"},text:{fr:"Sous rserve des dispositions des articles 36 et suivants de la prsente loi, tout propritaire peut, sans autorisation, creuser sur son fonds des puits ou y raliser des forages d'une profondeur ne dpassant pas le seuil fix par voie rglementaire. Il a droit  l'usage des eaux, sous rserve des droits des tiers et des conditions de la prsente loi.",en:"Sous rserve des dispositions des articles 36 et suivants de la prsente loi, tout propritaire peut, sans autorisation, creuser sur son fonds des puits ou y raliser des forages d'une profondeur ne dpassant pas le seuil fix par voie rglementaire. Il a droit  l'usage des eaux, sous rserve des droits des tiers et des conditions de la prsente loi."}}]},{chapter_id:"abh_decrets",title:{fr:"Dcrets et Arrts des ABH susviss",en:"ABH decrees and orders"},articles:[{article_id:"env_eau_37",code:{fr:"Article 37",en:"Article 37"},text:{fr:`Toute personne physique ou morale utilisant les eaux du domaine public hydraulique est soumise au paiement d'une redevance pour utilisation de l'eau, dans les conditions fixes dans la prsente loi.
Les modalits de fixation et de recouvrement de cette redevance sont fixes par voie rglementaire.`,en:`Toute personne physique ou morale utilisant les eaux du domaine public hydraulique est soumise au paiement d'une redevance pour utilisation de l'eau, dans les conditions fixes dans la prsente loi.
Les modalits de fixation et de recouvrement de cette redevance sont fixes par voie rglementaire.`}},{article_id:"env_eau_38",code:{fr:"Article 38",en:"Article 38"},text:{fr:`Sont soumis au rgime de l'autorisation :
1 - les travaux de recherche, sous rserve des dispositions de l'article 26 ci-dessus, de captage d'eaux souterraines ou jaillissantes ;
2 - le creusement de puits et la ralisation de forages d'une profondeur dpassant le seuil vis  l'article 26 ci-dessus ;
3 - les travaux de captage et l'utilisation des eaux de sources naturelles situes sur les proprits prives ;
4 - l'tablissement, pour une priode n'excdant pas une dure de cinq ans renouvelable, d'ouvrages ayant pour but l'utilisation des eaux du domaine public hydraulique, tels que moulins  eau, digues, barrages ou canaux, sous rserve que ces ouvrages n'entravent pas le libre coulement des eaux et la libre circulation sur les francs-bords et qu'ils n'entranent pas la pollution des eaux ;
5 - les prlvements de dbits d'eau dans la nappe souterraine, quelle qu'en soit la nature, suprieurs  un seuil fix par voie rglementaire ;
6 - les prises d'eau tablies sur les cours d'eau ou canaux drivs des oueds ;
7 - le prlvement d'eau de toute nature en vue de sa vente ou de son usage thrapeutique ;
8 - l'exploitation des bacs ou passages sur les cours d'eau.`,en:`Sont soumis au rgime de l'autorisation :
1 - les travaux de recherche, sous rserve des dispositions de l'article 26 ci-dessus, de captage d'eaux souterraines ou jaillissantes ;
2 - le creusement de puits et la ralisation de forages d'une profondeur dpassant le seuil vis  l'article 26 ci-dessus ;
3 - les travaux de captage et l'utilisation des eaux de sources naturelles situes sur les proprits prives ;
4 - l'tablissement, pour une priode n'excdant pas une dure de cinq ans renouvelable, d'ouvrages ayant pour but l'utilisation des eaux du domaine public hydraulique, tels que moulins  eau, digues, barrages ou canaux, sous rserve que ces ouvrages n'entravent pas le libre coulement des eaux et la libre circulation sur les francs-bords et qu'ils n'entranent pas la pollution des eaux ;
5 - les prlvements de dbits d'eau dans la nappe souterraine, quelle qu'en soit la nature, suprieurs  un seuil fix par voie rglementaire ;
6 - les prises d'eau tablies sur les cours d'eau ou canaux drivs des oueds ;
7 - le prlvement d'eau de toute nature en vue de sa vente ou de son usage thrapeutique ;
8 - l'exploitation des bacs ou passages sur les cours d'eau.`}}]},{chapter_id:"pollution_eaux",title:{fr:"Lutte contre la pollution des eaux",en:"Combating water pollution"},articles:[{article_id:"env_eau_52",code:{fr:"Article 52",en:"Article 52"},text:{fr:`Aucun dversement, coulement, rejet, dpt direct ou indirect dans une eau superficielle ou une nappe souterraine, ne peut tre fait sans autorisation pralable accorde, aprs enqute, par l'agence de bassin.
L'enqute publique ne peut excder 30 jours.
Cette autorisation donne lieu au paiement de redevances dans les conditions fixes par voie rglementaire
Le recouvrement des redevances peut tre poursuivi, dans les conditions fixes par voie rglementaire, tant auprs du propritaire des installations de dversement, coulement, rejet, dpt direct ou indirect, qu'auprs de l'exploitant desdites installations, qui sont conjointement et solidairement responsables du paiement de celles-ci.`,en:`Aucun dversement, coulement, rejet, dpt direct ou indirect dans une eau superficielle ou une nappe souterraine, ne peut tre fait sans autorisation pralable accorde, aprs enqute, par l'agence de bassin.
L'enqute publique ne peut excder 30 jours.
Cette autorisation donne lieu au paiement de redevances dans les conditions fixes par voie rglementaire
Le recouvrement des redevances peut tre poursuivi, dans les conditions fixes par voie rglementaire, tant auprs du propritaire des installations de dversement, coulement, rejet, dpt direct ou indirect, qu'auprs de l'exploitant desdites installations, qui sont conjointement et solidairement responsables du paiement de celles-ci.`}},{article_id:"env_eau_54",code:{fr:"Article 54",en:"Article 54"},text:{fr:`Il est interdit :
1 - de rejeter des eaux uses ou des dchets solides dans les oueds  sec, dans les puits, abreuvoirs et lavoirs publics, forages, canaux ou galeries de captage des eaux. Seule est admise l'vacuation des eaux rsiduaires ou uses domestiques dans des puits filtrants prcds d'une fosse septique ;
2 - d'effectuer tout pandage ou enfouissement d'effluents et tout dpt de dchets susceptibles de polluer par infiltration les eaux souterraines ou par ruissellement les eaux de surface ;
3 - de laver du linge et autres objets, notamment des viandes, peaux ou produits animaux dans les eaux de sguias, conduites, aqueducs, canalisations, rservoirs, puits qui alimentent les villes, agglomrations, lieux publics et  l'intrieur des zones de protection de ces mmes sguias, conduites, aqueducs, canalisations, rservoirs, puits ;
4 - de se baigner et de se laver dans lesdits ouvrages, ou d'y abreuver les animaux, les y laver ou baigner ;
5 - de dposer des matires insalubres, d'installer des fosses d'aisance ou des puisards  l'intrieur des zones de protection desdits sguias, conduites, aqueducs, canalisations, rservoirs et puits ;
6 - de jeter des btes mortes dans les cours d'eau, lacs, tangs, marais et de les enterrer  proximit des puits, fontaines et abreuvoirs publics ;
7 - de jeter,  l'intrieur des primtres urbains, des centres dlimits et des agglomrations rurales dotes d'un plan de dveloppement, toute eau use ou toute matire nuisible  la sant publique en dehors ds lieux indiqus  cet effet ou dans des formes contraires  celles fixes par la prsente loi et la rglementation en vigueur.`,en:`Il est interdit :
1 - de rejeter des eaux uses ou des dchets solides dans les oueds  sec, dans les puits, abreuvoirs et lavoirs publics, forages, canaux ou galeries de captage des eaux. Seule est admise l'vacuation des eaux rsiduaires ou uses domestiques dans des puits filtrants prcds d'une fosse septique ;
2 - d'effectuer tout pandage ou enfouissement d'effluents et tout dpt de dchets susceptibles de polluer par infiltration les eaux souterraines ou par ruissellement les eaux de surface ;
3 - de laver du linge et autres objets, notamment des viandes, peaux ou produits animaux dans les eaux de sguias, conduites, aqueducs, canalisations, rservoirs, puits qui alimentent les villes, agglomrations, lieux publics et  l'intrieur des zones de protection de ces mmes sguias, conduites, aqueducs, canalisations, rservoirs, puits ;
4 - de se baigner et de se laver dans lesdits ouvrages, ou d'y abreuver les animaux, les y laver ou baigner ;
5 - de dposer des matires insalubres, d'installer des fosses d'aisance ou des puisards  l'intrieur des zones de protection desdits sguias, conduites, aqueducs, canalisations, rservoirs et puits ;
6 - de jeter des btes mortes dans les cours d'eau, lacs, tangs, marais et de les enterrer  proximit des puits, fontaines et abreuvoirs publics ;
7 - de jeter,  l'intrieur des primtres urbains, des centres dlimits et des agglomrations rurales dotes d'un plan de dveloppement, toute eau use ou toute matire nuisible  la sant publique en dehors ds lieux indiqus  cet effet ou dans des formes contraires  celles fixes par la prsente loi et la rglementation en vigueur.`}},{article_id:"env_eau_decrets_list",code:{fr:"Dcrets et arrts",en:"Decrees and orders"},text:{fr:`Dcret n 2-04-553 relatif aux dversements, coulements, rejets, dpts directs ou indirects dans les eaux superficielles ou souterraines
Dcret n 2-05-1533 relatif  l'assainissement autonome
Arrt n 1180-06 fixant les taux de redevances applicables aux dversements des eaux uses et dfinissant l'unit de pollution
Arrt n1606-06 portant fixation des valeurs limites spcifiques de rejet des industries de la pte  papier, du papier et du carton
Arrt n1607-06 portant fixation des valeurs limites spcifiques de rejet domestique
Arrt n1608-06 du 25 juillet 2006 valeurs limites spcifiques de rejet des industries du sucre
Arrt portant fixation des valeurs limites des rejets de raffineries de ptrole
Arrt portant fixation des valeurs limites gnrales de rejet`,en:`Dcret n 2-04-553 relatif aux dversements, coulements, rejets, dpts directs ou indirects dans les eaux superficielles ou souterraines
Dcret n 2-05-1533 relatif  l'assainissement autonome
Arrt n 1180-06 fixant les taux de redevances applicables aux dversements des eaux uses et dfinissant l'unit de pollution
Arrt n1606-06 portant fixation des valeurs limites spcifiques de rejet des industries de la pte  papier, du papier et du carton
Arrt n1607-06 portant fixation des valeurs limites spcifiques de rejet domestique
Arrt n1608-06 du 25 juillet 2006 valeurs limites spcifiques de rejet des industries du sucre
Arrt portant fixation des valeurs limites des rejets de raffineries de ptrole
Arrt portant fixation des valeurs limites gnrales de rejet`}}]}]},k_e={section_id:"env_dechets",title:{fr:"6. Dchets",en:"6. Waste"},chapters:[{chapter_id:"obligations_generales",title:{fr:"Obligations gnrales",en:"General obligations"},articles:[{article_id:"env_dechets_4",code:{fr:"Article 4",en:"Article 4"},text:{fr:`1- Les produits conus, fabriqus et imports par les gnrateurs des dchets doivent prsenter des caractristiques de manire  ce que, lors de leur cycle de vie, la quantit et la nocivit des dchets engendrs par ces produits soient rduites en utilisant la technique disponible conomiquement viable et approprie.
2- Les gnrateurs des dchets sont tenus galement de fournir  l'administration toutes les informations sur les caractristiques des dchets qu'ils fabriquent, distribuent ou importent.
3- Des conditions et des mesures peuvent tre imposes  certains produits lors de leur fabrication ou leur importation ou leur distribution en vue de rduire la quantit et la nocivit des dchets issus de ces produits.
Les modalits d'application des alinas 2 et 3 de cet article sont fixes par voie rglementaire.`,en:`1- Les produits conus, fabriqus et imports par les gnrateurs des dchets doivent prsenter des caractristiques de manire  ce que, lors de leur cycle de vie, la quantit et la nocivit des dchets engendrs par ces produits soient rduites en utilisant la technique disponible conomiquement viable et approprie.
2- Les gnrateurs des dchets sont tenus galement de fournir  l'administration toutes les informations sur les caractristiques des dchets qu'ils fabriquent, distribuent ou importent.
3- Des conditions et des mesures peuvent tre imposes  certains produits lors de leur fabrication ou leur importation ou leur distribution en vue de rduire la quantit et la nocivit des dchets issus de ces produits.
Les modalits d'application des alinas 2 et 3 de cet article sont fixes par voie rglementaire.`}},{article_id:"env_dechets_5",code:{fr:"Article 5",en:"Article 5"},text:{fr:"L'utilisation de produits issus du recyclage des dchets dans la fabrication des produits destins  tre mis en contact direct avec les produits alimentaires est interdite.",en:"L'utilisation de produits issus du recyclage des dchets dans la fabrication des produits destins  tre mis en contact direct avec les produits alimentaires est interdite."}},{article_id:"env_dechets_6",code:{fr:"Article 6",en:"Article 6"},text:{fr:"Toute personne qui dtient ou produit des dchets, dans des conditions de nature  produire des effets nocifs sur le sol, la faune et la flore,  dgrader les sites ou les paysages,  polluer l'air ou les eaux,  engendrer des odeurs, ou d'une faon gnrale,  porter atteinte  la sant de l'homme et  l'environnement, est tenue d'en assurer ou d'en faire assurer l'limination dans les conditions propres  viter lesdits effets, et ce, conformment aux dispositions de la prsente loi et ses textes d'application.",en:"Toute personne qui dtient ou produit des dchets, dans des conditions de nature  produire des effets nocifs sur le sol, la faune et la flore,  dgrader les sites ou les paysages,  polluer l'air ou les eaux,  engendrer des odeurs, ou d'une faon gnrale,  porter atteinte  la sant de l'homme et  l'environnement, est tenue d'en assurer ou d'en faire assurer l'limination dans les conditions propres  viter lesdits effets, et ce, conformment aux dispositions de la prsente loi et ses textes d'application."}},{article_id:"env_dechets_7",code:{fr:"Article 7",en:"Article 7"},text:{fr:`L'incinration des dchets en plein air est interdite,  l'exception des dchets vgtaux issus des jardins et du brlis qui se pratique sur les chaumes dans les champs.
L'limination des dchets par incinration ne peut avoir lieu que dans des installations destines  cet effet, conformment aux dispositions de l'article 52 de la prsente loi et ses textes d'application.`,en:`L'incinration des dchets en plein air est interdite,  l'exception des dchets vgtaux issus des jardins et du brlis qui se pratique sur les chaumes dans les champs.
L'limination des dchets par incinration ne peut avoir lieu que dans des installations destines  cet effet, conformment aux dispositions de l'article 52 de la prsente loi et ses textes d'application.`}},{article_id:"env_dechets_8",code:{fr:"Article 8",en:"Article 8"},text:{fr:`Quiconque dpose des dchets en dehors des endroits dsigns  cet effet, est tenu de les reprendre en vue de les liminer conformment aux dispositions de la prsente loi et ses textes d'application.
Le prsident de la commune concerne, pour les dchets mnagers et assimils, le wali de la rgion ou le gouverneur de la prfecture ou de la province, pour les autres dchets, peuvent, aprs mise en demeure, ordonner, aux frais du contrevenant, l'limination d'office des dchets.
Dans le cas o le contrevenant n'a pu tre identifi, l'autorit concerne ordonne l'limination des dchets.`,en:`Quiconque dpose des dchets en dehors des endroits dsigns  cet effet, est tenu de les reprendre en vue de les liminer conformment aux dispositions de la prsente loi et ses textes d'application.
Le prsident de la commune concerne, pour les dchets mnagers et assimils, le wali de la rgion ou le gouverneur de la prfecture ou de la province, pour les autres dchets, peuvent, aprs mise en demeure, ordonner, aux frais du contrevenant, l'limination d'office des dchets.
Dans le cas o le contrevenant n'a pu tre identifi, l'autorit concerne ordonne l'limination des dchets.`}}]},{chapter_id:"dechets_menagers",title:{fr:"Gestion des dchets mnagers et assimils",en:"Household waste management"},articles:[{article_id:"env_dechets_21",code:{fr:"Article 21",en:"Article 21"},text:{fr:`Tout dtenteur des dchets mnagers et assimils est tenu de se conformer au rglement de la prcollecte prvu par le plan communal ou intercommunal et d'utiliser le systme de gestion de ces dchets mis en place par les communes et leurs groupements ou par les exploitants.
Les communes, leurs groupements ou les exploitants prennent obligatoirement en charge les dpenses affrentes aux oprations de collecte, de transport, de mise en dcharge contrle, d'limination, de valorisation des dchets mnagers et assimils et, le cas chant, de tri de ces dchets ainsi que les dpenses de contrle de la propret des zones o ce service est assur directement par les gnrateurs de ces dchets.`,en:`Tout dtenteur des dchets mnagers et assimils est tenu de se conformer au rglement de la prcollecte prvu par le plan communal ou intercommunal et d'utiliser le systme de gestion de ces dchets mis en place par les communes et leurs groupements ou par les exploitants.
Les communes, leurs groupements ou les exploitants prennent obligatoirement en charge les dpenses affrentes aux oprations de collecte, de transport, de mise en dcharge contrle, d'limination, de valorisation des dchets mnagers et assimils et, le cas chant, de tri de ces dchets ainsi que les dpenses de contrle de la propret des zones o ce service est assur directement par les gnrateurs de ces dchets.`}}]},{chapter_id:"dechets_inertes",title:{fr:"Gestion des dchets inertes, dchets agricoles, dchets ultimes et dchets industriels non dangereux",en:"Inert/agricultural/ultimate/non-hazardous industrial waste management"},articles:[{article_id:"env_dechets_24",code:{fr:"Article 24",en:"Article 24"},text:{fr:"Les dchets inertes, les dchets ultimes, les dchets agricoles et les dchets industriels non dangereux doivent tre dposs par leurs gnrateurs ou par les personnes autorises  les grer dans les lieux et les installations d'limination dsigns  cette fin par le plan directeur rgional sous le contrle des communes ou de leurs groupements concerns ainsi que des agents commissionns  cet effet.",en:"Les dchets inertes, les dchets ultimes, les dchets agricoles et les dchets industriels non dangereux doivent tre dposs par leurs gnrateurs ou par les personnes autorises  les grer dans les lieux et les installations d'limination dsigns  cette fin par le plan directeur rgional sous le contrle des communes ou de leurs groupements concerns ainsi que des agents commissionns  cet effet."}}]},{chapter_id:"dechets_dangereux",title:{fr:"Gestion des dchets dangereux",en:"Hazardous waste management"},articles:[{article_id:"env_dechets_29",code:{fr:"Article 29",en:"Article 29"},text:{fr:`Les dchets dangereux ne peuvent tre traits en vue de leur limination ou de leur valorisation que dans des installations spcialises dsignes par l'administration et autorises conformment au plan directeur national de gestion des dchets dangereux et aux dispositions de la prsente loi et ses textes d'application.
Les gnrateurs et les dtenteurs de dchets dangereux doivent dposer lesdits dchets dans les installations vises au 1er alina ci-dessus.
La liste des dchets dangereux est fixe par voie rglementaire.`,en:`Les dchets dangereux ne peuvent tre traits en vue de leur limination ou de leur valorisation que dans des installations spcialises dsignes par l'administration et autorises conformment au plan directeur national de gestion des dchets dangereux et aux dispositions de la prsente loi et ses textes d'application.
Les gnrateurs et les dtenteurs de dchets dangereux doivent dposer lesdits dchets dans les installations vises au 1er alina ci-dessus.
La liste des dchets dangereux est fixe par voie rglementaire.`}},{article_id:"env_dechets_decret_2_07_253",code:{fr:"Dcret n 2-07-253",en:"Decree 2-07-253"},text:{fr:"Dcret n 2-07-253 portant classification des dchets et fixant la liste des dchets dangereux.",en:"Dcret n 2-07-253 portant classification des dchets et fixant la liste des dchets dangereux."}},{article_id:"env_dechets_30_32",code:{fr:"Article 30, 31 et 32",en:"Articles 30, 31 & 32"},text:{fr:`1- La collecte et le transport des dchets dangereux sont soumis  une autorisation de l'administration
2- Le transport des dchets dangereux  partir du site de production ne peut tre effectu que si les emballages et les conteneurs ncessaires  leur transport portent des tiquettes identifiant clairement et visiblement ces dchets, et ce, conformment aux normes en vigueur.
3- Le transport des dchets dangereux doit tre accompagn d'un bordereau de suivi comportant les informations concernant l'expditeur, le transporteur, le destinataire, la nature et la quantit des dchets, le mode de transport et les modalits de leur limination.`,en:`1- La collecte et le transport des dchets dangereux sont soumis  une autorisation de l'administration
2- Le transport des dchets dangereux  partir du site de production ne peut tre effectu que si les emballages et les conteneurs ncessaires  leur transport portent des tiquettes identifiant clairement et visiblement ces dchets, et ce, conformment aux normes en vigueur.
3- Le transport des dchets dangereux doit tre accompagn d'un bordereau de suivi comportant les informations concernant l'expditeur, le transporteur, le destinataire, la nature et la quantit des dchets, le mode de transport et les modalits de leur limination.`}},{article_id:"env_dechets_33",code:{fr:"Article 33",en:"Article 33"},text:{fr:"Il est interdit d'enfouir les dchets dangereux, de les jeter, de les stocker ou de les dposer dans des lieux autres que les installations qui leur sont rserves conformment aux dispositions de la prsente loi et ses textes d'application.",en:"Il est interdit d'enfouir les dchets dangereux, de les jeter, de les stocker ou de les dposer dans des lieux autres que les installations qui leur sont rserves conformment aux dispositions de la prsente loi et ses textes d'application."}},{article_id:"env_dechets_35",code:{fr:"Article 35",en:"Article 35"},text:{fr:`Lors des oprations de collecte, de transport, de stockage, de valorisation, d'limination ou de mise en dcharge, les dchets dangereux ne peuvent tre mlangs avec les autres catgories de dchets.
Toutefois, l'administration peut accorder une autorisation drogatoire aux installations concernes lorsque le mlange des dchets dangereux avec d'autres dchets est ncessaire  la valorisation, au traitement ou  l'limination de ces dchets.
Les modalits d'octroi de ladite autorisation sont fixes par voie rglementaire.`,en:`Lors des oprations de collecte, de transport, de stockage, de valorisation, d'limination ou de mise en dcharge, les dchets dangereux ne peuvent tre mlangs avec les autres catgories de dchets.
Toutefois, l'administration peut accorder une autorisation drogatoire aux installations concernes lorsque le mlange des dchets dangereux avec d'autres dchets est ncessaire  la valorisation, au traitement ou  l'limination de ces dchets.
Les modalits d'octroi de ladite autorisation sont fixes par voie rglementaire.`}},{article_id:"env_dechets_36",code:{fr:"Article 36",en:"Article 36"},text:{fr:"Toute personne physique ou morale qui produit, collecte, transporte, stocke ou limine les dchets dangereux doit disposer d'un contrat d'assurance couvrant sa responsabilit professionnelle.",en:"Toute personne physique ou morale qui produit, collecte, transporte, stocke ou limine les dchets dangereux doit disposer d'un contrat d'assurance couvrant sa responsabilit professionnelle."}},{article_id:"env_dechets_37",code:{fr:"Article 37",en:"Article 37"},text:{fr:`Les gnrateurs des dchets dangereux et les personnes dtenant les autorisations prvues aux articles 30 et 35 ci-dessus tiennent un registre dans lequel ils consignent les quantits, le type, la nature et l'origine des dchets dangereux qu'ils ont produits, collects, stocks, transports, rcuprs ou limins, et communiquent chaque anne  l'administration les renseignements de ce type correspondant  l'anne coule.
Ce registre est soumis  l'inspection de l'administration.`,en:`Les gnrateurs des dchets dangereux et les personnes dtenant les autorisations prvues aux articles 30 et 35 ci-dessus tiennent un registre dans lequel ils consignent les quantits, le type, la nature et l'origine des dchets dangereux qu'ils ont produits, collects, stocks, transports, rcuprs ou limins, et communiquent chaque anne  l'administration les renseignements de ce type correspondant  l'anne coule.
Ce registre est soumis  l'inspection de l'administration.`}},{article_id:"env_dechets_decrets_dangereux",code:{fr:"Dcrets et arrts",en:"Decrees and orders"},text:{fr:`Dcret n 2-09-85 relatif  la collecte, au transport et au traitement de certaines huiles usages.
Dcret n2-14-85 relatif  la gestion des dchets dangereux
Arrt n 2850-15 fixant les prescriptions particulires relatives  la collecte et  la valorisation des batteries usages
Arrt n 3184-15 relatif  la gestion des dchets dangereux`,en:`Dcret n 2-09-85 relatif  la collecte, au transport et au traitement de certaines huiles usages.
Dcret n2-14-85 relatif  la gestion des dchets dangereux
Arrt n 2850-15 fixant les prescriptions particulires relatives  la collecte et  la valorisation des batteries usages
Arrt n 3184-15 relatif  la gestion des dchets dangereux`}}]},{chapter_id:"dechets_medicaux",title:{fr:"Gestion des dchets mdicaux et pharmaceutiques",en:"Medical and pharmaceutical waste management"},articles:[{article_id:"env_dechets_38",code:{fr:"Article 38",en:"Article 38"},text:{fr:`Les dchets mdicaux et pharmaceutiques doivent faire l'objet d'une gestion spcifique visant  viter toute atteinte  la sant de l'homme et  l'environnement.
Toutefois, certains types des dchets gnrs par les tablissements de soin peuvent tre assimils aux dchets mnagers sur la base d'un rapport d'analyse, exig par la commune et tabli par un laboratoire agr,  condition que ces dchets soient tris au pralable et ne soient pas contamins par les dchets dangereux.
Les modalits de gestion des dchets mdicaux et pharmaceutiques sont fixes par voie rglementaire.`,en:`Les dchets mdicaux et pharmaceutiques doivent faire l'objet d'une gestion spcifique visant  viter toute atteinte  la sant de l'homme et  l'environnement.
Toutefois, certains types des dchets gnrs par les tablissements de soin peuvent tre assimils aux dchets mnagers sur la base d'un rapport d'analyse, exig par la commune et tabli par un laboratoire agr,  condition que ces dchets soient tris au pralable et ne soient pas contamins par les dchets dangereux.
Les modalits de gestion des dchets mdicaux et pharmaceutiques sont fixes par voie rglementaire.`}},{article_id:"env_dechets_decret_2_09_139",code:{fr:"Dcret n2-09-139",en:"Decree 2-09-139"},text:{fr:"Dcret n2-09-139 relatif  la gestion des dchets mdicaux et pharmaceutiques",en:"Dcret n2-09-139 relatif  la gestion des dchets mdicaux et pharmaceutiques"}},{article_id:"env_dechets_39",code:{fr:"Article 39",en:"Article 39"},text:{fr:"Le rejet, le stockage, le traitement, l'limination ou l'incinration des dchets mdicaux et pharmaceutiques sont interdits en dehors des endroits dsigns par les plans directeurs rgionaux.",en:"Le rejet, le stockage, le traitement, l'limination ou l'incinration des dchets mdicaux et pharmaceutiques sont interdits en dehors des endroits dsigns par les plans directeurs rgionaux."}},{article_id:"env_dechets_40",code:{fr:"Article 40",en:"Article 40"},text:{fr:`La collecte et le transport des dchets mdicaux et pharmaceutiques sont soumis  une autorisation dlivre par l'administration pour une priode maximale de cinq (5) ans renouvelable.
L'octroi de cette autorisation est subordonn aux conditions prcises  l'article 30 ci-dessus.
Les conditions et les modalits de dlivrance de cette autorisation sont fixes par voie rglementaire.`,en:`La collecte et le transport des dchets mdicaux et pharmaceutiques sont soumis  une autorisation dlivre par l'administration pour une priode maximale de cinq (5) ans renouvelable.
L'octroi de cette autorisation est subordonn aux conditions prcises  l'article 30 ci-dessus.
Les conditions et les modalits de dlivrance de cette autorisation sont fixes par voie rglementaire.`}}]}]},Fv=[v_e,b_e,j_e,w_e,__e,k_e],i$=Fv.flatMap(e=>(e.chapters??[]).flatMap(t=>(t.articles??[]).map(a=>({...a,section_id:e.section_id,chapter_id:t.chapter_id})))),N_e=({previousNonApplicableArticleIds:e=[]}={})=>{const t=new Set(e);return{sections:[...Fv.map(a=>{const n=i$.filter(s=>s.section_id===a.section_id);return{section_id:a.section_id,articles:n.map(s=>({article_id:s.article_id,chapter_id:s.chapter_id,applicable:!t.has(s.article_id),compliant:!0,corrective_action:"",comment:""}))}})]}},S_e=e=>i$.find(t=>t.article_id===e)??null,A_e=e=>Fv.find(t=>t.section_id===e)??null,P_e=e=>{if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?String(e):t.toLocaleString()},o$=e=>{const t=String(e||"").trim().toLowerCase();return t==="environment"||t==="environnement"?"environment":"sst"},C_e=(e,t)=>{const a=o$(t);return e.startsWith("/admin/regulatory-watch")?`/admin/regulatory-watch/${a}`:e.startsWith("/supervisor/regulatory-watch")?`/supervisor/regulatory-watch/${a}`:`/regulatory-watch/${a}`},aT=({tone:e="gray",icon:t,children:a})=>{const n={green:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200",red:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200",gray:"bg-gray-100 text-gray-800 dark:bg-gray-700/40 dark:text-gray-200",blue:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-200",amber:"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"};return r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-semibold ${n[e]??n.gray}`,children:[t?r.jsx(t,{className:"w-3.5 h-3.5"}):null,r.jsx("span",{children:a})]})},E_e=(e,t)=>t===!0?{tone:"blue",icon:nk,label:e("regulatoryWatch.applicable")}:t===!1?{tone:"gray",icon:Hg,label:e("regulatoryWatch.notApplicable")}:{tone:"amber",icon:Hg,label:e("common.unknown")},T_e=(e,t,a)=>t===!1?{tone:"gray",icon:Hg,label:"N/A"}:a===!0?{tone:"green",icon:nk,label:e("regulatoryWatch.conforme")}:a===!1?{tone:"red",icon:Zn,label:e("regulatoryWatch.nonConforme")}:{tone:"amber",icon:Hg,label:e("common.unknown")};function O_e(){const{t:e,language:t}=ut(),a=Tn(),n=Zr(),s=As(),i=f.useMemo(()=>o$(s?.category),[s?.category]),o=f.useMemo(()=>i==="environment"?{getLocalized:iy,formatBulletText:sy,getArticleSchemaById:S_e,getSectionSchemaById:A_e}:{getLocalized:iy,formatBulletText:sy,getArticleSchemaById:g_e,getSectionSchemaById:x_e},[i]),l=f.useMemo(()=>C_e(n.pathname,i),[i,n.pathname]),c=s?.id,[d,u]=f.useState(!0),[m,p]=f.useState(null),[g,x]=f.useState(!1);f.useEffect(()=>{(async()=>{if(c)try{u(!0);const _=await vo.getById(c);p(_.data?.data??null)}catch(_){p(null),K.error(_.response?.data?.message??e("errors.somethingWentWrong"))}finally{u(!1)}})()},[c]);const h=async()=>{if(c)try{await vo.delete(c),K.success(e("common.deleted")??"Deleted"),a(l)}catch(j){K.error(j.response?.data?.message??e("errors.somethingWentWrong"))}finally{x(!1)}},v=m?.overall_score===null||m?.overall_score===void 0?"-":`${Number(m.overall_score).toFixed(2)}%`,b=m?.answers?.sections??[],y=m?.section_scores??[];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4 flex-col sm:flex-row",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"p-2 bg-hse-primary/10 rounded-lg",children:r.jsx(pr,{className:"w-5 h-5 text-hse-primary"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:e("regulatoryWatch.detailsTitle")}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[m?.project?.name??e("common.unknown"),"  ",e("regulatoryWatch.submittedAt"),": ",P_e(m?.submitted_at)]}),m?.week_year&&m?.week_number&&r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e("regulatoryWatch.week"),": ",m.week_number,"  ",e("regulatoryWatch.year"),": ",m.week_year]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[r.jsxs("button",{type:"button",className:"btn-secondary flex items-center gap-2 w-full sm:w-auto",onClick:()=>a(l),children:[r.jsx(Tl,{className:"w-4 h-4"}),e("common.back")]}),r.jsxs("button",{type:"button",className:"btn-primary flex items-center gap-2 w-full sm:w-auto",onClick:()=>a(`${l}/${c}/resubmit`),disabled:!c,children:[r.jsx(P5,{className:"w-4 h-4"}),e("regulatoryWatch.resubmit")]}),r.jsxs("button",{type:"button",className:"btn-danger flex items-center gap-2 w-full sm:w-auto",onClick:()=>x(!0),disabled:!c,children:[r.jsx(Nt,{className:"w-4 h-4"}),e("common.delete")??"Delete"]})]})]}),d?r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e("common.loading")]}):m?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[r.jsxs("div",{className:"p-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("regulatoryWatch.overallScore")}),r.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:v})]}),r.jsxs("div",{className:"md:col-span-2 p-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("regulatoryWatch.sectionScores")}),r.jsx("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 gap-2",children:(Array.isArray(y)?y:[]).map(j=>{const _=j?.score===null||j?.score===void 0?"-":`${Number(j.score).toFixed(2)}%`,w=`${j?.total_conforme??0} / ${j?.total_applicable??0}`,k=o.getSectionSchemaById(j.section_id),N=k?o.getLocalized(k.title,t):j.section_id;return r.jsxs("div",{className:"text-sm text-gray-900 dark:text-gray-100 flex items-center justify-between gap-3",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:N}),r.jsxs("span",{className:"font-semibold",children:[w," (",_,")"]})]},j.section_id)})})]})]})}),(Array.isArray(b)?b:[]).map(j=>{const _=j?.articles??[],w=o.getSectionSchemaById(j.section_id),k=w?o.getLocalized(w.title,t):j.section_id;return r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[r.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:r.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:k})}),r.jsx("div",{className:"p-4 space-y-3",children:(Array.isArray(_)?_:[]).map(N=>{const P=o.getArticleSchemaById(N.article_id),A=P?o.getLocalized(P.code,t):N.code??N.article_id,M=P?o.getLocalized(P.text,t):typeof N.text=="string"?N.text:"",R=o.formatBulletText(M),O=E_e(e,N.applicable),q=T_e(e,N.applicable,N.compliant),S=N.applicable===!1?"border-gray-200 dark:border-gray-700 bg-gray-50/70 dark:bg-gray-900/40":N.compliant===!1?"border-red-200 dark:border-red-900/40 bg-red-50/40 dark:bg-red-900/10":N.compliant===!0?"border-emerald-200 dark:border-emerald-900/40 bg-emerald-50/40 dark:bg-emerald-900/10":"border-amber-200 dark:border-amber-900/40 bg-amber-50/40 dark:bg-amber-900/10";return r.jsxs("div",{className:`rounded-xl border p-3 ${S} ${N.applicable===!1?"opacity-80":""}`,children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:A}),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-end",children:[r.jsx(aT,{tone:O.tone,icon:O.icon,children:O.label}),r.jsx(aT,{tone:q.tone,icon:q.icon,children:q.label})]})]}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1 whitespace-pre-line",children:R}),N.applicable&&N.compliant===!1&&N.corrective_action&&r.jsxs("div",{className:"mt-2 text-sm text-gray-900 dark:text-gray-100",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("regulatoryWatch.correctiveAction")}),r.jsx("div",{children:N.corrective_action})]}),N.comment&&r.jsxs("div",{className:"mt-2 text-sm text-gray-900 dark:text-gray-100",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("regulatoryWatch.comment")}),r.jsx("div",{children:N.comment})]})]},`${j.section_id}:${N.article_id}`)})})]},j.section_id)})]}):r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 text-sm text-gray-500 dark:text-gray-400",children:e("common.noData")}),r.jsx(la,{isOpen:g,title:e("common.confirm")??"Confirm",message:e("common.confirmDelete")??"Are you sure you want to delete this record?",confirmLabel:e("common.delete")??"Delete",cancelLabel:e("common.cancel")??"Cancel",variant:"danger",onConfirm:h,onCancel:()=>x(!1)})]})}const M_e=Object.freeze(Object.defineProperty({__proto__:null,default:O_e},Symbol.toStringTag,{value:"Module"})),D_e=e=>{try{return JSON.parse(e)}catch{return null}},I_e=e=>{const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),a=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-a);const n=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t-n)/864e5+1)/7)},l$=e=>{const t=String(e||"").trim().toLowerCase();return t==="environment"||t==="environnement"?"environment":"sst"},L_e=(e,t)=>{const a=l$(t);return e.startsWith("/admin/regulatory-watch")?`/admin/regulatory-watch/${a}`:e.startsWith("/supervisor/regulatory-watch")?`/supervisor/regulatory-watch/${a}`:`/regulatory-watch/${a}`},$_e=e=>{const t=Array.isArray(e?.articles)?e.articles:[];let a=0,n=0;for(const i of t)i?.applicable&&(a+=1,i?.compliant&&(n+=1));const s=a>0?Math.round(n/a*1e4)/100:null;return{totalApplicable:a,totalConforme:n,score:s}};function R_e({mode:e}){const{t,language:a}=ut(),{user:n}=At(),s=Tn(),i=Zr(),o=As(),l=f.useMemo(()=>l$(o?.category),[o?.category]),c=f.useMemo(()=>l==="environment"?{SECTIONS:Fv,SCHEMA_VERSION:y_e,makeInitialAnswers:N_e,getLocalized:iy,formatBulletText:sy}:{SECTIONS:qv,SCHEMA_VERSION:Jwe,makeInitialAnswers:h_e,getLocalized:iy,formatBulletText:sy},[l]),d=f.useMemo(()=>L_e(i.pathname,l),[l,i.pathname]),[u,m]=f.useState([]),[p,g]=f.useState(!0),[x,h]=f.useState(""),v=f.useMemo(()=>new URLSearchParams(i.search),[i.search]),b=n?.project_list_preference??"code",y=f.useMemo(()=>Ir(u,b),[u,b]),[j,_]=f.useState(!1),[w,k]=f.useState(!1),[N,P]=f.useState(()=>c.makeInitialAnswers()),A=f.useRef({done:!1,key:""}),M=f.useRef(!1),[R,O]=f.useState(0),q=f.useMemo(()=>{const he=o?.page,T=Number.parseInt(String(he??"1"),10);return!Number.isFinite(T)||T<1?1:T},[o?.page]),S=f.useMemo(()=>e==="resubmit"?o?.id?`${d}/${o.id}/resubmit`:`${d}/resubmit`:`${d}/new`,[d,e,o?.id]),[I,E]=f.useState(()=>new Date().getFullYear()),[W,B]=f.useState(()=>I_e(new Date)),C=()=>({schema_version:c.SCHEMA_VERSION,mode:e,submission_id:e==="resubmit"?String(o?.id||""):null,selectedProjectId:x?String(x):"",weekYear:I,weekNumber:W,page:q,answers:N,updated_at:Date.now()}),D=f.useMemo(()=>{const he=n?.id?String(n.id):"anonymous",T=o?.id?String(o.id):"";return`regulatory_watch_draft:${l}:${e}:${he}:${T||"new"}`},[l,e,o?.id,n?.id]);f.useEffect(()=>{if(!(typeof window>"u")&&!(A.current.done&&A.current.key===D)){A.current.done=!0,A.current.key=D;try{const he=window.localStorage.getItem(D);if(!he)return;const T=D_e(he);if(!T||typeof T!="object"||T.schema_version!==c.SCHEMA_VERSION||e==="resubmit"&&String(T.submission_id||"")!==String(o?.id||""))return;T.selectedProjectId&&h(String(T.selectedProjectId)),T.weekYear&&Number.isFinite(Number(T.weekYear))&&E(Number(T.weekYear)),T.weekNumber&&Number.isFinite(Number(T.weekNumber))&&B(Number(T.weekNumber)),T.answers&&typeof T.answers=="object"&&(P(T.answers),M.current=!0,_(!1));const oe=Number.parseInt(String(T.page??""),10);Number.isFinite(oe)&&oe>=1&&q===1&&oe!==1&&s(`${S}/${oe}${i.search||""}`,{replace:!0})}catch{}}},[q,D,i.search,e,s,o?.id,S]),f.useEffect(()=>{if(!(typeof window>"u"))try{const he=C();window.localStorage.setItem(D,JSON.stringify(he))}catch{}},[N,q,D,e,o?.id,x,W,I]);const z=()=>{if(!(typeof window>"u"))try{const he=C();window.localStorage.setItem(D,JSON.stringify(he)),K.success(t("regulatoryWatch.draftSaved"))}catch(he){K.error(he?.message??t("errors.somethingWentWrong"))}};f.useEffect(()=>{if(e==="resubmit")return;const he=v.get("project_id");he&&!x&&h(he);const T=v.get("week_number");T&&Number.isFinite(Number(T))&&B(Number(T));const oe=v.get("week_year");oe&&Number.isFinite(Number(oe))&&E(Number(oe))},[e,v,x]),f.useEffect(()=>{if(e==="resubmit")return;const he=new URLSearchParams(i.search);x?he.set("project_id",String(x)):he.delete("project_id"),W?he.set("week_number",String(W)):he.delete("week_number"),I?he.set("week_year",String(I)):he.delete("week_year");const T=he.toString(),oe=(i.search||"").replace(/^\?/,"");T!==oe&&s({pathname:i.pathname,search:T?`?${T}`:""},{replace:!0})},[i.pathname,i.search,e,s,x,W,I]),f.useEffect(()=>{(async()=>{try{g(!0);const T=await it.getAllList({status:"active"});m(Array.isArray(T)?T:[])}catch(T){m([]),K.error(T.response?.data?.message??t("errors.somethingWentWrong"))}finally{g(!1)}})()},[]),f.useEffect(()=>{(async()=>{if(e!=="resubmit")return;if(M.current){_(!1);return}const T=o?.id;if(T)try{_(!0);const G=(await vo.getById(T)).data?.data??null,V=G?.project_id;V&&h(String(V)),G?.week_year&&E(Number(G.week_year)),G?.week_number&&B(Number(G.week_number));const Y=G?.answers?.sections??[],ce=(Array.isArray(Y)?Y:[]).flatMap(je=>Array.isArray(je?.articles)?je.articles:[]).filter(je=>je&&je.applicable===!1).map(je=>String(je.article_id));P(c.makeInitialAnswers({previousNonApplicableArticleIds:ce}))}catch(oe){K.error(oe.response?.data?.message??t("errors.somethingWentWrong"))}finally{_(!1)}})()},[e,o?.id,c,t]),f.useEffect(()=>{(async()=>{if(e==="resubmit")return;if(M.current){_(!1);return}const T=x?String(x):"";if(!T){_(!1);return}try{_(!0);const V=((await vo.getLatest({project_id:T,category:l})).data?.data??null)?.answers?.sections??[],Y=(Array.isArray(V)?V:[]).flatMap(ce=>Array.isArray(ce?.articles)?ce.articles:[]).filter(ce=>ce&&ce.applicable===!1).map(ce=>String(ce.article_id));P(c.makeInitialAnswers({previousNonApplicableArticleIds:Y}))}catch(oe){K.error(oe.response?.data?.message??t("errors.somethingWentWrong"))}finally{_(!1)}})()},[l,e,c,x,t]);const L=f.useMemo(()=>(Array.isArray(N?.sections)?N.sections:[]).map(T=>({section_id:T.section_id,...$_e(T)})),[N]),X=f.useMemo(()=>{const he=L.map(T=>T.score).filter(T=>typeof T=="number"&&Number.isFinite(T));return he.length===0?null:Math.round(he.reduce((T,oe)=>T+oe,0)/he.length*100)/100},[L]),H=f.useMemo(()=>{const he=Array.isArray(N?.sections)?N.sections:[],T=new Map;for(let oe=0;oe<he.length;oe++)T.set(String(he[oe]?.section_id),oe);return T},[N]),F=c.SECTIONS.length;f.useEffect(()=>{const he=Math.min(Math.max(1,q),F);if(he!==q){s(`${S}/${he}${i.search||""}`,{replace:!0});return}O(he-1)},[q,i.search,s,F,S]),f.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[q]);const ke=f.useMemo(()=>c.SECTIONS[R]??null,[R,c.SECTIONS]),ae=f.useMemo(()=>{const he=Array.isArray(N?.sections)?N.sections:[],T=new Map;for(const oe of he){const G=new Map,V=Array.isArray(oe?.articles)?oe.articles:[];for(let Y=0;Y<V.length;Y++)G.set(String(V[Y]?.article_id),Y);T.set(String(oe?.section_id),G)}return T},[N]),ue=(he,T,oe)=>{P(G=>{const V={...G},Y=Array.isArray(V.sections)?[...V.sections]:[],ce={...Y[he]??{}},je=Array.isArray(ce.articles)?[...ce.articles]:[],re={...je[T]??{}},U={...re,...oe};return Object.prototype.hasOwnProperty.call(oe,"applicable")&&oe.applicable===!1&&(U.compliant=!1,U.corrective_action="",U.comment=""),Object.prototype.hasOwnProperty.call(oe,"applicable")&&oe.applicable===!0&&re.applicable===!1&&(U.compliant=!0),Object.prototype.hasOwnProperty.call(oe,"compliant")&&oe.compliant===!0&&(U.corrective_action=""),je[T]=U,ce.articles=je,Y[he]=ce,V.sections=Y,V})},Z=async()=>{if(!x){K.error(t("regulatoryWatch.projectRequired"));return}if(!I||!W){K.error(t("errors.somethingWentWrong"));return}try{k(!0);const he={project_id:Number(x),week_year:Number(I),week_number:Number(W),category:l,schema_version:c.SCHEMA_VERSION,answers:N},T=await vo.submit(he);K.success(t("regulatoryWatch.submitSuccess"));try{window.localStorage.removeItem(D)}catch{}const oe=T.data?.data;if(oe?.id){s(`${d}/${oe.id}`);return}s(d)}catch(he){K.error(he.response?.data?.message??t("errors.somethingWentWrong"))}finally{k(!1)}},me=()=>{const he=Math.max(1,q-1);s(`${S}/${he}${i.search||""}`)},ge=()=>{const he=Math.min(F,q+1);s(`${S}/${he}${i.search||""}`)},se=R>=F-1;return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"sticky top-0 z-20 bg-gray-50 dark:bg-gray-900 pt-2 pb-4",children:r.jsxs("div",{className:"flex items-start justify-between gap-4 flex-col sm:flex-row",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"p-2 bg-hse-primary/10 rounded-lg",children:r.jsx(pr,{className:"w-5 h-5 text-hse-primary"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:t(e==="resubmit"?"regulatoryWatch.resubmitTitle":"regulatoryWatch.newTitle")}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t("regulatoryWatch.subtitle")})]})]}),r.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[r.jsxs("button",{type:"button",className:"btn-secondary flex items-center justify-center gap-2 w-full sm:w-auto",onClick:()=>s(d),children:[r.jsx(Tl,{className:"w-4 h-4"}),t("common.back")]}),r.jsx("button",{type:"button",className:"btn-secondary flex items-center justify-center gap-2 w-full sm:w-auto",onClick:z,disabled:w||j,children:t("regulatoryWatch.saveDraft")}),r.jsxs("button",{type:"button",onClick:se?Z:ge,disabled:w||!x||se&&j,className:"btn-primary flex items-center justify-center gap-2 w-full sm:w-auto",children:[w?r.jsx(Re,{className:"w-4 h-4 animate-spin"}):se?r.jsx(ok,{className:"w-4 h-4"}):null,t(se?"common.submit":"common.next")]})]})]})}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 items-end",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"label",children:t("regulatoryWatch.selectProject")}),r.jsxs(Ze,{value:x,onChange:he=>h(he.target.value),disabled:p||j,children:[r.jsxs("option",{value:"",children:[t(p?"common.loading":"common.select"),"..."]}),y.map(he=>r.jsx("option",{value:String(he.id),children:Wt(he)},he.id))]})]}),r.jsxs("div",{className:"md:col-span-1 grid grid-cols-2 md:grid-cols-1 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:t("regulatoryWatch.week")}),r.jsx(Ze,{value:String(W),onChange:he=>B(Number(he.target.value)),disabled:j,children:Array.from({length:53},(he,T)=>T+1).map(he=>r.jsx("option",{value:String(he),children:he},he))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:t("regulatoryWatch.year")}),r.jsx(Ze,{value:String(I),onChange:he=>E(Number(he.target.value)),disabled:j,children:Array.from({length:6},(he,T)=>new Date().getFullYear()-2+T).map(he=>r.jsx("option",{value:String(he),children:he},he))})]})]}),r.jsx("div",{className:"md:col-span-1",children:r.jsxs("div",{className:"p-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:t("regulatoryWatch.overallScore")}),r.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:X===null?"-":`${X}%`})]})})]}),j&&r.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[r.jsx(Re,{className:"w-4 h-4 animate-spin"}),t("common.loading")]})]}),(()=>{if(!ke)return null;const he=H.get(String(ke.section_id)),T=he!==void 0?(N?.sections??[])[he]:null,oe=ae.get(String(ke.section_id))??new Map;return T?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between gap-2 text-sm text-gray-600 dark:text-gray-300",children:[r.jsxs("div",{children:[t("common.page")," ",R+1," ",t("common.of")," ",F]}),r.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:c.getLocalized(ke.title,a)})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[r.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:r.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:c.getLocalized(ke.title,a)})}),r.jsx("div",{className:"p-4 space-y-6",children:(ke.chapters??[]).map(G=>r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:c.getLocalized(G.title,a)}),r.jsx("div",{className:"space-y-3",children:(G.articles??[]).map(V=>{const Y=oe.get(String(V.article_id)),ce=Y!==void 0?(T?.articles??[])[Y]:null;if(!ce)return null;const je=!ce.applicable,re=je?"border-gray-200 dark:border-gray-700 bg-gray-50/70 dark:bg-gray-900/40 opacity-70":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",U=c.formatBulletText(c.getLocalized(V.text,a));return r.jsxs("div",{className:`rounded-xl border ${re} p-3`,children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:c.getLocalized(V.code,a)}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1 whitespace-pre-line",children:U})]}),r.jsxs("div",{className:"flex flex-col gap-2 min-w-[240px]",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("button",{type:"button",onClick:()=>ue(he,Y,{applicable:!0}),className:`px-3 py-2 rounded-lg text-sm border transition-colors ${ce.applicable?"bg-hse-primary text-white border-hse-primary":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-200"}`,children:t("regulatoryWatch.applicable")}),r.jsx("button",{type:"button",onClick:()=>ue(he,Y,{applicable:!1}),className:`px-3 py-2 rounded-lg text-sm border transition-colors ${ce.applicable?"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-200":"bg-gray-500 text-white border-gray-500"}`,children:t("regulatoryWatch.notApplicable")})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("button",{type:"button",disabled:je,onClick:()=>ue(he,Y,{compliant:!0}),className:`px-3 py-2 rounded-lg text-sm border transition-colors disabled:opacity-60 ${ce.applicable&&ce.compliant?"bg-green-600 text-white border-green-600":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-200"}`,children:r.jsxs("span",{className:"inline-flex items-center gap-1 justify-center",children:[r.jsx(Xt,{className:"w-4 h-4"}),t("regulatoryWatch.conforme")]})}),r.jsx("button",{type:"button",disabled:je,onClick:()=>ue(he,Y,{compliant:!1}),className:`px-3 py-2 rounded-lg text-sm border transition-colors disabled:opacity-60 ${ce.applicable&&!ce.compliant?"bg-red-600 text-white border-red-600":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-200"}`,children:r.jsxs("span",{className:"inline-flex items-center gap-1 justify-center",children:[r.jsx(Zn,{className:"w-4 h-4"}),t("regulatoryWatch.nonConforme")]})})]})]})]}),ce.applicable&&ce.compliant===!1&&r.jsxs("div",{className:"mt-3",children:[r.jsx("label",{className:"label text-xs",children:t("regulatoryWatch.correctiveAction")}),r.jsx("textarea",{value:ce.corrective_action??"",onChange:xe=>ue(he,Y,{corrective_action:xe.target.value}),rows:2,className:"input"})]}),r.jsxs("div",{className:"mt-3",children:[r.jsx("label",{className:"label text-xs",children:t("regulatoryWatch.comment")}),r.jsx("textarea",{value:ce.comment??"",onChange:xe=>ue(he,Y,{comment:xe.target.value}),rows:2,className:"input",disabled:!ce.applicable})]})]},`${ke.section_id}:${G.chapter_id}:${V.article_id}`)})})]},G.chapter_id))})]}),r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:me,disabled:R===0||w,children:t("common.previous")}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:z,disabled:w||j,children:t("regulatoryWatch.saveDraft")}),r.jsx("button",{type:"button",className:"btn-primary",onClick:se?Z:ge,disabled:w||!x||se&&j,children:t(se?"common.submit":"common.next")})]})]})]}):null})()]})}const q_e=Object.freeze(Object.defineProperty({__proto__:null,default:R_e},Symbol.toStringTag,{value:"Module"})),F_e=[{value:"near_miss"},{value:"work_accident"},{value:"incident"},{value:"road_accident"}],z_e=[{value:"day"},{value:"night"}],B_e=[{value:"<25"},{value:"25-35"},{value:"36-45"},{value:"46-55"},{value:">55"}],W_e=[{value:"<6_months"},{value:"6-12_months"},{value:"1-5_years"},{value:">5_years"}],U_e=[{value:"no_injury"},{value:"first_aid_only"},{value:"medical_treatment_no_lost_time"},{value:"lost_time_accident"},{value:"serious_hospitalization"},{value:"fatal"}],H_e=[{value:"head_neck"},{value:"upper_limb"},{value:"lower_limb"},{value:"trunk"},{value:"multiple"}],K_e=[{value:"sprain"},{value:"cut_wound"},{value:"contusion"},{value:"fracture"},{value:"burn"},{value:"other"}],V_e=[{value:"walking_circulation"},{value:"manual_handling"},{value:"mechanical_handling"},{value:"machine_tool_use"},{value:"vehicle_mobile_equipment"},{value:"work_at_height"},{value:"electrical_work"},{value:"other"}],G_e=[{value:"dry"},{value:"wet"},{value:"slippery"},{value:"uneven"}],Y_e=[{value:"adequate"},{value:"insufficient"},{value:"night_work"}],Z_e=[{value:"clear"},{value:"rain"},{value:"wind"},{value:"heat"}],X_e=[{value:"pedestrian_zone"},{value:"shared_with_vehicles"},{value:"restricted_confined"}],Q_e=[{value:"safety_shoes"},{value:"helmet"},{value:"gloves"},{value:"hi_vis_vest"},{value:"eye_protection"},{value:"other"}],J_e=[{value:"present"},{value:"absent"},{value:"not_applicable"}],e1e=[{value:"slip_trip_fall"},{value:"loss_of_balance"},{value:"contact_with_object"},{value:"unsafe_movement"},{value:"vehicle_interaction"},{value:"other"}],t1e=[{value:"human_factor"},{value:"method_procedure"},{value:"equipment_tools"},{value:"environment_conditions"},{value:"organization_planning"}],r1e=[{value:"conforming"},{value:"non_conforming"},{value:"not_defined"}],a1e=[{value:"first_aid_provided"},{value:"evacuation_to_infirmary"},{value:"external_medical_care"},{value:"area_secured"},{value:"work_stopped"},{value:"authorities_notified"},{value:"crisis_committee_activated"}],n1e=[{value:"technical"},{value:"organizational"},{value:"training"},{value:"inspection"}],s1e=[{value:"open"},{value:"in_progress"},{value:"closed"}],cj=()=>({full_name:"",matricule:"",company:"sgtm",subcontractor_name:"",job_title:"",age_range:"",experience_range:"",outcome:"",body_part:"",injury_type:"",injury_type_other:"",death_timing:"",death_date:"",death_place:""}),i1e=e=>{switch(e){case"fatal":return 6;case"serious_hospitalization":return 5;case"lost_time_accident":return 4;case"medical_treatment_no_lost_time":return 3;case"first_aid_only":return 2;case"no_injury":return 1;default:return 0}},o1e=e=>{const t=(e||[]).reduce((a,n)=>Math.max(a,i1e(n?.outcome)),0);return t>=6?"fatal":t>=5?"critical":t>=4?"major":t>=3?"moderate":t>=2?"minor":""},l1e=e=>(e||[]).some(t=>["lost_time_accident","serious_hospitalization","fatal"].includes(t?.outcome));function c1e({isOpen:e,onClose:t,onSubmit:a,projects:n,selectedProjectId:s,t:i,initial:o}){const[l,c]=f.useState(!1),[d,u]=f.useState(!1),[m,p]=f.useState([]),[g,x]=f.useState([]),h=(C,D,z)=>{try{return i?.(C,z)??D}catch{return D}},v=C=>String(C).trim().replaceAll("<","lt_").replaceAll(">","gt_").replaceAll("-","_").replaceAll("/","_").replaceAll(" ","_"),b=(C,D,z)=>D?h(`hseEvents.accidentForm.options.${C}.${z??D}`,String(D)):"",[y,j]=f.useState(()=>({project_id:s||"",category:"work_accident",location:"",event_date:new Date().toISOString().split("T")[0],event_time:"",shift:"day",victims_count:1,victims:[cj()],activity:"",activity_other:"",ground_condition:"",lighting:"",weather:"",work_area:"",ppe_worn:[],ppe_other:"",collective_protections:"not_applicable",immediate_cause:"",immediate_cause_other:"",root_causes:[],method_conformity:"",immediate_actions:[],corrective_actions:[],investigation_completed:!1,accident_closed:!1,closure_date:"",closed_by_role:"",description:"",lost_days:0}));f.useEffect(()=>{if(e){if(o){const C={...y,project_id:String(o.project_id??y.project_id??""),location:o.location??"",event_date:o.event_date?.substring(0,10)??y.event_date,description:o.description??"",lost_days:o.lost_days??0},D=o.details??null;D&&typeof D=="object"&&Object.assign(C,{category:D.category??C.category,event_time:D.event_time??C.event_time,shift:D.shift??C.shift,victims_count:D.victims_count??C.victims_count,victims:Array.isArray(D.victims)&&D.victims.length>0?D.victims:C.victims,activity:D.activity??C.activity,activity_other:D.activity_other??C.activity_other,ground_condition:D.ground_condition??C.ground_condition,lighting:D.lighting??C.lighting,weather:D.weather??C.weather,work_area:D.work_area??C.work_area,ppe_worn:Array.isArray(D.ppe_worn)?D.ppe_worn:C.ppe_worn,ppe_other:D.ppe_other??C.ppe_other,collective_protections:D.collective_protections??C.collective_protections,immediate_cause:D.immediate_cause??C.immediate_cause,immediate_cause_other:D.immediate_cause_other??C.immediate_cause_other,root_causes:Array.isArray(D.root_causes)?D.root_causes:C.root_causes,method_conformity:D.method_conformity??C.method_conformity,immediate_actions:Array.isArray(D.immediate_actions)?D.immediate_actions:C.immediate_actions,corrective_actions:Array.isArray(D.corrective_actions)?D.corrective_actions:C.corrective_actions,investigation_completed:!!D.investigation_completed,accident_closed:!!D.accident_closed,closure_date:D.closure_date??C.closure_date,closed_by_role:D.closed_by_role??C.closed_by_role}),j(C);const z=Array.isArray(D?.attachments)?D.attachments:[];p(z);return}j(C=>({...C,project_id:s||C.project_id})),p([]),x([])}},[e,o,s]),f.useEffect(()=>{(async()=>{if(e&&o?.id){u(!0);try{const D=await vs.listAttachments(o.id),z=D?.data?.data??D?.data;p(Array.isArray(z)?z:[])}catch{}finally{u(!1)}}})()},[e,o?.id]);const _=f.useMemo(()=>{if(!y.event_date)return"";try{const C=new Date(y.event_date);return Number.isNaN(C.getTime())?"":new Intl.DateTimeFormat(void 0,{weekday:"long"}).format(C)}catch{return""}},[y.event_date]),w=f.useMemo(()=>o1e(y.victims),[y.victims]),k=f.useMemo(()=>w?h(`hseEvents.severities.${w}`,w):"",[w]),N=f.useMemo(()=>l1e(y.victims),[y.victims]),P=C=>{const D=Math.max(1,Math.min(20,Number(C)||1));j(z=>{const L=Array.isArray(z.victims)?[...z.victims]:[];for(;L.length<D;)L.push(cj());for(;L.length>D;)L.pop();return{...z,victims_count:D,victims:L}})},A=(C,D)=>{j(z=>{const L=Array.isArray(z[C])?[...z[C]]:[],X=L.indexOf(D);return X>=0?L.splice(X,1):L.push(D),{...z,[C]:L}})},M=(C,D,z)=>{j(L=>{const X=Array.isArray(L.victims)?[...L.victims]:[],H=X[C]?{...X[C]}:cj();return H[D]=z,D==="company"&&z!=="subcontractor"&&(H.subcontractor_name=""),D==="outcome"&&(z==="no_injury"&&(H.body_part="",H.injury_type="",H.injury_type_other=""),z!=="fatal"&&(H.death_timing="",H.death_date="",H.death_place="")),D==="injury_type"&&z!=="other"&&(H.injury_type_other=""),D==="death_timing"&&z==="same_day"&&(H.death_date=""),X[C]=H,{...L,victims:X}})},R=()=>{j(C=>({...C,corrective_actions:[...Array.isArray(C.corrective_actions)?C.corrective_actions:[],{type:"",description:"",responsible_role:"",deadline:"",status:"open"}]}))},O=C=>{j(D=>{const z=Array.isArray(D.corrective_actions)?[...D.corrective_actions]:[];return z.splice(C,1),{...D,corrective_actions:z}})},q=(C,D,z)=>{j(L=>{const X=Array.isArray(L.corrective_actions)?[...L.corrective_actions]:[],H=X[C]?{...X[C]}:{type:"",description:"",responsible_role:"",deadline:"",status:"open"};return H[D]=z,X[C]=H,{...L,corrective_actions:X}})},S=()=>{l||t()},I=C=>{const D=Array.from(C.target.files||[]);x(D)},E=async C=>{const D=Array.isArray(g)?g:[];if(!C||D.length===0)return;for(const X of D)await vs.uploadAttachment(C,{file:X});x([]);const z=await vs.listAttachments(C),L=z?.data?.data??z?.data;p(Array.isArray(L)?L:[])},W=async(C,D)=>{if(!(!C||!D)){u(!0);try{await vs.deleteAttachment(C,D);const z=await vs.listAttachments(C),L=z?.data?.data??z?.data;p(Array.isArray(L)?L:[]),K.success(i?.("common.saved")??"Saved")}catch{K.error(i?.("common.error")??"Error")}finally{u(!1)}}},B=async C=>{if(C.preventDefault(),l)return;const D=()=>{K.error(i?.("common.fillRequired")??"Please fill in all required fields")};if(!y.project_id){D();return}if(!y.category){D();return}if(!y.location){D();return}if(!y.event_date){D();return}if(!y.shift){D();return}if(!y.victims_count||y.victims_count<1){D();return}const z=Array.isArray(y.victims)?y.victims:[];if(z.length!==y.victims_count){D();return}for(const F of z){if(!F.full_name||!F.outcome){D();return}if(F.company==="subcontractor"&&!F.subcontractor_name){D();return}if(F.outcome!=="no_injury"){if(!F.body_part||!F.injury_type){D();return}if(F.injury_type==="other"&&!F.injury_type_other){D();return}}if(F.outcome==="fatal"){if(!F.death_timing||!F.death_place){D();return}if(F.death_timing==="later"&&!F.death_date){D();return}}}if(!y.activity){D();return}if(y.activity==="other"&&!y.activity_other){D();return}if(!y.ground_condition||!y.lighting||!y.weather||!y.work_area){D();return}if(!y.immediate_cause){D();return}if(y.immediate_cause==="other"&&!y.immediate_cause_other){D();return}if(!Array.isArray(y.root_causes)||y.root_causes.length===0){D();return}const L=w,X=N,H=["major","critical","fatal"].includes(L);if(H&&!y.method_conformity){D();return}if(!(X&&Number(y.lost_days)<0)){c(!0);try{const F={project_id:parseInt(y.project_id),event_date:y.event_date,type:y.category,description:y.description||null,severity:L||null,lost_time:X,lost_days:X&&Number(y.lost_days)||0,location:y.location,details:{schema_version:"accident_v1",category:y.category,exact_location:y.location,event_time:y.event_time||null,shift:y.shift,day_of_week:_||null,victims_count:y.victims_count,victims:z,activity:y.activity,activity_other:y.activity==="other"?y.activity_other:null,ground_condition:y.ground_condition,lighting:y.lighting,weather:y.weather,work_area:y.work_area,ppe_worn:y.ppe_worn,ppe_other:y.ppe_worn.includes("other")&&y.ppe_other||null,collective_protections:y.collective_protections,immediate_cause:y.immediate_cause,immediate_cause_other:y.immediate_cause==="other"?y.immediate_cause_other:null,root_causes:y.root_causes,method_conformity:H?y.method_conformity:null,immediate_actions:y.immediate_actions,corrective_actions:y.corrective_actions,investigation_completed:!!y.investigation_completed,accident_closed:!!y.accident_closed,closure_date:y.accident_closed&&y.closure_date||null,closed_by_role:y.accident_closed&&y.closed_by_role||null}};try{const ae=(await a(F))?.id??o?.id;try{await E(ae)}catch{K.error(i?.("common.error")??"Error")}t()}catch{}}finally{c(!1)}}};return r.jsx(nt,{isOpen:e,onClose:S,title:o?i?.("hseEvents.modal.editTitle")??"Edit":i?.("hseEvents.modal.newTitle")??"New",children:r.jsxs("form",{onSubmit:B,className:"space-y-4",children:[r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/30 border border-gray-200 dark:border-gray-700 rounded-xl p-4",children:[r.jsxs("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:["1) ",h("hseEvents.accidentForm.sections.identification","Accident Identification")]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.accidentId","Accident ID")}),r.jsx("input",{className:"input",value:o?.id?String(o.id):h("hseEvents.accidentForm.fields.autoGenerated","Auto-generated"),readOnly:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.accidentCategory","Accident category")}),r.jsx("select",{className:"input",value:y.category,onChange:C=>j(D=>({...D,category:C.target.value})),required:!0,children:F_e.map(C=>r.jsx("option",{value:C.value,children:b("accidentCategory",C.value)},C.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.siteProject","Site / Project")}),r.jsxs("select",{className:"input",value:y.project_id,onChange:C=>j(D=>({...D,project_id:C.target.value})),required:!0,children:[r.jsx("option",{value:"",children:i?.("common.select")??"Select"}),(n||[]).map(C=>r.jsx("option",{value:String(C.id),children:C.code?`${C.code} - ${C.name}`:C.name},C.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.exactLocation","Exact location on site")}),r.jsx("input",{className:"input",value:y.location,onChange:C=>j(D=>({...D,location:C.target.value})),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.date","Date")}),r.jsx(ot,{value:y.event_date,onChange:C=>j(D=>({...D,event_date:C})),className:"w-full",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.time","Time")}),r.jsx(wm,{value:y.event_time,onChange:C=>j(D=>({...D,event_time:C})),className:"w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.shift","Shift")}),r.jsx("select",{className:"input",value:y.shift,onChange:C=>j(D=>({...D,shift:C.target.value})),required:!0,children:z_e.map(C=>r.jsx("option",{value:C.value,children:b("shift",C.value)},C.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.dayOfWeek","Day of week")}),r.jsx("input",{className:"input",value:_,readOnly:!0})]})]})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/30 border border-gray-200 dark:border-gray-700 rounded-xl p-4",children:[r.jsxs("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:["2) ",h("hseEvents.accidentForm.sections.victimsOverview","Victims Overview")]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.numberOfVictims","Number of victims")}),r.jsx("input",{type:"number",min:"1",max:"20",className:"input",value:y.victims_count,onChange:C=>P(C.target.value),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.derivedSeverity","Derived severity")}),r.jsx("input",{className:"input",value:k||"-",readOnly:!0})]})]})]}),r.jsx("div",{className:"space-y-3",children:y.victims.map((C,D)=>{const z=C.outcome&&C.outcome!=="no_injury",L=C.outcome==="fatal";return r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4",children:[r.jsxs("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:["3) ",h("hseEvents.accidentForm.sections.victimDetails","Victim Details"),"  ",h("hseEvents.accidentForm.fields.victim","Victim")," ",D+1]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.fullName","Full name")}),r.jsx("input",{className:"input",value:C.full_name,onChange:X=>M(D,"full_name",X.target.value),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.matricule","Matricule / Internal ID (optional)")}),r.jsx("input",{className:"input",value:C.matricule,onChange:X=>M(D,"matricule",X.target.value)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.company","Company")}),r.jsxs("select",{className:"input",value:C.company,onChange:X=>M(D,"company",X.target.value),children:[r.jsx("option",{value:"sgtm",children:h("hseEvents.accidentForm.fields.companySgtm","SGTM")}),r.jsx("option",{value:"subcontractor",children:h("hseEvents.accidentForm.fields.companySubcontractor","Subcontractor")})]})]}),C.company==="subcontractor"&&r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.subcontractorName","Subcontractor name")}),r.jsx("input",{className:"input",value:C.subcontractor_name,onChange:X=>M(D,"subcontractor_name",X.target.value),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.jobTitle","Job title / Role")}),r.jsx("input",{className:"input",value:C.job_title,onChange:X=>M(D,"job_title",X.target.value)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.ageRange","Age range")}),r.jsxs("select",{className:"input",value:C.age_range,onChange:X=>M(D,"age_range",X.target.value),children:[r.jsx("option",{value:"",children:i?.("common.select")??"Select"}),B_e.map(X=>r.jsx("option",{value:X.value,children:b("ageRange",X.value,v(X.value))},X.value))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.experience","Experience in current role")}),r.jsxs("select",{className:"input",value:C.experience_range,onChange:X=>M(D,"experience_range",X.target.value),children:[r.jsx("option",{value:"",children:i?.("common.select")??"Select"}),W_e.map(X=>r.jsx("option",{value:X.value,children:b("experienceRange",X.value)},X.value))]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.injuryOutcome","Injury outcome")}),r.jsxs("select",{className:"input",value:C.outcome,onChange:X=>M(D,"outcome",X.target.value),required:!0,children:[r.jsx("option",{value:"",children:i?.("common.select")??"Select"}),U_e.map(X=>r.jsx("option",{value:X.value,children:b("outcome",X.value)},X.value))]})]}),z&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.bodyPart","Body part affected")}),r.jsxs("select",{className:"input",value:C.body_part,onChange:X=>M(D,"body_part",X.target.value),required:!0,children:[r.jsx("option",{value:"",children:i?.("common.select")??"Select"}),H_e.map(X=>r.jsx("option",{value:X.value,children:b("bodyPart",X.value)},X.value))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.injuryType","Injury type")}),r.jsxs("select",{className:"input",value:C.injury_type,onChange:X=>M(D,"injury_type",X.target.value),required:!0,children:[r.jsx("option",{value:"",children:i?.("common.select")??"Select"}),K_e.map(X=>r.jsx("option",{value:X.value,children:b("injuryType",X.value)},X.value))]})]}),C.injury_type==="other"&&r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.specifyInjuryType","Specify injury type")}),r.jsx("input",{className:"input",value:C.injury_type_other,onChange:X=>M(D,"injury_type_other",X.target.value),required:!0})]})]}),L&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.dateOfDeath","Date of death")}),r.jsxs("select",{className:"input",value:C.death_timing,onChange:X=>M(D,"death_timing",X.target.value),required:!0,children:[r.jsx("option",{value:"",children:i?.("common.select")??"Select"}),r.jsx("option",{value:"same_day",children:h("hseEvents.accidentForm.fields.deathTimingSameDay","Same day")}),r.jsx("option",{value:"later",children:h("hseEvents.accidentForm.fields.deathTimingLater","Later")})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.placeOfDeath","Place of death")}),r.jsxs("select",{className:"input",value:C.death_place,onChange:X=>M(D,"death_place",X.target.value),required:!0,children:[r.jsx("option",{value:"",children:i?.("common.select")??"Select"}),r.jsx("option",{value:"on_site",children:h("hseEvents.accidentForm.fields.deathPlaceOnSite","On site")}),r.jsx("option",{value:"during_evacuation",children:h("hseEvents.accidentForm.fields.deathPlaceDuringEvacuation","During evacuation")}),r.jsx("option",{value:"medical_facility",children:h("hseEvents.accidentForm.fields.deathPlaceMedicalFacility","Medical facility")})]})]}),C.death_timing==="later"&&r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.datePicker","Date picker")}),r.jsx(ot,{value:C.death_date,onChange:X=>M(D,"death_date",X),className:"w-full",required:!0})]})]})]})]},D)})}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/30 border border-gray-200 dark:border-gray-700 rounded-xl p-4",children:[r.jsxs("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:["4) ",h("hseEvents.accidentForm.sections.activity","Activity at Time of Accident")]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.activity","Activity")}),r.jsxs("select",{className:"input",value:y.activity,onChange:C=>j(D=>({...D,activity:C.target.value})),required:!0,children:[r.jsx("option",{value:"",children:i?.("common.select")??"Select"}),V_e.map(C=>r.jsx("option",{value:C.value,children:b("activity",C.value)},C.value))]})]}),y.activity==="other"&&r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.other","Other")}),r.jsx("input",{className:"input",value:y.activity_other,onChange:C=>j(D=>({...D,activity_other:C.target.value})),required:!0})]})]})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/30 border border-gray-200 dark:border-gray-700 rounded-xl p-4",children:[r.jsxs("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:["5) ",h("hseEvents.accidentForm.sections.environment","Work Environment & Conditions")]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.groundCondition","Ground condition")}),r.jsxs("select",{className:"input",value:y.ground_condition,onChange:C=>j(D=>({...D,ground_condition:C.target.value})),required:!0,children:[r.jsx("option",{value:"",children:i?.("common.select")??"Select"}),G_e.map(C=>r.jsx("option",{value:C.value,children:b("groundCondition",C.value)},C.value))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.lighting","Lighting")}),r.jsxs("select",{className:"input",value:y.lighting,onChange:C=>j(D=>({...D,lighting:C.target.value})),required:!0,children:[r.jsx("option",{value:"",children:i?.("common.select")??"Select"}),Y_e.map(C=>r.jsx("option",{value:C.value,children:b("lighting",C.value)},C.value))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.weather","Weather")}),r.jsxs("select",{className:"input",value:y.weather,onChange:C=>j(D=>({...D,weather:C.target.value})),required:!0,children:[r.jsx("option",{value:"",children:i?.("common.select")??"Select"}),Z_e.map(C=>r.jsx("option",{value:C.value,children:b("weather",C.value)},C.value))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.workArea","Work area")}),r.jsxs("select",{className:"input",value:y.work_area,onChange:C=>j(D=>({...D,work_area:C.target.value})),required:!0,children:[r.jsx("option",{value:"",children:i?.("common.select")??"Select"}),X_e.map(C=>r.jsx("option",{value:C.value,children:b("workArea",C.value)},C.value))]})]})]})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/30 border border-gray-200 dark:border-gray-700 rounded-xl p-4",children:[r.jsxs("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:["6) ",h("hseEvents.accidentForm.sections.ppe","PPE & Protections")]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:h("hseEvents.accidentForm.fields.ppeWorn","PPE worn")}),r.jsx("div",{className:"grid grid-cols-1 gap-1",children:Q_e.map(C=>r.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[r.jsx("input",{type:"checkbox",checked:y.ppe_worn.includes(C.value),onChange:()=>A("ppe_worn",C.value)}),b("ppe",C.value)]},C.value))}),y.ppe_worn.includes("other")&&r.jsx("input",{className:"input",placeholder:h("hseEvents.accidentForm.fields.otherPpe","Other PPE"),value:y.ppe_other,onChange:C=>j(D=>({...D,ppe_other:C.target.value}))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.collectiveProtections","Collective protections")}),r.jsx("select",{className:"input",value:y.collective_protections,onChange:C=>j(D=>({...D,collective_protections:C.target.value})),children:J_e.map(C=>r.jsx("option",{value:C.value,children:b("collectiveProtections",C.value)},C.value))})]})]})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/30 border border-gray-200 dark:border-gray-700 rounded-xl p-4",children:[r.jsxs("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:["7) ",h("hseEvents.accidentForm.sections.immediateCause","Immediate Cause")]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.primaryImmediateCause","Primary immediate cause")}),r.jsxs("select",{className:"input",value:y.immediate_cause,onChange:C=>j(D=>({...D,immediate_cause:C.target.value})),required:!0,children:[r.jsx("option",{value:"",children:i?.("common.select")??"Select"}),e1e.map(C=>r.jsx("option",{value:C.value,children:b("immediateCause",C.value)},C.value))]})]}),y.immediate_cause==="other"&&r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.other","Other")}),r.jsx("input",{className:"input",value:y.immediate_cause_other,onChange:C=>j(D=>({...D,immediate_cause_other:C.target.value})),required:!0})]})]})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/30 border border-gray-200 dark:border-gray-700 rounded-xl p-4",children:[r.jsxs("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:["8) ",h("hseEvents.accidentForm.sections.rootCause","Root Cause Analysis")]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:h("hseEvents.accidentForm.fields.rootCauseCategories","Root cause categories")}),r.jsx("div",{className:"grid grid-cols-1 gap-1",children:t1e.map(C=>r.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[r.jsx("input",{type:"checkbox",checked:y.root_causes.includes(C.value),onChange:()=>A("root_causes",C.value)}),b("rootCause",C.value)]},C.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.methodConformity","Method conformity (required if severity  LTA)")}),r.jsxs("select",{className:"input",value:y.method_conformity,onChange:C=>j(D=>({...D,method_conformity:C.target.value})),children:[r.jsx("option",{value:"",children:i?.("common.select")??"Select"}),r1e.map(C=>r.jsx("option",{value:C.value,children:b("methodConformity",C.value)},C.value))]})]})]})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/30 border border-gray-200 dark:border-gray-700 rounded-xl p-4",children:[r.jsxs("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:["9) ",h("hseEvents.accidentForm.sections.immediateActions","Immediate Actions Taken")]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:a1e.map(C=>r.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[r.jsx("input",{type:"checkbox",checked:y.immediate_actions.includes(C.value),onChange:()=>A("immediate_actions",C.value)}),b("immediateAction",C.value)]},C.value))})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/30 border border-gray-200 dark:border-gray-700 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:["10) ",h("hseEvents.accidentForm.sections.preventiveActions","Preventive & Corrective Actions")]}),r.jsx("button",{type:"button",className:"btn-secondary",onClick:R,children:h("hseEvents.accidentForm.fields.addAction","Add action")})]}),r.jsxs("div",{className:"space-y-3 mt-3",children:[(y.corrective_actions||[]).map((C,D)=>r.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3 bg-white dark:bg-gray-800",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[r.jsxs("select",{className:"input",value:C.type,onChange:z=>q(D,"type",z.target.value),children:[r.jsx("option",{value:"",children:h("hseEvents.accidentForm.fields.actionType","Action type")}),n1e.map(z=>r.jsx("option",{value:z.value,children:b("actionType",z.value)},z.value))]}),r.jsx("input",{className:"input md:col-span-2",placeholder:h("hseEvents.accidentForm.fields.actionDescription","Action description"),value:C.description,onChange:z=>q(D,"description",z.target.value)}),r.jsx("input",{className:"input",placeholder:h("hseEvents.accidentForm.fields.responsibleRole","Responsible role"),value:C.responsible_role,onChange:z=>q(D,"responsible_role",z.target.value)}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(ot,{value:C.deadline,onChange:z=>q(D,"deadline",z),className:"w-full"}),r.jsx("select",{className:"input",value:C.status,onChange:z=>q(D,"status",z.target.value),children:s1e.map(z=>r.jsx("option",{value:z.value,children:b("actionStatus",z.value)},z.value))})]})]}),r.jsx("div",{className:"flex justify-end mt-2",children:r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>O(D),children:h("hseEvents.accidentForm.fields.remove","Remove")})})]},D)),(y.corrective_actions||[]).length===0&&r.jsx("div",{className:"text-sm text-gray-500",children:h("hseEvents.accidentForm.fields.noActions","No actions")})]})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/30 border border-gray-200 dark:border-gray-700 rounded-xl p-4",children:[r.jsxs("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:["11) ",h("hseEvents.accidentForm.sections.attachments","Attachments")]}),!o?.id&&r.jsx("div",{className:"text-sm text-gray-500 mt-2",children:h("hseEvents.accidentForm.fields.filesUploadedAfterSaving","Files will be uploaded after saving.")}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.addFiles","Add files")}),r.jsx("input",{type:"file",className:"input",multiple:!0,onChange:I}),g.length>0&&r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:h("hseEvents.accidentForm.fields.selectedFiles","Selected: {files}",{files:g.map(C=>C.name).join(", ")})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.existingAttachments","Existing attachments")}),r.jsxs("div",{className:"space-y-2",children:[d&&r.jsx("div",{className:"text-sm text-gray-500",children:h("hseEvents.accidentForm.fields.loading","Loading...")}),!d&&(m||[]).length===0&&r.jsx("div",{className:"text-sm text-gray-500",children:h("hseEvents.accidentForm.fields.noAttachments","No attachments")}),(m||[]).map(C=>r.jsxs("div",{className:"flex items-center justify-between gap-2 border border-gray-200 dark:border-gray-700 rounded-lg p-2 bg-white dark:bg-gray-800",children:[r.jsx("a",{className:"text-sm text-blue-600 hover:underline",href:C.url||"#",target:"_blank",rel:"noreferrer",children:C.label||C.original_name||C.id}),r.jsx("button",{type:"button",className:"btn-secondary",disabled:!o?.id||d,onClick:()=>W(o?.id,C.id),children:i?.("common.delete")??"Delete"})]},C.id))]})]})]})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/30 border border-gray-200 dark:border-gray-700 rounded-xl p-4",children:[r.jsxs("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:["12) ",h("hseEvents.accidentForm.sections.validationClosure","Validation & Closure")]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:[r.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[r.jsx("input",{type:"checkbox",checked:!!y.investigation_completed,onChange:C=>j(D=>({...D,investigation_completed:C.target.checked}))}),h("hseEvents.accidentForm.fields.investigationCompleted","Investigation completed")]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[r.jsx("input",{type:"checkbox",checked:!!y.accident_closed,onChange:C=>j(D=>({...D,accident_closed:C.target.checked}))}),h("hseEvents.accidentForm.fields.accidentClosed","Accident closed")]}),y.accident_closed&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.closureDate","Closure date")}),r.jsx(ot,{value:y.closure_date,onChange:C=>j(D=>({...D,closure_date:C})),className:"w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.closedByRole","Closed by (role)")}),r.jsx("input",{className:"input",value:y.closed_by_role,onChange:C=>j(D=>({...D,closed_by_role:C.target.value}))})]})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:h("hseEvents.accidentForm.sections.other","Other")}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.description","Description")}),r.jsx("textarea",{className:"input",rows:"3",value:y.description,onChange:C=>j(D=>({...D,description:C.target.value}))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:h("hseEvents.accidentForm.fields.lostWorkDays","Lost work days (if lost time)")}),r.jsx("input",{type:"number",min:"0",className:"input",value:y.lost_days,onChange:C=>j(D=>({...D,lost_days:C.target.value}))}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:h("hseEvents.accidentForm.fields.lostTimeAutoDerived","Lost time is auto-derived from victims outcomes.")})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:S,disabled:l,children:i?.("common.cancel")??"Cancel"}),r.jsx("button",{type:"submit",className:"btn-primary",disabled:l,children:i?.("common.save")??"Save"})]})]})})}function jf({children:e,className:t=""}){return r.jsx("div",{className:`bg-white/80 dark:bg-gray-800 border border-gray-200/80 dark:border-gray-700 rounded-2xl p-4 shadow-sm ${t}`,children:e})}function c$({options:e,value:t,onChange:a,className:n=""}){const s=Array.isArray(e)?e:[];return r.jsx("div",{className:`flex flex-wrap sm:inline-flex p-1 rounded-2xl bg-gray-100/80 dark:bg-gray-800 border border-gray-200/80 dark:border-gray-700 shadow-sm w-full sm:w-fit ${n}`,role:"group",children:s.map(i=>{const o=String(i.value)===String(t);return r.jsx("button",{type:"button",onClick:()=>a?.(i.value),"aria-pressed":o,className:`flex-1 sm:flex-initial px-3 py-2 rounded-xl text-sm font-semibold transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sgtm-orange focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-900 ${o?"bg-sgtm-orange text-white shadow border border-sgtm-orange":"bg-transparent text-gray-800 dark:text-gray-100 border border-gray-300/70 dark:border-gray-700 hover:bg-white/60 dark:hover:bg-gray-900/40"}`,children:i.label},String(i.value))})})}function ws({label:e,value:t,onChange:a,children:n,className:s="",selectClassName:i="",...o}){const l=o.id||`filter-select-${String(e??"field").toLowerCase().replace(/[^a-z0-9]+/g,"-")}`;return r.jsxs("div",{className:`flex flex-col gap-1 ${s}`.trim(),children:[e?r.jsx("label",{htmlFor:l,className:"text-xs font-medium text-gray-700 dark:text-gray-200",children:e}):null,r.jsx("select",{id:l,value:t,onChange:c=>a?.(c.target.value,c),className:`w-full px-3 py-2 rounded-xl border border-gray-300/70 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 text-sm shadow-sm hover:bg-gray-50 dark:hover:bg-gray-900 focus:outline-none focus-visible:ring-2 focus-visible:ring-sgtm-orange focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-900 disabled:opacity-60 disabled:cursor-not-allowed ${i}`,...o,children:n})]})}const hm=[{value:"work_accident"},{value:"incident"},{value:"near_miss"},{value:"first_aid"},{value:"medical_consultation"},{value:"road_accident"},{value:"other"}],Wh=["work_accident","incident","near_miss","road_accident"],Uh=["medical_consultation","first_aid"],Hh=[{value:""},{value:"minor"},{value:"moderate"},{value:"major"},{value:"critical"},{value:"fatal"},{value:"other"}];function d1e(){const{t:e}=ut(),{user:t}=At(),a=J=>String(J).padStart(2,"0"),n=(J,Q)=>{const ne=String(J??"").trim(),ee=String(Q??"").trim();return!ne||!ee?"":`${ne}-${a(ee)}`},s=J=>{const ne=String(J??"").trim().match(/^(\d{4})-(\d{2})$/);if(!ne)return null;const ee=ne[1],ye=String(Number(ne[2]));return{year:ee,month:ye}},i=J=>e(`hseEvents.types.${J}`)??J,o=J=>J?e(`hseEvents.severities.${J}`)??J:e("common.all")??"All",[l,c]=f.useState([]),[d,u]=f.useState([]),[m,p]=f.useState(!0),[g,x]=f.useState(!1),[h,v]=f.useState([]),[b,y]=f.useState(""),[j,_]=f.useState(""),[w,k]=f.useState(""),[N,P]=f.useState(""),[A,M]=f.useState(String(new Date().getFullYear())),[R,O]=f.useState(""),[q,S]=f.useState(""),[I,E]=f.useState(""),[W,B]=f.useState(!1),[C,D]=f.useState(!1),[z,L]=f.useState(null),[X,H]=f.useState(null),[F,ke]=f.useState("accidents"),ae=t?.project_list_preference??"code",ue=f.useMemo(()=>Ir(l,ae),[l,ae]),Z=()=>({project_id:"",event_date:new Date().toISOString().split("T")[0],type:"work_accident",type_other:"",description:"",severity:"",severity_other:"",lost_time:!1,lost_days:0,location:""}),[me,ge]=f.useState(Z());f.useEffect(()=>{const J=async()=>{try{const ee=(await it.getAll({per_page:200})).data?.data??[];c(Array.isArray(ee)?ee:[])}catch{c([])}finally{p(!1)}},Q=async()=>{try{const ne=await it.getPoles(),ee=ne.data?.data?.poles||ne.data?.poles||[];u(Array.isArray(ee)?ee:[])}catch{u([])}};J(),Q()},[]);const se=async()=>{p(!0);try{const J={per_page:100};b&&(J.pole=b),j&&(J.project_id=j),A&&(J.year=A),R&&(J.month=R),q&&(J.from_date=q),I&&(J.to_date=I);const ne=(await vs.getAll(J)).data,ee=ne?.data??ne,ye=Array.isArray(ee)?ee:ee?.data??[];v(ye)}catch{v([])}finally{p(!1)}},he=async J=>{x(!0);try{let Q;return z?.id?Q=await vs.update(z.id,J):Q=await vs.create(J),K.success(e("common.saved")??"Saved"),se(),Q?.data?.data??Q?.data}catch(Q){throw K.error(e("common.error")??"Error"),Q}finally{x(!1)}};f.useEffect(()=>{se()},[b,j,A,R,q,I]),f.useEffect(()=>{b&&_("")},[b]);const T=()=>{if(F==="accidents"){L(null),D(!0);return}L(null),ge({...Z(),project_id:j||"",type:"medical_consultation"}),B(!0)},oe=J=>{if(Wh.includes(J.type)){L(J),D(!0);return}const Q=hm.some(ee=>ee.value!=="other"&&ee.value===J.type),ne=Hh.some(ee=>ee.value&&ee.value!=="other"&&ee.value===J.severity);L(J),ge({project_id:String(J.project_id??""),event_date:J.event_date?.substring(0,10)??new Date().toISOString().split("T")[0],type:Q?J.type:"other",type_other:Q?"":J.type??"",description:J.description??"",severity:ne?J.severity:J.severity?"other":"",severity_other:ne?"":J.severity??"",lost_time:!!J.lost_time,lost_days:J.lost_days??0,location:J.location??""}),B(!0)},G=()=>{B(!1),L(null),ge(Z())},V=()=>{D(!1),L(null)},Y=async J=>{J.preventDefault(),x(!0);try{const Q=me.type==="other"?me.type_other||"":me.type,ne=me.severity==="other"?me.severity_other||"":me.severity||"";if(!Q){K.error(e("hseEvents.validation.typeRequired")??"Type is required");return}if(me.type==="other"&&!me.type_other){K.error(e("hseEvents.validation.specifyType")??"Please specify the type");return}if(me.severity==="other"&&!me.severity_other){K.error(e("hseEvents.validation.specifySeverity")??"Please specify the severity");return}const ee={project_id:parseInt(me.project_id),event_date:me.event_date,type:Q,description:me.description||null,severity:ne||null,lost_time:!!me.lost_time,lost_days:Number(me.lost_days)||0,location:me.location||null};z?.id?(await vs.update(z.id,ee),K.success(e("common.saved")??"Saved")):(await vs.create(ee),K.success(e("common.saved")??"Saved")),G(),se()}catch{K.error(e("common.error")??"Error")}finally{x(!1)}},ce=J=>H(J),je=async()=>{if(X?.id){x(!0);try{await vs.delete(X.id),K.success(e("common.saved")??"Saved"),H(null),se()}catch{K.error(e("common.error")??"Error")}finally{x(!1)}}},re=J=>{if(!J)return e("common.none")??"-";const Q=J.substring(0,10),[ne,ee,ye]=Q.split("-");return`${ye}/${ee}/${ne}`},U=f.useMemo(()=>{let J=Array.isArray(h)?h:[];return F==="accidents"?J=J.filter(Q=>Wh.includes(Q.type)):J=J.filter(Q=>Uh.includes(Q.type)),w&&(w==="other"?J=J.filter(Q=>!hm.some(ne=>ne.value!=="other"&&ne.value===Q.type)):J=J.filter(Q=>Q.type===w)),N&&(N==="other"?J=J.filter(Q=>Q.severity&&!Hh.some(ne=>ne.value&&ne.value!=="other"&&ne.value===Q.severity)):J=J.filter(Q=>(Q.severity??"")===N)),J},[h,w,N,F]),xe=f.useMemo(()=>{const J=F==="accidents"?Wh:Uh;return hm.filter(Q=>Q.value==="other"||J.includes(Q.value))},[F]);return f.useEffect(()=>{w&&w!=="other"&&!(F==="accidents"?Wh:Uh).includes(w)&&k("")},[F]),r.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-red-50 rounded-lg",children:r.jsx(Qt,{className:"w-6 h-6 text-red-500"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:e("hseEvents.pageTitle")??"Accidents, Incidents & Medical Visits"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("hseEvents.pageSubtitle")??"Register and track HSE events (accidents, incidents, near misses, first aid, road accidents)"})]})]}),r.jsxs("button",{onClick:T,className:"btn-primary flex items-center gap-2",children:[r.jsx(Pn,{className:"w-4 h-4"}),e("common.new")??"New"]})]}),r.jsx("div",{className:"flex items-center justify-between",children:r.jsx(c$,{value:F,onChange:ke,options:[{value:"accidents",label:e("hseEvents.tabs.accidents")??"Accident / Incident"},{value:"medical",label:e("hseEvents.tabs.medical")??"Medical Visits"}]})}),r.jsx(jf,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-7 gap-3",children:[r.jsxs(ws,{label:e("filters.pole")??e("common.pole")??"Pole",value:b,onChange:y,children:[r.jsx("option",{value:"",children:e("common.allPoles")??"All poles"}),d.map(J=>r.jsx("option",{value:J,children:J},J))]}),r.jsxs(ws,{label:e("projects.title")??"Project",value:j,onChange:_,children:[r.jsx("option",{value:"",children:e("common.all")??"All"}),ue.filter(J=>!b||String(J.pole??"")===String(b)).map(J=>r.jsx("option",{value:String(J.id),children:J.code?`${J.code} - ${J.name}`:J.name},J.id))]}),r.jsxs(ws,{label:e("hseEvents.filters.type")??"Type",value:w,onChange:k,children:[r.jsx("option",{value:"",children:e("common.all")??"All"}),xe.map(J=>r.jsx("option",{value:J.value,children:i(J.value)},J.value))]}),r.jsx(ws,{label:e("hseEvents.filters.severity")??"Severity",value:N,onChange:P,children:Hh.map(J=>r.jsx("option",{value:J.value,children:o(J.value)},J.value||"all"))}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:e("hseEvents.filters.year")??"Year"}),r.jsx(So,{value:A,onChange:J=>M(String(J??"")),className:"w-full"})]}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:e("hseEvents.filters.month")??"Month"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"flex-1",children:r.jsx(dp,{value:R?n(A,R):"",defaultYear:A,onChange:J=>{const Q=s(J);Q&&(M(Q.year),O(Q.month))},placeholder:e("common.all")??"All",className:"w-full"})}),r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>O(""),disabled:!R,"aria-label":e("common.all")??"All",title:e("common.all")??"All",children:r.jsx(qt,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:e("hseEvents.filters.from")??"From"}),r.jsx(ot,{value:q,onChange:S,className:"w-full"})]}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:e("hseEvents.filters.to")??"To"}),r.jsx(ot,{value:I,onChange:E,className:"w-full"})]})]})}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl overflow-hidden",children:[r.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:e("hseEvents.recordsTitle")??"Records"}),m&&r.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-2",children:[r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e("common.loading")??"Loading"]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-4 py-2",children:e("hseEvents.table.date")??"Date"}),r.jsx("th",{className:"text-left px-4 py-2",children:e("hseEvents.table.project")??"Project"}),r.jsx("th",{className:"text-left px-4 py-2",children:e("hseEvents.table.type")??"Type"}),r.jsx("th",{className:"text-left px-4 py-2",children:e("hseEvents.table.severity")??"Severity"}),r.jsx("th",{className:"text-left px-4 py-2",children:e("hseEvents.table.lostTime")??"Lost time"}),r.jsx("th",{className:"text-left px-4 py-2",children:e("hseEvents.table.lostDays")??"Lost days"}),r.jsx("th",{className:"text-left px-4 py-2",children:e("hseEvents.table.location")??"Location"}),r.jsx("th",{className:"text-left px-4 py-2",children:e("hseEvents.table.description")??"Description"}),r.jsx("th",{className:"text-right px-4 py-2",children:e("common.actions")??"Actions"})]})}),r.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:[U.map(J=>r.jsxs("tr",{className:J.deleted_at?"opacity-60":"",children:[r.jsx("td",{className:"px-4 py-2",children:re(J.event_date)}),r.jsx("td",{className:"px-4 py-2",children:J.project?.code?`${J.project.code} - ${J.project.name}`:J.project?.name??J.project_id}),r.jsx("td",{className:"px-4 py-2",children:i(J.type)}),r.jsx("td",{className:"px-4 py-2",children:J.severity?o(J.severity):e("common.none")??"-"}),r.jsx("td",{className:"px-4 py-2",children:J.lost_time?e("common.yes")??"Yes":e("common.no")??"No"}),r.jsx("td",{className:"px-4 py-2",children:J.lost_days??0}),r.jsx("td",{className:"px-4 py-2",children:J.location??e("common.none")??"-"}),r.jsx("td",{className:"px-4 py-2 max-w-xl",children:r.jsx("div",{className:"truncate",title:J.description??"",children:J.description??e("common.none")??"-"})}),r.jsx("td",{className:"px-4 py-2",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{className:"btn-secondary",onClick:()=>oe(J),children:r.jsx(Lo,{className:"w-4 h-4"})}),r.jsx("button",{className:"btn-secondary",onClick:()=>ce(J),children:r.jsx(Nt,{className:"w-4 h-4"})})]})})]},J.id)),!m&&U.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:"9",className:"px-4 py-10 text-center text-gray-500",children:e("hseEvents.noRecords")??"No records"})})]})]})})]}),r.jsx(nt,{isOpen:W,onClose:G,title:z?e("hseEvents.modal.editTitle")??"Edit HSE Event":e("hseEvents.modal.newTitle")??"New HSE Event",children:r.jsxs("form",{onSubmit:Y,className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("hseEvents.fields.project")??"Project"}),r.jsxs("select",{className:"input",value:me.project_id,onChange:J=>ge(Q=>({...Q,project_id:J.target.value})),required:!0,children:[r.jsx("option",{value:"",children:e("hseEvents.fields.selectProject")??"Select..."}),ue.map(J=>r.jsx("option",{value:String(J.id),children:J.code?`${J.code} - ${J.name}`:J.name},J.id))]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("hseEvents.fields.date")??"Date"}),r.jsx(ot,{value:me.event_date,onChange:J=>ge(Q=>({...Q,event_date:J})),className:"w-full",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("hseEvents.fields.type")??"Type"}),r.jsx("select",{className:"input",value:me.type,onChange:J=>ge(Q=>({...Q,type:J.target.value})),required:!0,children:(F==="medical"?hm.filter(J=>J.value==="other"||Uh.includes(J.value)):hm).map(J=>r.jsx("option",{value:J.value,children:i(J.value)},J.value))})]})]}),me.type==="other"&&r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("hseEvents.fields.specifyType")??"Specify type"}),r.jsx("input",{className:"input",value:me.type_other,onChange:J=>ge(Q=>({...Q,type_other:J.target.value})),placeholder:e("hseEvents.placeholders.typeOther")??"e.g. property damage",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("hseEvents.fields.description")??"Description"}),r.jsx("textarea",{className:"input",value:me.description,onChange:J=>ge(Q=>({...Q,description:J.target.value})),rows:"3"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("hseEvents.fields.severity")??"Severity"}),r.jsxs("select",{className:"input",value:me.severity,onChange:J=>ge(Q=>({...Q,severity:J.target.value})),children:[r.jsx("option",{value:"",children:e("common.select")??"Select"}),Hh.filter(J=>J.value!=="").map(J=>r.jsx("option",{value:J.value,children:o(J.value)},J.value))]})]}),r.jsx("div",{className:"flex items-end",children:r.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[r.jsx("input",{type:"checkbox",checked:!!me.lost_time,onChange:J=>ge(Q=>({...Q,lost_time:J.target.checked}))}),e("hseEvents.fields.lostTime")??"Lost time"]})}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("hseEvents.fields.lostDays")??"Lost days"}),r.jsx("input",{type:"number",min:"0",className:"input",value:me.lost_days,onChange:J=>ge(Q=>({...Q,lost_days:J.target.value}))})]})]}),me.severity==="other"&&r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("hseEvents.fields.specifySeverity")??"Specify severity"}),r.jsx("input",{className:"input",value:me.severity_other,onChange:J=>ge(Q=>({...Q,severity_other:J.target.value})),placeholder:e("hseEvents.placeholders.severityOther")??"e.g. moderate",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("hseEvents.fields.location")??"Location"}),r.jsx("input",{className:"input",value:me.location,onChange:J=>ge(Q=>({...Q,location:J.target.value}))})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:G,children:e("common.cancel")??"Cancel"}),r.jsx("button",{type:"submit",className:"btn-primary",disabled:g,children:g?r.jsx(Re,{className:"w-4 h-4 animate-spin"}):e("common.save")??"Save"})]})]})}),r.jsx(c1e,{isOpen:C,onClose:V,onSubmit:he,projects:ue,selectedProjectId:j,t:e,initial:z}),r.jsx(la,{isOpen:!!X,title:e("hseEvents.archive.title")??"Archive record",message:e("hseEvents.archive.message")??"This will archive (soft-delete) the record. Continue?",confirmLabel:e("common.confirm")??"Confirm",cancelLabel:e("common.cancel")??"Cancel",onConfirm:je,onCancel:()=>H(null)})]})}const u1e=Object.freeze(Object.defineProperty({__proto__:null,default:d1e},Symbol.toStringTag,{value:"Module"})),yc=[{value:"noise_monitoring",unit:"dB",icon:O5,activeClass:"ring-2 ring-blue-500",iconClass:"text-blue-500",bgClass:"bg-blue-50 dark:bg-blue-900/30"},{value:"water_consumption",unit:"m",icon:N5,activeClass:"ring-2 ring-cyan-500",iconClass:"text-cyan-600",bgClass:"bg-cyan-50 dark:bg-cyan-900/30"},{value:"electricity_consumption",unit:"kWh",icon:M5,activeClass:"ring-2 ring-amber-500",iconClass:"text-amber-600",bgClass:"bg-amber-50 dark:bg-amber-900/30"}];function m1e(){const{t:e}=ut(),{user:t}=At(),a=ae=>String(ae).padStart(2,"0"),n=(ae,ue)=>{const Z=String(ae??"").trim(),me=String(ue??"").trim();return!Z||!me?"":`${Z}-${a(me)}`},s=ae=>{const Z=String(ae??"").trim().match(/^(\d{4})-(\d{2})$/);if(!Z)return null;const me=Z[1],ge=String(Number(Z[2]));return{year:me,month:ge}},[i,o]=f.useState([]),[l,c]=f.useState([]),[d,u]=f.useState(!0),[m,p]=f.useState(!1),[g,x]=f.useState(""),[h,v]=f.useState(String(new Date().getFullYear())),[b,y]=f.useState(String(new Date().getMonth()+1)),[j,_]=f.useState("noise_monitoring"),[w,k]=f.useState(!1),[N,P]=f.useState(null),[A,M]=f.useState(null),R=t?.project_list_preference??"code",O=f.useMemo(()=>Ir(i,R),[i,R]),q=()=>({project_id:"",year:String(new Date().getFullYear()),month:String(new Date().getMonth()+1),indicator:"noise_monitoring",value:"",method:""}),[S,I]=f.useState(q());f.useEffect(()=>{(async()=>{try{const Z=(await it.getAll({per_page:200})).data?.data??[];o(Array.isArray(Z)?Z:[])}catch{o([])}finally{u(!1)}})()},[]);const E=async()=>{u(!0);try{const ae={per_page:100};g&&(ae.project_id=g),h&&(ae.year=h),b&&(ae.month=b);const Z=(await cl.getAll(ae)).data,me=Z?.data??Z,ge=Array.isArray(me)?me:me?.data??[];c(ge)}catch{c([])}finally{u(!1)}};f.useEffect(()=>{E()},[g,h,b]);const W=()=>{P(null),I({...q(),project_id:g||"",year:h||String(new Date().getFullYear()),month:b||String(new Date().getMonth()+1),indicator:j}),k(!0)},B=ae=>{P(ae),ae?.indicator&&_(ae.indicator),I({project_id:String(ae.project_id??""),year:String(ae.year??""),month:String(ae.month??""),indicator:ae.indicator??"noise_monitoring",value:ae.value??"",method:ae.method??""}),k(!0)},C=()=>{k(!1),P(null),I(q())},D=async ae=>{ae.preventDefault(),p(!0);try{const ue={project_id:parseInt(S.project_id),year:parseInt(S.year),month:parseInt(S.month),indicator:S.indicator,value:Number(S.value),method:S.method||null};N?.id?await cl.update(N.id,{value:ue.value,method:ue.method}):await cl.upsert(ue),K.success(e("common.saved")??"Saved"),C(),E()}catch{K.error(e("common.error")??"Error")}finally{p(!1)}},z=ae=>M(ae),L=async()=>{if(A?.id){p(!0);try{await cl.delete(A.id),K.success(e("common.saved")??"Saved"),M(null),E()}catch{K.error(e("common.error")??"Error")}finally{p(!1)}}},X=ae=>yc.some(Z=>Z.value===ae)?e(`monthlyMeasurements.indicators.${ae}`)??ae:ae,H=ae=>yc.find(ue=>ue.value===ae)?.unit??"",F=yc.find(ae=>ae.value===j)??yc[0],ke=l.filter(ae=>ae.indicator===j);return r.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-50 dark:bg-blue-900/30 rounded-xl flex items-center justify-center",children:r.jsx(pr,{className:"w-6 h-6 text-blue-500"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:e("monthlyMeasurements.pageTitle")??"Monthly Measurements"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("monthlyMeasurements.pageSubtitle")??"Monthly-only environmental measurements (separated by indicator)"})]})]}),r.jsxs("button",{onClick:W,className:"btn-primary flex items-center gap-2",children:[r.jsx(Pn,{className:"w-4 h-4"}),e("common.new")??"New"]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:yc.map(ae=>{const ue=ae.icon,Z=j===ae.value;return r.jsx("button",{type:"button",onClick:()=>_(ae.value),className:`text-left border border-gray-200 dark:border-gray-700 rounded-2xl p-4 bg-white dark:bg-gray-800 transition ${Z?ae.activeClass:"hover:bg-gray-50 dark:hover:bg-gray-700/30"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${ae.bgClass}`,children:r.jsx(ue,{className:`w-5 h-5 ${ae.iconClass}`})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:X(ae.value)}),r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e("monthlyMeasurements.unit")??"Unit",": ",ae.unit]})]})]}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:Z?e("monthlyMeasurements.selected")??"Selected":e("monthlyMeasurements.select")??"Select"})]})},ae.value)})}),r.jsx(jf,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[r.jsxs(ws,{label:e("projects.title")??"Project",value:g,onChange:x,children:[r.jsx("option",{value:"",children:e("common.all")??"All"}),O.map(ae=>r.jsx("option",{value:String(ae.id),children:ae.code?`${ae.code} - ${ae.name}`:ae.name},ae.id))]}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:e("monthlyMeasurements.filters.year")??"Year"}),r.jsx(So,{value:h,onChange:ae=>v(String(ae??"")),className:"w-full"})]}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:e("monthlyMeasurements.filters.month")??"Month"}),r.jsx(dp,{value:n(h,b),defaultYear:h,onChange:ae=>{const ue=s(ae);ue&&(v(ue.year),y(ue.month))},className:"w-full"})]})]})}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl overflow-hidden",children:[r.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:e("monthlyMeasurements.recordsTitle",{indicator:X(F.value)})??`Records: ${X(F.value)}`}),d&&r.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-2",children:[r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e("common.loading")??"Loading"]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-4 py-2",children:e("monthlyMeasurements.table.project")??"Project"}),r.jsx("th",{className:"text-left px-4 py-2",children:e("monthlyMeasurements.table.year")??"Year"}),r.jsx("th",{className:"text-left px-4 py-2",children:e("monthlyMeasurements.table.month")??"Month"}),r.jsx("th",{className:"text-left px-4 py-2",children:e("monthlyMeasurements.table.indicator")??"Indicator"}),r.jsx("th",{className:"text-left px-4 py-2",children:e("monthlyMeasurements.table.value")??"Value"}),r.jsx("th",{className:"text-left px-4 py-2",children:e("monthlyMeasurements.table.unit")??"Unit"}),r.jsx("th",{className:"text-left px-4 py-2",children:e("monthlyMeasurements.table.method")??"Method"}),r.jsx("th",{className:"text-right px-4 py-2",children:e("common.actions")??"Actions"})]})}),r.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:[ke.map(ae=>r.jsxs("tr",{className:ae.deleted_at?"opacity-60":"",children:[r.jsx("td",{className:"px-4 py-2",children:ae.project?.code?`${ae.project.code} - ${ae.project.name}`:ae.project?.name??ae.project_id}),r.jsx("td",{className:"px-4 py-2",children:ae.year}),r.jsx("td",{className:"px-4 py-2",children:ae.month}),r.jsx("td",{className:"px-4 py-2",children:X(ae.indicator)}),r.jsx("td",{className:"px-4 py-2",children:ae.value}),r.jsx("td",{className:"px-4 py-2",children:H(ae.indicator)}),r.jsx("td",{className:"px-4 py-2",children:ae.method??"-"}),r.jsx("td",{className:"px-4 py-2",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{className:"btn-secondary",onClick:()=>B(ae),children:r.jsx(Lo,{className:"w-4 h-4"})}),r.jsx("button",{className:"btn-secondary",onClick:()=>z(ae),children:r.jsx(Nt,{className:"w-4 h-4"})})]})})]},ae.id)),!d&&ke.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:"8",className:"px-4 py-10 text-center text-gray-500",children:e("monthlyMeasurements.noRecords")??"No records"})})]})]})})]}),r.jsx(nt,{isOpen:w,onClose:C,title:N?e("monthlyMeasurements.modal.editTitle")??"Edit monthly measurement":e("monthlyMeasurements.modal.newTitle")??"New monthly measurement",children:r.jsxs("form",{onSubmit:D,className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("monthlyMeasurements.fields.project")??"Project"}),r.jsxs("select",{className:"input",value:S.project_id,onChange:ae=>I(ue=>({...ue,project_id:ae.target.value})),required:!0,children:[r.jsx("option",{value:"",children:e("monthlyMeasurements.fields.selectProject")??"Select..."}),O.map(ae=>r.jsx("option",{value:String(ae.id),children:ae.code?`${ae.code} - ${ae.name}`:ae.name},ae.id))]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("monthlyMeasurements.fields.year")??"Year"}),r.jsx(So,{value:S.year,onChange:ae=>I(ue=>({...ue,year:String(ae??"")})),className:"w-full",required:!0,disabled:!!N})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("monthlyMeasurements.fields.month")??"Month"}),r.jsx(dp,{value:n(S.year,S.month),defaultYear:S.year,onChange:ae=>{const ue=s(ae);ue&&I(Z=>({...Z,year:ue.year,month:ue.month}))},className:"w-full",required:!0,disabled:!!N})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("monthlyMeasurements.fields.indicator")??"Indicator"}),r.jsx("select",{className:"input",value:S.indicator,onChange:ae=>I(ue=>({...ue,indicator:ae.target.value})),required:!0,disabled:!!N,children:yc.map(ae=>r.jsx("option",{value:ae.value,children:X(ae.value)},ae.value))})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("monthlyMeasurements.fields.valueWithUnit",{unit:H(S.indicator)})??`Value (${H(S.indicator)})`}),r.jsx("input",{type:"number",step:"0.01",className:"input",value:S.value,onChange:ae=>I(ue=>({...ue,value:ae.target.value})),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("monthlyMeasurements.fields.method")??"Method"}),r.jsx("input",{className:"input",value:S.method,onChange:ae=>I(ue=>({...ue,method:ae.target.value}))})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:C,children:e("common.cancel")??"Cancel"}),r.jsx("button",{type:"submit",className:"btn-primary",disabled:m,children:m?r.jsx(Re,{className:"w-4 h-4 animate-spin"}):e("common.save")??"Save"})]})]})}),r.jsx(la,{isOpen:!!A,title:e("monthlyMeasurements.archive.title")??"Archive record",message:e("monthlyMeasurements.archive.message")??"This will archive (soft-delete) the record. Continue?",confirmLabel:e("common.confirm")??"Confirm",cancelLabel:e("common.cancel")??"Cancel",onConfirm:L,onCancel:()=>M(null)})]})}const p1e=Object.freeze(Object.defineProperty({__proto__:null,default:m1e},Symbol.toStringTag,{value:"Module"}));function f1e(){const{t:e}=ut(),{user:t}=At(),a=L=>String(L).padStart(2,"0"),n=(L,X)=>{const H=String(L??"").trim(),F=String(X??"").trim();return!H||!F?"":`${H}-${a(F)}`},s=L=>{const H=String(L??"").trim().match(/^(\d{4})-(\d{2})$/);if(!H)return null;const F=H[1],ke=String(Number(H[2]));return{year:F,month:ke}},[i,o]=f.useState([]),[l,c]=f.useState([]),[d,u]=f.useState(!0),[m,p]=f.useState(!1),[g,x]=f.useState(""),[h,v]=f.useState(""),[b,y]=f.useState(""),[j,_]=f.useState(!1),[w,k]=f.useState(null),[N,P]=f.useState(null),A=t?.project_list_preference??"code",M=f.useMemo(()=>Ir(i,A),[i,A]),R=()=>({project_id:"",measured_at:new Date().toISOString().split("T")[0],location:"",lux_value:"",threshold:"",notes:""}),[O,q]=f.useState(R());f.useEffect(()=>{(async()=>{try{const H=(await it.getAll({per_page:200})).data?.data??[];o(Array.isArray(H)?H:[])}catch{o([])}finally{u(!1)}})()},[]);const S=async()=>{u(!0);try{const L={per_page:100};g&&(L.project_id=g),h&&(L.year=h),b&&(L.month=b);const H=(await ch.getAll(L)).data,F=H?.data??H,ke=Array.isArray(F)?F:F?.data??[];c(ke)}catch{c([])}finally{u(!1)}};f.useEffect(()=>{S()},[g,h,b]);const I=()=>{k(null),q({...R(),project_id:g||""}),_(!0)},E=L=>{k(L),q({project_id:String(L.project_id??""),measured_at:L.measured_at?.substring(0,10)??new Date().toISOString().split("T")[0],location:L.location??"",lux_value:L.lux_value??"",threshold:L.threshold??"",notes:L.notes??""}),_(!0)},W=()=>{_(!1),k(null),q(R())},B=async L=>{L.preventDefault(),p(!0);try{const X={project_id:parseInt(O.project_id),measured_at:O.measured_at,location:O.location,lux_value:Number(O.lux_value),threshold:O.threshold===""?null:Number(O.threshold),notes:O.notes||null};w?.id?await ch.update(w.id,X):await ch.create(X),K.success(w?.id?e("lightingMeasurements.toasts.updated"):e("lightingMeasurements.toasts.created")),W(),S()}catch{K.error(e("common.error"))}finally{p(!1)}},C=L=>P(L),D=async()=>{if(N?.id){p(!0);try{await ch.delete(N.id),K.success(e("lightingMeasurements.toasts.archived")),P(null),S()}catch{K.error(e("common.error"))}finally{p(!1)}}},z=L=>{if(!L)return"-";const X=L.substring(0,10),[H,F,ke]=X.split("-");return`${ke}/${F}/${H}`};return r.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-amber-50 rounded-lg",children:r.jsx(qy,{className:"w-6 h-6 text-amber-600"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:e("lightingMeasurements.pageTitle")}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("lightingMeasurements.pageSubtitle")})]})]}),r.jsxs("button",{onClick:I,className:"btn-primary flex items-center gap-2",children:[r.jsx(Pn,{className:"w-4 h-4"}),e("common.new")]})]}),r.jsx(jf,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3",children:[r.jsxs(ws,{label:e("common.project"),value:g,onChange:x,children:[r.jsx("option",{value:"",children:e("common.all")}),M.map(L=>r.jsx("option",{value:String(L.id),children:L.code?`${L.code} - ${L.name}`:L.name},L.id))]}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:e("lightingMeasurements.filters.year")}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"flex-1",children:r.jsx(So,{value:h,onChange:L=>v(String(L??"")),className:"w-full",placeholder:e("lightingMeasurements.filters.yearPlaceholder")})}),r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>v(""),disabled:!h,"aria-label":e("common.all")??"All",title:e("common.all")??"All",children:r.jsx(qt,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:e("lightingMeasurements.filters.month")}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"flex-1",children:r.jsx(dp,{value:n(h,b),defaultYear:h,onChange:L=>{const X=s(L);X&&(v(X.year),y(X.month))},className:"w-full",placeholder:e("lightingMeasurements.filters.monthPlaceholder")})}),r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>y(""),disabled:!b,"aria-label":e("common.all")??"All",title:e("common.all")??"All",children:r.jsx(qt,{className:"w-4 h-4"})})]})]})]})}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl overflow-hidden",children:[r.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:e("lightingMeasurements.recordsTitle")}),d&&r.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-2",children:[r.jsx(Re,{className:"w-4 h-4 animate-spin"}),r.jsx("span",{children:e("common.loading")})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-4 py-2",children:e("lightingMeasurements.table.date")}),r.jsx("th",{className:"text-left px-4 py-2",children:e("lightingMeasurements.table.project")}),r.jsx("th",{className:"text-left px-4 py-2",children:e("lightingMeasurements.table.location")}),r.jsx("th",{className:"text-left px-4 py-2",children:e("lightingMeasurements.table.lux")}),r.jsx("th",{className:"text-left px-4 py-2",children:e("lightingMeasurements.table.threshold")}),r.jsx("th",{className:"text-left px-4 py-2",children:e("lightingMeasurements.table.compliant")}),r.jsx("th",{className:"text-right px-4 py-2",children:e("lightingMeasurements.table.actions")})]})}),r.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:[l.map(L=>r.jsxs("tr",{className:L.deleted_at?"opacity-60":"",children:[r.jsx("td",{className:"px-4 py-2",children:z(L.measured_at)}),r.jsx("td",{className:"px-4 py-2",children:L.project?.code?`${L.project.code} - ${L.project.name}`:L.project?.name??L.project_id}),r.jsx("td",{className:"px-4 py-2",children:L.location}),r.jsx("td",{className:"px-4 py-2",children:L.lux_value}),r.jsx("td",{className:"px-4 py-2",children:L.threshold??"-"}),r.jsx("td",{className:"px-4 py-2",children:L.is_compliant===null?"-":L.is_compliant?e("common.yes"):e("common.no")}),r.jsx("td",{className:"px-4 py-2",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{className:"btn-secondary",onClick:()=>E(L),children:r.jsx(Lo,{className:"w-4 h-4"})}),r.jsx("button",{className:"btn-secondary",onClick:()=>C(L),children:r.jsx(Nt,{className:"w-4 h-4"})})]})})]},L.id)),!d&&l.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:"7",className:"px-4 py-10 text-center text-gray-500",children:e("lightingMeasurements.noRecords")})})]})]})})]}),r.jsx(nt,{isOpen:j,onClose:W,title:e(w?"lightingMeasurements.modal.editTitle":"lightingMeasurements.modal.newTitle"),children:r.jsxs("form",{onSubmit:B,className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("lightingMeasurements.form.project")}),r.jsxs("select",{className:"input",value:O.project_id,onChange:L=>q(X=>({...X,project_id:L.target.value})),required:!0,children:[r.jsx("option",{value:"",children:e("lightingMeasurements.form.selectProjectPlaceholder")}),M.map(L=>r.jsx("option",{value:String(L.id),children:L.code?`${L.code} - ${L.name}`:L.name},L.id))]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("lightingMeasurements.form.date")}),r.jsx(ot,{value:O.measured_at,onChange:L=>q(X=>({...X,measured_at:L})),className:"w-full",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("lightingMeasurements.form.location")}),r.jsx("input",{className:"input",value:O.location,onChange:L=>q(X=>({...X,location:L.target.value})),required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("lightingMeasurements.form.luxValue")}),r.jsx("input",{type:"number",step:"0.01",min:"0",className:"input",value:O.lux_value,onChange:L=>q(X=>({...X,lux_value:L.target.value})),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("lightingMeasurements.form.thresholdOptional")}),r.jsx("input",{type:"number",step:"0.01",min:"0",className:"input",value:O.threshold,onChange:L=>q(X=>({...X,threshold:L.target.value}))})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("lightingMeasurements.form.notes")}),r.jsx("textarea",{className:"input",rows:"3",value:O.notes,onChange:L=>q(X=>({...X,notes:L.target.value}))})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[r.jsx("button",{type:"button",className:"btn-secondary",onClick:W,children:e("common.cancel")}),r.jsx("button",{type:"submit",className:"btn-primary",disabled:m,children:m?r.jsx(Re,{className:"w-4 h-4 animate-spin"}):e("common.save")})]})]})}),r.jsx(la,{isOpen:!!N,title:e("lightingMeasurements.confirmArchive.title"),message:e("lightingMeasurements.confirmArchive.message"),confirmLabel:e("common.confirm"),cancelLabel:e("common.cancel"),onConfirm:D,onCancel:()=>P(null)})]})}const h1e=Object.freeze(Object.defineProperty({__proto__:null,default:f1e},Symbol.toStringTag,{value:"Module"}));function g1e({label:e,value:t,onChange:a,className:n="",inputClassName:s="",...i}){const o=i.id||`filter-input-${String(e??"field").toLowerCase().replace(/[^a-z0-9]+/g,"-")}`;return r.jsxs("div",{className:`flex flex-col gap-1 ${n}`.trim(),children:[e?r.jsx("label",{htmlFor:o,className:"text-xs font-medium text-gray-700 dark:text-gray-200",children:e}):null,r.jsx("input",{id:o,value:t,onChange:l=>a?.(l.target.value,l),className:`w-full px-3 py-2 rounded-xl border border-gray-300/70 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 text-sm shadow-sm hover:bg-gray-50 dark:hover:bg-gray-900 focus:outline-none focus-visible:ring-2 focus-visible:ring-sgtm-orange focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-900 disabled:opacity-60 disabled:cursor-not-allowed ${s}`,...i})]})}const dj=[{key:"banales",value:"banales"},{key:"betons",value:"btons"},{key:"liquides_sanitaires",value:"liquides sanitaires"},{key:"melange_banales",value:"mlange banales"},{key:"ferraile",value:"ferraile"},{key:"huiles_usees",value:"huiles uses"},{key:"solides_dangereux",value:"solides dangereux"},{key:"medicaux",value:"mdicaux"},{key:"autre",value:"autre"}],nT=[{key:"benne_satellite",value:"benne satellite"},{key:"camion_hydrocureur",value:"camion hydrocureur"},{key:"camion_plateau",value:"camion plateau"},{key:"camion_8x4",value:"camion 8x4"},{key:"camion_citerne",value:"camion citerne"},{key:"camion_ampliroll",value:"camion ampliroll"},{key:"remorque_a_benne",value:"remorque  benne"},{key:"autre",value:"autre"}],sT=[{key:"decharge",value:"dcharge"},{key:"incineration",value:"incinration"},{key:"recyclage",value:"recyclage"},{key:"pretraitement_incineration",value:"prtraitement + incinration"},{key:"recyclage_sur_chantier",value:"recyclage sur chantier"},{key:"traitement_physico_chimique",value:"traitement physico-chimique"},{key:"regeneration_huiles_usees",value:"rgnration (huiles uses)"},{key:"valorisation",value:"valorisation (ferraile / mlange)"},{key:"stockage_temporaire",value:"stockage temporaire (dangereux / mdicaux)"},{key:"neutralisation",value:"neutralisation (dangereux)"},{key:"autre",value:"autre"}];function x1e(){const{t:e}=ut(),{user:t}=At(),[a,n]=f.useState([]),[s,i]=f.useState([]),[o,l]=f.useState({current_page:1,last_page:1,per_page:50,total:0}),[c,d]=f.useState(!0),[u,m]=f.useState(!1),[p,g]=f.useState(""),[x,h]=f.useState(""),[v,b]=f.useState(""),[y,j]=f.useState(""),[_,w]=f.useState(""),[k,N]=f.useState(!1),[P,A]=f.useState(1),[M,R]=f.useState(!1),[O,q]=f.useState(null),[S,I]=f.useState(null),E=t?.project_list_preference??"code",W=f.useMemo(()=>Ir(a,E),[a,E]),B=f.useMemo(()=>{const G=new Map;return(a??[]).forEach(V=>{G.set(String(V.id),V.code?`${V.code} - ${V.name}`:V.name)}),G},[a]),C=()=>({project_id:"",date:new Date().toISOString().split("T")[0],waste_type:"",waste_type_other:"",quantity:"",trips_count:"",transport_method:"",transport_method_other:"",plate_number:"",treatment:"",treatment_other:""}),[D,z]=f.useState(C());f.useEffect(()=>{(async()=>{try{const Y=(await it.getAll({per_page:200})).data?.data??[];n(Array.isArray(Y)?Y:[])}catch{n([])}finally{d(!1)}})()},[]);const L=async()=>{d(!0);try{const G={per_page:50,page:P};p&&(G.project_id=p),x&&(G.waste_type=x),v&&(G.date_from=v),y&&(G.date_to=y),_&&(G.search=_),k&&(G.include_archived=!0);const Y=(await dh.getAll(G)).data,ce=Array.isArray(Y?.data)?Y.data:[];i(ce),l(Y?.meta??{current_page:1,last_page:1,per_page:50,total:ce.length})}catch{i([]),l({current_page:1,last_page:1,per_page:50,total:0})}finally{d(!1)}};f.useEffect(()=>{L()},[p,x,v,y,_,k,P]),f.useEffect(()=>{A(1)},[p,x,v,y,_,k]);const X=()=>{q(null),z({...C(),project_id:p||"",waste_type:x||""}),R(!0)},H=G=>{q(G),z({project_id:String(G.project_id??""),date:G.date?.substring(0,10)??new Date().toISOString().split("T")[0],waste_type:G.waste_type??"",waste_type_other:G.waste_type_other??"",quantity:G.quantity??"",trips_count:G.trips_count??"",transport_method:G.transport_method??"",transport_method_other:G.transport_method_other??"",plate_number:G.plate_number??"",treatment:G.treatment??"",treatment_other:G.treatment_other??""}),R(!0)},F=()=>{R(!1),q(null),z(C())},ke=()=>{const G=[];return D.project_id||G.push(e("wasteManagement.validation.projectRequired")),D.date||G.push(e("wasteManagement.validation.dateRequired")),D.waste_type||G.push(e("wasteManagement.validation.wasteTypeRequired")),D.waste_type==="autre"&&!String(D.waste_type_other||"").trim()&&G.push(e("wasteManagement.validation.wasteTypeOtherRequired")),(D.quantity===""||!Number.isFinite(Number(D.quantity))||Number(D.quantity)<=0)&&G.push(e("wasteManagement.validation.quantityRequired")),(D.trips_count===""||!Number.isFinite(Number(D.trips_count))||Number(D.trips_count)<1)&&G.push(e("wasteManagement.validation.tripsCountRequired")),D.transport_method||G.push(e("wasteManagement.validation.transportMethodRequired")),D.transport_method==="autre"&&!String(D.transport_method_other||"").trim()&&G.push(e("wasteManagement.validation.transportMethodOtherRequired")),String(D.plate_number||"").trim()||G.push(e("wasteManagement.validation.plateNumberRequired")),D.treatment||G.push(e("wasteManagement.validation.treatmentRequired")),D.treatment==="autre"&&!String(D.treatment_other||"").trim()&&G.push(e("wasteManagement.validation.treatmentOtherRequired")),G},ae=async G=>{G.preventDefault();const V=ke();if(V.length>0){K.error(V[0]);return}m(!0);try{const Y={project_id:parseInt(D.project_id),date:D.date,waste_type:D.waste_type,waste_type_other:D.waste_type==="autre"?String(D.waste_type_other||"").trim():null,quantity:Number(D.quantity),trips_count:parseInt(D.trips_count),transport_method:D.transport_method,transport_method_other:D.transport_method==="autre"?String(D.transport_method_other||"").trim():null,plate_number:String(D.plate_number||"").trim(),treatment:D.treatment,treatment_other:D.treatment==="autre"?String(D.treatment_other||"").trim():null};O?.id?(await dh.update(O.id,Y),K.success(e("wasteManagement.toasts.updated"))):(await dh.create(Y),K.success(e("wasteManagement.toasts.created"))),F(),L()}catch(Y){K.error(Y.response?.data?.message??e("errors.somethingWentWrong"))}finally{m(!1)}},ue=G=>I(G),Z=async()=>{if(S?.id){m(!0);try{await dh.delete(S.id),K.success(e("wasteManagement.toasts.deleted")),I(null),L()}catch(G){K.error(G.response?.data?.message??e("errors.somethingWentWrong"))}finally{m(!1)}}},me=G=>{if(!G)return"-";const V=String(G).substring(0,10),[Y,ce,je]=V.split("-");return!Y||!ce||!je?V:`${je}/${ce}/${Y}`},ge=G=>{const V=G?.project_id;return V?B.get(String(V))??G?.project?.name??G?.project_name??"-":"-"},se=G=>{if(!G?.waste_type)return"-";if(G.waste_type==="autre")return G.waste_type_other?`${e("wasteManagement.wasteTypes.autre")} (${G.waste_type_other})`:e("wasteManagement.wasteTypes.autre");const V=dj.find(Y=>Y.value===G.waste_type);return V?e(`wasteManagement.wasteTypes.${V.key}`):G.waste_type},he=G=>{if(!G?.transport_method)return"-";if(G.transport_method==="autre")return G.transport_method_other?`${e("wasteManagement.transportMethods.autre")} (${G.transport_method_other})`:e("wasteManagement.transportMethods.autre");const V=nT.find(Y=>Y.value===G.transport_method);return V?e(`wasteManagement.transportMethods.${V.key}`):G.transport_method},T=G=>{if(!G?.treatment)return"-";if(G.treatment==="autre")return G.treatment_other?`${e("wasteManagement.treatments.autre")} (${G.treatment_other})`:e("wasteManagement.treatments.autre");const V=sT.find(Y=>Y.value===G.treatment);return V?e(`wasteManagement.treatments.${V.key}`):G.treatment},oe=f.useMemo(()=>[{key:"all",value:"",label:e("wasteManagement.tabs.all")}].concat(dj.filter(V=>V.key!=="autre").map(V=>({key:V.key,value:V.value,label:e(`wasteManagement.wasteTypes.${V.key}`)}))),[e]);return r.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-gray-50 rounded-lg",children:r.jsx(Nt,{className:"w-6 h-6 text-gray-700"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:e("wasteManagement.title")}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("wasteManagement.subtitle")})]})]}),r.jsxs("button",{onClick:X,className:"btn-primary flex items-center gap-2",children:[r.jsx(Pn,{className:"w-4 h-4"}),e("wasteManagement.actions.add")]})]}),r.jsx(jf,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-3",children:[r.jsx("div",{className:"md:col-span-2",children:r.jsxs(ws,{label:e("projects.title"),value:p,onChange:g,children:[r.jsx("option",{value:"",children:e("common.all")}),W.map(G=>r.jsx("option",{value:String(G.id),children:G.code?`${G.code} - ${G.name}`:G.name},G.id))]})}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:e("wasteManagement.filters.dateFrom")}),r.jsx(ot,{value:v,onChange:b,className:"w-full"})]}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:e("wasteManagement.filters.dateTo")}),r.jsx(ot,{value:y,onChange:j,className:"w-full"})]}),r.jsx("div",{className:"md:col-span-2",children:r.jsx(g1e,{label:e("wasteManagement.filters.plateSearch"),value:_,onChange:w,placeholder:e("wasteManagement.filters.plateSearchPlaceholder")})}),r.jsxs("div",{className:"md:col-span-2 flex items-center gap-2 pt-1",children:[r.jsx("input",{id:"waste-include-archived",type:"checkbox",checked:k,onChange:G=>N(G.target.checked)}),r.jsx("label",{htmlFor:"waste-include-archived",className:"text-sm text-gray-700 dark:text-gray-200",children:e("wasteManagement.filters.includeArchived")})]})]})}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl overflow-hidden",children:[r.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between gap-3",children:[r.jsx(c$,{value:x,onChange:h,options:oe.map(G=>({value:G.value,label:G.label}))}),c&&r.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-2",children:[r.jsx(Re,{className:"w-4 h-4 animate-spin"}),r.jsx("span",{children:e("common.loading")})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-4 py-2",children:e("wasteManagement.table.date")}),r.jsx("th",{className:"text-left px-4 py-2",children:e("wasteManagement.table.project")}),r.jsx("th",{className:"text-left px-4 py-2",children:e("wasteManagement.table.wasteType")}),r.jsx("th",{className:"text-left px-4 py-2",children:e("wasteManagement.table.quantity")}),r.jsx("th",{className:"text-left px-4 py-2",children:e("wasteManagement.table.tripsCount")}),r.jsx("th",{className:"text-left px-4 py-2",children:e("wasteManagement.table.transportMethod")}),r.jsx("th",{className:"text-left px-4 py-2",children:e("wasteManagement.table.plateNumber")}),r.jsx("th",{className:"text-left px-4 py-2",children:e("wasteManagement.table.treatment")}),r.jsx("th",{className:"text-right px-4 py-2",children:e("common.actions")})]})}),r.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:[s.map(G=>{const V=!!G.can_edit,Y=!!G.can_delete;return r.jsxs("tr",{className:G.deleted_at?"opacity-60":"",children:[r.jsx("td",{className:"px-4 py-2",children:me(G.date)}),r.jsx("td",{className:"px-4 py-2",children:ge(G)}),r.jsx("td",{className:"px-4 py-2",children:se(G)}),r.jsx("td",{className:"px-4 py-2",children:G.quantity??"-"}),r.jsx("td",{className:"px-4 py-2",children:G.trips_count??"-"}),r.jsx("td",{className:"px-4 py-2",children:he(G)}),r.jsx("td",{className:"px-4 py-2",children:G.plate_number??"-"}),r.jsx("td",{className:"px-4 py-2",children:T(G)}),r.jsx("td",{className:"px-4 py-2",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[V&&r.jsx("button",{className:"btn-secondary",onClick:()=>H(G),children:r.jsx(Lo,{className:"w-4 h-4"})}),Y&&r.jsx("button",{className:"btn-secondary",onClick:()=>ue(G),children:r.jsx(Nt,{className:"w-4 h-4"})})]})})]},G.id)}),!c&&s.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:"9",className:"px-4 py-10 text-center text-gray-500",children:e("wasteManagement.emptyState")})})]})]})}),r.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:e("wasteManagement.pagination.total",{total:o.total??0})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{type:"button",className:"btn-outline",disabled:P<=1||c,onClick:()=>A(G=>Math.max(1,G-1)),children:e("wasteManagement.pagination.prev")}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:e("wasteManagement.pagination.pageOf",{page:o.current_page??P,last:o.last_page??1})}),r.jsx("button",{type:"button",className:"btn-outline",disabled:(o.current_page??P)>=(o.last_page??1)||c,onClick:()=>A(G=>G+1),children:e("wasteManagement.pagination.next")})]})]})]}),r.jsx(nt,{isOpen:M,onClose:F,title:O?.id?e("wasteManagement.modal.editTitle"):e("wasteManagement.modal.createTitle"),size:"lg",children:r.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("projects.title")}),r.jsxs("select",{className:"input",value:D.project_id,onChange:G=>z(V=>({...V,project_id:G.target.value})),children:[r.jsx("option",{value:"",children:e("common.select")}),W.map(G=>r.jsx("option",{value:String(G.id),children:G.code?`${G.code} - ${G.name}`:G.name},G.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("wasteManagement.form.date")}),r.jsx(ot,{value:D.date,onChange:G=>z(V=>({...V,date:G})),className:"w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("wasteManagement.form.wasteType")}),r.jsxs("select",{className:"input",value:D.waste_type,onChange:G=>z(V=>({...V,waste_type:G.target.value})),children:[r.jsx("option",{value:"",children:e("common.select")}),dj.map(G=>r.jsx("option",{value:G.value,children:e(`wasteManagement.wasteTypes.${G.key}`)},G.key))]})]}),D.waste_type==="autre"&&r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("wasteManagement.form.wasteTypeOther")}),r.jsx("input",{className:"input",value:D.waste_type_other,onChange:G=>z(V=>({...V,waste_type_other:G.target.value}))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("wasteManagement.form.quantity")}),r.jsx("input",{className:"input",type:"number",step:"0.001",min:"0",value:D.quantity,onChange:G=>z(V=>({...V,quantity:G.target.value}))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("wasteManagement.form.tripsCount")}),r.jsx("input",{className:"input",type:"number",min:"1",value:D.trips_count,onChange:G=>z(V=>({...V,trips_count:G.target.value}))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("wasteManagement.form.transportMethod")}),r.jsxs("select",{className:"input",value:D.transport_method,onChange:G=>z(V=>({...V,transport_method:G.target.value})),children:[r.jsx("option",{value:"",children:e("common.select")}),nT.map(G=>r.jsx("option",{value:G.value,children:e(`wasteManagement.transportMethods.${G.key}`)},G.key))]})]}),D.transport_method==="autre"&&r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("wasteManagement.form.transportMethodOther")}),r.jsx("input",{className:"input",value:D.transport_method_other,onChange:G=>z(V=>({...V,transport_method_other:G.target.value}))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("wasteManagement.form.plateNumber")}),r.jsx("input",{className:"input",value:D.plate_number,onChange:G=>z(V=>({...V,plate_number:G.target.value}))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("wasteManagement.form.treatment")}),r.jsxs("select",{className:"input",value:D.treatment,onChange:G=>z(V=>({...V,treatment:G.target.value})),children:[r.jsx("option",{value:"",children:e("common.select")}),sT.map(G=>r.jsx("option",{value:G.value,children:e(`wasteManagement.treatments.${G.key}`)},G.key))]})]}),D.treatment==="autre"&&r.jsxs("div",{children:[r.jsx("label",{className:"label",children:e("wasteManagement.form.treatmentOther")}),r.jsx("input",{className:"input",value:D.treatment_other,onChange:G=>z(V=>({...V,treatment_other:G.target.value}))})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("button",{type:"button",className:"btn-outline",onClick:F,disabled:u,children:e("common.cancel")}),r.jsx("button",{type:"submit",className:"btn-primary",disabled:u,children:e(u?"common.saving":"common.save")})]})]})}),r.jsx(la,{isOpen:!!S,title:e("wasteManagement.delete.title"),message:e("wasteManagement.delete.message"),confirmLabel:e("common.delete"),cancelLabel:e("common.cancel"),onConfirm:Z,onCancel:()=>I(null)})]})}const y1e=Object.freeze(Object.defineProperty({__proto__:null,default:x1e},Symbol.toStringTag,{value:"Module"})),v1e=50,Ki=new Map;function b1e(){const{t:e,language:t}=ut(),{user:a,token:n}=At(),s=({machineId:ie,updatedAt:Ae,alt:qe,className:Xe})=>{const[Ut,Rt]=f.useState(null);return f.useEffect(()=>{if(!ie||!n){Rt(null);return}let Fa=!1;const Lr=Ae?encodeURIComponent(String(Ae)):"",Af=`/api/heavy-machinery/machines/${ie}/image${Lr?`?v=${Lr}`:""}`,On=`${n}::${ie}::${Lr}`,Bo=Ki.get(On);if(Bo?.objectUrl)return Rt(Bo.objectUrl),()=>{Fa=!0};if(Bo?.pending)return Bo.pending.then(ss=>{Fa||Rt(ss)}).catch(()=>{Fa||Rt(null)}),()=>{Fa=!0};const Aa=(async()=>{const ss=await fetch(Af,{headers:{Authorization:`Bearer ${n}`}});if(!ss.ok)throw new Error(`image fetch failed: ${ss.status}`);const Pa=await ss.blob();return URL.createObjectURL(Pa)})();return Ki.set(On,{pending:Aa}),(async()=>{try{const ss=await Aa;for(Ki.set(On,{objectUrl:ss});Ki.size>v1e;){const Pa=Ki.keys().next().value,_u=Ki.get(Pa);Ki.delete(Pa),_u?.objectUrl&&URL.revokeObjectURL(_u.objectUrl)}Fa||Rt(ss)}catch{Ki.delete(On),Fa||Rt(null)}})(),()=>{Fa=!0}},[ie,n,Ae]),Ut?r.jsx("img",{src:Ut,alt:qe,className:Xe,loading:"lazy"}):null},[i,o]=f.useState([]),[l,c]=f.useState(!1),[d,u]=f.useState(""),[m,p]=f.useState(!1),g=f.useRef(null),x=f.useRef(null),[h,v]=f.useState(""),[b,y]=f.useState(""),[j,_]=f.useState(""),[w,k]=f.useState(""),[N,P]=f.useState([]),A=a?.project_list_preference??"code",M=f.useMemo(()=>Ir(N,A),[N,A]),R=f.useMemo(()=>{const ie=new Set;for(const Ae of M){const qe=String(Ae?.pole??"").trim();qe&&ie.add(qe)}return Array.from(ie).sort((Ae,qe)=>Ae.localeCompare(qe))},[M]),O=f.useMemo(()=>h?M.filter(ie=>String(ie?.pole??"")===String(h)):M,[M,h]),[q,S]=f.useState(!1),[I,E]=f.useState(!1),[W,B]=f.useState(!1),[C,D]=f.useState(""),[z,L]=f.useState(null),[X,H]=f.useState(!1),[F,ke]=f.useState(!1),ae=f.useRef(null),[ue,Z]=f.useState({serial_number:"",internal_code:"",machine_type:"",brand:"",model:"",project_id:"",is_active:!0,image:null}),[me,ge]=f.useState(!1),[se,he]=f.useState(null),[T,oe]=f.useState(!1),[G,V]=f.useState("documents"),[Y,ce]=f.useState(null),[je,re]=f.useState(!1),[U,xe]=f.useState(!1),[J,Q]=f.useState({serial_number:"",internal_code:"",machine_type:"",brand:"",model:"",project_id:"",is_active:!0,image:null}),[ne,ee]=f.useState(!1),[ye,te]=f.useState(!1),[Ne,Ce]=f.useState(!1),[Ue,fe]=f.useState(null),[Te,we]=f.useState({document_key:"",document_label:"",start_date:"",expiry_date:"",file:null}),[Ee,Be]=f.useState(!1),[be,$e]=f.useState(!1),[Ve,_t]=f.useState({start_date:"",end_date:"",file:null}),[bt,Pt]=f.useState(""),[It,Ct]=f.useState([]),[Yt,Ar]=f.useState(!1),[lt,Ft]=f.useState(""),[Pr,an]=f.useState(""),[Fe,Ge]=f.useState(!1),[gt,cr]=f.useState(null),[ve,Le]=f.useState(null),[ze,xt]=f.useState(!1),[rr,Sa]=f.useState(null),[nn,ts]=f.useState(!1),da=f.useRef(null),[Js,Se]=f.useState([]),[Me,vt]=f.useState([]),[Jt,ua]=f.useState(""),[Zl,Xl]=f.useState("");f.useEffect(()=>{const ie=Ae=>{const qe=Ae.target;!ae.current||!(qe instanceof Node)||ae.current.contains(qe)||ke(!1)};return document.addEventListener("mousedown",ie),()=>document.removeEventListener("mousedown",ie)},[]);const ei=f.useCallback(async()=>{try{const Ae=(await zr.getDocumentKeys()).data?.data??[];Se(Array.isArray(Ae)?Ae:[])}catch{Se([])}},[]),rs=f.useCallback(async()=>{try{const Ae=(await zr.getMachineTypes()).data?.data??[],qe=Array.isArray(Ae)?Ae.filter(Xe=>Xe&&typeof Xe=="object").map(Xe=>({value:String(Xe.value??""),label:String(Xe.label??"")})).filter(Xe=>Xe.value.trim()!==""&&Xe.label.trim()!==""):[];vt(qe)}catch{vt([])}},[t]),hu=f.useMemo(()=>{const ie=new Set;for(const Ae of Me)Ae?.value&&ie.add(Ae.value);return ie},[Me]),Li=f.useCallback(ie=>{if(!ie)return"";const qe=(t==="en"?"en":"fr")==="en"?ie.machine_type_label_en:ie.machine_type_label_fr;if(qe)return qe;const Xe=ie.machine_type_key??ie.machine_type;return Xe?Me.find(Rt=>Rt.value===Xe)?.label??String(ie.machine_type??""):""},[t,Me]),gu=ie=>{if(!ie)return null;const Ae=/filename\*=UTF-8''([^;]+)|filename="?([^";]+)"?/i.exec(ie),qe=decodeURIComponent(Ae?.[1]??Ae?.[2]??"");return qe!==""?qe:null},xu=(ie,Ae)=>{if(!ie)return"";const qe=new Date(`${ie}T00:00:00`);if(Number.isNaN(qe.getTime()))return"";qe.setDate(qe.getDate()+Ae);const Xe=qe.getFullYear(),Ut=String(qe.getMonth()+1).padStart(2,"0"),Rt=String(qe.getDate()).padStart(2,"0");return`${Xe}-${Ut}-${Rt}`},yu=(ie,Ae)=>{if(!ie)return"";const qe=new Date(`${ie}T00:00:00`);if(Number.isNaN(qe.getTime()))return"";qe.setFullYear(qe.getFullYear()+Ae);const Xe=qe.getFullYear(),Ut=String(qe.getMonth()+1).padStart(2,"0"),Rt=String(qe.getDate()).padStart(2,"0");return`${Xe}-${Ut}-${Rt}`},Ql=ie=>!ie||typeof ie!="string"?null:ie.startsWith("/api/")?ie.slice(4):ie.startsWith("api/")?ie.slice(3):ie,vu=(ie,Ae)=>{const qe=URL.createObjectURL(ie),Xe=document.createElement("a");Xe.href=qe,Xe.download=Ae??"template.xlsx",document.body.appendChild(Xe),Xe.click(),Xe.remove(),setTimeout(()=>URL.revokeObjectURL(qe),5e3)},$i=async(ie,Ae)=>{const qe=Ql(ie);if(!qe)return;const Xe=await de.get(qe,{responseType:"blob"}),Ut=gu(Xe.headers?.["content-disposition"])??Ae;vu(Xe.data,Ut)},zv=async()=>{try{const ie=await zr.downloadMachinesTemplate(),Ae=gu(ie.headers?.["content-disposition"])??"SGTM-Machines-Template.xlsx";vu(ie.data,Ae)}catch{K.error(e("heavyMachinery.viewMachines.bulk.downloadTemplateFailed"))}},Bv=()=>{Ge(!0)},wf=async()=>{if(!rr){K.error(e("heavyMachinery.viewMachines.bulk.chooseFile"));return}try{ts(!0);const ie=new FormData;ie.append("file",rr);const qe=(await zr.importMachines(ie)).data?.data??{},Xe=qe.imported??0,Ut=qe.updated??0,Rt=qe.errors??[],Fa=qe.failed_rows_url;if(K.success(e("heavyMachinery.viewMachines.bulk.importSummary",{imported:Xe,updated:Ut})),Rt.length>0&&K.error(e("heavyMachinery.viewMachines.bulk.importIssues",{count:Rt.length})),Fa)try{await $i(Fa,"machines_failed_rows.xlsx")}catch{}Sa(null),da.current&&(da.current.value=""),vr()}catch(ie){K.error(ie.response?.data?.message??e("heavyMachinery.viewMachines.bulk.importFailed"))}finally{ts(!1)}},Jl=f.useCallback(async()=>{try{const ie=await it.getAllList({status:"active"});P(Array.isArray(ie)?ie:[])}catch{P([])}},[]),vr=f.useCallback(async()=>{try{c(!0);const Ae=(await zr.getMachines()).data?.data??[];o(Array.isArray(Ae)?Ae:[])}catch(ie){K.error(ie.response?.data?.message??e("errors.failedToLoad")??"Failed to load"),o([])}finally{c(!1)}},[e]);f.useEffect(()=>{Jl(),vr(),ei(),rs()},[Jl,vr,ei,rs]),f.useEffect(()=>{if(!m)return;const ie=qe=>{qe.key==="Escape"&&p(!1)},Ae=qe=>{const Xe=g.current,Ut=x.current,Rt=qe.target;Xe&&Xe.contains(Rt)||Ut&&Ut.contains(Rt)||p(!1)};return document.addEventListener("keydown",ie),document.addEventListener("mousedown",Ae),()=>{document.removeEventListener("keydown",ie),document.removeEventListener("mousedown",Ae)}},[m]),f.useEffect(()=>{if(!h||!b)return;O.some(Ae=>String(Ae.id)===String(b))||y("")},[h]),f.useEffect(()=>()=>{ve&&URL.revokeObjectURL(ve)},[ve]);const Wv=f.useMemo(()=>{let ie=Array.isArray(i)?i:[];h&&(ie=ie.filter(qe=>String(qe?.project?.pole??"")===String(h))),b&&(ie=ie.filter(qe=>String(qe?.project_id??qe?.project?.id??"")===String(b))),j&&(ie=ie.filter(qe=>String(qe?.machine_type_key??qe?.machine_type??"")===String(j))),w==="active"?ie=ie.filter(qe=>!!qe?.is_active):w==="inactive"&&(ie=ie.filter(qe=>!qe?.is_active));const Ae=d.trim().toLowerCase();return Ae?ie.filter(qe=>[qe.serial_number,qe.internal_code,qe.machine_type,qe.machine_type_label_fr,qe.machine_type_label_en,qe.brand,qe.model,qe.project?.name].filter(Boolean).join(" ").toLowerCase().includes(Ae)):ie},[i,d,j,h,b,w]),Uv=()=>{Z({serial_number:"",internal_code:"",machine_type:"",brand:"",model:"",project_id:"",is_active:!0,image:null}),ua(""),D(""),L(null),B(!0)},bu=async()=>{const ie=C.trim();if(ie)try{H(!0);const qe=(await zr.globalSearch(ie)).data?.data?.machine??null;if(qe?.id){const Xe=qe.machine_type_key??qe.machine_type??"",Ut=Xe&&hu.has(Xe);L(qe.id),ua(Me.length>0&&Ut?Xe:""),Z({serial_number:qe.serial_number??ie,internal_code:qe.internal_code??"",machine_type:Ut?Xe:"",brand:qe.brand??"",model:qe.model??"",project_id:"",is_active:qe.is_active!==void 0?!!qe.is_active:!0,image:null})}else L(null),ua(""),Z({serial_number:ie,internal_code:"",machine_type:"",brand:"",model:"",project_id:"",is_active:!0,image:null});B(!1),S(!0)}catch(Ae){K.error(Ae.response?.data?.message??e("errors.somethingWentWrong"))}finally{H(!1)}},Hv=()=>{const ie=Y?.machine;if(!ie)return;const Ae=ie.machine_type_key??ie.machine_type??"",qe=Ae&&hu.has(Ae);Q({serial_number:ie.serial_number??"",internal_code:ie.internal_code??"",machine_type:qe?Ae:"",brand:ie.brand??"",model:ie.model??"",project_id:ie.project_id?String(ie.project_id):"",is_active:!!ie.is_active,image:null}),Xl(qe?Ae:""),re(!0)},as=async ie=>{if(ie)try{oe(!0);const Ae=await zr.getMachine(ie);ce(Ae.data?.data??null)}catch(Ae){K.error(Ae.response?.data?.message??e("errors.failedToLoad")??"Failed to load"),ce(null)}finally{oe(!1)}},Ri=async ie=>{he(ie),ge(!0),V("documents"),Pt(""),Ct([]),Ft(""),an(""),await as(ie)},_f=()=>{ge(!1),he(null),ce(null),V("documents")},ns=async ie=>{if(ie?.file_view_url)try{cr(ie),xt(!0),ve&&(URL.revokeObjectURL(ve),Le(null));const Ae=Ql(ie.file_view_url),qe=await de.get(Ae,{responseType:"blob"}),Xe=URL.createObjectURL(qe.data);Le(Xe)}catch(Ae){K.error(Ae.response?.data?.message??e("errors.somethingWentWrong")??"Failed to preview"),cr(null)}finally{xt(!1)}},Kv=()=>{cr(null),xt(!1),ve&&(URL.revokeObjectURL(ve),Le(null))},Xr=async(ie,Ae="document.pdf")=>{if(ie?.file_download_url)try{const qe=Ql(ie.file_download_url),Xe=await de.get(qe,{responseType:"blob"}),Rt=gu(Xe.headers?.["content-disposition"])??Ae;vu(Xe.data,Rt)}catch(qe){K.error(qe.response?.data?.message??e("errors.somethingWentWrong")??"Failed to download")}},ju=(ie=null)=>{fe(ie);const Ae=ie?.document_key??"",qe=ie?.document_label??"",Xe=Js.find(Lr=>Lr.key===Ae)?.label,Ut=ie?.start_date??"",Rt=ie?.expiry_date??"",Fa=!Rt&&Ut?yu(Ut,1):Rt;we({document_key:Ae,document_label:qe||Xe||"",start_date:Ut,expiry_date:Fa,file:null}),te(!0)},ma=async ie=>{if(ie.preventDefault(),!!se&&Te.document_key.trim()){if(!Te.file&&!Ue){K.error(e("heavyMachinery.viewMachines.documents.choosePdf"));return}try{Ce(!0);const Ae=new FormData;Ae.append("document_key",Te.document_key.trim()),Te.start_date&&Ae.append("start_date",Te.start_date),Te.expiry_date&&Ae.append("expiry_date",Te.expiry_date),Te.file&&Ae.append("file",Te.file),Ue?.id?await zr.updateDocument(se,Ue.id,Ae):await zr.upsertDocument(se,Ae),K.success(e("heavyMachinery.viewMachines.documents.uploaded")),te(!1),fe(null),await as(se)}catch(Ae){K.error(Ae.response?.data?.message??e("heavyMachinery.viewMachines.documents.uploadFailed"))}finally{Ce(!1)}}},ec=async ie=>{if(!(!se||!ie?.id||!window.confirm(e("common.delete"))))try{await zr.deleteDocument(se,ie.id),K.success(e("common.success")),await as(se)}catch(qe){K.error(qe.response?.data?.message??e("errors.somethingWentWrong")??"Failed")}},xn=()=>{_t({start_date:"",end_date:"",file:null}),Be(!0)},kf=async ie=>{if(ie.preventDefault(),!!se){if(!Ve.file){K.error(e("heavyMachinery.viewMachines.inspections.choosePdf"));return}try{$e(!0);const Ae=new FormData;Ve.start_date&&Ae.append("start_date",Ve.start_date),Ve.end_date&&Ae.append("end_date",Ve.end_date),Ae.append("file",Ve.file),await zr.upsertInspection(se,Ae),K.success(e("heavyMachinery.viewMachines.inspections.uploaded")),Be(!1),await as(se)}catch(Ae){K.error(Ae.response?.data?.message??e("heavyMachinery.viewMachines.inspections.uploadFailed"))}finally{$e(!1)}}},yn=async ie=>{if(!(!se||!ie?.id||!window.confirm(e("heavyMachinery.viewMachines.inspections.deleteConfirm"))))try{await zr.deleteInspection(se,ie.id),K.success(e("heavyMachinery.viewMachines.inspections.deleted")),await as(se)}catch(qe){K.error(qe.response?.data?.message??e("heavyMachinery.viewMachines.inspections.deleteFailed"))}},qi=Y?.machine?.project_id,zo=f.useCallback(async()=>{if(qi)try{Ar(!0);const Ae=(await zr.searchWorkers({project_id:qi,q:bt.trim()?bt.trim():void 0,limit:20})).data?.data??[];Ct(Array.isArray(Ae)?Ae:[])}catch(ie){Ct([]),K.error(ie.response?.data?.message??e("errors.failedToLoad")??"Failed to load")}finally{Ar(!1)}},[qi,bt]);f.useEffect(()=>{if(!me||!qi)return;if(!bt.trim()){Ct([]),Ft("");return}const ie=setTimeout(()=>{zo()},350);return()=>clearTimeout(ie)},[me,qi,bt,zo]);const tc=async()=>{if(!(!se||!lt))try{await zr.addOperator(se,lt),K.success(e("heavyMachinery.viewMachines.operators.assigned")),Pt(""),Ct([]),Ft(""),await as(se)}catch(ie){K.error(ie.response?.data?.message??e("heavyMachinery.viewMachines.operators.assignFailed"))}},Nf=async ie=>{if(se)try{await zr.removeOperator(se,ie),K.success(e("heavyMachinery.viewMachines.operators.removed")),await as(se)}catch(Ae){K.error(Ae.response?.data?.message??e("heavyMachinery.viewMachines.operators.removeFailed"))}},Sf=async ie=>{if(ie.preventDefault(),!!se)try{xe(!0);const Ae={serial_number:J.serial_number,internal_code:J.internal_code?.trim()?J.internal_code.trim():null,machine_type:J.machine_type,brand:J.brand,model:J.model?.trim()?J.model.trim():null,project_id:J.project_id?Number(J.project_id):null,is_active:!!J.is_active};if(await zr.updateMachine(se,Ae),J.image){const qe=new FormData;qe.append("image",J.image),await zr.uploadMachineImage(se,qe)}K.success(e("common.success")),re(!1),await as(se),vr(),rs()}catch(Ae){K.error(Ae.response?.data?.message??e("errors.somethingWentWrong")??"Failed")}finally{xe(!1)}},wu=async()=>{if(!(!se||!window.confirm(e("heavyMachinery.viewMachines.delete.confirmProfessional")??`Please delete this machine only if it was added by mistake. If the machine still exists but is no longer in your project, set it to INACTIVE instead.

Do you want to delete it now?`)))try{await zr.deleteMachine(se),K.success(e("heavyMachinery.viewMachines.delete.success")),_f(),vr()}catch(Ae){K.error(Ae.response?.data?.message??e("heavyMachinery.viewMachines.delete.failed"))}};return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e("heavyMachinery.title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:e("heavyMachinery.viewMachines.title")})]}),r.jsx("div",{className:"card p-4 overflow-visible",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Yr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",value:d,onChange:ie=>u(ie.target.value),placeholder:e("heavyMachinery.viewMachines.searchPlaceholder"),className:"input pl-9"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"relative",ref:x,children:[r.jsxs("button",{type:"button",ref:g,onClick:()=>p(ie=>!ie),className:"btn-secondary flex items-center gap-2",children:[e("common.filters")??"Filters",r.jsx(Vr,{className:`w-4 h-4 transition ${m?"rotate-180":""}`})]}),m&&r.jsxs("div",{className:"absolute right-0 mt-2 w-[340px] max-w-[90vw] rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 shadow-lg z-50 overflow-hidden",children:[r.jsx("div",{className:"p-3",children:r.jsx(jf,{className:"p-3",children:r.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[r.jsxs(ws,{label:e("common.pole")??"Pole",value:h,onChange:v,children:[r.jsx("option",{value:"",children:e("common.all")??"All"}),R.map(ie=>r.jsx("option",{value:ie,children:ie},ie))]}),r.jsxs(ws,{label:e("common.project")??e("projects.title")??"Project",value:b,onChange:y,children:[r.jsx("option",{value:"",children:e("common.all")??"All"}),O.map(ie=>r.jsx("option",{value:String(ie.id),children:Wt(ie)},ie.id))]}),r.jsxs(ws,{label:e("heavyMachinery.viewMachines.form.machineType")??"Machine type",value:j,onChange:_,children:[r.jsx("option",{value:"",children:e("common.all")??"All"}),Me.map(ie=>r.jsx("option",{value:ie.value,children:ie.label},ie.value))]}),r.jsxs(ws,{label:e("common.status")??"Status",value:w,onChange:k,children:[r.jsx("option",{value:"",children:e("common.all")??"All"}),r.jsx("option",{value:"active",children:e("common.active")??"Active"}),r.jsx("option",{value:"inactive",children:e("common.inactive")??"Inactive"})]})]})})}),r.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between gap-2",children:[r.jsx("button",{type:"button",className:"btn-outline",onClick:()=>{v(""),y(""),_(""),k("")},children:e("common.reset")??"Reset"}),r.jsx("button",{type:"button",className:"btn-primary",onClick:()=>p(!1),children:e("common.apply")??"Apply"})]})]})]}),r.jsxs("button",{type:"button",onClick:vr,className:"btn-secondary flex items-center gap-2",disabled:l,children:[l?r.jsx(Re,{className:"w-4 h-4 animate-spin"}):r.jsx(cd,{className:"w-4 h-4"}),e("heavyMachinery.viewMachines.refresh")]}),r.jsxs("div",{className:"relative",ref:ae,children:[r.jsxs("button",{type:"button",onClick:()=>ke(ie=>!ie),className:"btn-primary flex items-center gap-2",children:[r.jsx(_n,{className:"w-4 h-4"}),e("heavyMachinery.viewMachines.addMachine"),r.jsx(Vr,{className:"w-4 h-4"})]}),F&&r.jsxs("div",{className:"absolute right-0 mt-2 w-56 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 shadow-lg z-50 overflow-hidden",children:[r.jsx("button",{type:"button",className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>{ke(!1),Uv()},children:e("common.create")}),r.jsx("button",{type:"button",className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>{ke(!1),Bv()},children:e("heavyMachinery.viewMachines.bulk.title")})]})]})]})]})}),l?r.jsx("div",{className:"flex items-center justify-center py-10",children:r.jsx(Re,{className:"w-6 h-6 animate-spin text-hse-primary"})}):Wv.length===0?r.jsxs("div",{className:"card p-8 text-center",children:[r.jsx(cf,{className:"w-10 h-10 text-gray-300 dark:text-gray-700 mx-auto mb-3"}),r.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:e("heavyMachinery.viewMachines.emptyTitle")}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("heavyMachinery.viewMachines.emptyHelp")})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:Wv.map(ie=>r.jsxs("div",{role:"button",tabIndex:0,onClick:()=>Ri(ie.id),onKeyDown:Ae=>{Ae.key==="Enter"&&Ri(ie.id)},className:"card p-4 text-left hover:shadow-md transition-shadow cursor-pointer",children:[ie.image_url&&r.jsx("div",{className:"mb-3",children:r.jsx("div",{className:"w-full h-40 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 overflow-hidden",children:r.jsx(s,{machineId:ie.id,updatedAt:ie.updated_at,alt:ie.serial_number,className:"w-full h-full object-cover"})})}),r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:ie.internal_code?`${ie.internal_code}  ${ie.serial_number}`:ie.serial_number}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 truncate",children:Li(ie)+(ie.brand?`  ${ie.brand}`:"")+(ie.model?`  ${ie.model}`:"")}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 truncate",children:ie.project?.name??"-"})]}),r.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-[11px] ${ie.is_active?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-200":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300"}`,children:ie.is_active?e("common.active"):e("common.inactive")})]})]},ie.id))}),Fe&&r.jsx(nt,{isOpen:Fe,onClose:()=>Ge(!1),title:e("heavyMachinery.viewMachines.bulk.title"),size:"xl",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:e("heavyMachinery.viewMachines.bulk.help")}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[r.jsx("button",{type:"button",onClick:zv,className:"btn-secondary",children:e("heavyMachinery.viewMachines.bulk.downloadTemplate")}),r.jsxs("label",{className:"flex items-center justify-between border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-xs cursor-pointer hover:border-hse-primary hover:bg-hse-primary/5",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx($a,{className:"w-4 h-4 text-gray-500"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:rr?rr.name:e("heavyMachinery.viewMachines.bulk.chooseFile")})]}),r.jsx("input",{ref:da,type:"file",accept:".xlsx,.xls",className:"hidden",onChange:ie=>Sa(ie.target.files?.[0]??null)})]}),r.jsx("button",{type:"button",onClick:wf,disabled:nn||!rr,className:"btn-primary",children:e(nn?"heavyMachinery.viewMachines.bulk.importing":"heavyMachinery.viewMachines.bulk.import")})]})]})}),W&&r.jsx(nt,{isOpen:W,onClose:()=>B(!1),title:e("heavyMachinery.viewMachines.form.createSerialTitle"),size:"md",children:r.jsxs("form",{onSubmit:ie=>{ie.preventDefault(),bu()},className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("heavyMachinery.viewMachines.machine.serial")}),r.jsx("input",{className:"input",value:C,onChange:ie=>D(ie.target.value)})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t border-gray-100 dark:border-gray-700",children:[r.jsx("button",{type:"button",className:"btn-outline",onClick:()=>B(!1),children:e("common.cancel")}),r.jsxs("button",{type:"submit",className:"btn-primary flex items-center gap-2",disabled:X||!C.trim(),children:[X&&r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e("heavyMachinery.viewMachines.form.checkSerial")]})]})]})}),q&&r.jsx(nt,{isOpen:q,onClose:()=>S(!1),title:e("heavyMachinery.viewMachines.form.createTitle"),size:"xl",children:r.jsxs("form",{onSubmit:handleCreate,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("heavyMachinery.viewMachines.machine.serial")}),r.jsx("input",{className:"input",value:ue.serial_number,readOnly:!0,required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("heavyMachinery.viewMachines.machine.internal")}),r.jsx("input",{className:"input",value:ue.internal_code,onChange:ie=>Z(Ae=>({...Ae,internal_code:ie.target.value}))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("heavyMachinery.viewMachines.machine.type")}),Me.length>0?r.jsx("div",{className:"space-y-2",children:r.jsxs(Ze,{value:Jt,onChange:ie=>{const Ae=ie.target.value;ua(Ae),Z(qe=>({...qe,machine_type:Ae}))},required:!0,children:[r.jsx("option",{value:"",children:e("common.select")}),Me.map(ie=>r.jsx("option",{value:ie.value,children:ie.label},ie.value))]})}):r.jsx("input",{className:"input",value:ue.machine_type,onChange:ie=>Z(Ae=>({...Ae,machine_type:ie.target.value})),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("heavyMachinery.viewMachines.machine.brand")}),r.jsx("input",{className:"input",value:ue.brand,onChange:ie=>Z(Ae=>({...Ae,brand:ie.target.value})),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("heavyMachinery.viewMachines.machine.model")}),r.jsx("input",{className:"input",value:ue.model,onChange:ie=>Z(Ae=>({...Ae,model:ie.target.value}))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("heavyMachinery.viewMachines.machine.project")}),r.jsxs(Ze,{value:ue.project_id,onChange:ie=>Z(Ae=>({...Ae,project_id:ie.target.value})),children:[r.jsx("option",{value:"",children:e("common.none")}),M.map(ie=>r.jsx("option",{value:ie.id,children:Wt(ie)},ie.id))]})]})]}),r.jsxs("div",{className:`flex items-center justify-between rounded-lg border p-3 ${ue.is_active?"border-green-200 bg-green-50 dark:border-green-900/40 dark:bg-green-900/10":"border-gray-200 bg-gray-50 dark:border-gray-700 dark:bg-gray-800"}`,children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e("heavyMachinery.viewMachines.machine.active")}),r.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300",children:ue.is_active?e("common.active"):e("common.inactive")})]}),r.jsx("button",{type:"button",role:"switch","aria-checked":!!ue.is_active,onClick:()=>Z(ie=>({...ie,is_active:!ie.is_active})),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${ue.is_active?"bg-green-600":"bg-gray-300 dark:bg-gray-600"}`,children:r.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white transition ${ue.is_active?"translate-x-5":"translate-x-1"}`})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("heavyMachinery.viewMachines.form.image")}),r.jsxs("label",{className:"flex items-center justify-between border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-xs cursor-pointer hover:border-hse-primary hover:bg-hse-primary/5",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Gc,{className:"w-4 h-4 text-gray-500"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:ue.image?ue.image.name:e("heavyMachinery.viewMachines.form.chooseImage")})]}),r.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:ie=>Z(Ae=>({...Ae,image:ie.target.files?.[0]??null}))})]}),r.jsx("p",{className:"text-[11px] text-gray-500 dark:text-gray-400 mt-1",children:e("heavyMachinery.viewMachines.form.chooseImage")})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t border-gray-100 dark:border-gray-700",children:[r.jsx("button",{type:"button",className:"btn-outline",onClick:()=>S(!1),children:e("common.cancel")}),r.jsxs("button",{type:"submit",className:"btn-primary flex items-center gap-2",disabled:I||!ue.serial_number.trim()||!ue.machine_type.trim()||!ue.brand.trim(),children:[I&&r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e(z?"common.save":"common.create")]})]})]})}),me&&r.jsx(nt,{isOpen:me,onClose:_f,title:e("heavyMachinery.viewMachines.details"),size:"full",children:T||!Y?r.jsx("div",{className:"flex items-center justify-center py-10",children:r.jsx(Re,{className:"w-6 h-6 animate-spin text-hse-primary"})}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[r.jsx("div",{className:"w-full rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 overflow-hidden",children:Y.machine?.image_url?r.jsx("button",{type:"button",className:"w-full",onClick:()=>ee(!0),title:e("common.view"),children:r.jsx(s,{machineId:Y.machine?.id,updatedAt:Y.machine?.updated_at,alt:Y.machine?.serial_number??"machine",className:"w-full h-72 object-contain"})}):r.jsx("div",{className:"w-full h-72 flex items-center justify-center text-sm text-gray-500",children:e("common.noData")})}),r.jsxs("div",{className:"min-w-0 flex flex-col justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:Y.machine?.project?.name??"-"}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 truncate",children:Y.machine?.internal_code?`${Y.machine.internal_code}  ${Y.machine.serial_number}`:Y.machine?.serial_number}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:Li(Y.machine)+(Y.machine?.brand?`  ${Y.machine.brand}`:"")+(Y.machine?.model?`  ${Y.machine.model}`:"")})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs("button",{type:"button",className:"btn-secondary flex items-center gap-2",onClick:Hv,children:[r.jsx(Mm,{className:"w-4 h-4"}),e("common.edit")]}),r.jsxs("button",{type:"button",className:"btn-secondary flex items-center gap-2",onClick:()=>as(se),disabled:T,children:[T?r.jsx(Re,{className:"w-4 h-4 animate-spin"}):r.jsx(cd,{className:"w-4 h-4"}),e("common.refresh")]}),r.jsxs("button",{type:"button",className:"btn-outline btn-sm flex items-center gap-2 text-red-600 dark:text-red-400 border-red-200 dark:border-red-800 hover:bg-red-50 dark:hover:bg-red-900/20",onClick:wu,children:[r.jsx(Nt,{className:"w-4 h-4"}),e("common.delete")]})]})]})]}),r.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex gap-2 -mb-px",children:[r.jsxs("button",{type:"button",onClick:()=>V("documents"),className:`px-3 py-2 text-sm border rounded-t-lg flex items-center gap-2 ${G==="documents"?"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700 border-b-white dark:border-b-gray-900 text-hse-primary":"border-transparent text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100"}`,children:[r.jsx(pr,{className:"w-4 h-4"}),e("heavyMachinery.viewMachines.tabs.documents")]}),r.jsxs("button",{type:"button",onClick:()=>V("operators"),className:`px-3 py-2 text-sm border rounded-t-lg flex items-center gap-2 ${G==="operators"?"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700 border-b-white dark:border-b-gray-900 text-hse-primary":"border-transparent text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100"}`,children:[r.jsx(sa,{className:"w-4 h-4"}),e("heavyMachinery.viewMachines.tabs.operators")]}),r.jsxs("button",{type:"button",onClick:()=>V("inspections"),className:`px-3 py-2 text-sm border rounded-t-lg flex items-center gap-2 ${G==="inspections"?"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700 border-b-white dark:border-b-gray-900 text-hse-primary":"border-transparent text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100"}`,children:[r.jsx(Ra,{className:"w-4 h-4"}),e("heavyMachinery.viewMachines.tabs.inspections")]})]})}),G==="documents"&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{type:"button",className:"btn-primary flex items-center gap-2",onClick:()=>ju(null),children:[r.jsx(_n,{className:"w-4 h-4"}),e("heavyMachinery.viewMachines.documents.add")]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-xs",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 text-left",children:[r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("heavyMachinery.viewMachines.documents.label")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("heavyMachinery.viewMachines.documents.startDate")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("heavyMachinery.viewMachines.documents.expiryDate")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("common.actions")})]})}),r.jsx("tbody",{children:(Y.documents??[]).map(ie=>r.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[r.jsxs("td",{className:"py-2 pr-3 text-gray-900 dark:text-gray-100",children:[r.jsx("div",{className:"font-medium",children:ie.document_label}),r.jsx("div",{className:"text-[11px] text-gray-500 dark:text-gray-400",children:ie.document_key})]}),r.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200",children:ie.start_date??""}),r.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200",children:ie.expiry_date??""}),r.jsx("td",{className:"py-2 pr-3",children:r.jsxs("div",{className:"flex flex-wrap gap-2",children:[ie.file_view_url&&r.jsxs("button",{type:"button",className:"btn-outline btn-sm flex items-center gap-2",onClick:()=>ns(ie),children:[r.jsx(_r,{className:"w-4 h-4"}),e("common.view")]}),ie.file_download_url&&r.jsxs("button",{type:"button",className:"btn-outline btn-sm flex items-center gap-2",onClick:()=>Xr(ie,`${ie.document_key??"document"}.pdf`),children:[r.jsx(jr,{className:"w-4 h-4"}),e("common.download")]}),r.jsxs("button",{type:"button",className:"btn-outline btn-sm flex items-center gap-2",onClick:()=>ju(ie),children:[r.jsx($a,{className:"w-4 h-4"}),e("heavyMachinery.viewMachines.documents.replace")]}),r.jsxs("button",{type:"button",className:"btn-outline btn-sm flex items-center gap-2 text-red-600 dark:text-red-400",onClick:()=>ec(ie),children:[r.jsx(Nt,{className:"w-4 h-4"}),e("common.delete")]})]})})]},ie.id))})]})})]}),G==="operators"&&r.jsx("div",{className:"space-y-4",children:Y.machine?.project_id?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"card p-4 space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-start",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("input",{className:"input",value:bt,onChange:ie=>{Pt(ie.target.value),Ft(""),an("")},placeholder:e("heavyMachinery.viewMachines.operators.searchPlaceholder")}),bt.trim()&&!lt&&r.jsx("div",{className:"mt-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 overflow-hidden",children:Yt?r.jsx("div",{className:"px-3 py-2 text-xs text-gray-500",children:"..."}):It.length===0?r.jsx("div",{className:"px-3 py-2 text-xs text-gray-500",children:e("common.noData")}):r.jsx("div",{className:"max-h-56 overflow-auto",children:It.map(ie=>r.jsxs("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-800",onClick:()=>{Ft(String(ie.id)),an(`${ie.full_name}${ie.cin?` (${ie.cin})`:""}`),Pt(`${ie.full_name}${ie.cin?` (${ie.cin})`:""}`),Ct([])},children:[r.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:ie.full_name}),r.jsxs("div",{className:"text-[11px] text-gray-500 dark:text-gray-400",children:[ie.cin??""," ",ie.fonction?` ${ie.fonction}`:""]})]},ie.id))})})]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{type:"button",className:"btn-primary w-full",disabled:!lt,onClick:tc,children:e("heavyMachinery.viewMachines.operators.assign")})})]}),lt&&Pr&&r.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-300",children:[e("common.selected"),": ",Pr]})]}),r.jsx("div",{className:"card p-4",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-xs",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 text-left",children:[r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("heavyMachinery.viewMachines.tabs.operators")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:"CIN"}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("common.actions")})]})}),r.jsx("tbody",{children:(Y.operators??[]).map(ie=>r.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[r.jsx("td",{className:"py-2 pr-3 text-gray-900 dark:text-gray-100",children:r.jsx("a",{href:`/workers?worker_id=${ie.id}`,className:"text-hse-primary hover:underline",target:"_blank",rel:"noreferrer",children:ie.full_name})}),r.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200 font-mono",children:ie.cin??""}),r.jsx("td",{className:"py-2 pr-3",children:r.jsx("button",{type:"button",className:"btn-outline btn-sm text-red-600 dark:text-red-400",onClick:()=>Nf(ie.id),children:e("heavyMachinery.viewMachines.operators.remove")})})]},ie.id))})]})})})]}):r.jsx("div",{className:"card p-4 text-sm text-gray-600 dark:text-gray-300",children:e("heavyMachinery.viewMachines.operators.helpNoProject")})}),G==="inspections"&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{type:"button",className:"btn-primary flex items-center gap-2",onClick:xn,children:[r.jsx(_n,{className:"w-4 h-4"}),e("heavyMachinery.viewMachines.inspections.add")]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-xs",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 text-left",children:[r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:"#"}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("heavyMachinery.viewMachines.inspections.startDate")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("heavyMachinery.viewMachines.inspections.endDate")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("common.actions")})]})}),r.jsx("tbody",{children:(Y.inspections??[]).map(ie=>r.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[r.jsxs("td",{className:"py-2 pr-3 text-gray-900 dark:text-gray-100",children:["v",ie.version??1]}),r.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200",children:ie.start_date??""}),r.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200",children:ie.end_date??""}),r.jsx("td",{className:"py-2 pr-3",children:r.jsxs("div",{className:"flex flex-wrap gap-2",children:[ie.file_view_url&&r.jsxs("button",{type:"button",className:"btn-outline btn-sm flex items-center gap-2",onClick:()=>ns(ie),children:[r.jsx(_r,{className:"w-4 h-4"}),e("common.view")]}),ie.file_download_url&&r.jsxs("button",{type:"button",className:"btn-outline btn-sm flex items-center gap-2",onClick:()=>Xr(ie,`inspection_${ie.id}.pdf`),children:[r.jsx(jr,{className:"w-4 h-4"}),e("common.download")]}),r.jsxs("button",{type:"button",className:"btn-outline btn-sm flex items-center gap-2 text-red-600 dark:text-red-400",onClick:()=>yn(ie),children:[r.jsx(Nt,{className:"w-4 h-4"}),e("common.delete")]})]})})]},ie.id))})]})})]})]})}),je&&r.jsx(nt,{isOpen:je,onClose:()=>re(!1),title:e("common.edit"),size:"xl",children:r.jsxs("form",{onSubmit:Sf,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("heavyMachinery.viewMachines.machine.serial")}),r.jsx("input",{className:"input",value:J.serial_number,onChange:ie=>Q(Ae=>({...Ae,serial_number:ie.target.value})),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("heavyMachinery.viewMachines.machine.internal")}),r.jsx("input",{className:"input",value:J.internal_code,onChange:ie=>Q(Ae=>({...Ae,internal_code:ie.target.value}))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("heavyMachinery.viewMachines.machine.type")}),Me.length>0?r.jsx("div",{className:"space-y-2",children:r.jsxs(Ze,{value:Zl,onChange:ie=>{const Ae=ie.target.value;Xl(Ae),Q(qe=>({...qe,machine_type:Ae}))},required:!0,children:[r.jsx("option",{value:"",children:e("common.select")}),Me.map(ie=>r.jsx("option",{value:ie.value,children:ie.label},ie.value))]})}):r.jsx("input",{className:"input",value:J.machine_type,onChange:ie=>Q(Ae=>({...Ae,machine_type:ie.target.value})),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("heavyMachinery.viewMachines.machine.brand")}),r.jsx("input",{className:"input",value:J.brand,onChange:ie=>Q(Ae=>({...Ae,brand:ie.target.value})),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("heavyMachinery.viewMachines.machine.model")}),r.jsx("input",{className:"input",value:J.model,onChange:ie=>Q(Ae=>({...Ae,model:ie.target.value}))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("heavyMachinery.viewMachines.machine.project")}),r.jsxs(Ze,{value:J.project_id,onChange:ie=>Q(Ae=>({...Ae,project_id:ie.target.value})),children:[r.jsx("option",{value:"",children:e("common.none")}),M.map(ie=>r.jsx("option",{value:ie.id,children:Wt(ie)},ie.id))]})]})]}),r.jsxs("div",{className:`flex items-center justify-between rounded-lg border p-3 ${J.is_active?"border-green-200 bg-green-50 dark:border-green-900/40 dark:bg-green-900/10":"border-gray-200 bg-gray-50 dark:border-gray-700 dark:bg-gray-800"}`,children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e("heavyMachinery.viewMachines.machine.active")}),r.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300",children:J.is_active?e("common.active"):e("common.inactive")})]}),r.jsx("button",{type:"button",role:"switch","aria-checked":!!J.is_active,onClick:()=>Q(ie=>({...ie,is_active:!ie.is_active})),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${J.is_active?"bg-green-600":"bg-gray-300 dark:bg-gray-600"}`,children:r.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white transition ${J.is_active?"translate-x-5":"translate-x-1"}`})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("heavyMachinery.viewMachines.form.image")}),r.jsxs("label",{className:"flex items-center justify-between border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-xs cursor-pointer hover:border-hse-primary hover:bg-hse-primary/5",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Gc,{className:"w-4 h-4 text-gray-500"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:J.image?J.image.name:e("common.select")})]}),r.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:ie=>Q(Ae=>({...Ae,image:ie.target.files?.[0]??null}))})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t border-gray-100 dark:border-gray-700",children:[r.jsx("button",{type:"button",className:"btn-outline",onClick:()=>re(!1),children:e("common.cancel")}),r.jsxs("button",{type:"submit",className:"btn-primary flex items-center gap-2",disabled:U,children:[U&&r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e("common.save")]})]})]})}),ne&&Y?.machine?.image_url&&r.jsx(nt,{isOpen:ne,onClose:()=>ee(!1),title:e("common.view"),size:"xl",children:r.jsx("div",{className:"w-full h-[70vh] rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 overflow-hidden flex items-center justify-center",children:r.jsx(s,{machineId:Y.machine?.id,updatedAt:Y.machine?.updated_at,alt:Y.machine?.serial_number??"machine",className:"max-w-full max-h-full object-contain"})})}),ye&&r.jsx(nt,{isOpen:ye,onClose:()=>{te(!1),fe(null)},title:e("heavyMachinery.viewMachines.documents.uploadTitle",{label:Te.document_label||"-"}),size:"xl",children:r.jsxs("form",{onSubmit:ma,className:"space-y-4",children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("heavyMachinery.viewMachines.documents.key")}),Js.length>0?r.jsxs(Ze,{value:Te.document_key,disabled:!!Ue?.id,onChange:ie=>{const Ae=ie.target.value,qe=Js.find(Xe=>Xe.key===Ae)?.label??"";we(Xe=>({...Xe,document_key:Ae,document_label:qe}))},required:!0,children:[r.jsx("option",{value:"",children:e("common.select")}),Js.map(ie=>r.jsx("option",{value:ie.key,children:ie.label},ie.key))]}):r.jsx("input",{className:"input",value:Te.document_key,disabled:!!Ue?.id,onChange:ie=>we(Ae=>({...Ae,document_key:ie.target.value})),required:!0})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("heavyMachinery.viewMachines.documents.startDate")}),r.jsx(ot,{value:Te.start_date,onChange:ie=>we(Ae=>{const qe=Ae.start_date?yu(Ae.start_date,1):"",Xe=ie?yu(ie,1):"",Ut=!Ae.expiry_date||Ae.expiry_date===qe;return{...Ae,start_date:ie,expiry_date:Ut?Xe:Ae.expiry_date}})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("heavyMachinery.viewMachines.documents.expiryDate")}),r.jsx(ot,{value:Te.expiry_date,onChange:ie=>we(Ae=>({...Ae,expiry_date:ie}))})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("heavyMachinery.viewMachines.documents.file")}),r.jsxs("label",{className:"flex items-center justify-between border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-xs cursor-pointer hover:border-hse-primary hover:bg-hse-primary/5",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(pr,{className:"w-4 h-4 text-gray-500"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:Te.file?Te.file.name:e("heavyMachinery.viewMachines.documents.choosePdf")})]}),r.jsx("input",{type:"file",accept:"application/pdf",onChange:ie=>we(Ae=>({...Ae,file:ie.target.files?.[0]??null})),className:"hidden"})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t border-gray-100 dark:border-gray-700",children:[r.jsx("button",{type:"button",className:"btn-outline",onClick:()=>te(!1),children:e("common.cancel")}),r.jsxs("button",{type:"submit",className:"btn-primary flex items-center gap-2",disabled:Ne,children:[Ne&&r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e("common.save")]})]})]})}),Ee&&r.jsx(nt,{isOpen:Ee,onClose:()=>Be(!1),title:e("heavyMachinery.viewMachines.inspections.uploadTitle"),size:"xl",children:r.jsxs("form",{onSubmit:kf,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("heavyMachinery.viewMachines.inspections.startDate")}),r.jsx(ot,{value:Ve.start_date,onChange:ie=>_t(Ae=>{const qe=Ae.start_date?xu(Ae.start_date,7):"",Xe=ie?xu(ie,7):"",Ut=!Ae.end_date||Ae.end_date===qe;return{...Ae,start_date:ie,end_date:Ut?Xe:Ae.end_date}})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("heavyMachinery.viewMachines.inspections.endDate")}),r.jsx(ot,{value:Ve.end_date,onChange:ie=>_t(Ae=>({...Ae,end_date:ie}))})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label text-xs",children:e("heavyMachinery.viewMachines.inspections.file")}),r.jsxs("label",{className:"flex items-center justify-between border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-xs cursor-pointer hover:border-hse-primary hover:bg-hse-primary/5",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(pr,{className:"w-4 h-4 text-gray-500"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:Ve.file?Ve.file.name:e("heavyMachinery.viewMachines.inspections.choosePdf")})]}),r.jsx("input",{type:"file",accept:"application/pdf",onChange:ie=>_t(Ae=>({...Ae,file:ie.target.files?.[0]??null})),className:"hidden"})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t border-gray-100 dark:border-gray-700",children:[r.jsx("button",{type:"button",className:"btn-outline",onClick:()=>Be(!1),children:e("common.cancel")}),r.jsxs("button",{type:"submit",className:"btn-primary flex items-center gap-2",disabled:be,children:[be&&r.jsx(Re,{className:"w-4 h-4 animate-spin"}),e("common.save")]})]})]})}),gt&&r.jsx(nt,{isOpen:!!gt,onClose:Kv,title:e("common.view"),size:"xl",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"h-[70vh]",children:ze?r.jsx("div",{className:"w-full h-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 flex items-center justify-center",children:r.jsx(Re,{className:"w-6 h-6 animate-spin text-hse-primary"})}):ve?r.jsx("iframe",{src:ve,title:e("common.view"),className:"w-full h-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white"}):r.jsx("div",{className:"w-full h-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 flex items-center justify-center text-sm text-gray-500 dark:text-gray-400",children:e("errors.somethingWentWrong")})}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{type:"button",onClick:()=>Xr(gt,"file.pdf"),className:"btn-primary inline-flex items-center gap-2 text-sm",children:[r.jsx(jr,{className:"w-4 h-4"}),e("common.download")]})})]})})]})}const j1e=Object.freeze(Object.defineProperty({__proto__:null,default:b1e},Symbol.toStringTag,{value:"Module"})),w1e=50,Vi=new Map;function _1e(){const{t:e}=ut(),{token:t}=At(),[a,n]=f.useState(""),[s,i]=f.useState(""),[o,l]=f.useState(!1),[c,d]=f.useState(!1),[u,m]=f.useState(null),[p,g]=f.useState(!1),[x,h]=f.useState({info:!0,documents:!0,preview:!0}),[v,b]=f.useState(null),[y,j]=f.useState(null),[_,w]=f.useState(!1),k=E=>!E||typeof E!="string"?null:E.startsWith("/api/")?E.slice(4):E.startsWith("api/")?E.slice(3):E,N=({machineId:E,updatedAt:W,alt:B,className:C})=>{const[D,z]=f.useState(null);return f.useEffect(()=>{if(!E||!t){z(null);return}let L=!1;const X=W?encodeURIComponent(String(W)):"",H=`/api/heavy-machinery/machines/${E}/image${X?`?v=${X}`:""}`,F=`${t}::${E}::${X}`,ke=Vi.get(F);if(ke?.objectUrl)return z(ke.objectUrl),()=>{L=!0};if(ke?.pending)return ke.pending.then(ue=>{L||z(ue)}).catch(()=>{L||z(null)}),()=>{L=!0};const ae=(async()=>{const ue=await fetch(H,{headers:{Authorization:`Bearer ${t}`}});if(!ue.ok)throw new Error(`image fetch failed: ${ue.status}`);const Z=await ue.blob();return URL.createObjectURL(Z)})();return Vi.set(F,{pending:ae}),(async()=>{try{const ue=await ae;for(Vi.set(F,{objectUrl:ue});Vi.size>w1e;){const Z=Vi.keys().next().value,me=Vi.get(Z);Vi.delete(Z),me?.objectUrl&&URL.revokeObjectURL(me.objectUrl)}L||z(ue)}catch{Vi.delete(F),L||z(null)}})(),()=>{L=!0}},[E,t,W]),D?r.jsx("img",{src:D,alt:B,className:C,loading:"lazy"}):null},P=E=>{if(!E)return null;const W=/filename\*=UTF-8''([^;]+)|filename="?([^";]+)"?/i.exec(E),B=decodeURIComponent(W?.[1]??W?.[2]??"");return B!==""?B:null},A=(E,W)=>{const B=URL.createObjectURL(E),C=document.createElement("a");C.href=B,C.download=W??"file.pdf",document.body.appendChild(C),C.click(),C.remove(),setTimeout(()=>URL.revokeObjectURL(B),5e3)};f.useEffect(()=>{const E=setTimeout(()=>{i(a.trim())},350);return()=>clearTimeout(E)},[a]),f.useEffect(()=>{(async()=>{if(!s){d(!1),m(null);return}try{l(!0),d(!0);const W=await zr.globalSearch(s);m(W.data?.data??null)}catch(W){K.error(W.response?.data?.message??e("errors.somethingWentWrong")),m(null)}finally{l(!1)}})()},[s,e]),f.useEffect(()=>()=>{y&&URL.revokeObjectURL(y)},[y]);const M=u?.machine??null,R=f.useMemo(()=>Array.isArray(u?.documents)?u.documents:[],[u]),O=async E=>{if(E?.file_view_url)try{b(E),w(!0),h(D=>({...D,preview:!0})),y&&(URL.revokeObjectURL(y),j(null));const W=k(E.file_view_url),B=await de.get(W,{responseType:"blob"}),C=URL.createObjectURL(B.data);j(C)}catch(W){K.error(W.response?.data?.message??e("errors.somethingWentWrong")),b(null)}finally{w(!1)}},q=()=>{b(null),w(!1),y&&(URL.revokeObjectURL(y),j(null))},S=()=>{g(!1),q()},I=async E=>{if(E?.file_download_url)try{const W=k(E.file_download_url),B=await de.get(W,{responseType:"blob"}),C=P(B.headers?.["content-disposition"]),D=`${E.document_key??"document"}.pdf`;A(B.data,C??D)}catch(W){K.error(W.response?.data?.message??e("errors.somethingWentWrong"))}};return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e("heavyMachinery.title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:e("heavyMachinery.globalSearch.title")})]}),r.jsxs("div",{className:"card p-4 md:p-6 space-y-3",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Yr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{className:"input pl-10 pr-10",value:a,onChange:E=>n(E.target.value),placeholder:e("heavyMachinery.globalSearch.searchPlaceholder")}),a&&r.jsx("button",{type:"button",onClick:()=>n(""),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800",title:e("common.clear")??e("common.reset"),children:r.jsx(qt,{className:"w-4 h-4 text-gray-500"})})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("button",{type:"button",className:"btn-outline",onClick:()=>n(""),disabled:!a&&!c,children:e("common.reset")})})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("heavyMachinery.globalSearch.help")})]}),r.jsx("div",{className:"card p-4 md:p-6",children:o?r.jsx("div",{className:"flex items-center justify-center py-10",children:r.jsx(Re,{className:"w-6 h-6 animate-spin text-hse-primary"})}):c?M?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{role:"button",tabIndex:0,onClick:()=>g(!0),onKeyDown:E=>{E.key==="Enter"&&g(!0)},className:"card p-4 text-left hover:shadow-md transition-shadow cursor-pointer max-w-4xl mx-auto",children:[M.image_url&&r.jsx("div",{className:"mb-3",children:r.jsx("div",{className:"w-full h-48 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 overflow-hidden flex items-center justify-center",children:r.jsx(N,{machineId:M.id,updatedAt:M.updated_at,alt:M.serial_number,className:"w-full h-full object-contain"})})}),r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:M.internal_code?`${M.internal_code}  ${M.serial_number}`:M.serial_number}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 truncate",children:(M.machine_type??"")+(M.brand?`  ${M.brand}`:"")+(M.model?`  ${M.model}`:"")}),r.jsx("p",{className:"text-[11px] text-gray-500 dark:text-gray-400 mt-1 truncate",children:M.project?.name??"-"})]}),r.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-[11px] ${M.is_active?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-200":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300"}`,children:M.is_active?e("common.active"):e("common.inactive")})]})]}),p&&r.jsx(nt,{isOpen:p,onClose:S,title:e("heavyMachinery.viewMachines.details"),size:"full",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[r.jsx("div",{className:"w-full rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 overflow-hidden",children:M.image_url?r.jsx("div",{className:"w-full",children:r.jsx(N,{machineId:M.id,updatedAt:M.updated_at,alt:M.serial_number??"machine",className:"w-full h-72 object-contain"})}):r.jsx("div",{className:"w-full h-72 flex items-center justify-center text-sm text-gray-500",children:e("common.noData")})}),r.jsxs("div",{className:"min-w-0 flex flex-col justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:M.project?.name??"-"}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 truncate",children:M.internal_code?`${M.internal_code}  ${M.serial_number}`:M.serial_number}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:(M.machine_type??"")+(M.brand?`  ${M.brand}`:"")+(M.model?`  ${M.model}`:"")}),r.jsx("div",{className:"mt-2",children:r.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-[11px] ${M.is_active?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-200":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300"}`,children:M.is_active?e("common.active"):e("common.inactive")})})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"shrink-0 w-10 h-10 rounded-lg bg-hse-primary/10 flex items-center justify-center",children:r.jsx(cf,{className:"w-5 h-5 text-hse-primary"})}),r.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300",children:e("heavyMachinery.viewMachines.tabs.documents")})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"card p-4",children:[r.jsxs("button",{type:"button",onClick:()=>h(E=>({...E,info:!E.info})),className:"w-full flex items-center justify-between gap-3",children:[r.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100 text-sm",children:e("heavyMachinery.viewMachines.details")}),r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:x.info?"":"+"})]}),x.info&&r.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:e("heavyMachinery.viewMachines.machine.serial")}),r.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:M.serial_number??"-"})]}),r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:e("heavyMachinery.viewMachines.machine.internal")}),r.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:M.internal_code??"-"})]}),r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:e("heavyMachinery.viewMachines.machine.type")}),r.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:M.machine_type??"-"})]}),r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:e("heavyMachinery.viewMachines.machine.brand")}),r.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:M.brand??"-"})]}),r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:e("heavyMachinery.viewMachines.machine.model")}),r.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:M.model??"-"})]}),r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:e("heavyMachinery.viewMachines.machine.project")}),r.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:M.project?.name??"-"})]})]})]}),r.jsxs("div",{className:"card p-4",children:[r.jsxs("button",{type:"button",onClick:()=>h(E=>({...E,documents:!E.documents})),className:"w-full flex items-center justify-between gap-3",children:[r.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100 text-sm",children:e("heavyMachinery.viewMachines.tabs.documents")}),r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:x.documents?"":"+"})]}),x.documents&&r.jsx("div",{className:"mt-4 overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-xs",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 text-left",children:[r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("heavyMachinery.viewMachines.documents.label")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("heavyMachinery.viewMachines.documents.startDate")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("heavyMachinery.viewMachines.documents.expiryDate")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("common.actions")})]})}),r.jsx("tbody",{children:R.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"py-4 text-center text-gray-500 dark:text-gray-400",children:e("common.noData")})}):R.map(E=>r.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[r.jsxs("td",{className:"py-2 pr-3 text-gray-900 dark:text-gray-100",children:[r.jsx("div",{className:"font-medium",children:E.document_label}),r.jsx("div",{className:"text-[11px] text-gray-500 dark:text-gray-400",children:E.document_key})]}),r.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200",children:E.start_date??""}),r.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200",children:E.expiry_date??""}),r.jsx("td",{className:"py-2 pr-3",children:r.jsxs("div",{className:"flex flex-wrap gap-2",children:[E.file_view_url&&r.jsxs("button",{type:"button",className:"btn-outline btn-sm flex items-center gap-2",onClick:()=>O(E),children:[r.jsx(_r,{className:"w-4 h-4"}),e("common.view")]}),E.file_download_url&&r.jsxs("button",{type:"button",className:"btn-outline btn-sm flex items-center gap-2",onClick:()=>I(E),children:[r.jsx(jr,{className:"w-4 h-4"}),e("common.download")]})]})})]},E.id))})]})})]}),r.jsxs("div",{className:"card p-4",children:[r.jsxs("button",{type:"button",onClick:()=>h(E=>({...E,preview:!E.preview})),className:"w-full flex items-center justify-between gap-3",children:[r.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100 text-sm",children:e("common.view")}),r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:x.preview?"":"+"})]}),x.preview&&r.jsx("div",{className:"mt-4 space-y-3",children:v?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:v.document_label}),r.jsx("div",{className:"text-[11px] text-gray-500 dark:text-gray-400 truncate",children:v.document_key})]}),r.jsx("button",{type:"button",onClick:q,className:"btn-outline btn-sm",children:e("common.close")})]}),r.jsx("div",{className:"h-[70vh]",children:_?r.jsx("div",{className:"w-full h-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 flex items-center justify-center",children:r.jsx(Re,{className:"w-6 h-6 animate-spin text-hse-primary"})}):y?r.jsx("iframe",{src:y,title:e("common.view"),className:"w-full h-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white"}):r.jsx("div",{className:"w-full h-full rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 flex items-center justify-center text-sm text-gray-500 dark:text-gray-400",children:e("errors.somethingWentWrong")})}),v?.file_download_url&&r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{type:"button",onClick:()=>I(v),className:"btn-primary inline-flex items-center gap-2 text-sm",children:[r.jsx(pr,{className:"w-4 h-4"}),e("common.download")]})})]}):r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("common.noData")})})]})]})]})})]}):r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:e("heavyMachinery.globalSearch.noResult")}):r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:e("heavyMachinery.globalSearch.help")})})]})}const k1e=Object.freeze(Object.defineProperty({__proto__:null,default:_1e},Symbol.toStringTag,{value:"Module"})),Kh={expiring:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300",expired:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300",unknown:"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300"},gm=e=>{const t=String(e??"").toLowerCase();return t==="expired"?"expired":t==="expiring"?"expiring":"unknown"};function N1e(){const{t:e}=ut(),[t,a]=f.useState(!1),[n,s]=f.useState(null),[i,o]=f.useState(""),[l,c]=f.useState(""),d=f.useCallback(async()=>{try{a(!0);const x=await zr.expiredDocumentation();s(x.data?.data??null)}catch(x){K.error(x.response?.data?.message??e("errors.somethingWentWrong")),s(null)}finally{a(!1)}},[e]);f.useEffect(()=>{d()},[d]);const u=n?.stats??{expiring_count:0,expired_count:0},m=f.useMemo(()=>Array.isArray(n?.projects)?n.projects:[],[n]),p=f.useMemo(()=>m.map(x=>x?.project).filter(Boolean).map(x=>({id:String(x.id),name:x.name})),[m]),g=f.useMemo(()=>{const x=i?m.filter(b=>String(b?.project?.id??"")===String(i)):m,h=l?String(l):"";if(!h)return x;const v=b=>b.some(y=>gm(y?.status)===h);return x.map(b=>{const y=Array.isArray(b?.machines)?b.machines:[],j=Array.isArray(b?.operators)?b.operators:[],_=y.map(k=>{const P=(Array.isArray(k?.documents)?k.documents:[]).filter(A=>gm(A?.status)===h);return{...k,documents:P}}).filter(k=>Array.isArray(k?.documents)?k.documents.length>0:!1),w=j.map(k=>{const P=(Array.isArray(k?.trainings)?k.trainings:[]).filter(A=>gm(A?.status)===h);return{...k,trainings:P}}).filter(k=>Array.isArray(k?.trainings)?k.trainings.length>0:!1);return{...b,machines:_,operators:w}}).filter(b=>{const y=Array.isArray(b?.machines)?b.machines.flatMap(_=>_?.documents??[]):[],j=Array.isArray(b?.operators)?b.operators.flatMap(_=>_?.trainings??[]):[];return v(y)||v(j)})},[m,i,l]);return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e("heavyMachinery.title")}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:e("heavyMachinery.expiredDocumentation.title")})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("heavyMachinery.expiredDocumentation.stats.expired")}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mt-1",children:u.expired_count??0})]}),r.jsx("div",{className:"w-10 h-10 rounded-xl bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:r.jsx(Qt,{className:"w-5 h-5 text-red-600 dark:text-red-300"})})]}),r.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("heavyMachinery.expiredDocumentation.stats.expiring")}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mt-1",children:u.expiring_count??0})]}),r.jsx("div",{className:"w-10 h-10 rounded-xl bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center",children:r.jsx(Xt,{className:"w-5 h-5 text-amber-700 dark:text-amber-300"})})]})]}),r.jsxs("div",{className:"card p-4 md:p-6 space-y-3",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"label text-xs",children:e("heavyMachinery.expiredDocumentation.filters.project")}),r.jsxs(Ze,{value:i,onChange:x=>o(x.target.value),children:[r.jsx("option",{value:"",children:e("common.allProjects")}),p.map(x=>r.jsx("option",{value:x.id,children:x.name},x.id))]})]}),r.jsxs("div",{className:"md:w-64",children:[r.jsx("label",{className:"label text-xs",children:e("heavyMachinery.expiredDocumentation.filters.status")}),r.jsxs(Ze,{value:l,onChange:x=>c(x.target.value),children:[r.jsx("option",{value:"",children:e("heavyMachinery.expiredDocumentation.status.all")}),r.jsx("option",{value:"expired",children:e("heavyMachinery.expiredDocumentation.status.expired")}),r.jsx("option",{value:"expiring",children:e("heavyMachinery.expiredDocumentation.status.expiring")})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",className:"btn-outline",onClick:()=>d(),disabled:t,children:e("common.refresh")}),r.jsx("button",{type:"button",className:"btn-outline",onClick:()=>{o(""),c("")},disabled:!i&&!l,children:e("common.reset")})]})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("heavyMachinery.expiredDocumentation.help")})]}),r.jsx("div",{className:"space-y-4",children:t?r.jsx("div",{className:"card p-10 flex items-center justify-center",children:r.jsx(Re,{className:"w-6 h-6 animate-spin text-hse-primary"})}):g.length===0?r.jsx("div",{className:"card p-8 text-center text-sm text-gray-600 dark:text-gray-300",children:e("heavyMachinery.expiredDocumentation.empty")}):g.map(x=>{const h=x?.project?.name??e("common.unknown"),v=Array.isArray(x?.machines)?x.machines:[],b=Array.isArray(x?.operators)?x.operators:[];return r.jsxs("div",{className:"card p-4 md:p-6 space-y-4",children:[r.jsx("div",{className:"flex items-center justify-between gap-3",children:r.jsxs("div",{className:"min-w-0",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:h}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("heavyMachinery.expiredDocumentation.projectSubtitle")})]})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:e("heavyMachinery.expiredDocumentation.sections.machines")}),v.length===0?r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("heavyMachinery.expiredDocumentation.sections.emptyMachines")}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-xs",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 text-left",children:[r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("heavyMachinery.expiredDocumentation.columns.machine")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("heavyMachinery.expiredDocumentation.columns.document")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("heavyMachinery.expiredDocumentation.columns.expiryDate")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("heavyMachinery.expiredDocumentation.columns.status")})]})}),r.jsx("tbody",{children:v.flatMap(y=>{const j=y?.machine,_=Array.isArray(y?.documents)?y.documents:[],w=j?j.internal_code?`${j.internal_code}  ${j.serial_number}`:j.serial_number:"-";return _.map(k=>{const N=gm(k?.status);return r.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[r.jsx("td",{className:"py-2 pr-3 text-gray-900 dark:text-gray-100 whitespace-nowrap",children:w}),r.jsxs("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200",children:[r.jsx("div",{className:"font-medium",children:k.document_label}),r.jsx("div",{className:"text-[11px] text-gray-500 dark:text-gray-400",children:k.document_key})]}),r.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200 whitespace-nowrap",children:k.expiry_date??""}),r.jsx("td",{className:"py-2 pr-3",children:r.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-[11px] ${Kh[N]??Kh.unknown}`,children:e(`heavyMachinery.expiredDocumentation.status.${N}`)})})]},`m-${j?.id??"x"}-d-${k.id}`)})})})]})})]}),r.jsxs("div",{className:"space-y-3 pt-2 border-t border-gray-100 dark:border-gray-800",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:e("heavyMachinery.expiredDocumentation.sections.operators")}),b.length===0?r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("heavyMachinery.expiredDocumentation.sections.emptyOperators")}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full text-xs",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 text-left",children:[r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("heavyMachinery.expiredDocumentation.columns.worker")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("heavyMachinery.expiredDocumentation.columns.training")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("heavyMachinery.expiredDocumentation.columns.expiryDate")}),r.jsx("th",{className:"py-2 pr-3 font-medium text-gray-500 dark:text-gray-400",children:e("heavyMachinery.expiredDocumentation.columns.status")})]})}),r.jsx("tbody",{children:b.flatMap(y=>{const j=y?.worker,_=Array.isArray(y?.trainings)?y.trainings:[],w=j?`${j.full_name}${j.cin?` (${j.cin})`:""}`:"-";return _.map(k=>{const N=gm(k?.status);return r.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[r.jsx("td",{className:"py-2 pr-3 text-gray-900 dark:text-gray-100 whitespace-nowrap",children:w}),r.jsxs("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200",children:[r.jsx("div",{className:"font-medium",children:k.training_label??k.training_type}),r.jsx("div",{className:"text-[11px] text-gray-500 dark:text-gray-400",children:k.training_type})]}),r.jsx("td",{className:"py-2 pr-3 text-gray-700 dark:text-gray-200 whitespace-nowrap",children:k.expiry_date??""}),r.jsx("td",{className:"py-2 pr-3",children:r.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-[11px] ${Kh[N]??Kh.unknown}`,children:e(`heavyMachinery.expiredDocumentation.status.${N}`)})})]},`w-${j?.id??"x"}-t-${k.id}`)})})})]})})]})]},String(x?.project?.id??h))})})]})}const S1e=Object.freeze(Object.defineProperty({__proto__:null,default:N1e},Symbol.toStringTag,{value:"Module"}));
