import{a as ot,u as ct,p as xe,w as m,j as e}from"./index.js";import{r as a}from"./vendor-react.js";import{D as pe}from"./DatePicker.js";import{C as ge}from"./ConfirmDialog.js";import{S as W}from"./Select.js";import{A as he}from"./AutocompleteInput.js";import{s as it,g as ue}from"./projectList.js";import{z as c,a5 as V,a8 as dt,ah as mt,aw as xt,U as je,h as fe,aa as pt,af as ye,s as Y,ax as gt,i as G,az as ht,B as ut}from"./vendor-ui.js";import"./vendor-utils.js";import"./Modal.js";function Wt(){const{t:s}=ot(),{user:be}=ct(),J=a.useRef(null),[h,ke]=a.useState([]),[b,ve]=a.useState([]),[X,Ne]=a.useState([]),[K,we]=a.useState([]),[M,Se]=a.useState(null),[Ce,Q]=a.useState(!0),[R,j]=a.useState(1),[jt,_e]=a.useState(1),[B,De]=a.useState(0),[We]=a.useState(50),[k,Pe]=a.useState(""),[v,Ae]=a.useState(""),[x,Fe]=a.useState(""),[i,I]=a.useState(""),[p,Te]=a.useState(""),[g,Ee]=a.useState(""),[Le,Z]=a.useState([]),ee=be?.project_list_preference??"code",P=a.useMemo(()=>it(b,ee),[b,ee]),Ue=a.useMemo(()=>{const t=Array.isArray(P)?P:[];return x?t.filter(r=>r?.pole===x):t},[P,x]),[u,A]=a.useState([]),[F,te]=a.useState(!1),[Me,se]=a.useState(!1),[Re,T]=a.useState(!1),[N,$]=a.useState(null),[ae,re]=a.useState(!1),[ne,le]=a.useState(!1),[w,z]=a.useState(null),[f,O]=a.useState(null),[Be,E]=a.useState(!1),[l,d]=a.useState({nom:"",prenom:"",fonction:"",cin:"",date_naissance:"",entreprise:"",project_id:"",date_entree:"",is_active:!0});a.useEffect(()=>{S()},[]),a.useEffect(()=>{C()},[R,v,i,p,g,x]),a.useEffect(()=>{(async()=>{try{const r=await xe.getPoles(),n=r.data?.data?.poles??r.data?.poles??[];Z(Array.isArray(n)?n:[])}catch{Z([])}})()},[]),a.useEffect(()=>{if(!x)return;!b.some(r=>String(r.id)===String(i)&&r?.pole===x)&&i&&I("")},[x,i,b]),a.useEffect(()=>{const t=setTimeout(()=>{Ae(k)},300);return()=>clearTimeout(t)},[k]);const S=async()=>{try{const[t,r,n,o]=await Promise.all([xe.getAllList({status:"active"}),m.getEntreprises(),m.getFonctions(),m.getStatistics()]);ve(Array.isArray(t)?t:[]),Ne(r.data.data??[]),we(n.data.data??[]),Se(o.data.data)}catch(t){console.error("Failed to load initial data:",t)}},C=async()=>{try{Q(!0);const t={page:R,per_page:We,search:v||void 0,pole:x||void 0,project_id:i||void 0,entreprise:p||void 0,fonction:g||void 0,is_active:!0},n=(await m.getAll(t)).data,o=n.data??n,y=Array.isArray(o)?o:o?.data??[],L=n.meta??o.meta??o;ke(U=>R===1?y:[...U,...y]),_e(L.last_page??1),De(L.total??y.length)}catch{c.error(s("errors.somethingWentWrong"))}finally{Q(!1)}},Ie=M?.hse_team??h.filter(t=>t.fonction?.toLowerCase().includes("hse")).length,oe=(t=null)=>{t?($(t),d({nom:t.nom??"",prenom:t.prenom??"",fonction:t.fonction??"",cin:t.cin?.toUpperCase()??"",date_naissance:t.date_naissance?.split("T")[0]??"",entreprise:t.entreprise??"",project_id:t.project_id??"",date_entree:t.date_entree?.split("T")[0]??"",is_active:t.is_active??!0})):($(null),d({nom:"",prenom:"",fonction:"",cin:"",date_naissance:"",entreprise:"",project_id:"",date_entree:"",is_active:!0})),se(!0)},H=()=>{se(!1),$(null)},$e=async t=>{t.preventDefault(),re(!0);const r={...l,cin:l.cin?.toUpperCase()};try{N?(await m.update(N.id,r),c.success(s("workers.updated"))):(await m.create(r)).data.data?.merged?c.success(s("workers.merged")):c.success(s("workers.created")),H(),C(),S()}catch(n){c.error(n.response?.data?.message??s("errors.somethingWentWrong"))}finally{re(!1)}},ze=t=>{O(t)},Oe=async()=>{if(f)try{await m.delete(f.id),c.success(s("workers.deactivated")),C(),S()}catch{c.error(s("errors.somethingWentWrong"))}finally{O(null)}},He=()=>{u.length!==0&&E(!0)},qe=async()=>{if(u.length===0){E(!1);return}try{const t=await m.bulkDeactivate(u);c.success(s("workers.bulkDeactivated",{count:t.data.data.deactivated_count})),A([]),te(!1),C(),S()}catch{c.error(s("errors.somethingWentWrong"))}finally{E(!1)}},ce=async()=>{try{const t=await m.downloadTemplate(),r=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=r,n.setAttribute("download","workers_template.xlsx"),document.body.appendChild(n),n.click(),n.remove()}catch{c.error(s("errors.somethingWentWrong"))}},Ve=async()=>{try{const r={project_id:i||void 0,entreprise:p||void 0,fonction:g||void 0,is_active:!0,search:v||k||void 0},n=await m.export(r),o=n.data instanceof Blob?n.data:new Blob([n.data]),y=window.URL.createObjectURL(o),U=(n.headers?.["content-disposition"]??n.headers?.["Content-Disposition"])?.match(/filename\*=UTF-8''([^;]+)|filename="?([^";]+)"?/i),de=U?.[1]??U?.[2],Xe=de?decodeURIComponent(de):null,_=[];if(i){const me=b.find(lt=>String(lt.id)===String(i))?.name;me&&_.push(me)}p&&_.push(p),g&&_.push(g);const Ke=_.length?_.join(", "):"active",q=new Date,Qe=String(q.getDate()).padStart(2,"0"),Ze=String(q.getMonth()+1).padStart(2,"0"),et=String(q.getFullYear()),tt=`${Qe}-${Ze}-${et}`,st=Ke.replace(/[\\/:*?"<>|]/g,"-").replace(/\s+/g," ").trim(),at=(o.type?.includes("csv")?!0:!!o.type?.includes("text/plain"))?"csv":"xlsx",rt=`Workers_export_(${st})_date(${tt}).${at}`,nt=Xe??rt,D=document.createElement("a");D.href=y,D.setAttribute("download",nt),document.body.appendChild(D),D.click(),D.remove(),c.success(s("common.exportSuccess"))}catch(t){try{const r=t?.response?.data;if(r instanceof Blob&&r.type?.includes("application/json")){const n=await r.text(),o=JSON.parse(n);c.error(o?.message??s("errors.somethingWentWrong"));return}}catch{}c.error(t.response?.data?.message??s("errors.somethingWentWrong"))}},Ye=async()=>{if(w){le(!0);try{const t=new FormData;t.append("file",w),i&&t.append("project_id",i);const r=await m.import(t);c.success(s("workers.importSuccess",{imported:r.data.data.imported_count,merged:r.data.data.merged_count})),T(!1),z(null),C(),S()}catch(t){c.error(t.response?.data?.message??s("errors.somethingWentWrong"))}finally{le(!1)}}},Ge=t=>{A(r=>r.includes(t)?r.filter(n=>n!==t):[...r,t])},ie=()=>{A(F?[]:h.map(t=>t.id)),te(!F)},Je=t=>t?new Date(t).toLocaleDateString("fr-FR"):"-";return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:s("workers.title")}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s("workers.subtitle")})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:ce,className:"btn-outline btn-sm flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"}),s("workers.downloadTemplate")]}),e.jsxs("button",{onClick:()=>T(!0),className:"btn-outline btn-sm flex items-center gap-2",children:[e.jsx(dt,{className:"w-4 h-4"}),s("workers.import")]}),e.jsxs("button",{onClick:Ve,className:"btn-outline btn-sm flex items-center gap-2",children:[e.jsx(mt,{className:"w-4 h-4"}),s("workers.export")]}),e.jsxs("button",{onClick:()=>oe(),className:"btn-primary btn-sm flex items-center gap-2",children:[e.jsx(xt,{className:"w-4 h-4"}),s("workers.addWorker")]})]})]}),M&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"card p-3 flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:e.jsx(je,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:s("workers.totalWorkers")}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:M.active})]})]}),e.jsxs("div",{className:"card p-3 flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-orange-100 dark:bg-orange-900/50 rounded-lg",children:e.jsx(fe,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:s("workers.hseTeam")}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:Ie})]})]})]}),e.jsx("div",{className:"card p-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-2 items-center",children:[e.jsxs("div",{className:"relative md:col-span-3",children:[e.jsx(pt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:k,onChange:t=>{Pe(t.target.value),j(1)},placeholder:s("common.search"),className:"input pl-9 py-1.5 text-sm"})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs(W,{value:x,onChange:t=>{Fe(t.target.value),I(""),j(1)},className:"py-1.5 text-sm",children:[e.jsx("option",{value:"",children:"All Poles"}),Le.map(t=>e.jsx("option",{value:t,children:t},t))]})}),e.jsx("div",{className:"md:col-span-3",children:e.jsxs(W,{value:i,onChange:t=>{I(t.target.value),j(1)},className:"py-1.5 text-sm",children:[e.jsx("option",{value:"",children:s("workers.allProjects")}),Ue.map(t=>e.jsx("option",{value:t.id,children:ue(t)},t.id))]})}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs(W,{value:p,onChange:t=>{Te(t.target.value),j(1)},className:"py-1.5 text-sm",children:[e.jsx("option",{value:"",children:s("workers.allEntreprises")}),X.map(t=>e.jsx("option",{value:t,children:t},t))]})}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs(W,{value:g,onChange:t=>{Ee(t.target.value),j(1)},className:"py-1.5 text-sm",children:[e.jsx("option",{value:"",children:s("workers.allFonctions")}),K.map(t=>e.jsx("option",{value:t,children:t},t))]})})]})}),u.length>0&&e.jsxs("div",{className:"card p-2.5 flex items-center justify-between bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:F,onChange:ie,className:"rounded border-red-300 text-red-600 focus:ring-red-500"}),e.jsxs("span",{className:"text-sm font-medium text-red-700 dark:text-red-300",children:[u.length," ",s("common.selected")]})]}),e.jsxs("button",{onClick:He,className:"btn-danger btn-sm flex items-center gap-1.5 text-xs",children:[e.jsx(ye,{className:"w-3.5 h-3.5"}),s("workers.bulkDeactivate")]})]}),e.jsxs("div",{className:"card overflow-hidden",children:[Ce?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Y,{className:"w-6 h-6 animate-spin text-hse-primary"})}):h.length>0?e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"w-8 px-2 py-2",children:e.jsx("input",{type:"checkbox",checked:F,onChange:ie,className:"w-3.5 h-3.5 rounded border-gray-300 dark:border-gray-600 text-hse-primary focus:ring-hse-primary"})}),e.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:s("workers.nom")}),e.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:s("workers.prenom")}),e.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:s("workers.cin")}),e.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:s("workers.fonction")}),e.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:s("workers.entreprise")}),e.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:s("workers.projet")}),e.jsx("th",{className:"px-2 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:s("workers.dateEntree")}),e.jsx("th",{className:"px-2 py-2 text-center font-semibold text-gray-700 dark:text-gray-300 w-16",children:s("common.actions")})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:h.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[e.jsx("td",{className:"px-2 py-1.5",children:e.jsx("input",{type:"checkbox",checked:u.includes(t.id),onChange:()=>Ge(t.id),className:"w-3.5 h-3.5 rounded border-gray-300 dark:border-gray-600 text-hse-primary focus:ring-hse-primary"})}),e.jsx("td",{className:"px-2 py-1.5 font-medium text-gray-900 dark:text-white",children:t.nom}),e.jsx("td",{className:"px-2 py-1.5 text-gray-700 dark:text-gray-300",children:t.prenom}),e.jsx("td",{className:"px-2 py-1.5 font-mono text-gray-600 dark:text-gray-400",children:t.cin?.toUpperCase()}),e.jsx("td",{className:"px-2 py-1.5 text-gray-700 dark:text-gray-300",children:t.fonction??""}),e.jsx("td",{className:"px-2 py-1.5 text-gray-700 dark:text-gray-300",children:t.entreprise??""}),e.jsx("td",{className:"px-2 py-1.5 text-gray-700 dark:text-gray-300",children:t.project?.name??""}),e.jsx("td",{className:"px-2 py-1.5 text-gray-600 dark:text-gray-400",children:Je(t.date_entree)}),e.jsx("td",{className:"px-2 py-1.5",children:e.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:[e.jsx("button",{onClick:()=>oe(t),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",title:s("common.edit"),children:e.jsx(gt,{className:"w-3.5 h-3.5 text-gray-500 dark:text-gray-400"})}),e.jsx("button",{onClick:()=>ze(t),className:"p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:s("workers.deactivate"),children:e.jsx(ye,{className:"w-3.5 h-3.5 text-red-500 dark:text-red-400"})})]})})]},t.id))})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(je,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:s("workers.noWorkers")})]}),(h.length>0?!0:B>0)&&e.jsxs("div",{className:"px-3 py-2 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between bg-gray-50 dark:bg-gray-800/50",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s("pagination.showing")," ",h.length," ",s("pagination.of")," ",B," ",s("pagination.results")]}),h.length<B&&e.jsx("button",{onClick:()=>j(t=>t+1),className:"px-2 py-1 text-xs rounded border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:s("common.showMore")})]})]}),Me&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 z-[200] p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between bg-white dark:bg-gray-800",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:s(N?"workers.editWorker":"workers.newWorker")}),e.jsx("button",{onClick:H,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx(G,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:$e,className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[s("workers.nom")," *"]}),e.jsx("input",{type:"text",value:l.nom,onChange:t=>d({...l,nom:t.target.value}),className:"input",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[s("workers.prenom")," *"]}),e.jsx("input",{type:"text",value:l.prenom,onChange:t=>d({...l,prenom:t.target.value}),className:"input",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[s("workers.cin")," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(ht,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:l.cin,onChange:t=>d({...l,cin:t.target.value.toUpperCase()}),className:"input pl-10 uppercase",placeholder:"AB123456",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:s("workers.fonction")}),e.jsx(he,{value:l.fonction,onChange:t=>d({...l,fonction:t}),suggestions:K,placeholder:s("workers.fonctionPlaceholder"),icon:e.jsx(fe,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:s("workers.dateNaissance")}),e.jsx(pe,{value:l.date_naissance,onChange:t=>d({...l,date_naissance:t}),placeholder:s("workers.selectDate")}),l.date_naissance&&(()=>{const t=new Date(l.date_naissance),r=new Date,n=r.getFullYear()-t.getFullYear(),o=r.getMonth()-t.getMonth();return(o<0||o===0&&r.getDate()<t.getDate()?n-1:n)<18?e.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400 font-semibold mt-1 flex items-center gap-1",children:[e.jsx("span",{className:"inline-block w-2 h-2 bg-red-500 rounded-full animate-pulse"}),s("workers.minAge")]}):null})()]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:s("workers.dateEntree")}),e.jsx(pe,{value:l.date_entree,onChange:t=>d({...l,date_entree:t}),placeholder:s("workers.selectDate")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:s("workers.entreprise")}),e.jsx(he,{value:l.entreprise,onChange:t=>d({...l,entreprise:t}),suggestions:X,placeholder:s("workers.entreprisePlaceholder"),defaultValue:"SGTM",icon:e.jsx(ut,{className:"w-4 h-4"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:s("workers.projet")}),e.jsxs(W,{value:l.project_id,onChange:t=>d({...l,project_id:t.target.value}),children:[e.jsx("option",{value:"",children:s("common.select")}),P.map(t=>e.jsx("option",{value:t.id,children:ue(t)},t.id))]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-medium text-gray-900 dark:text-white text-sm",children:s("workers.status")}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:s("workers.statusHelp")})]}),e.jsx("button",{type:"button",onClick:()=>d({...l,is_active:!l.is_active}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${l.is_active?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${l.is_active?"translate-x-6":"translate-x-1"}`})})]}),!N&&e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/30 rounded-lg text-sm text-blue-700 dark:text-blue-300",children:e.jsx("p",{children:s("workers.cinInfo")})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:H,className:"btn-outline",children:s("common.cancel")}),e.jsxs("button",{type:"submit",disabled:ae,className:"btn-primary flex items-center gap-2",children:[ae&&e.jsx(Y,{className:"w-4 h-4 animate-spin"}),s(N?"common.save":"workers.addWorker")]})]})]})]})}),Re&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between z-[200]",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:s("workers.importTitle")}),e.jsx("button",{onClick:()=>T(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx(G,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s("workers.importHelp")}),e.jsxs("button",{onClick:ce,className:"w-full btn-outline flex items-center justify-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"}),s("workers.downloadTemplate")]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center",children:[e.jsx("input",{ref:J,type:"file",accept:".xlsx,.xls,.csv",onChange:t=>z(t.target.files[0]),className:"hidden"}),w?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(V,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:w.name}),e.jsx("button",{onClick:()=>z(null),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:e.jsx(G,{className:"w-4 h-4"})})]}):e.jsx("button",{onClick:()=>J.current?.click(),className:"text-hse-primary hover:underline",children:s("workers.selectFile")})]}),e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg text-sm text-amber-700 dark:text-amber-300",children:e.jsx("p",{children:s("workers.cinInfo")})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:()=>T(!1),className:"btn-outline",children:s("common.cancel")}),e.jsxs("button",{onClick:Ye,disabled:w?ne:!0,className:"btn-primary flex items-center gap-2",children:[ne&&e.jsx(Y,{className:"w-4 h-4 animate-spin"}),s("workers.import")]})]})]})]})}),e.jsx(ge,{isOpen:!!f,title:s("common.confirm"),message:f?s("workers.confirmDeactivate",{name:`${f.prenom} ${f.nom}`}):"",confirmLabel:s("workers.deactivate"),cancelLabel:s("common.cancel"),variant:"danger",onConfirm:Oe,onCancel:()=>O(null)}),e.jsx(ge,{isOpen:Be,title:s("common.confirm"),message:s("workers.confirmBulkDeactivate",{count:u.length}),confirmLabel:s("workers.bulkDeactivate"),cancelLabel:s("common.cancel"),variant:"danger",onConfirm:qe,onCancel:()=>E(!1)})]})}export{Wt as default};
