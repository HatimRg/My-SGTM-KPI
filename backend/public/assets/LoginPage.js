import{u as k,a as S,j as e,b as L,s as P}from"./index.js";import{r,u as E,L as C}from"./vendor-react.js";import{a3 as _,a4 as A,a5 as F,a6 as $,E as z,a0 as I,z as p}from"./vendor-ui.js";import"./vendor-utils.js";function O(){const[m,y]=r.useState(""),[h,f]=r.useState(""),[d,b]=r.useState(!1),[o,u]=r.useState({}),[s,g]=r.useState(!1),[w,j]=r.useState(!1),{login:v,isLoading:x}=k(),{t:a}=S(),i=E();r.useEffect(()=>{j(!0)},[]);const N=async l=>{l.preventDefault(),u({});const c={};if(m||(c.email=a("auth.emailRequired")),h||(c.password=a("auth.passwordRequired")),Object.keys(c).length>0){u(c);return}try{g(!0);const n=await v(m,h);p.success(a("auth.loginSuccess")),setTimeout(()=>{if(n.user?.must_change_password){i("/force-change-password");return}const t=n.user.role;["admin","pole_director","works_director","hse_director","hr_director"].includes(t)?i("/admin"):i(t==="user"||t==="animateur"?"/sor":t==="supervisor"?"/supervisor":t==="hr"?"/hr":"/dashboard")},1200)}catch(n){g(!1);const t=n.response?.data?.message??a("auth.invalidCredentials");p.error(t),n.response?.status===422&&u(n.response.data.errors??{})}};return e.jsxs("div",{className:`transition-all duration-500 ${w?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[e.jsx("div",{className:"lg:hidden text-center mb-8",children:e.jsxs("div",{className:"inline-flex items-center justify-center gap-6",children:[e.jsx("img",{src:L,alt:a("auth.appLogoAlt"),width:112,height:112,loading:"eager",decoding:"async",fetchPriority:"high",className:"w-28 h-28 object-contain animate-float"}),e.jsx("span",{className:"text-3xl text-gray-300 font-light",children:"/"}),e.jsx("img",{src:P,alt:a("auth.companyLogoAlt"),width:112,height:112,loading:"eager",decoding:"async",fetchPriority:"high",className:"w-28 h-28 object-contain animate-float-delayed"})]})}),e.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 border border-gray-100 dark:border-gray-700 transition-all duration-300 ${s?"scale-95 opacity-50":"scale-100 opacity-100"}`,children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-sgtm-orange via-hse-primary to-sgtm-orange rounded-t-2xl"}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-sgtm-orange to-hse-primary mb-4 shadow-lg animate-pulse-slow",children:e.jsx(_,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:a("auth.welcomeBack")}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:a("auth.signInToContinue")})]}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"group",children:[e.jsx("label",{htmlFor:"email",className:"label",children:a("auth.email")}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none transition-colors group-focus-within:text-hse-primary",children:e.jsx(A,{className:"h-5 w-5 text-gray-400 dark:text-gray-500 group-focus-within:text-hse-primary transition-colors"})}),e.jsx("input",{id:"email",type:"email",value:m,onChange:l=>y(l.target.value),className:`input pl-10 border-gray-300 dark:border-gray-600 transition-all duration-200 focus:ring-2 focus:ring-hse-primary/20 focus:border-hse-primary ${o.email?"input-error border-red-500":""}`,placeholder:a("auth.emailPlaceholder"),autoComplete:"email",disabled:s})]}),o.email&&e.jsx("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400 animate-shake",children:o.email})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{htmlFor:"password",className:"label",children:a("auth.password")}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(F,{className:"h-5 w-5 text-gray-400 dark:text-gray-500 group-focus-within:text-hse-primary transition-colors"})}),e.jsx("input",{id:"password",type:d?"text":"password",value:h,onChange:l=>f(l.target.value),className:`input pl-10 pr-10 border-gray-300 dark:border-gray-600 transition-all duration-200 focus:ring-2 focus:ring-hse-primary/20 focus:border-hse-primary ${o.password?"input-error border-red-500":""}`,placeholder:"••••••••",autoComplete:"current-password",disabled:s}),e.jsx("button",{type:"button",onClick:()=>b(!d),className:"absolute inset-y-0 right-0 pr-3 flex items-center transition-transform hover:scale-110",disabled:s,"aria-label":a(d?"auth.hidePassword":"auth.showPassword"),children:d?e.jsx($,{className:"h-5 w-5 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-400 transition-colors"}):e.jsx(z,{className:"h-5 w-5 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-400 transition-colors"})})]}),o.password&&e.jsx("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400 animate-shake",children:o.password})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center cursor-pointer group",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-hse-primary border-gray-300 dark:border-gray-600 rounded focus:ring-hse-primary dark:bg-gray-700 transition-transform group-hover:scale-110",disabled:s}),e.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-gray-200 transition-colors",children:a("auth.rememberMe")})]}),e.jsx(C,{to:"/forgot-password",className:"text-sm font-medium text-sgtm-orange-dark hover:text-sgtm-orange dark:text-sgtm-orange-light dark:hover:text-sgtm-orange underline-offset-2 hover:underline",children:a("auth.forgotPassword")})]}),e.jsxs("button",{type:"submit",disabled:x||s,className:"btn-primary w-full py-3 text-base relative overflow-hidden group transition-all duration-300 hover:shadow-lg hover:shadow-hse-primary/25 active:scale-[0.98]",children:[e.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2",children:x||s?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"w-5 h-5 animate-spin"}),a("common.loading")]}):e.jsxs(e.Fragment,{children:[a("auth.signIn"),e.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"→"})]})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700"})]})]})]}),e.jsxs("p",{className:"mt-6 text-center text-sm text-gray-500 dark:text-gray-400",children:["© ",new Date().getFullYear()," ",a("common.companyName")," ",a("common.appName"),"."]})]})}export{O as default};
