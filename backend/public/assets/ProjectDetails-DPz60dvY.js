import{a as ie,u as oe,p as o,j as e}from"./index-Cj_Nywl_.js";import{r as l,h as fe,b as Ne,L as P}from"./vendor-react-Bagy_njL.js";import{C as ve}from"./ConfirmDialog-R0bb8T7D.js";import{S as ke}from"./Select-D_zVsBMD.js";import{U as M,at as q,C as we,a5 as ee,r as E,au as Ce,av as Me,i as se,aw as Se,w as Te,ax as Ae,a as _e,z as i,I as Le,F as Re,ab as Fe,a0 as De,A as Oe,K as Pe,c as Ee,T as B}from"./vendor-ui-ByylQ01J.js";import{R as ae,d as re,C as te,X as le,Y as ne,T as ce,L as de,e as C}from"./vendor-charts-BIh7BMeg.js";import"./vendor-utils-MYqKZVQ3.js";import"./Modal-CFdjfuaB.js";const ze=["responsable","supervisor","animateur"];function Ke({projectId:n,projectName:S}){const{t:a}=ie(),{user:t}=oe(),[p,u]=l.useState([]),[z,T]=l.useState(!0),[j,y]=l.useState(""),[A,v]=l.useState(!1),[m,k]=l.useState(null),[_,L]=l.useState(!1),[R,b]=l.useState(!1),[K,x]=l.useState([]),[r,w]=l.useState([]),[H,J]=l.useState(!1),[$,X]=l.useState(""),[Y,F]=l.useState(!1),[c,h]=l.useState({name:"",email:"",cin:"",role:"animateur",phone:"",password:""}),[g,U]=l.useState(null);l.useEffect(()=>{D()},[n]);const D=async()=>{try{T(!0);const[s,d]=await Promise.all([o.getMembers(n).catch(()=>({data:{data:[]}})),o.getTeam(n).catch(()=>({data:{data:[]}}))]),G=s.data.data||[],ye=d.data.data||[],O=new Map;G.forEach(f=>{O.set(f.id,{...f,canEdit:!0,canRemove:!0})}),ye.forEach(f=>{O.has(f.id)||O.set(f.id,{...f,isTeamMember:!0,canEdit:!1,canRemove:!0})}),u(Array.from(O.values()))}catch(s){console.error("Failed to load members:",s)}finally{T(!1)}},me=async()=>{try{const s=await o.getAvailableOfficers(n);x(s.data.data||[])}catch(s){console.error("Failed to load available officers:",s)}},Q=(s=null)=>{F(!1),s&&s.canEdit?(k(s),h({name:s.name,email:s.email,cin:s.cin||"",role:s.role,phone:s.phone||"",password:""})):(k(null),h({name:"",email:"",cin:"",role:"animateur",phone:"",password:""})),v(!0)},xe=async()=>{F(!1),w([]),X(""),await me(),b(!0)},W=()=>{v(!1),k(null),h({name:"",email:"",cin:"",role:"animateur",phone:"",password:""})},he=async s=>{s.preventDefault(),L(!0);try{m?(await o.updateMember(n,m.id,c),i.success(a("members.updateSuccess"))):(await o.createMember(n,c)).data.data?.merged?i.success(a("members.createMerged")):i.success(a("members.createSuccess")),W(),D()}catch(d){i.error(d.response?.data?.message||a("errors.somethingWentWrong"))}finally{L(!1)}},ge=async()=>{if(r.length!==0){J(!0);try{await o.addTeamMembers(n,r),i.success(a("projects.membersAdded",{count:r.length})),b(!1),w([]),D()}catch(s){i.error(s.response?.data?.message||a("errors.somethingWentWrong"))}finally{J(!1)}}},ue=s=>{U(s)},be=async()=>{if(g)try{if(g.isTeamMember)await o.removeTeamMember(n,g.id),i.success(a("projects.memberRemoved"));else{const s=await o.removeMember(n,g.id);i.success(a("members.removeSuccess")),s.data.data?.deactivated&&i.info(a("members.removeWarning"))}D()}catch(s){i.error(s.response?.data?.message||a("errors.somethingWentWrong"))}finally{U(null)}},pe=s=>{w(d=>d.includes(s)?d.filter(G=>G!==s):[...d,s])},V=p.filter(s=>{if(!j)return!0;const d=j.toLowerCase();return s.name?.toLowerCase().includes(d)||s.email?.toLowerCase().includes(d)||s.cin?.toLowerCase().includes(d)}),Z=K.filter(s=>s.name.toLowerCase().includes($.toLowerCase())||s.email.toLowerCase().includes($.toLowerCase())),je=s=>{switch(s){case"responsable":return"badge-success";case"supervisor":return"badge-info";case"animateur":return"badge-warning";case"user":return"badge-secondary";default:return"badge-secondary"}},I=p.length;return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5 text-hse-primary"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:a("projects.teamMembers")}),e.jsx("span",{className:"badge badge-info",children:I})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>F(!Y),className:"btn-primary btn-sm flex items-center gap-2",children:[e.jsx(q,{className:"w-4 h-4"}),a("members.addMember"),e.jsx(we,{className:"w-4 h-4"})]}),Y&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>F(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-20",children:[e.jsxs("button",{onClick:xe,className:"w-full px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 rounded-t-lg flex items-center gap-3",children:[e.jsx(M,{className:"w-4 h-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:a("projects.addToTeam")}),e.jsx("p",{className:"text-xs text-gray-500",children:a("projects.selectOfficers")})]})]}),e.jsxs("button",{onClick:()=>Q(),className:"w-full px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 rounded-b-lg flex items-center gap-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(q,{className:"w-4 h-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:a("members.newMember")}),e.jsx("p",{className:"text-xs text-gray-500",children:a("members.subtitle")})]})]})]})]})]})]}),e.jsxs("div",{className:"card-body",children:[I>0&&e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:j,onChange:s=>y(s.target.value),placeholder:a("common.search"),className:"input pl-10"})]})}),z?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(E,{className:"w-6 h-6 animate-spin text-hse-primary"})}):V.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:V.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 bg-teal-100 dark:bg-teal-900 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-teal-600 dark:text-teal-400 font-semibold",children:s.name?.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`badge badge-xs ${je(s.role)}`,children:a(`users.roles.${s.role}`)}),s.cin&&e.jsx("span",{className:"text-xs text-gray-500 font-mono",children:s.cin})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[s.canEdit&&e.jsx("button",{onClick:()=>Q(s),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",title:a("common.edit"),children:e.jsx(Ce,{className:"w-4 h-4 text-gray-500"})}),s.canRemove&&s.id!==t?.id&&e.jsx("button",{onClick:()=>ue(s),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:a("projects.removeFromTeam"),children:e.jsx(Me,{className:"w-4 h-4 text-red-500"})})]})]},s.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(M,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:a("projects.noTeamMembers")})]})]}),A&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-lg max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"sticky top-0 z-[200] p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between bg-white dark:bg-gray-800",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:a(m?"members.editMember":"members.newMember")}),e.jsx("button",{onClick:W,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx(se,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:he,className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[a("users.form.fullName")," *"]}),e.jsx("input",{type:"text",value:c.name,onChange:s=>h({...c,name:s.target.value}),className:"input",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[a("users.form.cin")," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Se,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:c.cin,onChange:s=>h({...c,cin:s.target.value}),className:"input pl-10",placeholder:a("users.form.cinPlaceholder"),required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[a("users.form.email")," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Te,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"email",value:c.email,onChange:s=>h({...c,email:s.target.value}),className:"input pl-10",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[a("users.form.role")," *"]}),e.jsx(ke,{value:c.role,onChange:s=>h({...c,role:s.target.value}),required:!0,children:ze.map(s=>e.jsx("option",{value:s,children:a(`users.roles.${s}`)},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:a("users.form.phone")}),e.jsxs("div",{className:"relative",children:[e.jsx(Ae,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"tel",value:c.phone,onChange:s=>h({...c,phone:s.target.value}),className:"input pl-10"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[a("users.form.password")," ",m&&`(${a("users.form.passwordHint")})`]}),e.jsx("input",{type:"password",value:c.password,onChange:s=>h({...c,password:s.target.value}),className:"input",...!m&&{required:!0},minLength:8})]}),!m&&e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-sm text-blue-700 dark:text-blue-300",children:e.jsx("p",{children:a("members.cinInfo")})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:W,className:"btn-outline",children:a("common.cancel")}),e.jsxs("button",{type:"submit",disabled:_,className:"btn-primary flex items-center gap-2",children:[_&&e.jsx(E,{className:"w-4 h-4 animate-spin"}),a(m?"common.save":"members.addMember")]})]})]})]})}),R&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-lg max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"sticky top-0 z-[200] p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between bg-white dark:bg-gray-800",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:a("projects.selectOfficers")}),e.jsx("button",{onClick:()=>b(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx(se,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:$,onChange:s=>X(s.target.value),placeholder:a("common.search"),className:"input pl-10"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:Z.length>0?e.jsx("div",{className:"space-y-2",children:Z.map(s=>e.jsxs("div",{onClick:()=>pe(s.id),className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors ${r.includes(s.id)?"bg-hse-primary/10 border-2 border-hse-primary":"bg-gray-50 dark:bg-gray-700 border-2 border-transparent hover:border-gray-300"}`,children:[e.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center ${r.includes(s.id)?"bg-hse-primary border-hse-primary":"border-gray-300"}`,children:r.includes(s.id)&&e.jsx(_e,{className:"w-3 h-3 text-white"})}),e.jsx("div",{className:"w-10 h-10 bg-teal-100 dark:bg-teal-900 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-teal-600 dark:text-teal-400 font-semibold",children:s.name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.email})]})]},s.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(M,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:a("projects.noAvailableOfficers")})]})}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[r.length," ",a("common.selected")]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>b(!1),className:"btn-outline",children:a("common.cancel")}),e.jsxs("button",{onClick:ge,disabled:r.length===0||H,className:"btn-primary flex items-center gap-2",children:[H?e.jsx(E,{className:"w-4 h-4 animate-spin"}):e.jsx(q,{className:"w-4 h-4"}),a("projects.addSelected")]})]})]})]})}),e.jsx(ve,{isOpen:!!g,title:a("common.confirm"),message:g?g.isTeamMember?a("projects.confirmRemoveMember",{name:g.name}):a("members.removeConfirm",{name:g.name}):"",confirmLabel:a("projects.removeFromTeam"),cancelLabel:a("common.cancel"),variant:"danger",onConfirm:be,onCancel:()=>U(null)})]})}function Xe(){const{id:n}=fe(),S=Ne(),{t:a}=ie(),[t,p]=l.useState(null),[u,z]=l.useState([]),[T,j]=l.useState(!0),{isAdmin:y,user:A}=oe(),v=S.pathname.startsWith("/sor"),m=A?.role==="user",k=A?.role==="responsable",_=y()||k;l.useEffect(()=>{L()},[n]);const L=async()=>{try{j(!0);const[r,w]=await Promise.all([o.getById(n),o.getKpiTrends(n,12)]);p(r.data.data),z(w.data.data||[])}catch{i.error("Failed to load project details")}finally{j(!1)}},R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],b=()=>u.map(r=>({...r,month:R[r.report_month-1],tf:Number(r.tf_value).toFixed(2),tg:Number(r.tg_value).toFixed(2)})),K={active:"badge-success",completed:"badge-info",on_hold:"badge-warning",cancelled:"badge-danger"};if(T)return e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(E,{className:"w-8 h-8 animate-spin text-hse-primary"})});if(!t)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Project not found"}),e.jsx(P,{to:y()?"/admin/projects":"/my-projects",className:"btn-primary mt-4",children:"Back to Projects"})]});const x=t.kpi_summary||{};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs(P,{to:y()?"/admin/projects":v?"/sor/projects":"/my-projects",className:"inline-flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100",children:[e.jsx(Le,{className:"w-4 h-4"}),a("projects.backToProjects")]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-hse-primary/10 rounded-xl flex items-center justify-center",children:e.jsx(Re,{className:"w-8 h-8 text-hse-primary"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:t.name}),e.jsx("span",{className:`badge ${K[t.status]}`,children:t.status.replace("_"," ")})]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:t.code}),t.description&&e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2 max-w-2xl",children:t.description})]})]}),!y()&&(m||v?e.jsx(P,{to:"/sor",className:"btn-primary",children:a("sor.submitDeviation")}):e.jsx(P,{to:`/kpi/submit/${t.id}`,className:"btn-primary",children:a("kpi.submitKpi")}))]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6 pt-6 border-t border-gray-100 dark:border-gray-700",children:[t.location&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[e.jsx(Fe,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:t.location})]}),t.start_date&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[e.jsx(De,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm",children:[new Date(t.start_date).toLocaleDateString(),t.end_date&&` - ${new Date(t.end_date).toLocaleDateString()}`]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[e.jsx(M,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm",children:[t.users?.length||0," assigned users"]})]}),t.client_name&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[e.jsx("span",{className:"text-gray-400",children:"Client:"})," ",t.client_name]})]})]}),_&&t&&e.jsx(Ke,{projectId:t.id,projectName:t.name}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-4",children:[e.jsx(N,{title:"Accidents",value:x.total_accidents||0,icon:Oe,color:x.total_accidents>0?"red":"green"}),e.jsx(N,{title:"Trainings",value:x.total_trainings||0,icon:Pe,color:"blue"}),e.jsx(N,{title:"Inspections",value:x.total_inspections||0,icon:Ee,color:"green"}),e.jsx(N,{title:"Hours Worked",value:Number(x.total_hours_worked||0).toLocaleString(),icon:B,color:"purple"}),e.jsx(N,{title:"Avg TF",value:Number(x.avg_tf||0).toFixed(2),icon:B,color:"amber"}),e.jsx(N,{title:"Avg TG",value:Number(x.avg_tg||0).toFixed(2),icon:B,color:"purple"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Monthly KPI Trends"})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"h-80",children:u.length>0?e.jsx(ae,{width:"100%",height:"100%",children:e.jsxs(re,{data:b(),children:[e.jsx(te,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(le,{dataKey:"month",tick:{fontSize:12}}),e.jsx(ne,{tick:{fontSize:12}}),e.jsx(ce,{}),e.jsx(de,{}),e.jsx(C,{type:"monotone",dataKey:"accidents",stroke:"#dc2626",name:"Accidents"}),e.jsx(C,{type:"monotone",dataKey:"trainings_conducted",stroke:"#3b82f6",name:"Trainings"}),e.jsx(C,{type:"monotone",dataKey:"inspections_completed",stroke:"#16a34a",name:"Inspections"})]})}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:"No data available"})})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"TF & TG Rate Trends"})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"h-80",children:u.length>0?e.jsx(ae,{width:"100%",height:"100%",children:e.jsxs(re,{data:b(),children:[e.jsx(te,{strokeDasharray:"3 3",className:"dark:opacity-20"}),e.jsx(le,{dataKey:"month",tick:{fontSize:12},className:"dark:text-gray-400"}),e.jsx(ne,{tick:{fontSize:12},className:"dark:text-gray-400"}),e.jsx(ce,{}),e.jsx(de,{}),e.jsx(C,{type:"monotone",dataKey:"tf",stroke:"#f59e0b",name:"TF Rate"}),e.jsx(C,{type:"monotone",dataKey:"tg",stroke:"#8b5cf6",name:"TG Rate"})]})}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:"No data available"})})})]})]}),t.users&&t.users.length>0&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Assigned Team Members"})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:t.users.map(r=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-hse-primary rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-semibold",children:r.name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:r.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 capitalize",children:r.role})]})]},r.id))})})]}),t.kpiReports&&t.kpiReports.length>0&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Recent KPI Reports"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Period"}),e.jsx("th",{children:"Accidents"}),e.jsx("th",{children:"Trainings"}),e.jsx("th",{children:"Inspections"}),e.jsx("th",{children:"TF"}),e.jsx("th",{children:"TG"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:t.kpiReports.map(r=>e.jsxs("tr",{children:[e.jsxs("td",{children:[R[r.report_month-1]," ",r.report_year]}),e.jsx("td",{className:r.accidents>0?"text-red-600 font-semibold":"",children:r.accidents}),e.jsx("td",{children:r.trainings_conducted}),e.jsx("td",{children:r.inspections_completed}),e.jsx("td",{children:Number(r.tf_value).toFixed(2)}),e.jsx("td",{children:Number(r.tg_value).toFixed(2)}),e.jsx("td",{children:e.jsx("span",{className:`badge ${r.status==="approved"?"badge-success":r.status==="submitted"?"badge-warning":r.status==="rejected"?"badge-danger":"badge-info"}`,children:r.status})})]},r.id))})]})})]})]})}function N({title:n,value:S,icon:a,color:t}){const p={red:"border-red-200 bg-red-50 dark:border-red-700 dark:bg-red-900/50",green:"border-green-200 bg-green-50 dark:border-green-700 dark:bg-green-900/50",blue:"border-blue-200 bg-blue-50 dark:border-blue-700 dark:bg-blue-900/50",amber:"border-amber-200 bg-amber-50 dark:border-amber-700 dark:bg-amber-900/50",purple:"border-purple-200 bg-purple-50 dark:border-purple-700 dark:bg-purple-900/50"},u={red:"text-red-600 dark:text-red-400",green:"text-green-600 dark:text-green-400",blue:"text-blue-600 dark:text-blue-400",amber:"text-amber-600 dark:text-amber-400",purple:"text-purple-600 dark:text-purple-400"};return e.jsxs("div",{className:`rounded-xl border-2 p-4 ${p[t]}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(a,{className:`w-4 h-4 ${u[t]}`}),e.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:n})]}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:S})]})}export{Xe as default};
