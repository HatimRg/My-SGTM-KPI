import{a as O,j as t}from"./index-Cj_Nywl_.js";import{r as g}from"./vendor-react-Bagy_njL.js";import{a0 as I,a2 as z,a3 as K}from"./vendor-ui-ByylQ01J.js";function A({value:n,onChange:D,placeholder:v,className:j="",required:N=!1,disabled:p=!1}){const{t:i,language:C}=O(),[h,y]=g.useState(!1),[d,m]=g.useState(()=>n?new Date(n):new Date),[o,u]=g.useState("days"),x=g.useRef(null),M=i("datePicker.days"),S=i("datePicker.months"),F=i("datePicker.monthsFull");g.useEffect(()=>{const e=r=>{x.current&&!x.current.contains(r.target)&&y(!1)},a=r=>{r.key==="Escape"&&y(!1)};return h&&(document.addEventListener("mousedown",e),document.addEventListener("keydown",a)),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",a)}},[h]);const $=e=>{const a=e.getFullYear(),r=e.getMonth(),c=new Date(a,r,1),k=new Date(a,r+1,0),l=[],R=new Date(a,r,0);for(let s=c.getDay()-1;s>=0;s--)l.push({date:new Date(a,r-1,R.getDate()-s),isCurrentMonth:!1});for(let s=1;s<=k.getDate();s++)l.push({date:new Date(a,r,s),isCurrentMonth:!0});const w=42,V=w-l.length;for(let s=1;s<=Math.max(0,V);s++)l.push({date:new Date(a,r+1,s),isCurrentMonth:!1});return l.slice(0,w)},f=e=>{const a=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),c=String(e.getDate()).padStart(2,"0");return`${a}-${r}-${c}`},b=e=>{D(f(e)),y(!1),u("days")},E=e=>{m(new Date(d.getFullYear(),e,1)),u("days")},L=e=>e.toDateString()===new Date().toDateString(),P=e=>n&&f(e)===n,Y=()=>{if(!n)return"";const[e,a,r]=n.split("-").map(Number);if(!e||!a||!r)return"";const c=C==="fr"?"fr-FR":"en-US";return new Date(e,a-1,r).toLocaleDateString(c,{day:"2-digit",month:"2-digit",year:"numeric"})};return t.jsxs("div",{ref:x,className:`relative ${j}`,children:[t.jsxs("div",{onClick:()=>!p&&y(!h),className:`input flex items-center justify-between cursor-pointer ${p?"opacity-50 cursor-not-allowed":""}`,children:[t.jsx("span",{className:n?"text-gray-900 dark:text-gray-100":"text-gray-400 dark:text-gray-500",children:Y()||v||i("datePicker.select")}),t.jsx(I,{className:"w-4 h-4 text-gray-400"})]}),t.jsx("input",{type:"hidden",value:n||"",required:N}),h&&t.jsxs("div",{className:"absolute z-[100] mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-2 w-64",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("button",{type:"button",onClick:()=>m(e=>new Date(e.getFullYear()-(o==="months"?1:0),e.getMonth()-(o==="days"?1:0),1)),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:t.jsx(z,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),t.jsxs("button",{type:"button",onClick:()=>u(o==="days"?"months":"days"),className:"font-medium text-sm text-gray-900 dark:text-gray-100 hover:text-hse-primary dark:hover:text-hse-primary px-2 py-0.5 rounded hover:bg-gray-100 dark:hover:bg-gray-700",children:[F[d.getMonth()]," ",d.getFullYear()]}),t.jsx("button",{type:"button",onClick:()=>m(e=>new Date(e.getFullYear()+(o==="months"?1:0),e.getMonth()+(o==="days"?1:0),1)),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:t.jsx(K,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]}),o==="months"?t.jsx("div",{className:"grid grid-cols-3 gap-1",children:S.map((e,a)=>t.jsx("button",{type:"button",onClick:()=>E(a),className:`py-2 text-xs rounded transition-colors
                    ${d.getMonth()===a?"bg-hse-primary text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:e},e))}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"grid grid-cols-7 gap-0.5 mb-1",children:M.map(e=>t.jsx("div",{className:"text-center text-[10px] font-medium text-gray-500 dark:text-gray-400 py-0.5",children:e},e))}),t.jsx("div",{className:"grid grid-cols-7 gap-0.5",children:$(d).map((e,a)=>t.jsx("button",{type:"button",onClick:()=>b(e.date),className:`p-1.5 text-xs rounded transition-colors
                      ${e.isCurrentMonth?"text-gray-900 dark:text-gray-100":"text-gray-300 dark:text-gray-600"}
                      ${L(e.date)?"ring-1 ring-hse-primary":""}
                      ${P(e.date)?"bg-hse-primary text-white":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:e.date.getDate()},a))})]}),t.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:t.jsx("button",{type:"button",onClick:()=>b(new Date),className:"w-full text-xs text-hse-primary hover:underline",children:i("datePicker.today")})})]})]})}export{A as D};
